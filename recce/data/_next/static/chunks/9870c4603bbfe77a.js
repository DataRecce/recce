(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63257,e=>{"use strict";var t=e.i(187725),i=e.i(19483),r=t.createContext(void 0),n=e=>{let i=t.useContext(r);if(e)return e;if(!i)throw Error("No QueryClient set, use QueryClientProvider to set one");return i},o=({client:e,children:n})=>(t.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),(0,i.jsx)(r.Provider,{value:e,children:n}));e.s(["QueryClientProvider",()=>o,"useQueryClient",()=>n])},358102,e=>{"use strict";var t=e.i(187725),i=e.i(19483);let r=t.createContext();e.s(["default",0,function({value:e,...t}){return(0,i.jsx)(r.Provider,{value:e??!0,...t})},"useRtl",0,()=>t.useContext(r)??!1])},960247,e=>{"use strict";var t=e.i(397020);let i={iochmara:{50:"#EAF3FB",100:"#C4DDF3",200:"#9EC6EB",300:"#79B0E2",400:"#5599D8",500:"#3182CE",600:"#2A6CA7",700:"#225581",800:"#193E5C",900:"#102638",950:"#060E14"},cyan:{50:"#ECFEFF",100:"#CFFAFE",200:"#A5F3FC",300:"#67E8F9",400:"#22D3EE",500:"#06B6D4",600:"#0891B2",700:"#0E7490",800:"#155E75",900:"#164E63",950:"#083344"},neutral:{50:"#FAFAFA",100:"#F5F5F5",200:"#E5E5E5",300:"#D4D4D4",400:"#A3A3A3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0A0A0A"},amber:{50:"#FFFBEB",100:"#FEF3C7",200:"#FDE68A",300:"#FCD34D",400:"#FBBF24",500:"#F59E0B",600:"#D97706",700:"#B45309",800:"#92400E",900:"#78350F",950:"#431407"},green:{50:"#F0FDF4",100:"#DCFCE7",200:"#BBF7D0",300:"#86EFAC",400:"#4ADE80",500:"#22C55E",600:"#16A34A",700:"#15803D",800:"#166534",900:"#14532D",950:"#052E16"},red:{50:"#FEF2F2",100:"#FEE2E2",200:"#FECACA",300:"#FCA5A5",400:"#F87171",500:"#EF4444",600:"#DC2626",700:"#B91C1C",800:"#991B1B",900:"#7F1D1D",950:"#450A0A"},rose:{50:"#FFF1F2",100:"#FFE4E6",200:"#FECDD3",300:"#FDA4AF",400:"#FB7185",500:"#F43F5E",600:"#E11D48",700:"#BE123C",800:"#9F1239",900:"#881337",950:"#4C0519"},fuchsia:{50:"#FDF4FF",100:"#FAE8FF",200:"#F5D0FE",300:"#F0ABFC",400:"#E879F9",500:"#D946EF",600:"#C026D3",700:"#A21CAF",800:"#86198F",900:"#701A75",950:"#4A044E"},brand:{50:"#FFDED5",100:"#FFC1B0",200:"#FFA58C",300:"#FF8967",400:"#FF6E42",500:"#FD541E",600:"#F04104",700:"#C93A06",800:"#A23206",900:"#7C2906",950:"#571E05"}},r={envBase:i.amber[500],envCurrent:i.iochmara[500]};function n(e,t){return[{props:{color:e,variant:"contained"},style:{backgroundColor:t[500],color:"#FFFFFF","&:hover":{backgroundColor:t[600]}}},{props:{color:e,variant:"outlined"},style:{borderColor:t[500],color:t[600],"&:hover":{borderColor:t[600],backgroundColor:`${t[50]}80`}}},{props:{color:e,variant:"text"},style:{color:t[600],"&:hover":{backgroundColor:`${t[50]}80`}}}]}function o(e,t){return{props:{color:e},style:{color:t[500]}}}function s(e,t){return{props:{color:e},style:{"& .MuiBadge-badge":{backgroundColor:t[500],color:"#FFFFFF"}}}}function a(e,t){return[{props:{color:e,variant:"filled"},style:{backgroundColor:t[500],color:"#FFFFFF","&:hover":{backgroundColor:t[600]}}},{props:{color:e,variant:"outlined"},style:{borderColor:t[500],color:t[600]}}]}let l=[...n("iochmara",i.iochmara),...n("cyan",i.cyan),...n("amber",i.amber),...n("green",i.green),...n("red",i.red),...n("rose",i.rose),...n("fuchsia",i.fuchsia),...n("brand",i.brand),{props:{color:"neutral",variant:"contained"},style:{backgroundColor:i.neutral[700],color:"#FFFFFF","&:hover":{backgroundColor:i.neutral[800]}}},{props:{color:"neutral",variant:"outlined"},style:{borderColor:i.neutral[300],color:i.neutral[900],"&:hover":{borderColor:i.neutral[400],backgroundColor:i.neutral[100]}}},{props:{color:"neutral",variant:"text"},style:{color:i.neutral[700],"&:hover":{backgroundColor:i.neutral[100]}}}],u=[o("iochmara",i.iochmara),o("cyan",i.cyan),o("amber",i.amber),o("green",i.green),o("red",i.red),o("rose",i.rose),o("fuchsia",i.fuchsia),o("brand",i.brand),o("neutral",i.neutral)],d=[s("iochmara",i.iochmara),s("cyan",i.cyan),s("amber",i.amber),s("green",i.green),s("red",i.red),s("rose",i.rose),s("fuchsia",i.fuchsia),s("brand",i.brand),s("neutral",i.neutral)],c=[...a("iochmara",i.iochmara),...a("cyan",i.cyan),...a("amber",i.amber),...a("green",i.green),...a("red",i.red),...a("rose",i.rose),...a("fuchsia",i.fuchsia),...a("brand",i.brand),...a("neutral",i.neutral)],h={MuiButton:{defaultProps:{disableElevation:!0},variants:[{props:{size:"xsmall"},style:{padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:500,borderRadius:4,minHeight:"unset",lineHeight:1.5}},...l],styleOverrides:{root:{textTransform:"none",fontWeight:500,borderRadius:6},sizeSmall:{padding:"0.25rem 0.75rem",fontSize:"0.875rem"},sizeMedium:{padding:"0.5rem 1rem",fontSize:"1rem"},sizeLarge:{padding:"0.75rem 1.5rem",fontSize:"1.125rem"},contained:{"&:hover":{boxShadow:"none"}},outlined:{borderWidth:"1px","&:hover":{borderWidth:"1px"}},text:{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}},MuiIconButton:{styleOverrides:{root:{borderRadius:6},sizeSmall:{padding:4},sizeMedium:{padding:8},sizeLarge:{padding:12}}},MuiTextField:{defaultProps:{variant:"outlined",size:"small"},styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:6}}}},MuiOutlinedInput:{styleOverrides:{root:{borderRadius:6,"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:i.iochmara[400]},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:i.iochmara[500],borderWidth:2}},notchedOutline:{borderColor:i.neutral[300]}}},MuiCheckbox:{defaultProps:{color:"primary"},styleOverrides:{root:{borderRadius:4}}},MuiSwitch:{defaultProps:{color:"primary"}},MuiDialog:{styleOverrides:{paper:{borderRadius:8}}},MuiDialogTitle:{styleOverrides:{root:{fontWeight:600,fontSize:"1.125rem"}}},MuiMenu:{styleOverrides:{paper:({theme:e})=>({borderRadius:8,boxShadow:e.shadows[3]})}},MuiMenuItem:{styleOverrides:{root:{fontSize:"0.875rem",padding:"0.5rem 0.75rem","&:hover":{backgroundColor:i.neutral[100]},"&.Mui-selected":{backgroundColor:i.iochmara[50],"&:hover":{backgroundColor:i.iochmara[100]}}}}},MuiChip:{variants:[{props:{size:"xsmall"},style:{height:20,fontSize:"0.625rem"}},...c],styleOverrides:{root:{borderRadius:6,fontWeight:500},sizeSmall:{height:24,fontSize:"0.75rem"},sizeMedium:{height:32,fontSize:"0.875rem"}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:i.neutral[800],fontSize:"0.75rem",padding:"0.25rem 0.5rem",borderRadius:4},arrow:{color:i.neutral[800]}}},MuiAlert:{styleOverrides:{root:{borderRadius:6},standardSuccess:{backgroundColor:i.green[50],color:i.green[800]},standardWarning:{backgroundColor:i.amber[50],color:i.amber[800]},standardError:{backgroundColor:i.red[50],color:i.red[800]},standardInfo:{backgroundColor:i.iochmara[50],color:i.iochmara[800]}}},MuiTabs:{styleOverrides:{indicator:{height:2}}},MuiTab:{styleOverrides:{root:{textTransform:"none",fontWeight:500,minHeight:48}}},MuiAvatar:{styleOverrides:{root:{fontWeight:500}}},MuiBadge:{variants:d,styleOverrides:{badge:{fontWeight:500,fontSize:"0.75rem"}}},MuiCircularProgress:{defaultProps:{color:"primary"},variants:u},MuiLink:{defaultProps:{underline:"hover",fontWeight:500},styleOverrides:{root:{color:i.iochmara[600],textDecorationColor:i.iochmara[300],"&:hover":{color:i.iochmara[700]}}}},MuiPaper:{styleOverrides:{rounded:{borderRadius:8}}},MuiPopover:{styleOverrides:{paper:({theme:e})=>({borderRadius:8,boxShadow:e.shadows[3]})}},MuiDivider:{styleOverrides:{root:{borderColor:i.neutral[200]}}},MuiBreadcrumbs:{styleOverrides:{separator:{color:i.neutral[400]}}}},p={palette:{primary:{main:i.iochmara[500],light:i.iochmara[300],dark:i.iochmara[600],contrastText:"#FFFFFF"},secondary:{main:i.cyan[500],light:i.cyan[400],dark:i.cyan[600],contrastText:"#FFFFFF"},success:{main:i.green[500],light:i.green[400],dark:i.green[600],contrastText:"#FFFFFF"},warning:{main:i.amber[500],light:i.amber[400],dark:i.amber[600],contrastText:"#FFFFFF"},error:{main:i.red[500],light:i.red[400],dark:i.red[600],contrastText:"#FFFFFF"},grey:{50:i.neutral[50],100:i.neutral[100],200:i.neutral[200],300:i.neutral[300],400:i.neutral[400],500:i.neutral[500],600:i.neutral[600],700:i.neutral[700],800:i.neutral[800],900:i.neutral[900]}},typography:{fontFamily:'ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700,h1:{fontWeight:700,fontSize:"2.25rem",lineHeight:1.2},h2:{fontWeight:700,fontSize:"1.875rem",lineHeight:1.2},h3:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},h5:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1rem",lineHeight:1.5},body1:{fontSize:"0.875rem",lineHeight:1.5},body2:{fontSize:"0.75rem",lineHeight:1.5},button:{textTransform:"none",fontWeight:500}},shape:{borderRadius:6},spacing:4,components:h},f={...p,palette:{...p.palette,mode:"light",background:{default:"#FFFFFF",paper:"#FFFFFF"},text:{primary:i.neutral[900],secondary:i.neutral[600]}}},g={...p,palette:{...p.palette,mode:"dark",background:{default:i.neutral[900],paper:i.neutral[800]},text:{primary:i.neutral[50],secondary:i.neutral[400]}}},m=(0,t.createTheme)(f),v=(0,t.createTheme)(g);function y(e){return{main:e[500],light:e[300],dark:e[600],contrastText:"#FFFFFF"}}let b={brand:y(i.brand),iochmara:{main:i.iochmara[500],light:i.iochmara[50],dark:i.iochmara[700],contrastText:"#FFFFFF"},cyan:y(i.cyan),amber:y(i.amber),green:y(i.green),red:y(i.red),rose:y(i.rose),fuchsia:y(i.fuchsia),neutral:{main:i.neutral[500],light:i.neutral[300],dark:i.neutral[600],contrastText:"#FFFFFF"},envBase:r.envBase,envCurrent:r.envCurrent};Object.assign(m.palette,b),Object.assign(v.palette,b);let w={solid:600,subtle:50,muted:200,emphasized:500,focusRing:400,light:300},C={orange:"amber",gray:"neutral"};function x(e){let t=e.split(".");if("colors"===t[0]&&t.length>=3){let e=t[1],n=t[2];if(e in C&&(e=C[e]),"white"===e)return"#FFFFFF";if("black"===e)return"#000000";if(e in r){let t=r[e];if("object"==typeof t&&n in t)return t[n]}if(e in i){let t=i[e];if("object"==typeof t&&n in t)return t[n];if(n in w){let e=w[n];if("object"==typeof t&&e in t)return t[e]}}}}e.s(["colors",()=>i,"darkTheme",0,v,"lightTheme",0,m,"token",()=>x])},577950,427447,345058,752754,803913,749661,e=>{"use strict";var t=e.i(995044);let i=function(e){return"string"==typeof e};e.s(["default",0,i],427447);let r=function(e,t,r){return void 0===e||i(e)?t:{...t,ownerState:{...t.ownerState,...r}}};e.s(["default",0,r],345058);let n=function(e,t,i){return"function"==typeof e?e(t,i):e};e.s(["default",0,n],752754);var o=e.i(7284);let s=function(e,t=[]){if(void 0===e)return{};let i={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&"function"==typeof e[i]&&!t.includes(i)).forEach(t=>{i[t]=e[t]}),i};e.s(["default",0,s],803913);let a=function(e){if(void 0===e)return{};let t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"==typeof e[t])).forEach(i=>{t[i]=e[i]}),t},l=function(e){let{getSlotProps:t,additionalProps:i,externalSlotProps:r,externalForwardedProps:n,className:l}=e;if(!t){let e=(0,o.default)(i?.className,l,n?.className,r?.className),t={...i?.style,...n?.style,...r?.style},s={...i,...n,...r};return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}let u=s({...n,...r}),d=a(r),c=a(n),h=t(u),p=(0,o.default)(h?.className,i?.className,l,n?.className,r?.className),f={...h?.style,...i?.style,...n?.style,...r?.style},g={...h,...i,...c,...d};return p.length>0&&(g.className=p),Object.keys(f).length>0&&(g.style=f),{props:g,internalRef:h.ref}};function u(e,i){let{className:o,elementType:s,ownerState:a,externalForwardedProps:u,internalForwardedProps:d,shouldForwardComponentProp:c=!1,...h}=i,{component:p,slots:f={[e]:void 0},slotProps:g={[e]:void 0},...m}=u,v=f[e]||s,y=n(g[e],a),{props:{component:b,...w},internalRef:C}=l({className:o,...h,externalForwardedProps:"root"===e?m:void 0,externalSlotProps:y}),x=(0,t.default)(C,y?.ref,i.ref),S="root"===e?b||p:b,k=r(v,{..."root"===e&&!p&&!f[e]&&d,..."root"!==e&&!f[e]&&d,...w,...S&&!c&&{as:S},...S&&c&&{component:S},ref:x},a);return[v,k]}e.s(["default",0,l],749661),e.s(["default",()=>u],577950)},811347,e=>{"use strict";var t=e.i(345053);e.s(["useTheme",()=>t.default])},966196,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(896425),o=e.i(446547),s=e.i(811347),a=e.i(73205),l=e.i(519273),u=e.i(980124),d=e.i(435983),c=e.i(446519);function h(e){return(0,c.default)("MuiPaper",e)}(0,d.default)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var p=e.i(19483);let f=(0,o.styled)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.variant],!i.square&&t.rounded,"elevation"===i.variant&&t[`elevation${i.elevation}`]]}})((0,a.default)(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),g=t.forwardRef(function(e,t){let o=(0,l.useDefaultProps)({props:e,name:"MuiPaper"}),a=(0,s.useTheme)(),{className:d,component:c="div",elevation:g=1,square:m=!1,variant:v="elevation",...y}=o,b={...o,component:c,elevation:g,square:m,variant:v},w=(e=>{let{square:t,elevation:i,variant:n,classes:o}=e,s={root:["root",n,!t&&"rounded","elevation"===n&&`elevation${i}`]};return(0,r.default)(s,h,o)})(b);return(0,p.jsx)(f,{as:c,ownerState:b,className:(0,i.default)(w.root,d),ref:t,...y,style:{..."elevation"===v&&{"--Paper-shadow":(a.vars||a).shadows[g],...a.vars&&{"--Paper-overlay":a.vars.overlays?.[g]},...!a.vars&&"dark"===a.palette.mode&&{"--Paper-overlay":`linear-gradient(${(0,n.alpha)("#fff",(0,u.default)(g))}, ${(0,n.alpha)("#fff",(0,u.default)(g))})`}},...y.style}})});e.s(["default",0,g],966196)},443654,e=>{"use strict";var t=e.i(435983),i=e.i(446519);function r(e){return(0,i.default)("MuiAlert",e)}let n=(0,t.default)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);e.s(["default",0,n,"getAlertUtilityClass",()=>r])},73371,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(82100),o=e.i(446547),s=e.i(73205),a=e.i(860223),l=e.i(519273),u=e.i(98648),d=e.i(924011),c=e.i(578509),h=e.i(435983),p=e.i(446519);function f(e){return(0,p.default)("MuiIconButton",e)}let g=(0,h.default)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]);var m=e.i(19483);let v=(0,o.styled)(u.default,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.loading&&t.loading,"default"!==i.color&&t[`color${(0,c.default)(i.color)}`],i.edge&&t[`edge${(0,c.default)(i.edge)}`],t[`size${(0,c.default)(i.size)}`]]}})((0,s.default)(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),(0,s.default)(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter((0,a.default)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter((0,a.default)()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${g.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${g.loading}`]:{color:"transparent"}}))),y=(0,o.styled)("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),b=t.forwardRef(function(e,t){let o=(0,l.useDefaultProps)({props:e,name:"MuiIconButton"}),{edge:s=!1,children:a,className:u,color:h="default",disabled:p=!1,disableFocusRipple:g=!1,size:b="medium",id:w,loading:C=null,loadingIndicator:x,...S}=o,k=(0,n.unstable_useId)(w),R=x??(0,m.jsx)(d.default,{"aria-labelledby":k,color:"inherit",size:16}),E={...o,edge:s,color:h,disabled:p,disableFocusRipple:g,loading:C,loadingIndicator:R,size:b},P=(e=>{let{classes:t,disabled:i,color:n,edge:o,size:s,loading:a}=e,l={root:["root",a&&"loading",i&&"disabled","default"!==n&&`color${(0,c.default)(n)}`,o&&`edge${(0,c.default)(o)}`,`size${(0,c.default)(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return(0,r.default)(l,f,t)})(E);return(0,m.jsxs)(v,{id:C?k:w,className:(0,i.default)(P.root,u),centerRipple:!0,focusRipple:!g,disabled:p||C,ref:t,...S,ownerState:E,children:["boolean"==typeof C&&(0,m.jsx)("span",{className:P.loadingWrapper,style:{display:"contents"},children:(0,m.jsx)(y,{className:P.loadingIndicator,ownerState:E,children:C&&R})}),a]})});e.s(["default",0,b],73371)},36297,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(578509),o=e.i(446547),s=e.i(73205),a=e.i(519273),l=e.i(435983),u=e.i(446519);function d(e){return(0,u.default)("MuiSvgIcon",e)}(0,l.default)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var c=e.i(19483);let h=(0,o.styled)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,"inherit"!==i.color&&t[`color${(0,n.default)(i.color)}`],t[`fontSize${(0,n.default)(i.fontSize)}`]]}})((0,s.default)(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,e])=>e&&e.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),p=t.forwardRef(function(e,o){let s=(0,a.useDefaultProps)({props:e,name:"MuiSvgIcon"}),{children:l,className:u,color:p="inherit",component:f="svg",fontSize:g="medium",htmlColor:m,inheritViewBox:v=!1,titleAccess:y,viewBox:b="0 0 24 24",...w}=s,C=t.isValidElement(l)&&"svg"===l.type,x={...s,color:p,component:f,fontSize:g,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:b,hasSvgAsChild:C},S={};v||(S.viewBox=b);let k=(e=>{let{color:t,fontSize:i,classes:o}=e,s={root:["root","inherit"!==t&&`color${(0,n.default)(t)}`,`fontSize${(0,n.default)(i)}`]};return(0,r.default)(s,d,o)})(x);return(0,c.jsxs)(h,{as:f,className:(0,i.default)(k.root,u),focusable:"false",color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:o,...S,...w,...C&&l.props,ownerState:x,children:[C?l.props.children:l,y?(0,c.jsx)("title",{children:y}):null]})});function f(e,i){function r(t,i){return(0,c.jsx)(p,{"data-testid":void 0,ref:i,...t,children:e})}return r.muiName=p.muiName,t.memo(t.forwardRef(r))}p.muiName="SvgIcon",e.s(["default",()=>f],36297)},388846,698951,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(446547),o=e.i(73205),s=e.i(519273),a=e.i(577950),l=e.i(578509),u=e.i(860223),d=e.i(966196),c=e.i(443654),h=e.i(73371),p=e.i(36297),f=e.i(19483);let g=(0,p.default)((0,f.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),m=(0,p.default)((0,f.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),v=(0,p.default)((0,f.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),y=(0,p.default)((0,f.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),b=(0,p.default)((0,f.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),w=(0,n.styled)(d.default,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.variant],t[`${i.variant}${(0,l.default)(i.color||i.severity)}`]]}})((0,o.default)(({theme:e})=>{let t="light"===e.palette.mode?e.darken:e.lighten,i="light"===e.palette.mode?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter((0,u.default)(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:i(e.palette[r].light,.9),[`& .${c.default.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter((0,u.default)(["light"])).map(([i])=>({props:{colorSeverity:i,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${i}Color`]:t(e.palette[i].light,.6),border:`1px solid ${(e.vars||e).palette[i].light}`,[`& .${c.default.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}}})),...Object.entries(e.palette).filter((0,u.default)(["dark"])).map(([t])=>({props:{colorSeverity:t,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${t}FilledColor`],backgroundColor:e.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:"dark"===e.palette.mode?e.palette[t].dark:e.palette[t].main,color:e.palette.getContrastText(e.palette[t].main)}}}))]}})),C=(0,n.styled)("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),x=(0,n.styled)("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),S=(0,n.styled)("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),k={success:(0,f.jsx)(g,{fontSize:"inherit"}),warning:(0,f.jsx)(m,{fontSize:"inherit"}),error:(0,f.jsx)(v,{fontSize:"inherit"}),info:(0,f.jsx)(y,{fontSize:"inherit"})},R=t.forwardRef(function(e,t){let n=(0,s.useDefaultProps)({props:e,name:"MuiAlert"}),{action:o,children:u,className:d,closeText:p="Close",color:g,components:m={},componentsProps:v={},icon:y,iconMapping:R=k,onClose:E,role:P="alert",severity:M="success",slotProps:D={},slots:T={},variant:O="standard",..._}=n,A={...n,color:g,severity:M,variant:O,colorSeverity:g||M},F=(e=>{let{variant:t,color:i,severity:n,classes:o}=e,s={root:["root",`color${(0,l.default)(i||n)}`,`${t}${(0,l.default)(i||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,r.default)(s,c.getAlertUtilityClass,o)})(A),I={slots:{closeButton:m.CloseButton,closeIcon:m.CloseIcon,...T},slotProps:{...v,...D}},[L,N]=(0,a.default)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,i.default)(F.root,d),elementType:w,externalForwardedProps:{...I,..._},ownerState:A,additionalProps:{role:P,elevation:0}}),[B,V]=(0,a.default)("icon",{className:F.icon,elementType:C,externalForwardedProps:I,ownerState:A}),[H,z]=(0,a.default)("message",{className:F.message,elementType:x,externalForwardedProps:I,ownerState:A}),[j,G]=(0,a.default)("action",{className:F.action,elementType:S,externalForwardedProps:I,ownerState:A}),[W,U]=(0,a.default)("closeButton",{elementType:h.default,externalForwardedProps:I,ownerState:A}),[$,q]=(0,a.default)("closeIcon",{elementType:b,externalForwardedProps:I,ownerState:A});return(0,f.jsxs)(L,{...N,children:[!1!==y?(0,f.jsx)(B,{...V,children:y||R[M]||k[M]}):null,(0,f.jsx)(H,{...z,children:u}),null!=o?(0,f.jsx)(j,{...G,children:o}):null,null==o&&E?(0,f.jsx)(j,{...G,children:(0,f.jsx)(W,{size:"small","aria-label":p,title:p,color:"inherit",onClick:E,...U,children:(0,f.jsx)($,{fontSize:"small",...q})})}):null]})});e.s(["default",0,R],388846);var E=e.i(554191),P=e.i(143696),M=e.i(803913);e.s(["default",0,function(e={}){let{autoHideDuration:i=null,disableWindowBlurListener:r=!1,onClose:n,open:o,resumeHideDuration:s}=e,a=(0,P.default)();t.useEffect(()=>{if(o)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){e.defaultPrevented||"Escape"!==e.key||n?.(e,"escapeKeyDown")}},[o,n]);let l=(0,E.default)((e,t)=>{n?.(e,t)}),u=(0,E.default)(e=>{n&&null!=e&&a.start(e,()=>{l(null,"timeout")})});t.useEffect(()=>(o&&u(i),a.clear),[o,i,u,a]);let d=a.clear,c=t.useCallback(()=>{null!=i&&u(null!=s?s:.5*i)},[i,s,u]);return t.useEffect(()=>{if(!r&&o)return window.addEventListener("focus",c),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",c),window.removeEventListener("blur",d)}},[r,o,c,d]),{getRootProps:(t={})=>{let i={...(0,M.default)(e),...(0,M.default)(t)};return{role:"presentation",...t,...i,onBlur:e=>{let t=i.onBlur;t?.(e),c()},onFocus:e=>{let t=i.onFocus;t?.(e),d()},onMouseEnter:e=>{let t=i.onMouseEnter;t?.(e),d()},onMouseLeave:e=>{let t=i.onMouseLeave;t?.(e),c()}}},onClickAway:e=>{n?.(e,"clickaway")}}}],698951)},842426,e=>{"use strict";function t(e){return e&&e.ownerDocument||document}e.s(["default",()=>t])},272866,e=>{"use strict";var t=e.i(187725);function i(e){return parseInt(t.version,10)>=19?e?.props?.ref||null:e?.ref||null}e.s(["default",()=>i])},914543,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(842426),r=e.i(995044),n=e.i(554191),o=e.i(272866);function s(e){return e.substring(2).toLowerCase()}function a(e){let{children:a,disableReactTree:l=!1,mouseEvent:u="onClick",onClickAway:d,touchEvent:c="onTouchEnd"}=e,h=t.useRef(!1),p=t.useRef(null),f=t.useRef(!1),g=t.useRef(!1);t.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);let m=(0,r.default)((0,o.default)(a),p),v=(0,n.default)(e=>{let t=g.current;g.current=!1;let r=(0,i.default)(p.current);if(!(!f.current||!p.current||"clientX"in e&&(r.documentElement.clientWidth<e.clientX||r.documentElement.clientHeight<e.clientY))){if(h.current){h.current=!1;return}(e.composedPath?e.composedPath().includes(p.current):!r.documentElement.contains(e.target)||p.current.contains(e.target))||!l&&t||d(e)}}),y=e=>t=>{g.current=!0;let i=a.props[e];i&&i(t)},b={ref:m};return!1!==c&&(b[c]=y(c)),t.useEffect(()=>{if(!1!==c){let e=s(c),t=(0,i.default)(p.current),r=()=>{h.current=!0};return t.addEventListener(e,v),t.addEventListener("touchmove",r),()=>{t.removeEventListener(e,v),t.removeEventListener("touchmove",r)}}},[v,c]),!1!==u&&(b[u]=y(u)),t.useEffect(()=>{if(!1!==u){let e=s(u),t=(0,i.default)(p.current);return t.addEventListener(e,v),()=>{t.removeEventListener(e,v)}}},[v,u]),t.cloneElement(a,b)}e.s(["default",()=>a],914543)},726323,e=>{"use strict";e.i(316575);var t=e.i(382034),i=e.i(365946),r=e.i(187725),n=e.i(316245),o=e.i(914374),s="unmounted",a="exited",l="entering",u="entered",d="exiting",c=function(e){function c(t,i){var r,n=e.call(this,t,i)||this,o=i&&!i.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(r=a,n.appearStatus=l):r=u:r=t.unmountOnExit||t.mountOnEnter?s:a,n.state={status:r},n.nextCallback=null,n}(0,i.default)(c,e),c.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s?{status:a}:null};var h=c.prototype;return h.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},h.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==l&&i!==u&&(t=l):(i===l||i===u)&&(t=d)}this.updateStatus(!1,t)},h.componentWillUnmount=function(){this.cancelNextCallback()},h.getTimeouts=function(){var e,t,i,r=this.props.timeout;return e=t=i=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,i=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:i}},h.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===l){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:n.default.findDOMNode(this);i&&i.scrollTop}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===a&&this.setState({status:s})},h.performEnter=function(e){var t=this,i=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[n.default.findDOMNode(this),r],s=o[0],a=o[1],d=this.getTimeouts(),c=r?d.appear:d.enter;(e||i)&&1?(this.props.onEnter(s,a),this.safeSetState({status:l},function(){t.props.onEntering(s,a),t.onTransitionEnd(c,function(){t.safeSetState({status:u},function(){t.props.onEntered(s,a)})})})):this.safeSetState({status:u},function(){t.props.onEntered(s)})},h.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),r=this.props.nodeRef?void 0:n.default.findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:d},function(){e.props.onExiting(r),e.onTransitionEnd(i.exit,function(){e.safeSetState({status:a},function(){e.props.onExited(r)})})})):this.safeSetState({status:a},function(){e.props.onExited(r)})},h.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},h.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},h.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(r){i&&(i=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},h.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:n.default.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(!i||r)return void setTimeout(this.nextCallback,0);if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=o[0],a=o[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)},h.render=function(){var e=this.state.status;if(e===s)return null;var i=this.props,n=i.children,a=(i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef,(0,t.default)(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.default.createElement(o.default.Provider,{value:null},"function"==typeof n?n(e,a):r.default.cloneElement(r.default.Children.only(n),a))},c}(r.default.Component);function h(){}c.contextType=o.default,c.propTypes={},c.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:h,onEntering:h,onEntered:h,onExit:h,onExiting:h,onExited:h},c.UNMOUNTED=s,c.EXITED=a,c.ENTERING=l,c.ENTERED=u,c.EXITING=d,e.s(["Transition",0,c],726323)},155062,e=>{"use strict";function t(e,t){let{timeout:i,easing:r,style:n={}}=e;return{duration:n.transitionDuration??("number"==typeof i?i:i[t.mode]||0),easing:n.transitionTimingFunction??("object"==typeof r?r[t.mode]:r),delay:n.transitionDelay}}e.s(["getTransitionProps",()=>t,"reflow",0,e=>e.scrollTop])},401440,e=>{"use strict";var t=e.i(187725),i=e.i(143696),r=e.i(272866),n=e.i(726323),o=e.i(811347),s=e.i(155062),a=e.i(723938),l=e.i(19483);function u(e){return`scale(${e}, ${e**2})`}let d={entering:{opacity:1,transform:u(1)},entered:{opacity:1,transform:"none"}},c="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),h=t.forwardRef(function(e,h){let{addEndListener:p,appear:f=!0,children:g,easing:m,in:v,onEnter:y,onEntered:b,onEntering:w,onExit:C,onExited:x,onExiting:S,style:k,timeout:R="auto",TransitionComponent:E=n.Transition,...P}=e,M=(0,i.default)(),D=t.useRef(),T=(0,o.useTheme)(),O=t.useRef(null),_=(0,a.default)(O,(0,r.default)(g),h),A=e=>t=>{if(e){let i=O.current;void 0===t?e(i):e(i,t)}},F=A(w),I=A((e,t)=>{let i;(0,s.reflow)(e);let{duration:r,delay:n,easing:o}=(0,s.getTransitionProps)({style:k,timeout:R,easing:m},{mode:"enter"});"auto"===R?D.current=i=T.transitions.getAutoHeightDuration(e.clientHeight):i=r,e.style.transition=[T.transitions.create("opacity",{duration:i,delay:n}),T.transitions.create("transform",{duration:c?i:.666*i,delay:n,easing:o})].join(","),y&&y(e,t)}),L=A(b),N=A(S),B=A(e=>{let t,{duration:i,delay:r,easing:n}=(0,s.getTransitionProps)({style:k,timeout:R,easing:m},{mode:"exit"});"auto"===R?D.current=t=T.transitions.getAutoHeightDuration(e.clientHeight):t=i,e.style.transition=[T.transitions.create("opacity",{duration:t,delay:r}),T.transitions.create("transform",{duration:c?t:.666*t,delay:c?r:r||.333*t,easing:n})].join(","),e.style.opacity=0,e.style.transform=u(.75),C&&C(e)}),V=A(x);return(0,l.jsx)(E,{appear:f,in:v,nodeRef:O,onEnter:I,onEntered:L,onEntering:F,onExit:B,onExited:V,onExiting:N,addEndListener:e=>{"auto"===R&&M.start(D.current||0,e),p&&p(O.current,e)},timeout:"auto"===R?null:R,...P,children:(e,{ownerState:i,...r})=>t.cloneElement(g,{style:{opacity:0,transform:u(.75),visibility:"exited"!==e||v?void 0:"hidden",...d[e],...k,...g.props.style},ref:_,...r})})});h&&(h.muiSupportAuto=!0),e.s(["default",0,h])},968235,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(778024),r=e.i(698951),n=e.i(914543),o=e.i(446547),s=e.i(811347),a=e.i(73205),l=e.i(519273),u=e.i(578509),d=e.i(401440),c=e.i(7284),h=e.i(896425),p=e.i(966196),f=e.i(435983),g=e.i(446519);function m(e){return(0,g.default)("MuiSnackbarContent",e)}(0,f.default)("MuiSnackbarContent",["root","message","action"]);var v=e.i(19483);let y=(0,o.styled)(p.default,{name:"MuiSnackbarContent",slot:"Root"})((0,a.default)(({theme:e})=>{let t="light"===e.palette.mode?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText((0,h.emphasize)(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:(0,h.emphasize)(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),b=(0,o.styled)("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),w=(0,o.styled)("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),C=t.forwardRef(function(e,t){let r=(0,l.useDefaultProps)({props:e,name:"MuiSnackbarContent"}),{action:n,className:o,message:s,role:a="alert",...u}=r,d=(e=>{let{classes:t}=e;return(0,i.default)({root:["root"],action:["action"],message:["message"]},m,t)})(r);return(0,v.jsxs)(y,{role:a,elevation:6,className:(0,c.default)(d.root,o),ownerState:r,ref:t,...u,children:[(0,v.jsx)(b,{className:d.message,ownerState:r,children:s}),n?(0,v.jsx)(w,{className:d.action,ownerState:r,children:n}):null]})});function x(e){return(0,g.default)("MuiSnackbar",e)}(0,f.default)("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);var S=e.i(577950);let k=(0,o.styled)("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`anchorOrigin${(0,u.default)(i.anchorOrigin.vertical)}${(0,u.default)(i.anchorOrigin.horizontal)}`]]}})((0,a.default)(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical,style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>"top"!==e.anchorOrigin.vertical,style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>"left"===e.anchorOrigin.horizontal,style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>"right"===e.anchorOrigin.horizontal,style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>"center"===e.anchorOrigin.horizontal,style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),R=t.forwardRef(function(e,o){let a=(0,l.useDefaultProps)({props:e,name:"MuiSnackbar"}),c=(0,s.useTheme)(),h={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{action:p,anchorOrigin:{vertical:f,horizontal:g}={vertical:"bottom",horizontal:"left"},autoHideDuration:m=null,children:y,className:b,ClickAwayListenerProps:w,ContentProps:R,disableWindowBlurListener:E=!1,message:P,onBlur:M,onClose:D,onFocus:T,onMouseEnter:O,onMouseLeave:_,open:A,resumeHideDuration:F,slots:I={},slotProps:L={},TransitionComponent:N,transitionDuration:B=h,TransitionProps:{onEnter:V,onExited:H,...z}={},...j}=a,G={...a,anchorOrigin:{vertical:f,horizontal:g},autoHideDuration:m,disableWindowBlurListener:E,TransitionComponent:N,transitionDuration:B},W=(e=>{let{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${(0,u.default)(r.vertical)}${(0,u.default)(r.horizontal)}`]};return(0,i.default)(n,x,t)})(G),{getRootProps:U,onClickAway:$}=(0,r.default)(G),[q,K]=t.useState(!0),Q={slots:{transition:N,...I},slotProps:{content:R,clickAwayListener:w,transition:z,...L}},[X,Y]=(0,S.default)("root",{ref:o,className:[W.root,b],elementType:k,getSlotProps:U,externalForwardedProps:{...Q,...j},ownerState:G}),[Z,{ownerState:J,...ee}]=(0,S.default)("clickAwayListener",{elementType:n.default,externalForwardedProps:Q,getSlotProps:e=>({onClickAway:(...t)=>{let i=t[0];e.onClickAway?.(...t),i?.defaultMuiPrevented||$(...t)}}),ownerState:G}),[et,ei]=(0,S.default)("content",{elementType:C,shouldForwardComponentProp:!0,externalForwardedProps:Q,additionalProps:{message:P,action:p},ownerState:G}),[er,en]=(0,S.default)("transition",{elementType:d.default,externalForwardedProps:Q,getSlotProps:e=>({onEnter:(...t)=>{e.onEnter?.(...t),((e,t)=>{K(!1),V&&V(e,t)})(...t)},onExited:(...t)=>{e.onExited?.(...t),(e=>{K(!0),H&&H(e)})(...t)}}),additionalProps:{appear:!0,in:A,timeout:B,direction:"top"===f?"down":"up"},ownerState:G});return!A&&q?null:(0,v.jsx)(Z,{...ee,...I.clickAwayListener&&{ownerState:J},children:(0,v.jsx)(X,{...Y,children:(0,v.jsx)(er,{...en,children:y||(0,v.jsx)(et,{...ei})})})})});e.s(["default",0,R],968235)},336277,847765,641543,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(456132),n=e.i(446519),o=e.i(778024);let s=(0,e.i(450206).default)();e.s(["default",0,s],847765);var a=e.i(444255),l=e.i(300);function u({props:e,name:t,defaultTheme:i,themeId:r}){let n=(0,l.default)(i);return r&&(n=n[r]||n),function(e){let{theme:t,name:i,props:r}=e;return t&&t.components&&t.components[i]&&t.components[i].defaultProps?(0,a.default)(t.components[i].defaultProps,r):r}({theme:n,name:t,props:e})}e.s(["default",()=>u],641543);var d=e.i(870264),c=e.i(315605),h=e.i(665058),p=e.i(274594),f=e.i(19483);let g=(0,c.default)(),m=s("div",{name:"MuiStack",slot:"Root"});function v(e){return u({props:e,name:"MuiStack",defaultTheme:g})}let y=({ownerState:e,theme:t})=>{let i={display:"flex",flexDirection:"column",...(0,h.handleBreakpoints)({theme:t},(0,h.resolveBreakpointValues)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e}))};if(e.spacing){let n=(0,p.createUnarySpacing)(t),o=Object.keys(t.breakpoints.values).reduce((t,i)=>(("object"==typeof e.spacing&&null!=e.spacing[i]||"object"==typeof e.direction&&null!=e.direction[i])&&(t[i]=!0),t),{}),s=(0,h.resolveBreakpointValues)({values:e.direction,base:o}),a=(0,h.resolveBreakpointValues)({values:e.spacing,base:o});"object"==typeof s&&Object.keys(s).forEach((e,t,i)=>{if(!s[e]){let r=t>0?s[i[t-1]]:"column";s[e]=r}}),i=(0,r.default)(i,(0,h.handleBreakpoints)({theme:t},a,(t,i)=>e.useFlexGap?{gap:(0,p.getValue)(n,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[i?s[i]:e.direction]}`]:(0,p.getValue)(n,t)}}))}return(0,h.mergeBreakpointsInOrder)(t.breakpoints,i)};var b=e.i(117792),w=e.i(519273);let C=function(e={}){let{createStyledComponent:r=m,useThemeProps:s=v,componentName:a="MuiStack"}=e,l=r(y);return t.forwardRef(function(e,r){let u,c=s(e),{component:h="div",direction:p="column",spacing:g=0,divider:m,children:v,className:y,useFlexGap:b=!1,...w}=(0,d.extendSxProp)(c),C=(0,o.default)({root:["root"]},e=>(0,n.default)(a,e),{});return(0,f.jsx)(l,{as:h,ownerState:{direction:p,spacing:g,useFlexGap:b},ref:r,className:(0,i.default)(C.root,y),...w,children:m?(u=t.Children.toArray(v).filter(Boolean)).reduce((e,i,r)=>(e.push(i),r<u.length-1&&e.push(t.cloneElement(m,{key:`separator-${r}`})),e),[]):v})})}({createStyledComponent:(0,b.default)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,w.useDefaultProps)({props:e,name:"MuiStack"})});e.s(["default",0,C],336277)},377855,e=>{"use strict";var t=e.i(19483),i=e.i(388846),r=e.i(924011),n=e.i(968235),o=e.i(336277),s=e.i(427938),a=e.i(187725);let l=0,u=new Set,d={create:e=>{let t=e.id||`toast-${++l}`;return u.forEach(i=>i({type:"create",options:{...e,id:t}})),t},success:e=>d.create({...e,type:"success"}),error:e=>d.create({...e,type:"error"}),warning:e=>d.create({...e,type:"warning"}),info:e=>d.create({...e,type:"info"}),loading:e=>d.create({...e,type:"loading"}),dismiss:e=>{u.forEach(t=>t({type:"dismiss",id:e}))},remove:e=>{u.forEach(t=>t({type:"dismiss",id:e}))},update:(e,t)=>{u.forEach(i=>i({type:"update",id:e,options:t}))},subscribe:e=>(u.add(e),()=>u.delete(e))};function c(){let[e,u]=(0,a.useState)([]);(0,a.useState)(()=>d.subscribe(e=>{if("create"===e.type&&e.options){let t={id:e.options.id||`toast-${++l}`,open:!0,duration:"loading"===e.options.type?void 0:e.options.duration??5e3,closable:e.options.closable??!0,...e.options};u(e=>[...e.filter(e=>e.id!==t.id),t])}else if("dismiss"===e.type&&e.id){let t=e.id;u(e=>e.map(e=>e.id===t?{...e,open:!1}:e)),setTimeout(()=>{u(e=>e.filter(e=>e.id!==t))},300)}else"update"===e.type&&e.id&&e.options&&u(t=>t.map(t=>t.id===e.id?{...t,...e.options}:t))}));let c=e=>{u(t=>t.map(t=>t.id===e?{...t,open:!1}:t)),setTimeout(()=>{u(t=>t.filter(t=>t.id!==e))},300)};return(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsx)(n.default,{open:e.open,autoHideDuration:e.duration,onClose:()=>e.closable&&c(e.id),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,t.jsx)(i.default,{severity:"loading"===e.type?"info":e.type||"info",onClose:e.closable?()=>c(e.id):void 0,icon:"loading"===e.type?(0,t.jsx)(r.default,{size:20,color:"inherit"}):void 0,sx:{width:"100%",minWidth:300},children:(0,t.jsxs)(o.default,{spacing:.5,children:[e.title&&(0,t.jsx)(s.default,{variant:"subtitle2",fontWeight:"bold",children:e.title}),e.description&&(0,t.jsx)(s.default,{variant:"body2",component:"div",children:e.description})]})})},e.id))})}e.s(["Toaster",()=>c,"toaster",0,d])},608839,e=>{"use strict";var t={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},i=new class{#e=t;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};function r(e){setTimeout(e,0)}e.s(["systemSetTimeoutZero",()=>r,"timeoutManager",()=>i])},204039,e=>{"use strict";var t=e.i(608839),i="undefined"==typeof window||"Deno"in globalThis;function r(){}function n(e,t){return"function"==typeof e?e(t):e}function o(e){return"number"==typeof e&&e>=0&&e!==1/0}function s(e,t){return Math.max(e+(t||0)-Date.now(),0)}function a(e,t){return"function"==typeof e?e(t):e}function l(e,t){return"function"==typeof e?e(t):e}function u(e,t){let{type:i="all",exact:r,fetchStatus:n,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==c(s,t.options))return!1}else if(!p(t.queryKey,s))return!1}if("all"!==i){let e=t.isActive();if("active"===i&&!e||"inactive"===i&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&(!n||n===t.state.fetchStatus)&&(!o||!!o(t))}function d(e,t){let{exact:i,status:r,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(i){if(h(t.options.mutationKey)!==h(o))return!1}else if(!p(t.options.mutationKey,o))return!1}return(!r||t.state.status===r)&&(!n||!!n(t))}function c(e,t){return(t?.queryKeyHashFn||h)(e)}function h(e){return JSON.stringify(e,(e,t)=>v(t)?Object.keys(t).sort().reduce((e,i)=>(e[i]=t[i],e),{}):t)}function p(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).every(i=>p(e[i],t[i]))}var f=Object.prototype.hasOwnProperty;function g(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(e[i]!==t[i])return!1;return!0}function m(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function v(e){if(!y(e))return!1;let t=e.constructor;if(void 0===t)return!0;let i=t.prototype;return!!y(i)&&!!i.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return new Promise(i=>{t.timeoutManager.setTimeout(i,e)})}function w(e,t,i){return"function"==typeof i.structuralSharing?i.structuralSharing(e,t):!1!==i.structuralSharing?function e(t,i){if(t===i)return t;let r=m(t)&&m(i);if(!r&&!(v(t)&&v(i)))return i;let n=(r?t:Object.keys(t)).length,o=r?i:Object.keys(i),s=o.length,a=r?Array(s):{},l=0;for(let u=0;u<s;u++){let s=r?u:o[u],d=t[s],c=i[s];if(d===c){a[s]=d,(r?u<n:f.call(t,s))&&l++;continue}if(null===d||null===c||"object"!=typeof d||"object"!=typeof c){a[s]=c;continue}let h=e(d,c);a[s]=h,h===d&&l++}return n===s&&l===n?t:a}(e,t):t}function C(e,t,i=0){let r=[...e,t];return i&&r.length>i?r.slice(1):r}function x(e,t,i=0){let r=[t,...e];return i&&r.length>i?r.slice(0,-1):r}var S=Symbol();function k(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==S?e.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${e.queryHash}'`))}function R(e,t){return"function"==typeof e?e(...t):!!e}e.s(["addToEnd",()=>C,"addToStart",()=>x,"ensureQueryFn",()=>k,"functionalUpdate",()=>n,"hashKey",()=>h,"hashQueryKeyByOptions",()=>c,"isServer",()=>i,"isValidTimeout",()=>o,"matchMutation",()=>d,"matchQuery",()=>u,"noop",()=>r,"partialMatchKey",()=>p,"replaceData",()=>w,"resolveEnabled",()=>l,"resolveStaleTime",()=>a,"shallowEqualObjects",()=>g,"shouldThrowError",()=>R,"skipToken",()=>S,"sleep",()=>b,"timeUntilStale",()=>s])},889747,e=>{"use strict";let t,i,r,n,o,s;var a=e.i(608839).systemSetTimeoutZero,l=(t=[],i=0,r=e=>{e()},n=e=>{e()},o=a,{batch:e=>{let s;i++;try{s=e()}finally{let e;--i||(e=t,t=[],e.length&&o(()=>{n(()=>{e.forEach(e=>{r(e)})})}))}return s},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s=e=>{i?t.push(e):o(()=>{r(e)})},setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{o=e}});e.s(["notifyManager",()=>l])},879714,279743,935140,170434,297805,e=>{"use strict";var t=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};e.s(["Subscribable",()=>t],279743);var i=e.i(204039),r=new class extends t{#i;#r;#n;constructor(){super(),this.#n=e=>{if(!i.isServer&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#r||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(e){this.#n=e,this.#r?.(),this.#r=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#i!==e&&(this.#i=e,this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#i?this.#i:globalThis.document?.visibilityState!=="hidden"}};e.s(["focusManager",()=>r],935140);var n=new class extends t{#o=!0;#r;#n;constructor(){super(),this.#n=e=>{if(!i.isServer&&window.addEventListener){let t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#r||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(e){this.#n=e,this.#r?.(),this.#r=e(this.setOnline.bind(this))}setOnline(e){this.#o!==e&&(this.#o=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#o}};function o(){let e,t,i=new Promise((i,r)=>{e=i,t=r});function r(e){Object.assign(i,e),delete i.resolve,delete i.reject}return i.status="pending",i.catch(()=>{}),i.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},i.reject=e=>{r({status:"rejected",reason:e}),t(e)},i}function s(e){return Math.min(1e3*2**e,3e4)}function a(e){return(e??"online")!=="online"||n.isOnline()}e.s(["onlineManager",()=>n],170434),e.s(["pendingThenable",()=>o],297805);var l=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function u(e){let t,u=!1,d=0,c=o(),h=()=>r.isFocused()&&("always"===e.networkMode||n.isOnline())&&e.canRun(),p=()=>a(e.networkMode)&&e.canRun(),f=e=>{"pending"===c.status&&(t?.(),c.resolve(e))},g=e=>{"pending"===c.status&&(t?.(),c.reject(e))},m=()=>new Promise(i=>{t=e=>{("pending"!==c.status||h())&&i(e)},e.onPause?.()}).then(()=>{t=void 0,"pending"===c.status&&e.onContinue?.()}),v=()=>{let t;if("pending"!==c.status)return;let r=0===d?e.initialPromise:void 0;try{t=r??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(f).catch(t=>{if("pending"!==c.status)return;let r=e.retry??3*!i.isServer,n=e.retryDelay??s,o="function"==typeof n?n(d,t):n,a=!0===r||"number"==typeof r&&d<r||"function"==typeof r&&r(d,t);u||!a?g(t):(d++,e.onFail?.(d,t),(0,i.sleep)(o).then(()=>h()?void 0:m()).then(()=>{u?g(t):v()}))})};return{promise:c,status:()=>c.status,cancel:t=>{if("pending"===c.status){let i=new l(t);g(i),e.onCancel?.(i)}},continue:()=>(t?.(),c),cancelRetry:()=>{u=!0},continueRetry:()=>{u=!1},canStart:p,start:()=>(p()?v():m().then(v),c)}}e.s(["CancelledError",()=>l,"canFetch",()=>a,"createRetryer",()=>u],879714)},702872,e=>{"use strict";var t=e.i(608839),i=e.i(204039),r=class{#s;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,i.isValidTimeout)(this.gcTime)&&(this.#s=t.timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(i.isServer?1/0:3e5))}clearGcTimeout(){this.#s&&(t.timeoutManager.clearTimeout(this.#s),this.#s=void 0)}};e.s(["Removable",()=>r])},868259,e=>{"use strict";var t=e.i(204039),i=e.i(889747),r=e.i(879714),n=e.i(702872),o=class extends n.Removable{#a;#l;#u;#d;#c;#h;#p;constructor(e){super(),this.#p=!1,this.#h=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#d=e.client,this.#u=this.#d.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#a=l(this.options),this.state=e.state??this.#a,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#c?.promise}setOptions(e){if(this.options={...this.#h,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let e=l(this.options);void 0!==e.data&&(this.setState(a(e.data,e.dataUpdatedAt)),this.#a=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#u.remove(this)}setData(e,i){let r=(0,t.replaceData)(this.state.data,e,this.options);return this.#f({data:r,type:"success",dataUpdatedAt:i?.updatedAt,manual:i?.manual}),r}setState(e,t){this.#f({type:"setState",state:e,setStateOptions:t})}cancel(e){let i=this.#c?.promise;return this.#c?.cancel(e),i?i.then(t.noop).catch(t.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#a)}isActive(){return this.observers.some(e=>!1!==(0,t.resolveEnabled)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t.skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,t.resolveStaleTime)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,t.timeUntilStale)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#u.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#c&&(this.#p?this.#c.cancel({revert:!0}):this.#c.cancelRetry()),this.scheduleGc()),this.#u.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#f({type:"invalidate"})}async fetch(e,i){let n;if("idle"!==this.state.fetchStatus&&this.#c?.status()!=="rejected"){if(void 0!==this.state.data&&i?.cancelRefetch)this.cancel({silent:!0});else if(this.#c)return this.#c.continueRetry(),this.#c.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let o=new AbortController,s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#p=!0,o.signal)})},a=()=>{let e,r=(0,t.ensureQueryFn)(this.options,i),n=(s(e={client:this.#d,queryKey:this.queryKey,meta:this.meta}),e);return(this.#p=!1,this.options.persister)?this.options.persister(r,n,this):r(n)},l=(s(n={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:this.#d,state:this.state,fetchFn:a}),n);this.options.behavior?.onFetch(l,this),this.#l=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#f({type:"fetch",meta:l.fetchOptions?.meta}),this.#c=(0,r.createRetryer)({initialPromise:i?.initialPromise,fn:l.fetchFn,onCancel:e=>{e instanceof r.CancelledError&&e.revert&&this.setState({...this.#l,fetchStatus:"idle"}),o.abort()},onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:()=>{this.#f({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{let e=await this.#c.start();if(void 0===e)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#u.config.onSuccess?.(e,this),this.#u.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof r.CancelledError){if(e.silent)return this.#c.promise;else if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#f({type:"error",error:e}),this.#u.config.onError?.(e,this),this.#u.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#f(e){let t=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...s(t.data,this.options),fetchMeta:e.meta??null};case"success":let i={...t,...a(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#l=e.manual?i:void 0,i;case"error":let r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=t(this.state),i.notifyManager.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#u.notify({query:this,type:"updated",action:e})})}};function s(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,r.canFetch)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function a(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function l(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,i=void 0!==t,r=i?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}e.s(["Query",()=>o,"fetchState",()=>s])},833679,e=>{"use strict";var t=e.i(204039),i=e.i(868259),r=e.i(889747),n=e.i(279743),o=class extends n.Subscribable{constructor(e={}){super(),this.config=e,this.#g=new Map}#g;build(e,r,n){let o=r.queryKey,s=r.queryHash??(0,t.hashQueryKeyByOptions)(o,r),a=this.get(s);return a||(a=new i.Query({client:e,queryKey:o,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.#g.has(e.queryHash)||(this.#g.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#g.get(e.queryHash);t&&(e.destroy(),t===e&&this.#g.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){r.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#g.get(e)}getAll(){return[...this.#g.values()]}find(e){let i={exact:!0,...e};return this.getAll().find(e=>(0,t.matchQuery)(i,e))}findAll(e={}){let i=this.getAll();return Object.keys(e).length>0?i.filter(i=>(0,t.matchQuery)(e,i)):i}notify(e){r.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){r.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){r.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}};e.s(["QueryCache",()=>o])},599973,e=>{"use strict";var t=e.i(889747),i=e.i(702872),r=e.i(879714),n=class extends i.Removable{#d;#m;#v;#c;constructor(e){super(),this.#d=e.client,this.mutationId=e.mutationId,this.#v=e.mutationCache,this.#m=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#m.includes(e)||(this.#m.push(e),this.clearGcTimeout(),this.#v.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#m=this.#m.filter(t=>t!==e),this.scheduleGc(),this.#v.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#m.length||("pending"===this.state.status?this.scheduleGc():this.#v.remove(this))}continue(){return this.#c?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#f({type:"continue"})},i={client:this.#d,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#c=(0,r.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#v.canRun(this)});let n="pending"===this.state.status,o=!this.#c.canStart();try{if(n)t();else{this.#f({type:"pending",variables:e,isPaused:o}),await this.#v.config.onMutate?.(e,this,i);let t=await this.options.onMutate?.(e,i);t!==this.state.context&&this.#f({type:"pending",context:t,variables:e,isPaused:o})}let r=await this.#c.start();return await this.#v.config.onSuccess?.(r,e,this.state.context,this,i),await this.options.onSuccess?.(r,e,this.state.context,i),await this.#v.config.onSettled?.(r,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(r,null,e,this.state.context,i),this.#f({type:"success",data:r}),r}catch(t){try{throw await this.#v.config.onError?.(t,e,this.state.context,this,i),await this.options.onError?.(t,e,this.state.context,i),await this.#v.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,t,e,this.state.context,i),t}finally{this.#f({type:"error",error:t})}}finally{this.#v.runNext(this)}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),t.notifyManager.batch(()=>{this.#m.forEach(t=>{t.onMutationUpdate(e)}),this.#v.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}e.s(["Mutation",()=>n,"getDefaultState",()=>o])},224675,e=>{"use strict";var t=e.i(204039),i=e.i(833679),r=e.i(889747),n=e.i(599973),o=e.i(279743),s=class extends o.Subscribable{constructor(e={}){super(),this.config=e,this.#y=new Set,this.#b=new Map,this.#w=0}#y;#b;#w;build(e,t,i){let r=new n.Mutation({client:e,mutationCache:this,mutationId:++this.#w,options:e.defaultMutationOptions(t),state:i});return this.add(r),r}add(e){this.#y.add(e);let t=a(e);if("string"==typeof t){let i=this.#b.get(t);i?i.push(e):this.#b.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#y.delete(e)){let t=a(e);if("string"==typeof t){let i=this.#b.get(t);if(i)if(i.length>1){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}else i[0]===e&&this.#b.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=a(e);if("string"!=typeof t)return!0;{let i=this.#b.get(t),r=i?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=a(e);if("string"!=typeof t)return Promise.resolve();{let i=this.#b.get(t)?.find(t=>t!==e&&t.state.isPaused);return i?.continue()??Promise.resolve()}}clear(){r.notifyManager.batch(()=>{this.#y.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#y.clear(),this.#b.clear()})}getAll(){return Array.from(this.#y)}find(e){let i={exact:!0,...e};return this.getAll().find(e=>(0,t.matchMutation)(i,e))}findAll(e={}){return this.getAll().filter(i=>(0,t.matchMutation)(e,i))}notify(e){r.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return r.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(t.noop))))}};function a(e){return e.options.scope?.id}var l=e.i(935140),u=e.i(170434);function d(e){return{onFetch:(i,r)=>{let n=i.options,o=i.fetchOptions?.meta?.fetchMore?.direction,s=i.state.data?.pages||[],a=i.state.data?.pageParams||[],l={pages:[],pageParams:[]},u=0,d=async()=>{let r=!1,d=(0,t.ensureQueryFn)(i.options,i.fetchOptions),h=async(e,n,o)=>{let s;if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);let a=(Object.defineProperty(s={client:i.client,queryKey:i.queryKey,pageParam:n,direction:o?"backward":"forward",meta:i.options.meta},"signal",{enumerable:!0,get:()=>(i.signal.aborted?r=!0:i.signal.addEventListener("abort",()=>{r=!0}),i.signal)}),s),l=await d(a),{maxPages:u}=i.options,c=o?t.addToStart:t.addToEnd;return{pages:c(e.pages,l,u),pageParams:c(e.pageParams,n,u)}};if(o&&s.length){let e="backward"===o,t={pages:s,pageParams:a},i=(e?function(e,{pages:t,pageParams:i}){return t.length>0?e.getPreviousPageParam?.(t[0],t,i[0],i):void 0}:c)(n,t);l=await h(t,i,e)}else{let t=e??s.length;do{let e=0===u?a[0]??n.initialPageParam:c(n,l);if(u>0&&null==e)break;l=await h(l,e),u++}while(u<t)}return l};i.options.persister?i.fetchFn=()=>i.options.persister?.(d,{client:i.client,queryKey:i.queryKey,meta:i.options.meta,signal:i.signal},r):i.fetchFn=d}}}function c(e,{pages:t,pageParams:i}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,i[r],i):void 0}var h=class{#C;#v;#h;#x;#S;#k;#R;#E;constructor(e={}){this.#C=e.queryCache||new i.QueryCache,this.#v=e.mutationCache||new s,this.#h=e.defaultOptions||{},this.#x=new Map,this.#S=new Map,this.#k=0}mount(){this.#k++,1===this.#k&&(this.#R=l.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#C.onFocus())}),this.#E=u.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#C.onOnline())}))}unmount(){this.#k--,0===this.#k&&(this.#R?.(),this.#R=void 0,this.#E?.(),this.#E=void 0)}isFetching(e){return this.#C.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#v.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#C.get(t.queryHash)?.state.data}ensureQueryData(e){let i=this.defaultQueryOptions(e),r=this.#C.build(this,i),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,t.resolveStaleTime)(i.staleTime,r))&&this.prefetchQuery(i),Promise.resolve(n))}getQueriesData(e){return this.#C.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,i,r){let n=this.defaultQueryOptions({queryKey:e}),o=this.#C.get(n.queryHash),s=o?.state.data,a=(0,t.functionalUpdate)(i,s);if(void 0!==a)return this.#C.build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,i){return r.notifyManager.batch(()=>this.#C.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,i)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#C.get(t.queryHash)?.state}removeQueries(e){let t=this.#C;r.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let i=this.#C;return r.notifyManager.batch(()=>(i.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,i={}){let n={revert:!0,...i};return Promise.all(r.notifyManager.batch(()=>this.#C.findAll(e).map(e=>e.cancel(n)))).then(t.noop).catch(t.noop)}invalidateQueries(e,t={}){return r.notifyManager.batch(()=>(this.#C.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,i={}){let n={...i,cancelRefetch:i.cancelRefetch??!0};return Promise.all(r.notifyManager.batch(()=>this.#C.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let i=e.fetch(void 0,n);return n.throwOnError||(i=i.catch(t.noop)),"paused"===e.state.fetchStatus?Promise.resolve():i}))).then(t.noop)}fetchQuery(e){let i=this.defaultQueryOptions(e);void 0===i.retry&&(i.retry=!1);let r=this.#C.build(this,i);return r.isStaleByTime((0,t.resolveStaleTime)(i.staleTime,r))?r.fetch(i):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(t.noop).catch(t.noop)}fetchInfiniteQuery(e){return e.behavior=d(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(t.noop).catch(t.noop)}ensureInfiniteQueryData(e){return e.behavior=d(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return u.onlineManager.isOnline()?this.#v.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#C}getMutationCache(){return this.#v}getDefaultOptions(){return this.#h}setDefaultOptions(e){this.#h=e}setQueryDefaults(e,i){this.#x.set((0,t.hashKey)(e),{queryKey:e,defaultOptions:i})}getQueryDefaults(e){let i=[...this.#x.values()],r={};return i.forEach(i=>{(0,t.partialMatchKey)(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,i){this.#S.set((0,t.hashKey)(e),{mutationKey:e,defaultOptions:i})}getMutationDefaults(e){let i=[...this.#S.values()],r={};return i.forEach(i=>{(0,t.partialMatchKey)(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;let i={...this.#h.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return i.queryHash||(i.queryHash=(0,t.hashQueryKeyByOptions)(i.queryKey,i)),void 0===i.refetchOnReconnect&&(i.refetchOnReconnect="always"!==i.networkMode),void 0===i.throwOnError&&(i.throwOnError=!!i.suspense),!i.networkMode&&i.persister&&(i.networkMode="offlineFirst"),i.queryFn===t.skipToken&&(i.enabled=!1),i}defaultMutationOptions(e){return e?._defaulted?e:{...this.#h.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#C.clear(),this.#v.clear()}};e.s(["QueryClient",()=>h],224675)},31368,e=>{"use strict";let t,i,r,n;var o,s,a,l,u=e.i(316575);function d(e,t){return function(){return e.apply(t,arguments)}}let{toString:c}=Object.prototype,{getPrototypeOf:h}=Object,{iterator:p,toStringTag:f}=Symbol,g=(t=Object.create(null),e=>{let i=c.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())}),m=e=>(e=e.toLowerCase(),t=>g(t)===e),v=e=>t=>typeof t===e,{isArray:y}=Array,b=v("undefined");function w(e){return null!==e&&!b(e)&&null!==e.constructor&&!b(e.constructor)&&S(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}let C=m("ArrayBuffer"),x=v("string"),S=v("function"),k=v("number"),R=e=>null!==e&&"object"==typeof e,E=e=>{if("object"!==g(e))return!1;let t=h(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(f in e)&&!(p in e)},P=m("Date"),M=m("File"),D=m("Blob"),T=m("FileList"),O=m("URLSearchParams"),[_,A,F,I]=["ReadableStream","Request","Response","Headers"].map(m);function L(e,t,{allOwnKeys:i=!1}={}){let r,n;if(null!=e)if("object"!=typeof e&&(e=[e]),y(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{let n;if(w(e))return;let o=i?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;for(r=0;r<s;r++)n=o[r],t.call(null,e[n],n,e)}}function N(e,t){let i;if(w(e))return null;t=t.toLowerCase();let r=Object.keys(e),n=r.length;for(;n-- >0;)if(t===(i=r[n]).toLowerCase())return i;return null}let B="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g,V=e=>!b(e)&&e!==B,H=(i="undefined"!=typeof Uint8Array&&h(Uint8Array),e=>i&&e instanceof i),z=m("HTMLFormElement"),j=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),G=m("RegExp"),W=(e,t)=>{let i=Object.getOwnPropertyDescriptors(e),r={};L(i,(i,n)=>{let o;!1!==(o=t(i,n,e))&&(r[n]=o||i)}),Object.defineProperties(e,r)},U=m("AsyncFunction"),$=(o="function"==typeof setImmediate,s=S(B.postMessage),o?setImmediate:s?(a=`axios@${Math.random()}`,l=[],B.addEventListener("message",({source:e,data:t})=>{e===B&&t===a&&l.length&&l.shift()()},!1),e=>{l.push(e),B.postMessage(a,"*")}):e=>setTimeout(e)),q="undefined"!=typeof queueMicrotask?queueMicrotask.bind(B):void 0!==u.default&&u.default.nextTick||$,K={isArray:y,isArrayBuffer:C,isBuffer:w,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||S(e.append)&&("formdata"===(t=g(e))||"object"===t&&S(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&C(e.buffer)},isString:x,isNumber:k,isBoolean:e=>!0===e||!1===e,isObject:R,isPlainObject:E,isEmptyObject:e=>{if(!R(e)||w(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:_,isRequest:A,isResponse:F,isHeaders:I,isUndefined:b,isDate:P,isFile:M,isBlob:D,isRegExp:G,isFunction:S,isStream:e=>R(e)&&S(e.pipe),isURLSearchParams:O,isTypedArray:H,isFileList:T,forEach:L,merge:function e(){let{caseless:t,skipUndefined:i}=V(this)&&this||{},r={},n=(n,o)=>{let s=t&&N(r,o)||o;E(r[s])&&E(n)?r[s]=e(r[s],n):E(n)?r[s]=e({},n):y(n)?r[s]=n.slice():i&&b(n)||(r[s]=n)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&L(arguments[e],n);return r},extend:(e,t,i,{allOwnKeys:r}={})=>(L(t,(t,r)=>{i&&S(t)?e[r]=d(t,i):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,r)=>{let n,o,s,a={};if(t=t||{},null==e)return t;do{for(o=(n=Object.getOwnPropertyNames(e)).length;o-- >0;)s=n[o],(!r||r(s,e,t))&&!a[s]&&(t[s]=e[s],a[s]=!0);e=!1!==i&&h(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype)return t},kindOf:g,kindOfTest:m,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;let r=e.indexOf(t,i);return -1!==r&&r===i},toArray:e=>{if(!e)return null;if(y(e))return e;let t=e.length;if(!k(t))return null;let i=Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{let i,r=(e&&e[p]).call(e);for(;(i=r.next())&&!i.done;){let r=i.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let i,r=[];for(;null!==(i=e.exec(t));)r.push(i);return r},isHTMLForm:z,hasOwnProperty:j,hasOwnProp:j,reduceDescriptors:W,freezeMethods:e=>{W(e,(t,i)=>{if(S(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;if(S(e[i])){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},toObjectSet:(e,t)=>{let i={};return(y(e)?e:String(e).split(t)).forEach(e=>{i[e]=!0}),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,i){return t.toUpperCase()+i}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e*=1)?e:t,findKey:N,global:B,isContextDefined:V,isSpecCompliantForm:function(e){return!!(e&&S(e.append)&&"FormData"===e[f]&&e[p])},toJSONObject:e=>{let t=Array(10),i=(e,r)=>{if(R(e)){if(t.indexOf(e)>=0)return;if(w(e))return e;if(!("toJSON"in e)){t[r]=e;let n=y(e)?[]:{};return L(e,(e,t)=>{let o=i(e,r+1);b(o)||(n[t]=o)}),t[r]=void 0,n}}return e};return i(e,0)},isAsyncFn:U,isThenable:e=>e&&(R(e)||S(e))&&S(e.then)&&S(e.catch),setImmediate:$,asap:q,isIterable:e=>null!=e&&S(e[p])};var Q=e.i(415306);function X(e,t,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}K.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});let Y=X.prototype,Z={};function J(e){return K.isPlainObject(e)||K.isArray(e)}function ee(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function et(e,t,i){return e?e.concat(t).map(function(e,t){return e=ee(e),!i&&t?"["+e+"]":e}).join(i?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Z[e]={value:e}}),Object.defineProperties(X,Z),Object.defineProperty(Y,"isAxiosError",{value:!0}),X.from=(e,t,i,r,n,o)=>{let s=Object.create(Y);K.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);let a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return X.call(s,a,l,i,r,n),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",o&&Object.assign(s,o),s};let ei=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)}),er=function(e,t,i){if(!K.isObject(e))throw TypeError("target must be an object");t=t||new FormData;let r=(i=K.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!K.isUndefined(t[e])})).metaTokens,n=i.visitor||u,o=i.dots,s=i.indexes,a=(i.Blob||"undefined"!=typeof Blob&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(n))throw TypeError("visitor must be a function");function l(e){if(null===e)return"";if(K.isDate(e))return e.toISOString();if(K.isBoolean(e))return e.toString();if(!a&&K.isBlob(e))throw new X("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(e)||K.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Q.Buffer.from(e):e}function u(e,i,n){let a=e;if(e&&!n&&"object"==typeof e)if(K.endsWith(i,"{}"))i=r?i:i.slice(0,-2),e=JSON.stringify(e);else{var u;if(K.isArray(e)&&(u=e,K.isArray(u)&&!u.some(J))||(K.isFileList(e)||K.endsWith(i,"[]"))&&(a=K.toArray(e)))return i=ee(i),a.forEach(function(e,r){K.isUndefined(e)||null===e||t.append(!0===s?et([i],r,o):null===s?i:i+"[]",l(e))}),!1}return!!J(e)||(t.append(et(n,i,o),l(e)),!1)}let d=[],c=Object.assign(ei,{defaultVisitor:u,convertValue:l,isVisitable:J});if(!K.isObject(e))throw TypeError("data must be an object");return!function e(i,r){if(!K.isUndefined(i)){if(-1!==d.indexOf(i))throw Error("Circular reference detected in "+r.join("."));d.push(i),K.forEach(i,function(i,o){!0===(!(K.isUndefined(i)||null===i)&&n.call(t,i,K.isString(o)?o.trim():o,r,c))&&e(i,r?r.concat(o):[o])}),d.pop()}}(e),t};function en(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function eo(e,t){this._pairs=[],e&&er(e,this,t)}let es=eo.prototype;function ea(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function el(e,t,i){let r;if(!t)return e;let n=i&&i.encode||ea;K.isFunction(i)&&(i={serialize:i});let o=i&&i.serialize;if(r=o?o(t,i):K.isURLSearchParams(t)?t.toString():new eo(t,i).toString(n)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}es.append=function(e,t){this._pairs.push([e,t])},es.toString=function(e){let t=e?function(t){return e.call(this,t,en)}:en;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};let eu=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,function(t){null!==t&&e(t)})}},ed={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ec="undefined"!=typeof URLSearchParams?URLSearchParams:eo,eh="undefined"!=typeof FormData?FormData:null,ep="undefined"!=typeof Blob?Blob:null,ef="undefined"!=typeof window&&"undefined"!=typeof document,eg="object"==typeof navigator&&navigator||void 0,em=ef&&(!eg||0>["ReactNative","NativeScript","NS"].indexOf(eg.product)),ev="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ey=ef&&window.location.href||"http://localhost";e.s(["hasBrowserEnv",()=>ef,"hasStandardBrowserEnv",()=>em,"hasStandardBrowserWebWorkerEnv",()=>ev,"navigator",()=>eg,"origin",()=>ey],52597);let eb={...e.i(52597),isBrowser:!0,classes:{URLSearchParams:ec,FormData:eh,Blob:ep},protocols:["http","https","file","blob","url","data"]},ew=function(e){if(K.isFormData(e)&&K.isFunction(e.entries)){let t={};return K.forEachEntry(e,(e,i)=>{!function e(t,i,r,n){let o=t[n++];if("__proto__"===o)return!0;let s=Number.isFinite(+o),a=n>=t.length;return(o=!o&&K.isArray(r)?r.length:o,a)?K.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i:(r[o]&&K.isObject(r[o])||(r[o]=[]),e(t,i,r[o],n)&&K.isArray(r[o])&&(r[o]=function(e){let t,i,r={},n=Object.keys(e),o=n.length;for(t=0;t<o;t++)r[i=n[t]]=e[i];return r}(r[o]))),!s}(K.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),i,t,0)}),t}return null},eC={transitional:ed,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let i,r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=K.isObject(e);if(o&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return n?JSON.stringify(ew(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1){var s,a;return(s=e,a=this.formSerializer,er(s,new eb.classes.URLSearchParams,{visitor:function(e,t,i,r){return eb.isNode&&K.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...a})).toString()}if((i=K.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return er(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}if(o||n){t.setContentType("application/json",!1);var l=e;if(K.isString(l))try{return(0,JSON.parse)(l),K.trim(l)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(l)}return e}],transformResponse:[function(e){let t=this.transitional||eC.transitional,i=t&&t.forcedJSONParsing,r="json"===this.responseType;if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(i&&!this.responseType||r)){let i=t&&t.silentJSONParsing;try{return JSON.parse(e,this.parseReviver)}catch(e){if(!i&&r){if("SyntaxError"===e.name)throw X.from(e,X.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eb.classes.FormData,Blob:eb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{eC.headers[e]={}});let ex=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eS=Symbol("internals");function ek(e){return e&&String(e).trim().toLowerCase()}function eR(e){return!1===e||null==e?e:K.isArray(e)?e.map(eR):String(e)}function eE(e,t,i,r,n){if(K.isFunction(r))return r.call(this,t,i);if(n&&(t=i),K.isString(t)){if(K.isString(r))return -1!==t.indexOf(r);if(K.isRegExp(r))return r.test(t)}}class eP{constructor(e){e&&this.set(e)}set(e,t,i){let r=this;function n(e,t,i){let n=ek(t);if(!n)throw Error("header name must be a non-empty string");let o=K.findKey(r,n);o&&void 0!==r[o]&&!0!==i&&(void 0!==i||!1===r[o])||(r[o||t]=eR(e))}let o=(e,t)=>K.forEach(e,(e,i)=>n(e,i,t));if(K.isPlainObject(e)||e instanceof this.constructor)o(e,t);else{let r;if(K.isString(e)&&(e=e.trim())&&(r=e,!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim()))){var s;let i,r,n,a;o((a={},(s=e)&&s.split("\n").forEach(function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!i||a[i]&&ex[i]||("set-cookie"===i?a[i]?a[i].push(r):a[i]=[r]:a[i]=a[i]?a[i]+", "+r:r)}),a),t)}else if(K.isObject(e)&&K.isIterable(e)){let i={},r,n;for(let t of e){if(!K.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(r=i[n])?K.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}o(i,t)}else null!=e&&n(t,e,i)}return this}get(e,t){if(e=ek(e)){let i=K.findKey(this,e);if(i){let e=this[i];if(!t)return e;if(!0===t){let t,i=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)i[t[1]]=t[2];return i}if(K.isFunction(t))return t.call(this,e,i);if(K.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ek(e)){let i=K.findKey(this,e);return!!(i&&void 0!==this[i]&&(!t||eE(this,this[i],i,t)))}return!1}delete(e,t){let i=this,r=!1;function n(e){if(e=ek(e)){let n=K.findKey(i,e);n&&(!t||eE(i,i[n],n,t))&&(delete i[n],r=!0)}}return K.isArray(e)?e.forEach(n):n(e),r}clear(e){let t=Object.keys(this),i=t.length,r=!1;for(;i--;){let n=t[i];(!e||eE(this,this[n],n,e,!0))&&(delete this[n],r=!0)}return r}normalize(e){let t=this,i={};return K.forEach(this,(r,n)=>{let o=K.findKey(i,n);if(o){t[o]=eR(r),delete t[n];return}let s=e?n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i):String(n).trim();s!==n&&delete t[n],t[s]=eR(r),i[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return K.forEach(this,(i,r)=>{null!=i&&!1!==i&&(t[r]=e&&K.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let i=new this(e);return t.forEach(e=>i.set(e)),i}static accessor(e){let t=(this[eS]=this[eS]={accessors:{}}).accessors,i=this.prototype;function r(e){let r=ek(e);if(!t[r]){let n;n=K.toCamelCase(" "+e),["get","set","has"].forEach(t=>{Object.defineProperty(i,t+n,{value:function(i,r,n){return this[t].call(this,e,i,r,n)},configurable:!0})}),t[r]=!0}}return K.isArray(e)?e.forEach(r):r(e),this}}function eM(e,t){let i=this||eC,r=t||i,n=eP.from(r.headers),o=r.data;return K.forEach(e,function(e){o=e.call(i,o,n.normalize(),t?t.status:void 0)}),n.normalize(),o}function eD(e){return!!(e&&e.__CANCEL__)}function eT(e,t,i){X.call(this,null==e?"canceled":e,X.ERR_CANCELED,t,i),this.name="CanceledError"}function eO(e,t,i){let r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):t(new X("Request failed with status code "+i.status,[X.ERR_BAD_REQUEST,X.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}eP.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),K.reduceDescriptors(eP.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[i]=e}}}),K.freezeMethods(eP),K.inherits(eT,X,{__CANCEL__:!0});let e_=function(e,t){let i,r=Array(e=e||10),n=Array(e),o=0,s=0;return t=void 0!==t?t:1e3,function(a){let l=Date.now(),u=n[s];i||(i=l),r[o]=a,n[o]=l;let d=s,c=0;for(;d!==o;)c+=r[d++],d%=e;if((o=(o+1)%e)===s&&(s=(s+1)%e),l-i<t)return;let h=u&&l-u;return h?Math.round(1e3*c/h):void 0}},eA=function(e,t){let i,r,n=0,o=1e3/t,s=(t,o=Date.now())=>{n=o,i=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{let t=Date.now(),a=t-n;a>=o?s(e,t):(i=e,r||(r=setTimeout(()=>{r=null,s(i)},o-a)))},()=>i&&s(i)]},eF=(e,t,i=3)=>{let r=0,n=e_(50,250);return eA(i=>{let o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,l=n(a);r=o,e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i,lengthComputable:null!=s,[t?"download":"upload"]:!0})},i)},eI=(e,t)=>{let i=null!=e;return[r=>t[0]({lengthComputable:i,total:e,loaded:r}),t[1]]},eL=e=>(...t)=>K.asap(()=>e(...t)),eN=eb.hasStandardBrowserEnv?(r=new URL(eb.origin),n=eb.navigator&&/(msie|trident)/i.test(eb.navigator.userAgent),e=>(e=new URL(e,eb.origin),r.protocol===e.protocol&&r.host===e.host&&(n||r.port===e.port))):()=>!0,eB=eb.hasStandardBrowserEnv?{write(e,t,i,r,n,o,s){if("undefined"==typeof document)return;let a=[`${e}=${encodeURIComponent(t)}`];K.isNumber(i)&&a.push(`expires=${new Date(i).toUTCString()}`),K.isString(r)&&a.push(`path=${r}`),K.isString(n)&&a.push(`domain=${n}`),!0===o&&a.push("secure"),K.isString(s)&&a.push(`SameSite=${s}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function eV(e,t,i){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||!1==i)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}let eH=e=>e instanceof eP?{...e}:e;function ez(e,t){t=t||{};let i={};function r(e,t,i,r){return K.isPlainObject(e)&&K.isPlainObject(t)?K.merge.call({caseless:r},e,t):K.isPlainObject(t)?K.merge({},t):K.isArray(t)?t.slice():t}function n(e,t,i,n){return K.isUndefined(t)?K.isUndefined(e)?void 0:r(void 0,e,i,n):r(e,t,i,n)}function o(e,t){if(!K.isUndefined(t))return r(void 0,t)}function s(e,t){return K.isUndefined(t)?K.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(i,n,o){return o in t?r(i,n):o in e?r(void 0,i):void 0}let l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,i)=>n(eH(e),eH(t),i,!0)};return K.forEach(Object.keys({...e,...t}),function(r){let o=l[r]||n,s=o(e[r],t[r],r);K.isUndefined(s)&&o!==a||(i[r]=s)}),i}let ej=e=>{let t=ez({},e),{data:i,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:o,headers:s,auth:a}=t;if(t.headers=s=eP.from(s),t.url=el(eV(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&s.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),K.isFormData(i)){if(eb.hasStandardBrowserEnv||eb.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(K.isFunction(i.getHeaders)){let e=i.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,i])=>{t.includes(e.toLowerCase())&&s.set(e,i)})}}if(eb.hasStandardBrowserEnv&&(r&&K.isFunction(r)&&(r=r(t)),r||!1!==r&&eN(t.url))){let e=n&&o&&eB.read(o);e&&s.set(n,e)}return t},eG="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,i){var r;let n,o,s,a,l,u,d=ej(e),c=d.data,h=eP.from(d.headers).normalize(),{responseType:p,onUploadProgress:f,onDownloadProgress:g}=d;function m(){a&&a(),l&&l(),d.cancelToken&&d.cancelToken.unsubscribe(n),d.signal&&d.signal.removeEventListener("abort",n)}let v=new XMLHttpRequest;function y(){if(!v)return;let r=eP.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders());eO(function(e){t(e),m()},function(e){i(e),m()},{data:p&&"text"!==p&&"json"!==p?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v}),v=null}v.open(d.method.toUpperCase(),d.url,!0),v.timeout=d.timeout,"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||4!==v.readyState||(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(y)},v.onabort=function(){v&&(i(new X("Request aborted",X.ECONNABORTED,e,v)),v=null)},v.onerror=function(t){let r=new X(t&&t.message?t.message:"Network Error",X.ERR_NETWORK,e,v);r.event=t||null,i(r),v=null},v.ontimeout=function(){let t=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",r=d.transitional||ed;d.timeoutErrorMessage&&(t=d.timeoutErrorMessage),i(new X(t,r.clarifyTimeoutError?X.ETIMEDOUT:X.ECONNABORTED,e,v)),v=null},void 0===c&&h.setContentType(null),"setRequestHeader"in v&&K.forEach(h.toJSON(),function(e,t){v.setRequestHeader(t,e)}),K.isUndefined(d.withCredentials)||(v.withCredentials=!!d.withCredentials),p&&"json"!==p&&(v.responseType=d.responseType),g&&([s,l]=eF(g,!0),v.addEventListener("progress",s)),f&&v.upload&&([o,a]=eF(f),v.upload.addEventListener("progress",o),v.upload.addEventListener("loadend",a)),(d.cancelToken||d.signal)&&(n=t=>{v&&(i(!t||t.type?new eT(null,e,v):t),v.abort(),v=null)},d.cancelToken&&d.cancelToken.subscribe(n),d.signal&&(d.signal.aborted?n():d.signal.addEventListener("abort",n)));let b=(r=d.url,(u=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r))&&u[1]||"");b&&-1===eb.protocols.indexOf(b)?i(new X("Unsupported protocol "+b+":",X.ERR_BAD_REQUEST,e)):v.send(c||null)})},eW=function*(e,t){let i,r=e.byteLength;if(!t||r<t)return void(yield e);let n=0;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},eU=async function*(e,t){for await(let i of e$(e))yield*eW(i,t)},e$=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);let t=e.getReader();try{for(;;){let{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},eq=(e,t,i,r)=>{let n,o=eU(e,t),s=0,a=e=>{!n&&(n=!0,r&&r(e))};return new ReadableStream({async pull(e){try{let{done:t,value:r}=await o.next();if(t){a(),e.close();return}let n=r.byteLength;if(i){let e=s+=n;i(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},{isFunction:eK}=K,eQ=(({Request:e,Response:t})=>({Request:e,Response:t}))(K.global),{ReadableStream:eX,TextEncoder:eY}=K.global,eZ=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},eJ=e=>{let t,{fetch:i,Request:r,Response:n}=e=K.merge.call({skipUndefined:!0},eQ,e),o=i?eK(i):"function"==typeof fetch,s=eK(r),a=eK(n);if(!o)return!1;let l=o&&eK(eX),u=o&&("function"==typeof eY?(t=new eY,e=>t.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer())),d=s&&l&&eZ(()=>{let e=!1,t=new r(eb.origin,{body:new eX,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),c=a&&l&&eZ(()=>K.isReadableStream(new n("").body)),h={stream:c&&(e=>e.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{h[e]||(h[e]=(t,i)=>{let r=t&&t[e];if(r)return r.call(t);throw new X(`Response type '${e}' is not supported`,X.ERR_NOT_SUPPORT,i)})});let p=async e=>{if(null==e)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e)){let t=new r(eb.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return K.isArrayBufferView(e)||K.isArrayBuffer(e)?e.byteLength:(K.isURLSearchParams(e)&&(e+=""),K.isString(e))?(await u(e)).byteLength:void 0},f=async(e,t)=>{let i=K.toFiniteNumber(e.getContentLength());return null==i?p(t):i};return async e=>{let t,{url:o,method:a,data:l,signal:u,cancelToken:p,timeout:g,onDownloadProgress:m,onUploadProgress:v,responseType:y,headers:b,withCredentials:w="same-origin",fetchOptions:C}=ej(e),x=i||fetch;y=y?(y+"").toLowerCase():"text";let S=((e,t)=>{let{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,r=new AbortController,n=function(e){if(!i){i=!0,s();let t=e instanceof Error?e:this.reason;r.abort(t instanceof X?t:new eT(t instanceof Error?t.message:t))}},o=t&&setTimeout(()=>{o=null,n(new X(`timeout ${t} of ms exceeded`,X.ETIMEDOUT))},t),s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));let{signal:a}=r;return a.unsubscribe=()=>K.asap(s),a}})([u,p&&p.toAbortSignal()],g),k=null,R=S&&S.unsubscribe&&(()=>{S.unsubscribe()});try{if(v&&d&&"get"!==a&&"head"!==a&&0!==(t=await f(b,l))){let e,i=new r(o,{method:"POST",body:l,duplex:"half"});if(K.isFormData(l)&&(e=i.headers.get("content-type"))&&b.setContentType(e),i.body){let[e,r]=eI(t,eF(eL(v)));l=eq(i.body,65536,e,r)}}K.isString(w)||(w=w?"include":"omit");let i=s&&"credentials"in r.prototype,u={...C,signal:S,method:a.toUpperCase(),headers:b.normalize().toJSON(),body:l,duplex:"half",credentials:i?w:void 0};k=s&&new r(o,u);let p=await (s?x(k,C):x(o,u)),g=c&&("stream"===y||"response"===y);if(c&&(m||g&&R)){let e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});let t=K.toFiniteNumber(p.headers.get("content-length")),[i,r]=m&&eI(t,eF(eL(m),!0))||[];p=new n(eq(p.body,65536,i,()=>{r&&r(),R&&R()}),e)}y=y||"text";let E=await h[K.findKey(h,y)||"text"](p,e);return!g&&R&&R(),await new Promise((t,i)=>{eO(t,i,{data:E,headers:eP.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:k})})}catch(t){if(R&&R(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new X("Network Error",X.ERR_NETWORK,e,k),{cause:t.cause||t});throw X.from(t,t&&t.code,e,k)}}},e0=new Map,e1=e=>{let t=e&&e.env||{},{fetch:i,Request:r,Response:n}=t,o=[r,n,i],s=o.length,a,l,u=e0;for(;s--;)a=o[s],void 0===(l=u.get(a))&&u.set(a,l=s?new Map:eJ(t)),u=l;return l};e1();let e2={http:null,xhr:eG,fetch:{get:e1}};K.forEach(e2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});let e5=e=>`- ${e}`,e3=e=>K.isFunction(e)||null===e||!1===e,e4=function(e,t){let i,r,{length:n}=e=K.isArray(e)?e:[e],o={};for(let s=0;s<n;s++){let n;if(r=i=e[s],!e3(i)&&void 0===(r=e2[(n=String(i)).toLowerCase()]))throw new X(`Unknown adapter '${n}'`);if(r&&(K.isFunction(r)||(r=r.get(t))))break;o[n||"#"+s]=r}if(!r){let e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new X("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(e5).join("\n"):" "+e5(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function e8(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eT(null,e)}function e6(e){return e8(e),e.headers=eP.from(e.headers),e.data=eM.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),e4(e.adapter||eC.adapter,e)(e).then(function(t){return e8(e),t.data=eM.call(e,e.transformResponse,t),t.headers=eP.from(t.headers),t},function(t){return!eD(t)&&(e8(e),t&&t.response&&(t.response.data=eM.call(e,e.transformResponse,t.response),t.response.headers=eP.from(t.response.headers))),Promise.reject(t)})}let e7="1.13.2",e9={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{e9[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});let te={};e9.transitional=function(e,t,i){function r(e,t){return"[Axios v"+e7+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,o)=>{if(!1===e)throw new X(r(n," has been removed"+(t?" in "+t:"")),X.ERR_DEPRECATED);return t&&!te[n]&&(te[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},e9.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};let tt=function(e,t,i){if("object"!=typeof e)throw new X("options must be an object",X.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),n=r.length;for(;n-- >0;){let o=r[n],s=t[o];if(s){let t=e[o],i=void 0===t||s(t,o,e);if(!0!==i)throw new X("option "+o+" must be "+i,X.ERR_BAD_OPTION_VALUE);continue}if(!0!==i)throw new X("Unknown option "+o,X.ERR_BAD_OPTION)}};class ti{constructor(e){this.defaults=e||{},this.interceptors={request:new eu,response:new eu}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let i=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?i&&!String(e.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+i):e.stack=i}catch(e){}}throw e}}_request(e,t){let i,r;"string"==typeof e?(t=t||{}).url=e:t=e||{};let{transitional:n,paramsSerializer:o,headers:s}=t=ez(this.defaults,t);void 0!==n&&tt(n,{silentJSONParsing:e9.transitional(e9.boolean),forcedJSONParsing:e9.transitional(e9.boolean),clarifyTimeoutError:e9.transitional(e9.boolean)},!1),null!=o&&(K.isFunction(o)?t.paramsSerializer={serialize:o}:tt(o,{encode:e9.function,serialize:e9.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),tt(t,{baseUrl:e9.spelling("baseURL"),withXsrfToken:e9.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&K.merge(s.common,s[t.method]);s&&K.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=eP.concat(a,s);let l=[],u=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(u=u&&e.synchronous,l.unshift(e.fulfilled,e.rejected))});let d=[];this.interceptors.response.forEach(function(e){d.push(e.fulfilled,e.rejected)});let c=0;if(!u){let e=[e6.bind(this),void 0];for(e.unshift(...l),e.push(...d),r=e.length,i=Promise.resolve(t);c<r;)i=i.then(e[c++],e[c++]);return i}r=l.length;let h=t;for(;c<r;){let e=l[c++],t=l[c++];try{h=e(h)}catch(e){t.call(this,e);break}}try{i=e6.call(this,h)}catch(e){return Promise.reject(e)}for(c=0,r=d.length;c<r;)i=i.then(d[c++],d[c++]);return i}getUri(e){return el(eV((e=ez(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}K.forEach(["delete","get","head","options"],function(e){ti.prototype[e]=function(t,i){return this.request(ez(i||{},{method:e,url:t,data:(i||{}).data}))}}),K.forEach(["post","put","patch"],function(e){function t(t){return function(i,r,n){return this.request(ez(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}ti.prototype[e]=t(),ti.prototype[e+"Form"]=t(!0)});class tr{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});const i=this;this.promise.then(e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null}),this.promise.then=e=>{let t,r=new Promise(e=>{i.subscribe(e),t=e}).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e(function(e,r,n){i.reason||(i.reason=new eT(e,r,n),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new tr(function(t){e=t}),cancel:e}}}let tn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(tn).forEach(([e,t])=>{tn[t]=e});let to=function e(t){let i=new ti(t),r=d(ti.prototype.request,i);return K.extend(r,ti.prototype,i,{allOwnKeys:!0}),K.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return e(ez(t,i))},r}(eC);to.Axios=ti,to.CanceledError=eT,to.CancelToken=tr,to.isCancel=eD,to.VERSION=e7,to.toFormData=er,to.AxiosError=X,to.Cancel=to.CanceledError,to.all=function(e){return Promise.all(e)},to.spread=function(e){return function(t){return e.apply(null,t)}},to.isAxiosError=function(e){return K.isObject(e)&&!0===e.isAxiosError},to.mergeConfig=ez,to.AxiosHeaders=eP,to.formToJSON=e=>ew(K.isHTMLForm(e)?new FormData(e):e),to.getAdapter=e4,to.HttpStatusCode=tn,to.default=to,e.s(["default",0,to],31368)},705443,830023,e=>{"use strict";var t=e.i(224675),i=e.i(31368),r=e.i(316575);let n=r.default.env.NEXT_PUBLIC_API_URL,o=n??=window.location.origin,s=r.default.env.NEXT_PUBLIC_CLOUD_WEB_URL;s??="https://cloud.datarecce.io",e.s(["PUBLIC_API_URL",0,o],830023);let a=i.default.create({baseURL:o}),l=new t.QueryClient;e.s(["axiosClient",0,a,"reactQueryClient",0,l],705443)},713767,e=>{"use strict";var t=e.i(705443);let i=0,r=!1,n=null;function o(e){n=e}async function s(){if(Date.now()-i<3e3||r)return!1;try{return r=!0,await t.axiosClient.post("/api/keep-alive"),i=Date.now(),n&&n(i),!0}catch(e){return window.RECCE_DEBUG_IDLE&&console.log("[Keep-Alive] Failed to send",{error:e instanceof Error?e.message:String(e),timestamp:new Date().toISOString(),willRetryOnNextActivity:!0}),!1}finally{r=!1}}function a(){return i}e.s(["getLastKeepAliveTime",()=>a,"sendKeepAlive",()=>s,"setKeepAliveCallback",()=>o])},791606,(e,t,i)=>{t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},472668,(e,t,i)=>{t.exports=e.g&&e.g.Object===Object&&e.g},818408,(e,t,i)=>{var r=e.r(472668),n="object"==typeof self&&self&&self.Object===Object&&self;t.exports=r||n||Function("return this")()},702272,(e,t,i)=>{var r=e.r(818408);t.exports=function(){return r.Date.now()}},893912,(e,t,i)=>{var r=/\s/;t.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},386716,(e,t,i)=>{var r=e.r(893912),n=/^\s+/;t.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},407667,(e,t,i)=>{t.exports=e.r(818408).Symbol},652930,(e,t,i)=>{var r=e.r(407667),n=Object.prototype,o=n.hasOwnProperty,s=n.toString,a=r?r.toStringTag:void 0;t.exports=function(e){var t=o.call(e,a),i=e[a];try{e[a]=void 0;var r=!0}catch(e){}var n=s.call(e);return r&&(t?e[a]=i:delete e[a]),n}},21955,(e,t,i)=>{var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},423748,(e,t,i)=>{var r=e.r(407667),n=e.r(652930),o=e.r(21955),s=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?n(e):o(e)}},819674,(e,t,i)=>{t.exports=function(e){return null!=e&&"object"==typeof e}},248664,(e,t,i)=>{var r=e.r(423748),n=e.r(819674);t.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==r(e)}},394370,(e,t,i)=>{var r=e.r(386716),n=e.r(791606),o=e.r(248664),s=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(o(e))return s;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var i=l.test(e);return i||u.test(e)?d(e.slice(2),i?2:8):a.test(e)?s:+e}},987325,(e,t,i)=>{var r=e.r(791606),n=e.r(702272),o=e.r(394370),s=Math.max,a=Math.min;t.exports=function(e,t,i){var l,u,d,c,h,p,f=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var i=l,r=u;return l=u=void 0,f=t,c=e.apply(r,i)}function b(e){var i=e-p,r=e-f;return void 0===p||i>=t||i<0||m&&r>=d}function w(){var e,i,r,o=n();if(b(o))return C(o);h=setTimeout(w,(e=o-p,i=o-f,r=t-e,m?a(r,d-i):r))}function C(e){return(h=void 0,v&&l)?y(e):(l=u=void 0,c)}function x(){var e,i=n(),r=b(i);if(l=arguments,u=this,p=i,r){if(void 0===h)return f=e=p,h=setTimeout(w,t),g?y(e):c;if(m)return clearTimeout(h),h=setTimeout(w,t),y(p)}return void 0===h&&(h=setTimeout(w,t)),c}return t=o(t)||0,r(i)&&(g=!!i.leading,d=(m="maxWait"in i)?s(o(i.maxWait)||0,t):d,v="trailing"in i?!!i.trailing:v),x.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=u=h=void 0},x.flush=function(){return void 0===h?c:C(n())},x}},360174,(e,t,i)=>{var r=e.r(987325),n=e.r(791606);t.exports=function(e,t,i){var o=!0,s=!0;if("function"!=typeof e)throw TypeError("Expected a function");return n(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),r(e,t,{leading:o,maxWait:t,trailing:s})}},333207,e=>{"use strict";let t;var i=e.i(935140),r=e.i(889747),n=e.i(868259),o=e.i(279743),s=e.i(297805),a=e.i(204039),l=e.i(608839),u=class extends o.Subscribable{constructor(e,t){super(),this.options=t,this.#d=e,this.#P=null,this.#M=(0,s.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#d;#D=void 0;#T=void 0;#O=void 0;#_;#A;#M;#P;#F;#I;#L;#N;#B;#V;#H=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#D.addObserver(this),d(this.#D,this.options)?this.#z():this.updateResult(),this.#j())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c(this.#D,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c(this.#D,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#G(),this.#W(),this.#D.removeObserver(this)}setOptions(e){let t=this.options,i=this.#D;if(this.options=this.#d.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,a.resolveEnabled)(this.options.enabled,this.#D))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#U(),this.#D.setOptions(this.options),t._defaulted&&!(0,a.shallowEqualObjects)(this.options,t)&&this.#d.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#D,observer:this});let r=this.hasListeners();r&&h(this.#D,i,this.options,t)&&this.#z(),this.updateResult(),r&&(this.#D!==i||(0,a.resolveEnabled)(this.options.enabled,this.#D)!==(0,a.resolveEnabled)(t.enabled,this.#D)||(0,a.resolveStaleTime)(this.options.staleTime,this.#D)!==(0,a.resolveStaleTime)(t.staleTime,this.#D))&&this.#$();let n=this.#q();r&&(this.#D!==i||(0,a.resolveEnabled)(this.options.enabled,this.#D)!==(0,a.resolveEnabled)(t.enabled,this.#D)||n!==this.#V)&&this.#K(n)}getOptimisticResult(e){var t,i;let r=this.#d.getQueryCache().build(this.#d,e),n=this.createResult(r,e);return t=this,i=n,(0,a.shallowEqualObjects)(t.getCurrentResult(),i)||(this.#O=n,this.#A=this.options,this.#_=this.#D.state),n}getCurrentResult(){return this.#O}trackResult(e,t){return new Proxy(e,{get:(e,i)=>(this.trackProp(i),t?.(i),"promise"===i&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#M.status||this.#M.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,i))})}trackProp(e){this.#H.add(e)}getCurrentQuery(){return this.#D}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#d.defaultQueryOptions(e),i=this.#d.getQueryCache().build(this.#d,t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return this.#z({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#O))}#z(e){this.#U();let t=this.#D.fetch(this.options,e);return e?.throwOnError||(t=t.catch(a.noop)),t}#$(){this.#G();let e=(0,a.resolveStaleTime)(this.options.staleTime,this.#D);if(a.isServer||this.#O.isStale||!(0,a.isValidTimeout)(e))return;let t=(0,a.timeUntilStale)(this.#O.dataUpdatedAt,e);this.#N=l.timeoutManager.setTimeout(()=>{this.#O.isStale||this.updateResult()},t+1)}#q(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#D):this.options.refetchInterval)??!1}#K(e){this.#W(),this.#V=e,!a.isServer&&!1!==(0,a.resolveEnabled)(this.options.enabled,this.#D)&&(0,a.isValidTimeout)(this.#V)&&0!==this.#V&&(this.#B=l.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||i.focusManager.isFocused())&&this.#z()},this.#V))}#j(){this.#$(),this.#K(this.#q())}#G(){this.#N&&(l.timeoutManager.clearTimeout(this.#N),this.#N=void 0)}#W(){this.#B&&(l.timeoutManager.clearInterval(this.#B),this.#B=void 0)}createResult(e,t){let i,r=this.#D,o=this.options,l=this.#O,u=this.#_,c=this.#A,f=e!==r?e.state:this.#T,{state:g}=e,m={...g},v=!1;if(t._optimisticResults){let i=this.hasListeners(),s=!i&&d(e,t),a=i&&h(e,r,t,o);(s||a)&&(m={...m,...(0,n.fetchState)(g.data,e.options)}),"isRestoring"===t._optimisticResults&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:w}=m;i=m.data;let C=!1;if(void 0!==t.placeholderData&&void 0===i&&"pending"===w){let e;l?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(e=l.data,C=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#L?.state.data,this.#L):t.placeholderData,void 0!==e&&(w="success",i=(0,a.replaceData)(l?.data,e,t),v=!0)}if(t.select&&void 0!==i&&!C)if(l&&i===u?.data&&t.select===this.#F)i=this.#I;else try{this.#F=t.select,i=t.select(i),i=(0,a.replaceData)(l?.data,i,t),this.#I=i,this.#P=null}catch(e){this.#P=e}this.#P&&(y=this.#P,i=this.#I,b=Date.now(),w="error");let x="fetching"===m.fetchStatus,S="pending"===w,k="error"===w,R=S&&x,E=void 0!==i,P={status:w,fetchStatus:m.fetchStatus,isPending:S,isSuccess:"success"===w,isError:k,isInitialLoading:R,isLoading:R,data:i,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>f.dataUpdateCount||m.errorUpdateCount>f.errorUpdateCount,isFetching:x,isRefetching:x&&!S,isLoadingError:k&&!E,isPaused:"paused"===m.fetchStatus,isPlaceholderData:v,isRefetchError:k&&E,isStale:p(e,t),refetch:this.refetch,promise:this.#M,isEnabled:!1!==(0,a.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===P.status?e.reject(P.error):void 0!==P.data&&e.resolve(P.data)},i=()=>{t(this.#M=P.promise=(0,s.pendingThenable)())},n=this.#M;switch(n.status){case"pending":e.queryHash===r.queryHash&&t(n);break;case"fulfilled":("error"===P.status||P.data!==n.value)&&i();break;case"rejected":("error"!==P.status||P.error!==n.reason)&&i()}}return P}updateResult(){let e=this.#O,t=this.createResult(this.#D,this.options);if(this.#_=this.#D.state,this.#A=this.options,void 0!==this.#_.data&&(this.#L=this.#D),(0,a.shallowEqualObjects)(t,e))return;this.#O=t;let i=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,i="function"==typeof t?t():t;if("all"===i||!i&&!this.#H.size)return!0;let r=new Set(i??this.#H);return this.options.throwOnError&&r.add("error"),Object.keys(this.#O).some(t=>this.#O[t]!==e[t]&&r.has(t))};this.#Q({listeners:i()})}#U(){let e=this.#d.getQueryCache().build(this.#d,this.options);if(e===this.#D)return;let t=this.#D;this.#D=e,this.#T=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#j()}#Q(e){r.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#O)}),this.#d.getQueryCache().notify({query:this.#D,type:"observerResultsUpdated"})})}};function d(e,t){return!1!==(0,a.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&c(e,t,t.refetchOnMount)}function c(e,t,i){if(!1!==(0,a.resolveEnabled)(t.enabled,e)&&"static"!==(0,a.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof i?i(e):i;return"always"===r||!1!==r&&p(e,t)}return!1}function h(e,t,i,r){return(e!==t||!1===(0,a.resolveEnabled)(r.enabled,e))&&(!i.suspense||"error"!==e.state.status)&&p(e,i)}function p(e,t){return!1!==(0,a.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,a.resolveStaleTime)(t.staleTime,e))}e.i(316575);var f=e.i(187725),g=e.i(63257);e.i(19483);var m=f.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),v=f.createContext(!1);v.Provider;var y=(e,t,i)=>t.fetchOptimistic(e).catch(()=>{i.clearReset()});function b(e,t){return function(e,t,i){let n=f.useContext(v),o=f.useContext(m),s=(0,g.useQueryClient)(i),l=s.defaultQueryOptions(e);if(s.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",l.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=l.staleTime;l.staleTime="function"==typeof t?(...i)=>e(t(...i)):e(t),"number"==typeof l.gcTime&&(l.gcTime=Math.max(l.gcTime,1e3))}(l.suspense||l.throwOnError||l.experimental_prefetchInRender)&&!o.isReset()&&(l.retryOnMount=!1),f.useEffect(()=>{o.clearReset()},[o]);let u=!s.getQueryCache().get(l.queryHash),[d]=f.useState(()=>new t(s,l)),c=d.getOptimisticResult(l),h=!n&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=h?d.subscribe(r.notifyManager.batchCalls(e)):a.noop;return d.updateResult(),t},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f.useEffect(()=>{d.setOptions(l)},[l,d]),l?.suspense&&c.isPending)throw y(l,d,o);if((({result:e,errorResetBoundary:t,throwOnError:i,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&void 0===e.data||(0,a.shouldThrowError)(i,[e.error,r])))({result:c,errorResetBoundary:o,throwOnError:l.throwOnError,query:s.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw c.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(l,c),l.experimental_prefetchInRender&&!a.isServer&&c.isLoading&&c.isFetching&&!n){let e=u?y(l,d,o):s.getQueryCache().get(l.queryHash)?.promise;e?.catch(a.noop).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?c:d.trackResult(c)}(e,u,t)}e.s(["useQuery",()=>b],333207)},407101,e=>{"use strict";e.s(["cacheKeys",0,{rowCount:e=>["row_count",e],lineage:()=>["lineage"],checks:()=>["checks","list"],check:e=>["checks",e],checkEvents:e=>["checks",e,"events"],runs:()=>["runs"],run:e=>["runs",e],runsAggregated:()=>["runs_aggregated"],flag:()=>["flag"],instanceInfo:()=>["instance_info"],user:()=>["user"]}])},830520,109624,e=>{"use strict";var t=e.i(333207),i=e.i(407101),r=e.i(705443);async function n(){return(await r.axiosClient.get("/api/instance-info")).data}e.s(["getRecceInstanceInfo",()=>n],109624),e.s(["useRecceInstanceInfo",0,()=>(0,t.useQuery)({queryKey:i.cacheKeys.instanceInfo(),queryFn:n})],830520)},503135,e=>{"use strict";e.s(["IdleTimeoutProvider",()=>u,"useIdleTimeout",()=>c,"useIdleTimeoutSafe",()=>h],503135);var t=e.i(19483),i=e.i(187725),r=e.i(713767),n=e.i(360174),o=e.i(830520);function s(e,t){window.RECCE_DEBUG_IDLE&&(t?console.log(e,t):console.log(e))}let a=["focus","mousemove","keydown","scroll"],l=(0,i.createContext)(void 0);function u({children:e}){let{data:n}=(0,o.useRecceInstanceInfo)(),s=(0,i.useRef)(Date.now()),[a,u]=(0,i.useState)(null),[c,h]=(0,i.useState)(!1),p=n?.idle_timeout??null,f=null!==p&&p>0,g=(0,i.useRef)(f);(0,i.useEffect)(()=>{g.current=f},[f]),(0,i.useEffect)(()=>{if(!f)return void(0,r.setKeepAliveCallback)(null);(0,r.setKeepAliveCallback)(e=>{g.current&&(s.current=e)});let e=(0,r.getLastKeepAliveTime)();return e>0&&(s.current=e),()=>{(0,r.setKeepAliveCallback)(null)}},[f]);let m=(0,i.useCallback)(()=>{h(!0)},[]),v=(0,i.useCallback)(()=>{h(!1),s.current=Date.now()},[]);return(0,i.useEffect)(()=>{if(!f||null===p)return void u(null);if(c)return;let e=()=>{u(Math.max(0,p-(Date.now()-s.current)/1e3))};e();let t=setInterval(e,1e3);return()=>{clearInterval(t)}},[f,p,c]),(0,t.jsxs)(l.Provider,{value:{remainingSeconds:a,idleTimeout:p,isEnabled:f,setDisconnected:m,resetConnection:v,isDisconnected:c},children:[(0,t.jsx)(d,{}),e]})}function d(){return!function(){let{data:e,isLoading:t,isError:l}=(0,o.useRecceInstanceInfo)(),u=h(),d=u?.isDisconnected??!1,c=e?.idle_timeout,p=void 0!==c&&c>0&&!d;s("[Idle Detection] Instance info",{isLoading:t,isError:l,hasIdleTimeout:void 0!==c,idleTimeout:void 0!==c?`${c}s`:"not configured",isDisconnected:d,isEnabled:p});let f=(0,i.useCallback)(async()=>{document.hidden||await (0,r.sendKeepAlive)()&&s("[Idle Detection] Keep-alive sent successfully",{timestamp:new Date().toISOString()})},[]),g=(0,i.useCallback)(e=>{p&&!document.hidden&&(s("[Idle Detection] Activity detected",{event:e.type,tabActive:!document.hidden}),f())},[p,f]),m=(0,i.useCallback)(()=>{p&&(document.hidden||(s("[Idle Detection] Tab became active",{timestamp:new Date().toISOString()}),f()))},[p,f]),v=(0,i.useMemo)(()=>(0,n.default)(g,150,{leading:!0,trailing:!0}),[g]);(0,i.useEffect)(()=>p?(s("[Idle Detection] Initialized",{enabled:!0,idleTimeout:`${c}s`,eventThrottle:"150ms",apiThrottle:"3s (axios layer)",monitoredEvents:a.join(", ")}),a.forEach(e=>{window.addEventListener(e,v,{passive:!0})}),document.addEventListener("visibilitychange",m),()=>{s("[Idle Detection] Cleanup - removing event listeners"),a.forEach(e=>{window.removeEventListener(e,v)}),document.removeEventListener("visibilitychange",m),v.cancel()}):void s("[Idle Detection] Disabled",{idleTimeout:c,reason:void 0===c?"idle_timeout not configured on server":0===c?"idle_timeout is 0":"disconnected"}),[p,v,m,c])}(),null}function c(){let e=(0,i.useContext)(l);if(!e)throw Error("useIdleTimeout must be used within IdleTimeoutProvider");return e}function h(){return(0,i.useContext)(l)??null}},672394,592468,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(995044),r=e.i(842426),n=e.i(272866);let o=function(e){let t=e.activeElement;for(;t?.shadowRoot?.activeElement!=null;)t=t.shadowRoot.activeElement;return t};e.s(["default",0,o],592468);var s=e.i(19483);function a(e){let t=[],i=[];return Array.from(e.querySelectorAll('input,select,textarea,a[href],button,[tabindex],audio[controls],video[controls],[contenteditable]:not([contenteditable="false"])')).forEach((e,r)=>{let n,o=Number.isNaN(n=parseInt(e.getAttribute("tabindex")||"",10))?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:n;-1===o||e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type||!e.name)return!1;let t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`),i=t(`[name="${e.name}"]:checked`);return i||(i=t(`[name="${e.name}"]`)),i!==e}(e)||(0===o?t.push(e):i.push({documentOrder:r,tabIndex:o,node:e}))}),i.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(t)}function l(){return!0}e.s(["default",0,function(e){let{children:u,disableAutoFocus:d=!1,disableEnforceFocus:c=!1,disableRestoreFocus:h=!1,getTabbable:p=a,isEnabled:f=l,open:g}=e,m=t.useRef(!1),v=t.useRef(null),y=t.useRef(null),b=t.useRef(null),w=t.useRef(null),C=t.useRef(!1),x=t.useRef(null),S=(0,i.default)((0,n.default)(u),x),k=t.useRef(null);t.useEffect(()=>{g&&x.current&&(C.current=!d)},[d,g]),t.useEffect(()=>{if(!g||!x.current)return;let e=o((0,r.default)(x.current));return!x.current.contains(e)&&(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),C.current&&x.current.focus()),()=>{h||(b.current&&b.current.focus&&(m.current=!0,b.current.focus()),b.current=null)}},[g]),t.useEffect(()=>{if(!g||!x.current)return;let e=(0,r.default)(x.current),t=o(e),i=e=>{k.current=e,!c&&f()&&"Tab"===e.key&&t===x.current&&e.shiftKey&&(m.current=!0,y.current&&y.current.focus())},n=()=>{let t=x.current;if(null===t)return;let i=o(e);if(!e.hasFocus()||!f()||m.current){m.current=!1;return}if(t.contains(i)||c&&i!==v.current&&i!==y.current)return;if(i!==w.current)w.current=null;else if(null!==w.current)return;if(!C.current)return;let r=[];if((i===v.current||i===y.current)&&(r=p(x.current)),r.length>0){let e=!!(k.current?.shiftKey&&k.current?.key==="Tab"),t=r[0],i=r[r.length-1];"string"!=typeof t&&"string"!=typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",i,!0);let s=setInterval(()=>{let t=o(e);t&&"BODY"===t.tagName&&n()},50);return()=>{clearInterval(s),e.removeEventListener("focusin",n),e.removeEventListener("keydown",i,!0)}},[d,c,h,f,g,p]);let R=e=>{null===b.current&&(b.current=e.relatedTarget),C.current=!0};return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)("div",{tabIndex:g?0:-1,onFocus:R,ref:v,"data-testid":"sentinelStart"}),t.cloneElement(u,{ref:S,onFocus:e=>{null===b.current&&(b.current=e.relatedTarget),C.current=!0,w.current=e.target;let t=u.props.onFocus;t&&t(e)}}),(0,s.jsx)("div",{tabIndex:g?0:-1,onFocus:R,ref:y,"data-testid":"sentinelEnd"})]})}],672394)},355503,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(316245),r=e.i(86396),n=e.i(995044);function o(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var s=e.i(272866);let a=t.forwardRef(function(e,a){let{children:l,container:u,disablePortal:d=!1}=e,[c,h]=t.useState(null),p=(0,n.default)(t.isValidElement(l)?(0,s.default)(l):null,a);return((0,r.default)(()=>{d||h(("function"==typeof u?u():u)||document.body)},[u,d]),(0,r.default)(()=>{if(c&&!d)return o(a,c),()=>{o(a,null)}},[a,c,d]),d)?t.isValidElement(l)?t.cloneElement(l,{ref:p}):l:c?i.createPortal(l,c):c});e.s(["default",0,a],355503)},644367,599779,464755,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(446547),o=e.i(519273),s=e.i(577950),a=e.i(726323),l=e.i(272866),u=e.i(811347),d=e.i(155062),c=e.i(723938),h=e.i(19483);let p={entering:{opacity:1},entered:{opacity:1}},f=t.forwardRef(function(e,i){let r=(0,u.useTheme)(),n={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:f,easing:g,in:m,onEnter:v,onEntered:y,onEntering:b,onExit:w,onExited:C,onExiting:x,style:S,timeout:k=n,TransitionComponent:R=a.Transition,...E}=e,P=t.useRef(null),M=(0,c.default)(P,(0,l.default)(f),i),D=e=>t=>{if(e){let i=P.current;void 0===t?e(i):e(i,t)}},T=D(b),O=D((e,t)=>{(0,d.reflow)(e);let i=(0,d.getTransitionProps)({style:S,timeout:k,easing:g},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",i),e.style.transition=r.transitions.create("opacity",i),v&&v(e,t)}),_=D(y),A=D(x),F=D(e=>{let t=(0,d.getTransitionProps)({style:S,timeout:k,easing:g},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),w&&w(e)}),I=D(C);return(0,h.jsx)(R,{appear:s,in:m,nodeRef:P,onEnter:O,onEntered:_,onEntering:T,onExit:F,onExited:I,onExiting:A,addEndListener:e=>{o&&o(P.current,e)},timeout:k,...E,children:(e,{ownerState:i,...r})=>t.cloneElement(f,{style:{opacity:0,visibility:"exited"!==e||m?void 0:"hidden",...p[e],...S,...f.props.style},ref:M,...r})})});e.s(["default",0,f],599779);var g=e.i(435983),m=e.i(446519);function v(e){return(0,m.default)("MuiBackdrop",e)}(0,g.default)("MuiBackdrop",["root","invisible"]);let y=(0,n.styled)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),b=t.forwardRef(function(e,t){let n=(0,o.useDefaultProps)({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:u="div",invisible:d=!1,open:c,components:p={},componentsProps:g={},slotProps:m={},slots:b={},TransitionComponent:w,transitionDuration:C,...x}=n,S={...n,component:u,invisible:d},k=(e=>{let{classes:t,invisible:i}=e;return(0,r.default)({root:["root",i&&"invisible"]},v,t)})(S),R={component:u,slots:{transition:w,root:p.Root,...b},slotProps:{...g,...m}},[E,P]=(0,s.default)("root",{elementType:y,externalForwardedProps:R,className:(0,i.default)(k.root,l),ownerState:S}),[M,D]=(0,s.default)("transition",{elementType:f,externalForwardedProps:R,ownerState:S});return(0,h.jsx)(M,{in:c,timeout:C,...x,...D,children:(0,h.jsx)(E,{"aria-hidden":!0,...P,classes:k,ref:t,children:a})})});function w(...e){return e.reduce((e,t)=>null==t?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}e.s(["default",0,b],644367),e.s(["default",()=>w],464755)},138419,e=>{"use strict";var t=e.i(842426);function i(e){return(0,t.default)(e).defaultView||window}e.s(["default",()=>i])},687536,589624,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(672394),o=e.i(355503),s=e.i(446547),a=e.i(73205),l=e.i(519273),u=e.i(644367),d=e.i(842426),c=e.i(995044),h=e.i(554191),p=e.i(464755),f=e.i(803913),g=e.i(138419);function m(e=window){let t=e.document.documentElement.clientWidth;return e.innerWidth-t}function v(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function y(e){return parseInt((0,g.default)(e).getComputedStyle(e).paddingRight,10)||0}function b(e,t,i,r,n){let o=[t,i,...r];[].forEach.call(e.children,e=>{let t,i,r=!o.includes(e),s=(t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),i="INPUT"===e.tagName&&"hidden"===e.getAttribute("type"),!t&&!i);r&&s&&v(e,n)})}function w(e,t){let i=-1;return e.some((e,r)=>!!t(e)&&(i=r,!0)),i}e.s(["default",()=>m],589624);let C=()=>{},x=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let i,r=this.modals.indexOf(e);if(-1!==r)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&v(e.modalRef,!1);let n=(i=[],[].forEach.call(t.children,e=>{"true"===e.getAttribute("aria-hidden")&&i.push(e)}),i);b(t,e.mount,e.modalRef,n,!0);let o=w(this.containers,e=>e.container===t);return -1!==o?this.containers[o].modals.push(e):this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:n}),r}mount(e,t){let i=w(this.containers,t=>t.modals.includes(e)),r=this.containers[i];r.restore||(r.restore=function(e,t){let i=[],r=e.container;if(!t.disableScrollLock){let e,t;if((t=(0,d.default)(r)).body===r?(0,g.default)(r).innerWidth>t.documentElement.clientWidth:r.scrollHeight>r.clientHeight){let e=m((0,g.default)(r));i.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${y(r)+e}px`;let t=(0,d.default)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,t=>{i.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${y(t)+e}px`})}if(r.parentNode instanceof DocumentFragment)e=(0,d.default)(r).body;else{let t=r.parentElement,i=(0,g.default)(r);e=t?.nodeName==="HTML"&&"scroll"===i.getComputedStyle(t).overflowY?t:r}i.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{i.forEach(({value:e,el:t,property:i})=>{e?t.style.setProperty(i,e):t.style.removeProperty(i)})}}(r,t))}remove(e,t=!0){let i=this.modals.indexOf(e);if(-1===i)return i;let r=w(this.containers,t=>t.modals.includes(e)),n=this.containers[r];if(n.modals.splice(n.modals.indexOf(e),1),this.modals.splice(i,1),0===n.modals.length)n.restore&&n.restore(),e.modalRef&&v(e.modalRef,t),b(n.container,e.mount,e.modalRef,n.hiddenSiblings,!1),this.containers.splice(r,1);else{let e=n.modals[n.modals.length-1];e.modalRef&&v(e.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},S=function(e){let{container:i,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:u,open:g,rootRef:m}=e,y=t.useRef({}),b=t.useRef(null),w=t.useRef(null),S=(0,c.default)(w,m),[k,R]=t.useState(!g),E=!!l&&l.props.hasOwnProperty("in"),P=!0;("false"===e["aria-hidden"]||!1===e["aria-hidden"])&&(P=!1);let M=()=>(y.current.modalRef=w.current,y.current.mount=b.current,y.current),D=()=>{x.mount(M(),{disableScrollLock:n}),w.current&&(w.current.scrollTop=0)},T=(0,h.default)(()=>{let e=("function"==typeof i?i():i)||(0,d.default)(b.current).body;x.add(M(),e),w.current&&D()}),O=()=>x.isTopModal(M()),_=(0,h.default)(e=>{b.current=e,e&&(g&&O()?D():w.current&&v(w.current,P))}),A=t.useCallback(()=>{x.remove(M(),P)},[P]);return t.useEffect(()=>()=>{A()},[A]),t.useEffect(()=>{g?T():E&&o||A()},[g,A,E,o,T]),{getRootProps:(t={})=>{let i=(0,f.default)(e);delete i.onTransitionEnter,delete i.onTransitionExited;let n={...i,...t};return{role:"presentation",...n,onKeyDown:e=>{n.onKeyDown?.(e),"Escape"===e.key&&229!==e.which&&O()&&!r&&(e.stopPropagation(),u&&u(e,"escapeKeyDown"))},ref:S}},getBackdropProps:(e={})=>({"aria-hidden":!0,...e,onClick:t=>{e.onClick?.(t),t.target===t.currentTarget&&u&&u(t,"backdropClick")},open:g}),getTransitionProps:()=>({onEnter:(0,p.default)(()=>{R(!1),s&&s()},l?.props.onEnter??C),onExited:(0,p.default)(()=>{R(!0),a&&a(),o&&A()},l?.props.onExited??C)}),rootRef:S,portalRef:_,isTopModal:O,exited:k,hasTransition:E}};var k=e.i(435983),R=e.i(446519);function E(e){return(0,R.default)("MuiModal",e)}(0,k.default)("MuiModal",["root","hidden","backdrop"]);var P=e.i(577950),M=e.i(19483);let D=(0,s.styled)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.open&&i.exited&&t.hidden]}})((0,a.default)(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),T=(0,s.styled)(u.default,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),O=t.forwardRef(function(e,s){let a=(0,l.useDefaultProps)({name:"MuiModal",props:e}),{BackdropComponent:u=T,BackdropProps:d,classes:c,className:h,closeAfterTransition:p=!1,children:f,container:g,component:m,components:v={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:w=!1,disableEscapeKeyDown:C=!1,disablePortal:x=!1,disableRestoreFocus:k=!1,disableScrollLock:R=!1,hideBackdrop:O=!1,keepMounted:_=!1,onClose:A,onTransitionEnter:F,onTransitionExited:I,open:L,slotProps:N={},slots:B={},theme:V,...H}=a,z={...a,closeAfterTransition:p,disableAutoFocus:b,disableEnforceFocus:w,disableEscapeKeyDown:C,disablePortal:x,disableRestoreFocus:k,disableScrollLock:R,hideBackdrop:O,keepMounted:_},{getRootProps:j,getBackdropProps:G,getTransitionProps:W,portalRef:U,isTopModal:$,exited:q,hasTransition:K}=S({...z,rootRef:s}),Q={...z,exited:q},X=(e=>{let{open:t,exited:i,classes:n}=e;return(0,r.default)({root:["root",!t&&i&&"hidden"],backdrop:["backdrop"]},E,n)})(Q),Y={};if(void 0===f.props.tabIndex&&(Y.tabIndex="-1"),K){let{onEnter:e,onExited:t}=W();Y.onEnter=e,Y.onExited=t}let Z={slots:{root:v.Root,backdrop:v.Backdrop,...B},slotProps:{...y,...N}},[J,ee]=(0,P.default)("root",{ref:s,elementType:D,externalForwardedProps:{...Z,...H,component:m},getSlotProps:j,ownerState:Q,className:(0,i.default)(h,X?.root,!Q.open&&Q.exited&&X?.hidden)}),[et,ei]=(0,P.default)("backdrop",{ref:d?.ref,elementType:u,externalForwardedProps:Z,shouldForwardComponentProp:!0,additionalProps:d,getSlotProps:e=>G({...e,onClick:t=>{e?.onClick&&e.onClick(t)}}),className:(0,i.default)(d?.className,X?.backdrop),ownerState:Q});return _||L||K&&!q?(0,M.jsx)(o.default,{ref:U,container:g,disablePortal:x,children:(0,M.jsxs)(J,{...ee,children:[!O&&u?(0,M.jsx)(et,{...ei}):null,(0,M.jsx)(n.default,{disableEnforceFocus:w,disableAutoFocus:b,disableRestoreFocus:k,isEnabled:$,open:L,children:t.cloneElement(f,Y)})]})}):null});e.s(["default",0,O],687536)},468836,11321,772510,845209,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(244875),o=e.i(578509),s=e.i(687536),a=e.i(599779),l=e.i(966196),u=e.i(435983),d=e.i(446519);function c(e){return(0,d.default)("MuiDialog",e)}let h=(0,u.default)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),p=t.createContext({});var f=e.i(644367),g=e.i(446547),m=e.i(811347),v=e.i(73205),y=e.i(519273),b=e.i(577950),w=e.i(19483);let C=(0,g.styled)(f.default,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),x=(0,g.styled)(s.default,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),S=(0,g.styled)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.container,t[`scroll${(0,o.default)(i.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),k=(0,g.styled)(l.default,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.paper,t[`scrollPaper${(0,o.default)(i.scroll)}`],t[`paperWidth${(0,o.default)(String(i.maxWidth))}`],i.fullWidth&&t.paperFullWidth,i.fullScreen&&t.paperFullScreen]}})((0,v.default)(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${h.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(e=>"xs"!==e).map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${h.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${h.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),R=t.forwardRef(function(e,s){let u=(0,y.useDefaultProps)({props:e,name:"MuiDialog"}),d=(0,m.useTheme)(),h={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":f,"aria-labelledby":g,"aria-modal":v=!0,BackdropComponent:R,BackdropProps:E,children:P,className:M,disableEscapeKeyDown:D=!1,fullScreen:T=!1,fullWidth:O=!1,maxWidth:_="sm",onClick:A,onClose:F,open:I,PaperComponent:L=l.default,PaperProps:N={},scroll:B="paper",slots:V={},slotProps:H={},TransitionComponent:z=a.default,transitionDuration:j=h,TransitionProps:G,...W}=u,U={...u,disableEscapeKeyDown:D,fullScreen:T,fullWidth:O,maxWidth:_,scroll:B},$=(e=>{let{classes:t,scroll:i,maxWidth:n,fullWidth:s,fullScreen:a}=e,l={root:["root"],container:["container",`scroll${(0,o.default)(i)}`],paper:["paper",`paperScroll${(0,o.default)(i)}`,`paperWidth${(0,o.default)(String(n))}`,s&&"paperFullWidth",a&&"paperFullScreen"]};return(0,r.default)(l,c,t)})(U),q=t.useRef(),K=(0,n.default)(g),Q=t.useMemo(()=>({titleId:K}),[K]),X={slots:{transition:z,...V},slotProps:{transition:G,paper:N,backdrop:E,...H}},[Y,Z]=(0,b.default)("root",{elementType:x,shouldForwardComponentProp:!0,externalForwardedProps:X,ownerState:U,className:(0,i.default)($.root,M),ref:s}),[J,ee]=(0,b.default)("backdrop",{elementType:C,shouldForwardComponentProp:!0,externalForwardedProps:X,ownerState:U}),[et,ei]=(0,b.default)("paper",{elementType:k,shouldForwardComponentProp:!0,externalForwardedProps:X,ownerState:U,className:(0,i.default)($.paper,N.className)}),[er,en]=(0,b.default)("container",{elementType:S,externalForwardedProps:X,ownerState:U,className:$.container}),[eo,es]=(0,b.default)("transition",{elementType:a.default,externalForwardedProps:X,ownerState:U,additionalProps:{appear:!0,in:I,timeout:j,role:"presentation"}});return(0,w.jsx)(Y,{closeAfterTransition:!0,slots:{backdrop:J},slotProps:{backdrop:{transitionDuration:j,as:R,...ee}},disableEscapeKeyDown:D,onClose:F,open:I,onClick:e=>{A&&A(e),q.current&&(q.current=null,F&&F(e,"backdropClick"))},...Z,...W,children:(0,w.jsx)(eo,{...es,children:(0,w.jsx)(er,{onMouseDown:e=>{q.current=e.target===e.currentTarget},...en,children:(0,w.jsx)(et,{as:L,elevation:24,role:"dialog","aria-describedby":f,"aria-labelledby":K,"aria-modal":v,...ei,children:(0,w.jsx)(p.Provider,{value:Q,children:P})})})})})});function E(e){return(0,d.default)("MuiDialogActions",e)}e.s(["default",0,R],468836),(0,u.default)("MuiDialogActions",["root","spacing"]);let P=(0,g.styled)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),M=t.forwardRef(function(e,t){let n=(0,y.useDefaultProps)({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:s=!1,...a}=n,l={...n,disableSpacing:s},u=(e=>{let{classes:t,disableSpacing:i}=e;return(0,r.default)({root:["root",!i&&"spacing"]},E,t)})(l);return(0,w.jsx)(P,{className:(0,i.default)(u.root,o),ownerState:l,ref:t,...a})});function D(e){return(0,d.default)("MuiDialogContent",e)}function T(e){return(0,d.default)("MuiDialogTitle",e)}e.s(["default",0,M],11321),(0,u.default)("MuiDialogContent",["root","dividers"]);let O=(0,u.default)("MuiDialogTitle",["root"]),_=(0,g.styled)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dividers&&t.dividers]}})((0,v.default)(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${O.root} + &`]:{paddingTop:0}}}]}))),A=t.forwardRef(function(e,t){let n=(0,y.useDefaultProps)({props:e,name:"MuiDialogContent"}),{className:o,dividers:s=!1,...a}=n,l={...n,dividers:s},u=(e=>{let{classes:t,dividers:i}=e;return(0,r.default)({root:["root",i&&"dividers"]},D,t)})(l);return(0,w.jsx)(_,{className:(0,i.default)(u.root,o),ownerState:l,ref:t,...a})});e.s(["default",0,A],772510);var F=e.i(427938);let I=(0,g.styled)(F.default,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),L=t.forwardRef(function(e,n){let o=(0,y.useDefaultProps)({props:e,name:"MuiDialogTitle"}),{className:s,id:a,...l}=o,u=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},T,t)})(o),{titleId:d=a}=t.useContext(p);return(0,w.jsx)(I,{component:"h2",className:(0,i.default)(u.root,s),ownerState:o,ref:n,variant:"h6",id:a??d,...l})});e.s(["default",0,L],845209)},79312,(e,t,i)=>{!function(){"use strict";var e={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function i(e,t){for(var i,r="",n=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)i=e.charCodeAt(a);else if(47===i)break;else i=47;if(47===i){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2)){if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",n=0):n=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,o=a,s=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),n=a-o-1;o=a,s=0}else 46===i&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var e,r,n="",o=!1,s=arguments.length-1;s>=-1&&!o;s--)s>=0?r=arguments[s]:(void 0===e&&(e=""),r=e),t(r),0!==r.length&&(n=r+"/"+n,o=47===r.charCodeAt(0));if(n=i(n,!o),o)if(n.length>0)return"/"+n;else return"/";return n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return(0!==(e=i(e,!r)).length||r||(e="."),e.length>0&&n&&(e+="/"),r)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,i=0;i<arguments.length;++i){var n=arguments[i];t(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":r.normalize(e)},relative:function(e,i){if(t(e),t(i),e===i||(e=r.resolve(e))===(i=r.resolve(i)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,s=o-n,a=1;a<i.length&&47===i.charCodeAt(a);++a);for(var l=i.length-a,u=s<l?s:l,d=-1,c=0;c<=u;++c){if(c===u){if(l>u){if(47===i.charCodeAt(a+c))return i.slice(a+c+1);else if(0===c)return i.slice(a+c)}else s>u&&(47===e.charCodeAt(n+c)?d=c:0===c&&(d=0));break}var h=e.charCodeAt(n+c);if(h!==i.charCodeAt(a+c))break;47===h&&(d=c)}var p="";for(c=n+d+1;c<=o;++c)(c===o||47===e.charCodeAt(c))&&(0===p.length?p+="..":p+="/..");return p.length>0?p+i.slice(a+d):(a+=d,47===i.charCodeAt(a)&&++a,i.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var i=e.charCodeAt(0),r=47===i,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(i=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return -1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)},basename:function(e,i){if(void 0!==i&&"string"!=typeof i)throw TypeError('"ext" argument must be a string');t(e);var r,n=0,o=-1,s=!0;if(void 0!==i&&i.length>0&&i.length<=e.length){if(i.length===e.length&&i===e)return"";var a=i.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!s){n=r+1;break}}else -1===l&&(s=!1,l=r+1),a>=0&&(u===i.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){n=r+1;break}}else -1===o&&(s=!1,o=r+1);return -1===o?"":e.slice(n,o)},extname:function(e){t(e);for(var i=-1,r=0,n=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47===l){if(!o){r=a+1;break}continue}-1===n&&(o=!1,n=a+1),46===l?-1===i?i=a:1!==s&&(s=1):-1!==i&&(s=-1)}return -1===i||-1===n||0===s||1===s&&i===n-1&&i===r+1?"":e.slice(i,n)},format:function(e){var t,i;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+i:t+"/"+i:i},parse:function(e){t(e);var i,r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n=e.charCodeAt(0),o=47===n;o?(r.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,u=!0,d=e.length-1,c=0;d>=i;--d){if(47===(n=e.charCodeAt(d))){if(!u){a=d+1;break}continue}-1===l&&(u=!1,l=d+1),46===n?-1===s?s=d:1!==c&&(c=1):-1!==s&&(c=-1)}return -1===s||-1===l||0===c||1===c&&s===l-1&&s===a+1?-1!==l&&(0===a&&o?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(a,l)):(0===a&&o?(r.name=e.slice(1,s),r.base=e.slice(1,l)):(r.name=e.slice(a,s),r.base=e.slice(a,l)),r.ext=e.slice(s,l)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r}},i={};function r(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}},s=!0;try{e[t](o,o.exports,r),s=!1}finally{s&&delete i[t]}return o.exports}r.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macros@3.1.0_reac_b41129a5d0dbb99ff13b71aa74cb05b9/node_modules/next/dist/compiled/path-browserify/",t.exports=r(114)}()},955343,e=>{"use strict";var t=e.i(187725),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=t.default.createContext&&t.default.createContext(i),n=["attr","size","title"];function o(){return(o=Object.assign.bind()).apply(this,arguments)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){var r,n,o;r=e,n=t,o=i[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function l(e){return i=>t.default.createElement(u,o({attr:a({},e.attr)},i),function e(i){return i&&i.map((i,r)=>t.default.createElement(i.tag,a({key:r},i.attr),e(i.child)))}(e.child))}function u(e){var s=i=>{var r,{attr:s,size:l,title:u}=e,d=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(e,n),c=l||i.size||"1em";return i.className&&(r=i.className),e.className&&(r=(r?r+" ":"")+e.className),t.default.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,s,d,{className:r,style:a(a({color:e.color||i.color},i.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),u&&t.default.createElement("title",null,u),e.children)};return void 0!==r?t.default.createElement(r.Consumer,null,e=>s(e)):s(i)}e.s(["GenIcon",()=>l],955343)},603338,e=>{"use strict";var t=e.i(955343);function i(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M128 80V64a48.14 48.14 0 0 1 48-48h224a48.14 48.14 0 0 1 48 48v368l-80-64"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M320 96H112a48.14 48.14 0 0 0-48 48v352l152-128 152 128V144a48.14 48.14 0 0 0-48-48z"},child:[]}]})(e)}function r(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}function n(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M449.07 399.08 278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17zm-198.6-1.83a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7z"},child:[]}]})(e)}e.s(["IoBookmarksOutline",()=>i,"IoClose",()=>r,"IoWarning",()=>n])},593104,(e,t,i)=>{"use strict";function r(e,t){e[t]?e[t]++:e[t]=1}function n(e,t){--e[t]||delete e[t]}function o(e,t,i,r){var n=""+t,o=""+i;if(!e&&n>o){var s=n;n=o,o=s}return n+"\x01"+o+"\x01"+(void 0===r?"\0":r)}function s(e,t){return o(e,t.v,t.w,t.name)}t.exports=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>void 0;_defaultEdgeLabelFn=()=>void 0;_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!Object.hasOwn(e,"directed")||e.directed,this._isMultigraph=!!Object.hasOwn(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.hasOwn(e,"compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children["\0"]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(t=>0===Object.keys(e._in[t]).length)}sinks(){var e=this;return this.nodes().filter(t=>0===Object.keys(e._out[t]).length)}setNodes(e,t){var i=arguments,r=this;return e.forEach(function(e){i.length>1?r.setNode(e,t):r.setNode(e)}),this}setNode(e,t){return Object.hasOwn(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var t=this;if(Object.hasOwn(this._nodes,e)){var i=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(e){t.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(i),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(i),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(void 0===t)t="\0";else{t+="";for(var i=t;void 0!==i;i=this.parent(i))if(i===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}}children(e="\0"){if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){let r=new Set(t);for(var i of this.successors(e))r.add(i);return Array.from(r.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var i=this;Object.entries(this._nodes).forEach(function([i,r]){e(i)&&t.setNode(i,r)}),Object.values(this._edgeObjs).forEach(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,i.edge(e))});var r={};return this._isCompound&&t.nodes().forEach(e=>t.setParent(e,function e(n){var o=i.parent(n);return void 0===o||t.hasNode(o)?(r[n]=o,o):o in r?r[o]:e(o)}(e))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var i=this,r=arguments;return e.reduce(function(e,n){return r.length>1?i.setEdge(e,n,t):i.setEdge(e,n),n}),this}setEdge(){var e,t,i,n,s=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,i=a.name,2==arguments.length&&(n=arguments[1],s=!0)):(e=a,t=arguments[1],i=arguments[3],arguments.length>2&&(n=arguments[2],s=!0)),e=""+e,t=""+t,void 0!==i&&(i=""+i);var l=o(this._isDirected,e,t,i);if(Object.hasOwn(this._edgeLabels,l))return s&&(this._edgeLabels[l]=n),this;if(void 0!==i&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[l]=s?n:this._defaultEdgeLabelFn(e,t,i);var u=function(e,t,i,r){var n=""+t,o=""+i;if(!e&&n>o){var s=n;n=o,o=s}var a={v:n,w:o};return r&&(a.name=r),a}(this._isDirected,e,t,i);return e=u.v,t=u.w,Object.freeze(u),this._edgeObjs[l]=u,r(this._preds[t],e),r(this._sucs[e],t),this._in[t][l]=u,this._out[e][l]=u,this._edgeCount++,this}edge(e,t,i){var r=1==arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,i);return this._edgeLabels[r]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,i){var r=1==arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,i);return Object.hasOwn(this._edgeLabels,r)}removeEdge(e,t,i){var r=1==arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,e,t,i),a=this._edgeObjs[r];return a&&(e=a.v,t=a.w,delete this._edgeLabels[r],delete this._edgeObjs[r],n(this._preds[t],e),n(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this}inEdges(e,t){var i=this._in[e];if(i){var r=Object.values(i);return t?r.filter(e=>e.v===t):r}}outEdges(e,t){var i=this._out[e];if(i){var r=Object.values(i);return t?r.filter(e=>e.w===t):r}}nodeEdges(e,t){var i=this.inEdges(e,t);if(i)return i.concat(this.outEdges(e,t))}}},556524,(e,t,i)=>{t.exports="2.2.4"},60242,(e,t,i)=>{t.exports={Graph:e.r(593104),version:e.r(556524)}},728058,(e,t,i)=>{var r=e.r(593104);t.exports={write:function(e){var t,i,r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e).nodes().map(function(e){var i=t.node(e),r=t.parent(e),n={v:e};return void 0!==i&&(n.value=i),void 0!==r&&(n.parent=r),n}),edges:(i=e).edges().map(function(e){var t=i.edge(e),r={v:e.v,w:e.w};return void 0!==e.name&&(r.name=e.name),void 0!==t&&(r.value=t),r})};return void 0!==e.graph()&&(r.value=structuredClone(e.graph())),r},read:function(e){var t=new r(e.options).setGraph(e.value);return e.nodes.forEach(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),e.edges.forEach(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},113595,(e,t,i)=>{t.exports=function(e){var t,i={},r=[];return e.nodes().forEach(function(n){t=[],function r(n){Object.hasOwn(i,n)||(i[n]=!0,t.push(n),e.successors(n).forEach(r),e.predecessors(n).forEach(r))}(n),t.length&&r.push(t)}),r}},524053,(e,t,i)=>{t.exports=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key}add(e,t){var i=this._keyIndices;if(!Object.hasOwn(i,e=String(e))){var r=this._arr,n=r.length;return i[e]=n,r.push({key:e,priority:t}),this._decrease(n),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var i=this._keyIndices[e];if(t>this._arr[i].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[i].priority+" New: "+t);this._arr[i].priority=t,this._decrease(i)}_heapify(e){var t=this._arr,i=2*e,r=i+1,n=e;i<t.length&&(n=t[i].priority<t[n].priority?i:n,r<t.length&&(n=t[r].priority<t[n].priority?r:n),n!==e&&(this._swap(e,n),this._heapify(n)))}_decrease(e){for(var t,i=this._arr,r=i[e].priority;0!==e&&!(i[t=e>>1].priority<r);)this._swap(e,t),e=t}_swap(e,t){var i=this._arr,r=this._keyIndices,n=i[e],o=i[t];i[e]=o,i[t]=n,r[o.key]=e,r[n.key]=t}}},495904,(e,t,i)=>{var r=e.r(524053);t.exports=function(e,t,i,o){return function(e,t,i,n){var o,s,a={},l=new r,u=function(e){var t=e.v!==o?e.v:e.w,r=a[t],n=i(e),u=s.distance+n;if(n<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+n);u<r.distance&&(r.distance=u,r.predecessor=o,l.decrease(t,u))};for(e.nodes().forEach(function(e){var i=e===t?0:1/0;a[e]={distance:i},l.add(e,i)});l.size()>0&&(s=a[o=l.removeMin()]).distance!==1/0;)n(o).forEach(u);return a}(e,String(t),i||n,o||function(t){return e.outEdges(t)})};var n=()=>1},453242,(e,t,i)=>{var r=e.r(495904);t.exports=function(e,t,i){return e.nodes().reduce(function(n,o){return n[o]=r(e,o,t,i),n},{})}},939386,(e,t,i)=>{t.exports=function(e){var t=0,i=[],r={},n=[];return e.nodes().forEach(function(o){Object.hasOwn(r,o)||function o(s){var a=r[s]={onStack:!0,lowlink:t,index:t++};if(i.push(s),e.successors(s).forEach(function(e){Object.hasOwn(r,e)?r[e].onStack&&(a.lowlink=Math.min(a.lowlink,r[e].index)):(o(e),a.lowlink=Math.min(a.lowlink,r[e].lowlink))}),a.lowlink===a.index){var l,u=[];do r[l=i.pop()].onStack=!1,u.push(l);while(s!==l)n.push(u)}}(o)}),n}},628782,(e,t,i)=>{var r=e.r(939386);t.exports=function(e){return r(e).filter(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},953449,(e,t,i)=>{t.exports=function(e,t,i){var n,o,s,a,l;return n=e,o=t||r,s=i||function(t){return e.outEdges(t)},a={},(l=n.nodes()).forEach(function(e){a[e]={},a[e][e]={distance:0},l.forEach(function(t){e!==t&&(a[e][t]={distance:1/0})}),s(e).forEach(function(t){var i=t.v===e?t.w:t.v,r=o(t);a[e][i]={distance:r,predecessor:e}})}),l.forEach(function(e){var t=a[e];l.forEach(function(i){var r=a[i];l.forEach(function(i){var n=r[e],o=t[i],s=r[i],a=n.distance+o.distance;a<s.distance&&(s.distance=a,s.predecessor=o.predecessor)})})}),a};var r=()=>1},686103,(e,t,i)=>{function r(e){var t={},i={},r=[];if(e.sinks().forEach(function o(s){if(Object.hasOwn(i,s))throw new n;Object.hasOwn(t,s)||(i[s]=!0,t[s]=!0,e.predecessors(s).forEach(o),delete i[s],r.push(s))}),Object.keys(t).length!==e.nodeCount())throw new n;return r}class n extends Error{constructor(){super(...arguments)}}t.exports=r,r.CycleException=n},871053,(e,t,i)=>{var r=e.r(686103);t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},937525,(e,t,i)=>{function r(e,t,i,r){for(var n=[[e,!1]];n.length>0;){var s=n.pop();s[1]?r.push(s[0]):Object.hasOwn(i,s[0])||(i[s[0]]=!0,n.push([s[0],!0]),o(t(s[0]),e=>n.push([e,!1])))}}function n(e,t,i,r){for(var n=[e];n.length>0;){var s=n.pop();Object.hasOwn(i,s)||(i[s]=!0,r.push(s),o(t(s),e=>n.push(e)))}}function o(e,t){for(var i=e.length;i--;)t(e[i],i,e);return e}t.exports=function(e,t,i){Array.isArray(t)||(t=[t]);var o=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),s="post"===i?r:n,a=[],l={};return t.forEach(t=>{if(!e.hasNode(t))throw Error("Graph does not have node: "+t);s(t,o,l,a)}),a}},347059,(e,t,i)=>{var r=e.r(937525);t.exports=function(e,t){return r(e,t,"post")}},481445,(e,t,i)=>{var r=e.r(937525);t.exports=function(e,t){return r(e,t,"pre")}},9712,(e,t,i)=>{var r=e.r(593104),n=e.r(524053);t.exports=function(e,t){var i,o=new r,s={},a=new n;function l(e){var r=e.v===i?e.w:e.v,n=a.priority(r);if(void 0!==n){var o=t(e);o<n&&(s[r]=i,a.decrease(r,o))}}if(0===e.nodeCount())return o;e.nodes().forEach(function(e){a.add(e,1/0),o.setNode(e)}),a.decrease(e.nodes()[0],0);for(var u=!1;a.size()>0;){if(Object.hasOwn(s,i=a.removeMin()))o.setEdge(i,s[i]);else if(u)throw Error("Input graph is not connected: "+e);else u=!0;e.nodeEdges(i).forEach(l)}return o}},981620,(e,t,i)=>{t.exports={components:e.r(113595),dijkstra:e.r(495904),dijkstraAll:e.r(453242),findCycles:e.r(628782),floydWarshall:e.r(953449),isAcyclic:e.r(871053),postorder:e.r(347059),preorder:e.r(481445),prim:e.r(9712),tarjan:e.r(939386),topsort:e.r(686103)}},76321,(e,t,i)=>{var r=e.r(60242);t.exports={Graph:r.Graph,json:e.r(728058),alg:e.r(981620),version:r.version}},738141,(e,t,i)=>{function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function n(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return r(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,i=t._prev;for(;i!==t;)e.push(JSON.stringify(i,n)),i=i._prev;return"["+e.join(", ")+"]"}}},835934,(e,t,i)=>{let r=e.r(76321).Graph,n=e.r(738141);t.exports=function(e,t){var i,l;let u,d,c,h,p;if(1>=e.nodeCount())return[];let f=(i=e,l=t||o,u=new r,d=0,c=0,i.nodes().forEach(e=>{u.setNode(e,{v:e,in:0,out:0})}),i.edges().forEach(e=>{let t=u.edge(e.v,e.w)||0,i=l(e);u.setEdge(e.v,e.w,t+i),c=Math.max(c,u.node(e.v).out+=i),d=Math.max(d,u.node(e.w).in+=i)}),h=(function(e){let t=[];for(let i=0;i<e;i++)t.push(i);return t})(c+d+3).map(()=>new n),p=d+1,u.nodes().forEach(e=>{a(h,p,u.node(e))}),{graph:u,buckets:h,zeroIdx:p});return(function(e,t,i){let r,n=[],o=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)s(e,t,i,r);for(;r=o.dequeue();)s(e,t,i,r);if(e.nodeCount()){for(let o=t.length-2;o>0;--o)if(r=t[o].dequeue()){n=n.concat(s(e,t,i,r,!0));break}}}return n})(f.graph,f.buckets,f.zeroIdx).flatMap(t=>e.outEdges(t.v,t.w))};let o=()=>1;function s(e,t,i,r,n){let o=n?[]:void 0;return e.inEdges(r.v).forEach(r=>{let s=e.edge(r),l=e.node(r.v);n&&o.push({v:r.v,w:r.w}),l.out-=s,a(t,i,l)}),e.outEdges(r.v).forEach(r=>{let n=e.edge(r),o=r.w,s=e.node(o);s.in-=n,a(t,i,s)}),e.removeNode(r.v),o}function a(e,t,i){i.out?i.in?e[i.out-i.in+t].enqueue(i):e[e.length-1].enqueue(i):e[0].enqueue(i)}},558704,(e,t,i)=>{"use strict";let r=e.r(76321).Graph;function n(e,t,i,r){for(var n=r;e.hasNode(n);)n=l(r);return i.dummy=t,e.setNode(n,i),n}t.exports={addBorderNode:function(e,t,i,r){let o={width:0,height:0};return arguments.length>=4&&(o.rank=i,o.order=r),n(e,"border",o,t)},addDummyNode:n,applyWithChunking:o,asNonCompoundGraph:function(e){let t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(i=>{e.children(i).length||t.setNode(i,e.node(i))}),e.edges().forEach(i=>{t.setEdge(i,e.edge(i))}),t},buildLayerMatrix:function(e){let t=u(s(e)+1).map(()=>[]);return e.nodes().forEach(i=>{let r=e.node(i),n=r.rank;void 0!==n&&(t[n][r.order]=i)}),t},intersectRect:function(e,t){let i,r,n=e.x,o=e.y,s=t.x-n,a=t.y-o,l=e.width/2,u=e.height/2;if(!s&&!a)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*l>Math.abs(s)*u?(a<0&&(u=-u),i=u*s/a,r=u):(s<0&&(l=-l),i=l,r=l*a/s),{x:n+i,y:o+r}},mapValues:function(e,t){let i=t;return"string"==typeof t&&(i=e=>e[t]),Object.entries(e).reduce((e,[t,r])=>(e[t]=i(r,t),e),{})},maxRank:s,normalizeRanks:function(e){let t=o(Math.min,e.nodes().map(t=>{let i=e.node(t).rank;return void 0===i?Number.MAX_VALUE:i}));e.nodes().forEach(i=>{let r=e.node(i);Object.hasOwn(r,"rank")&&(r.rank-=t)})},notime:function(e,t){return t()},partition:function(e,t){let i={lhs:[],rhs:[]};return e.forEach(e=>{t(e)?i.lhs.push(e):i.rhs.push(e)}),i},pick:function(e,t){let i={};for(let r of t)void 0!==e[r]&&(i[r]=e[r]);return i},predecessorWeights:function(e){let t=e.nodes().map(t=>{let i={};return e.inEdges(t).forEach(t=>{i[t.v]=(i[t.v]||0)+e.edge(t).weight}),i});return d(e.nodes(),t)},range:u,removeEmptyRanks:function(e){let t=o(Math.min,e.nodes().map(t=>e.node(t).rank)),i=[];e.nodes().forEach(r=>{let n=e.node(r).rank-t;i[n]||(i[n]=[]),i[n].push(r)});let r=0,n=e.graph().nodeRankFactor;Array.from(i).forEach((t,i)=>{void 0===t&&i%n!=0?--r:void 0!==t&&r&&t.forEach(t=>e.node(t).rank+=r)})},simplify:function(e){let t=new r().setGraph(e.graph());return e.nodes().forEach(i=>t.setNode(i,e.node(i))),e.edges().forEach(i=>{let r=t.edge(i.v,i.w)||{weight:0,minlen:1},n=e.edge(i);t.setEdge(i.v,i.w,{weight:r.weight+n.weight,minlen:Math.max(r.minlen,n.minlen)})}),t},successorWeights:function(e){let t=e.nodes().map(t=>{let i={};return e.outEdges(t).forEach(t=>{i[t.w]=(i[t.w]||0)+e.edge(t).weight}),i});return d(e.nodes(),t)},time:function(e,t){let i=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-i)+"ms")}},uniqueId:l,zipObject:d};function o(e,t){if(!(t.length>65535))return e.apply(null,t);{let i=function(e,t=65535){let i=[];for(let r=0;r<e.length;r+=t){let n=e.slice(r,r+t);i.push(n)}return i}(t);return e.apply(null,i.map(t=>e.apply(null,t)))}}function s(e){return o(Math.max,e.nodes().map(t=>{let i=e.node(t).rank;return void 0===i?5e-324:i}))}let a=0;function l(e){return e+""+ ++a}function u(e,t,i=1){null==t&&(t=e,e=0);let r=e=>e<t;i<0&&(r=e=>t<e);let n=[];for(let t=e;r(t);t+=i)n.push(t);return n}function d(e,t){return e.reduce((e,i,r)=>(e[i]=t[r],e),{})}},238577,(e,t,i)=>{"use strict";let r=e.r(835934),n=e.r(558704).uniqueId;t.exports={run:function(e){var t,i;let o,s,a;("greedy"===e.graph().acyclicer?r(e,(t=e,e=>t.edge(e).weight)):(o=[],s={},a={},(i=e).nodes().forEach(function e(t){Object.hasOwn(a,t)||(a[t]=!0,s[t]=!0,i.outEdges(t).forEach(t=>{Object.hasOwn(s,t.w)?o.push(t):e(t.w)}),delete s[t])}),o)).forEach(t=>{let i=e.edge(t);e.removeEdge(t),i.forwardName=t.name,i.reversed=!0,e.setEdge(t.w,t.v,i,n("rev"))})},undo:function(e){e.edges().forEach(t=>{let i=e.edge(t);if(i.reversed){e.removeEdge(t);let r=i.forwardName;delete i.reversed,delete i.forwardName,e.setEdge(t.w,t.v,i,r)}})}}},966771,(e,t,i)=>{"use strict";let r=e.r(558704);t.exports={run:function(e){e.graph().dummyChains=[],e.edges().forEach(t=>(function(e,t){let i,n,o,s=t.v,a=e.node(s).rank,l=t.w,u=e.node(l).rank,d=t.name,c=e.edge(t),h=c.labelRank;if(u!==a+1){for(e.removeEdge(t),o=0,++a;a<u;++o,++a)c.points=[],n={width:0,height:0,edgeLabel:c,edgeObj:t,rank:a},i=r.addDummyNode(e,"edge",n,"_d"),a===h&&(n.width=c.width,n.height=c.height,n.dummy="edge-label",n.labelpos=c.labelpos),e.setEdge(s,i,{weight:c.weight},d),0===o&&e.graph().dummyChains.push(i),s=i;e.setEdge(s,l,{weight:c.weight},d)}})(e,t))},undo:function(e){e.graph().dummyChains.forEach(t=>{let i,r=e.node(t),n=r.edgeLabel;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}}},879466,(e,t,i)=>{"use strict";let{applyWithChunking:r}=e.r(558704);t.exports={longestPath:function(e){var t={};e.sources().forEach(function i(n){var o=e.node(n);if(Object.hasOwn(t,n))return o.rank;t[n]=!0;var s=r(Math.min,e.outEdges(n).map(t=>null==t?1/0:i(t.w)-e.edge(t).minlen));return s===1/0&&(s=0),o.rank=s})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},300813,(e,t,i)=>{"use strict";var r=e.r(76321).Graph,n=e.r(879466).slack;t.exports=function(e){var t,i,o,s,a=new r({directed:!1}),l=e.nodes()[0],u=e.nodeCount();for(a.setNode(l,{});t=a,i=e,t.nodes().forEach(function e(r){i.nodeEdges(r).forEach(o=>{var s=o.v,a=r===s?o.w:s;t.hasNode(a)||n(i,o)||(t.setNode(a,{}),t.setEdge(r,a,{}),e(a))})}),t.nodeCount()<u;)o=function(e,t){return t.edges().reduce((i,r)=>{let o=1/0;return(e.hasNode(r.v)!==e.hasNode(r.w)&&(o=n(t,r)),o<i[0])?[o,r]:i},[1/0,null])[1]}(a,e),s=a.hasNode(o.v)?n(e,o):-n(e,o),function(e,t,i){e.nodes().forEach(e=>t.node(e).rank+=i)}(a,e,s);return a}},346101,(e,t,i)=>{"use strict";var r=e.r(300813),n=e.r(879466).slack,o=e.r(879466).longestPath,s=e.r(76321).alg.preorder,a=e.r(76321).alg.postorder,l=e.r(558704).simplify;function u(e){o(e=l(e));var t,i,n=r(e);for(h(n),d(n,e);t=p(n);)i=f(n,e,t),g(n,e,t,i)}function d(e,t){var i=a(e,e.nodes());(i=i.slice(0,i.length-1)).forEach(i=>{var r,n,o,s;return r=e,n=t,o=i,s=r.node(o).parent,void(r.edge(o,s).cutvalue=c(r,n,o))})}function c(e,t,i){var r=e.node(i).parent,n=!0,o=t.edge(i,r),s=0;return o||(n=!1,o=t.edge(r,i)),s=o.weight,t.nodeEdges(i).forEach(o=>{var a=o.v===i,l=a?o.w:o.v;if(l!==r){var u,d,c,h=a===n,p=t.edge(o).weight;if(s+=h?p:-p,u=e,d=i,c=l,u.hasEdge(d,c)){var f=e.edge(i,l).cutvalue;s+=h?-f:f}}}),s}function h(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,i,r,n,o){var s=r,a=t.node(n);return i[n]=!0,t.neighbors(n).forEach(o=>{Object.hasOwn(i,o)||(r=e(t,i,r,o,n))}),a.low=s,a.lim=r++,o?a.parent=o:delete a.parent,r}(e,{},1,t)}function p(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function f(e,t,i){var r=i.v,o=i.w;t.hasEdge(r,o)||(r=i.w,o=i.v);var s=e.node(r),a=e.node(o),l=s,u=!1;return s.lim>a.lim&&(l=a,u=!0),t.edges().filter(t=>u===m(e,e.node(t.v),l)&&u!==m(e,e.node(t.w),l)).reduce((e,i)=>n(t,i)<n(t,e)?i:e)}function g(e,t,i,r){var n,o,a,l,u=i.v,c=i.w;e.removeEdge(u,c),e.setEdge(r.v,r.w,{}),h(e),d(e,t),n=e,o=t,a=n.nodes().find(e=>!o.node(e).parent),(l=(l=s(n,a)).slice(1)).forEach(e=>{var t=n.node(e).parent,i=o.edge(e,t),r=!1;i||(i=o.edge(t,e),r=!0),o.node(e).rank=o.node(t).rank+(r?i.minlen:-i.minlen)})}function m(e,t,i){return i.low<=t.lim&&t.lim<=i.lim}t.exports=u,u.initLowLimValues=h,u.initCutValues=d,u.calcCutValue=c,u.leaveEdge=p,u.enterEdge=f,u.exchangeEdges=g},829221,(e,t,i)=>{"use strict";var r=e.r(879466).longestPath,n=e.r(300813),o=e.r(346101);t.exports=function(e){var t,i=e.graph().ranker;if(i instanceof Function)return i(e);switch(e.graph().ranker){case"network-simplex":default:o(e);break;case"tight-tree":r(t=e),n(t);break;case"longest-path":s(e);case"none":}};var s=r},544809,(e,t,i)=>{t.exports=function(e){var t;let i,r,n=(i={},r=0,(t=e).children().forEach(function e(n){let o=r;t.children(n).forEach(e),i[n]={low:o,lim:r++}}),i);e.graph().dummyChains.forEach(t=>{let i=e.node(t),r=i.edgeObj,o=function(e,t,i,r){let n,o,s=[],a=[],l=Math.min(t[i].low,t[r].low),u=Math.max(t[i].lim,t[r].lim);n=i;do s.push(n=e.parent(n));while(n&&(t[n].low>l||u>t[n].lim))for(o=n,n=r;(n=e.parent(n))!==o;)a.push(n);return{path:s.concat(a.reverse()),lca:o}}(e,n,r.v,r.w),s=o.path,a=o.lca,l=0,u=s[0],d=!0;for(;t!==r.w;){if(i=e.node(t),d){for(;(u=s[l])!==a&&e.node(u).maxRank<i.rank;)l++;u===a&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(u=s[l+1]).minRank<=i.rank;)l++;u=s[l]}e.setParent(t,u),t=e.successors(t)[0]}})}},111517,(e,t,i)=>{let r=e.r(558704);t.exports={run:function(e){var t,i,n;let o=r.addDummyNode(e,"root",{},"_root"),s=(i={},(t=e).children().forEach(e=>(function e(r,n){var o=t.children(r);o&&o.length&&o.forEach(t=>e(t,n+1)),i[r]=n})(e,1)),i),a=Object.values(s),l=r.applyWithChunking(Math.max,a)-1,u=2*l+1;e.graph().nestingRoot=o,e.edges().forEach(t=>e.edge(t).minlen*=u);let d=(n=e).edges().reduce((e,t)=>e+n.edge(t).weight,0)+1;e.children().forEach(t=>(function e(t,i,n,o,s,a,l){let u=t.children(l);if(!u.length){l!==i&&t.setEdge(i,l,{weight:0,minlen:n});return}let d=r.addBorderNode(t,"_bt"),c=r.addBorderNode(t,"_bb"),h=t.node(l);t.setParent(d,l),h.borderTop=d,t.setParent(c,l),h.borderBottom=c,u.forEach(r=>{e(t,i,n,o,s,a,r);let u=t.node(r),h=u.borderTop?u.borderTop:r,p=u.borderBottom?u.borderBottom:r,f=u.borderTop?o:2*o,g=h!==p?1:s-a[l]+1;t.setEdge(d,h,{weight:f,minlen:g,nestingEdge:!0}),t.setEdge(p,c,{weight:f,minlen:g,nestingEdge:!0})}),t.parent(l)||t.setEdge(i,d,{weight:0,minlen:s+a[l]})})(e,o,u,d,l,s,t)),e.graph().nodeRankFactor=u},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdge(t)})}}},234950,(e,t,i)=>{let r=e.r(558704);function n(e,t,i,n,o,s){let a=o[t][s-1],l=r.addDummyNode(e,"border",{width:0,height:0,rank:s,borderType:t},i);o[t][s]=l,e.setParent(l,n),a&&e.setEdge(a,l,{weight:1})}t.exports=function(e){e.children().forEach(function t(i){let r=e.children(i),o=e.node(i);if(r.length&&r.forEach(t),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let t=o.minRank,r=o.maxRank+1;t<r;++t)n(e,"borderLeft","_bl",i,o,t),n(e,"borderRight","_br",i,o,t)}})}},594453,(e,t,i)=>{"use strict";function r(e){e.nodes().forEach(t=>n(e.node(t))),e.edges().forEach(t=>n(e.edge(t)))}function n(e){let t=e.width;e.width=e.height,e.height=t}function o(e){e.y=-e.y}function s(e){let t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){let t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&r(e)},undo:function(e){var t,i;let n=e.graph().rankdir.toLowerCase();("bt"===n||"rl"===n)&&((t=e).nodes().forEach(e=>o(t.node(e))),t.edges().forEach(e=>{let i=t.edge(e);i.points.forEach(o),Object.hasOwn(i,"y")&&o(i)})),("lr"===n||"rl"===n)&&((i=e).nodes().forEach(e=>s(i.node(e))),i.edges().forEach(e=>{let t=i.edge(e);t.points.forEach(s),Object.hasOwn(t,"x")&&s(t)}),r(e))}}},934278,(e,t,i)=>{"use strict";let r=e.r(558704);t.exports=function(e){let t={},i=e.nodes().filter(t=>!e.children(t).length),n=i.map(t=>e.node(t).rank),o=r.applyWithChunking(Math.max,n),s=r.range(o+1).map(()=>[]);return i.sort((t,i)=>e.node(t).rank-e.node(i).rank).forEach(function i(r){t[r]||(t[r]=!0,s[e.node(r).rank].push(r),e.successors(r).forEach(i))}),s}},535208,(e,t,i)=>{"use strict";let r=e.r(558704).zipObject;t.exports=function(e,t){let i=0;for(let n=1;n<t.length;++n)i+=function(e,t,i){let n=r(i,i.map((e,t)=>t)),o=t.flatMap(t=>e.outEdges(t).map(t=>({pos:n[t.w],weight:e.edge(t).weight})).sort((e,t)=>e.pos-t.pos)),s=1;for(;s<i.length;)s<<=1;let a=2*s-1;s-=1;let l=Array(a).fill(0),u=0;return o.forEach(e=>{let t=e.pos+s;l[t]+=e.weight;let i=0;for(;t>0;)t%2&&(i+=l[t+1]),t=t-1>>1,l[t]+=e.weight;u+=e.weight*i}),u}(e,t[n-1],t[n]);return i}},125077,(e,t,i)=>{t.exports=function(e,t=[]){return t.map(t=>{let i=e.inEdges(t);if(!i.length)return{v:t};{let r=i.reduce((t,i)=>{let r=e.edge(i),n=e.node(i.v);return{sum:t.sum+r.weight*n.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}})}},107049,(e,t,i)=>{"use strict";let r=e.r(558704);t.exports=function(e,t){let i={};return e.forEach((e,t)=>{let r=i[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(r.barycenter=e.barycenter,r.weight=e.weight)}),t.edges().forEach(e=>{let t=i[e.v],r=i[e.w];void 0!==t&&void 0!==r&&(r.indegree++,t.out.push(i[e.w]))}),function(e){let t=[];for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(function(e){return t=>{!t.merged&&(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let i=0,r=0;e.weight&&(i+=e.barycenter*e.weight,r+=e.weight),t.weight&&(i+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=i/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(i)),i.out.forEach(function(t){return i=>{i.in.push(t),0==--i.indegree&&e.push(i)}}(i))}return t.filter(e=>!e.merged).map(e=>r.pick(e,["vs","i","barycenter","weight"]))}(Object.values(i).filter(e=>!e.indegree))}},803369,(e,t,i)=>{let r=e.r(558704);function n(e,t,i){let r;for(;t.length&&(r=t[t.length-1]).i<=i;)t.pop(),e.push(r.vs),i++;return i}t.exports=function(e,t){var i;let o=r.partition(e,e=>Object.hasOwn(e,"barycenter")),s=o.lhs,a=o.rhs.sort((e,t)=>t.i-e.i),l=[],u=0,d=0,c=0;s.sort((i=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:i?t.i-e.i:e.i-t.i)),c=n(l,a,c),s.forEach(e=>{c+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,d+=e.weight,c=n(l,a,c)});let h={vs:l.flat(!0)};return d&&(h.barycenter=u/d,h.weight=d),h}},738769,(e,t,i)=>{let r=e.r(125077),n=e.r(107049),o=e.r(803369);t.exports=function e(t,i,s,a){var l,u;let d=t.children(i),c=t.node(i),h=c?c.borderLeft:void 0,p=c?c.borderRight:void 0,f={};h&&(d=d.filter(e=>e!==h&&e!==p));let g=r(t,d);g.forEach(i=>{if(t.children(i.v).length){var r,n;let o=e(t,i.v,s,a);f[i.v]=o,Object.hasOwn(o,"barycenter")&&(r=i,n=o,void 0!==r.barycenter?(r.barycenter=(r.barycenter*r.weight+n.barycenter*n.weight)/(r.weight+n.weight),r.weight+=n.weight):(r.barycenter=n.barycenter,r.weight=n.weight))}});let m=n(g,s);l=m,u=f,l.forEach(e=>{e.vs=e.vs.flatMap(e=>u[e]?u[e].vs:e)});let v=o(m,a);if(h&&(v.vs=[h,v.vs,p].flat(!0),t.predecessors(h).length)){let e=t.node(t.predecessors(h)[0]),i=t.node(t.predecessors(p)[0]);Object.hasOwn(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+e.order+i.order)/(v.weight+2),v.weight+=2}return v}},340956,(e,t,i)=>{let r=e.r(76321).Graph,n=e.r(558704);t.exports=function(e,t,i,o){o||(o=e.nodes());let s=function(e){for(var t;e.hasNode(t=n.uniqueId("_root")););return t}(e),a=new r({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(t=>e.node(t));return o.forEach(r=>{let n=e.node(r),o=e.parent(r);(n.rank===t||n.minRank<=t&&t<=n.maxRank)&&(a.setNode(r),a.setParent(r,o||s),e[i](r).forEach(t=>{let i=t.v===r?t.w:t.v,n=a.edge(i,r),o=void 0!==n?n.weight:0;a.setEdge(i,r,{weight:e.edge(t).weight+o})}),Object.hasOwn(n,"minRank")&&a.setNode(r,{borderLeft:n.borderLeft[t],borderRight:n.borderRight[t]}))}),a}},436203,(e,t,i)=>{t.exports=function(e,t,i){let r={},n;i.forEach(i=>{let o=e.parent(i),s,a;for(;o;){if((s=e.parent(o))?(a=r[s],r[s]=o):(a=n,n=o),a&&a!==o)return void t.setEdge(a,o);o=s}})}},10571,(e,t,i)=>{"use strict";let r=e.r(934278),n=e.r(535208),o=e.r(738769),s=e.r(340956),a=e.r(436203),l=e.r(76321).Graph,u=e.r(558704);function d(e,t,i){let r=new Map,n=(e,t)=>{r.has(e)||r.set(e,[]),r.get(e).push(t)};for(let t of e.nodes()){let i=e.node(t);if("number"==typeof i.rank&&n(i.rank,t),"number"==typeof i.minRank&&"number"==typeof i.maxRank)for(let e=i.minRank;e<=i.maxRank;e++)e!==i.rank&&n(e,t)}return t.map(function(t){return s(e,t,i,r.get(t)||[])})}function c(e,t){Object.values(t).forEach(t=>t.forEach((t,i)=>e.node(t).order=i))}t.exports=function e(t,i){if(i&&"function"==typeof i.customOrder)return void i.customOrder(t,e);let s=u.maxRank(t),h=d(t,u.range(1,s+1),"inEdges"),p=d(t,u.range(s-1,-1,-1),"outEdges"),f=r(t);if(c(t,f),i&&i.disableOptimalOrderHeuristic)return;let g=1/0,m;for(let e=0,i=0;i<4;++e,++i){(function(e,t){let i=new l;e.forEach(function(e){let r=e.graph().root,n=o(e,r,i,t);n.vs.forEach((t,i)=>e.node(t).order=i),a(e,i,n.vs)})})(e%2?h:p,e%4>=2),f=u.buildLayerMatrix(t);let r=n(t,f);r<g&&(i=0,m=Object.assign({},f),g=r)}c(t,m)}},787670,(e,t,i)=>{"use strict";let r=e.r(76321).Graph,n=e.r(558704);function o(e,t){let i={};return t.length&&t.reduce(function(t,r){let n=0,o=0,s=t.length,l=r[r.length-1];return r.forEach((t,u)=>{let d=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find(t=>e.node(t).dummy)}(e,t),c=d?e.node(d).order:s;(d||t===l)&&(r.slice(o,u+1).forEach(t=>{e.predecessors(t).forEach(r=>{let o=e.node(r),s=o.order;(s<n||c<s)&&!(o.dummy&&e.node(t).dummy)&&a(i,r,t)})}),o=u+1,n=c)}),r}),i}function s(e,t){let i={};function r(t,r,o,s,l){let u;n.range(r,o).forEach(r=>{u=t[r],e.node(u).dummy&&e.predecessors(u).forEach(t=>{let r=e.node(t);r.dummy&&(r.order<s||r.order>l)&&a(i,t,u)})})}return t.length&&t.reduce(function(t,i){let n=-1,o,s=0;return i.forEach((a,l)=>{if("border"===e.node(a).dummy){let t=e.predecessors(a);t.length&&(o=e.node(t[0]).order,r(i,s,l,n,o),s=l,n=o)}r(i,s,i.length,o,t.length)}),i}),i}function a(e,t,i){if(t>i){let e=t;t=i,i=e}let r=e[t];r||(e[t]=r={}),r[i]=!0}function l(e,t,i){if(t>i){let e=t;t=i,i=e}return!!e[t]&&Object.hasOwn(e[t],i)}function u(e,t,i,r){let n={},o={},s={};return t.forEach(e=>{e.forEach((e,t)=>{n[e]=e,o[e]=e,s[e]=t})}),t.forEach(e=>{let t=-1;e.forEach(e=>{let a=r(e);if(a.length){let r=((a=a.sort((e,t)=>s[e]-s[t])).length-1)/2;for(let u=Math.floor(r),d=Math.ceil(r);u<=d;++u){let r=a[u];o[e]===e&&t<s[r]&&!l(i,e,r)&&(o[r]=e,o[e]=n[e]=n[r],t=s[r])}}})}),{root:n,align:o}}function d(e,t,i,n,o){var s,a,l,u,d,c,h;let p,f,g,m={},v=(s=e,a=t,l=i,u=o,p=new r,g=(d=(f=s.graph()).nodesep,c=f.edgesep,h=u,(e,t,i)=>{let r,n,o=e.node(t),s=e.node(i);if(r=0+o.width/2,Object.hasOwn(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":n=-o.width/2;break;case"r":n=o.width/2}if(n&&(r+=h?n:-n),n=0,r+=(o.dummy?c:d)/2,r+=(s.dummy?c:d)/2,r+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":n=s.width/2;break;case"r":n=-s.width/2}return n&&(r+=h?n:-n),n=0,r}),a.forEach(e=>{let t;e.forEach(e=>{let i=l[e];if(p.setNode(i),t){var r=l[t],n=p.edge(r,i);p.setEdge(r,i,Math.max(g(s,e,t),n||0))}t=e})}),p),y=o?"borderLeft":"borderRight";function b(e,t){let i=v.nodes(),r=i.pop(),n={};for(;r;)n[r]?e(r):(n[r]=!0,i.push(r),i=i.concat(t(r))),r=i.pop()}return b(function(e){m[e]=v.inEdges(e).reduce((e,t)=>Math.max(e,m[t.v]+v.edge(t)),0)},v.predecessors.bind(v)),b(function(t){let i=v.outEdges(t).reduce((e,t)=>Math.min(e,m[t.w]-v.edge(t)),1/0),r=e.node(t);i!==1/0&&r.borderType!==y&&(m[t]=Math.max(m[t],i))},v.successors.bind(v)),Object.keys(n).forEach(e=>m[e]=m[i[e]]),m}function c(e,t){return Object.values(t).reduce((t,i)=>{let r=-1/0,n=1/0;Object.entries(i).forEach(([t,i])=>{var o,s;let a=(o=e,s=t,o.node(s).width/2);r=Math.max(i+a,r),n=Math.min(i-a,n)});let o=r-n;return o<t[0]&&(t=[o,i]),t},[1/0,null])[1]}function h(e,t){let i=Object.values(t),r=n.applyWithChunking(Math.min,i),o=n.applyWithChunking(Math.max,i);["u","d"].forEach(i=>{["l","r"].forEach(s=>{let a=i+s,l=e[a];if(l===t)return;let u=Object.values(l),d=r-n.applyWithChunking(Math.min,u);"l"!==s&&(d=o-n.applyWithChunking(Math.max,u)),d&&(e[a]=n.mapValues(l,e=>e+d))})})}function p(e,t){return n.mapValues(e.ul,(i,r)=>{if(t)return e[t.toLowerCase()][r];{let t=Object.values(e).map(e=>e[r]).sort((e,t)=>e-t);return(t[1]+t[2])/2}})}t.exports={positionX:function(e){let t,i=n.buildLayerMatrix(e),r=Object.assign(o(e,i),s(e,i)),a={};["u","d"].forEach(o=>{t="u"===o?i:Object.values(i).reverse(),["l","r"].forEach(i=>{"r"===i&&(t=t.map(e=>Object.values(e).reverse()));let s=("u"===o?e.predecessors:e.successors).bind(e),l=u(e,t,r,s),c=d(e,t,l.root,l.align,"r"===i);"r"===i&&(c=n.mapValues(c,e=>-e)),a[o+i]=c})});let l=c(e,a);return h(a,l),p(a,e.graph().align)},findType1Conflicts:o,findType2Conflicts:s,addConflict:a,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:h,findSmallestWidthAlignment:c,balance:p}},245551,(e,t,i)=>{"use strict";let r=e.r(558704),n=e.r(787670).positionX;t.exports=function(e){var t;let i,o,s;t=e=r.asNonCompoundGraph(e),i=r.buildLayerMatrix(t),o=t.graph().ranksep,s=0,i.forEach(e=>{let i=e.reduce((e,i)=>{let r=t.node(i).height;return e>r?e:r},0);e.forEach(e=>t.node(e).y=s+i/2),s+=i+o}),Object.entries(n(e)).forEach(([t,i])=>e.node(t).x=i)}},964033,(e,t,i)=>{"use strict";let r=e.r(238577),n=e.r(966771),o=e.r(829221),s=e.r(558704).normalizeRanks,a=e.r(544809),l=e.r(558704).removeEmptyRanks,u=e.r(111517),d=e.r(234950),c=e.r(594453),h=e.r(10571),p=e.r(245551),f=e.r(558704),g=e.r(76321).Graph;t.exports=function(e,t){let i=t&&t.debugTiming?f.time:f.notime;i("layout",()=>{let E=i("  buildLayoutGraph",()=>{var t;let i,r;return t=e,i=new g({multigraph:!0,compound:!0}),r=R(t.graph()),i.setGraph(Object.assign({},v,k(r,m),f.pick(r,y))),t.nodes().forEach(e=>{let r=k(R(t.node(e)),b);Object.keys(w).forEach(e=>{void 0===r[e]&&(r[e]=w[e])}),i.setNode(e,r),i.setParent(e,t.parent(e))}),t.edges().forEach(e=>{let r=R(t.edge(e));i.setEdge(e,Object.assign({},x,k(r,C),f.pick(r,S)))}),i});i("  runLayout",()=>{var e,g,m;return e=E,g=i,m=t,void(g("    makeSpaceForEdgeLabels",()=>{var t;let i;return i=(t=e).graph(),void(i.ranksep/=2,t.edges().forEach(e=>{let r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===i.rankdir||"BT"===i.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}),g("    removeSelfEdges",()=>{var t;(t=e).edges().forEach(e=>{if(e.v===e.w){var i=t.node(e.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",()=>r.run(e)),g("    nestingGraph.run",()=>u.run(e)),g("    rank",()=>o(f.asNonCompoundGraph(e))),g("    injectEdgeLabelProxies",()=>{var t;(t=e).edges().forEach(e=>{let i=t.edge(e);if(i.width&&i.height){let i=t.node(e.v),r={rank:(t.node(e.w).rank-i.rank)/2+i.rank,e:e};f.addDummyNode(t,"edge-proxy",r,"_ep")}})}),g("    removeEmptyRanks",()=>l(e)),g("    nestingGraph.cleanup",()=>u.cleanup(e)),g("    normalizeRanks",()=>s(e)),g("    assignRankMinMax",()=>{var t;let i;return i=0,void((t=e).nodes().forEach(e=>{let r=t.node(e);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,i=Math.max(i,r.maxRank))}),t.graph().maxRank=i)}),g("    removeEdgeLabelProxies",()=>{var t;(t=e).nodes().forEach(e=>{let i=t.node(e);"edge-proxy"===i.dummy&&(t.edge(i.e).labelRank=i.rank,t.removeNode(e))})}),g("    normalize.run",()=>n.run(e)),g("    parentDummyChains",()=>a(e)),g("    addBorderSegments",()=>d(e)),g("    order",()=>h(e,m)),g("    insertSelfEdges",()=>{var t;return t=e,void f.buildLayerMatrix(t).forEach(e=>{var i=0;e.forEach((e,r)=>{var n=t.node(e);n.order=r+i,(n.selfEdges||[]).forEach(e=>{f.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:n.rank,order:r+ ++i,e:e.e,label:e.label},"_se")}),delete n.selfEdges})})}),g("    adjustCoordinateSystem",()=>c.adjust(e)),g("    position",()=>p(e)),g("    positionSelfEdges",()=>{var t;(t=e).nodes().forEach(e=>{var i=t.node(e);if("selfedge"===i.dummy){var r=t.node(i.e.v),n=r.x+r.width/2,o=r.y,s=i.x-n,a=r.height/2;t.setEdge(i.e,i.label),t.removeNode(e),i.label.points=[{x:n+2*s/3,y:o-a},{x:n+5*s/6,y:o-a},{x:n+s,y:o},{x:n+5*s/6,y:o+a},{x:n+2*s/3,y:o+a}],i.label.x=i.x,i.label.y=i.y}})}),g("    removeBorderNodes",()=>{var t;(t=e).nodes().forEach(e=>{if(t.children(e).length){let i=t.node(e),r=t.node(i.borderTop),n=t.node(i.borderBottom),o=t.node(i.borderLeft[i.borderLeft.length-1]),s=t.node(i.borderRight[i.borderRight.length-1]);i.width=Math.abs(s.x-o.x),i.height=Math.abs(n.y-r.y),i.x=o.x+i.width/2,i.y=r.y+i.height/2}}),t.nodes().forEach(e=>{"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",()=>n.undo(e)),g("    fixupEdgeLabelCoords",()=>{var t;(t=e).edges().forEach(e=>{let i=t.edge(e);if(Object.hasOwn(i,"x"))switch(("l"===i.labelpos||"r"===i.labelpos)&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset}})}),g("    undoCoordinateSystem",()=>c.undo(e)),g("    translateGraph",()=>(function(e){let t=1/0,i=0,r=1/0,n=0,o=e.graph(),s=o.marginx||0,a=o.marginy||0;function l(e){let o=e.x,s=e.y,a=e.width,l=e.height;t=Math.min(t,o-a/2),i=Math.max(i,o+a/2),r=Math.min(r,s-l/2),n=Math.max(n,s+l/2)}e.nodes().forEach(t=>l(e.node(t))),e.edges().forEach(t=>{let i=e.edge(t);Object.hasOwn(i,"x")&&l(i)}),t-=s,r-=a,e.nodes().forEach(i=>{let n=e.node(i);n.x-=t,n.y-=r}),e.edges().forEach(i=>{let n=e.edge(i);n.points.forEach(e=>{e.x-=t,e.y-=r}),Object.hasOwn(n,"x")&&(n.x-=t),Object.hasOwn(n,"y")&&(n.y-=r)}),o.width=i-t+s,o.height=n-r+a})(e)),g("    assignNodeIntersects",()=>{var t;(t=e).edges().forEach(e=>{let i,r,n=t.edge(e),o=t.node(e.v),s=t.node(e.w);n.points?(i=n.points[0],r=n.points[n.points.length-1]):(n.points=[],i=s,r=o),n.points.unshift(f.intersectRect(o,i)),n.points.push(f.intersectRect(s,r))})}),g("    reversePoints",()=>{var t;(t=e).edges().forEach(e=>{let i=t.edge(e);i.reversed&&i.points.reverse()})}),g("    acyclic.undo",()=>r.undo(e)))}),i("  updateInputGraph",()=>{var t,i;return t=e,i=E,void(t.nodes().forEach(e=>{let r=t.node(e),n=i.node(e);r&&(r.x=n.x,r.y=n.y,r.rank=n.rank,i.children(e).length&&(r.width=n.width,r.height=n.height))}),t.edges().forEach(e=>{let r=t.edge(e),n=i.edge(e);r.points=n.points,Object.hasOwn(n,"x")&&(r.x=n.x,r.y=n.y)}),t.graph().width=i.graph().width,t.graph().height=i.graph().height)})})};let m=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],b=["width","height","rank"],w={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],x={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function k(e,t){return f.mapValues(f.pick(e,t),Number)}function R(e){var t={};return e&&Object.entries(e).forEach(([e,i])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=i}),t}},950364,(e,t,i)=>{let r=e.r(558704),n=e.r(76321).Graph;t.exports={debugOrdering:function(e){let t=r.buildLayerMatrix(e),i=new n({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(t=>{i.setNode(t,{label:t}),i.setParent(t,"layer"+e.node(t).rank)}),e.edges().forEach(e=>i.setEdge(e.v,e.w,{},e.name)),t.forEach((e,t)=>{i.setNode("layer"+t,{rank:"same"}),e.reduce((e,t)=>(i.setEdge(e,t,{style:"invis"}),t))}),i}}},281624,(e,t,i)=>{t.exports="1.1.8"},35380,(e,t,i)=>{t.exports={graphlib:e.r(76321),layout:e.r(964033),debug:e.r(950364),util:{time:e.r(558704).time,notime:e.r(558704).notime},version:e.r(281624)}},292002,e=>{"use strict";e.i(316575);var t,i,r,n,o,s,a,l,u,d,c,h,p,f,g,m={value:()=>{}};function v(){for(var e,t=0,i=arguments.length,r={};t<i;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new y(r)}function y(e){this._=e}function b(e,t,i){for(var r=0,n=e.length;r<n;++r)if(e[r].name===t){e[r]=m,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=i&&e.push({name:t,value:i}),e}function w(){}function C(e){return null==e?w:function(){return this.querySelector(e)}}function x(){return[]}function S(e){return null==e?x:function(){return this.querySelectorAll(e)}}function k(e){return function(){return this.matches(e)}}function R(e){return function(t){return t.matches(e)}}y.prototype=v.prototype={constructor:y,on:function(e,t){var i,r=this._,n=(e+"").trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");if(i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((i=(e=n[o]).type)&&(i=function(e,t){for(var i,r=0,n=e.length;r<n;++r)if((i=e[r]).name===t)return i.value}(r[i],e.name)))return i;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<s;)if(i=(e=n[o]).type)r[i]=b(r[i],e.name,t);else if(null==t)for(i in r)r[i]=b(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new y(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var i,r,n=Array(i),o=0;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],n=0,o=r.length;n<o;++n)r[n].value.apply(t,i)}};var E=Array.prototype.find;function P(){return this.firstElementChild}var M=Array.prototype.filter;function D(){return Array.from(this.children)}function T(e){return Array(e.length)}function O(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function _(e,t,i,r,n,o){for(var s,a=0,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):i[a]=new O(e,o[a]);for(;a<l;++a)(s=t[a])&&(n[a]=s)}function A(e,t,i,r,n,o,s){var a,l,u,d=new Map,c=t.length,h=o.length,p=Array(c);for(a=0;a<c;++a)(l=t[a])&&(p[a]=u=s.call(l,l.__data__,a,t)+"",d.has(u)?n[a]=l:d.set(u,l));for(a=0;a<h;++a)u=s.call(e,o[a],a,o)+"",(l=d.get(u))?(r[a]=l,l.__data__=o[a],d.delete(u)):i[a]=new O(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&d.get(p[a])===l&&(n[a]=l)}function F(e){return e.__data__}function I(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}O.prototype={constructor:O,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var L="http://www.w3.org/1999/xhtml";let N={svg:"http://www.w3.org/2000/svg",xhtml:L,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(e){var t=e+="",i=t.indexOf(":");return i>=0&&"xmlns"!==(t=e.slice(0,i))&&(e=e.slice(i+1)),N.hasOwnProperty(t)?{space:N[t],local:e}:e}function V(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function H(e,t){return e.style.getPropertyValue(t)||V(e).getComputedStyle(e,null).getPropertyValue(t)}function z(e){return e.trim().split(/^|\s+/)}function j(e){return e.classList||new G(e)}function G(e){this._node=e,this._names=z(e.getAttribute("class")||"")}function W(e,t){for(var i=j(e),r=-1,n=t.length;++r<n;)i.add(t[r])}function U(e,t){for(var i=j(e),r=-1,n=t.length;++r<n;)i.remove(t[r])}function $(){this.textContent=""}function q(){this.innerHTML=""}function K(){this.nextSibling&&this.parentNode.appendChild(this)}function Q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X(e){var t=B(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===L&&t.documentElement.namespaceURI===L?t.createElement(e):t.createElementNS(i,e)}})(t)}function Y(){return null}function Z(){var e=this.parentNode;e&&e.removeChild(this)}function J(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ee(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function et(e){return function(){var t=this.__on;if(t){for(var i,r=0,n=-1,o=t.length;r<o;++r)(i=t[r],e.type&&i.type!==e.type||i.name!==e.name)?t[++n]=i:this.removeEventListener(i.type,i.listener,i.options);++n?t.length=n:delete this.__on}}}function ei(e,t,i){return function(){var r,n=this.__on,o=function(e){t.call(this,e,this.__data__)};if(n){for(var s=0,a=n.length;s<a;++s)if((r=n[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=i),r.value=t;return}}this.addEventListener(e.type,o,i),r={type:e.type,name:e.name,value:t,listener:o,options:i},n?n.push(r):this.__on=[r]}}function er(e,t,i){var r=V(e),n=r.CustomEvent;"function"==typeof n?n=new n(t,i):(n=r.document.createEvent("Event"),i?(n.initEvent(t,i.bubbles,i.cancelable),n.detail=i.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}G.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var en=[null];function eo(e,t){this._groups=e,this._parents=t}function es(){return new eo([[document.documentElement]],en)}function ea(e){return"string"==typeof e?new eo([[document.querySelector(e)]],[document.documentElement]):new eo([[e]],en)}function el(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}}return[e.pageX,e.pageY]}eo.prototype=es.prototype={constructor:eo,select:function(e){"function"!=typeof e&&(e=C(e));for(var t=this._groups,i=t.length,r=Array(i),n=0;n<i;++n)for(var o,s,a=t[n],l=a.length,u=r[n]=Array(l),d=0;d<l;++d)(o=a[d])&&(s=e.call(o,o.__data__,d,a))&&("__data__"in o&&(s.__data__=o.__data__),u[d]=s);return new eo(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=S(e);for(var i=this._groups,r=i.length,n=[],o=[],s=0;s<r;++s)for(var a,l=i[s],u=l.length,d=0;d<u;++d)(a=l[d])&&(n.push(e.call(a,a.__data__,d,l)),o.push(a));return new eo(n,o)},selectChild:function(e){var t;return this.select(null==e?P:(t="function"==typeof e?e:R(e),function(){return E.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?D:(t="function"==typeof e?e:R(e),function(){return M.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,i=t.length,r=Array(i),n=0;n<i;++n)for(var o,s=t[n],a=s.length,l=r[n]=[],u=0;u<a;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&l.push(o);return new eo(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,F);var i=t?A:_,r=this._parents,n=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var o=n.length,s=Array(o),a=Array(o),l=Array(o),u=0;u<o;++u){var d=r[u],c=n[u],h=c.length,p="object"==typeof(v=e.call(d,d&&d.__data__,u,r))&&"length"in v?v:Array.from(v),f=p.length,g=a[u]=Array(f),m=s[u]=Array(f);i(d,c,g,m,l[u]=Array(h),p,t);for(var v,y,b,w,C=0,x=0;C<f;++C)if(b=g[C]){for(C>=x&&(x=C+1);!(w=m[x])&&++x<f;);b._next=w||null}}return(s=new eo(s,r))._enter=a,s._exit=l,s},enter:function(){return new eo(this._enter||this._groups.map(T),this._parents)},exit:function(){return new eo(this._exit||this._groups.map(T),this._parents)},join:function(e,t,i){var r=this.enter(),n=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(n=t(n))&&(n=n.selection()),null==i?o.remove():i(o),r&&n?r.merge(n).order():n},merge:function(e){for(var t=e.selection?e.selection():e,i=this._groups,r=t._groups,n=i.length,o=r.length,s=Math.min(n,o),a=Array(n),l=0;l<s;++l)for(var u,d=i[l],c=r[l],h=d.length,p=a[l]=Array(h),f=0;f<h;++f)(u=d[f]||c[f])&&(p[f]=u);for(;l<n;++l)a[l]=i[l];return new eo(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r,n=e[t],o=n.length-1,s=n[o];--o>=0;)(r=n[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,i){return t&&i?e(t.__data__,i.__data__):!t-!i}e||(e=I);for(var i=this._groups,r=i.length,n=Array(r),o=0;o<r;++o){for(var s,a=i[o],l=a.length,u=n[o]=Array(l),d=0;d<l;++d)(s=a[d])&&(u[d]=s);u.sort(t)}return new eo(n,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],n=0,o=r.length;n<o;++n){var s=r[n];if(s)return s}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var n,o=t[i],s=0,a=o.length;s<a;++s)(n=o[s])&&e.call(n,n.__data__,s,o);return this},attr:function(e,t){var i=B(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((null==t?i.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?i.local?function(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}:function(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttribute(e):this.setAttribute(e,i)}}:i.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(i,t))},style:function(e,t,i){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,i){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}:function(e,t,i){return function(){this.style.setProperty(e,t,i)}})(e,t,null==i?"":i)):H(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var i=t.apply(this,arguments);null==i?delete this[e]:this[e]=i}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var i=z(e+"");if(arguments.length<2){for(var r=j(this.node()),n=-1,o=i.length;++n<o;)if(!r.contains(i[n]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?W:U)(this,e)}}:t?function(e){return function(){W(this,e)}}:function(e){return function(){U(this,e)}})(i,t))},text:function(e){return arguments.length?this.each(null==e?$:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?q:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(K)},lower:function(){return this.each(Q)},append:function(e){var t="function"==typeof e?e:X(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var i="function"==typeof e?e:X(e),r=null==t?Y:"function"==typeof t?t:C(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Z)},clone:function(e){return this.select(e?ee:J)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,i){var r,n,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}}),s=o.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var l,u=0,d=a.length;u<d;++u)for(r=0,l=a[u];r<s;++r)if((n=o[r]).type===l.type&&n.name===l.name)return l.value}return}for(r=0,a=t?ei:et;r<s;++r)this.each(a(o[r],t,i));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return er(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return er(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r,n=e[t],o=0,s=n.length;o<s;++o)(r=n[o])&&(yield r)}};let eu={passive:!1},ed={capture:!0,passive:!1};function ec(e){e.stopImmediatePropagation()}function eh(e){e.preventDefault(),e.stopImmediatePropagation()}function ep(e){var t=e.document.documentElement,i=ea(e).on("dragstart.drag",eh,ed);"onselectstart"in t?i.on("selectstart.drag",eh,ed):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ef(e,t){var i=e.document.documentElement,r=ea(e).on("dragstart.drag",null);t&&(r.on("click.drag",eh,ed),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in i?r.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}let eg=e=>()=>e;function em(e,{sourceEvent:t,subject:i,target:r,identifier:n,active:o,x:s,y:a,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:n,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function ev(e){return!e.ctrlKey&&!e.button}function ey(){return this.parentNode}function eb(e,t){return null==t?{x:e.x,y:e.y}:t}function ew(){return navigator.maxTouchPoints||"ontouchstart"in this}function eC(){var e,t,i,r,n=ev,o=ey,s=eb,a=ew,l={},u=v("start","drag","end"),d=0,c=0;function h(e){e.on("mousedown.drag",p).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,eu).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,a){if(!r&&n.call(this,s,a)){var l=w(this,o.call(this,s,a),s,a,"mouse");l&&(ea(s.view).on("mousemove.drag",f,ed).on("mouseup.drag",g,ed),ep(s.view),ec(s),i=!1,e=s.clientX,t=s.clientY,l("start",s))}}function f(r){if(eh(r),!i){var n=r.clientX-e,o=r.clientY-t;i=n*n+o*o>c}l.mouse("drag",r)}function g(e){ea(e.view).on("mousemove.drag mouseup.drag",null),ef(e.view,i),eh(e),l.mouse("end",e)}function m(e,t){if(n.call(this,e,t)){var i,r,s=e.changedTouches,a=o.call(this,e,t),l=s.length;for(i=0;i<l;++i)(r=w(this,a,e,t,s[i].identifier,s[i]))&&(ec(e),r("start",e,s[i]))}}function y(e){var t,i,r=e.changedTouches,n=r.length;for(t=0;t<n;++t)(i=l[r[t].identifier])&&(eh(e),i("drag",e,r[t]))}function b(e){var t,i,n=e.changedTouches,o=n.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(i=l[n[t].identifier])&&(ec(e),i("end",e,n[t]))}function w(e,t,i,r,n,o){var a,c,p,f=u.copy(),g=el(o||i,t);if(null!=(p=s.call(e,new em("beforestart",{sourceEvent:i,target:h,identifier:n,active:d,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),r)))return a=p.x-g[0]||0,c=p.y-g[1]||0,function i(o,s,u){var m,v=g;switch(o){case"start":l[n]=i,m=d++;break;case"end":delete l[n],--d;case"drag":g=el(u||s,t),m=d}f.call(o,e,new em(o,{sourceEvent:s,subject:p,target:h,identifier:n,active:m,x:g[0]+a,y:g[1]+c,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:f}),r)}}return h.filter=function(e){return arguments.length?(n="function"==typeof e?e:eg(!!e),h):n},h.container=function(e){return arguments.length?(o="function"==typeof e?e:eg(e),h):o},h.subject=function(e){return arguments.length?(s="function"==typeof e?e:eg(e),h):s},h.touchable=function(e){return arguments.length?(a="function"==typeof e?e:eg(!!e),h):a},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(c=(e*=1)*e,h):Math.sqrt(c)},h}function ex(e){return((e=Math.exp(e))+1/e)/2}em.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let eS=function e(t,i,r){function n(e,n){var o,s,a=e[0],l=e[1],u=e[2],d=n[0],c=n[1],h=n[2],p=d-a,f=c-l,g=p*p+f*f;if(g<1e-12)s=Math.log(h/u)/t,o=function(e){return[a+e*p,l+e*f,u*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),v=(h*h-u*u+r*g)/(2*u*i*m),y=(h*h-u*u-r*g)/(2*h*i*m),b=Math.log(Math.sqrt(v*v+1)-v);s=(Math.log(Math.sqrt(y*y+1)-y)-b)/t,o=function(e){var r,n,o=e*s,d=ex(b),c=u/(i*m)*(d*(((r=Math.exp(2*(r=t*o+b)))-1)/(r+1))-((n=Math.exp(n=b))-1/n)/2);return[a+c*p,l+c*f,u*d/ex(t*o+b)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return n.rho=function(t){var i=Math.max(.001,+t),r=i*i;return e(i,r,r*r)},n}(Math.SQRT2,2,4);var ek,eR,eE=0,eP=0,eM=0,eD=0,eT=0,eO=0,e_="object"==typeof performance&&performance.now?performance:Date,eA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eF(){return eT||(eA(eI),eT=e_.now()+eO)}function eI(){eT=0}function eL(){this._call=this._time=this._next=null}function eN(e,t,i){var r=new eL;return r.restart(e,t,i),r}function eB(){eT=(eD=e_.now())+eO,eE=eP=0;try{eF(),++eE;for(var e,t=ek;t;)(e=eT-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eE}finally{eE=0,function(){for(var e,t,i=ek,r=1/0;i;)i._call?(r>i._time&&(r=i._time),e=i,i=i._next):(t=i._next,i._next=null,i=e?e._next=t:ek=t);eR=e,eH(r)}(),eT=0}}function eV(){var e=e_.now(),t=e-eD;t>1e3&&(eO-=t,eD=e)}function eH(e){!eE&&(eP&&(eP=clearTimeout(eP)),e-eT>24?(e<1/0&&(eP=setTimeout(eB,e-e_.now()-eO)),eM&&(eM=clearInterval(eM))):(eM||(eD=e_.now(),eM=setInterval(eV,1e3)),eE=1,eA(eB)))}function ez(e,t,i){var r=new eL;return t=null==t?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,i),r}eL.prototype=eN.prototype={constructor:eL,restart:function(e,t,i){if("function"!=typeof e)throw TypeError("callback is not a function");i=(null==i?eF():+i)+(null==t?0:+t),this._next||eR===this||(eR?eR._next=this:ek=this,eR=this),this._call=e,this._time=i,eH()},stop:function(){this._call&&(this._call=null,this._time=1/0,eH())}};var ej=v("start","end","cancel","interrupt"),eG=[];function eW(e,t,i,r,n,o){var s=e.__transition;if(s){if(i in s)return}else e.__transition={};!function(e,t,i){var r,n=e.__transition;function o(l){var u,d,c,h;if(1!==i.state)return a();for(u in n)if((h=n[u]).name===i.name){if(3===h.state)return ez(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[u])}if(ez(function(){3===i.state&&(i.state=4,i.timer.restart(s,i.delay,i.time),s(l))}),i.state=2,i.on.call("start",e,e.__data__,i.index,i.group),2===i.state){for(u=0,i.state=3,r=Array(c=i.tween.length),d=-1;u<c;++u)(h=i.tween[u].value.call(e,e.__data__,i.index,i.group))&&(r[++d]=h);r.length=d+1}}function s(t){for(var n=t<i.duration?i.ease.call(null,t/i.duration):(i.timer.restart(a),i.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,n);5===i.state&&(i.on.call("end",e,e.__data__,i.index,i.group),a())}function a(){for(var r in i.state=6,i.timer.stop(),delete n[t],n)return;delete e.__transition}n[t]=i,i.timer=eN(function(e){i.state=1,i.timer.restart(o,i.delay,i.time),i.delay<=e&&o(e-i.delay)},0,i.time)}(e,i,{name:t,index:r,group:n,on:ej,tween:eG,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function eU(e,t){var i=eq(e,t);if(i.state>0)throw Error("too late; already scheduled");return i}function e$(e,t){var i=eq(e,t);if(i.state>3)throw Error("too late; already running");return i}function eq(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw Error("transition not found");return i}function eK(e,t){var i,r,n,o=e.__transition,s=!0;if(o){for(n in t=null==t?null:t+"",o){if((i=o[n]).name!==t){s=!1;continue}r=i.state>2&&i.state<5,i.state=6,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete o[n]}s&&delete e.__transition}}function eQ(e,t){return e*=1,t*=1,function(i){return e*(1-i)+t*i}}var eX=180/Math.PI,eY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eZ(e,t,i,r,n,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*i+t*r)&&(i-=e*l,r-=t*l),(a=Math.sqrt(i*i+r*r))&&(i/=a,r/=a,l/=a),e*r<t*i&&(e=-e,t=-t,l=-l,s=-s),{translateX:n,translateY:o,rotate:Math.atan2(t,e)*eX,skewX:Math.atan(l)*eX,scaleX:s,scaleY:a}}function eJ(e,t,i,r){function n(e){return e.length?e.pop()+" ":""}return function(o,s){var a,l,u,d,c=[],h=[];return o=e(o),s=e(s),!function(e,r,n,o,s,a){if(e!==n||r!==o){var l=s.push("translate(",null,t,null,i);a.push({i:l-4,x:eQ(e,n)},{i:l-2,x:eQ(r,o)})}else(n||o)&&s.push("translate("+n+t+o+i)}(o.translateX,o.translateY,s.translateX,s.translateY,c,h),a=o.rotate,l=s.rotate,a!==l?(a-l>180?l+=360:l-a>180&&(a+=360),h.push({i:c.push(n(c)+"rotate(",null,r)-2,x:eQ(a,l)})):l&&c.push(n(c)+"rotate("+l+r),u=o.skewX,d=s.skewX,u!==d?h.push({i:c.push(n(c)+"skewX(",null,r)-2,x:eQ(u,d)}):d&&c.push(n(c)+"skewX("+d+r),!function(e,t,i,r,o,s){if(e!==i||t!==r){var a=o.push(n(o)+"scale(",null,",",null,")");s.push({i:a-4,x:eQ(e,i)},{i:a-2,x:eQ(t,r)})}else(1!==i||1!==r)&&o.push(n(o)+"scale("+i+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,c,h),o=s=null,function(e){for(var t,i=-1,r=h.length;++i<r;)c[(t=h[i]).i]=t.x(e);return c.join("")}}}var e0=eJ(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eY:eZ(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e1=eJ(function(e){return null==e?eY:(l||(l=document.createElementNS("http://www.w3.org/2000/svg","g")),l.setAttribute("transform",e),e=l.transform.baseVal.consolidate())?eZ((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eY},", ",")",")");function e2(e,t,i){var r=e._id;return e.each(function(){var e=e$(this,r);(e.value||(e.value={}))[t]=i.apply(this,arguments)}),function(e){return eq(e,r).value[t]}}function e5(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function e3(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function e4(){}var e8="\\s*([+-]?\\d+)\\s*",e6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e9=/^#([0-9a-f]{3,8})$/,te=RegExp(`^rgb\\(${e8},${e8},${e8}\\)$`),tt=RegExp(`^rgb\\(${e7},${e7},${e7}\\)$`),ti=RegExp(`^rgba\\(${e8},${e8},${e8},${e6}\\)$`),tr=RegExp(`^rgba\\(${e7},${e7},${e7},${e6}\\)$`),tn=RegExp(`^hsl\\(${e6},${e7},${e7}\\)$`),to=RegExp(`^hsla\\(${e6},${e7},${e7},${e6}\\)$`),ts={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function ta(){return this.rgb().formatHex()}function tl(){return this.rgb().formatRgb()}function tu(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=e9.exec(e))?(i=t[1].length,t=parseInt(t[1],16),6===i?td(t):3===i?new tp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===i?tc(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===i?tc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=te.exec(e))?new tp(t[1],t[2],t[3],1):(t=tt.exec(e))?new tp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ti.exec(e))?tc(t[1],t[2],t[3],t[4]):(t=tr.exec(e))?tc(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=tn.exec(e))?tb(t[1],t[2]/100,t[3]/100,1):(t=to.exec(e))?tb(t[1],t[2]/100,t[3]/100,t[4]):ts.hasOwnProperty(e)?td(ts[e]):"transparent"===e?new tp(NaN,NaN,NaN,0):null}function td(e){return new tp(e>>16&255,e>>8&255,255&e,1)}function tc(e,t,i,r){return r<=0&&(e=t=i=NaN),new tp(e,t,i,r)}function th(e,t,i,r){var n;return 1==arguments.length?((n=e)instanceof e4||(n=tu(n)),n)?new tp((n=n.rgb()).r,n.g,n.b,n.opacity):new tp:new tp(e,t,i,null==r?1:r)}function tp(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}function tf(){return`#${ty(this.r)}${ty(this.g)}${ty(this.b)}`}function tg(){let e=tm(this.opacity);return`${1===e?"rgb(":"rgba("}${tv(this.r)}, ${tv(this.g)}, ${tv(this.b)}${1===e?")":`, ${e})`}`}function tm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ty(e){return((e=tv(e))<16?"0":"")+e.toString(16)}function tb(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new tC(e,t,i,r)}function tw(e){if(e instanceof tC)return new tC(e.h,e.s,e.l,e.opacity);if(e instanceof e4||(e=tu(e)),!e)return new tC;if(e instanceof tC)return e;var t=(e=e.rgb()).r/255,i=e.g/255,r=e.b/255,n=Math.min(t,i,r),o=Math.max(t,i,r),s=NaN,a=o-n,l=(o+n)/2;return a?(s=t===o?(i-r)/a+(i<r)*6:i===o?(r-t)/a+2:(t-i)/a+4,a/=l<.5?o+n:2-o-n,s*=60):a=l>0&&l<1?0:s,new tC(s,a,l,e.opacity)}function tC(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}function tx(e){return(e=(e||0)%360)<0?e+360:e}function tS(e){return Math.max(0,Math.min(1,e||0))}function tk(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}function tR(e,t,i,r,n){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*i+(1+3*e+3*o-3*s)*r+s*n)/6}e5(e4,tu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ta,formatHex:ta,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tw(this).formatHsl()},formatRgb:tl,toString:tl}),e5(tp,th,e3(e4,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tp(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tp(tv(this.r),tv(this.g),tv(this.b),tm(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tf,formatHex:tf,formatHex8:function(){return`#${ty(this.r)}${ty(this.g)}${ty(this.b)}${ty((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:tg,toString:tg})),e5(tC,function(e,t,i,r){return 1==arguments.length?tw(e):new tC(e,t,i,null==r?1:r)},e3(e4,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tC(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tC(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,n=2*i-r;return new tp(tk(e>=240?e-240:e+120,n,r),tk(e,n,r),tk(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new tC(tx(this.h),tS(this.s),tS(this.l),tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=tm(this.opacity);return`${1===e?"hsl(":"hsla("}${tx(this.h)}, ${100*tS(this.s)}%, ${100*tS(this.l)}%${1===e?")":`, ${e})`}`}}));let tE=e=>()=>e;function tP(e,t){var i=t-e;return i?function(t){return e+t*i}:tE(isNaN(e)?t:e)}let tM=function e(t){var i,r=1==(i=+t)?tP:function(e,t){var r,n,o;return t-e?(r=e,n=t,r=Math.pow(r,o=i),n=Math.pow(n,o)-r,o=1/o,function(e){return Math.pow(r+e*n,o)}):tE(isNaN(e)?t:e)};function n(e,t){var i=r((e=th(e)).r,(t=th(t)).r),n=r(e.g,t.g),o=r(e.b,t.b),s=tP(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=n(t),e.b=o(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function tD(e){return function(t){var i,r,n=t.length,o=Array(n),s=Array(n),a=Array(n);for(i=0;i<n;++i)r=th(t[i]),o[i]=r.r||0,s[i]=r.g||0,a[i]=r.b||0;return o=e(o),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=a(e),r+""}}}tD(function(e){var t=e.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),n=e[r],o=e[r+1],s=r>0?e[r-1]:2*n-o,a=r<t-1?e[r+2]:2*o-n;return tR((i-r/t)*t,s,n,o,a)}}),tD(function(e){var t=e.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*t),n=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return tR((i-r/t)*t,n,o,s,a)}});var tT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tO=RegExp(tT.source,"g");function t_(e,t){var i,r,n,o,s,a=tT.lastIndex=tO.lastIndex=0,l=-1,u=[],d=[];for(e+="",t+="";(n=tT.exec(e))&&(o=tO.exec(t));)(s=o.index)>a&&(s=t.slice(a,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,d.push({i:l,x:eQ(n,o)})),a=tO.lastIndex;return a<t.length&&(s=t.slice(a),u[l]?u[l]+=s:u[++l]=s),u.length<2?d[0]?(i=d[0].x,function(e){return i(e)+""}):(r=t,function(){return r}):(t=d.length,function(e){for(var i,r=0;r<t;++r)u[(i=d[r]).i]=i.x(e);return u.join("")})}function tA(e,t){var i;return("number"==typeof t?eQ:t instanceof tu?tM:(i=tu(t))?(t=i,tM):t_)(e,t)}var tF=es.prototype.constructor;function tI(e){return function(){this.style.removeProperty(e)}}var tL=0;function tN(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}var tB=es.prototype;tN.prototype=(function(e){return es().transition(e)}).prototype={constructor:tN,select:function(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=C(e));for(var r=this._groups,n=r.length,o=Array(n),s=0;s<n;++s)for(var a,l,u=r[s],d=u.length,c=o[s]=Array(d),h=0;h<d;++h)(a=u[h])&&(l=e.call(a,a.__data__,h,u))&&("__data__"in a&&(l.__data__=a.__data__),c[h]=l,eW(c[h],t,i,h,c,eq(a,i)));return new tN(o,this._parents,t,i)},selectAll:function(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=S(e));for(var r=this._groups,n=r.length,o=[],s=[],a=0;a<n;++a)for(var l,u=r[a],d=u.length,c=0;c<d;++c)if(l=u[c]){for(var h,p=e.call(l,l.__data__,c,u),f=eq(l,i),g=0,m=p.length;g<m;++g)(h=p[g])&&eW(h,t,i,g,p,f);o.push(p),s.push(l)}return new tN(o,s,t,i)},selectChild:tB.selectChild,selectChildren:tB.selectChildren,filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,i=t.length,r=Array(i),n=0;n<i;++n)for(var o,s=t[n],a=s.length,l=r[n]=[],u=0;u<a;++u)(o=s[u])&&e.call(o,o.__data__,u,s)&&l.push(o);return new tN(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,i=e._groups,r=t.length,n=i.length,o=Math.min(r,n),s=Array(r),a=0;a<o;++a)for(var l,u=t[a],d=i[a],c=u.length,h=s[a]=Array(c),p=0;p<c;++p)(l=u[p]||d[p])&&(h[p]=l);for(;a<r;++a)s[a]=t[a];return new tN(s,this._parents,this._name,this._id)},selection:function(){return new tF(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,i=++tL,r=this._groups,n=r.length,o=0;o<n;++o)for(var s,a=r[o],l=a.length,u=0;u<l;++u)if(s=a[u]){var d=eq(s,t);eW(s,e,i,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new tN(r,this._parents,e,i)},call:tB.call,nodes:tB.nodes,node:tB.node,size:tB.size,empty:tB.empty,each:tB.each,on:function(e,t){var i,r,n,o,s,a,l=this._id;return arguments.length<2?eq(this.node(),l).on.on(e):this.each((i=l,r=e,n=t,a=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eU:e$,function(){var e=a(this,i),t=e.on;t!==o&&(s=(o=t).copy()).on(r,n),e.on=s}))},attr:function(e,t){var i=B(e),r="transform"===i?e1:tA;return this.attrTween(e,"function"==typeof t?(i.local?function(e,t,i){var r,n,o;return function(){var s,a,l=i(this);return null==l?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===n?o:(n=a,o=t(r=s,l))}}:function(e,t,i){var r,n,o;return function(){var s,a,l=i(this);return null==l?void this.removeAttribute(e):(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===n?o:(n=a,o=t(r=s,l))}})(i,r,e2(this,"attr."+e,t)):null==t?(i.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(i):(i.local?function(e,t,i){var r,n,o=i+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?n:n=t(r=s,i)}}:function(e,t,i){var r,n,o=i+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?n:n=t(r=s,i)}})(i,r,t))},attrTween:function(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw Error();var r=B(e);return this.tween(i,(r.local?function(e,t){var i,r;function n(){var n=t.apply(this,arguments);return n!==r&&(i=(r=n)&&function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}),i}return n._value=t,n}:function(e,t){var i,r;function n(){var n=t.apply(this,arguments);return n!==r&&(i=(r=n)&&function(t){this.setAttribute(e,n.call(this,t))}),i}return n._value=t,n})(r,t))},style:function(e,t,i){var r,n,o,s,a,l,u,d,c,h,p,f,g,m,v,y,b,w,C,x,S,k="transform"==(e+="")?e0:tA;return null==t?this.styleTween(e,(r=e,function(){var e=H(this,r),t=(this.style.removeProperty(r),H(this,r));return e===t?null:e===n&&t===o?s:s=k(n=e,o=t)})).on("end.style."+e,tI(e)):"function"==typeof t?this.styleTween(e,(a=e,l=e2(this,"style."+e,t),function(){var e=H(this,a),t=l(this),i=t+"";return null==t&&(this.style.removeProperty(a),i=t=H(this,a)),e===i?null:e===u&&i===d?c:(d=i,c=k(u=e,t))})).each((h=this._id,b="end."+(y="style."+(p=e)),function(){var e=e$(this,h),t=e.on,i=null==e.value[y]?v||(v=tI(p)):void 0;(t!==f||m!==i)&&(g=(f=t).copy()).on(b,m=i),e.on=g})):this.styleTween(e,(w=e,S=t+"",function(){var e=H(this,w);return e===S?null:e===C?x:x=k(C=e,t)}),i).on("end.style."+e,null)},styleTween:function(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,i){var r,n;function o(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&function(t){this.style.setProperty(e,o.call(this,t),i)}),r}return o._value=t,o}(e,t,null==i?"":i))},text:function(e){var t,i;return this.tween("text","function"==typeof e?(t=e2(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(i=null==e?"":e+"",function(){this.textContent=i}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,i;function r(){var r=e.apply(this,arguments);return r!==i&&(t=(i=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r,n=eq(this.node(),i).tween,o=0,s=n.length;o<s;++o)if((r=n[o]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var i,r;return function(){var n=e$(this,e),o=n.tween;if(o!==i){r=i=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}}n.tween=r}}:function(e,t,i){var r,n;if("function"!=typeof i)throw Error();return function(){var o=e$(this,e),s=o.tween;if(s!==r){n=(r=s).slice();for(var a={name:t,value:i},l=0,u=n.length;l<u;++l)if(n[l].name===t){n[l]=a;break}l===u&&n.push(a)}o.tween=n}})(i,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eU(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eU(this,e).delay=t}})(t,e)):eq(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){e$(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){e$(this,e).duration=t}})(t,e)):eq(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){e$(this,e).ease=t}}(t,e)):eq(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var i=e.apply(this,arguments);if("function"!=typeof i)throw Error();e$(this,t).ease=i}))},end:function(){var e,t,i=this,r=i._id,n=i.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0==--n&&o()}};i.each(function(){var i=e$(this,r),n=i.on;n!==e&&((t=(e=n).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),i.on=t}),0===n&&o()})},[Symbol.iterator]:tB[Symbol.iterator]};var tV={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};es.prototype.interrupt=function(e){return this.each(function(){eK(this,e)})},es.prototype.transition=function(e){var t,i;e instanceof tN?(t=e._id,e=e._name):(t=++tL,(i=tV).time=eF(),e=null==e?null:e+"");for(var r=this._groups,n=r.length,o=0;o<n;++o)for(var s,a=r[o],l=a.length,u=0;u<l;++u)(s=a[u])&&eW(s,e,t,u,a,i||function(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return i}(s,t));return new tN(r,this._parents,e,t)};let tH=e=>()=>e;function tz(e,{sourceEvent:t,target:i,transform:r,dispatch:n}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:n}})}function tj(e,t,i){this.k=e,this.x=t,this.y=i}tj.prototype={constructor:tj,scale:function(e){return 1===e?this:new tj(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tj(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tG=new tj(1,0,0);function tW(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tG;return e.__zoom}function tU(e){e.stopImmediatePropagation()}function t$(e){e.preventDefault(),e.stopImmediatePropagation()}function tq(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tK(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tQ(){return this.__zoom||tG}function tX(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tY(){return navigator.maxTouchPoints||"ontouchstart"in this}function tZ(e,t,i){var r=e.invertX(t[0][0])-i[0][0],n=e.invertX(t[1][0])-i[1][0],o=e.invertY(t[0][1])-i[0][1],s=e.invertY(t[1][1])-i[1][1];return e.translate(n>r?(r+n)/2:Math.min(0,r)||Math.max(0,n),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function tJ(){var e,t,i,r=tq,n=tK,o=tZ,s=tX,a=tY,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,c=eS,h=v("start","zoom","end"),p=0,f=10;function g(e){e.property("__zoom",tQ).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tj(t,e.x,e.y)}function y(e,t,i){var r=t[0]-i[0]*e.k,n=t[1]-i[1]*e.k;return r===e.x&&n===e.y?e:new tj(e.k,r,n)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,i,r){e.on("start.zoom",function(){C(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,o=C(this,e).event(r),s=n.apply(this,e),a=null==i?b(s):"function"==typeof i?i.apply(this,e):i,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=this.__zoom,d="function"==typeof t?t.apply(this,e):t,h=c(u.invert(a).concat(l/u.k),d.invert(a).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=h(e),i=l/t[2];e=new tj(i,a[0]-t[0]*i,a[1]-t[1]*i)}o.zoom(null,e)}})}function C(e,t,i){return!i&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=n.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var i=C(this,t).event(e),n=this.__zoom,a=Math.max(l[0],Math.min(l[1],n.k*Math.pow(2,s.apply(this,arguments)))),d=el(e);if(i.wheel)(i.mouse[0][0]!==d[0]||i.mouse[0][1]!==d[1])&&(i.mouse[1]=n.invert(i.mouse[0]=d)),clearTimeout(i.wheel);else{if(n.k===a)return;i.mouse=[d,n.invert(d)],eK(this),i.start()}t$(e),i.wheel=setTimeout(function(){i.wheel=null,i.end()},150),i.zoom("mouse",o(y(m(n,a),i.mouse[0],i.mouse[1]),i.extent,u))}}function k(e,...t){if(!i&&r.apply(this,arguments)){var n=e.currentTarget,s=C(this,t,!0).event(e),a=ea(e.view).on("mousemove.zoom",function(e){if(t$(e),!s.moved){var t=e.clientX-d,i=e.clientY-c;s.moved=t*t+i*i>p}s.event(e).zoom("mouse",o(y(s.that.__zoom,s.mouse[0]=el(e,n),s.mouse[1]),s.extent,u))},!0).on("mouseup.zoom",function(e){a.on("mousemove.zoom mouseup.zoom",null),ef(e.view,s.moved),t$(e),s.event(e).end()},!0),l=el(e,n),d=e.clientX,c=e.clientY;ep(e.view),tU(e),s.mouse=[l,this.__zoom.invert(l)],eK(this),s.start()}}function R(e,...t){if(r.apply(this,arguments)){var i=this.__zoom,s=el(e.changedTouches?e.changedTouches[0]:e,this),a=i.invert(s),l=i.k*(e.shiftKey?.5:2),c=o(y(m(i,l),s,a),n.apply(this,t),u);t$(e),d>0?ea(this).transition().duration(d).call(w,c,s,e):ea(this).call(g.transform,c,s,e)}}function E(i,...n){if(r.apply(this,arguments)){var o,s,a,l,u=i.touches,d=u.length,c=C(this,n,i.changedTouches.length===d).event(i);for(tU(i),s=0;s<d;++s)l=[l=el(a=u[s],this),this.__zoom.invert(l),a.identifier],c.touch0?c.touch1||c.touch0[2]===l[2]||(c.touch1=l,c.taps=0):(c.touch0=l,o=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(c.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),eK(this),c.start())}}function P(e,...t){if(this.__zooming){var i,r,n,s,a=C(this,t).event(e),l=e.changedTouches,d=l.length;for(t$(e),i=0;i<d;++i)n=el(r=l[i],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=n:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=n);if(r=a.that.__zoom,a.touch1){var c=a.touch0[0],h=a.touch0[1],p=a.touch1[0],f=a.touch1[1],g=(g=p[0]-c[0])*g+(g=p[1]-c[1])*g,v=(v=f[0]-h[0])*v+(v=f[1]-h[1])*v;r=m(r,Math.sqrt(g/v)),n=[(c[0]+p[0])/2,(c[1]+p[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!a.touch0)return;n=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(y(r,n,s),a.extent,u))}}function M(e,...r){if(this.__zooming){var n,o,s=C(this,r).event(e),a=e.changedTouches,l=a.length;for(tU(e),i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<l;++n)o=a[n],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=el(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<f)){var u=ea(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(e,t,i,r){var n=e.selection?e.selection():e;n.property("__zoom",tQ),e!==n?w(e,t,i,r):n.interrupt().each(function(){C(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,i,r){g.scaleTo(e,function(){var e=this.__zoom.k,i="function"==typeof t?t.apply(this,arguments):t;return e*i},i,r)},g.scaleTo=function(e,t,i,r){g.transform(e,function(){var e=n.apply(this,arguments),r=this.__zoom,s=null==i?b(e):"function"==typeof i?i.apply(this,arguments):i,a=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return o(y(m(r,l),s,a),e,u)},i,r)},g.translateBy=function(e,t,i,r){g.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof i?i.apply(this,arguments):i),n.apply(this,arguments),u)},null,r)},g.translateTo=function(e,t,i,r,s){g.transform(e,function(){var e=n.apply(this,arguments),s=this.__zoom,a=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r;return o(tG.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof i?-i.apply(this,arguments):-i),e,u)},r,s)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ea(this.that).datum();h.call(e,this.that,new tz(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:tH(+e),g):s},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:tH(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"==typeof e?e:tH(!!e),g):a},g.extent=function(e){return arguments.length?(n="function"==typeof e?e:tH([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):n},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(e){return arguments.length?(o=e,g):o},g.duration=function(e){return arguments.length?(d=+e,g):d},g.interpolate=function(e){return arguments.length?(c=e,g):c},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(p=(e*=1)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(f=+e,g):f},g}function t0(e,t){var i,r,n=typeof t;return null==t||"boolean"===n?tE(t):("number"===n?eQ:"string"===n?(r=tu(t))?(t=r,tM):t_:t instanceof tu?tM:t instanceof Date?function(e,t){var i=new Date;return e*=1,t*=1,function(r){return i.setTime(e*(1-r)+t*r),i}}:!ArrayBuffer.isView(i=t)||i instanceof DataView?Array.isArray(t)?function(e,t){var i,r=t?t.length:0,n=e?Math.min(r,e.length):0,o=Array(n),s=Array(r);for(i=0;i<n;++i)o[i]=t0(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(e){for(i=0;i<n;++i)s[i]=o[i](e);return s}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var i,r={},n={};for(i in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)i in e?r[i]=t0(e[i],t[i]):n[i]=t[i];return function(e){for(i in r)n[i]=r[i](e);return n}}:eQ:function(e,t){t||(t=[]);var i,r=e?Math.min(t.length,e.length):0,n=t.slice();return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}})(e,t)}tW.prototype=tj.prototype;let t1={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:i,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?i:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},t2=[[-1/0,-1/0],[1/0,1/0]],t5=["Enter"," ","Escape"],t3={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:i})=>`Moved selected node ${e}. New position, x: ${t}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(t=u||(u={})).Strict="strict",t.Loose="loose",(i=d||(d={})).Free="free",i.Vertical="vertical",i.Horizontal="horizontal",(r=c||(c={})).Partial="partial",r.Full="full";let t4={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};(n=h||(h={})).Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier",(o=p||(p={})).Arrow="arrow",o.ArrowClosed="arrowclosed",(s=f||(f={})).Left="left",s.Top="top",s.Right="right",s.Bottom="bottom";let t8={[f.Left]:f.Right,[f.Right]:f.Left,[f.Top]:f.Bottom,[f.Bottom]:f.Top};function t6(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(let i of e.keys())if(!t.has(i))return!1;return!0}function t7(e,t,i){if(!i)return;let r=[];e.forEach((e,i)=>{t?.has(i)||r.push(e)}),r.length&&i(r)}function t9(e){return null===e?null:e?"valid":"invalid"}let ie=e=>"id"in e&&"source"in e&&"target"in e,it=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ii=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ir=(e,t=[0,0])=>{let{width:i,height:r}=iF(e),n=e.origin??t,o=i*n[0],s=r*n[1];return{x:e.position.x-o,y:e.position.y-s}},io=(e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:ib(e.reduce((e,i)=>{let r="string"==typeof i,n=t.nodeLookup||r?void 0:i;return t.nodeLookup&&(n=r?t.nodeLookup.get(i):ii(i)?i:t.nodeLookup.get(i.id)),iv(e,n?iC(n,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),is=(e,t={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(i=iv(i,iC(e)),r=!0)}),r?ib(i):{x:0,y:0,width:0,height:0}},ia=(e,t,[i,r,n]=[0,0,1],o=!1,s=!1)=>{let a={...iM(t,[i,r,n]),width:t.width/n,height:t.height/n},l=[];for(let t of e.values()){let{measured:e,selectable:i=!0,hidden:r=!1}=t;if(s&&!i||r)continue;let n=e.width??t.width??t.initialWidth??null,u=e.height??t.height??t.initialHeight??null,d=iS(a,iw(t)),c=(n??0)*(u??0),h=o&&d>0;(!t.internals.handleBounds||h||d>=c||t.dragging)&&l.push(t)}return l};async function il({nodes:e,width:t,height:i,panZoom:r,minZoom:n,maxZoom:o},s){let a,l;if(0===e.size)return Promise.resolve(!0);let u=iO(is((a=new Map,l=s?.nodes?new Set(s.nodes.map(e=>e.id)):null,e.forEach(e=>{e.measured.width&&e.measured.height&&(s?.includeHiddenNodes||!e.hidden)&&(!l||l.has(e.id))&&a.set(e.id,e)}),a)),t,i,s?.minZoom??n,s?.maxZoom??o,s?.padding??.1);return await r.setViewport(u,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function iu({nodeId:e,nextPosition:t,nodeLookup:i,nodeOrigin:r=[0,0],nodeExtent:n,onError:o}){let s=i.get(e),a=s.parentId?i.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r,c=s.extent||n;if("parent"!==s.extent||s.expandParent)a&&iA(s.extent)&&(c=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);else if(a){let e=a.measured.width,t=a.measured.height;e&&t&&(c=[[l,u],[l+e,u+t]])}else o?.("005",t1.error005());let h=iA(c)?ih(t,c,s.measured):t;return(void 0===s.measured.width||void 0===s.measured.height)&&o?.("015",t1.error015()),{position:{x:h.x-l+(s.measured.width??0)*d[0],y:h.y-u+(s.measured.height??0)*d[1]},positionAbsolute:h}}async function id({nodesToRemove:e=[],edgesToRemove:t=[],nodes:i,edges:r,onBeforeDelete:n}){let o,s=new Set(e.map(e=>e.id)),a=[];for(let e of i){if(!1===e.deletable)continue;let t=s.has(e.id),i=!t&&e.parentId&&a.find(t=>t.id===e.parentId);(t||i)&&a.push(e)}let l=new Set(t.map(e=>e.id)),u=r.filter(e=>!1!==e.deletable),d=(o=new Set,a.forEach(e=>{o.add(e.id)}),u.filter(e=>o.has(e.source)||o.has(e.target)));for(let e of u)l.has(e.id)&&!d.find(t=>t.id===e.id)&&d.push(e);if(!n)return{edges:d,nodes:a};let c=await n({nodes:a,edges:d});return"boolean"==typeof c?c?{edges:d,nodes:a}:{edges:[],nodes:[]}:c}let ic=(e,t=0,i=1)=>Math.min(Math.max(e,t),i),ih=(e={x:0,y:0},t,i)=>({x:ic(e.x,t[0][0],t[1][0]-(i?.width??0)),y:ic(e.y,t[0][1],t[1][1]-(i?.height??0))});function ip(e,t,i){let{width:r,height:n}=iF(i),{x:o,y:s}=i.internals.positionAbsolute;return ih(e,[[o,s],[o+r,s+n]],t)}let ig=(e,t,i)=>e<t?ic(Math.abs(e-t),1,t)/t:e>i?-ic(Math.abs(e-i),1,t)/t:0,im=(e,t,i=15,r=40)=>[ig(e.x,r,t.width-r)*i,ig(e.y,r,t.height-r)*i],iv=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),iy=({x:e,y:t,width:i,height:r})=>({x:e,y:t,x2:e+i,y2:t+r}),ib=({x:e,y:t,x2:i,y2:r})=>({x:e,y:t,width:i-e,height:r-t}),iw=(e,t=[0,0])=>{let{x:i,y:r}=ii(e)?e.internals.positionAbsolute:ir(e,t);return{x:i,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},iC=(e,t=[0,0])=>{let{x:i,y:r}=ii(e)?e.internals.positionAbsolute:ir(e,t);return{x:i,y:r,x2:i+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},ix=(e,t)=>ib(iv(iy(e),iy(t))),iS=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),ik=e=>iR(e.width)&&iR(e.height)&&iR(e.x)&&iR(e.y),iR=e=>!isNaN(e)&&isFinite(e),iE=(e,t)=>{},iP=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),iM=({x:e,y:t},[i,r,n],o=!1,s=[1,1])=>{let a={x:(e-i)/n,y:(t-r)/n};return o?iP(a,s):a},iD=({x:e,y:t},[i,r,n])=>({x:e*n+i,y:t*n+r});function iT(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(t*i*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let iO=(e,t,i,r,n,o)=>{let s=function(e,t,i){if("string"==typeof e||"number"==typeof e){let r=iT(e,i),n=iT(e,t);return{top:r,right:n,bottom:r,left:n,x:2*n,y:2*r}}if("object"==typeof e){let r=iT(e.top??e.y??0,i),n=iT(e.bottom??e.y??0,i),o=iT(e.left??e.x??0,t),s=iT(e.right??e.x??0,t);return{top:r,right:s,bottom:n,left:o,x:o+s,y:r+n}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(o,t,i),a=ic(Math.min((t-s.x)/e.width,(i-s.y)/e.height),r,n),l=e.x+e.width/2,u=e.y+e.height/2,d=t/2-l*a,c=i/2-u*a,h=function(e,t,i,r,n,o){let{x:s,y:a}=iD(e,[t,i,r]),{x:l,y:u}=iD({x:e.x+e.width,y:e.y+e.height},[t,i,r]);return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(n-l),bottom:Math.floor(o-u)}}(e,d,c,a,t,i),p={left:Math.min(h.left-s.left,0),top:Math.min(h.top-s.top,0),right:Math.min(h.right-s.right,0),bottom:Math.min(h.bottom-s.bottom,0)};return{x:d-p.left+p.right,y:c-p.top+p.bottom,zoom:a}},i_=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function iA(e){return null!=e&&"parent"!==e}function iF(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function iI(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function iL(e,t={width:0,height:0},i,r,n){let o={...e},s=r.get(i);if(s){let e=s.origin||n;o.x+=s.internals.positionAbsolute.x-(t.width??0)*e[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*e[1]}return o}function iN(e,t){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}function iB(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}function iV(e){return{...t3,...e||{}}}function iH(e,{snapGrid:t=[0,0],snapToGrid:i=!1,transform:r,containerBounds:n}){let{x:o,y:s}=i$(e),a=iM({x:o-(n?.left??0),y:s-(n?.top??0)},r),{x:l,y:u}=i?iP(a,t):a;return{xSnapped:l,ySnapped:u,...a}}let iz=e=>({width:e.offsetWidth,height:e.offsetHeight}),ij=e=>e?.getRootNode?.()||window?.document,iG=["INPUT","SELECT","TEXTAREA"];function iW(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(iG.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let iU=e=>"clientX"in e,i$=(e,t)=>{let i=iU(e),r=i?e.clientX:e.touches?.[0].clientX,n=i?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:n-(t?.top??0)}},iq=(e,t,i,r,n)=>{let o=t.querySelectorAll(`.${e}`);return o&&o.length?Array.from(o).map(t=>{let o=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:n,position:t.getAttribute("data-handlepos"),x:(o.left-i.left)/r,y:(o.top-i.top)/r,...iz(t)}}):null};function iK({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:n,sourceControlY:o,targetControlX:s,targetControlY:a}){let l=.125*e+.375*n+.375*s+.125*i,u=.125*t+.375*o+.375*a+.125*r,d=Math.abs(l-e),c=Math.abs(u-t);return[l,u,d,c]}function iQ(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function iX({pos:e,x1:t,y1:i,x2:r,y2:n,c:o}){switch(e){case f.Left:return[t-iQ(t-r,o),i];case f.Right:return[t+iQ(r-t,o),i];case f.Top:return[t,i-iQ(i-n,o)];case f.Bottom:return[t,i+iQ(n-i,o)]}}function iY({sourceX:e,sourceY:t,sourcePosition:i=f.Bottom,targetX:r,targetY:n,targetPosition:o=f.Top,curvature:s=.25}){let[a,l]=iX({pos:i,x1:e,y1:t,x2:r,y2:n,c:s}),[u,d]=iX({pos:o,x1:r,y1:n,x2:e,y2:t,c:s}),[c,h,p,g]=iK({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${l} ${u},${d} ${r},${n}`,c,h,p,g]}function iZ({sourceX:e,sourceY:t,targetX:i,targetY:r}){let n=Math.abs(i-e)/2,o=Math.abs(r-t)/2;return[i<e?i+n:i-n,r<t?r+o:r-o,n,o]}function iJ({sourceNode:e,targetNode:t,selected:i=!1,zIndex:r=0,elevateOnSelect:n=!1,zIndexMode:o="basic"}){if("manual"===o)return r;let s=Math.max(e.parentId||n&&e.selected?e.internals.z:0,t.parentId||n&&t.selected?t.internals.z:0);return(n&&i?r+1e3:r)+s}function i0({sourceNode:e,targetNode:t,width:i,height:r,transform:n}){let o=iv(iC(e),iC(t));return o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1),iS({x:-n[0]/n[2],y:-n[1]/n[2],width:i/n[2],height:r/n[2]},ib(o))>0}let i1=({source:e,sourceHandle:t,target:i,targetHandle:r})=>`xy-edge__${e}${t||""}-${i}${r||""}`,i2=(e,t,i={})=>{let r,n;if(!e.source||!e.target)return iE("006",t1.error006()),t;let o=i.getEdgeId||i1;return(n=r=ie(e)?{...e}:{...e,id:o(e)},t.some(e=>e.source===n.source&&e.target===n.target&&(e.sourceHandle===n.sourceHandle||!e.sourceHandle&&!n.sourceHandle)&&(e.targetHandle===n.targetHandle||!e.targetHandle&&!n.targetHandle)))?t:(null===r.sourceHandle&&delete r.sourceHandle,null===r.targetHandle&&delete r.targetHandle,t.concat(r))};function i5({sourceX:e,sourceY:t,targetX:i,targetY:r}){let[n,o,s,a]=iZ({sourceX:e,sourceY:t,targetX:i,targetY:r});return[`M ${e},${t}L ${i},${r}`,n,o,s,a]}let i3={[f.Left]:{x:-1,y:0},[f.Right]:{x:1,y:0},[f.Top]:{x:0,y:-1},[f.Bottom]:{x:0,y:1}},i4=({source:e,sourcePosition:t=f.Bottom,target:i})=>t===f.Left||t===f.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},i8=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function i6({sourceX:e,sourceY:t,sourcePosition:i=f.Bottom,targetX:r,targetY:n,targetPosition:o=f.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20,stepPosition:d=.5}){let[c,h,p,g,m]=function({source:e,sourcePosition:t=f.Bottom,target:i,targetPosition:r=f.Top,center:n,offset:o,stepPosition:s}){let a,l,u=i3[t],d=i3[r],c={x:e.x+u.x*o,y:e.y+u.y*o},h={x:i.x+d.x*o,y:i.y+d.y*o},p=i4({source:c,sourcePosition:t,target:h}),g=0!==p.x?"x":"y",m=p[g],v=[],y={x:0,y:0},b={x:0,y:0},[,,w,C]=iZ({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(u[g]*d[g]==-1){"x"===g?(a=n.x??c.x+(h.x-c.x)*s,l=n.y??(c.y+h.y)/2):(a=n.x??(c.x+h.x)/2,l=n.y??c.y+(h.y-c.y)*s);let e=[{x:a,y:c.y},{x:a,y:h.y}],t=[{x:c.x,y:l},{x:h.x,y:l}];v=u[g]===m?"x"===g?e:t:"x"===g?t:e}else{let n=[{x:c.x,y:h.y}],s=[{x:h.x,y:c.y}];if(v="x"===g?u.x===m?s:n:u.y===m?n:s,t===r){let t=Math.abs(e[g]-i[g]);if(t<=o){let r=Math.min(o-1,o-t);u[g]===m?y[g]=(c[g]>e[g]?-1:1)*r:b[g]=(h[g]>i[g]?-1:1)*r}}if(t!==r){let e="x"===g?"y":"x",t=u[g]===d[e],i=c[e]>h[e],r=c[e]<h[e];(1===u[g]&&(!t&&i||t&&r)||1!==u[g]&&(!t&&r||t&&i))&&(v="x"===g?n:s)}let p={x:c.x+y.x,y:c.y+y.y},f={x:h.x+b.x,y:h.y+b.y};Math.max(Math.abs(p.x-v[0].x),Math.abs(f.x-v[0].x))>=Math.max(Math.abs(p.y-v[0].y),Math.abs(f.y-v[0].y))?(a=(p.x+f.x)/2,l=v[0].y):(a=v[0].x,l=(p.y+f.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...v,{x:h.x+b.x,y:h.y+b.y},i],a,l,w,C]}({source:{x:e,y:t},sourcePosition:i,target:{x:r,y:n},targetPosition:o,center:{x:a,y:l},offset:u,stepPosition:d});return[c.reduce((e,t,i)=>e+(i>0&&i<c.length-1?function(e,t,i,r){let n=Math.min(i8(e,t)/2,i8(t,i)/2,r),{x:o,y:s}=t;if(e.x===o&&o===i.x||e.y===s&&s===i.y)return`L${o} ${s}`;if(e.y===s){let t=e.x<i.x?-1:1,r=e.y<i.y?1:-1;return`L ${o+n*t},${s}Q ${o},${s} ${o},${s+n*r}`}let a=e.x<i.x?1:-1,l=e.y<i.y?-1:1;return`L ${o},${s+n*l}Q ${o},${s} ${o+n*a},${s}`}(c[i-1],t,c[i+1],s):`${0===i?"M":"L"}${t.x} ${t.y}`),""),h,p,g,m]}function i7(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function i9(e){let{sourceNode:t,targetNode:i}=e;if(!i7(t)||!i7(i))return null;let r=t.internals.handleBounds||re(t.handles),n=i.internals.handleBounds||re(i.handles),o=ri(r?.source??[],e.sourceHandle),s=ri(e.connectionMode===u.Strict?n?.target??[]:(n?.target??[]).concat(n?.source??[]),e.targetHandle);if(!o||!s)return e.onError?.("008",t1.error008(!o?"source":"target",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let a=o?.position||f.Bottom,l=s?.position||f.Top,d=rt(t,o,a),c=rt(i,s,l);return{sourceX:d.x,sourceY:d.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function re(e){if(!e)return null;let t=[],i=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&i.push(r);return{source:t,target:i}}function rt(e,t,i=f.Left,r=!1){let n=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??iF(e);if(r)return{x:n+s/2,y:o+a/2};switch(t?.position??i){case f.Top:return{x:n+s/2,y:o};case f.Right:return{x:n+s,y:o+a/2};case f.Bottom:return{x:n+s/2,y:o+a};case f.Left:return{x:n,y:o+a/2}}}function ri(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function rr(e,t){if(!e)return"";if("string"==typeof e)return e;let i=t?`${t}__`:"";return`${i}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function rn(e,{id:t,defaultColor:i,defaultMarkerStart:r,defaultMarkerEnd:n}){let o=new Set;return e.reduce((e,s)=>([s.markerStart||r,s.markerEnd||n].forEach(r=>{if(r&&"object"==typeof r){let n=rr(r,t);o.has(n)||(e.push({id:n,color:r.color||i,...r}),o.add(n))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}function ro(e,t,i,r,n){let o=.5;"start"===n?o=0:"end"===n&&(o=1);let s=[(e.x+e.width*o)*t.zoom+t.x,e.y*t.zoom+t.y-r],a=[-100*o,-100];switch(i){case f.Right:s=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*o)*t.zoom+t.y],a=[0,-100*o];break;case f.Bottom:s[1]=(e.y+e.height)*t.zoom+t.y+r,a[1]=0;break;case f.Left:s=[e.x*t.zoom+t.x-r,(e.y+e.height*o)*t.zoom+t.y],a=[-100,-100*o]}return`translate(${s[0]}px, ${s[1]}px) translate(${a[0]}%, ${a[1]}%)`}let rs={left:0,center:50,right:100},ra={top:0,center:50,bottom:100};function rl(e,t,i,r="center",n="center"){return`translate(${e}px, ${t}px) scale(${1/i}) translate(${-(rs[r]??50)}%, ${-(ra[n]??50)}%)`}let ru={nodeOrigin:[0,0],nodeExtent:t2,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},rd={...ru,checkEquality:!0};function rc(e,t){let i={...e};for(let e in t)void 0!==t[e]&&(i[e]=t[e]);return i}function rh(e,t,i){let r=rc(ru,i);for(let i of e.values())if(i.parentId)rg(i,e,t,r);else{let e=ih(ir(i,r.nodeOrigin),iA(i.extent)?i.extent:r.nodeExtent,iF(i));i.internals.positionAbsolute=e}}function rp(e){return"manual"===e}function rf(e,t,i,r={}){let n=rc(rd,r),o={i:0},s=new Map(t),a=n?.elevateNodesOnSelect&&!rp(n.zIndexMode)?1e3:0,l=e.length>0;for(let u of(t.clear(),i.clear(),e)){let e=s.get(u.id);if(n.checkEquality&&u===e?.internals.userNode)t.set(u.id,e);else{let i=ih(ir(u,n.nodeOrigin),iA(u.extent)?u.extent:n.nodeExtent,iF(u));e={...n.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:i,handleBounds:function(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let i=[],r=[];for(let t of e.handles){let n={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?i.push(n):"target"===t.type&&r.push(n)}return{source:i,target:r}}(u,e),z:rm(u,a,n.zIndexMode),userNode:u}},t.set(u.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),u.parentId&&rg(e,t,i,r,o)}return l}function rg(e,t,i,r,n){let{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:l}=rc(ru,r),u=e.parentId,d=t.get(u);if(!d)return void console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;let i=t.get(e.parentId);i?i.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,i),n&&!d.parentId&&void 0===d.internals.rootParentIndex&&"auto"===l&&(d.internals.rootParentIndex=++n.i,d.internals.z=d.internals.z+10*n.i),n&&void 0!==d.internals.rootParentIndex&&(n.i=d.internals.rootParentIndex);let{x:c,y:h,z:p}=function(e,t,i,r,n,o){let{x:s,y:a}=t.internals.positionAbsolute,l=iF(e),u=ir(e,i),d=iA(e.extent)?ih(u,e.extent,l):u,c=ih({x:s+d.x,y:a+d.y},r,l);"parent"===e.extent&&(c=ip(c,l,t));let h=rm(e,n,o),p=t.internals.z??0;return{x:c.x,y:c.y,z:p>=h?p+1:h}}(e,d,s,a,o&&!rp(l)?1e3:0,l),{positionAbsolute:f}=e.internals,g=c!==f.x||h!==f.y;(g||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:c,y:h}:f,z:p}})}function rm(e,t,i){let r=iR(e.zIndex)?e.zIndex:0;return rp(i)?r:r+(e.selected?t:0)}function rv(e,t,i,r=[0,0]){let n=[],o=new Map;for(let i of e){let e=t.get(i.parentId);if(!e)continue;let r=ix(o.get(i.parentId)?.expandedRect??iw(e),i.rect);o.set(i.parentId,{expandedRect:r,parent:e})}return o.size>0&&o.forEach(({expandedRect:t,parent:o},s)=>{let a=o.internals.positionAbsolute,l=iF(o),u=o.origin??r,d=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,c=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),p=Math.max(l.height,Math.round(t.height)),f=(h-l.width)*u[0],g=(p-l.height)*u[1];(d>0||c>0||f||g)&&(n.push({id:s,type:"position",position:{x:o.position.x-d+f,y:o.position.y-c+g}}),i.get(s)?.forEach(t=>{e.some(e=>e.id===t.id)||n.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+c}})})),(l.width<t.width||l.height<t.height||d||c)&&n.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?u[0]*d-f:0),height:p+(c?u[1]*c-g:0)}})}),n}function ry(e,t,i,r,n,o,s){let a=r?.querySelector(".xyflow__viewport"),l=!1;if(!a)return{changes:[],updatedInternals:l};let u=[],d=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(d.transform),h=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let a=iz(r.nodeElement),d=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(d||!e.internals.handleBounds||r.force)){let p=r.nodeElement.getBoundingClientRect(),f=iA(e.extent)?e.extent:o,{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=ip(g,a,t.get(e.parentId)):f&&(g=ih(g,f,a));let m={...e,measured:a,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:iq("source",r.nodeElement,p,c,e.id),target:iq("target",r.nodeElement,p,c,e.id)}}};t.set(e.id,m),e.parentId&&rg(m,t,i,{nodeOrigin:n,zIndexMode:s}),l=!0,d&&(u.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:iw(m,n)}))}}if(h.length>0){let e=rv(h,t,i,n);u.push(...e)}return{changes:u,updatedInternals:l}}async function rb({delta:e,panZoom:t,transform:i,translateExtent:r,width:n,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let s=await t.setViewportConstrained({x:i[0]+e.x,y:i[1]+e.y,zoom:i[2]},[[0,0],[n,o]],r);return Promise.resolve(!!s&&(s.x!==i[0]||s.y!==i[1]||s.k!==i[2]))}function rw(e,t,i,r,n,o){let s=n,a=r.get(s)||new Map;r.set(s,a.set(i,t)),s=`${n}-${e}`;let l=r.get(s)||new Map;if(r.set(s,l.set(i,t)),o){s=`${n}-${e}-${o}`;let a=r.get(s)||new Map;r.set(s,a.set(i,t))}}function rC(e,t,i){for(let r of(e.clear(),t.clear(),i)){let{source:i,target:n,sourceHandle:o=null,targetHandle:s=null}=r,a={edgeId:r.id,source:i,target:n,sourceHandle:o,targetHandle:s},l=`${i}-${o}--${n}-${s}`;rw("source",a,`${n}-${s}--${i}-${o}`,e,i,o),rw("target",a,l,e,n,s),t.set(r.id,r)}}function rx(e,t){if(null===e||null===t)return!1;let i=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];if(i.length!==r.length)return!1;for(let e=0;e<i.length;e++)if(i[e].id!==r[e].id||i[e].type!==r[e].type||!Object.is(i[e].data,r[e].data))return!1;return!0}function rS(e,t,i){let r=e;do{if(r?.matches?.(t))return!0;if(r===i)break;r=r?.parentElement}while(r)return!1}function rk({nodeId:e,dragItems:t,nodeLookup:i,dragging:r=!0}){let n=[];for(let[e,o]of t){let t=i.get(e)?.internals.userNode;t&&n.push({...t,position:o.position,dragging:r})}if(!e)return[n[0],n];let o=i.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:n[0],n]}function rR({onNodeMouseDown:e,getStoreItems:t,onDragStart:i,onDrag:r,onDragStop:n}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},d=null,c=!1,h=null,p=!1,f=!1,g=null;return{update:function({noDragClassName:m,handleSelector:v,domNode:y,isSelectable:b,nodeId:w,nodeClickDistance:C=0}){function x({x:e,y:i}){let{nodeLookup:n,nodeExtent:s,snapGrid:l,snapToGrid:u,nodeOrigin:d,onNodeDrag:c,onSelectionDrag:h,onError:p,updateNodePositions:m}=t();o={x:e,y:i};let v=!1,y=a.size>1,b=y&&s?iy(is(a)):null,C=y&&u?function({dragItems:e,snapGrid:t,x:i,y:r}){let n=e.values().next().value;if(!n)return null;let o={x:i-n.distance.x,y:r-n.distance.y},s=iP(o,t);return{x:s.x-o.x,y:s.y-o.y}}({dragItems:a,snapGrid:l,x:e,y:i}):null;for(let[t,r]of a){if(!n.has(t))continue;let o={x:e-r.distance.x,y:i-r.distance.y};u&&(o=C?{x:Math.round(o.x+C.x),y:Math.round(o.y+C.y)}:iP(o,l));let a=null;if(y&&s&&!r.extent&&b){let{positionAbsolute:e}=r.internals,t=e.x-b.x+s[0][0],i=e.x+r.measured.width-b.x2+s[1][0];a=[[t,e.y-b.y+s[0][1]],[i,e.y+r.measured.height-b.y2+s[1][1]]]}let{position:c,positionAbsolute:h}=iu({nodeId:t,nextPosition:o,nodeLookup:n,nodeExtent:a||s,nodeOrigin:d,onError:p});v=v||r.position.x!==c.x||r.position.y!==c.y,r.position=c,r.internals.positionAbsolute=h}if(f=f||v,v&&(m(a,!0),g&&(r||c||!w&&h))){let[e,t]=rk({nodeId:w,dragItems:a,nodeLookup:n});r?.(g,a,e,t),c?.(g,e,t),w||h?.(g,t)}}async function S(){if(!d)return;let{transform:e,panBy:i,autoPanSpeed:r,autoPanOnNodeDrag:n}=t();if(!n){l=!1,cancelAnimationFrame(s);return}let[a,c]=im(u,d,r);(0!==a||0!==c)&&(o.x=(o.x??0)-a/e[2],o.y=(o.y??0)-c/e[2],await i({x:a,y:c})&&x(o)),s=requestAnimationFrame(S)}function k(r){let{nodeLookup:n,multiSelectionActive:s,nodesDraggable:l,transform:u,snapGrid:h,snapToGrid:p,selectNodesOnDrag:f,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:v}=t();c=!0,f&&b||s||!w||n.get(w)?.selected||v(),b&&f&&w&&e?.(w);let y=iH(r.sourceEvent,{transform:u,snapGrid:h,snapToGrid:p,containerBounds:d});if(o=y,(a=function(e,t,i,r){let n=new Map;for(let[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!function e(t,i){if(!t.parentId)return!1;let r=i.get(t.parentId);return!!r&&(!!r.selected||e(r,i))}(s,e))&&(s.draggable||t&&void 0===s.draggable)){let t=e.get(o);t&&n.set(o,{id:o,position:t.position||{x:0,y:0},distance:{x:i.x-t.internals.positionAbsolute.x,y:i.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return n}(n,l,y,w)).size>0&&(i||g||!w&&m)){let[e,t]=rk({nodeId:w,dragItems:a,nodeLookup:n});i?.(r.sourceEvent,a,e,t),g?.(r.sourceEvent,e,t),w||m?.(r.sourceEvent,t)}}h=ea(y);let R=eC().clickDistance(C).on("start",e=>{let{domNode:i,nodeDragThreshold:r,transform:n,snapGrid:s,snapToGrid:a}=t();d=i?.getBoundingClientRect()||null,p=!1,f=!1,g=e.sourceEvent,0===r&&k(e),o=iH(e.sourceEvent,{transform:n,snapGrid:s,snapToGrid:a,containerBounds:d}),u=i$(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:i,transform:r,snapGrid:n,snapToGrid:s,nodeDragThreshold:h,nodeLookup:f}=t(),m=iH(e.sourceEvent,{transform:r,snapGrid:n,snapToGrid:s,containerBounds:d});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||w&&!f.has(w))&&(p=!0),!p){if(!l&&i&&c&&(l=!0,S()),!c){let t=i$(e.sourceEvent,d),i=t.x-u.x,r=t.y-u.y;Math.sqrt(i*i+r*r)>h&&k(e)}(o.x!==m.xSnapped||o.y!==m.ySnapped)&&a&&c&&(u=i$(e.sourceEvent,d),x(m))}}).on("end",e=>{if(c&&!p&&(l=!1,c=!1,cancelAnimationFrame(s),a.size>0)){let{nodeLookup:i,updateNodePositions:r,onNodeDragStop:o,onSelectionDragStop:s}=t();if(f&&(r(a,!1),f=!1),n||o||!w&&s){let[t,r]=rk({nodeId:w,dragItems:a,nodeLookup:i,dragging:!1});n?.(e.sourceEvent,a,t,r),o?.(e.sourceEvent,t,r),w||s?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!m||!rS(t,`.${m}`,y))&&(!v||rS(t,v,y))});h.call(R)},destroy:function(){h?.on(".drag",null)}}}function rE(e,t,i,r,n,o=!1){let s=r.get(e);if(!s)return null;let a="strict"===n?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(i?a?.find(e=>e.id===i):a?.[0])??null;return l&&o?{...l,...rt(s,l,l.position,!0)}:l}function rP(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let rM=()=>!0;function rD(e,{handle:t,connectionMode:i,fromNodeId:r,fromHandleId:n,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:d=rM,nodeLookup:c}){let h="target"===o,p=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:g}=i$(e),m=s.elementFromPoint(f,g),v=m?.classList.contains(`${a}-flow__handle`)?m:p,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){let e=rP(void 0,v),t=v.getAttribute("data-nodeid"),o=v.getAttribute("data-handleid"),s=v.classList.contains("connectable"),a=v.classList.contains("connectableend");if(!t||!e)return y;let l={source:h?t:r,sourceHandle:h?o:n,target:h?r:t,targetHandle:h?n:o};y.connection=l,y.isValid=s&&a&&(i===u.Strict?h&&"source"===e||!h&&"target"===e:t!==r||o!==n)&&d(l),y.toHandle=rE(t,e,o,c,i,!0)}return y}let rT={onPointerDown:function(e,{connectionMode:t,connectionRadius:i,handleId:r,nodeId:n,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:d,flowId:c,panBy:h,cancelConnection:p,onConnectStart:g,onConnect:m,onConnectEnd:v,isValidConnection:y=rM,onReconnectEnd:b,updateConnection:w,getTransform:C,getFromHandle:x,autoPanSpeed:S,dragThreshold:k=1,handleDomNode:R}){let E,P=ij(e.target),M=0,{x:D,y:T}=i$(e),O=rP(o,R),_=a?.getBoundingClientRect(),A=!1;if(!_||!O)return;let F=rE(n,O,r,l,t);if(!F)return;let I=i$(e,_),L=!1,N=null,B=!1,V=null,H={...F,nodeId:n,type:O,position:F.position},z=l.get(n),j={inProgress:!0,isValid:null,from:rt(z,H,f.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:z,to:I,toHandle:null,toPosition:t8[H.position],toNode:null,pointer:I};function G(){A=!0,w(j),g?.(e,{nodeId:n,handleId:r,handleType:O})}function W(e){var o,a;let p;if(!A){let{x:t,y:i}=i$(e),r=t-D,n=i-T;if(!(r*r+n*n>k*k))return;G()}if(!x()||!H)return void U(e);let g=C();E=function(e,t,i,r){let n=[],o=1/0;for(let s of function(e,t,i){let r=[],n={x:e.x-i,y:e.y-i,width:2*i,height:2*i};for(let e of t.values())iS(n,iw(e))>0&&r.push(e);return r}(e,i,t+250))for(let i of[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]]){if(r.nodeId===i.nodeId&&r.type===i.type&&r.id===i.id)continue;let{x:a,y:l}=rt(s,i,i.position,!0),u=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));u>t||(u<o?(n=[{...i,x:a,y:l}],o=u):u===o&&n.push({...i,x:a,y:l}))}if(!n.length)return null;if(n.length>1){let e="source"===r.type?"target":"source";return n.find(t=>t.type===e)??n[0]}return n[0]}(iM(I=i$(e,_),g,!1,[1,1]),i,l,H),L||(!function e(){if(!d||!_)return;let[t,i]=im(I,_,S);h({x:t,y:i}),M=requestAnimationFrame(e)}(),L=!0);let m=rD(e,{handle:E,connectionMode:t,fromNodeId:n,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:P,lib:u,flowId:c,nodeLookup:l});V=m.handleDomNode,N=m.connection,o=!!E,a=m.isValid,p=null,a?p=!0:o&&!a&&(p=!1),B=p;let v=l.get(n),b=v?rt(v,H,f.Left,!0):j.from,R={...j,from:b,isValid:B,to:m.toHandle&&B?iD({x:m.toHandle.x,y:m.toHandle.y},g):I,toHandle:m.toHandle,toPosition:B&&m.toHandle?m.toHandle.position:t8[H.position],toNode:m.toHandle?l.get(m.toHandle.nodeId):null,pointer:I};w(R),j=R}function U(e){if(!("touches"in e)||!(e.touches.length>0)){if(A){(E||V)&&N&&B&&m?.(N);let{inProgress:t,...i}=j,r={...i,toPosition:j.toHandle?j.toPosition:null};v?.(e,r),o&&b?.(e,r)}p(),cancelAnimationFrame(M),L=!1,B=!1,N=null,V=null,P.removeEventListener("mousemove",W),P.removeEventListener("mouseup",U),P.removeEventListener("touchmove",W),P.removeEventListener("touchend",U)}}0===k&&G(),P.addEventListener("mousemove",W),P.addEventListener("mouseup",U),P.addEventListener("touchmove",W),P.addEventListener("touchend",U)},isValid:rD};function rO({domNode:e,panZoom:t,getTransform:i,getViewScale:r}){let n=ea(e);return{update:function({translateExtent:e,width:o,height:s,zoomStep:a=1,pannable:l=!0,zoomable:u=!0,inversePan:d=!1}){let c=[0,0],h=tJ().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(c=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?n=>{let a=i();if("mousemove"!==n.sourceEvent.type&&"touchmove"!==n.sourceEvent.type||!t)return;let l=[n.sourceEvent.clientX??n.sourceEvent.touches[0].clientX,n.sourceEvent.clientY??n.sourceEvent.touches[0].clientY],u=[l[0]-c[0],l[1]-c[1]];c=l;let h=r()*Math.max(a[2],Math.log(a[2]))*(d?-1:1),p={x:a[0]-u[0]*h,y:a[1]-u[1]*h};t.setViewportConstrained({x:p.x,y:p.y,zoom:a[2]},[[0,0],[o,s]],e)}:null).on("zoom.wheel",u?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let r=i(),n=e.sourceEvent.ctrlKey&&i_()?10:1,o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*a,s=r[2]*Math.pow(2,o*n);t.scaleTo(s)}:null);n.call(h,{})},destroy:function(){n.on("zoom",null)},pointer:el}}let r_=e=>({x:e.x,y:e.y,zoom:e.k}),rA=({x:e,y:t,zoom:i})=>tG.translate(e,t).scale(i),rF=(e,t)=>e.target.closest(`.${t}`),rI=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),rL=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,rN=(e,t=0,i=rL,r=()=>{})=>{let n="number"==typeof t&&t>0;return n||r(),n?e.transition().duration(t).ease(i).on("end",r):e},rB=e=>{let t=e.ctrlKey&&i_()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function rV({domNode:e,minZoom:t,maxZoom:i,translateExtent:r,viewport:n,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:l}){let u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),h=tJ().scaleExtent([t,i]).translateExtent(r),p=ea(e).call(h);y({x:n.x,y:n.y,zoom:ic(n.zoom,t,i)},[[0,0],[c.width,c.height]],r);let f=p.on("wheel.zoom"),g=p.on("dblclick.zoom");function m(e,t){return p?new Promise(i=>{h?.interpolate(t?.interpolate==="linear"?t0:eS).transform(rN(p,t?.duration,t?.ease,()=>i(!0)),e)}):Promise.resolve(!1)}function v(){h.on("zoom",null)}async function y(e,t,i){let r=rA(e),n=h?.constrain()(r,t,i);return n&&await m(n),new Promise(e=>e(n))}return h.wheelDelta(rB),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:i,userSelectionActive:r,panOnScroll:n,panOnDrag:c,panOnScrollMode:m,panOnScrollSpeed:y,preventScrolling:b,zoomOnPinch:w,zoomOnScroll:C,zoomOnDoubleClick:x,zoomActivationKeyPressed:S,lib:k,onTransformChange:R,connectionInProgress:E,paneClickDistance:P,selectionOnDrag:M}){r&&!u.isZoomingOrPanning&&v();let D=n&&!S&&!r;h.clickDistance(M?1/0:!iR(P)||P<0?0:P);let T=D?function({zoomPanValues:e,noWheelClassName:t,d3Selection:i,d3Zoom:r,panOnScrollMode:n,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(rF(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();let h=i.property("__zoom").k||1;if(c.ctrlKey&&s){let e=el(c),t=h*Math.pow(2,rB(c));r.scaleTo(i,t,e,c);return}let p=1===c.deltaMode?20:1,f=n===d.Vertical?0:c.deltaX*p,g=n===d.Horizontal?0:c.deltaY*p;!i_()&&c.shiftKey&&n!==d.Vertical&&(f=c.deltaY*p,g=0),r.translateBy(i,-(f/h)*o,-(g/h)*o,{internal:!0});let m=r_(i.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(c,m),e.panScrollTimeout=setTimeout(()=>{u?.(c,m),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a?.(c,m))}}({zoomPanValues:u,noWheelClassName:e,d3Selection:p,d3Zoom:h,panOnScrollMode:m,panOnScrollSpeed:y,zoomOnPinch:w,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:i}){return function(r,n){let o="wheel"===r.type,s=!t&&o&&!r.ctrlKey,a=rF(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),i.call(this,r,n)}}({noWheelClassName:e,preventScrolling:b,d3ZoomHandler:f});if(p.on("wheel.zoom",T,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:i}){return r=>{if(r.sourceEvent?.internal)return;let n=r_(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=n,r.sourceEvent?.type==="mousedown"&&t(!0),i&&i?.(r.sourceEvent,n)}}({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});h.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:i,onTransformChange:r,onPanZoom:n}){return o=>{e.usedRightMouseButton=!!(i&&rI(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),n&&!o.sourceEvent?.internal&&n?.(o.sourceEvent,r_(o.transform))}}({zoomPanValues:u,panOnDrag:c,onPaneContextMenu:!!i,onPanZoom:o,onTransformChange:R});h.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:i,onDraggingChange:r,onPanZoomEnd:n,onPaneContextMenu:o}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&rI(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),n)){let t=r_(s.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{n?.(s.sourceEvent,t)},150*!!i)}}}({zoomPanValues:u,panOnDrag:c,panOnScroll:n,onPaneContextMenu:i,onPanZoomEnd:a,onDraggingChange:l});h.on("end",r)}let O=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:i,panOnDrag:r,panOnScroll:n,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u,connectionInProgress:d}){return c=>{let h=e||t,p=i&&c.ctrlKey,f="wheel"===c.type;if(1===c.button&&"mousedown"===c.type&&(rF(c,`${u}-flow__node`)||rF(c,`${u}-flow__edge`)))return!0;if(!r&&!h&&!n&&!o&&!i||s||d&&!f||rF(c,a)&&f||rF(c,l)&&(!f||n&&f&&!e)||!i&&c.ctrlKey&&f)return!1;if(!i&&"touchstart"===c.type&&c.touches?.length>1)return c.preventDefault(),!1;if(!h&&!n&&!p&&f||!r&&("mousedown"===c.type||"touchstart"===c.type)||Array.isArray(r)&&!r.includes(c.button)&&"mousedown"===c.type)return!1;let g=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||f)&&g}}({zoomActivationKeyPressed:S,panOnDrag:c,zoomOnScroll:C,panOnScroll:n,zoomOnDoubleClick:x,zoomOnPinch:w,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:k,connectionInProgress:E});h.filter(O),x?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)},destroy:v,setViewport:async function e(e,t){let i=rA(e);return await m(i,t),new Promise(e=>e(i))},setViewportConstrained:y,getViewport:function(){let e=p?tW(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise(i=>{h?.interpolate(t?.interpolate==="linear"?t0:eS).scaleTo(rN(p,t?.duration,t?.ease,()=>i(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise(i=>{h?.interpolate(t?.interpolate==="linear"?t0:eS).scaleBy(rN(p,t?.duration,t?.ease,()=>i(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){h?.scaleExtent(e)},setTranslateExtent:function(e){h?.translateExtent(e)},syncViewport:function(e){if(p){let t=rA(e),i=p.property("__zoom");(i.k!==e.zoom||i.x!==e.x||i.y!==e.y)&&h?.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){let t=!iR(e)||e<0?0:e;h?.clickDistance(t)}}}(a=g||(g={})).Line="line",a.Handle="handle";let rH=["top-left","top-right","bottom-left","bottom-right"],rz=["top","right","bottom","left"];function rj(e){let t=e.includes("right")||e.includes("left"),i=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:i,affectsX:e.includes("left"),affectsY:e.includes("top")}}function rG(e,t){return Math.max(0,t-e)}function rW(e,t){return Math.max(0,e-t)}function rU(e,t,i){return Math.max(0,t-e,e-i)}let r$={width:0,height:0,x:0,y:0},rq={...r$,pointerX:0,pointerY:0,aspectRatio:1};function rK({domNode:e,nodeId:t,getStoreItems:i,onChange:r,onEnd:n}){let o=ea(e),s={controlDirection:rj("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:l,resizeDirection:u,onResizeStart:d,onResize:c,onResizeEnd:h,shouldResize:p}){let f,g,m,v,y={...r$},b={...rq};s={boundaries:a,resizeDirection:u,keepAspectRatio:l,controlDirection:rj(e)};let w=null,C=[],x=!1,S=eC().on("start",e=>{let{nodeLookup:r,transform:n,snapGrid:o,snapToGrid:s,nodeOrigin:a,paneDomNode:l}=i();if(!(f=r.get(t)))return;w=l?.getBoundingClientRect()??null;let{xSnapped:u,ySnapped:c}=iH(e.sourceEvent,{transform:n,snapGrid:o,snapToGrid:s,containerBounds:w});if(b={...y={width:f.measured.width??0,height:f.measured.height??0,x:f.position.x??0,y:f.position.y??0},pointerX:u,pointerY:c,aspectRatio:y.width/y.height},g=void 0,f.parentId&&("parent"===f.extent||f.expandParent)){var h;m=(g=r.get(f.parentId))&&"parent"===f.extent?[[0,0],[(h=g).measured.width,h.measured.height]]:void 0}for(let[e,i]of(C=[],v=void 0,r))if(i.parentId===t&&(C.push({id:e,position:{...i.position},extent:i.extent}),"parent"===i.extent||i.expandParent)){let e=function(e,t,i){let r=t.position.x+e.position.x,n=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=i[0]*o,l=i[1]*s;return[[r-a,n-l],[r+o-a,n+s-l]]}(i,f,i.origin??a);v=v?[[Math.min(e[0][0],v[0][0]),Math.min(e[0][1],v[0][1])],[Math.max(e[1][0],v[1][0]),Math.max(e[1][1],v[1][1])]]:e}d?.(e,{...y})}).on("drag",e=>{let{transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:a}=i(),l=iH(e.sourceEvent,{transform:t,snapGrid:n,snapToGrid:o,containerBounds:w}),u=[];if(!f)return;let{x:d,y:h,width:S,height:k}=y,R={},E=f.origin??a,{width:P,height:M,x:D,y:T}=function(e,t,i,r,n,o,s,a){var l,u,d,c;let{affectsX:h,affectsY:p}=t,{isHorizontal:f,isVertical:g}=t,m=f&&g,{xSnapped:v,ySnapped:y}=i,{minWidth:b,maxWidth:w,minHeight:C,maxHeight:x}=r,{x:S,y:k,width:R,height:E,aspectRatio:P}=e,M=Math.floor(f?v-e.pointerX:0),D=Math.floor(g?y-e.pointerY:0),T=R+(h?-M:M),O=E+(p?-D:D),_=-o[0]*R,A=-o[1]*E,F=rU(T,b,w),I=rU(O,C,x);if(s){let e=0,t=0;h&&M<0?e=rG(S+M+_,s[0][0]):!h&&M>0&&(e=rW(S+T+_,s[1][0])),p&&D<0?t=rG(k+D+A,s[0][1]):!p&&D>0&&(t=rW(k+O+A,s[1][1])),F=Math.max(F,e),I=Math.max(I,t)}if(a){let e=0,t=0;h&&M>0?e=rW(S+M,a[0][0]):!h&&M<0&&(e=rG(S+T,a[1][0])),p&&D>0?t=rW(k+D,a[0][1]):!p&&D<0&&(t=rG(k+O,a[1][1])),F=Math.max(F,e),I=Math.max(I,t)}if(n){if(f){(F=Math.max(F,rU(T/P,C,x)*P),s)&&(F=Math.max(F,(h||p)&&(!h||p||!m)?rG(k+A+(h?M:-M)/P,s[0][1])*P:rW(k+A+T/P,s[1][1])*P));a&&(F=Math.max(F,(h||p)&&(!h||p||!m)?rW(k+(h?M:-M)/P,a[0][1])*P:rG(k+T/P,a[1][1])*P))}if(g){(I=Math.max(I,rU(O*P,b,w)/P),s)&&(I=Math.max(I,(h||p)&&(!p||h||!m)?rG(S+(p?D:-D)*P+_,s[0][0])/P:rW(S+O*P+_,s[1][0])/P));a&&(I=Math.max(I,(h||p)&&(!p||h||!m)?rW(S+(p?D:-D)*P,a[0][0])/P:rG(S+O*P,a[1][0])/P))}}D+=D<0?I:-I,M+=M<0?F:-F,n&&(m?T>O*P?D=((l=h,u=p,l?!u:u)?-M:M)/P:M=((d=h,c=p,d?!c:c)?-D:D)*P:f?(D=M/P,p=h):(M=D*P,h=p));let L=h?S+M:S,N=p?k+D:k;return{width:R+(h?-M:M),height:E+(p?-D:D),x:o[0]*M*(h?-1:1)+L,y:o[1]*D*(p?-1:1)+N}}(b,s.controlDirection,l,s.boundaries,s.keepAspectRatio,E,m,v),O=P!==S,_=M!==k,A=D!==d&&O,F=T!==h&&_;if(!A&&!F&&!O&&!_)return;if((A||F||1===E[0]||1===E[1])&&(R.x=A?D:y.x,R.y=F?T:y.y,y.x=R.x,y.y=R.y,C.length>0)){let e=D-d,t=T-h;for(let i of C)i.position={x:i.position.x-e+E[0]*(P-S),y:i.position.y-t+E[1]*(M-k)},u.push(i)}if((O||_)&&(R.width=O&&(!s.resizeDirection||"horizontal"===s.resizeDirection)?P:y.width,R.height=_&&(!s.resizeDirection||"vertical"===s.resizeDirection)?M:y.height,y.width=R.width,y.height=R.height),g&&f.expandParent){let e=E[0]*(R.width??0);R.x&&R.x<e&&(y.x=e,b.x=b.x-(R.x-e));let t=E[1]*(R.height??0);R.y&&R.y<t&&(y.y=t,b.y=b.y-(R.y-t))}let I=function({width:e,prevWidth:t,height:i,prevHeight:r,affectsX:n,affectsY:o}){let s=e-t,a=i-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&n&&(l[0]=-1*l[0]),a&&o&&(l[1]=-1*l[1]),l}({width:y.width,prevWidth:S,height:y.height,prevHeight:k,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),L={...y,direction:I};!1!==p?.(e,L)&&(x=!0,c?.(e,L),r(R,u))}).on("end",e=>{x&&(h?.(e,{...y}),n?.({...y}),x=!1)});o.call(S)},destroy:function(){o.on(".drag",null)}}}e.s(["ConnectionLineType",()=>h,"ConnectionMode",()=>u,"MarkerType",()=>p,"PanOnScrollMode",()=>d,"Position",()=>f,"ResizeControlVariant",()=>g,"SelectionMode",()=>c,"XYDrag",()=>rR,"XYHandle",()=>rT,"XYMinimap",()=>rO,"XYPanZoom",()=>rV,"XYResizer",()=>rK,"XY_RESIZER_HANDLE_POSITIONS",()=>rH,"XY_RESIZER_LINE_POSITIONS",()=>rz,"addEdge",()=>i2,"adoptUserNodes",()=>rf,"areConnectionMapsEqual",()=>t6,"areSetsEqual",()=>iN,"calculateNodePosition",()=>iu,"createMarkerIds",()=>rn,"defaultAriaLabelConfig",()=>t3,"devWarn",()=>iE,"elementSelectionKeys",()=>t5,"errorMessages",()=>t1,"evaluateAbsolutePosition",()=>iL,"fitViewport",()=>il,"getBezierEdgeCenter",()=>iK,"getBezierPath",()=>iY,"getBoundsOfRects",()=>ix,"getConnectionStatus",()=>t9,"getDimensions",()=>iz,"getEdgePosition",()=>i9,"getEdgeToolbarTransform",()=>rl,"getElementsToRemove",()=>id,"getElevatedEdgeZIndex",()=>iJ,"getEventPosition",()=>i$,"getHandlePosition",()=>rt,"getHostForElement",()=>ij,"getInternalNodesBounds",()=>is,"getMarkerId",()=>rr,"getNodeDimensions",()=>iF,"getNodeToolbarTransform",()=>ro,"getNodesBounds",()=>io,"getNodesInside",()=>ia,"getOverlappingArea",()=>iS,"getSmoothStepPath",()=>i6,"getStraightPath",()=>i5,"getViewportForBounds",()=>iO,"handleConnectionChange",()=>t7,"handleExpandParent",()=>rv,"infiniteExtent",()=>t2,"initialConnection",()=>t4,"isEdgeBase",()=>ie,"isEdgeVisible",()=>i0,"isInputDOMNode",()=>iW,"isMacOs",()=>i_,"isMouseEvent",()=>iU,"isNodeBase",()=>it,"isNumeric",()=>iR,"isRectObject",()=>ik,"mergeAriaLabelConfig",()=>iV,"nodeHasDimensions",()=>iI,"nodeToRect",()=>iw,"panBy",()=>rb,"pointToRendererPoint",()=>iM,"rendererPointToPoint",()=>iD,"shallowNodeData",()=>rx,"snapPosition",()=>iP,"updateAbsolutePositions",()=>rh,"updateConnectionLookup",()=>rC,"updateNodeInternals",()=>ry,"withResolvers",()=>iB],292002)},523043,81167,e=>{"use strict";var t=e.i(35380),i=e.i(292002);function r(e,t,i=1e3){let n=new Set,o={},s=(e,i)=>{if(!(i<0)&&(null==o[e]||!(o[e]>=i))){for(let r of(o[e]=i,t(e)))s(r,i-1);n.add(e)}};for(let t of e)s(t,i);return n}function n(...e){let t=new Set;return e.forEach(e=>{e.forEach(e=>{t.add(e)})}),t}function o(e){return"lineageGraphNode"===e.type}function s(e){return"lineageGraphColumnNode"===e.type}function a(e,t,i){let r={},n={},o=(e,t)=>({id:e,data:{id:e,name:e,from:t,data:{base:void 0,current:void 0},parents:{},children:{}},type:"lineageGraphNode"});for(let[t,i]of Object.entries(e.nodes))r[t]=o(t,"base"),i&&(r[t].data.data.base=i,r[t].data.name=i.name,r[t].data.resourceType=i.resource_type,r[t].data.packageName=i.package_name);for(let[e,i]of Object.entries(t.nodes))r[e]?r[e].data.from="both":r[e]=o(e,"current"),i&&(r[e].data.data.current=t.nodes[e],r[e].data.name=i.name,r[e].data.resourceType=i.resource_type,r[e].data.packageName=i.package_name);for(let[t,i]of Object.entries(e.parent_map))for(let e of i){let i=r[t],o=r[e],s=`${e}_${t}`;if(!i||!o)continue;n[s]={id:s,source:o.id,target:i.id,data:{from:"base"}};let a=n[s];i.data.parents[e]=a,o.data.children[t]=a}for(let[e,i]of Object.entries(t.parent_map))for(let t of i){let i=r[e],o=r[t],s=`${t}_${e}`;if(!i||!o)continue;let a=n[s];a?.data&&n[s].data?n[s].data.from="both":n[s]={id:s,source:o.id,target:i.id,data:{from:"current"}};let l=n[s];i.data.parents[t]=l,o.data.children[e]=l}let s=[];for(let[e,t]of Object.entries(r)){let r=i?.[e];if(r)t.data.changeStatus=r.change_status,r.change&&(t.data.change={category:r.change.category,columns:r.change.columns}),s.push(e);else if("base"===t.data.from)t.data.changeStatus="removed",s.push(t.id);else if("current"===t.data.from)t.data.changeStatus="added",s.push(t.id);else{let e=t.data.data.base?.checksum?.checksum,i=t.data.data.current?.checksum?.checksum;e&&i&&e!==i&&(t.data.changeStatus="modified",s.push(t.id))}}for(let[,e]of Object.entries(n))e.data&&("base"===e.data.from?e.data.changeStatus="removed":"current"===e.data.from&&(e.data.changeStatus="added"));return{nodes:r,edges:n,modifiedSet:s,manifestMetadata:{base:e.manifest_metadata??void 0,current:t.manifest_metadata??void 0},catalogMetadata:{base:e.catalog_metadata??void 0,current:t.catalog_metadata??void 0}}}function l(e,t,i=1e3){return r(t,t=>void 0===e.nodes[t]?[]:Object.keys(e.nodes[t].data.parents),i)}function u(e,t,i=1e3){return r(t,t=>void 0===e.nodes[t]?[]:Object.keys(e.nodes[t].data.children),i)}function d(e,t){let r=[],n=[],{selectedNodes:o,cll:s}=t??{},a={};function l(e){return"base"===e?0:"current"===e?2:1}function u(e,t){let i=l(e.data?.from),r=l(t.data?.from);return i<r?-1:+(i>r)}let d=void 0!==o?new Set(o):void 0;for(let t of Object.values(e.nodes).sort(u)){if(d&&!d.has(t.id))continue;let e=new Set,o=0;if(s){let a=s.current;for(let e of a?.parent_map[t.id]??new Set){let i=t.id;n.push({id:`m2c_${e}_${i}`,source:e,target:i,style:{zIndex:9999}})}for(let a of Object.keys(t.data.data.current?.columns??{})){let l=`${t.id}_${a}`,u=s.current,d=u?.columns[l],c=u?.parent_map[l]??new Set;if(null!=d){for(let e of(r.push({id:l,position:{x:10,y:70+20*o},parentId:t.id,extent:"parent",draggable:!1,className:"no-track-pii-safe",data:{node:t.data,column:d.name,type:d.type,transformationType:d.transformation_type,changeStatus:d.change_status},style:{zIndex:9999},type:"lineageGraphColumnNode",targetPosition:i.Position.Left,sourcePosition:i.Position.Right}),c))n.push({id:`${e}_${l}`,source:e,target:l,style:{zIndex:9999}});o++,e.add(d.name)}}}a[t.id]=e;let l=60;o>0&&(l+=20+20*o),r.unshift({id:t.id,position:{x:0,y:0},width:300,height:l,className:"no-track-pii-safe",data:{...t.data},type:"lineageGraphNode",targetPosition:i.Position.Left,sourcePosition:i.Position.Right,style:{width:300,height:l}})}for(let t of Object.values(e.edges).sort(u))(!d||d.has(t.source)&&d.has(t.target))&&n.push({id:t.id,type:"lineageGraphEdge",source:t.source,target:t.target,data:{...t.data}});return c(r,n),[r,n,a]}e.s(["getNeighborSet",()=>r,"union",()=>n],81167);let c=(e,i,r="LR")=>{let n=new t.default.graphlib.Graph;n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:r,ranksep:50,nodesep:30}),e.forEach(e=>{if(!o(e))return;let t=300,i=60;e.style?.height&&e.style.width&&(t=parseInt(String(e.style.width),10),i=parseInt(String(e.style.height),10)),n.setNode(e.id,{width:t,height:i})}),i.forEach(e=>{n.setEdge(e.source,e.target)}),t.default.layout(n),e.forEach(e=>{if(!o(e))return;let t=e.style?.width??300,i=e.style?.height??60,r=n.node(e.id);return e.position={x:r.x-Number(t)/2,y:r.y-Number(i)/2},e})};e.s(["COLUMN_HEIGHT",0,20,"buildLineageGraph",()=>a,"isLineageGraphColumnNode",()=>s,"isLineageGraphNode",()=>o,"layout",0,c,"selectDownstream",()=>u,"selectUpstream",()=>l,"toReactFlow",()=>d],523043)},893970,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={assign:function(){return l},searchParamsToUrlQuery:function(){return o},urlQueryToSearchParams:function(){return a}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});function o(e){let t={};for(let[i,r]of e.entries()){let e=t[i];void 0===e?t[i]=r:Array.isArray(e)?e.push(r):t[i]=[e,r]}return t}function s(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function a(e){let t=new URLSearchParams;for(let[i,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)t.append(i,s(e));else t.set(i,s(r));return t}function l(e,...t){for(let i of t){for(let t of i.keys())e.delete(t);for(let[t,r]of i.entries())e.append(t,r)}return e}},492148,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={formatUrl:function(){return a},formatWithValidation:function(){return u},urlObjectKeys:function(){return l}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let o=e.r(744066)._(e.r(893970)),s=/https?|ftp|gopher|file/;function a(e){let{auth:t,hostname:i}=e,r=e.protocol||"",n=e.pathname||"",a=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:i&&(u=t+(~i.indexOf(":")?`[${i}]`:i),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(o.urlQueryToSearchParams(l)));let d=e.search||l&&`?${l}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||s.test(r))&&!1!==u?(u="//"+(u||""),n&&"/"!==n[0]&&(n="/"+n)):u||(u=""),a&&"#"!==a[0]&&(a="#"+a),d&&"?"!==d[0]&&(d="?"+d),n=n.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${r}${u}${n}${d}${a}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return a(e)}},341607,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"useMergedRef",{enumerable:!0,get:function(){return n}});let r=e.r(187725);function n(e,t){let i=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=i.current;e&&(i.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(i.current=o(e,r)),t&&(n.current=o(t,r))},[e,t])}function o(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let i=e(t);return"function"==typeof i?i:()=>e(null)}}("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},148982,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={DecodeError:function(){return v},MiddlewareNotFoundError:function(){return C},MissingStaticPage:function(){return w},NormalizeError:function(){return y},PageNotFoundError:function(){return b},SP:function(){return g},ST:function(){return m},WEB_VITALS:function(){return o},execOnce:function(){return s},getDisplayName:function(){return c},getLocationOrigin:function(){return u},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return h},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return x}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let o=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,i=!1;return(...r)=>(i||(i=!0,t=e(...r)),t)}let a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>a.test(e);function u(){let{protocol:e,hostname:t,port:i}=window.location;return`${e}//${t}${i?":"+i:""}`}function d(){let{href:e}=window.location,t=u();return e.substring(t.length)}function c(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function h(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let i=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(i&&h(i))return r;if(!r)throw Object.defineProperty(Error(`"${c(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let g="undefined"!=typeof performance,m=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class v extends Error{}class y extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class w extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class C extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function x(e){return JSON.stringify({message:e.message,stack:e.stack})}},560657,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"isLocalURL",{enumerable:!0,get:function(){return o}});let r=e.r(148982),n=e.r(949879);function o(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),i=new URL(e,t);return i.origin===t&&(0,n.hasBasePath)(i.pathname)}catch(e){return!1}}},256716,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},721739,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={default:function(){return v},useLinkStatus:function(){return b}};for(var n in r)Object.defineProperty(i,n,{enumerable:!0,get:r[n]});let o=e.r(744066),s=e.r(19483),a=o._(e.r(187725)),l=e.r(492148),u=e.r(994590),d=e.r(341607),c=e.r(148982),h=e.r(182090);e.r(585190);let p=e.r(388618),f=e.r(560657),g=e.r(984183);function m(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function v(t){var i;let r,n,o,[l,v]=(0,a.useOptimistic)(p.IDLE_LINK_STATUS),b=(0,a.useRef)(null),{href:w,as:C,children:x,prefetch:S=null,passHref:k,replace:R,shallow:E,scroll:P,onClick:M,onMouseEnter:D,onTouchStart:T,legacyBehavior:O=!1,onNavigate:_,ref:A,unstable_dynamicOnHover:F,...I}=t;r=x,O&&("string"==typeof r||"number"==typeof r)&&(r=(0,s.jsx)("a",{children:r}));let L=a.default.useContext(u.AppRouterContext),N=!1!==S,B=!1!==S?null===(i=S)||"auto"===i?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:V,as:H}=a.default.useMemo(()=>{let e=m(w);return{href:e,as:C?m(C):e}},[w,C]);if(O){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=a.default.Children.only(r)}let z=O?n&&"object"==typeof n&&n.ref:A,j=a.default.useCallback(e=>(null!==L&&(b.current=(0,p.mountLinkInstance)(e,V,L,B,N,v)),()=>{b.current&&((0,p.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,p.unmountPrefetchableInstance)(e)}),[N,V,L,B,v]),G={ref:(0,d.useMergedRef)(j,z),onClick(t){O||"function"!=typeof M||M(t),O&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!L||t.defaultPrevented||function(t,i,r,n,o,s,l){if("undefined"!=typeof window){let u,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(i)){o&&(t.preventDefault(),location.replace(i));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:c}=e.r(793848);a.default.startTransition(()=>{c(r||i,o?"replace":"push",s??!0,n.current)})}}(t,V,H,b,R,P,_)},onMouseEnter(e){O||"function"!=typeof D||D(e),O&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),L&&N&&(0,p.onNavigationIntent)(e.currentTarget,!0===F)},onTouchStart:function(e){O||"function"!=typeof T||T(e),O&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),L&&N&&(0,p.onNavigationIntent)(e.currentTarget,!0===F)}};return(0,c.isAbsoluteUrl)(H)?G.href=H:O&&!k&&("a"!==n.type||"href"in n.props)||(G.href=(0,h.addBasePath)(H)),o=O?a.default.cloneElement(n,G):(0,s.jsx)("a",{...I,...G,children:r}),(0,s.jsx)(y.Provider,{value:l,children:o})}e.r(256716);let y=(0,a.createContext)(p.IDLE_LINK_STATUS),b=()=>(0,a.useContext)(y);("function"==typeof i.default||"object"==typeof i.default&&null!==i.default)&&void 0===i.default.__esModule&&(Object.defineProperty(i.default,"__esModule",{value:!0}),Object.assign(i.default,i),t.exports=i.default)},180806,e=>{"use strict";e.s(["RECCE_SUPPORT_CALENDAR_URL",0,"https://cal.com/team/recce/chat"])},23995,928296,e=>{"use strict";var t=e.i(19483),i=e.i(76130),r=e.i(11321),n=e.i(772510),o=e.i(845209),s=e.i(427938),a=e.i(721739),l=e.i(180806);function u(e,t="verbose"){let i,r={hours:Math.floor((i=Math.floor(e))/3600),minutes:Math.floor(i%3600/60),seconds:i%60};return"compact"===t?function({hours:e,minutes:t,seconds:i}){return e>0?`${e}:${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${t}:${i.toString().padStart(2,"0")}`}(r):function({hours:e,minutes:t,seconds:i}){let r=[];return e>0&&r.push(`${e} hour${1!==e?"s":""}`),t>0&&r.push(`${t} min${1!==t?"s":""}`),0===e&&(0===r.length||i>0)&&r.push(`${i} second${1!==i?"s":""}`),r.join(" ")}(r)}function d({connect:e,idleSeconds:a}){let l=null!=a&&a>0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{children:"Server Disconnected"}),(0,t.jsx)(n.default,{children:l?(0,t.jsxs)(s.default,{children:["The server has been idle for ",u(a)," and was automatically stopped. Please restart the Recce server to continue."]}):(0,t.jsx)(s.default,{children:"The server connection has been lost. Please restart the Recce server and try again."})}),(0,t.jsx)(r.default,{children:(0,t.jsx)(i.default,{color:"iochmara",variant:"contained",onClick:()=>{e()},children:"Retry"})})]})}function c({shareUrl:e,mode:u}){let d={"read only":{title:"Share Instance Expired",body:"This Share Instance has expired. Please restart the share instance.",action:"Restart",link:e},"metadata only":{title:"Preview Instance Expired",body:"This Preview Instance has expired. To browse more, please book a meeting with us.",action:"Contact us",link:l.RECCE_SUPPORT_CALENDAR_URL}}[u];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{children:d.title}),(0,t.jsx)(n.default,{children:(0,t.jsx)(s.default,{children:d.body})}),(0,t.jsx)(r.default,{children:"read only"===u?(0,t.jsx)(a.default,{href:d.link,passHref:!0,children:(0,t.jsx)(i.default,{color:"iochmara",variant:"contained",children:d.action})}):(0,t.jsx)(i.default,{color:"iochmara",variant:"contained",onClick:()=>window.open(d.link,"_blank"),children:d.action})})]})}e.s(["formatDuration",()=>u],928296),e.s(["RecceInstanceDisconnectedModalContent",()=>c,"ServerDisconnectedModalContent",()=>d],23995)},912007,473788,e=>{"use strict";var t=e.i(19483),i=e.i(187725),r=e.i(830520);let n={mode:null,disableSaveToFile:!1,disableExportStateFile:!1,disableImportStateFile:!1,disableUpdateChecklist:!1,disableDatabaseQuery:!1,disableViewActionDropdown:!1,disableNodeActionDropdown:!1,disableShare:!1},o=(0,i.createContext)({singleEnv:!1,authed:!1,lifetimeExpiredAt:void 0,featureToggles:n,shareUrl:void 0,sessionId:void 0});function s({children:e}){let{data:s,isLoading:a}=(0,r.useRecceInstanceInfo)(),[l,u]=(0,i.useState)(n),[d,c]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(),[m,v]=(0,i.useState)(),[y,b]=(0,i.useState)(),[w,C]=(0,i.useState)(s);if(!a&&s&&s!==w){C(s),c(s.single_env),p(s.authed),v(s.share_url),b(s.session_id),s.lifetime_expired_at&&(g(new Date(s.lifetime_expired_at)),console.log("lifetime expired at",s.lifetime_expired_at));let e={...n};"read-only"===s.server_mode?(e.mode="read only",e.disableSaveToFile=!0,e.disableExportStateFile=!0,e.disableImportStateFile=!0,e.disableUpdateChecklist=!0,e.disableDatabaseQuery=!0,e.disableViewActionDropdown=!0,e.disableNodeActionDropdown=!0,e.disableShare=!0):"preview"===s.server_mode&&(e.mode="metadata only",e.disableSaveToFile=!0,e.disableExportStateFile=!0,e.disableImportStateFile=!0,e.disableUpdateChecklist=!1,e.disableDatabaseQuery=!0,e.disableViewActionDropdown=!1,e.disableNodeActionDropdown=!1,e.disableShare=!0),s.single_env&&(e.disableUpdateChecklist=!0,e.disableShare=!0),s.cloud_instance&&(e.disableShare=!0),u(e)}return(0,t.jsx)(o.Provider,{value:{featureToggles:l,singleEnv:d,authed:h,lifetimeExpiredAt:f,shareUrl:m,sessionId:y},children:e})}e.s(["RecceInstanceInfoProvider",()=>s,"useRecceInstanceContext",0,()=>(0,i.useContext)(o)],912007);var a=e.i(705443);async function l(){return(await a.axiosClient.get("/api/flag")).data}async function u(){try{await a.axiosClient.post("/api/relaunch-hint/completed")}catch(e){}}e.s(["getServerFlag",()=>l,"markRelaunchHintCompleted",()=>u],473788)},838208,e=>{"use strict";let{Axios:t,AxiosError:i,CanceledError:r,isCancel:n,CancelToken:o,VERSION:s,all:a,Cancel:l,isAxiosError:u,spread:d,toFormData:c,AxiosHeaders:h,HttpStatusCode:p,formToJSON:f,getAdapter:g,mergeConfig:m}=e.i(31368).default;e.s(["AxiosError",()=>i,"isAxiosError",()=>u])},420856,e=>{"use strict";e.i(838208);var t=e.i(705443);async function i(){return(await t.axiosClient.get("/api/info")).data}async function r(e){return(await t.axiosClient.get(`/api/model/${e}`)).data}e.s(["getModelInfo",()=>r,"getServerInfo",()=>i])},484404,(e,t,i)=>{!function(r,n){"use strict";var o="function",s="undefined",a="object",l="string",u="model",d="name",c="type",h="vendor",p="version",f="architecture",g="console",m="mobile",v="tablet",y="smarttv",b="wearable",w="embedded",C="Amazon",x="Apple",S="ASUS",k="BlackBerry",R="Browser",E="Chrome",P="Firefox",M="Google",D="Huawei",T="Microsoft",O="Motorola",_="Opera",A="Samsung",F="Sharp",I="Sony",L="Xiaomi",N="Zebra",B="Facebook",V=function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i},H=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},z=function(e,t){return typeof e===l&&-1!==j(t).indexOf(j(e))},j=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},W=function(e,t){for(var i,r,n,s,l,u,d=0;d<t.length&&!l;){var c=t[d],h=t[d+1];for(i=r=0;i<c.length&&!l;)if(l=c[i++].exec(e))for(n=0;n<h.length;n++)u=l[++r],typeof(s=h[n])===a&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):void 0:this[s[0]]=u?s[1].call(this,u,s[2]):void 0:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):void 0):this[s]=u||void 0;d+=2}},U=function(e,t){for(var i in t)if(typeof t[i]===a&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(z(t[i][r],e))return"?"===i?void 0:i}else if(z(t[i],e))return"?"===i?void 0:i;return e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,_+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,_]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+R],p],[/\bfocus\/([\w\.]+)/i],[p,[d,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,_+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,_+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[p,[d,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+R]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+R],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,B],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,E+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,U,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,j]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,A],[c,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,A],[c,m]],[/((ipod|iphone)\d+,\d+)/i],[u,[h,x],[c,m]],[/(ipad\d+,\d+)/i],[u,[h,x],[c,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[h,x],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,x],[c,v]],[/(macintosh);/i],[u,[h,x]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,D],[c,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,D],[c,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,L],[c,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,L],[c,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[c,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,O],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,O],[c,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,"LG"],[c,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,"LG"],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[c,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[c,m]],[/(pixel c)\b/i],[u,[h,M],[c,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,M],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,I],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,I],[c,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,C],[c,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,C],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[c,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,k],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,S],[c,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,S],[c,m]],[/(nexus 9)/i],[u,[h,"HTC"],[c,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[c,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[c,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,F],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[c,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[c,v]],[/(surface duo)/i],[u,[h,T],[c,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[c,m]],[/(u304aa)/i],[u,[h,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[c,v]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[c,v]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[c,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[c,v]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[c,v]],[/\b(k88) b/i],[u,[h,"ZTE"],[c,v]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[c,v]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[c,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[c,v]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[c,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[c,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[c,m]],[/\b(ph-1) /i],[u,[h,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[c,v]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[c,v]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[c,v]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[c,v]],[/(sprint) (\w+)/i],[h,u,[c,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,T],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,N],[c,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,N],[c,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[c,g]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[c,g]],[/(playstation [345portablevi]+)/i],[u,[h,I],[c,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,T],[c,g]],[/smart-tv.+(samsung)/i],[h,[c,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,A],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,"LG"],[c,y]],[/(apple) ?tv/i],[h,[u,x+" TV"],[c,y]],[/crkey/i],[[u,E+"cast"],[h,M],[c,y]],[/droid.+aft(\w)( bui|\))/i],[u,[h,C],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,F],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,I],[c,y]],[/(mitv-\w{5}) bui/i],[u,[h,L],[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[h,G],[u,G],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/((pebble))app/i],[h,u,[c,b]],[/droid.+; (glass) \d/i],[u,[h,M],[c,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,N],[c,b]],[/(quest( 2)?)/i],[u,[h,B],[c,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[c,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[c,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,U,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,U,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,E+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},K=function(e,t){if(typeof e===a&&(t=e,e=void 0),!(this instanceof K))return new K(e,t).getResult();var i=e||(typeof r!==s&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?V(q,t):q;return this.getBrowser=function(){var e,t={};return t[d]=void 0,t[p]=void 0,W.call(t,i,n.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,t},this.getCPU=function(){var e={};return e[f]=void 0,W.call(e,i,n.cpu),e},this.getDevice=function(){var e={};return e[h]=void 0,e[u]=void 0,e[c]=void 0,W.call(e,i,n.device),e},this.getEngine=function(){var e={};return e[d]=void 0,e[p]=void 0,W.call(e,i,n.engine),e},this.getOS=function(){var e={};return e[d]=void 0,e[p]=void 0,W.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>350?G(e,350):e,this},this.setUA(i),this};if(K.VERSION="0.7.33",K.BROWSER=H([d,p,"major"]),K.CPU=H([f]),K.DEVICE=H([u,h,c,g,m,y,v,b,w]),K.ENGINE=K.OS=H([d,p]),typeof i!==s)t.exports&&(i=t.exports=K),i.UAParser=K;else if(typeof define===o&&define.amd)e.r,void 0!==K&&e.v(K);else typeof r!==s&&(r.UAParser=K);var Q=typeof r!==s&&(r.jQuery||r.Zepto);if(Q&&!Q.ua){var X=new K;Q.ua=X.getResult(),Q.ua.get=function(){return X.getUA()},Q.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var i in t)Q.ua[i]=t[i]}}}("object"==typeof window?window:e.e)},203158,e=>{"use strict";let t,i,r,n,o;var s,a,l,u,d,c,h,p,f,g,m,v,y,b,w,C,x,S,k,R,E,P,M,D,T,O,_,A,F,I,L,N,B,V,H,z,j,G,W,U,$,q,K,Q,X,Y,Z,J,ee,et,ei,er,en,eo,es,ea,el,eu,ed=e.i(316575),ec=e.i(824627);(s=G||(G={})).SET="$set",s.SET_ONCE="$setOnce",s.ADD="$add",s.APPEND="$append",s.PREPEND="$prepend",s.REMOVE="$remove",s.PREINSERT="$preInsert",s.POSTINSERT="$postInsert",s.UNSET="$unset",s.CLEAR_ALL="$clearAll",(a=W||(W={})).IDENTIFY="$identify",a.GROUP_IDENTIFY="$groupidentify",a.REVENUE="revenue_amount";var eh="".concat("AMP","_unsent"),ep="$default_instance",ef="https://api2.amplitude.com/2/httpapi",eg="dclid",em="fbclid",ev="gbraid",ey="gclid",eb="ko_click_id",ew="li_fat_id",eC="msclkid",ex="rdt_cid",eS="ttclid",ek="twclid",eR="wbraid",eE={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},eP=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],eM=["authorization","cookie","set-cookie"],eD=function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var i=e[t];if(!eT(t,i))return!1}return!0},eT=function(e,t){var i,r;if("string"!=typeof e)return!1;if(Array.isArray(t)){var n=!0;try{for(var o=(0,ec.__values)(t),s=o.next();!s.done;s=o.next()){var a=s.value;if(Array.isArray(a))return!1;if("object"==typeof a)n=n&&eD(a);else if(!["number","string"].includes(typeof a))return!1;if(!n)return!1}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}else if(null==t)return!1;else if("object"==typeof t)return eD(t);else if(!["number","string","boolean"].includes(typeof t))return!1;return!0},eO=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return(0,ec.__assign)({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(U.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(U.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(U.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(U.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(U.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(U.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(U.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(U.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(U.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[U.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,i){if(this._validate(e,t,i)){var r=this._properties[e];return void 0===r&&(r={},this._properties[e]=r),r[t]=i,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,i){return!(void 0!==this._properties[U.CLEAR_ALL]||this._propertySet.has(t))&&(e===U.ADD?"number"==typeof i:e===U.UNSET||e===U.REMOVE||eT(t,i))},e}();(l=U||(U={})).SET="$set",l.SET_ONCE="$setOnce",l.ADD="$add",l.APPEND="$append",l.PREPEND="$prepend",l.REMOVE="$remove",l.PREINSERT="$preInsert",l.POSTINSERT="$postInsert",l.UNSET="$unset",l.CLEAR_ALL="$clearAll";var e_=[U.CLEAR_ALL,U.UNSET,U.SET,U.SET_ONCE,U.ADD,U.APPEND,U.PREPEND,U.PREINSERT,U.POSTINSERT,U.REMOVE];(u=$||($={})).Unknown="unknown",u.Skipped="skipped",u.Success="success",u.RateLimit="rate_limit",u.PayloadTooLarge="payload_too_large",u.Invalid="invalid",u.Failed="failed",u.Timeout="Timeout",u.SystemError="SystemError";var eA=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=$.Unknown),{event:e,code:t,message:i}},eF=e.i(153029),eI=(0,ec.__spreadArray)([],(0,ec.__read)(Array(256).keys()),!1).map(function(e){return e.toString(16).padStart(2,"0")}),eL=function(e){var t,i=(0,eF.getGlobalScope)();if(!(null==(t=null==i?void 0:i.crypto)?void 0:t.getRandomValues))return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,eL);var r=i.crypto.getRandomValues(new Uint8Array(16));return r[6]=15&r[6]|64,r[8]=63&r[8]|128,(0,ec.__spreadArray)([],(0,ec.__read)(r.entries()),!1).map(function(e){var t=(0,ec.__read)(e,2),i=t[0],r=t[1];return[4,6,8,10].includes(i)?"-".concat(eI[r]):eI[r]}).join("")},eN=function(){function e(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(e,t){var i,r;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(this.plugins.some(function(t){return t.name===e.name}))return this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2];return void 0===e.name&&(e.name=eL(),this.loggerProvider.warn("Plugin name is undefined. \n      Generating a random UUID for plugin name: ".concat(e.name,". \n      Set a name for the plugin to prevent it from being added multiple times."))),e.type=null!=(i=e.type)?i:"enrichment",[4,null==(r=e.setup)?void 0:r.call(e,t,this.client)];case 1:return n.sent(),this.plugins.push(e),[2]}})})},e.prototype.deregister=function(e,t){var i;return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(-1===(r=this.plugins.findIndex(function(t){return t.name===e})))return t.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2];return n=this.plugins[r],this.plugins.splice(r,1),[4,null==(i=n.teardown)?void 0:i.call(n)];case 1:return o.sent(),[2]}})})},e.prototype.reset=function(e){this.applying=!1,this.plugins.map(function(e){var t;return null==(t=e.teardown)?void 0:t.call(e)}),this.plugins=[],this.client=e},e.prototype.push=function(e){var t=this;return new Promise(function(i){t.queue.push([e,i]),t.scheduleApply(0)})},e.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout(function(){t.apply(t.queue.shift()).then(function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)})},e))},e.prototype.apply=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n,o,s,a,l,u,d,c,h,p,f,g;return(0,ec.__generator)(this,function(m){switch(m.label){case 0:if(!e)return[2];t=(0,ec.__read)(e,1)[0],i=(0,ec.__read)(e,2)[1],this.loggerProvider.log("Timeline.apply: Initial event",t),r=this.plugins.filter(function(e){return"before"===e.type}),m.label=1;case 1:m.trys.push([1,6,7,8]),o=(n=(0,ec.__values)(r)).next(),m.label=2;case 2:if(o.done)return[3,5];if(!(s=o.value).execute)return[3,4];return[4,s.execute((0,ec.__assign)({},t))];case 3:if(null===(a=m.sent()))return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(s.name),"', event: ").concat(JSON.stringify(t))),i({event:t,code:0,message:""}),[2];t=a,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(s.name),"', event: ").concat(JSON.stringify(t))),m.label=4;case 4:return o=n.next(),[3,2];case 5:return[3,8];case 6:return h={error:m.sent()},[3,8];case 7:try{o&&!o.done&&(p=n.return)&&p.call(n)}finally{if(h)throw h.error}return[7];case 8:l=this.plugins.filter(function(e){return"enrichment"===e.type||void 0===e.type}),m.label=9;case 9:m.trys.push([9,14,15,16]),d=(u=(0,ec.__values)(l)).next(),m.label=10;case 10:if(d.done)return[3,13];if(!(s=d.value).execute)return[3,12];return[4,s.execute((0,ec.__assign)({},t))];case 11:if(null===(a=m.sent()))return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(s.name),"', event: ").concat(JSON.stringify(t))),i({event:t,code:0,message:""}),[2];t=a,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(s.name),"', event: ").concat(JSON.stringify(t))),m.label=12;case 12:return d=u.next(),[3,10];case 13:return[3,16];case 14:return f={error:m.sent()},[3,16];case 15:try{d&&!d.done&&(g=u.return)&&g.call(u)}finally{if(f)throw f.error}return[7];case 16:return c=this.plugins.filter(function(e){return"destination"===e.type}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(t))),Promise.all(c.map(function(e){var i=(0,ec.__assign)({},t);return e.execute(i).catch(function(e){return eA(i,0,String(e))})})).then(function(e){var r=(0,ec.__read)(e,1)[0]||eA(t,100,"Event not tracked, no destination plugins on the instance");i(r)}),[2]}})})},e.prototype.flush=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(e){return t.apply(e)}))];case 1:return i.sent(),[4,Promise.all(this.plugins.filter(function(e){return"destination"===e.type}).map(function(e){return e.flush&&e.flush()}))];case 2:return i.sent(),[2]}})})},e.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(t){var i;null==(i=t.onIdentityChanged)||i.call(t,e)})},e.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(t){var i;null==(i=t.onSessionIdChanged)||i.call(t,e)})},e.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(t){var i;null==(i=t.onOptOutChanged)||i.call(t,e)})},e.prototype.onReset=function(){this.plugins.forEach(function(e){var t;null==(t=e.onReset)||t.call(e)})},e}(),eB=function(e,t){return(0,ec.__assign)((0,ec.__assign)({},t),{event_type:W.IDENTIFY,user_properties:e.getUserProperties()})},eV=function(e,t,i,r){var n;return(0,ec.__assign)((0,ec.__assign)({},r),{event_type:W.GROUP_IDENTIFY,group_properties:i.getUserProperties(),groups:((n={})[e]=t,n)})},eH=function(e,t,i){var r,n=new eO;return n.set(e,t),(0,ec.__assign)((0,ec.__assign)({},i),{event_type:W.IDENTIFY,user_properties:n.getUserProperties(),groups:((r={})[e]=t,r)})},ez=function(e){return{promise:e||Promise.resolve()}},ej=function(){function e(e){void 0===e&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new eN(this),this.name=e}return e.prototype._init=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}})})},e.prototype.runQueuedFunctions=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:t=this[e],this[e]=[],a.label=1;case 1:a.trys.push([1,8,9,10]),r=(i=(0,ec.__values)(t)).next(),a.label=2;case 2:if(r.done)return[3,7];if(!((n=(0,r.value)())&&"promise"in n))return[3,4];return[4,n.promise];case 3:return a.sent(),[3,6];case 4:return[4,n];case 5:a.sent(),a.label=6;case 6:return r=i.next(),[3,2];case 7:return[3,10];case 8:return o={error:a.sent()},[3,10];case 9:try{r&&!r.done&&(s=i.return)&&s.call(i)}finally{if(o)throw o.error}return[7];case 10:if(!this[e].length)return[3,12];return[4,this.runQueuedFunctions(e)];case 11:a.sent(),a.label=12;case 12:return[2]}})})},e.prototype.track=function(e,t,i){var r=(0,ec.__assign)((0,ec.__assign)((0,ec.__assign)({},"string"==typeof e?{event_type:e}:e),i),t&&{event_properties:t});return ez(this.dispatch(r))},e.prototype.identify=function(e,t){var i=eB(e,t);return ez(this.dispatch(i))},e.prototype.groupIdentify=function(e,t,i,r){var n=eV(e,t,i,r);return ez(this.dispatch(n))},e.prototype.setGroup=function(e,t,i){var r=eH(e,t,i);return ez(this.dispatch(r))},e.prototype.revenue=function(e,t){var i=(0,ec.__assign)((0,ec.__assign)({},t),{event_type:W.REVENUE,event_properties:e.getEventProperties()});return ez(this.dispatch(i))},e.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),ez())},e.prototype._addPlugin=function(e){return ez(this.timeline.register(e,this.config))},e.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),ez())},e.prototype._removePlugin=function(e){return ez(this.timeline.deregister(e,this.config))},e.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(eA(e,0,"Client not initialized"));this.process(e).then(t)},e.prototype.dispatch=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,ec.__generator)(this,function(i){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,i))})]})})},e.prototype.getOperationAppliedUserProperties=function(e){var t={};if(void 0===e)return t;var i={};return Object.keys(e).forEach(function(t){Object.values(G).includes(t)||(i[t]=e[t])}),e_.forEach(function(i){if(Object.keys(e).includes(i)){var r=e[i];switch(i){case G.CLEAR_ALL:Object.keys(t).forEach(function(e){delete t[e]});break;case G.UNSET:Object.keys(r).forEach(function(e){delete t[e]});break;case G.SET:Object.assign(t,r)}}}),Object.assign(t,i),t},e.prototype.process=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.config.optOut)return[2,eA(e,0,"Event skipped due to optOut config")];return e.event_type===W.IDENTIFY&&(t=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:t})),[4,this.timeline.push(e)];case 1:return 200===(i=n.sent()).code?this.config.loggerProvider.log(i.message):100===i.code?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return r=String(n.sent()),this.config.loggerProvider.error(r),[2,i=eA(e,0,r)];case 3:return[2]}})})},e.prototype.setOptOut=function(e){this.isReady?this._setOptOut(e):this.q.push(this._setOptOut.bind(this,!!e))},e.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},e.prototype.flush=function(){return ez(this.timeline.flush())},e.prototype.plugin=function(e){var t=this.timeline.plugins.find(function(t){return t.name===e});return void 0===t?void this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e)):t},e.prototype.plugins=function(e){return this.timeline.plugins.filter(function(t){return t instanceof e})},e}(),eG=function(e,t){var i=Math.max(t,1);return e.reduce(function(e,t,r){var n=Math.floor(r/i);return e[n]||(e[n]=[]),e[n].push(t),e},[])};(d=q||(q={}))[d.None=0]="None",d[d.Error=1]="Error",d[d.Warn=2]="Warn",d[d.Verbose=3]="Verbose",d[d.Debug=4]="Debug";var eW="Amplitude Logger ",eU=function(){function e(){this.logLevel=q.None}return e.prototype.disable=function(){this.logLevel=q.None},e.prototype.enable=function(e){void 0===e&&(e=q.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Verbose||console.log("".concat(eW,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Warn||console.warn("".concat(eW,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Error||console.error("".concat(eW,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<q.Debug||console.log("".concat(eW,"[Debug]: ").concat(e.join(" ")))},e}(),e$=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:ep,logLevel:q.Warn,loggerProvider:new eU,offline:!1,optOut:!1,serverUrl:ef,serverZone:"US",useBatch:!1}},eq=function(){function e(e){this._optOut=!1;var t,i,r,n,o=e$();this.apiKey=e.apiKey,this.flushIntervalMillis=null!=(t=e.flushIntervalMillis)?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!=(i=e.logLevel)?i:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!=(r=e.optOut)?r:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!=(n=e.useBatch)?n:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=eK(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),eK=function(e,t,i){if(void 0===e&&(e=""),void 0===t&&(t=e$().serverZone),void 0===i&&(i=e$().useBatch),e)return{serverUrl:e,serverZone:void 0};var r,n=["US","EU"].includes(t)?t:e$().serverZone;return{serverZone:n,serverUrl:(r=i,"EU"===n?r?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":r?"https://api2.amplitude.com/batch":ef)}},eQ=function(){function e(){this.sdk={metrics:{histogram:{}}}}return e.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},e}();function eX(e){return e>=200&&e<300}var eY=function(e){return void 0===e&&(e=0),(Error().stack||"").split("\n").slice(2+e).map(function(e){return e.trim()})},eZ=function(e){return function(){var t=(0,ec.__assign)({},e.config);return{logger:t.loggerProvider,logLevel:t.logLevel}}},eJ=function(e,t){var i,r;t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var n=(0,ec.__values)(t.split(".")),o=n.next();!o.done;o=n.next()){var s=o.value;if(!(s in e))return;e=e[s]}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return e},e0=function(e,t){return function(){var i,r,n={};try{for(var o=(0,ec.__values)(t),s=o.next();!s.done;s=o.next()){var a=s.value;n[a]=eJ(e,a)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n}},e1=function(e,t,i,r,n){return void 0===n&&(n=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i(),l=a.logger,u=a.logLevel;if(u&&u<q.Debug||!u||!l)return e.apply(n,o);var d={type:"invoke public method",name:t,args:o,stacktrace:eY(1),time:{start:new Date().toISOString()},states:{}};r&&d.states&&(d.states.before=r());var c=e.apply(n,o);return c&&c.promise?c.promise.then(function(){r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),l.debug(JSON.stringify(d,null,2))}):(r&&d.states&&(d.states.after=r()),d.time&&(d.time.end=new Date().toISOString()),l.debug(JSON.stringify(d,null,2))),c}};function e2(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body,null,2))}catch(e){}return t}var e5=function(){function e(e){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[],this.diagnosticsClient=null==e?void 0:e.diagnosticsClient}return e.prototype.setup=function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r=this;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:return this.config=e,this.storageKey="".concat(eh,"_").concat(this.config.apiKey.substring(0,10)),[4,null==(t=this.config.storageProvider)?void 0:t.get(this.storageKey)];case 1:return(i=n.sent())&&i.length>0&&Promise.all(i.map(function(e){return r.execute(e)})).catch(),[2,Promise.resolve(void 0)]}})})},e.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=eL()),new Promise(function(i){t.queue.push({event:e,attempts:0,callback:function(e){return i(e)},timeout:0}),t.schedule(t.config.flushIntervalMillis),t.saveEvents()})},e.prototype.removeEventsExceedFlushMaxRetries=function(e){var t=this;return e.filter(function(e){return e.attempts+=1,e.attempts<t.config.flushMaxRetries||(t.fulfillRequest([e],500,"Event rejected due to exceeded retry count"),!1)})},e.prototype.scheduleEvents=function(e){var t=this;e.forEach(function(e){t.schedule(0===e.timeout?t.config.flushIntervalMillis:e.timeout)})},e.prototype.schedule=function(e){var t=this;if(!this.config.offline&&(null===this.scheduleId||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){t.queue=t.queue.map(function(e){return e.timeout=0,e}),t.flush(!0)},e);return}},e.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},e.prototype.flush=function(e){return void 0===e&&(e=!1),(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r=this;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(this.config.offline)return this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2];if(this.flushId)return this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2];return this.flushId=this.scheduleId,this.resetSchedule(),t=[],i=[],this.queue.forEach(function(e){return 0===e.timeout?t.push(e):i.push(e)}),[4,eG(t,this.config.flushQueueSize).reduce(function(t,i){return(0,ec.__awaiter)(r,void 0,void 0,function(){return(0,ec.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),[4,this.send(i,e)];case 2:return[2,r.sent()]}})})},Promise.resolve())];case 1:return n.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},e.prototype.send=function(e,t){var i;return void 0===t&&(t=!0),(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];r={api_key:this.config.apiKey,events:e.map(function(e){var t=e.event;return t.extra,(0,ec.__rest)(t,["extra"])}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new eQ,a.label=1;case 1:return a.trys.push([1,3,,4]),n=eK(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,r)];case 2:if(null===(o=a.sent()))return this.fulfillRequest(e,0,"Unexpected error occurred"),[2];if(!t)return"body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(e2(o))):this.fulfillRequest(e,o.statusCode,o.status),[2];return this.handleResponse(o,e),[3,4];case 3:var l;return s=(l=a.sent())instanceof Error?l.message:String(l),this.config.loggerProvider.error(s),null==(i=this.diagnosticsClient)||i.recordEvent("analytics.events.unsuccessful.from.catch.error",{events:e.map(function(e){return e.event.event_type}),message:s,stack_trace:eY()}),this.handleResponse({status:$.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},e.prototype.handleResponse=function(e,t){eX(e.statusCode)||null==(i=this.diagnosticsClient)||i.recordEvent("analytics.events.unsuccessful",{events:t.map(function(e){return e.event.event_type}),code:e.statusCode,status:e.status,body:e2(e),stack_trace:eY()});var i,r=e.status;switch(r){case $.Success:this.handleSuccessResponse(e,t);break;case $.Invalid:this.handleInvalidResponse(e,t);break;case $.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case $.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.config.loggerProvider.warn("{code: 0, error: \"Status '".concat(r,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t)}},e.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},e.prototype.handleInvalidResponse=function(e,t){var i=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key"))return void this.fulfillRequest(t,e.statusCode,e.body.error);var r=new Set((0,ec.__spreadArray)((0,ec.__spreadArray)((0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(Object.values(e.body.eventsWithInvalidFields)),!1),(0,ec.__read)(Object.values(e.body.eventsWithMissingFields)),!1),(0,ec.__read)(Object.values(e.body.eventsWithInvalidIdLengths)),!1),(0,ec.__read)(e.body.silencedEvents),!1).flat()),n=t.filter(function(t,n){return!r.has(n)||void i.fulfillRequest([t],e.statusCode,e.body.error)});n.length>0&&this.config.loggerProvider.warn(e2(e));var o=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(o)},e.prototype.handlePayloadTooLargeResponse=function(e,t){if(1===t.length)return void this.fulfillRequest(t,e.statusCode,e.body.error);this.config.loggerProvider.warn(e2(e)),this.config.flushQueueSize/=2;var i=this.removeEventsExceedFlushMaxRetries(t);this.scheduleEvents(i)},e.prototype.handleRateLimitResponse=function(e,t){var i=this,r=Object.keys(e.body.exceededDailyQuotaUsers),n=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,s=new Set(r),a=new Set(n),l=new Set(o),u=t.filter(function(t,r){return t.event.user_id&&s.has(t.event.user_id)||t.event.device_id&&a.has(t.event.device_id)?void i.fulfillRequest([t],e.statusCode,e.body.error):(l.has(r)&&(t.timeout=i.throttleTimeout),!0)});u.length>0&&this.config.loggerProvider.warn(e2(e));var d=this.removeEventsExceedFlushMaxRetries(u);this.scheduleEvents(d)},e.prototype.handleOtherResponse=function(e){var t=this,i=e.map(function(e){return e.timeout=e.attempts*t.retryTimeout,e}),r=this.removeEventsExceedFlushMaxRetries(i);this.scheduleEvents(r)},e.prototype.fulfillRequest=function(e,t,i){var r,n,o;eX(t)?null==(o=this.diagnosticsClient)||o.increment("analytics.events.sent",e.length):(null==(r=this.diagnosticsClient)||r.increment("analytics.events.dropped",e.length),null==(n=this.diagnosticsClient)||n.recordEvent("analytics.events.dropped",{events:e.map(function(e){return e.event.event_type}),code:t,message:i,stack_trace:eY()})),this.removeEvents(e),e.forEach(function(e){return e.callback(eA(e.event,t,i))})},e.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(e){return e.event});this.config.storageProvider.set(this.storageKey,e)}},e.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(t){return!e.some(function(e){return e.event.insert_id===t.event.insert_id})}),this.saveEvents()},e}(),e3=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(e){return this.productId=e,this},e.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},e.prototype.setPrice=function(e){return this.price=e,this},e.prototype.setRevenueType=function(e){return this.revenueType=e,this},e.prototype.setCurrency=function(e){return this.currency=e,this},e.prototype.setRevenue=function(e){return this.revenue=e,this},e.prototype.setReceipt=function(e){return this.receipt=e,this},e.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},e.prototype.setEventProperties=function(e){return eD(e)&&(this.properties=e),this},e.prototype.getEventProperties=function(){var e=this.properties?(0,ec.__assign)({},this.properties):{};return e[K.REVENUE_PRODUCT_ID]=this.productId,e[K.REVENUE_QUANTITY]=this.quantity,e[K.REVENUE_PRICE]=this.price,e[K.REVENUE_TYPE]=this.revenueType,e[K.REVENUE_CURRENCY]=this.currency,e[K.REVENUE]=this.revenue,e[K.RECEIPT]=this.receipt,e[K.RECEIPT_SIG]=this.receiptSig,e},e}();(c=K||(K={})).REVENUE_PRODUCT_ID="$productId",c.REVENUE_QUANTITY="$quantity",c.REVENUE_PRICE="$price",c.REVENUE_TYPE="$revenueType",c.REVENUE_CURRENCY="$currency",c.REVENUE="$revenue",c.RECEIPT="$receipt",c.RECEIPT_SIG="$receiptSig";var e4=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:e8(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),e8=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},e6=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},e}(),e7=function(){return(e7=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function e9(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}"function"==typeof SuppressedError&&SuppressedError;var tt=function(e,t){var i,r,n=typeof e;if(n!==typeof t)return!1;try{for(var o=e9(["string","number","boolean","undefined"]),s=o.next();!s.done;s=o.next())if(s.value===n)return e===t}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;var a=Array.isArray(e),l=Array.isArray(t);if(a!==l)return!1;if(a&&l){for(var u=0;u<e.length;u++)if(!tt(e[u],t[u]))return!1}else{if(!tt(Object.keys(e).sort(),Object.keys(t).sort()))return!1;var d=!0;return Object.keys(e).forEach(function(i){tt(e[i],t[i])||(d=!1)}),d}return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,r=Array(i);i--;)r[i]=[t[i],e[t[i]]];return r});var ti=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=e7({},this.identity.userProperties),i=e7(e7({},this.identity),{userProperties:t});return{setUserId:function(e){return i.userId=e,this},setDeviceId:function(e){return i.deviceId=e,this},setUserProperties:function(e){return i.userProperties=e,this},setOptOut:function(e){return i.optOut=e,this},updateUserProperties:function(e){var t,r,n,o,s,a,l=i.userProperties||{};try{for(var u=e9(Object.entries(e)),d=u.next();!d.done;d=u.next()){var c=te(d.value,2),h=c[0],p=c[1];switch(h){case"$set":try{for(var f=(n=void 0,e9(Object.entries(p))),g=f.next();!g.done;g=f.next()){var m=te(g.value,2),v=m[0],y=m[1];l[v]=y}}catch(e){n={error:e}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}break;case"$unset":try{for(var b=(s=void 0,e9(Object.keys(p))),w=b.next();!w.done;w=b.next()){var v=w.value;delete l[v]}}catch(e){s={error:e}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}break;case"$clearAll":l={}}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i.userProperties=l,this},commit:function(){return e.setIdentity(i),this}}},e.prototype.getIdentity=function(){return e7({},this.identity)},e.prototype.setIdentity=function(e){var t=e7({},this.identity);this.identity=e7({},e),tt(t,this.identity)||this.listeners.forEach(function(t){t(e)})},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),tr="undefined"!=typeof globalThis?globalThis:e.g,tn=function(){function e(){this.identityStore=new ti,this.eventBridge=new e6,this.applicationContextProvider=new e4}return e.getInstance=function(t){return tr.analyticsConnectorInstances||(tr.analyticsConnectorInstances={}),tr.analyticsConnectorInstances[t]||(tr.analyticsConnectorInstances[t]=new e),tr.analyticsConnectorInstances[t]},e}(),to=function(e){return void 0===e&&(e=ep),tn.getInstance(e)},ts=function(e,t){to(t).identityStore.editIdentity().setUserId(e).commit()},ta=function(e,t){to(t).identityStore.editIdentity().setDeviceId(e).commit()},tl=function(e,t){return void 0===t&&(t=Date.now()),Date.now()-t>e},tu=function(){function e(){this.name="identity",this.type="before",this.identityStore=to().identityStore}return e.prototype.execute=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]})})},e.prototype.setup=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return e.instanceName&&(this.identityStore=to(e.instanceName).identityStore),[2]})})},e}(),td=function(){var e,t=(0,eF.getGlobalScope)();return(null==(e=null==t?void 0:t.location)?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce(function(e,t){var i=t.split("=",2),r=tc(i[0]),n=tc(i[1]);return n&&(e[r]=n),e},{}):{}},tc=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},th=function(){function e(e,t){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=t}return e.prototype.fetchConfig=function(){var e=null,t={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(e){return this.logger.debug("Remote config localstorage failed to access: ",e),Promise.resolve(t)}if(null===e)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(t);try{var i=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(i))),Promise.resolve({remoteConfig:i.remoteConfig,lastFetch:new Date(i.lastFetch)})}catch(e){return this.logger.debug("Remote config localstorage failed to parse: ",e),localStorage.removeItem(this.key),Promise.resolve(t)}},e.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(e){this.logger.debug("Remote config localstorage failed to set: ",e)}return Promise.resolve(!1)},e}(),tp=function(){function e(e,t,i,r){void 0===i&&(i="US"),this.callbackInfos=[],this.lastSuccessfulFetch=null,this.fetchPromise=null,this.apiKey=e,this.serverUrl=r||("US"===i?"https://sr-client-cfg.amplitude.com/config":"https://sr-client-cfg.eu.amplitude.com/config"),this.logger=t,this.storage=new th(e,t)}return e.prototype.subscribe=function(e,t,i){var r=eL(),n={id:r,key:e,deliveryMode:t,callback:i};return this.callbackInfos.push(n),"all"===t?this.subscribeAll(n):this.subscribeWaitForRemote(n,t.timeout),r},e.prototype.unsubscribe=function(e){var t=this.callbackInfos.findIndex(function(t){return t.id===e});return -1===t?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(t,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},e.prototype.updateConfigs=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:if(this.lastSuccessfulFetch&&Date.now()-this.lastSuccessfulFetch<3e5)return this.logger.debug("Remote config client skipping updateConfigs: Too recent"),[2];return[4,this.getOrCreateFetchPromise()];case 1:return e=i.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(i){t.sendCallback(i,e,"remote")}),[2]}})})},e.prototype.getOrCreateFetchPromise=function(){var e=this;return this.fetchPromise||(this.fetchPromise=this.fetch().then(function(t){return null!==t.remoteConfig&&(e.lastSuccessfulFetch=Date.now()),t}).finally(function(){e.fetchPromise=null})),this.fetchPromise},e.prototype.subscribeAll=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:return t=this.getOrCreateFetchPromise().then(function(t){n.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(t))),n.sendCallback(e,t,"remote"),n.storage.setConfig(t)}),i=this.storage.fetchConfig().then(function(e){return e}),[4,Promise.race([t,i])];case 1:return void 0!==(r=o.sent())&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(r))),null!==r.remoteConfig?this.sendCallback(e,r,"cache"):this.logger.debug("Remote config client skips sending callback because cache is empty (first time user).")),[4,t];case 2:return o.sent(),[2]}})})},e.prototype.subscribeWaitForRemote=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:i=new Promise(function(e,i){setTimeout(function(){i("Timeout exceeded")},t)}),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,Promise.race([this.getOrCreateFetchPromise(),i])];case 2:return r=n.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,r,"remote"),this.storage.setConfig(r),[3,5];case 3:return n.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return null!==(r=n.sent()).remoteConfig?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,r,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,r,"remote")),[3,5];case 5:return[2]}})})},e.prototype.sendCallback=function(e,t,i){var r;e.lastCallback=new Date,r=e.key?e.key.split(".").reduce(function(e,t){return null===e?e:t in e?e[t]:null},t.remoteConfig):t.remoteConfig,e.callback(r,i,t.lastFetch)},e.prototype.fetch=function(e,t){return void 0===e&&(e=3),void 0===t&&(t=1e3),(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r,n,o,s,a,l=this;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:i=t/e,r={remoteConfig:null,lastFetch:new Date},n=function(r){var n,s,a,u,d;return(0,ec.__generator)(this,function(c){switch(c.label){case 0:n=new AbortController,s=setTimeout(function(){return n.abort()},t),c.label=1;case 1:return c.trys.push([1,7,8,9]),[4,fetch(o.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:n.signal})];case 2:if((a=c.sent()).ok)return[3,4];return[4,a.text()];case 3:return u=c.sent(),o.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(a.status,": ").concat(u)),[3,6];case 4:return[4,a.json()];case 5:return[2,{value:{remoteConfig:c.sent(),lastFetch:new Date}}];case 6:return[3,9];case 7:return(d=c.sent())instanceof Error&&"AbortError"===d.name?o.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(t,"ms")):o.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),d),[3,9];case 8:return clearTimeout(s),[7];case 9:if(!(r<e-1))return[3,11];return[4,new Promise(function(e){return setTimeout(e,l.getJitterDelay(i))})];case 10:c.sent(),c.label=11;case 11:return[2]}})},o=this,s=0,u.label=1;case 1:if(!(s<e))return[3,4];return[5,n(s)];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return s++,[3,1];case 4:return[2,r]}})})},e.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},e.prototype.getUrlParams=function(){var t=encodeURIComponent(this.apiKey),i=new URLSearchParams;return i.append("config_group",e.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(t,"?").concat(i.toString())},e.CONFIG_GROUP="browser",e}(),tf="tags",tg="counters",tm="histograms",tv="events",ty="internal",tb="last_flush_timestamp",tw=function(){function e(e,t){this.dbPromise=null,this.logger=t,this.dbName="AMP_diagnostics_".concat(e.substring(0,10))}return e.isSupported=function(){var e;return(null==(e=(0,eF.getGlobalScope)())?void 0:e.indexedDB)!==void 0},e.prototype.getDB=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return this.dbPromise||(this.dbPromise=this.openDB()),[2,this.dbPromise]})})},e.prototype.openDB=function(){var e=this;return new Promise(function(t,i){var r=indexedDB.open(e.dbName,1);r.onerror=function(){e.dbPromise=null,i(Error("Failed to open IndexedDB"))},r.onsuccess=function(){var i=r.result;i.onclose=function(){e.dbPromise=null,e.logger.debug("DiagnosticsStorage: DB connection closed.")},i.onerror=function(t){e.logger.debug("DiagnosticsStorage: A global database error occurred.",t),i.close()},t(i)},r.onupgradeneeded=function(t){var i=t.target.result;e.createTables(i)}})},e.prototype.createTables=function(e){e.objectStoreNames.contains(tf)||e.createObjectStore(tf,{keyPath:"key"}),e.objectStoreNames.contains(tg)||e.createObjectStore(tg,{keyPath:"key"}),e.objectStoreNames.contains(tm)||e.createObjectStore(tm,{keyPath:"key"}),e.objectStoreNames.contains(tv)||e.createObjectStore(tv,{keyPath:"id",autoIncrement:!0}).createIndex("time_idx","time",{unique:!1}),e.objectStoreNames.contains(ty)||e.createObjectStore(ty,{keyPath:"key"})},e.prototype.setTags=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),0===Object.entries(e).length)return[2];return[4,this.getDB()];case 1:return i=(t=o.sent().transaction([tf],"readwrite")).objectStore(tf),[2,new Promise(function(r){var o=Object.entries(e);t.oncomplete=function(){r()},t.onabort=function(e){n.logger.debug("DiagnosticsStorage: Failed to set tags",e),r()},o.forEach(function(e){var t=(0,ec.__read)(e,2),r=t[0],o=t[1];i.put({key:r,value:o}).onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to set tag",r,o,e)}})})];case 2:return r=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to set tags",r),[3,3];case 3:return[2]}})})},e.prototype.incrementCounters=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),0===Object.entries(e).length)return[2];return[4,this.getDB()];case 1:return i=(t=o.sent().transaction([tg],"readwrite")).objectStore(tg),[2,new Promise(function(r){var o=Object.entries(e);t.oncomplete=function(){r()},t.onabort=function(e){n.logger.debug("DiagnosticsStorage: Failed to increment counters",e),r()},o.forEach(function(e){var t=(0,ec.__read)(e,2),r=t[0],o=t[1],s=i.get(r);s.onsuccess=function(){var e=s.result,t=e?e.value:0;i.put({key:r,value:t+o}).onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to update counter",r,e)}},s.onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to read existing counter",r,e)}})})];case 2:return r=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to increment counters",r),[3,3];case 3:return[2]}})})},e.prototype.setHistogramStats=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),0===Object.entries(e).length)return[2];return[4,this.getDB()];case 1:return i=(t=o.sent().transaction([tm],"readwrite")).objectStore(tm),[2,new Promise(function(r){var o=Object.entries(e);t.oncomplete=function(){r()},t.onabort=function(e){n.logger.debug("DiagnosticsStorage: Failed to set histogram stats",e),r()},o.forEach(function(e){var t=(0,ec.__read)(e,2),r=t[0],o=t[1],s=i.get(r);s.onsuccess=function(){var e,t=s.result;e=t?{key:r,count:t.count+o.count,min:Math.min(t.min,o.min),max:Math.max(t.max,o.max),sum:t.sum+o.sum}:{key:r,count:o.count,min:o.min,max:o.max,sum:o.sum},i.put(e).onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to set histogram stats",r,e)}},s.onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to read existing histogram stats",r,e)}})})];case 2:return r=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to set histogram stats",r),[3,3];case 3:return[2]}})})},e.prototype.addEventRecords=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),0===e.length)return[2];return[4,this.getDB()];case 1:return i=(t=o.sent().transaction([tv],"readwrite")).objectStore(tv),[2,new Promise(function(r){t.oncomplete=function(){r()},t.onabort=function(e){n.logger.debug("DiagnosticsStorage: Failed to add event records",e),r()};var o=i.count();o.onsuccess=function(){var t=Math.max(0,10-o.result);t<e.length&&n.logger.debug("DiagnosticsStorage: Only added ".concat(t," of ").concat(e.length," events due to storage limit")),e.slice(0,t).forEach(function(e){i.add(e).onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to add event record",e)}})},o.onerror=function(e){n.logger.debug("DiagnosticsStorage: Failed to count existing events",e)}})];case 2:return r=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to add event records",r),[3,3];case 3:return[2]}})})},e.prototype.setInternal=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r,n;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getDB()];case 1:return r=(i=o.sent().transaction([ty],"readwrite")).objectStore(ty),[2,new Promise(function(n,o){i.onabort=function(){return o(Error("Failed to set internal value"))};var s=r.put({key:e,value:t});s.onsuccess=function(){return n()},s.onerror=function(){return o(Error("Failed to set internal value"))}})];case 2:return n=o.sent(),this.logger.debug("DiagnosticsStorage: Failed to set internal value",n),[3,3];case 3:return[2]}})})},e.prototype.getInternal=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getDB()];case 1:return i=(t=n.sent().transaction([ty],"readonly")).objectStore(ty),[2,new Promise(function(r,n){t.onabort=function(){return n(Error("Failed to get internal value"))};var o=i.get(e);o.onsuccess=function(){return r(o.result)},o.onerror=function(){return n(Error("Failed to get internal value"))}})];case 2:return r=n.sent(),this.logger.debug("DiagnosticsStorage: Failed to get internal value",r),[2,void 0];case 3:return[2]}})})},e.prototype.getLastFlushTimestamp=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getInternal(tb)];case 1:return[2,(e=i.sent())?parseInt(e.value,10):void 0];case 2:return t=i.sent(),this.logger.debug("DiagnosticsStorage: Failed to get last flush timestamp",t),[2,void 0];case 3:return[2]}})})},e.prototype.setLastFlushTimestamp=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.setInternal(tb,e.toString())];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),this.logger.debug("DiagnosticsStorage: Failed to set last flush timestamp",t),[3,3];case 3:return[2]}})})},e.prototype.clearTable=function(e,t){return new Promise(function(i,r){var n=e.objectStore(t).clear();n.onsuccess=function(){return i()},n.onerror=function(){return r(Error("Failed to clear table ".concat(t)))}})},e.prototype.getAllAndClear=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t,i,r,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,this.getDB()];case 1:return e=a.sent().transaction([tf,tg,tm,tv],"readwrite"),[4,Promise.all([this.getAllFromStore(e,tf),this.getAllFromStore(e,tg),this.getAllFromStore(e,tm),this.getAllFromStore(e,tv)])];case 2:return i=(t=ec.__read.apply(void 0,[a.sent(),4]))[0],r=t[1],n=t[2],o=t[3],[4,Promise.all([this.clearTable(e,tg),this.clearTable(e,tm),this.clearTable(e,tv)])];case 3:return a.sent(),[2,{tags:i,counters:r,histogramStats:n,events:o}];case 4:return s=a.sent(),this.logger.debug("DiagnosticsStorage: Failed to get all and clear data",s),[2,{tags:[],counters:[],histogramStats:[],events:[]}];case 5:return[2]}})})},e.prototype.getAllFromStore=function(e,t){return new Promise(function(i,r){var n=e.objectStore(t).getAll();n.onsuccess=function(){return i(n.result)},n.onerror=function(){return r(Error("Failed to get all from ".concat(t)))}})},e}(),tC=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i)|0;return t},tx=function(e,t){return 31*Math.abs(tC(e.toString()))%1e5/1e5<t},tS=function(){var e=(0,eF.getGlobalScope)();return null==e?void 0:e.__AMPLITUDE_SCRIPT_URL__},tk=function(e){var t=(0,eF.getGlobalScope)();if(t&&"function"==typeof t.addEventListener){var i=function(t){e.recordEvent("sdk.error.uncaught",(0,ec.__assign)({type:t.type,message:t.message,filename:t.filename,error_name:t.errorName,stack:t.stack},t.metadata))};t.addEventListener("error",function(e){var t=e.error instanceof Error?e.error:void 0,r=null==t?void 0:t.stack,n=tR({filename:e.filename,stack:r});n&&i({type:"error",message:e.message,stack:r,filename:e.filename,errorName:null==t?void 0:t.name,metadata:{colno:e.colno,lineno:e.lineno,isTrusted:e.isTrusted,matchReason:n}})},!0),t.addEventListener("unhandledrejection",function(e){var t,r=e.reason instanceof Error?e.reason:void 0,n=null==r?void 0:r.stack,o=tE(n),s=tR({filename:o,stack:n});s&&i({type:"unhandledrejection",message:null!=(t=null==r?void 0:r.message)?t:tP(e.reason),stack:n,filename:o,errorName:null==r?void 0:r.name,metadata:{isTrusted:e.isTrusted,matchReason:s}})},!0)}},tR=function(e){var t=tS();if(t){if(e.filename&&e.filename.includes(t))return"filename";if(e.stack&&e.stack.includes(t))return"stack"}},tE=function(e){if(e){var t=e.match(/(https?:\/\/\S+?)(?=[)\s]|$)/);return t?t[1]:void 0}},tP=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(e){return"[object Object]"}},tM=function(){function e(e,t,i,r){void 0===i&&(i="US"),this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},this.inMemoryEvents=[],this.saveTimer=null,this.flushTimer=null,this.apiKey=e,this.logger=t,this.serverUrl="US"===i?"https://diagnostics.prod.us-west-2.amplitude.com/v1/capture":"https://diagnostics.prod.eu-central-1.amplitude.com/v1/capture",this.logger.debug("DiagnosticsClient: Initializing with options",JSON.stringify(r,null,2)),this.config=(0,ec.__assign)({enabled:!0,sampleRate:0},r),this.startTimestamp=Date.now(),this.shouldTrack=tx(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,tw.isSupported()?this.storage=new tw(e,t):this.logger.debug("DiagnosticsClient: IndexedDB is not supported"),this.initializeFlushInterval(),this.shouldTrack&&(this.increment("sdk.diagnostics.sampled.in.and.enabled"),tk(this))}return e.prototype.isStorageAndTrackEnabled=function(){return!!this.storage&&!!this.shouldTrack},e.prototype.setTag=function(e,t){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryTags).length>=1e4)return void this.logger.debug("DiagnosticsClient: Early return setTags as reaching memory limit");this.inMemoryTags[e]=t,this.startTimersIfNeeded()}},e.prototype.increment=function(e,t){if(void 0===t&&(t=1),this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryCounters).length>=1e4)return void this.logger.debug("DiagnosticsClient: Early return increment as reaching memory limit");this.inMemoryCounters[e]=(this.inMemoryCounters[e]||0)+t,this.startTimersIfNeeded()}},e.prototype.recordHistogram=function(e,t){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryHistograms).length>=1e4)return void this.logger.debug("DiagnosticsClient: Early return recordHistogram as reaching memory limit");var i=this.inMemoryHistograms[e];i?(i.count+=1,i.min=Math.min(i.min,t),i.max=Math.max(i.max,t),i.sum+=t):this.inMemoryHistograms[e]={count:1,min:t,max:t,sum:t},this.startTimersIfNeeded()}},e.prototype.recordEvent=function(e,t){if(this.isStorageAndTrackEnabled()){if(this.inMemoryEvents.length>=10)return void this.logger.debug("DiagnosticsClient: Early return recordEvent as reaching memory limit");this.inMemoryEvents.push({event_name:e,time:Date.now(),event_properties:t}),this.startTimersIfNeeded()}},e.prototype.startTimersIfNeeded=function(){var e=this;this.saveTimer||(this.saveTimer=setTimeout(function(){e.saveAllDataToStorage().catch(function(t){e.logger.debug("DiagnosticsClient: Failed to save all data to storage",t)}).finally(function(){e.saveTimer=null})},1e3)),this.flushTimer||(this.flushTimer=setTimeout(function(){e._flush().catch(function(t){e.logger.debug("DiagnosticsClient: Failed to flush",t)}).finally(function(){e.flushTimer=null})},3e5))},e.prototype.saveAllDataToStorage=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(!this.storage)return[2];return e=(0,ec.__assign)({},this.inMemoryTags),t=(0,ec.__assign)({},this.inMemoryCounters),i=(0,ec.__assign)({},this.inMemoryHistograms),r=(0,ec.__spreadArray)([],(0,ec.__read)(this.inMemoryEvents),!1),this.inMemoryEvents=[],this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},[4,Promise.all([this.storage.setTags(e),this.storage.incrementCounters(t),this.storage.setHistogramStats(i),this.storage.addEventRecords(r)])];case 1:return n.sent(),[2]}})})},e.prototype._flush=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t,i,r,n,o,s,a,l,u;return(0,ec.__generator)(this,function(d){switch(d.label){case 0:if(!this.storage)return[2];return[4,this.saveAllDataToStorage()];case 1:return d.sent(),this.saveTimer=null,this.flushTimer=null,[4,this.storage.getAllAndClear()];case 2:if(t=(e=d.sent()).tags,i=e.counters,r=e.histogramStats,n=e.events,this.storage.setLastFlushTimestamp(Date.now()),o={},t.forEach(function(e){o[e.key]=e.value}),s={},i.forEach(function(e){s[e.key]=e.value}),a={},r.forEach(function(e){a[e.key]={count:e.count,min:e.min,max:e.max,avg:Math.round(e.sum/e.count*100)/100}}),l=n.map(function(e){return{event_name:e.event_name,time:e.time,event_properties:e.event_properties}}),0===Object.keys(s).length&&0===Object.keys(a).length&&0===l.length)return[2];return u={tags:o,histogram:a,counters:s,events:l},this.fetch(u),[2]}})})},e.prototype.fetch=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!(0,eF.getGlobalScope)())throw Error("DiagnosticsClient: Fetch is not supported");return[4,fetch(this.serverUrl,{method:"POST",headers:{"X-ApiKey":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if(!i.sent().ok)return this.logger.debug("DiagnosticsClient: Failed to send diagnostics data."),[2];return this.logger.debug("DiagnosticsClient: Successfully sent diagnostics data"),[3,3];case 2:return t=i.sent(),this.logger.debug("DiagnosticsClient: Failed to send diagnostics data. ",t),[3,3];case 3:return[2]}})})},e.prototype.initializeFlushInterval=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t,i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(!this.storage)return[2];return e=Date.now(),[4,this.storage.getLastFlushTimestamp()];case 1:if(-1===(t=r.sent()||-1))return this.storage.setLastFlushTimestamp(e),this._setFlushTimer(3e5),[2];return(i=e-t)>=3e5?this._flush():this._setFlushTimer(3e5-i),[2]}})})},e.prototype._setFlushTimer=function(e){var t=this;this.flushTimer=setTimeout(function(){t._flush().catch(function(e){t.logger.debug("DiagnosticsClient: Failed to flush",e)}).finally(function(){t.flushTimer=null})},e)},e.prototype._setSampleRate=function(e){this.logger.debug("DiagnosticsClient: Setting sample rate to",e),this.config.sampleRate=e,this.shouldTrack=tx(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,this.logger.debug("DiagnosticsClient: Should track is",this.shouldTrack)},e}(),tD=function(e,t){return"boolean"==typeof e?e:(null==e?void 0:e[t])!==!1},tT=function(e){return tD(e,"attribution")},tO=function(e){return tD(e,"pageViews")},t_=function(e){return tD(e,"sessions")},tA=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.networkTracking||"object"==typeof e.networkTracking)},tF=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.elementInteractions||"object"==typeof e.elementInteractions)},tI=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.frustrationInteractions||"object"==typeof e.frustrationInteractions)},tL=function(e){if(tF(e.autocapture)&&"object"==typeof e.autocapture&&"object"==typeof e.autocapture.elementInteractions)return e.autocapture.elementInteractions},tN=function(e){if(tI(e.autocapture)&&"object"==typeof e.autocapture&&"object"==typeof e.autocapture.frustrationInteractions)return e.autocapture.frustrationInteractions},tB=function(e){var t;if(tA(e.autocapture)){var i=void 0;return"object"==typeof e.autocapture&&"object"==typeof e.autocapture.networkTracking?i=e.autocapture.networkTracking:e.networkTrackingOptions&&(i=e.networkTrackingOptions),(0,ec.__assign)((0,ec.__assign)({},i),{captureRules:null==(t=null==i?void 0:i.captureRules)?void 0:t.map(function(t){var i,r,n;if((null==(i=t.urls)?void 0:i.length)&&(null==(r=t.hosts)?void 0:r.length)){var o=JSON.stringify(t.hosts),s=JSON.stringify(t.urls);return null==(n=e.loggerProvider)||n.warn("Found network capture rule with both urls='".concat(s,"' and hosts='").concat(o,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),(0,ec.__assign)((0,ec.__assign)({},t),{hosts:void 0})}return t})})}},tV=function(e){var t,i=function(){return!1},r=void 0,n=e.pageCounter;return tO(e.defaultTracking)&&(i=void 0,t=void 0,e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.pageViews&&"object"==typeof e.defaultTracking.pageViews&&("trackOn"in e.defaultTracking.pageViews&&(i=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(t=e.defaultTracking.pageViews.eventType))),{trackOn:i,trackHistoryChanges:r,eventType:t,pageCounter:n}},tH=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.name,o=r.args,s=r.resolve,a=e&&e[n];if("function"==typeof a){var l=a.apply(e,o);"function"==typeof s&&s(null==l?void 0:l.promise)}}return e},tz=function(e){return e&&void 0!==e._q},tj=function(){if("undefined"==typeof navigator)return"";var e,t,i,r,n=navigator.userLanguage;return null!=(r=null!=(i=null!=(t=null==(e=navigator.languages)?void 0:e[0])?t:navigator.language)?i:n)?r:""},tG="2.30.0",tW="amplitude-ts",tU=function(){function e(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(tW,"/").concat(tG),"undefined"!=typeof navigator&&(this.userAgent=navigator.userAgent)}return e.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},e.prototype.execute=function(e){var t,i;return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n,o;return(0,ec.__generator)(this,function(s){return r=new Date().getTime(),n=null!=(t=this.config.lastEventId)?t:-1,o=null!=(i=e.event_id)?i:n+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=r),[2,(0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:r},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:tj()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:eL(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent})]})})},e}(),t$=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return[2,!0]})})},e.prototype.get=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,this.memoryStorage.get(e)]})})},e.prototype.getRaw=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return[4,this.get(e)];case 1:return[2,(t=i.sent())?JSON.stringify(t):void 0]}})})},e.prototype.set=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return this.memoryStorage.set(e,t),[2]})})},e.prototype.remove=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return this.memoryStorage.delete(e),[2]})})},e.prototype.reset=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return this.memoryStorage.clear(),[2]})})},e}(),tq=function(){function e(e){this.options=(0,ec.__assign)({},e)}return e.prototype.isEnabled=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(!(0,eF.getGlobalScope)())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),i="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,t.set(i,e.testValue)];case 2:return r.sent(),[4,t.get(i)];case 3:return[2,r.sent()===e.testValue];case 4:return r.sent(),[2,!1];case 5:return[4,t.remove(i)];case 6:return r.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(!(i=n.sent()))return[2,void 0];try{if(r=null!=(t=tK(i))?t:tQ(i),void 0===r)return console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(i)),[2,void 0];return[2,JSON.parse(r)]}catch(t){return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(i)),[2,void 0]}}})})},e.prototype.getRaw=function(e){var t,i;return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n;return(0,ec.__generator)(this,function(o){return(n=(null!=(i=null==(t=null==(r=(0,eF.getGlobalScope)())?void 0:r.document)?void 0:t.cookie.split("; "))?i:[]).find(function(t){return 0===t.indexOf(e+"=")}))?[2,n.substring(e.length+1)]:[2,void 0]})})},e.prototype.set=function(e,t){var i;return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n,o,s,a,l,u;return(0,ec.__generator)(this,function(d){try{r=null!=(i=this.options.expirationDays)?i:0,n=null!==t?r:-1,o=void 0,n&&((s=new Date).setTime(s.getTime()+24*n*36e5),o=s),a="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),o&&(a+="; expires=".concat(o.toUTCString())),a+="; path=/",this.options.domain&&(a+="; domain=".concat(this.options.domain)),this.options.secure&&(a+="; Secure"),this.options.sameSite&&(a+="; SameSite=".concat(this.options.sameSite)),(l=(0,eF.getGlobalScope)())&&(l.document.cookie=a)}catch(t){u=t instanceof Error?t.message:String(t),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(u))}return[2]})})},e.prototype.remove=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}})})},e.prototype.reset=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return[2]})})},e}(),tK=function(e){try{return decodeURIComponent(atob(e))}catch(e){return}},tQ=function(e){try{return decodeURIComponent(atob(decodeURIComponent(e)))}catch(e){return}},tX=function(e,t,i){return void 0===t&&(t=""),void 0===i&&(i=10),["AMP",t,e.substring(0,i)].filter(Boolean).join("_")},tY=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){if("object"!=typeof e)return null;var t,i,r,n,o,s,a,l,u,d,c,h,p,f,g,m,v,y,b,w,C,x,S=e.code||0,k=this.buildStatus(S);switch(k){case $.Success:return{status:k,statusCode:S,body:{eventsIngested:null!=(t=e.events_ingested)?t:0,payloadSizeBytes:null!=(i=e.payload_size_bytes)?i:0,serverUploadTime:null!=(r=e.server_upload_time)?r:0}};case $.Invalid:return{status:k,statusCode:S,body:{error:null!=(n=e.error)?n:"",missingField:null!=(o=e.missing_field)?o:"",eventsWithInvalidFields:null!=(s=e.events_with_invalid_fields)?s:{},eventsWithMissingFields:null!=(a=e.events_with_missing_fields)?a:{},eventsWithInvalidIdLengths:null!=(l=e.events_with_invalid_id_lengths)?l:{},epsThreshold:null!=(u=e.eps_threshold)?u:0,exceededDailyQuotaDevices:null!=(d=e.exceeded_daily_quota_devices)?d:{},silencedDevices:null!=(c=e.silenced_devices)?c:[],silencedEvents:null!=(h=e.silenced_events)?h:[],throttledDevices:null!=(p=e.throttled_devices)?p:{},throttledEvents:null!=(f=e.throttled_events)?f:[]}};case $.PayloadTooLarge:return{status:k,statusCode:S,body:{error:null!=(g=e.error)?g:""}};case $.RateLimit:return{status:k,statusCode:S,body:{error:null!=(m=e.error)?m:"",epsThreshold:null!=(v=e.eps_threshold)?v:0,throttledDevices:null!=(y=e.throttled_devices)?y:{},throttledUsers:null!=(b=e.throttled_users)?b:{},exceededDailyQuotaDevices:null!=(w=e.exceeded_daily_quota_devices)?w:{},exceededDailyQuotaUsers:null!=(C=e.exceeded_daily_quota_users)?C:{},throttledEvents:null!=(x=e.throttled_events)?x:[]}};case $.Timeout:default:return{status:k,statusCode:S}}},e.prototype.buildStatus=function(e){return eX(e)?$.Success:429===e?$.RateLimit:413===e?$.PayloadTooLarge:408===e?$.Timeout:e>=400&&e<500?$.Invalid:e>=500?$.Failed:$.Unknown},e}(),tZ=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,ec.__extends)(t,e),t.prototype.send=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if("undefined"==typeof fetch)throw Error("FetchTransport is not supported");return[4,fetch(e,{headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"})];case 1:return[4,(i=n.sent()).text()];case 2:r=n.sent();try{return[2,this.buildResponse(JSON.parse(r))]}catch(e){return[2,this.buildResponse({code:i.status})]}}})})},t}(tY),tJ=function(){function e(e){this.storage=e}return e.prototype.isEnabled=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(!this.storage)return[2,!1];t=String(Date.now()),i=new e(this.storage),r="AMP_TEST",n.label=1;case 1:return n.trys.push([1,4,5,7]),[4,i.set(r,t)];case 2:return n.sent(),[4,i.get(r)];case 3:return[2,n.sent()===t];case 4:return n.sent(),[2,!1];case 5:return[4,i.remove(r)];case 6:return n.sent(),[7];case 7:return[2]}})})},e.prototype.get=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:if(!(t=i.sent()))return[2,void 0];return[2,JSON.parse(t)];case 2:return i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},e.prototype.getRaw=function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return[2,(null==(t=this.storage)?void 0:t.getItem(e))||void 0]})})},e.prototype.set=function(e,t){var i;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(r){try{null==(i=this.storage)||i.setItem(e,JSON.stringify(t))}catch(e){}return[2]})})},e.prototype.remove=function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){try{null==(t=this.storage)||t.removeItem(e)}catch(e){}return[2]})})},e.prototype.reset=function(){var e;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){try{null==(e=this.storage)||e.clear()}catch(e){}return[2]})})},e}(),t0=function(e){function t(t){var i,r,n,o=this;try{n=null==(i=(0,eF.getGlobalScope)())?void 0:i.localStorage}catch(e){null==(r=null==t?void 0:t.loggerProvider)||r.debug("Failed to access localStorage. error=".concat(JSON.stringify(e))),n=void 0}return(o=e.call(this,n)||this).loggerProvider=null==t?void 0:t.loggerProvider,o}return(0,ec.__extends)(t,e),t.prototype.set=function(t,i){var r;return(0,ec.__awaiter)(this,void 0,void 0,function(){var n;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(!(Array.isArray(i)&&i.length>1e3))return[3,2];return n=i.length-1e3,[4,e.prototype.set.call(this,t,i.slice(0,1e3))];case 1:return o.sent(),null==(r=this.loggerProvider)||r.error("Failed to save ".concat(n," events because the queue length exceeded ").concat(1e3,".")),[3,4];case 2:return[4,e.prototype.set.call(this,t,i)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},t}(tJ),t1=function(e){function t(){var t;return e.call(this,null==(t=(0,eF.getGlobalScope)())?void 0:t.sessionStorage)||this}return(0,ec.__extends)(t,e),t}(tJ),t2=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={done:4},t}return(0,ec.__extends)(t,e),t.prototype.send=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i=this;return(0,ec.__generator)(this,function(r){return[2,new Promise(function(r,n){"undefined"==typeof XMLHttpRequest&&n(Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=function(){if(o.readyState===i.state.done){var e=o.responseText;try{r(i.buildResponse(JSON.parse(e)))}catch(e){r(i.buildResponse({code:o.status}))}}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(t))})]})})},t}(tY),t5=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,ec.__extends)(t,e),t.prototype.send=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i=this;return(0,ec.__generator)(this,function(r){return[2,new Promise(function(r,n){var o=(0,eF.getGlobalScope)();if(!(null==o?void 0:o.navigator.sendBeacon))throw Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(t);if(o.navigator.sendBeacon(e,JSON.stringify(t)))return r(i.buildResponse({code:200,events_ingested:t.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}));return r(i.buildResponse({code:500}))}catch(e){n(e)}})]})})},t}(tY),t3=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},t4=function(e){if(atob&&escape&&e)try{return decodeURIComponent(escape(atob(e)))}catch(e){return}},t8="[Amplitude]",t6="".concat(t8," Form Started"),t7="".concat(t8," Form Submitted"),t9="".concat(t8," File Downloaded"),ie="session_start",it="session_end",ii="".concat(t8," File Extension"),ir="".concat(t8," File Name"),io="".concat(t8," Link ID"),is="".concat(t8," Link Text"),ia="".concat(t8," Link URL"),il="".concat(t8," Form ID"),iu="".concat(t8," Form Name"),id="".concat(t8," Form Destination"),ic="cookie",ih=function(e){function t(t,i,r,n,o,s,a,l,u,d,c,h,p,f,g,m,v,y,b,w,C,x,S,k,R,E,P,M,D,T,O,_,A,F,I,L,N,B,V,H){void 0===r&&(r=new t$),void 0===n&&(n={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===l&&(l=1e3),void 0===u&&(u=5),void 0===d&&(d=30),void 0===c&&(c=ic),void 0===m&&(m=new eU),void 0===v&&(v=q.Warn),void 0===b&&(b=!1),void 0===w&&(w=!1),void 0===S&&(S=""),void 0===k&&(k="US"),void 0===E&&(E=18e5),void 0===P&&(P=new t0({loggerProvider:m})),void 0===M&&(M={ipAddress:!0,language:!0,platform:!0}),void 0===D&&(D="fetch"),void 0===T&&(T=!1),void 0===O&&(O=!0),void 0===N&&(N=!0),void 0===B&&(B=0);var z=e.call(this,{apiKey:t,storageProvider:P,transportProvider:ig(D)})||this;return z.apiKey=t,z.appVersion=i,z.cookieOptions=n,z.defaultTracking=o,z.autocapture=s,z.flushIntervalMillis=l,z.flushMaxRetries=u,z.flushQueueSize=d,z.identityStorage=c,z.ingestionMetadata=h,z.instanceName=p,z.loggerProvider=m,z.logLevel=v,z.minIdLength=y,z.offline=b,z.partnerId=C,z.plan=x,z.serverUrl=S,z.serverZone=k,z.sessionTimeout=E,z.storageProvider=P,z.trackingOptions=M,z.transport=D,z.useBatch=T,z.fetchRemoteConfig=O,z.networkTrackingOptions=I,z.identify=L,z.enableDiagnostics=N,z.diagnosticsSampleRate=B,z.diagnosticsClient=V,z.remoteConfig=H,z.version=tG,z._optOut=!1,z._cookieStorage=r,z.deviceId=a,z.lastEventId=f,z.lastEventTime=g,z.optOut=w,z.sessionId=R,z.pageCounter=A,z.userId=_,z.debugLogsEnabled=F,z.loggerProvider.enable(F?q.Debug:z.logLevel),z.networkTrackingOptions=I,z.identify=L,z.enableDiagnostics=N,z.diagnosticsSampleRate=B,z.diagnosticsClient=V,O&&(z.remoteConfig||(z.remoteConfig={fetchRemoteConfig:O}),z.remoteConfig.fetchRemoteConfig||(z.remoteConfig.fetchRemoteConfig=O)),z}return(0,ec.__extends)(t,e),Object.defineProperty(t.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(e){this._cookieStorage!==e&&(this._cookieStorage=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId!==e&&(this._deviceId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId!==e&&(this._userId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId!==e&&(this._sessionId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut!==e&&(this._optOut=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(e){this._lastEventTime!==e&&(this._lastEventTime=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(e){this._lastEventId!==e&&(this._lastEventId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(e){this._pageCounter!==e&&(this._pageCounter=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLogsEnabled",{set:function(e){this._debugLogsEnabled!==e&&(this._debugLogsEnabled=e,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var e={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(tX(this.apiKey),e)},t}(eq),ip=function(e,t){switch(void 0===e&&(e=ic),void 0===t&&(t={}),e){case"localStorage":return new t0;case"sessionStorage":return new t1;case"none":return new t$;default:return new tq((0,ec.__assign)((0,ec.__assign)({},t),{expirationDays:t.expiration}))}},ig=function(e){return"xhr"===e?new t2:"beacon"===e?new t5:new tZ},im="data-amp-mask",iv="*****",iy=/\b(?:\d[ -]*?){13,16}\b/,ib=/(\d{3}-?\d{2}-?\d{4})/g,iw=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,iC=function(e,t){if(void 0===t&&(t=[]),"string"!=typeof e)return"";var i,r,n=e;n=(n=(n=n.replace(iy,iv)).replace(ib,iv)).replace(iw,iv);try{for(var o=(0,ec.__values)(t),s=o.next();!s.done;s=o.next()){var a=s.value;try{n=n.replace(a,iv)}catch(e){}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n},ix=function(e){if("undefined"==typeof document||!document.title)return"";var t=document.querySelector("title");return t&&t.hasAttribute(im)?iv:e?e(document.title):document.title},iS=function(){function e(){}return e.prototype.parse=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return[2,(0,ec.__assign)((0,ec.__assign)((0,ec.__assign)((0,ec.__assign)({},eE),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},e.prototype.getUtmParam=function(){var e=td();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,i={referrer:void 0,referring_domain:void 0};try{i.referrer=document.referrer||void 0,i.referring_domain=null!=(t=null==(e=i.referrer)?void 0:e.split("/")[2])?t:void 0}catch(e){}return i},e.prototype.getClickIds=function(){var e,t=td();return(e={})[eg]=t[eg],e[em]=t[em],e[ev]=t[ev],e[ey]=t[ey],e[eb]=t[eb],e[ew]=t[ew],e[eC]=t[eC],e[ex]=t[ex],e[eS]=t[eS],e[ek]=t[ek],e[eR]=t[eR],e},e}(),ik=function(e){var t={};for(var i in e){var r=e[i];r&&(t[i]=r)}return t},iR=function(e){void 0===e&&(e={});var t,i,r=(0,eF.getGlobalScope)(),n=void 0,o=!1,s=e.trackOn,a=e.trackHistoryChanges,l=e.eventType,u=void 0===l?"[Amplitude] Page Viewed":l,d=function(e){var t=e;try{t=decodeURI(e)}catch(e){null==n||n.error("Malformed URI sequence: ",e)}return t},c=function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:return e=d("undefined"!=typeof location&&location.href||""),i={event_type:u},t=[{}],[4,iE()];case 1:return[2,(i.event_properties=ec.__assign.apply(void 0,[ec.__assign.apply(void 0,t.concat([r.sent()])),{"[Amplitude] Page Domain":"undefined"!=typeof location&&location.hostname||"","[Amplitude] Page Location":e,"[Amplitude] Page Path":"undefined"!=typeof location&&d(location.pathname)||"","[Amplitude] Page Title":ix(iC),"[Amplitude] Page URL":e.split("?")[0]}]),i)]}})})},h=function(){return void 0===s||"function"==typeof s&&s()},p="undefined"!=typeof location?location.href:null,f=function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,i,r,o;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:if(i=iM(a,e=location.href,p||"")&&h(),p=e,!i)return[3,4];if(null==n||n.log("Tracking page view event"),null!=t)return[3,1];return[3,3];case 1:return o=(r=t).track,[4,c()];case 2:o.apply(r,[s.sent()]),s.label=3;case 3:s.label=4;case 4:return[2]}})})},g=function(){f()};return{name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(e,s){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var a,l;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:if(t=s,i=e,(n=e.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),o=!0,r&&(r.addEventListener("popstate",g),r.history.pushState=new Proxy(r.history.pushState,{apply:function(e,t,i){var r=(0,ec.__read)(i,3),n=r[0],s=r[1],a=r[2];e.apply(t,[n,s,a]),o&&f()}})),!h())return[3,2];return n.log("Tracking page view event"),l=(a=t).track,[4,c()];case 1:l.apply(a,[u.sent()]),u.label=2;case 2:return[2]}})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(!("attribution"===s&&iP(e)))return[3,2];return null==n||n.log("Enriching campaign event to page view event with campaign parameters"),[4,c()];case 1:e.event_type=(t=r.sent()).event_type,e.event_properties=(0,ec.__assign)((0,ec.__assign)({},e.event_properties),t.event_properties),r.label=2;case 2:return i&&e.event_type===u&&(i.pageCounter=i.pageCounter?i.pageCounter+1:1,e.event_properties=(0,ec.__assign)((0,ec.__assign)({},e.event_properties),{"[Amplitude] Page Counter":i.pageCounter})),[2,e]}})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return r&&(r.removeEventListener("popstate",g),o=!1),[2]})})}}},iE=function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(t){switch(t.label){case 0:return e=ik,[4,new iS().parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}})})},iP=function(e){if("$identify"===e.event_type&&e.user_properties){var t=e.user_properties,i=t[G.SET]||{},r=t[G.UNSET]||{},n=(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(Object.keys(i)),!1),(0,ec.__read)(Object.keys(r)),!1);return Object.keys(eE).every(function(e){return n.includes(e)})}return!1},iM=function(e,t,i){if("pathOnly"!==e)return t!==i;if(""==i)return!0;var r=new URL(t),n=new URL(i);return r.origin+r.pathname!==n.origin+n.pathname},iD=function(){var e,t=[],i=function(e,i,r){e.addEventListener(i,r),t.push({element:e,type:i,handler:r})},r=function(){t.forEach(function(e){var t=e.element,i=e.type,r=e.handler;null==t||t.removeEventListener(i,r)}),t=[]};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(t,r){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var n,o;return(0,ec.__generator)(this,function(s){return n=function(){if(!r)return void t.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");if("undefined"!=typeof document){var n=function(e){var t=!1;i(e,"change",function(){var i,n=iO(e);t||r.track(t6,((i={})[il]=iT(e.id),i[iu]=iT(e.name),i[id]=n,i)),t=!0}),i(e,"submit",function(){var i,n,o=iO(e);t||r.track(t6,((i={})[il]=iT(e.id),i[iu]=iT(e.name),i[id]=o,i)),r.track(t7,((n={})[il]=iT(e.id),n[iu]=iT(e.name),n[id]=o,n)),t=!1})};Array.from(document.getElementsByTagName("form")).forEach(n),"undefined"!=typeof MutationObserver&&(e=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){"FORM"===e.nodeName&&n(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("form")).map(n)})})})).observe(document.body,{subtree:!0,childList:!0})}},"complete"===document.readyState?n():(o=(0,eF.getGlobalScope)())?o.addEventListener("load",n):t.loggerProvider.debug("Form interaction tracking is not installed because global is undefined."),[2]})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return null==e||e.disconnect(),r(),[2]})})}}},iT=function(e){if("string"==typeof e)return e},iO=function(e){var t=e.getAttribute("action");try{t=new URL(encodeURI(null!=t?t:""),window.location.href).href}catch(e){}return t},i_=function(){var e,t=[],i=function(e,i,r){e.addEventListener(i,r),t.push({element:e,type:i,handler:r})},r=function(){t.forEach(function(e){var t=e.element,i=e.type,r=e.handler;null==t||t.removeEventListener(i,r)}),t=[]};return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(t,r){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var n,o;return(0,ec.__generator)(this,function(s){return n=function(){if(!r)return void t.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");if("undefined"!=typeof document){var n=function(e){try{t=new URL(e.href,window.location.href)}catch(e){return}var t,n=o.exec(t.href),s=null==n?void 0:n[1];s&&i(e,"click",function(){var i;s&&r.track(t9,((i={})[ii]=s,i[ir]=t.pathname,i[io]=e.id,i[is]=e.text,i[ia]=e.href,i))})},o=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/;Array.from(document.getElementsByTagName("a")).forEach(n),"undefined"!=typeof MutationObserver&&(e=new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){"A"===e.nodeName&&n(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("a")).map(n)})})})).observe(document.body,{subtree:!0,childList:!0})}},"complete"===document.readyState?n():(o=(0,eF.getGlobalScope)())?o.addEventListener("load",n):t.loggerProvider.debug("File download tracking is not installed because global is undefined."),[2]})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return null==e||e.disconnect(),r(),[2]})})}}},iA=!1,iF=function(e){iA||void 0!==e.defaultTracking||(e.loggerProvider.warn("`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\n\namplitude.init(<YOUR_API_KEY>, {\n  defaultTracking: true,\n});\n\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details."),iA=!0)},iI=function(){var e=(0,eF.getGlobalScope)(),t=[],i=function(i,r){(null==e?void 0:e.addEventListener)&&(null==e||e.addEventListener(i,r),t.push({type:i,handler:r}))},r=function(){t.forEach(function(t){var i=t.type,r=t.handler;null==e||e.removeEventListener(i,r)}),t=[]};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(e,t){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(r){return"undefined"==typeof navigator?(e.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),e.offline=!1):(e.offline=!navigator.onLine,i("online",function(){e.loggerProvider.debug("Network connectivity changed to online."),e.offline=!1,setTimeout(function(){t.flush()},e.flushIntervalMillis)}),i("offline",function(){e.loggerProvider.debug("Network connectivity changed to offline."),e.offline=!0})),[2]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return r(),[2]})})}}};function iL(e,t,i){var r,n,o=[];try{for(var s=(0,ec.__values)(null!=t?t:[]),a=s.next();!a.done;a=s.next()){var l=a.value;try{o.push(new RegExp(l))}catch(e){i.loggerProvider.warn("Invalid regex pattern: ".concat(l),e)}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return e.concat(o)}var iN=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],iB="data-amp-track-",iV=["div","span","h1","h2","h3","h4","h5","h6"],iH="[Amplitude] Element Clicked",iz="[Amplitude] Rage Click",ij="[Amplitude] Element Tag",iG="[Amplitude] Element Text",iW="[Amplitude] Page URL",iU="https://app.amplitude.com",i$={US:iU,EU:"https://app.eu.amplitude.com",STAGING:"https://apps.stag2.amplitude.com"},iq="data-amp-mask-attributes",iK=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function iQ(e){return"function"==typeof e}function iX(e){return iQ(null==e?void 0:e.then)}function iY(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var iZ=iY(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function iJ(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}var i0=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,i,r,n,o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=(0,ec.__values)(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(iQ(l))try{l()}catch(e){n=e instanceof iZ?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=(0,ec.__values)(u),c=d.next();!c.done;c=d.next()){var h=c.value;try{i5(h)}catch(e){n=null!=n?n:[],e instanceof iZ?n=(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(n)),(0,ec.__read)(e.errors)):n.push(e)}}}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}}if(n)throw new iZ(n)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)i5(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(i=this._finalizers)?i:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&iJ(t,e)},t.prototype.remove=function(e){var i=this._finalizers;i&&iJ(i,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),i1=i0.EMPTY;function i2(e){return e instanceof i0||e&&"closed"in e&&iQ(e.remove)&&iQ(e.add)&&iQ(e.unsubscribe)}function i5(e){iQ(e)?e():e.unsubscribe()}var i3=void 0,i4={setTimeout:function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=i4.delegate;return(null==n?void 0:n.setTimeout)?n.setTimeout.apply(n,(0,ec.__spreadArray)([e,t],(0,ec.__read)(i))):setTimeout.apply(void 0,(0,ec.__spreadArray)([e,t],(0,ec.__read)(i)))},clearTimeout:function(e){var t=i4.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function i8(e){i4.setTimeout(function(){!1;throw e})}function i6(){}var i7=i9("C",void 0,void 0);function i9(e,t,i){return{kind:e,value:t,error:i}}var re=null;function rt(e){var t,i,r,n;1;e()}var ri=function(e){function t(t){var i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,i2(t)&&t.add(i)):i.destination=ru,i}return(0,ec.__extends)(t,e),t.create=function(e,t,i){return new rs(e,t,i)},t.prototype.next=function(e){this.isStopped?rl(i9("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?rl(i9("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?rl(i7,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(i0),rr=Function.prototype.bind;function rn(e,t){return rr.call(e,t)}var ro=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ra(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ra(e)}else ra(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ra(e)}},e}(),rs=function(e){function t(t,i,r){var n,o,s=e.call(this)||this;return iQ(t)||!t?n={next:null!=t?t:void 0,error:null!=i?i:void 0,complete:null!=r?r:void 0}:n=t,s.destination=new ro(n),s}return(0,ec.__extends)(t,e),t}(ri);function ra(e){1;i8(e)}function rl(e,t){}var ru={closed:!0,next:i6,error:function(e){throw e},complete:i6},rd="function"==typeof Symbol&&Symbol.observable||"@@observable";function rc(e){return e}var rh=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var r=this,n=!function(e){return e&&e instanceof ri||e&&iQ(e.next)&&iQ(e.error)&&iQ(e.complete)&&i2(e)}(e)?new rs(e,t,i):e;return rt(function(){var e=r.operator,t=r.source;n.add(e?e.call(n,t):t?r._subscribe(n):r._trySubscribe(n))}),n},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=rp(t))(function(t,r){var n=new rs({next:function(t){try{e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:t});i.subscribe(n)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[rd]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?rc:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=rp(e))(function(e,i){var r;t.subscribe(function(e){return r=e},function(e){return i(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function rp(e){var t;return null!=(t=null!=e?e:i3)?t:Promise}function rf(e){return Symbol.asyncIterator&&iQ(null==e?void 0:e[Symbol.asyncIterator])}function rg(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var rm="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function rv(e){return iQ(null==e?void 0:e[rm])}function ry(e){return(0,ec.__asyncGenerator)(this,arguments,function(){var t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,(0,ec.__await)(t.read())];case 3:if(r=(i=n.sent()).value,!i.done)return[3,5];return[4,(0,ec.__await)(void 0)];case 4:return[2,n.sent()];case 5:return[4,(0,ec.__await)(r)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function rb(e){return iQ(null==e?void 0:e.getReader)}function rw(e){if(e instanceof rh)return e;if(null!=e){var t,i,r,n;if(iQ(e[rd])){return t=e,new rh(function(e){var i=t[rd]();if(iQ(i.subscribe))return i.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(iK(e)){return i=e,new rh(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}if(iX(e)){return r=e,new rh(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i8)})}if(rf(e))return rC(e);if(rv(e)){return n=e,new rh(function(e){var t,i;try{for(var r=(0,ec.__values)(n),o=r.next();!o.done;o=r.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}e.complete()})}if(rb(e))return rC(ry(e))}throw rg(e)}function rC(e){return new rh(function(t){(function(e,t){var i,r,n,o;return(0,ec.__awaiter)(this,void 0,void 0,function(){var s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),i=(0,ec.__asyncValues)(e),a.label=1;case 1:return[4,i.next()];case 2:if((r=a.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return n={error:a.sent()},[3,11];case 6:if(a.trys.push([6,,9,10]),!(r&&!r.done&&(o=i.return)))return[3,8];return[4,o.call(i)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}function rx(e){return function(t){if(iQ(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function rS(e,t,i,r,n){return new rk(e,t,i,r,n)}var rk=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=i?function(e){try{i(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,ec.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),i||null==(t=this.onFinalize)||t.call(this)}},t}(ri);function rR(e,t){return rx(function(i,r){var n=0;i.subscribe(rS(r,function(i){r.next(e.call(t,i,n++))}))})}function rE(e,t,i,r,n){void 0===r&&(r=0),void 0===n&&(n=!1);var o=t.schedule(function(){i(),n?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!n)return o}function rP(e,t,i){return(void 0===i&&(i=1/0),iQ(t))?rP(function(i,r){return rR(function(e,n){return t(i,e,r,n)})(rw(e(i,r)))},i):("number"==typeof t&&(i=t),rx(function(t,r){var n,o,s,a,l,u,d,c;return n=i,o=[],s=0,a=0,l=!1,u=function(){!l||o.length||s||r.complete()},d=function(e){return s<n?c(e):o.push(e)},c=function(t){s++;var i=!1;rw(e(t,a++)).subscribe(rS(r,function(e){r.next(e)},function(){i=!0},void 0,function(){if(i)try{for(s--;o.length&&s<n;)!function(){var e=o.shift();c(e)}();u()}catch(e){r.error(e)}}))},t.subscribe(rS(r,d,function(){l=!0,u()})),function(){}}))}var rM=Array.isArray,rD=["addListener","removeListener"],rT=["addEventListener","removeEventListener"],rO=["on","off"];function r_(e,t,i,r){if(iQ(i)&&(r=i,i=void 0),r){return r_(e,t,i).pipe((n=r,rR(function(e){return rM(e)?n.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(e))):n(e)})))}var n,o,s,a,l=(0,ec.__read)(iQ((o=e).addEventListener)&&iQ(o.removeEventListener)?rT.map(function(r){return function(n){return e[r](t,n,i)}}):iQ((s=e).addListener)&&iQ(s.removeListener)?rD.map(rA(e,t)):iQ((a=e).on)&&iQ(a.off)?rO.map(rA(e,t)):[],2),u=l[0],d=l[1];if(!u&&iK(e))return rP(function(e){return r_(e,t,i)})(rw(e));if(!u)throw TypeError("Invalid event target");return new rh(function(e){var t=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.next(1<t.length?t:t[0])};return u(t),function(){return d(t)}})}function rA(e,t){return function(i){return function(r){return e[i](t,r)}}}var rF=iY(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),rI=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,ec.__extends)(t,e),t.prototype.lift=function(e){var t=new rL(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new rF},t.prototype.next=function(e){var t=this;rt(function(){var i,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var n=(0,ec.__values)(t.currentObservers),o=n.next();!o.done;o=n.next())o.value.next(e)}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var t=this;rt(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var i=t.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;rt(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,i=this.hasError,r=this.isStopped,n=this.observers;return i||r?i1:(this.currentObservers=null,n.push(e),new i0(function(){t.currentObservers=null,iJ(n,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,i=this.thrownError,r=this.isStopped;t?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new rh;return e.source=this,e},t.create=function(e,t){return new rL(e,t)},t}(rh),rL=function(e){function t(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return(0,ec.__extends)(t,e),t.prototype.next=function(e){var t,i;null==(i=null==(t=this.destination)?void 0:t.next)||i.call(t,e)},t.prototype.error=function(e){var t,i;null==(i=null==(t=this.destination)?void 0:t.error)||i.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,i;return null!=(i=null==(t=this.source)?void 0:t.subscribe(e))?i:i1},t}(rI);function rN(e){void 0===e&&(e={});var t=e.connector,i=void 0===t?function(){return new rI}:t,r=e.resetOnError,n=void 0===r||r,o=e.resetOnComplete,s=void 0===o||o,a=e.resetOnRefCountZero,l=void 0===a||a;return function(e){var t,r,o,a=0,u=!1,d=!1,c=function(){null==r||r.unsubscribe(),r=void 0},h=function(){c(),t=o=void 0,u=d=!1},p=function(){var e=t;h(),null==e||e.unsubscribe()};return rx(function(e,f){a++,d||u||c();var g=o=null!=o?o:i();f.add(function(){0!=--a||d||u||(r=rB(p,l))}),g.subscribe(f),!t&&a>0&&(t=new rs({next:function(e){return g.next(e)},error:function(e){d=!0,c(),r=rB(h,n,e),g.error(e)},complete:function(){u=!0,c(),r=rB(h,s),g.complete()}}),rw(e).subscribe(t))})(e)}}function rB(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(!0===t)return void e();if(!1!==t){var n=new rs({next:function(){n.unsubscribe(),e()}});return rw(t.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(i)))).subscribe(n)}}var rV=function(e,t){return!t||!t.length||t.some(function(t){return"string"==typeof t?e===t:e.match(t)})},rH=function(e,t){var i=e;try{i=decodeURI(e)}catch(e){null==t||t.error("Malformed URI sequence: ",e)}return i},rz=["input","select","textarea"],rj=function(e,t){var i,r=null==(i=null==window?void 0:window.getComputedStyle)?void 0:i.call(window,e);return(null==r?void 0:r.getPropertyValue("cursor"))==="pointer"&&"click"===t},rG=function(e,t,i){return void 0===i&&(i=!1),function(r,n){var o,s,a=e.pageUrlAllowlist,l=e.pageUrlExcludelist,u=e.shouldTrackEventResolver,d=null==(s=null==(o=null==n?void 0:n.tagName)?void 0:o.toLowerCase)?void 0:s.call(o);if(!d)return!1;if(u)return u(r,n);if(!rV(window.location.href,a)||l&&l.length>0&&rV(window.location.href,l))return!1;var c=String(null==n?void 0:n.getAttribute("type"))||"";if("string"==typeof c)switch(c.toLowerCase()){case"hidden":case"password":return!1}var h=rj(n,r);if(i&&h)return!0;if(t&&!t.some(function(e){var t;return!!(null==(t=null==n?void 0:n.matches)?void 0:t.call(n,e))}))return!1;switch(d){case"input":case"select":case"textarea":return"change"===r||"click"===r;default:if(h)return!0;return"click"===r}}},rW=function(e){var t,i,r,n=null==(i=null==(t=null==e?void 0:e.tagName)?void 0:t.toLowerCase)?void 0:i.call(t),o=e instanceof HTMLElement&&(null==(r=e.getAttribute("contenteditable"))?void 0:r.toLowerCase())==="true";return!rz.includes(n)&&!o},rU=function(e){return Object.keys(e).reduce(function(t,i){var r=e[i];return null!=r&&("object"!=typeof r||0!==Object.keys(r).length)&&("string"!=typeof r||0!==r.trim().length)&&(t[i]=r),t},{})},r$=function(e,t){return e?t.some(function(t){var i;return null==(i=null==e?void 0:e.matches)?void 0:i.call(e,t)})?e:r$(null==e?void 0:e.parentElement,t):null},rq=function(e){return null!==e.event.target&&!!e.closestTrackedAncestor},rK="1.17.0",rQ=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",iq,im]),rX=["type"],rY=["svg","path","g"],rZ=["password","hidden"],rJ=function(e,t){try{if("DOM_ELEMENT"===e.sourceType){var i=document.documentElement;if(e.scope&&t&&(i=t.closest(e.scope)),i&&e.selector)return i.querySelector(e.selector);return i}}catch(e){}},r0=function(e,t,i){e.forEach(function(e){if("string"!=typeof e&&"ATTACH_EVENT_PROPERTY"===e.actionType){var r=i.extractDataFromDataSource(e.dataSource,t.closestTrackedAncestor);t.targetElementProperties[e.destinationKey]=r}})},r1=function(e,t){var i,r,n,o=this;this.replaceSensitiveString=function(e){return iC(e,o.additionalMaskTextPatterns)},this.getHierarchy=function(e){var t,i,r,n,s=performance.now(),a=[];if(!e)return[];for(var l=function(e){var t=[];if(!e)return t;t.push(e);for(var i=e.parentElement;i&&"HTML"!==i.tagName;)t.push(i),i=i.parentElement;return t}(e),u=new Map,d=l.length-1;d>=0;d--){var c=l[d];if(c){var h,p=(h=c.getAttribute(iq))?h.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&"id"!==e&&"class"!==e}):[],f=d===l.length-1?[]:null!=(r=u.get(l[d+1]))?r:new Set,g=new Set((0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(f),!1),(0,ec.__read)(p),!1));u.set(c,g)}}a=l.map(function(e){var t;return function(e,t){if(null===e)return null;var i,r,n,o,s,a,l=String(e.tagName).toLowerCase(),u={tag:l},d=Array.from(null!=(o=null==(n=e.parentElement)?void 0:n.children)?o:[]);d.length&&(u.index=d.indexOf(e),u.indexOfType=d.filter(function(t){return t.tagName===e.tagName}).indexOf(e));var c=null==(a=null==(s=e.previousElementSibling)?void 0:s.tagName)?void 0:a.toLowerCase();c&&(u.prevSib=String(c));var h=e.getAttribute("id");h&&(u.id=String(h));var p=Array.from(e.classList);p.length&&(u.classes=p);var f={},g=Array.from(e.attributes).filter(function(e){return!rQ.has(e.name)}),m=!rW(e);if(!rZ.includes(String(e.getAttribute("type")))&&!rY.includes(l))try{for(var v=(0,ec.__values)(g),y=v.next();!y.done;y=v.next()){var b=y.value;if(!m||rX.includes(b.name)){if(t.has(b.name)){f[b.name]=iv;continue}f[b.name]=String(b.value).substring(0,128)}}}catch(e){i={error:e}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}return Object.keys(f).length&&(u.attrs=f),u}(e,null!=(t=u.get(e))?t:new Set)});var m=function(e){(null==e?void 0:e.attrs)&&Object.entries(e.attrs).forEach(function(t){var i=(0,ec.__read)(t,2),r=i[0],n=i[1];e.attrs&&(e.attrs[r]=o.replaceSensitiveString(n))})};try{for(var v=(0,ec.__values)(a),y=v.next();!y.done;y=v.next()){var b=y.value;m(b)}}catch(e){t={error:e}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(t)throw t.error}}var w=performance.now();return null==(n=o.diagnosticsClient)||n.recordHistogram("autocapturePlugin.getHierarchy",w-s),a},this.getNearestLabel=function(e){var t,i=e.parentElement;if(!i)return"";try{t=i.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch(e){t=null}return t?o.getText(t):o.getNearestLabel(i)},this.getEventProperties=function(e,t,i){var r,n,s,a,l=null==(s=null==(n=null==t?void 0:t.tagName)?void 0:n.toLowerCase)?void 0:s.call(n),u="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:null,top:null},d=o.getHierarchy(t),c=null==(a=d[0])?void 0:a.attrs,h=o.getNearestLabel(t),p=Object.entries(null!=c?c:{}).reduce(function(e,t){var r=(0,ec.__read)(t,2),n=r[0],o=r[1];if(n.startsWith(i)){var s=n.replace(i,"");s&&(e[s]=o||"")}return e},{}),f=((r={})["[Amplitude] Element Hierarchy"]=d,r[ij]=l,r[iG]=o.getText(t),r["[Amplitude] Element Position Left"]=null==u.left?null:Math.round(u.left),r["[Amplitude] Element Position Top"]=null==u.top?null:Math.round(u.top),r["[Amplitude] Element Attributes"]=p,r["[Amplitude] Element Parent Label"]=h,r[iW]=rH(window.location.href.split("?")[0]),r["[Amplitude] Page Title"]=ix(o.replaceSensitiveString),r["[Amplitude] Viewport Height"]=window.innerHeight,r["[Amplitude] Viewport Width"]=window.innerWidth,r);return f["[Amplitude] Element ID"]=t.getAttribute("id")||"",f["[Amplitude] Element Class"]=t.getAttribute("class"),f["[Amplitude] Element Aria Label"]=null==c?void 0:c["aria-label"],"a"===l&&"click"===e&&t instanceof HTMLAnchorElement&&(f["[Amplitude] Element Href"]=o.replaceSensitiveString(t.href)),rU(f)},this.addAdditionalEventProperties=function(e,t,i,r,n){void 0===n&&(n=!1);var s={event:e,timestamp:Date.now(),type:t};if(("click"===s.type||"change"===s.type)&&null!==s.event.target){if(n&&rj(s.event.target,s.type))return s.closestTrackedAncestor=s.event.target,s.targetElementProperties=o.getEventProperties(s.type,s.closestTrackedAncestor,r),s;var a=r$(s.event.target,i);a&&(s.closestTrackedAncestor=a,s.targetElementProperties=o.getEventProperties(s.type,a,r))}return s},this.extractDataFromDataSource=function(e,t){if("DOM_ELEMENT"===e.sourceType){var i=rJ(e,t);if(i){if("TEXT"===e.elementExtractType)return o.getText(i);if("ATTRIBUTE"===e.elementExtractType&&e.attribute)return i.getAttribute(e.attribute)}}},this.getText=function(e){if(null!==e.closest("[".concat(im,"]")))return iv;var t="";if(e.querySelector("[".concat(im,"], [contenteditable]"))){var i=e.cloneNode(!0);i.querySelectorAll("[".concat(im,"], [contenteditable]")).forEach(function(e){e.innerText=iv}),t=i.innerText||""}else t=e.innerText||"";return o.replaceSensitiveString(t.substring(0,255)).replace(/\s+/g," ").trim()},this.getEventTagProps=function(e){if(!e)return{};var t,i,r,n=null==(r=null==(i=null==e?void 0:e.tagName)?void 0:i.toLowerCase)?void 0:r.call(i);return rU(((t={})[ij]=n,t[iG]=o.getText(e),t[iW]=window.location.href.split("?")[0],t))},this.diagnosticsClient=null==t?void 0:t.diagnosticsClient;var s=null!=(n=e.maskTextRegex)?n:[],a=[];try{for(var l=(0,ec.__values)(s),u=l.next();!u.done;u=l.next()){var d=u.value;if(a.length>=25)break;if(d instanceof RegExp)a.push(d);else if("pattern"in d&&"string"==typeof d.pattern)try{a.push(RegExp(d.pattern,"i"))}catch(e){}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}this.additionalMaskTextPatterns=a},r2=function(){function e(e){var t=(void 0===e?{}:e).origin,i=this;this.endpoint=iU,this.requestCallbacks={},this.onSelect=function(e){i.notify({action:"element-selected",data:e})},this.onTrack=function(e,t){"selector-mode-changed"===e?i.notify({action:"track-selector-mode-changed",data:t}):"selector-moved"===e&&i.notify({action:"track-selector-moved",data:t})},this.endpoint=void 0===t?iU:t}return e.prototype.notify=function(e){var t,i,r,n;null==(i=null==(t=this.logger)?void 0:t.debug)||i.call(t,"Message sent: ",JSON.stringify(e)),null==(n=null==(r=window.opener)?void 0:r.postMessage)||n.call(r,e,this.endpoint)},e.prototype.sendRequest=function(e,t,i){var r=this;void 0===i&&(i={timeout:15e3});var n="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:n,action:e,args:t};return new Promise(function(t,s){r.requestCallbacks[n]={resolve:t,reject:s},r.notify(o),(null==i?void 0:i.timeout)>0&&setTimeout(function(){s(Error("".concat(e," timed out (id: ").concat(n,")"))),delete r.requestCallbacks[n]},i.timeout)})},e.prototype.handleResponse=function(e){var t;if(!this.requestCallbacks[e.id]){null==(t=this.logger)||t.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},e.prototype.setup=function(e){var t=this,i=void 0===e?{dataExtractor:new r1({})}:e,r=i.logger,n=i.endpoint,o=i.isElementSelectable,s=i.cssSelectorAllowlist,a=i.actionClickAllowlist,l=i.dataExtractor;this.logger=r,n&&this.endpoint===iU&&(this.endpoint=n);var u=null;window.addEventListener("message",function(e){if(null==(r=null==(i=t.logger)?void 0:i.debug)||r.call(i,"Message received: ",JSON.stringify(e)),t.endpoint===e.origin){var i,r,n,d,c,h=null==e?void 0:e.data,p=null==h?void 0:h.action;if(p)if("id"in h)null==(d=null==(n=t.logger)?void 0:n.debug)||d.call(n,"Received Response to previous request: ",JSON.stringify(e)),t.handleResponse(h);else if("ping"===p)t.notify({action:"pong"});else if("initialize-visual-tagging-selector"===p){var f,g=null==h?void 0:h.data;(f="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",new Promise(function(e,t){var i;try{var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=f,r.addEventListener("load",function(){e({status:!0})},{once:!0}),r.addEventListener("error",function(){t({status:!1,message:"Failed to load the script ".concat(f)})}),null==(i=document.head)||i.appendChild(r)}catch(e){t(e)}})).then(function(){var e;u=null==(e=null==window?void 0:window.amplitudeVisualTaggingSelector)?void 0:e.call(window,{getEventTagProps:l.getEventTagProps,isElementSelectable:function(e){return!o||o((null==g?void 0:g.actionType)||"click",e)},onTrack:t.onTrack,onSelect:t.onSelect,visualHighlightClass:"amp-visual-tagging-selector-highlight",messenger:t,cssSelectorAllowlist:s,actionClickAllowlist:a,extractDataFromDataSource:l.extractDataFromDataSource,dataExtractor:l,diagnostics:{autocapture:{version:rK}}}),t.notify({action:"selector-loaded"})}).catch(function(){var e;null==(e=t.logger)||e.warn("Failed to initialize visual tagging selector")})}else"close-visual-tagging-selector"===p&&(null==(c=null==u?void 0:u.close)||c.call(u))}}),this.notify({action:"page-loaded"})},e}();function r5(e,t){return rx(function(i,r){var n=0;i.subscribe(rS(r,function(i){return e.call(t,i,n++)&&r.next(i)}))})}var r3=function(e){function t(t,i){return e.call(this)||this}return(0,ec.__extends)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i0),r4={setInterval:function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=r4.delegate;return(null==n?void 0:n.setInterval)?n.setInterval.apply(n,(0,ec.__spreadArray)([e,t],(0,ec.__read)(i))):setInterval.apply(void 0,(0,ec.__spreadArray)([e,t],(0,ec.__read)(i)))},clearInterval:function(e){var t=r4.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},r8=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r.pending=!1,r}return(0,ec.__extends)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i,r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=null!=(i=this.id)?i:this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),r4.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&r4.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i,r=!1;try{this.work(e)}catch(e){r=!0,i=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,i=this.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,iJ(r,this),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(r3),r6={now:function(){return(r6.delegate||Date).now()},delegate:void 0},r7=function(){function e(t,i){void 0===i&&(i=e.now),this.schedulerActionCtor=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},e.now=r6.now,e}(),r9=new(function(e){function t(t,i){void 0===i&&(i=r7.now);var r=e.call(this,t,i)||this;return r.actions=[],r._active=!1,r}return(0,ec.__extends)(t,e),t.prototype.flush=function(e){var t,i=this.actions;if(this._active)return void i.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=i.shift())if(this._active=!1,t){for(;e=i.shift();)e.unsubscribe();throw t}},t}(r7))(r8);function ne(e){return void 0===e&&(e=1/0),rP(rc,e)}var nt=new rh(function(e){return e.complete()});function ni(e){return e&&iQ(e.schedule)}function nr(e){return e[e.length-1]}function nn(e){return ni(nr(e))?e.pop():void 0}function no(e,t){return void 0===t&&(t=0),rx(function(i,r){i.subscribe(rS(r,function(i){return rE(r,e,function(){return r.next(i)},t)},function(){return rE(r,e,function(){return r.complete()},t)},function(i){return rE(r,e,function(){return r.error(i)},t)}))})}function ns(e,t){return void 0===t&&(t=0),rx(function(i,r){r.add(e.schedule(function(){return i.subscribe(r)},t))})}function na(e,t){if(!e)throw Error("Iterable cannot be null");return new rh(function(i){rE(i,t,function(){var r=e[Symbol.asyncIterator]();rE(i,t,function(){r.next().then(function(e){e.done?i.complete():i.next(e.value)})},0,!0)})})}function nl(e,t){return t?function(e,t){if(null!=e){if(iQ(e[rd]))return rw(e).pipe(ns(t),no(t));if(iK(e))return new rh(function(i){var r=0;return t.schedule(function(){r===e.length?i.complete():(i.next(e[r++]),i.closed||this.schedule())})});if(iX(e))return rw(e).pipe(ns(t),no(t));if(rf(e))return na(e,t);if(rv(e))return new rh(function(i){var r;return rE(i,t,function(){r=e[rm](),rE(i,t,function(){var e,t,n;try{t=(e=r.next()).value,n=e.done}catch(e){i.error(e);return}n?i.complete():i.next(t)},0,!0)}),function(){return iQ(null==r?void 0:r.return)&&r.return()}});if(rb(e))return na(ry(e),t)}throw rg(e)}(e,t):rw(e)}function nu(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=nn(t),n=(e=1/0,"number"==typeof nr(t)?t.pop():e);return t.length?1===t.length?rw(t[0]):ne(n)(nl(t,r)):nt}function nd(e){return e<=0?function(){return nt}:rx(function(t,i){var r=0;t.subscribe(rS(i,function(t){++r<=e&&(i.next(t),e<=r&&i.complete())}))})}function nc(e){return e instanceof Date&&!isNaN(e)}function nh(e,t,i){void 0===e&&(e=0),void 0===i&&(i=r9);var r=-1;return null!=t&&(ni(t)?i=t:r=t),new rh(function(t){var n=nc(e)?e-i.now():e;n<0&&(n=0);var o=0;return i.schedule(function(){t.closed||(t.next(o++),0<=r?this.schedule(void 0,r):t.complete())},n)})}var np=iY(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function nf(e){throw new np(e)}var ng=function(){return new rh(function(e){var t=new MutationObserver(function(t){e.next(t)});return t.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return t.disconnect()}})},nm=function(e){return void 0===e&&(e="click"),r_(document,e,{capture:!0})},nv=function(e,t){try{if("[Amplitude] Element Text"===t.subprop_key)return"is"===t.subprop_op&&t.subprop_value.includes(e.targetElementProperties["[Amplitude] Element Text"]);if("[Amplitude] Element Hierarchy"===t.subprop_key)return"autotrack css match"===t.subprop_op&&!!e.closestTrackedAncestor.closest(t.subprop_value.toString())}catch(e){console.error("Error matching event to filter",e)}return!1},ny={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},nb=function(e){var t,i,r,n,o=Object.values(ny).reduce(function(e,t){return e[t]=new Set,e},{});if(!e)return o;try{for(var s=(0,ec.__values)(e),a=s.next();!a.done;a=s.next()){var l=a.value;try{try{for(var u=(r=void 0,(0,ec.__values)(l.definition)),d=u.next();!d.done;d=u.next()){var c=ny[d.value.event_type];c&&o[c].add(l.id)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}catch(e){console.warn("Skipping Labeled Event due to malformed definition",null==l?void 0:l.id,e)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return o},nw=function(e){var t,i,r,n,o=new Map;try{for(var s=(0,ec.__values)(e),a=s.next();!a.done;a=s.next()){var l=a.value;try{for(var u=(r=void 0,(0,ec.__values)(l.conditions)),d=u.next();!d.done;d=u.next()){var c=d.value;if("LABELED_EVENT"===c.type){var h=c.match.eventId,p=o.get(h);p||(p=[],o.set(h,p)),p.push(l)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return o},nC=function(e,t){var i,r,n,o,s=new Set;try{for(var a=(0,ec.__values)(e),l=a.next();!l.done;l=a.next()){var u=l.value,d=t.get(u.id);if(d)try{for(var c=(n=void 0,(0,ec.__values)(d)),h=c.next();!h.done;h=c.next()){var p=h.value;s.add(p)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return Array.from(s)},nx=function(){function e(e,t,i,r){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=t,this.dataExtractor=i,this.options=r}return e.prototype.evaluate=function(e){var t,i,r=this.options.pageActions;if(!r)return e;var n=nC(Array.from(this.groupedLabeledEvents[e.type]).map(function(e){return r.labeledEvents[e]}).filter(function(t){return t.definition.some(function(t){return ny[t.event_type]===e.type&&t.filters.every(function(t){return nv(e,t)})})}),this.labeledEventToTriggerMap);try{for(var o=(0,ec.__values)(n),s=o.next();!s.done;s=o.next()){var a=s.value;r0(a.actions,e,this.dataExtractor)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return e},e.prototype.update=function(e,t,i){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=t,this.options=i},e}();(h=Q||(Q={})).ClickObservable="clickObservable",h.ChangeObservable="changeObservable",h.NavigateObservable="navigateObservable",h.MutationObservable="mutationObservable";var nS=function(e,t){void 0===e&&(e={}),null==t||t.diagnosticsClient.setTag("plugin.autocapture.version",rK);var i,r,n,o,s,a,l,u,d=e.dataAttributePrefix,c=void 0===d?iB:d,h=e.visualTaggingOptions,p=void 0===h?{enabled:!0,messenger:new r2}:h;e.cssSelectorAllowlist=null!=(i=e.cssSelectorAllowlist)?i:iN,e.actionClickAllowlist=null!=(r=e.actionClickAllowlist)?r:iV,e.debounceTime=null!=(n=e.debounceTime)?n:0,e.pageUrlExcludelist=null==(o=e.pageUrlExcludelist)?void 0:o.reduce(function(e,t){if("string"==typeof t&&e.push(t),t instanceof RegExp&&e.push(t),"object"==typeof t&&null!==t&&"pattern"in t)try{e.push(new RegExp(t.pattern))}catch(e){console.warn("Invalid regex pattern: ".concat(t.pattern),e)}return e},[]);var f="@amplitude/plugin-autocapture-browser",g=[],m=new r1(e,t),v=function(){var t,i,r=nm().pipe(rR(function(t){return m.addAdditionalEventProperties(t,"click",e.cssSelectorAllowlist,c)}),rN()),n=r_(document,"change",{capture:!0}).pipe(rR(function(t){return m.addAdditionalEventProperties(t,"change",e.cssSelectorAllowlist,c)}),rN());window.navigation&&(i=r_(window.navigation,"navigate").pipe(rR(function(t){return m.addAdditionalEventProperties(t,"navigate",e.cssSelectorAllowlist,c)}),rN()));var o=ng().pipe(rR(function(t){return m.addAdditionalEventProperties(t,"mutation",e.cssSelectorAllowlist,c)}),rN());return(t={})[Q.ClickObservable]=r,t[Q.ChangeObservable]=n,t[Q.NavigateObservable]=i,t[Q.MutationObservable]=o,t},y=nb(Object.values(null!=(a=null==(s=e.pageActions)?void 0:s.labeledEvents)?a:{})),b=nw(null!=(u=null==(l=e.pageActions)?void 0:l.triggers)?u:[]),w=new nx(y,b,m,e),C=function(t){var i,r;t&&(e.pageActions=(0,ec.__assign)((0,ec.__assign)({},e.pageActions),t),y=nb(Object.values(null!=(i=e.pageActions.labeledEvents)?i:{})),b=nw(null!=(r=e.pageActions.triggers)?r:[]),w.update(y,b,e))};return{name:f,type:"enrichment",setup:function(t,i){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var r,n,o,s,a,l,u,d,h,y;return(0,ec.__generator)(this,function(b){var x,S,k,R,E,P,M,D,T,O,_,A,F,I,L,N,B,V,H,z,j,G,W,U,$,q,K,Q,X,Y,Z,J;return"undefined"==typeof document?[2]:(t.fetchRemoteConfig&&(t.remoteConfigClient?t.remoteConfigClient.subscribe("analyticsSDK.pageActions","all",function(e){C(e)}):t.loggerProvider.debug("Remote config client is not provided, skipping remote config fetch")),r=rG(e,e.cssSelectorAllowlist),n=rG(e,e.actionClickAllowlist),S=(x={allObservables:o=v(),options:e,amplitude:i,shouldTrackEvent:r,evaluateTriggers:w.evaluate.bind(w)}).amplitude,k=x.allObservables,R=x.options,E=x.shouldTrackEvent,P=x.evaluateTriggers,O=nu((M=k.clickObservable).pipe(rx(function(e,t){var i,r=!1;e.subscribe(rS(t,function(e){var n=i;i=e,r&&t.next([n,e]),r=!0}))}),r5(function(e){var t=(0,ec.__read)(e,2),i=t[0],r=t[1],n=i.event.target!==r.event.target,o=20>=Math.abs(r.event.screenX-i.event.screenX)&&20>=Math.abs(r.event.screenY-i.event.screenY);return n&&!o})),M.pipe((D=R.debounceTime,void 0===T&&(T=r9),rx(function(e,t){var i=null,r=null,n=null,o=function(){if(i){i.unsubscribe(),i=null;var e=r;r=null,t.next(e)}};function s(){var e=n+D,r=T.now();if(r<e){i=this.schedule(void 0,e-r),t.add(i);return}o()}e.subscribe(rS(t,function(e){r=e,n=T.now(),i||(i=T.schedule(s,D),t.add(i))},function(){o(),t.complete()},void 0,function(){r=i=null}))})),rR(function(){return"timeout"}))),s=M.pipe((void 0===_&&(_=r9),A=nh(0,_),function e(t,i){return i?function(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne(1)(nl(e,nn(e)))}(i.pipe(nd(1),rx(function(e,t){e.subscribe(rS(t,i6))})),r.pipe(e(t)))}:rP(function(e,i){return rw(t(e,i)).pipe(nd(1),rR(function(){return e}))})}(function(){return A})),r5(rq),r5(function(e){return E("click",e.closestTrackedAncestor)}),rR(function(e){return P(e)}),rx(function(e,t){var i=[];return e.subscribe(rS(t,function(e){return i.push(e)},function(){t.next(i),t.complete()})),rw(O).subscribe(rS(t,function(){var e=i;i=[],t.next(e)},i6)),function(){i=null}})).subscribe(function(e){var t,i,r=(e.length,iH);try{for(var n=(0,ec.__values)(e),o=n.next();!o.done;o=n.next()){var s=o.value;null==S||S.track(r,s.targetElementProperties)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}}),g.push(s),I=(F={allObservables:o,getEventProperties:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.getEventProperties.apply(m,(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(e),!1),[c],!1))},amplitude:i,shouldTrackEvent:r,evaluateTriggers:w.evaluate.bind(w)}).amplitude,L=F.allObservables,N=F.getEventProperties,B=F.shouldTrackEvent,V=F.evaluateTriggers,a=L.changeObservable.pipe(r5(rq),r5(function(e){return B("change",e.closestTrackedAncestor)}),rR(function(e){return V(e)})).subscribe(function(e){null==I||I.track("[Amplitude] Element Changed",N("change",e.closestTrackedAncestor))}),g.push(a),z=(H={allObservables:o,options:e,getEventProperties:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.getEventProperties.apply(m,(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(e),!1),[c],!1))},amplitude:i,shouldTrackEvent:r,shouldTrackActionClick:n}).amplitude,j=H.allObservables,G=H.options,W=H.getEventProperties,U=H.shouldTrackEvent,$=H.shouldTrackActionClick,q=j.clickObservable,K=j.mutationObservable,Q=j.navigateObservable,X=q.pipe(r5(function(e){return!U("click",e.closestTrackedAncestor)}),rR(function(e){var t=r$(e.event.target,G.actionClickAllowlist);return e.closestTrackedAncestor=t,null!==e.closestTrackedAncestor&&(e.targetElementProperties=W(e.type,e.closestTrackedAncestor)),e}),r5(rq),r5(function(e){return $("click",e.closestTrackedAncestor)})),Y=[K],Q&&Y.push(Q),Z=nu.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(Y),!1)),l=X.pipe((J=function(e){return Z.pipe(nd(1),function(e,t){var i=nc(e)?{first:e}:"number"==typeof e?{each:e}:e,r=i.first,n=i.each,o=i.with,s=void 0===o?nf:o,a=i.scheduler,l=void 0===a?r9:a,u=i.meta,d=void 0===u?null:u;if(null==r&&null==n)throw TypeError("No timeout provided.");return rx(function(e,t){var i,o,a=null,u=0,c=function(e){o=rE(t,l,function(){try{i.unsubscribe(),rw(s({meta:d,lastValue:a,seen:u})).subscribe(t)}catch(e){t.error(e)}},e)};i=e.subscribe(rS(t,function(e){null==o||o.unsubscribe(),u++,t.next(a=e),n>0&&c(n)},void 0,void 0,function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),a=null})),u||c(null!=r?"number"==typeof r?r:r-l.now():n)})}({first:500,with:function(){return nt}}),rR(function(){return e}))},rx(function(e,t){var i=null,r=0,n=!1,o=function(){return n&&!i&&t.complete()};e.subscribe(rS(t,function(e){null==i||i.unsubscribe(),rw(J(e,r++)).subscribe(i=rS(t,function(e){return t.next(e)},function(){i=null,o()}))},function(){n=!0,o()}))}))).subscribe(function(e){null==z||z.track(iH,W("click",e.closestTrackedAncestor))}),g.push(l),null==(h=null==t?void 0:t.loggerProvider)||h.log("".concat(f," has been successfully added.")),window.opener&&p.enabled&&(u=e.cssSelectorAllowlist,d=e.actionClickAllowlist,null==(y=p.messenger)||y.setup((0,ec.__assign)((0,ec.__assign)({dataExtractor:m,logger:null==t?void 0:t.loggerProvider},(null==t?void 0:t.serverZone)&&{endpoint:i$[t.serverZone]}),{isElementSelectable:rG(e,(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(u),!1),(0,ec.__read)(d),!1)),cssSelectorAllowlist:u,actionClickAllowlist:d}))),[2])})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r;return(0,ec.__generator)(this,function(n){try{for(t=(e=(0,ec.__values)(g)).next();!t.done;t=e.next())t.value.unsubscribe()}catch(e){i={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(i)throw i.error}}return[2]})})}}},nk=(0,ec.__spreadArray)(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],(0,ec.__read)(["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]']),!1),nR=["*"],nE=Array.isArray;function nP(e,t){var i,r,n,o,s=t.event,a=s.clientX,l=s.clientY;e.yMin=Math.min(null!=(i=e.yMin)?i:l,l),e.yMax=Math.max(null!=(r=e.yMax)?r:l,l),e.xMin=Math.min(null!=(n=e.xMin)?n:a,a),e.xMax=Math.max(null!=(o=e.xMax)?o:a,a),e.isOutOfBounds=e.yMax-e.yMin>50||e.xMax-e.xMin>50}function nM(e){var t=e[0],i=e[e.length-1];return{rageClickEvent:(0,ec.__assign)({"[Amplitude] Begin Time":new Date(t.timestamp).toISOString(),"[Amplitude] End Time":new Date(i.timestamp).toISOString(),"[Amplitude] Duration":i.timestamp-t.timestamp,"[Amplitude] Clicks":e.map(function(e){return{X:e.event.clientX,Y:e.event.clientY,Time:e.timestamp}}),"[Amplitude] Click Count":e.length},t.targetElementProperties),time:t.timestamp}}var nD=function(e){void 0===e&&(e={});var t,i,r,n,o,s="@amplitude/plugin-frustration-browser",a=[],l=null!=(i=null==(t=e.rageClicks)?void 0:t.cssSelectorAllowlist)?i:nR,u=null!=(n=null==(r=e.deadClicks)?void 0:r.cssSelectorAllowlist)?n:nk,d=null!=(o=e.dataAttributePrefix)?o:iB,c=new r1(e),h=(0,ec.__spreadArray)([],(0,ec.__read)(new Set((0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(l),!1),(0,ec.__read)(u),!1))),!1),p=function(){var e,t,i=nm("pointerdown").pipe(rR(function(e){return c.addAdditionalEventProperties(e,"click",h,d,!0)}),rN());window.navigation&&(t=r_(window.navigation,"navigate").pipe(rR(function(e){return c.addAdditionalEventProperties(e,"navigate",h,d)}),rN()));var r=ng().pipe(rR(function(e){return c.addAdditionalEventProperties(e,"mutation",h,d)}),rN());return(e={})[Q.ClickObservable]=i,e[Q.ChangeObservable]=new rh,e[Q.NavigateObservable]=t,e[Q.MutationObservable]=r,e};return{name:s,type:"enrichment",setup:function(t,i){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var r,n,o,h,f,g;return(0,ec.__generator)(this,function(m){var v,y,b,w,C,x,S,k,R,E,P,M,D,T,O;return"undefined"==typeof document?[2]:(r=rG(e,l),n=rG(e,u),h=function(e){var t,i=e.amplitude,r=e.allObservables,n=e.shouldTrackRageClick,o=r.clickObservable,s=[],a={};function l(e){s=[],a={},e&&(nP(a,e),s.push(e))}return o.pipe(r5(rq),r5(function(e){return n("click",e.closestTrackedAncestor)}),rR(function(e){if(t&&clearTimeout(t),nP(a,e),0===s.length)return s.push(e),null;if((r=s).length>0&&r[r.length-1].closestTrackedAncestor!==e.closestTrackedAncestor||(o=Math.max(0,(n=s).length-4+1),u=n[o],e.timestamp-u.timestamp>=1e3)||a.isOutOfBounds){var r,n,o,u,d=s.length>=4?nM(s):null;return l(e),d}return s.push(e),s.length>=4&&(t=setTimeout(function(){var e=nM(s),t=e.rageClickEvent,r=e.time;i.track(iz,t,{time:r}),l()},1e3)),null}),r5(function(e){return null!==e})).subscribe(function(e){null!==e&&i.track(iz,e.rageClickEvent,{time:e.time})})}({allObservables:o=p(),amplitude:i,shouldTrackRageClick:r}),a.push(h),y=(v={amplitude:i,allObservables:o,getEventProperties:function(e,t){return c.getEventProperties(e,t,d)},shouldTrackDeadClick:n}).amplitude,b=v.allObservables,w=v.getEventProperties,C=v.shouldTrackDeadClick,x=b.clickObservable,S=b.mutationObservable,k=b.navigateObservable,R=x.pipe(r5(rq),r5(function(e){return C("click",e.closestTrackedAncestor)}),r5(function(e){return null===e.event.target.closest('a[target="_blank"]')})),E=[S],k&&E.push(k),P=nu.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(E),!1)),f=R.pipe(rP(function(e){var t;return(function(){for(var e,t,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return 1===(i=1===(t=i).length&&nE(t[0])?t[0]:t).length?rw(i[0]):new rh((e=i,function(t){for(var i=[],r=function(r){i.push(rw(e[r]).subscribe(rS(t,function(e){if(i){for(var n=0;n<i.length;n++)n!==r&&i[n].unsubscribe();i=null}t.next(e)})))},n=0;i&&!t.closed&&n<e.length;n++)r(n)}))})(new rh(function(i){return t=setTimeout(function(){return i.next(e)},3e3),function(){clearTimeout(t)}}),P.pipe(nd(1),rR(function(){return null}))).pipe(r5(function(e){return null!==e}))}),(void 0===M&&(M=r9),D=nh(3e3,M),T=function(){return D},O=void 0,rx(function(e,t){var i=null!=O?O:{},r=i.leading,n=void 0===r||r,o=i.trailing,s=void 0!==o&&o,a=!1,l=null,u=null,d=!1,c=function(){null==u||u.unsubscribe(),u=null,s&&(f(),d&&t.complete())},h=function(){u=null,d&&t.complete()},p=function(e){return u=rw(T(e)).subscribe(rS(t,c,h))},f=function(){if(a){a=!1;var e=l;l=null,t.next(e),d||p(e)}};e.subscribe(rS(t,function(e){a=!0,l=e,u&&!u.closed||(n?f():p(e))},function(){d=!0,s&&a&&u&&!u.closed||t.complete()}))}))).subscribe(function(e){var t={"[Amplitude] X":e.event.clientX,"[Amplitude] Y":e.event.clientY};y.track("[Amplitude] Dead Click",(0,ec.__assign)((0,ec.__assign)({},w("click",e.closestTrackedAncestor)),t),{time:e.timestamp})}),a.push(f),null==(g=null==t?void 0:t.loggerProvider)||g.log("".concat(s," has been successfully added.")),[2])})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r;return(0,ec.__generator)(this,function(n){try{for(t=(e=(0,ec.__values)(a)).next();!t.done;t=e.next())t.value.unsubscribe()}catch(e){i={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(i)throw i.error}}return[2]})})}}};function nT(e,t,i){e&&function e(t){var i,r,n=t.json,o=t.targetObject,s=t.allowlist,a=t.excludelist,l=t.ancestors,u=t.parentObject,d=t.targetKey;o||(o=n);var c=Object.keys(o);try{for(var h=(0,ec.__values)(c),p=h.next();!p.done;p=h.next()){var f,g=p.value,m=(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(l),!1),[g],!1);(f=o[g],"string"==typeof f||"number"==typeof f||"boolean"==typeof f||null==f)?(!n_(m,s)||n_(m,a))&&delete o[g]:e({json:n,targetObject:o[g],allowlist:s,excludelist:a,ancestors:m,parentObject:o,targetKey:g})}}catch(e){i={error:e}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}0===Object.keys(o).length&&u&&d&&delete u[d]}({json:e,allowlist:t.map(nO),excludelist:i.map(nO),ancestors:[]})}function nO(e){return e.startsWith("/")&&(e=e.slice(1)),e.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function n_(e,t){return t.some(function(t){return function e(t,i,r,n){if(void 0===r&&(r=0),void 0===n&&(n=0),n===i.length)return r===t.length;if(r===t.length){for(;n<i.length&&"**"===i[n];)n++;return n===i.length}var o=i[n];if("**"===o){if(n+1===i.length)return!0;for(var s=r;s<=t.length;s++)if(e(t,i,s,n+1))return!0;return!1}return("*"===o||o===t[r])&&e(t,i,r+1,n+1)}(e,t)})}var nA=function(){function e(e){this.request=e}return e.prototype.headers=function(e){void 0===e&&(e=[]);var t,i,r=this.request.headers,n={};if(Array.isArray(r))r.forEach(function(e){var t=(0,ec.__read)(e,2),i=t[0],r=t[1];n[i]=r});else if(r instanceof Headers)r.forEach(function(e,t){n[t]=e});else if("object"==typeof r&&null!==r)try{for(var o=(0,ec.__values)(Object.entries(r)),s=o.next();!s.done;s=o.next()){var a=(0,ec.__read)(s.value,2),l=a[0],u=a[1];n[l]=u}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return nH(n,{allow:e})},Object.defineProperty(e.prototype,"bodySize",{get:function(){if("number"==typeof this._bodySize)return this._bodySize;var e=(0,eF.getGlobalScope)();if(null==e?void 0:e.TextEncoder){var t=this.request.body;return this._bodySize=nI(t,100),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return"string"==typeof this.request.body?this.request.body:null},enumerable:!1,configurable:!0}),e.prototype.json=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return 0===e.length?[2,null]:[2,nB(this.body,e,t)]})})},e}(),nF=function(){function e(e,t){this.bodyRaw=e,this.requestHeaders=t}return e.prototype.headers=function(e){return void 0===e&&(e=[]),nH(this.requestHeaders,{allow:e})},Object.defineProperty(e.prototype,"bodySize",{get:function(){return nI(this.bodyRaw,100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return"string"==typeof this.bodyRaw?this.bodyRaw:null},enumerable:!1,configurable:!0}),e.prototype.json=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return 0===e.length?[2,null]:[2,nB(this.body,e,t)]})})},e}();function nI(e,t){var i,r,n,o,s=(0,eF.getGlobalScope)(),a=null==s?void 0:s.TextEncoder;if(a){if("string"==typeof e)o=e,n=new a().encode(o).length;else if(e instanceof Blob)n=(o=e).size;else if(e instanceof URLSearchParams)o=e,n=new a().encode(o.toString()).length;else if(ArrayBuffer.isView(e))n=(o=e).byteLength;else if(e instanceof ArrayBuffer)n=(o=e).byteLength;else if(e instanceof FormData){var l=0,u=0;try{for(var d=(0,ec.__values)(e.entries()),c=d.next();!c.done;c=d.next()){var h=(0,ec.__read)(c.value,2),p=h[0],f=h[1];if(l+=p.length,"string"==typeof f)l+=new a().encode(f).length;else{if(!(f instanceof Blob))return;l+=f.size}if(++u>=t)return}}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}n=l}else if(e instanceof ReadableStream){o=e;return}return n}}var nL=function(){function e(e){this.response=e}return e.prototype.headers=function(e){var t;if(void 0===e&&(e=[]),this.response.headers instanceof Headers){var i=this.response.headers,r={};return null==(t=null==i?void 0:i.forEach)||t.call(i,function(e,t){r[t]=e}),nH(r,{allow:e})}},Object.defineProperty(e.prototype,"bodySize",{get:function(){if(void 0!==this._bodySize)return this._bodySize;var e,t,i=null==(t=null==(e=this.response.headers)?void 0:e.get)?void 0:t.call(e,"content-length"),r=i?parseInt(i,10):void 0;return this._bodySize=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e.prototype.text=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){switch(e.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this.clonedResponse.text(),new Promise(function(e){return setTimeout(function(){return e(null)},500)})])];case 2:return[2,e.sent()];case 3:return e.sent(),[2,null];case 4:return[2]}})})},e.prototype.json=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){switch(i.label){case 0:if(0===e.length)return[2,null];return[4,this.text()];case 1:return[2,nB(i.sent(),e,t)]}})})},e}(),nN=function(){function e(e,t,i,r){this.statusCode=e,this.headersString=t,this.size=i,this.getJson=r}return Object.defineProperty(e.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),e.prototype.headers=function(e){if(void 0===e&&(e=[]),!this.headersString)return{};var t,i,r={},n=this.headersString.split("\r\n");try{for(var o=(0,ec.__values)(n),s=o.next();!s.done;s=o.next()){var a=s.value,l=(0,ec.__read)(a.split(": "),2),u=l[0],d=l[1];u&&d&&(r[u]=d)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return nH(r,{allow:e})},e.prototype.json=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),(0,ec.__awaiter)(this,void 0,void 0,function(){var i;return(0,ec.__generator)(this,function(r){return 0===e.length?[2,null]:(i=this.getJson())?(nT(i,e,t),[2,i]):[2,null]})})},e}();function nB(e,t,i){if(!e)return null;try{var r=JSON.parse(e);return nT(r,t,i),r}catch(e){return null}}(p=X||(X={})).REDACT="redact",p.REMOVE="remove";var nV="[REDACTED]",nH=function(e,t){var i,r,n=t.allow,o=void 0===n?[]:n,s=t.strategy,a=void 0===s?X.REMOVE:s,l=(0,ec.__spreadArray)([],(0,ec.__read)(eM),!1),u={};try{for(var d=(0,ec.__values)(Object.keys(e)),c=d.next();!c.done;c=d.next()){var h=c.value;!function(t){var i=t.toLowerCase();l.find(function(e){return e.toLowerCase()===i})?a===X.REDACT&&(u[t]=nV):o.find(function(e){return e.toLowerCase()===i})?u[t]=e[t]:a===X.REDACT&&(u[t]=nV)}(h)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}return u},nz=function(){function e(e,t,i,r,n,o,s,a,l,u,d){void 0===s&&(s=0),this.type=e,this.method=t,this.timestamp=i,this.startTime=r,this.url=n,this.requestWrapper=o,this.status=s,this.duration=a,this.responseWrapper=l,this.error=u,this.endTime=d}return e.prototype.toSerializable=function(){var e,t,i,r;return Object.fromEntries(Object.entries({type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:null==(e=this.requestWrapper)?void 0:e.headers((0,ec.__spreadArray)([],(0,ec.__read)(eP),!1)),requestBodySize:null==(t=this.requestWrapper)?void 0:t.bodySize,responseHeaders:null==(i=this.responseWrapper)?void 0:i.headers((0,ec.__spreadArray)([],(0,ec.__read)(eP),!1)),responseBodySize:null==(r=this.responseWrapper)?void 0:r.bodySize}).filter(function(e){var t=(0,ec.__read)(e,2);return void 0!==(t[0],t[1])}))},e}(),nj=function(e,t){void 0===t&&(t=eL()),this.callback=e,this.id=t},nG=new(function(){function e(t){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=t;var i=(0,eF.getGlobalScope)();e.isSupported()&&(this.globalScope=i)}return e.isSupported=function(){var e=(0,eF.getGlobalScope)();return!!e&&!!e.fetch},e.prototype.subscribe=function(e,t){var i,r,n,o,s,a,l,u,d,c;if(this.logger||(this.logger=t),this.eventCallbacks.set(e.id,e),!this.isObserving){var h=null==(n=null==(r=null==(i=this.globalScope)?void 0:i.XMLHttpRequest)?void 0:r.prototype)?void 0:n.open,p=null==(a=null==(s=null==(o=this.globalScope)?void 0:o.XMLHttpRequest)?void 0:s.prototype)?void 0:a.send,f=null==(d=null==(u=null==(l=this.globalScope)?void 0:l.XMLHttpRequest)?void 0:u.prototype)?void 0:d.setRequestHeader;h&&p&&f&&this.observeXhr(h,p,f);var g=null==(c=this.globalScope)?void 0:c.fetch;g&&this.observeFetch(g),this.isObserving=!0}},e.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},e.prototype.triggerEventCallbacks=function(e){var t=this;this.eventCallbacks.forEach(function(i){var r;try{i.callback(e)}catch(e){null==(r=t.logger)||r.debug("an unexpected error occurred while triggering event callbacks",e)}})},e.prototype.handleNetworkRequestEvent=function(e,t,i,r,n,o,s){if(void 0!==o&&void 0!==s){var a,l,u,d,c="GET";if("object"==typeof t&&null!==t&&"url"in t&&"method"in t?(l=t.url,c=t.method):l=null==(a=null==t?void 0:t.toString)?void 0:a.call(t),l)try{var h=new URL(l);l="".concat(h.protocol,"//").concat(h.host).concat(h.pathname).concat(h.search).concat(h.hash)}catch(e){}c=(null==i?void 0:i.method)||c,r&&(u=r.status),n&&(d={name:n.name||"UnknownError",message:n.message||"An unknown error occurred"},u=0);var p=Math.floor(performance.now()-s),f=Math.floor(o+p),g=new nz(e,c,o,o,l,i,u,p,r,d,f);this.triggerEventCallbacks(g)}},e.prototype.getTimestamps=function(){var e,t;return{startTime:null==(e=Date.now)?void 0:e.call(Date),durationStart:null==(t=null==performance?void 0:performance.now)?void 0:t.call(performance)}},e.prototype.observeFetch=function(e){var t=this;this.globalScope&&e&&(this.globalScope.fetch=function(i,r){return(0,ec.__awaiter)(t,void 0,void 0,function(){var t,n,o,s,a;return(0,ec.__generator)(this,function(l){switch(l.label){case 0:try{t=this.getTimestamps()}catch(e){null==(s=this.logger)||s.debug("an unexpected error occurred while retrieving timestamps",e)}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e(i,r)];case 2:return n=l.sent(),[3,4];case 3:return o=l.sent(),[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",i,r?new nA(r):void 0,n?new nL(n):void 0,o,null==t?void 0:t.startTime,null==t?void 0:t.durationStart)}catch(e){null==(a=this.logger)||a.debug("an unexpected error occurred while handling fetch",e)}if(n)return[2,n];throw o}})})})},e.createXhrJsonParser=function(e,t){return function(){var i,r;try{if("json"===e.responseType){if(null==(i=t.globalScope)?void 0:i.structuredClone)return t.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(i){i instanceof Error&&"InvalidStateError"===i.name&&(null==(r=t.logger)||r.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'")))}return null}},e.prototype.observeXhr=function(t,i,r){if(this.globalScope&&t&&i){var n=this.globalScope.XMLHttpRequest.prototype,o=this;n.open=function(){for(var e,i,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=(0,ec.__read)(r,2),a=s[0],l=s[1];try{this.$$AmplitudeAnalyticsEvent=(0,ec.__assign)({method:a,url:null==(e=null==l?void 0:l.toString)?void 0:e.call(l),headers:{}},o.getTimestamps())}catch(e){null==(i=o.logger)||i.error("an unexpected error occurred while calling xhr open",e)}return t.apply(this,r)},n.send=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this,s=e.createXhrJsonParser(this,o),a=t[0],l=n.$$AmplitudeAnalyticsEvent;return n.addEventListener("loadend",function(){var e;try{var t=n.getAllResponseHeaders(),i=n.getResponseHeader("content-length"),r=new nN(n.status,t,i?parseInt(i,10):void 0,s),u=n.$$AmplitudeAnalyticsEvent.headers,d=new nF(a,u);l.status=n.status,o.handleNetworkRequestEvent("xhr",{url:l.url,method:l.method},d,r,void 0,l.startTime,l.durationStart)}catch(t){null==(e=o.logger)||e.error("an unexpected error occurred while handling xhr send",t)}}),i.apply(n,t)},n.setRequestHeader=function(e,t){var i;try{this.$$AmplitudeAnalyticsEvent.headers[e]=t}catch(e){null==(i=o.logger)||i.error("an unexpected error occurred while calling xhr setRequestHeader",e)}r.apply(this,[e,t])}}},e}()),nW="[Amplitude] Network Request",nU="500-599";function n$(e,t){return RegExp("^"+t.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(e)}function nq(e,t){var i,r,n=t.split(",");try{for(var o=(0,ec.__values)(n),s=o.next();!s.done;s=o.next()){var a=s.value,l=(0,ec.__read)(a.split("-").map(Number),2),u=l[0],d=l[1];if(e===u&&void 0===d||e>=u&&e<=d)return!0}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return!1}function nK(e){var t;if(e)try{var i=null==(t=(0,eF.getGlobalScope)())?void 0:t.location.href,r=new URL(e,i),n=r.searchParams.toString(),o=r.hash.replace("#",""),s=r.href,a=r.host;r.hash="",r.search="";var l=r.href;return{query:n,fragment:o,href:s,hrefWithoutQueryOrHash:l,host:a}}catch(e){return}}function nQ(e){return"object"!=typeof e||null===e?e?(0,ec.__spreadArray)([],(0,ec.__read)(eP),!1):void 0:0!==e.length?e:void 0}function nX(e){var t,i;return!(null==(t=null==e?void 0:e.allowlist)?void 0:t.length)&&!(null==(i=null==e?void 0:e.blocklist)?void 0:i.length)}(Y||(Y={})).NetworkObservable="networkObservable";var nY=function(e){void 0===e&&(e={});var t,i="@amplitude/plugin-network-capture-browser",r=[],n=function(){var e,i=new rh(function(e){var i=new nj(function(t){var i={event:t,timestamp:Date.now(),type:"network"};e.next(i)});return nG.subscribe(i,t),function(){nG.unsubscribe(i)}});return(e={})[Y.NetworkObservable]=i,e};return{name:i,type:"enrichment",setup:function(o,s){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var a,l;return(0,ec.__generator)(this,function(u){var d,c,h,p,f;return"undefined"==typeof document?[2]:(a=n(),t=null==o?void 0:o.loggerProvider,c=(d={allObservables:a,networkTrackingOptions:e,amplitude:s,loggerProvider:t}).allObservables,h=d.networkTrackingOptions,p=d.amplitude,f=d.loggerProvider,l=c.networkObservable.pipe(r5(function(e){return function(e,t){void 0===t&&(t={});var i,r,n=nK(e.url);if(!n)return!1;var o=n.host;return!(!1!==t.ignoreAmplitudeRequests&&(n$(o,"*.amplitude.com")||n$(o,"amplitude.com"))||(null==(i=t.ignoreHosts)?void 0:i.find(function(e){return n$(o,e)})))&&(!!t.captureRules||void 0===e.status||!!nq(e.status,nU))&&(!t.captureRules||((0,ec.__spreadArray)([],(0,ec.__read)(t.captureRules),!1).reverse().find(function(t){if(r=function(e,t,i,r,n){if((!e.hosts||e.hosts.find(function(e){return n$(t,e)}))&&(!r||!e.urls||rV(r,e.urls))&&(!n||!e.methods||e.methods.find(function(e){return n.toLowerCase()===e.toLowerCase()||"*"===e})))return(!i&&0!==i||!!nq(i,e.statusCodeRange||nU))&&!0}(t,o,e.status,e.url,e.method)){var i=nQ(t.responseHeaders);if(e.responseWrapper&&i){var n=e.responseWrapper.headers(i);n&&(e.responseHeaders=n)}var s=nQ(t.requestHeaders);if(e.requestWrapper&&s){var a=e.requestWrapper.headers(s);a&&(e.requestHeaders=a)}e.responseWrapper&&t.responseBody&&!nX(t.responseBody)&&(e.responseBodyJson=e.responseWrapper.json(t.responseBody.allowlist,t.responseBody.blocklist)),e.requestWrapper&&t.requestBody&&!nX(t.requestBody)&&(e.requestBodyJson=e.requestWrapper.json(t.requestBody.allowlist,t.requestBody.blocklist))}return void 0!==r}),!!r))&&!(e.requestWrapper&&function(e,t){if(e.includes("amplitude.com"))try{var i=t.body;if("string"!=typeof i)return!1;if(JSON.parse(i).events.find(function(e){return e.event_type===nW}))return!0}catch(e){}return!1}(o,e.requestWrapper))}(e.event,h)})).subscribe(function(e){var t,i,r,n=e.event,o=nK(n.url);if(o){var s=null==(i=n.responseWrapper)?void 0:i.bodySize,a=null==(r=n.requestWrapper)?void 0:r.bodySize;!function(e,t,i,r){(0,ec.__awaiter)(this,void 0,void 0,function(){var n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(!(t.requestBodyJson||t.responseBodyJson))return[3,2];return[4,Promise.all([t.requestBodyJson,t.responseBodyJson])];case 1:if(o=(n=ec.__read.apply(void 0,[a.sent(),2]))[0],s=n[1],o)try{e["[Amplitude] Request Body"]=JSON.stringify(o)}catch(e){null==r||r.debug("Failed to stringify request body",e)}if(s)try{e["[Amplitude] Response Body"]=JSON.stringify(s)}catch(e){null==r||r.debug("Failed to stringify response body")}a.label=2;case 2:return null==i||i.track(nW,e),[2]}})})}(((t={})["[Amplitude] URL"]=o.hrefWithoutQueryOrHash,t["[Amplitude] URL Query"]=o.query,t["[Amplitude] URL Fragment"]=o.fragment,t["[Amplitude] Request Method"]=n.method,t["[Amplitude] Status Code"]=n.status,t["[Amplitude] Start Time"]=n.startTime,t["[Amplitude] Completion Time"]=n.endTime,t["[Amplitude] Duration"]=n.duration,t["[Amplitude] Request Body Size"]=a,t["[Amplitude] Response Body Size"]=s,t["[Amplitude] Request Type"]=n.type,t["[Amplitude] Request Headers"]=n.requestHeaders,t["[Amplitude] Response Headers"]=n.responseHeaders,t),n,p,f)}}),r.push(l),null==t||t.log("".concat(i," has been successfully added.")),[2])})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,n;return(0,ec.__generator)(this,function(o){try{for(t=(e=(0,ec.__values)(r)).next();!t.done;t=e.next())t.value.unsubscribe()}catch(e){i={error:e}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(i)throw i.error}}return[2]})})}}};let nZ=-1,nJ=e=>{addEventListener("pageshow",t=>{t.persisted&&(nZ=t.timeStamp,e(t))},!0)},n0=(e,t,i,r)=>{let n,o;return s=>{let a;t.value>=0&&(s||r)&&((o=t.value-(n??0))||void 0===n)&&(n=t.value,t.delta=o,a=t.value,t.rating=a>i[1]?"poor":a>i[0]?"needs-improvement":"good",e(t))}},n1=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},n2=()=>{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},n5=()=>{let e=n2();return e?.activationStart??0},n3=(e,t=-1)=>{let i=n2(),r="navigate";return nZ>=0?r="back-forward-cache":i&&(document.prerendering||n5()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(0x82f79cd8fff*Math.random())+1e12}`,navigationType:r}},n4=new WeakMap;function n8(e,t){return n4.get(e)||n4.set(e,new t),n4.get(e)}class n6{t;i=0;o=[];h(e){if(e.hadRecentInput)return;let t=this.o[0],i=this.o.at(-1);this.i&&t&&i&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}let n7=(e,t,i={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...i}),r}}catch{}},n9=e=>{let t=!1;return()=>{t||(e(),t=!0)}},oe=-1,ot=new Set,oi=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,or=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(let e of ot)e();isFinite(oe)||(oe="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",or,!0))}},on=()=>{if(oe<0){let e=n5();oe=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime)??oi(),addEventListener("visibilitychange",or,!0),addEventListener("prerenderingchange",or,!0),nJ(()=>{setTimeout(()=>{oe=oi()})})}return{get firstHiddenTime(){return oe},onHidden(e){ot.add(e)}}},oo=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},os=[1800,3e3],oa=(e,t={})=>{oo(()=>{let i=on(),r,n=n3("FCP"),o=n7("paint",e=>{for(let t of e)"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<i.firstHiddenTime&&(n.value=Math.max(t.startTime-n5(),0),n.entries.push(t),r(!0)))});o&&(r=n0(e,n,os,t.reportAllChanges),nJ(i=>{r=n0(e,n=n3("FCP"),os,t.reportAllChanges),n1(()=>{n.value=performance.now()-i.timeStamp,r(!0)})}))})},ol=[.1,.25],ou=0,od=1/0,oc=0,oh=e=>{for(let t of e)t.interactionId&&(od=Math.min(od,t.interactionId),ou=(oc=Math.max(oc,t.interactionId))?(oc-od)/7+1:0)},op=()=>t?ou:performance.interactionCount??0,of=0;class og{u=[];l=new Map;m;p;v(){of=op(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((op()-of)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;let t=this.u.at(-1),i=this.l.get(e.interactionId);if(i||this.u.length<10||e.duration>t.P){if(i?e.duration>i.P?(i.entries=[e],i.P=e.duration):e.duration===i.P&&e.startTime===i.entries[0].startTime&&i.entries.push(e):(i={id:e.interactionId,entries:[e],P:e.duration},this.l.set(i.id,i),this.u.push(i)),this.u.sort((e,t)=>t.P-e.P),this.u.length>10)for(let e of this.u.splice(10))this.l.delete(e.id);this.p?.(i)}}}let om=e=>{let t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(addEventListener("visibilitychange",e=n9(e),{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},ov=[200,500];class oy{m;h(e){this.m?.(e)}}let ob=[2500,4e3],ow=[800,1800],oC=e=>{document.prerendering?oo(()=>oC(e)):"complete"!==document.readyState?addEventListener("load",()=>oC(e),!0):setTimeout(e)};function ox(e){var t,i;return{value:e.value,rating:e.rating,delta:e.delta,navigationType:e.navigationType,id:e.id,timestamp:Math.floor((i=(null==(t=e.entries[0])?void 0:t.startTime)||0,performance.timeOrigin+i)),navigationStart:Math.floor(performance.timeOrigin)}}var oS=function(){var e=null,i=(0,eF.getGlobalScope)(),r=null==i?void 0:i.document,n=null==i?void 0:i.location;return{name:"web-vitals-browser",type:"enrichment",setup:function(i,o){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var s,a,l;return(0,ec.__generator)(this,function(u){return s=function(e){if(!e)return"";var t,r=e;try{r=decodeURI(e)}catch(e){null==(t=i.loggerProvider)||t.error("Malformed URI sequence: ",e)}return r},void 0===r||(a=s(null==n?void 0:n.href),l={"[Amplitude] Page Domain":(null==n?void 0:n.hostname)||"","[Amplitude] Page Location":a,"[Amplitude] Page Path":s(null==n?void 0:n.pathname),"[Amplitude] Page Title":"undefined"!=typeof document&&document.title||"","[Amplitude] Page URL":a.split("?")[0]},((e,t={})=>{oo(()=>{let i=on(),r,n=n3("LCP"),o=n8(t,oy),s=e=>{for(let s of(t.reportAllChanges||(e=e.slice(-1)),e))o.h(s),s.startTime<i.firstHiddenTime&&(n.value=Math.max(s.startTime-n5(),0),n.entries=[s],r())},a=n7("largest-contentful-paint",s);if(a){r=n0(e,n,ob,t.reportAllChanges);let i=n9(()=>{s(a.takeRecords()),a.disconnect(),r(!0)}),o=e=>{e.isTrusted&&(om(i),removeEventListener(e.type,o,{capture:!0}))};for(let e of["keydown","click","visibilitychange"])addEventListener(e,o,{capture:!0});nJ(i=>{r=n0(e,n=n3("LCP"),ob,t.reportAllChanges),n1(()=>{n.value=performance.now()-i.timeStamp,r(!0)})})}})})(function(e){l["[Amplitude] LCP"]=ox(e)}),oa(function(e){l["[Amplitude] FCP"]=ox(e)}),((e,i={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let r=on();oo(()=>{"interactionCount"in performance||t||(t=n7("event",oh,{type:"event",buffered:!0,durationThreshold:0}));let n,o=n3("INP"),s=n8(i,og),a=e=>{om(()=>{for(let t of e)s.h(t);let t=s.L();t&&t.P!==o.value&&(o.value=t.P,o.entries=t.entries,n())})},l=n7("event",a,{durationThreshold:i.durationThreshold??40});n=n0(e,o,ov,i.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{a(l.takeRecords()),n(!0)}),nJ(()=>{s.v(),n=n0(e,o=n3("INP"),ov,i.reportAllChanges)}))})})(function(e){l["[Amplitude] INP"]=ox(e)}),((e,t={})=>{let i=on();oa(n9(()=>{let r,n=n3("CLS",0),o=n8(t,n6),s=e=>{for(let t of e)o.h(t);o.i>n.value&&(n.value=o.i,n.entries=o.o,r())},a=n7("layout-shift",s);a&&(r=n0(e,n,ol,t.reportAllChanges),i.onHidden(()=>{s(a.takeRecords()),r(!0)}),nJ(()=>{o.i=0,r=n0(e,n=n3("CLS",0),ol,t.reportAllChanges),n1(()=>r())}),setTimeout(r))}))})(function(e){l["[Amplitude] CLS"]=ox(e)}),((e,t={})=>{let i=n3("TTFB"),r=n0(e,i,ow,t.reportAllChanges);oC(()=>{let n=n2();n&&(i.value=Math.max(n.responseStart-n5(),0),i.entries=[n],r(!0),nJ(()=>{(r=n0(e,i=n3("TTFB",0),ow,t.reportAllChanges))(!0)}))})})(function(e){l["[Amplitude] TTFB"]=ox(e)}),e=function(){"hidden"===r.visibilityState&&e&&(o.track("[Amplitude] Web Vitals",l),r.removeEventListener("visibilitychange",e),e=null)},r.addEventListener("visibilitychange",e)),[2]})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return[2,e]})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return e&&(null==r||r.removeEventListener("visibilitychange",e)),[2]})})}}},ok=function(e,t,i){return void 0===t&&(t=""),void 0===i&&(i=10),["AMP",t,e.substring(0,i)].filter(Boolean).join("_")},oR=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},oE=function(e,t,i,r,n){void 0===n&&(n=!0),e.referrer;var o=e.referring_domain,s=(0,ec.__rest)(e,["referrer","referring_domain"]),a=t||{},l=(a.referrer,a.referring_domain),u=(0,ec.__rest)(a,["referrer","referring_domain"]);if(oP(i.excludeReferrers,e.referring_domain))return r.debug("This is not a new campaign because ".concat(e.referring_domain," is in the exclude referrer list.")),!1;if(!n&&Object.values(e).every(function(e){return!e})&&t)return r.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var d=JSON.stringify(s)!==JSON.stringify(u),c=oR(o||"")!==oR(l||""),h=!t||d||c;return h?r.debug("This is a new campaign. An $identify event will be sent."):r.debug("This is not a new campaign because it's the same as the previous one."),h},oP=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.some(function(e){return e instanceof RegExp?e.test(t):e===t})},oM=function(e){var t=e;return t?(t.startsWith(".")&&(t=t.substring(1)),[new RegExp("".concat(t.replace(".","\\."),"$"))]):[]},oD=function(){function e(e,t){var i;this.shouldTrackNewCampaign=!1,this.options=(0,ec.__assign)({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:oM(null==(i=t.cookieOptions)?void 0:i.domain)},e),this.storage=t.cookieStorage,this.storageKey=ok(t.apiKey,"MKTG"),this.webExpStorageKey=ok(t.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=eE,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,this.logger=t.loggerProvider,t.loggerProvider.log("Installing web attribution tracking.")}return e.prototype.init=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return[4,this.fetchCampaign()];case 1:if(t=ec.__read.apply(void 0,[i.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=!this.lastEventTime||tl(this.sessionTimeout,this.lastEventTime),!oE(this.currentCampaign,this.previousCampaign,this.options,this.logger,e))return[3,3];return this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.fetchCampaign=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(t){switch(t.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:if(!(e=t.sent()))return[3,3];return[4,this.storage.remove(this.webExpStorageKey)];case 2:t.sent(),t.label=3;case 3:return[4,Promise.all([e||new iS().parse(),this.storage.get(this.storageKey)])];case 4:return[2,t.sent()]}})})},e.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t,i,r=(t=this.currentCampaign,i=this.options,eB(Object.entries((0,ec.__assign)((0,ec.__assign)({},eE),t)).reduce(function(e,t){var r,n=(0,ec.__read)(t,2),o=n[0],s=n[1];return(e.setOnce("initial_".concat(o),null!=(r=null!=s?s:i.initialEmptyValue)?r:"EMPTY"),s)?e.set(o,s):e.unset(o)},new eO)));return e&&(r.event_id=e),r},e.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},e}(),oT="AMP_CURRENT_PAGE",oO="AMP_PREVIOUS_PAGE",o_="AMP_URL_INFO";(f=Z||(Z={})).Direct="direct",f.Internal="internal",f.External="external";var oA=new Set([W.IDENTIFY,W.GROUP_IDENTIFY,W.REVENUE]),oF=function(){var e=(0,eF.getGlobalScope)(),t=void 0,i=!1,r=void 0,n=!1,o=!1,s=function(e){var t;try{var i=rH(e,r);t=new URL(i).hostname}catch(e){null==r||r.error("Could not parse URL: ",e)}return t},a=function(e){var t="undefined"!=typeof location&&location.hostname||"";switch(e?s(e):void 0){case void 0:return Z.Direct;case t:return Z.Internal;default:return Z.External}},l=function(){(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,r,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(!(t&&i))return[3,3];return[4,t.get(o_)];case 1:return e=a.sent(),r=rH("undefined"!=typeof location&&location.href||""),n=(null==e?void 0:e[oT])||"",o=void 0,o=r===n?(null==e?void 0:e[oO])||"":n||document.referrer||"",[4,t.set(o_,((s={})[oT]=r,s[oO]=o,s))];case 2:a.sent(),a.label=3;case 3:return[2]}})})};return{name:"@amplitude/plugin-page-url-enrichment-browser",type:"enrichment",setup:function(s,a){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if((r=s.loggerProvider).log("Installing @amplitude/plugin-page-url-enrichment-browser"),o=!0,!e)return[3,2];return[4,(t=new tJ(e.sessionStorage)).isEnabled()];case 1:i=a.sent(),e.addEventListener("popstate",l),n||(e.history.pushState=new Proxy(e.history.pushState,{apply:function(e,t,i){var r=(0,ec.__read)(i,3),n=r[0],s=r[1],a=r[2];e.apply(t,[n,s,a]),o&&l()}}),e.history.replaceState=new Proxy(e.history.replaceState,{apply:function(e,t,i){var r=(0,ec.__read)(i,3),n=r[0],s=r[1],a=r[2];e.apply(t,[n,s,a]),o&&l()}}),n=!0),a.label=2;case 2:return[2]}})})},execute:function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var r,n,o,s,l;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:if(r=rH("undefined"!=typeof location&&location.href||""),!(t&&i))return[3,5];return[4,t.get(o_)];case 1:if(null==(n=u.sent())?void 0:n[oT])return[3,3];return[4,t.set(o_,((l={})[oT]=r,l[oO]=document.referrer||"",l))];case 2:u.sent(),u.label=3;case 3:return[4,t.get(o_)];case 4:if(o=u.sent(),s="",o&&(s=o[oO]||""),oA.has(e.event_type))return[2,e];e.event_properties=(0,ec.__assign)((0,ec.__assign)({},e.event_properties||{}),{"[Amplitude] Page Domain":oI(e,"[Amplitude] Page Domain","undefined"!=typeof location&&location.hostname||""),"[Amplitude] Page Location":oI(e,"[Amplitude] Page Location",r),"[Amplitude] Page Path":oI(e,"[Amplitude] Page Path","undefined"!=typeof location&&rH(location.pathname)||""),"[Amplitude] Page Title":oI(e,"[Amplitude] Page Title",ix(iC)),"[Amplitude] Page URL":oI(e,"[Amplitude] Page URL",r.split("?")[0]),"[Amplitude] Previous Page Location":s,"[Amplitude] Previous Page Type":a(s)}),u.label=5;case 5:return[2,e]}})})},teardown:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(e&&(e.removeEventListener("popstate",l),o=!1),!(t&&i))return[3,2];return[4,t.set(o_,{})];case 1:r.sent(),r.label=2;case 2:return[2]}})})}}};function oI(e,t,i){return(e.event_properties||(e.event_properties={}),void 0===e.event_properties[t])?i:e.event_properties[t]}var oL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._diagnosticsSampleRate=0,t}return(0,ec.__extends)(t,e),t.prototype.init=function(e,t,i){var r,n;return void 0===e&&(e=""),arguments.length>2?(r=t,n=i):"string"==typeof t?(r=t,n=void 0):(r=null==t?void 0:t.userId,n=t),ez(this._init((0,ec.__assign)((0,ec.__assign)({},n),{userId:r,apiKey:e})))},t.prototype._init=function(t){var i,r,n,o,s;return(0,ec.__awaiter)(this,void 0,void 0,function(){var a,l,u,d,c,h,p,f,g,m=this;return(0,ec.__generator)(this,function(v){var y,b,w,C,x;switch(v.label){case 0:if(this.initializing)return[2];return this.initializing=!0,[4,(y=t.apiKey,b=t,w=this,void 0===b&&(b={}),(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r,n,o,s,a,l,u,d,c,h,p,f,g,m,v,C,x,S,k,R,E,P,M,D,T,O,_,A,F,I,L,N,B,V,H,z,j,G,W,U,$,q;return(0,ec.__generator)(this,function(K){switch(K.label){case 0:if(e=b.identityStorage||ic,S={},e===ic)return[3,1];return i="",[3,5];case 1:if(null==(R=null==(k=b.cookieOptions)?void 0:k.domain))return[3,2];return r=R,[3,4];case 2:return[4,(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r,n,o;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:return[4,new tq().isEnabled()];case 1:if(!s.sent()||"undefined"==typeof location||!location.hostname)return[2,""];for(e=(0,location.hostname).split("."),t=[],i="AMP_TLDTEST",r=e.length-2;r>=0;--r)t.push(e.slice(r).join("."));r=0,s.label=2;case 2:if(!(r<t.length))return[3,7];return[4,(o=new tq({domain:"."+(n=t[r])})).set(i,1)];case 3:return s.sent(),[4,o.get(i)];case 4:if(!s.sent())return[3,6];return[4,o.remove(i)];case 5:return s.sent(),[2,"."+n];case 6:return r++,[3,2];case 7:return[2,""]}})})];case 3:r=K.sent(),K.label=4;case 4:i=r,K.label=5;case 5:var Q,X;return t=ec.__assign.apply(void 0,[(S.domain=i,S.expiration=365,S.sameSite="Lax",S.secure=!1,S.upgrade=!0,S),b.cookieOptions]),[4,(Q=n=ip(b.identityStorage,t),void 0===(X=null==(P=null==(E=b.cookieOptions)?void 0:E.upgrade)||P)&&(X=!0),(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r,n,o,s,a,l;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:return e="".concat("amp","_").concat(y.substring(0,6)),[4,Q.getRaw(e)];case 1:if(!(t=u.sent()))return[2,{optOut:!1}];if(!X)return[3,3];return[4,Q.remove(e)];case 2:u.sent(),u.label=3;case 3:return r=(i=(0,ec.__read)(t.split("."),6))[0],n=i[1],o=i[2],s=i[3],a=i[4],l=i[5],[2,{deviceId:r,userId:t4(n),sessionId:t3(s),lastEventId:t3(l),lastEventTime:t3(a),optOut:!!o}]}})}))];case 6:return o=K.sent(),[4,n.get(tX(y))];case 7:return s=K.sent(),u=!(l=(a=td()).ampTimestamp?Number(a.ampTimestamp):void 0)||Date.now()<l,d=null!=(_=null!=(O=null!=(T=null!=(M=b.deviceId)?M:u?null!=(D=a.ampDeviceId)?D:a.deviceId:void 0)?T:null==s?void 0:s.deviceId)?O:o.deviceId)?_:eL(),c=null!=(A=null==s?void 0:s.lastEventId)?A:o.lastEventId,h=null!=(F=null==s?void 0:s.lastEventTime)?F:o.lastEventTime,p=null!=(L=null!=(I=b.optOut)?I:null==s?void 0:s.optOut)?L:o.optOut,f=null!=(N=null==s?void 0:s.sessionId)?N:o.sessionId,g=null!=(V=null!=(B=b.userId)?B:null==s?void 0:s.userId)?V:o.userId,w.previousSessionDeviceId=null!=(H=null==s?void 0:s.deviceId)?H:o.deviceId,w.previousSessionUserId=null!=(z=null==s?void 0:s.userId)?z:o.userId,m={ipAddress:null==(G=null==(j=b.trackingOptions)?void 0:j.ipAddress)||G,language:null==(U=null==(W=b.trackingOptions)?void 0:W.language)||U,platform:null==(q=null==($=b.trackingOptions)?void 0:$.platform)||q},v=null==s?void 0:s.pageCounter,C=null==s?void 0:s.debugLogsEnabled,void 0!==b.autocapture&&(b.defaultTracking=b.autocapture),[4,(x=new ih(y,b.appVersion,n,t,b.defaultTracking,b.autocapture,d,b.flushIntervalMillis,b.flushMaxRetries,b.flushQueueSize,e,b.ingestionMetadata,b.instanceName,c,h,b.loggerProvider,b.logLevel,b.minIdLength,b.offline,p,b.partnerId,b.plan,b.serverUrl,b.serverZone,f,b.sessionTimeout,b.storageProvider,m,b.transport,b.useBatch,b.fetchRemoteConfig,g,v,C,b.networkTrackingOptions,b.identify,b.enableDiagnostics,void 0,void 0,b.remoteConfig)).storageProvider.isEnabled()];case 8:return K.sent()||(x.loggerProvider.warn("Storage provider ".concat(x.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),x.storageProvider=new t$),[2,x]}})}))];case 1:if(!(null==(i=(a=v.sent()).remoteConfig)?void 0:i.fetchRemoteConfig))return[3,3];return l=new tp(a.apiKey,a.loggerProvider,a.serverZone,null==(r=a.remoteConfig)?void 0:r.serverUrl),[4,new Promise(function(e){null==l||l.subscribe("configs.analyticsSDK.browserSDK","all",function(t,i,r){a.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:t,source:i,lastFetch:r},null,2)),t&&function(e,t){if(e){!function e(t){if("object"==typeof t&&null!==t&&!Array.isArray(t)){var i,r,n,o,s,a,l,u,d,c,h,p=Object.keys(t);try{for(var f=(0,ec.__values)(p),g=f.next();!g.done;g=f.next()){var m=g.value;try{var v=t[m];"boolean"==typeof(null==v?void 0:v.enabled)&&(v.enabled?(delete v.enabled,0===Object.keys(v).length&&(t[m]=!0)):t[m]=!1),e(v)}catch(e){}}}catch(e){i={error:e}}finally{try{g&&!g.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}try{if(null==(d=null==(u=null==(l=t.autocapture)?void 0:l.networkTracking)?void 0:u.captureRules)?void 0:d.length)try{for(var y=(0,ec.__values)(t.autocapture.networkTracking.captureRules),b=y.next();!b.done;b=y.next()){var w=b.value;try{for(var C=(s=void 0,(0,ec.__values)(["responseHeaders","requestHeaders"])),x=C.next();!x.done;x=C.next()){var S=x.value,k=null!=(c=w[S])?c:{},R=k.captureSafeHeaders,E=k.allowlist;if(R||E){if(void 0!==E&&!Array.isArray(E)){delete w[S];continue}w[S]=(0,ec.__spreadArray)((0,ec.__spreadArray)([],(0,ec.__read)(R?eP:[]),!1),(0,ec.__read)(null!=E?E:[]),!1)}}}catch(e){s={error:e}}finally{try{x&&!x.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}}}catch(e){n={error:e}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}}catch(e){}var P=null==(h=t.autocapture)?void 0:h.frustrationInteractions;P&&(P.rageClick&&(P.rageClicks=P.rageClick,delete P.rageClick),P.deadClick&&(P.deadClicks=P.deadClick,delete P.deadClick))}}(e);try{var i,r,n,o,s,a,l;if(t.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(e)),e&&"autocapture"in e){if("boolean"==typeof e.autocapture&&(t.autocapture=e.autocapture),"object"==typeof e.autocapture&&null!==e.autocapture){var u=(0,ec.__assign)({},e.autocapture);if(void 0===t.autocapture&&(t.autocapture=e.autocapture),"object"==typeof e.autocapture.elementInteractions&&null!==e.autocapture.elementInteractions&&(null==(n=e.autocapture.elementInteractions.pageUrlAllowlistRegex)?void 0:n.length)){u.elementInteractions=(0,ec.__assign)({},e.autocapture.elementInteractions);var d=u.elementInteractions,c=null!=(o=d.pageUrlAllowlist)?o:[],h=e.autocapture.elementInteractions.pageUrlAllowlistRegex;d.pageUrlAllowlist=iL(c,h,t),delete d.pageUrlAllowlistRegex}if("object"==typeof e.autocapture.networkTracking&&null!==e.autocapture.networkTracking&&(null==(s=e.autocapture.networkTracking.captureRules)?void 0:s.length)){u.networkTracking=(0,ec.__assign)({},e.autocapture.networkTracking);var p=null!=(a=u.networkTracking.captureRules)?a:[];try{for(var f=(0,ec.__values)(p),g=f.next();!g.done;g=f.next()){var m=g.value;m.urls=iL(null!=(l=m.urls)?l:[],m.urlsRegex,t),delete m.urlsRegex}}catch(e){i={error:e}}finally{try{g&&!g.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}}"boolean"==typeof t.autocapture&&(t.autocapture=(0,ec.__assign)({attribution:t.autocapture,fileDownloads:t.autocapture,formInteractions:t.autocapture,pageViews:t.autocapture,sessions:t.autocapture,elementInteractions:t.autocapture,webVitals:t.autocapture,frustrationInteractions:t.autocapture},u)),"object"==typeof t.autocapture&&(t.autocapture=(0,ec.__assign)((0,ec.__assign)({},t.autocapture),u))}t.defaultTracking=t.autocapture}t.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(t))}catch(e){t.loggerProvider.error("Failed to apply remote configuration because of error: ",e)}}}(t,a),e()})})];case 2:v.sent(),v.label=3;case 3:return(u=new tM(a.apiKey,a.loggerProvider,a.serverZone,{enabled:a.enableDiagnostics,sampleRate:a.diagnosticsSampleRate||this._diagnosticsSampleRate})).setTag("library","".concat(tW,"/").concat(tG)),[4,e.prototype._init.call(this,a)];case 4:if(v.sent(),this.logBrowserOptions(a),this.config.diagnosticsClient=u,this.config.remoteConfigClient=l,!tT(this.config.defaultTracking))return[3,6];return d=tT((C=this.config).defaultTracking)&&C.defaultTracking&&"object"==typeof C.defaultTracking&&C.defaultTracking.attribution&&"object"==typeof C.defaultTracking.attribution?(0,ec.__assign)({},C.defaultTracking.attribution):{},this.webAttribution=new oD(d,this.config),[4,this.webAttribution.init()];case 5:v.sent(),v.label=6;case 6:if(p=!(h=(c=td()).ampTimestamp?Number(c.ampTimestamp):void 0)||Date.now()<h,this.config.identify&&this.identify(this.config.identify),f=p&&!Number.isNaN(Number(c.ampSessionId))?Number(c.ampSessionId):void 0,this.setSessionId(null!=(s=null!=(o=null!=(n=t.sessionId)?n:f)?o:this.config.sessionId)?s:Date.now()),(g=to(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),null===this.config.offline)return[3,8];return[4,this.add(iI()).promise];case 7:v.sent(),v.label=8;case 8:return[4,this.add(new e5({diagnosticsClient:u})).promise];case 9:return v.sent(),[4,this.add(new tU).promise];case 10:return v.sent(),[4,this.add(new tu).promise];case 11:if(v.sent(),iF(this.config),!tD(this.config.defaultTracking,"fileDownloads"))return[3,13];return this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(i_()).promise];case 12:v.sent(),v.label=13;case 13:if(!tD(this.config.defaultTracking,"formInteractions"))return[3,15];return this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(iD()).promise];case 14:v.sent(),v.label=15;case 15:if(!tO(this.config.defaultTracking))return[3,17];return this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(iR(tV(this.config))).promise];case 16:v.sent(),v.label=17;case 17:if(!tF(this.config.autocapture))return[3,19];return this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(nS(tL(this.config),{diagnosticsClient:u})).promise];case 18:v.sent(),v.label=19;case 19:if(!tI(this.config.autocapture))return[3,21];return this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(nD(tN(this.config))).promise];case 20:v.sent(),v.label=21;case 21:if(!tA(this.config.autocapture))return[3,23];return this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(nY(tB(this.config))).promise];case 22:v.sent(),v.label=23;case 23:if(!("boolean"==typeof(x=this.config.autocapture)?x:"object"==typeof x&&!0===x.webVitals))return[3,25];return this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(oS()).promise];case 24:v.sent(),v.label=25;case 25:if(!tD(this.config.autocapture,"pageUrlEnrichment"))return[3,27];return this.config.loggerProvider.debug("Adding referrer page url plugin"),[4,this.add(oF()).promise];case 26:v.sent(),v.label=27;case 27:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 28:return v.sent(),g.eventBridge.setEventReceiver(function(e){var t=e.eventProperties||{},i=t.time,r=(0,ec.__rest)(t,["time"]);m.track(e.eventType,r,"number"==typeof i?{time:i}:void 0)}),[2]}})})},t.prototype.getUserId=function(){var e;return null==(e=this.config)?void 0:e.userId},t.prototype.setUserId=function(e){this.config?(this.config.loggerProvider.debug("function setUserId: ",e),(e!==this.config.userId||void 0===e)&&(this.config.userId=e,this.timeline.onIdentityChanged({userId:e}),ts(e,this.config.instanceName))):this.q.push(this.setUserId.bind(this,e))},t.prototype.getDeviceId=function(){var e;return null==(e=this.config)?void 0:e.deviceId},t.prototype.setDeviceId=function(e){this.config?(this.config.loggerProvider.debug("function setDeviceId: ",e),e!==this.config.deviceId&&(this.config.deviceId=e,this.timeline.onIdentityChanged({deviceId:e}),ta(e,this.config.instanceName))):this.q.push(this.setDeviceId.bind(this,e))},t.prototype.reset=function(){this.setDeviceId(eL()),this.setUserId(void 0)},t.prototype.getIdentity=function(){var e,t;return{deviceId:null==(e=this.config)?void 0:e.deviceId,userId:null==(t=this.config)?void 0:t.userId,userProperties:this.userProperties}},t.prototype.getOptOut=function(){var e;return null==(e=this.config)?void 0:e.optOut},t.prototype.getSessionId=function(){var e;return null==(e=this.config)?void 0:e.sessionId},t.prototype.setSessionId=function(e){var t,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,e)),ez(Promise.resolve());if(e===this.config.sessionId)return ez(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",e);var r=this.getSessionId();r!==e&&this.timeline.onSessionIdChanged(e);var n=this.config.lastEventTime,o=null!=(t=this.config.lastEventId)?t:-1;this.config.sessionId=e,this.config.lastEventTime=void 0,this.config.pageCounter=0,t_(this.config.defaultTracking)&&(r&&n&&i.push(this.track(it,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:r,time:n+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var s=this.trackCampaignEventIfNeeded(++o,i);return t_(this.config.defaultTracking)&&i.push(this.track(ie,void 0,{event_id:s?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,ez(Promise.all(i))},t.prototype.extendSession=function(){this.config?this.config.lastEventTime=Date.now():this.q.push(this.extendSession.bind(this))},t.prototype.setTransport=function(e){this.config?this.config.transportProvider=ig(e):this.q.push(this.setTransport.bind(this,e))},t.prototype.identify=function(t,i){if(tz(t)){var r=t._q;t._q=[],t=tH(new eO,r)}return(null==i?void 0:i.user_id)&&this.setUserId(i.user_id),(null==i?void 0:i.device_id)&&this.setDeviceId(i.device_id),e.prototype.identify.call(this,t,i)},t.prototype.groupIdentify=function(t,i,r,n){if(tz(r)){var o=r._q;r._q=[],r=tH(new eO,o)}return e.prototype.groupIdentify.call(this,t,i,r,n)},t.prototype.revenue=function(t,i){if(tz(t)){var r=t._q;t._q=[],t=tH(new e3,r)}return e.prototype.revenue.call(this,t,i)},t.prototype.trackCampaignEventIfNeeded=function(e,t){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(e);return t?t.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},t.prototype.process=function(t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r,n;return(0,ec.__generator)(this,function(o){return i=Date.now(),r=tl(this.config.sessionTimeout,this.config.lastEventTime),n=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type!==ie&&t.event_type!==it&&(!t.session_id||t.session_id===this.getSessionId())&&(r||n?(this.setSessionId(i),n&&this.config.loggerProvider.log("Created a new session for new campaign.")):r||this.trackCampaignEventIfNeeded()),t.event_type===W.IDENTIFY&&t.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(t.user_properties)),[2,e.prototype.process.call(this,t)]})})},t.prototype.logBrowserOptions=function(e){try{var t=(0,ec.__assign)((0,ec.__assign)({},e),{apiKey:e.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(t))}catch(e){this.config.loggerProvider.error("Error logging browser config",e)}},t.prototype._setDiagnosticsSampleRate=function(e){if(!(e>1)&&!(e<0)&&!this.config){this._diagnosticsSampleRate=e;return}},t}(ej);(g=J||(J={})).US="US",g.EU="EU",g.STAGING="STAGING";var oN="[Amplitude]",oB="".concat(oN," Session Replay ID"),oV=J.US,oH={enabled:!0},oz="".concat(oN," Session Replay Debug"),oj="amp-mask";(m=ee||(ee={})).GET_SR_PROPS="get-sr-props",m.DEBUG_INFO="debug-info",m.FETCH_REQUEST="fetch-request",m.METADATA="metadata",m.TARGETING_DECISION="targeting-decision";var oG=function(){function e(e){this.logger=e,this.log=this.getSafeMethod("log"),this.warn=this.getSafeMethod("warn"),this.error=this.getSafeMethod("error"),this.debug=this.getSafeMethod("debug")}return e.prototype.getSafeMethod=function(e){if(!this.logger)return function(){};var t,i=this.logger[e];return"function"==typeof i?(null!=(t=i.__rrweb_original__)?t:i).bind(this.logger):function(){}},e.prototype.enable=function(e){this.logger.enable(e)},e.prototype.disable=function(){this.logger.disable()},e}(),oW="medium",oU=function(e,t,i){switch(t){case"light":if("input"!==e)return!0;var r,n,o=i?(n=(r=i).type,r.hasAttribute("data-rr-is-password")?"password":n?n.toLowerCase():null):"";if(!o)return!1;if(["password","hidden","email","tel"].includes(o)||i.autocomplete.startsWith("cc-"))return!0;return!1;case"medium":case"conservative":return!0;default:return oU(e,oW,i)}},o$=function(e,t,i){var r,n,o;if(void 0===t&&(t={defaultMaskLevel:oW}),i){if(i.closest("."+oj)||(null!=(r=t.maskSelector)?r:[]).some(function(e){return i.closest(e)}))return!0;if(i.closest(".amp-unmask")||(null!=(n=t.unmaskSelector)?n:[]).some(function(e){return i.closest(e)}))return!1}return oU(e,null!=(o=t.defaultMaskLevel)?o:oW,i)},oq=function(e,t){return function(i,r){return o$(e,t,r)?i.replace(/[^\s]/g,"*"):i}},oK=function(){var e=(0,eF.getGlobalScope)();return(null==e?void 0:e.location)?e.location.href:""},oQ=function(e,t){return t||(e===J.STAGING?"https://api-sr.stag2.amplitude.com/sessions/v2/track":e===J.EU?"https://api-sr.eu.amplitude.com/sessions/v2/track":"https://api-sr.amplitude.com/sessions/v2/track")},oX=function(e){var t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp("^".concat(t,"$"))},oY=function(e){if(!e.every(function(e){return"string"==typeof e.selector&&"string"==typeof e.replacement}))throw Error("ugcFilterRules must be an array of objects with selector and replacement properties");if(!e.every(function(e){var t;return"string"==typeof(t=e.selector)&&""!==t.trim()&&!!/^\/|^https?:\/\/[^\s]+$/.test(t)}))throw Error("ugcFilterRules must be an array of objects with valid globs")},oZ=function(e,t){var i,r;try{for(var n=(0,ec.__values)(t),o=n.next();!o.done;o=n.next()){var s=o.value,a=oX(s.selector);if(a.test(e))return e.replace(a,s.replacement)}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return e},oJ=function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,3,,4]),!(e=(0,eF.getGlobalScope)()))return[3,2];return[4,e.navigator.storage.estimate()];case 1:return i=(t=n.sent()).usage,r=t.quota,[2,{totalStorageSize:i?Math.round(i/1024):0,percentOfQuota:i&&r?Math.round((i/r+Number.EPSILON)*1e3)/1e3:0,usageDetails:JSON.stringify(t.usageDetails)}];case 2:return[3,4];case 3:return n.sent(),[3,4];case 4:return[2,{totalStorageSize:0,percentOfQuota:0,usageDetails:""}]}})})},o0=function(e){var t=(0,ec.__assign)({},e),i=t.apiKey;return t.apiKey="****".concat(i.substring(i.length-4)),t},o1=function(){return{flushMaxRetries:2,logLevel:q.Warn,loggerProvider:new eU,transportProvider:new tZ}},o2=function(e){function t(t,i){var r,n,o,s,a,l=this,u=o1();return(l=e.call(this,(0,ec.__assign)((0,ec.__assign)({transportProvider:u.transportProvider,loggerProvider:new oG(i.loggerProvider||u.loggerProvider)},i),{apiKey:t}))||this).flushMaxRetries=void 0!==i.flushMaxRetries&&i.flushMaxRetries<=u.flushMaxRetries?i.flushMaxRetries:u.flushMaxRetries,l.apiKey=t,l.sampleRate=i.sampleRate||0,l.serverZone=i.serverZone||oV,l.configServerUrl=i.configServerUrl,l.trackServerUrl=i.trackServerUrl,l.shouldInlineStylesheet=i.shouldInlineStylesheet,l.version=i.version,l.performanceConfig=i.performanceConfig||oH,l.storeType=null!=(r=i.storeType)?r:"idb",l.applyBackgroundColorToBlockedElements=null!=(n=i.applyBackgroundColorToBlockedElements)&&n,l.enableUrlChangePolling=null!=(o=i.enableUrlChangePolling)&&o,l.urlChangePollingInterval=null!=(s=i.urlChangePollingInterval)?s:1e3,l.captureDocumentTitle=null!=(a=i.captureDocumentTitle)&&a,i.privacyConfig&&(l.privacyConfig=i.privacyConfig),i.interactionConfig&&(l.interactionConfig=i.interactionConfig,l.interactionConfig.ugcFilterRules&&oY(l.interactionConfig.ugcFilterRules)),i.debugMode&&(l.debugMode=i.debugMode),i.experimental&&(l.experimental=i.experimental),i.omitElementTags&&(l.omitElementTags=i.omitElementTags),l}return(0,ec.__extends)(t,e),t}(eq),o5=((v=o5||{})[v.DomContentLoaded=0]="DomContentLoaded",v[v.Load=1]="Load",v[v.FullSnapshot=2]="FullSnapshot",v[v.IncrementalSnapshot=3]="IncrementalSnapshot",v[v.Meta=4]="Meta",v[v.Custom=5]="Custom",v[v.Plugin=6]="Plugin",v),o3=((y=o3||{})[y.Mutation=0]="Mutation",y[y.MouseMove=1]="MouseMove",y[y.MouseInteraction=2]="MouseInteraction",y[y.Scroll=3]="Scroll",y[y.ViewportResize=4]="ViewportResize",y[y.Input=5]="Input",y[y.TouchMove=6]="TouchMove",y[y.MediaInteraction=7]="MediaInteraction",y[y.StyleSheetRule=8]="StyleSheetRule",y[y.CanvasMutation=9]="CanvasMutation",y[y.Font=10]="Font",y[y.Log=11]="Log",y[y.Drag=12]="Drag",y[y.StyleDeclaration=13]="StyleDeclaration",y[y.Selection=14]="Selection",y[y.AdoptedStyleSheet=15]="AdoptedStyleSheet",y[y.CustomElement=16]="CustomElement",y),o4=((b=o4||{})[b.MouseUp=0]="MouseUp",b[b.MouseDown=1]="MouseDown",b[b.Click=2]="Click",b[b.ContextMenu=3]="ContextMenu",b[b.DblClick=4]="DblClick",b[b.Focus=5]="Focus",b[b.Blur=6]="Blur",b[b.TouchStart=7]="TouchStart",b[b.TouchMove_Departed=8]="TouchMove_Departed",b[b.TouchEnd=9]="TouchEnd",b[b.TouchCancel=10]="TouchCancel",b),o8=((w=o8||{})[w.Mouse=0]="Mouse",w[w.Pen=1]="Pen",w[w.Touch=2]="Touch",w),o6=((C=o6||{})[C["2D"]=0]="2D",C[C.WebGL=1]="WebGL",C[C.WebGL2=2]="WebGL2",C),o7=((x=o7||{})[x.Play=0]="Play",x[x.Pause=1]="Pause",x[x.Seeked=2]="Seeked",x[x.VolumeChange=3]="VolumeChange",x[x.RateChange=4]="RateChange",x),o9=((S=o9||{}).Start="start",S.Pause="pause",S.Resume="resume",S.Resize="resize",S.Finish="finish",S.FullsnapshotRebuilded="fullsnapshot-rebuilded",S.LoadStylesheetStart="load-stylesheet-start",S.LoadStylesheetEnd="load-stylesheet-end",S.SkipStart="skip-start",S.SkipEnd="skip-end",S.MouseInteraction="mouse-interaction",S.EventCast="event-cast",S.CustomEvent="custom-event",S.Flush="flush",S.StateChange="state-change",S.PlayBack="play-back",S.Destroy="destroy",S),se=((k=se||{})[k.Document=0]="Document",k[k.DocumentType=1]="DocumentType",k[k.Element=2]="Element",k[k.Text=3]="Text",k[k.CDATA=4]="CDATA",k[k.Comment=5]="Comment",k),st=function(e,t){var i=document.createDocumentFragment(),r=function(e){if(void 0===e&&(e=[]),"string"==typeof e&&(e=[e]),0!==(e=e.filter(function(e){try{i.querySelector(e)}catch(i){return t.warn('[session-replay-browser] omitting selector "'.concat(e,'" because it is invalid')),!1}return!0})).length)return e};return e.blockSelector=r(e.blockSelector),e.maskSelector=r(e.maskSelector),e.unmaskSelector=r(e.unmaskSelector),e},si=function(){function e(e,t){this.localConfig=t,this.remoteConfigClient=e}return e.prototype.generateJoinedConfig=function(){var e,t,i;return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n,o,s,a,l,u,d,c,h,p,f,g,m,v,y,b=this;return(0,ec.__generator)(this,function(w){switch(w.label){case 0:return(r=(0,ec.__assign)({},this.localConfig)).optOut=this.localConfig.optOut,r.captureEnabled=!0,[4,new Promise(function(e){b.remoteConfigClient.subscribe("configs.sessionReplay","all",function(t,i){var o;if(b.localConfig.loggerProvider.debug("Session Replay remote configuration received from ".concat(i,":"),JSON.stringify(t,null,2)),t){var s=t.sr_sampling_config,a=t.sr_privacy_config,l=t.sr_targeting_config,u=null==(o=r.interactionConfig)?void 0:o.ugcFilterRules;r.interactionConfig=t.sr_interaction_config,r.interactionConfig&&u&&(r.interactionConfig.ugcFilterRules=u),r.loggingConfig=t.sr_logging_config,(s||a||l)&&(n={},s&&(n.sr_sampling_config=s),a&&(n.sr_privacy_config=a),l&&(n.sr_targeting_config=l))}e()})})];case 1:if(w.sent(),!n)return[2,{localConfig:this.localConfig,joinedConfig:r,remoteConfig:n}];if(o=n.sr_sampling_config,s=n.sr_privacy_config,a=n.sr_targeting_config,o&&Object.keys(o).length>0?(Object.prototype.hasOwnProperty.call(o,"capture_enabled")?r.captureEnabled=o.capture_enabled:r.captureEnabled=!1,Object.prototype.hasOwnProperty.call(o,"sample_rate")&&(r.sampleRate=o.sample_rate)):(r.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),s){l=null!=(e=r.privacyConfig)?e:{},u={defaultMaskLevel:null!=(i=null!=(t=s.defaultMaskLevel)?t:l.defaultMaskLevel)?i:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},d=function(e){var t,i,r,n,o,s,a,l,u,d={};"string"==typeof e.blockSelector&&(e.blockSelector=[e.blockSelector]);try{for(var c=(0,ec.__values)(null!=(a=e.blockSelector)?a:[]),h=c.next();!h.done;h=c.next()){var p=h.value;d[p]="block"}}catch(e){t={error:e}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}try{for(var f=(0,ec.__values)(null!=(l=e.maskSelector)?l:[]),g=f.next();!g.done;g=f.next()){var p=g.value;d[p]="mask"}}catch(e){r={error:e}}finally{try{g&&!g.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}try{for(var m=(0,ec.__values)(null!=(u=e.unmaskSelector)?u:[]),v=m.next();!v.done;v=m.next()){var p=v.value;d[p]="unmask"}}catch(e){o={error:e}}finally{try{v&&!v.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}return d},c=(0,ec.__assign)((0,ec.__assign)({},d(l)),d(s));try{for(p=(h=(0,ec.__values)(Object.entries(c))).next();!p.done;p=h.next())g=(f=(0,ec.__read)(p.value,2))[0],m=f[1],"mask"===m?u.maskSelector.push(g):"block"===m?u.blockSelector.push(g):"unmask"===m&&u.unmaskSelector.push(g)}catch(e){v={error:e}}finally{try{p&&!p.done&&(y=h.return)&&y.call(h)}finally{if(v)throw v.error}}r.privacyConfig=st(u,this.localConfig.loggerProvider)}return a&&Object.keys(a).length>0&&(r.targetingConfig=a),this.localConfig.loggerProvider.debug(JSON.stringify({name:"session replay joined config",config:o0(r)},null,2)),[2,{localConfig:this.localConfig,joinedConfig:r,remoteConfig:n}]}})})},e}(),sr=Uint8Array,sn=Uint16Array,so=Uint32Array,ss=new sr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sa=new sr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sl=new sr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),su=function(e,t){for(var i=new sn(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];for(var n=new so(i[30]),r=1;r<30;++r)for(var o=i[r];o<i[r+1];++o)n[o]=o-i[r]<<5|r;return[i,n]},sd=su(ss,2),sc=sd[0],sh=sd[1];sc[28]=258,sh[258]=28;for(var sp=su(sa,0),sf=(sp[0],sp[1]),sg=new sn(32768),sm=0;sm<32768;++sm){var sv=(43690&sm)>>>1|(21845&sm)<<1;sv=(61680&(sv=(52428&sv)>>>2|(13107&sv)<<2))>>>4|(3855&sv)<<4,sg[sm]=((65280&sv)>>>8|(255&sv)<<8)>>>1}for(var sy=function(e,t,i){for(var r,n=e.length,o=0,s=new sn(t);o<n;++o)++s[e[o]-1];var a=new sn(t);for(o=0;o<t;++o)a[o]=a[o-1]+s[o-1]<<1;if(i){r=new sn(1<<t);var l=15-t;for(o=0;o<n;++o)if(e[o])for(var u=o<<4|e[o],d=t-e[o],c=a[e[o]-1]++<<d,h=c|(1<<d)-1;c<=h;++c)r[sg[c]>>>l]=u}else for(o=0,r=new sn(n);o<n;++o)r[o]=sg[a[e[o]-1]++]>>>15-e[o];return r},sb=new sr(288),sm=0;sm<144;++sm)sb[sm]=8;for(var sm=144;sm<256;++sm)sb[sm]=9;for(var sm=256;sm<280;++sm)sb[sm]=7;for(var sm=280;sm<288;++sm)sb[sm]=8;for(var sw=new sr(32),sm=0;sm<32;++sm)sw[sm]=5;var sC=sy(sb,9,0),sx=sy(sw,5,0),sS=function(e){return(e/8|0)+(7&e&&1)},sk=function(e,t,i){(null==i||i>e.length)&&(i=e.length);var r=new(e instanceof sn?sn:e instanceof so?so:sr)(i-t);return r.set(e.subarray(t,i)),r},sR=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8},sE=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8,e[r+2]|=i>>>16},sP=function(e,t){for(var i=[],r=0;r<e.length;++r)e[r]&&i.push({s:r,f:e[r]});var n=i.length,o=i.slice();if(!n)return[new sr(0),0];if(1==n){var s=new sr(i[0].s+1);return s[i[0].s]=1,[s,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var a=i[0],l=i[1],u=0,d=1,c=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=n-1;)a=i[i[u].f<i[c].f?u++:c++],l=i[u!=d&&i[u].f<i[c].f?u++:c++],i[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=o[0].s,r=1;r<n;++r)o[r].s>h&&(h=o[r].s);var p=new sn(h+1),f=sM(i[d-1],p,0);if(f>t){var r=0,g=0,m=f-t,v=1<<m;for(o.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});r<n;++r){var y=o[r].s;if(p[y]>t)g+=v-(1<<f-p[y]),p[y]=t;else break}for(g>>>=m;g>0;){var b=o[r].s;p[b]<t?g-=1<<t-p[b]++-1:++r}for(;r>=0&&g;--r){var w=o[r].s;p[w]==t&&(--p[w],++g)}f=t}return[new sr(p),f]},sM=function(e,t,i){return -1==e.s?Math.max(sM(e.l,t,i+1),sM(e.r,t,i+1)):t[e.s]=i},sD=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new sn(++t),r=0,n=e[0],o=1,s=function(e){i[r++]=e},a=1;a<=t;++a)if(e[a]==n&&a!=t)++o;else{if(!n&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(n),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(n);o=1,n=e[a]}return[i.subarray(0,r),t]},sT=function(e,t){for(var i=0,r=0;r<t.length;++r)i+=e[r]*t[r];return i},sO=function(e,t,i){var r=i.length,n=sS(t+2);e[n]=255&r,e[n+1]=r>>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var o=0;o<r;++o)e[n+o+4]=i[o];return(n+4+r)*8},s_=function(e,t,i,r,n,o,s,a,l,u,d){sR(t,d++,i),++n[256];for(var c,h,p,f,g=sP(n,15),m=g[0],v=g[1],y=sP(o,15),b=y[0],w=y[1],C=sD(m),x=C[0],S=C[1],k=sD(b),R=k[0],E=k[1],P=new sn(19),M=0;M<x.length;++M)P[31&x[M]]++;for(var M=0;M<R.length;++M)P[31&R[M]]++;for(var D=sP(P,7),T=D[0],O=D[1],_=19;_>4&&!T[sl[_-1]];--_);var A=u+5<<3,F=sT(n,sb)+sT(o,sw)+s,I=sT(n,m)+sT(o,b)+s+14+3*_+sT(P,T)+(2*P[16]+3*P[17]+7*P[18]);if(A<=F&&A<=I)return sO(t,d,e.subarray(l,l+u));if(sR(t,d,1+(I<F)),d+=2,I<F){c=sy(m,v,0),h=m,p=sy(b,w,0),f=b;var L=sy(T,O,0);sR(t,d,S-257),sR(t,d+5,E-1),sR(t,d+10,_-4),d+=14;for(var M=0;M<_;++M)sR(t,d+3*M,T[sl[M]]);d+=3*_;for(var N=[x,R],B=0;B<2;++B)for(var V=N[B],M=0;M<V.length;++M){var H=31&V[M];sR(t,d,L[H]),d+=T[H],H>15&&(sR(t,d,V[M]>>>5&127),d+=V[M]>>>12)}}else c=sC,h=sb,p=sx,f=sw;for(var M=0;M<a;++M)if(r[M]>255){var H=r[M]>>>18&31;sE(t,d,c[H+257]),d+=h[H+257],H>7&&(sR(t,d,r[M]>>>23&31),d+=ss[H]);var z=31&r[M];sE(t,d,p[z]),d+=f[z],z>3&&(sE(t,d,r[M]>>>5&8191),d+=sa[z])}else sE(t,d,c[r[M]]),d+=h[r[M]];return sE(t,d,c[256]),d+h[256]},sA=new so([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sF=function(e,t,i,r,n,o){var s=e.length,a=new sr(r+s+5*(1+Math.floor(s/7e3))+n),l=a.subarray(r,a.length-n),u=0;if(!t||s<8)for(var d=0;d<=s;d+=65535){var c=d+65535;c<s?u=sO(l,u,e.subarray(d,c)):(l[d]=o,u=sO(l,u,e.subarray(d,s)))}else{for(var h=sA[t-1],p=h>>>13,f=8191&h,g=(1<<i)-1,m=new sn(32768),v=new sn(g+1),y=Math.ceil(i/3),b=2*y,w=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&g},C=new so(25e3),x=new sn(288),S=new sn(32),k=0,R=0,d=0,E=0,P=0,M=0;d<s;++d){var D=w(d),T=32767&d,O=v[D];if(m[T]=O,v[D]=T,P<=d){var _=s-d;if((k>7e3||E>24576)&&_>423){u=s_(e,l,0,C,x,S,R,E,M,d-M,u),E=k=R=0,M=d;for(var A=0;A<286;++A)x[A]=0;for(var A=0;A<30;++A)S[A]=0}var F=2,I=0,L=f,N=T-O&32767;if(_>2&&D==w(d-N))for(var B=Math.min(p,_)-1,V=Math.min(32767,d),H=Math.min(258,_);N<=V&&--L&&T!=O;){if(e[d+F]==e[d+F-N]){for(var z=0;z<H&&e[d+z]==e[d+z-N];++z);if(z>F){if(F=z,I=N,z>B)break;for(var j=Math.min(N,z-2),G=0,A=0;A<j;++A){var W=d-N+A+32768&32767,U=m[W],$=W-U+32768&32767;$>G&&(G=$,O=W)}}}O=m[T=O],N+=T-O+32768&32767}if(I){C[E++]=0x10000000|sh[F]<<18|sf[I];var q=31&sh[F],K=31&sf[I];R+=ss[q]+sa[K],++x[257+q],++S[K],P=d+F,++k}else C[E++]=e[d],++x[e[d]]}}u=s_(e,l,o,C,x,S,R,E,M,d-M,u)}return sk(a,0,r+sS(u)+n)},sI=function(){var e=1,t=0;return{p:function(i){for(var r=e,n=t,o=i.length,s=0;s!=o;){for(var a=Math.min(s+5552,o);s<a;++s)r+=i[s],n+=r;r%=65521,n%=65521}e=r,t=n},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+((255&e)<<23)*2}}},sL=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},sN=function(e,t){var i=t.level,r=0==i?0:i<6?1:9==i?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},sB=function(){function e(e,t,i,r){var n,o=this;this.taskQueue=[],this.isProcessing=!1,this.compressEvent=function(e){var t,i,r,n,o;return JSON.stringify(function(e,t){var i="";if(!t&&"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var r=0;r<e.length;){var n=e[r++];n<128||t?i+=String.fromCharCode(n):n<224?i+=String.fromCharCode((31&n)<<6|63&e[r++]):n<240?i+=String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):i+=String.fromCharCode(55296|(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536)>>10,56320|1023&n)}return i}((t=function(e,t){var i=e.length;if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);for(var r=new sr(e.length+(e.length>>>1)),n=0,o=function(e){r[n++]=e},s=0;s<i;++s){if(n+5>r.length){var a=new sr(n+8+(i-s<<1));a.set(r),r=a}var l=e.charCodeAt(s);l<128?o(l):(l<2048?o(192|l>>>6):(l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63)):o(224|l>>>12),o(128|l>>>6&63)),o(128|63&l))}return sk(r,0,n)}(JSON.stringify({...e,v:"v1"})),void 0===i&&(i={}),(r=sI()).p(t),sN(o=sF(t,null==(n=i).level?6:n.level,null==n.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+n.mem,2,4,!0),i),sL(o,o.length-4,r.d()),o),!0))},this.addCompressedEventToManager=function(e,t){o.eventsManager&&o.deviceId&&o.eventsManager.addEvent({event:{type:"replay",data:e},sessionId:t,deviceId:o.deviceId})},this.addCompressedEvent=function(e,t){if(o.worker)try{o.worker.postMessage({event:e,sessionId:t})}catch(i){"DataCloneError"===i.name?o.worker.postMessage(JSON.stringify({event:e,sessionId:t})):o.config.loggerProvider.warn("Unexpected error while posting message to worker:",i)}else{var i=o.compressEvent(e);o.addCompressedEventToManager(i,t)}},this.terminate=function(){var e;null==(e=o.worker)||e.terminate()};var s=(0,eF.getGlobalScope)();if(this.canUseIdleCallback=s&&"requestIdleCallback"in s,this.eventsManager=e,this.config=t,this.deviceId=i,this.timeout=(null==(n=t.performanceConfig)?void 0:n.timeout)||2e3,r){t.loggerProvider.log("[Experimental] Enabling web worker for compression");var a=new Worker(URL.createObjectURL(new Blob([r],{type:"application/javascript"})));a.onerror=function(e){t.loggerProvider.error(e)},a.onmessage=function(e){var t=e.data,i=t.compressedEvent,r=t.sessionId;o.addCompressedEventToManager(i,r)},this.worker=a}}return e.prototype.scheduleIdleProcessing=function(){var e=this;this.isProcessing||(this.isProcessing=!0,requestIdleCallback(function(t){e.processQueue(t)},{timeout:this.timeout}))},e.prototype.enqueueEvent=function(e,t){var i;this.canUseIdleCallback&&(null==(i=this.config.performanceConfig)?void 0:i.enabled)?(this.config.loggerProvider.debug("Enqueuing event for processing during idle time."),this.taskQueue.push({event:e,sessionId:t}),this.scheduleIdleProcessing()):(this.config.loggerProvider.debug("Processing event without idle callback."),this.addCompressedEvent(e,t))},e.prototype.processQueue=function(e){for(var t=this;this.taskQueue.length>0&&(e.timeRemaining()>0||e.didTimeout);){var i=this.taskQueue.shift();if(i){var r=i.event,n=i.sessionId;this.addCompressedEvent(r,n)}}this.taskQueue.length>0?requestIdleCallback(function(e){t.processQueue(e)},{timeout:this.timeout}):this.isProcessing=!1},e}(),sV="Failed to store session replay events in IndexedDB",sH="1.29.3",sz=function(){function e(e){var t=e.trackServerUrl,i=e.loggerProvider,r=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=i,this.payloadBatcher=r||function(e){return e},this.trackServerUrl=t}return e.prototype.sendEventsList=function(e){this.addToQueue((0,ec.__assign)((0,ec.__assign)({},e),{attempts:0,timeout:0}))},e.prototype.addToQueue=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];t.filter(function(t){return t.attempts<(t.flushMaxRetries||0)?(t.attempts+=1,!0):(e.completeRequest({context:t,err:"Session replay event batch rejected due to exceeded retry count"}),!1)}).forEach(function(t){(e.queue=e.queue.concat(t),0===t.timeout)?e.schedule(0):setTimeout(function(){t.timeout=0,e.schedule(0)},t.timeout)})},e.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=setTimeout(function(){t.flush(!0).then(function(){t.queue.length>0&&t.schedule(e)})},e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r=this;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:return t=[],i=[],this.queue.forEach(function(e){return 0===e.timeout?t.push(e):i.push(e)}),this.queue=i,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(t.map(function(t){return r.send(t,e)}))];case 1:return n.sent(),[2]}})})},e.prototype.send=function(e,t){var i,r;return void 0===t&&(t=!0),(0,ec.__awaiter)(this,void 0,void 0,function(){var n,o,s,a,l,u,d,c,h,p,f,g;return(0,ec.__generator)(this,function(m){switch(m.label){case 0:if(!(n=e.apiKey))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing api key"})];if(!(o=e.deviceId))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing device ID"})];if(s=oK(),a=sH,l=e.sampleRate,u=new URLSearchParams({device_id:o,session_id:"".concat(e.sessionId),type:"".concat(e.type)}),d="".concat((null==(i=e.version)?void 0:i.type)||"standalone","/").concat((null==(r=e.version)?void 0:r.version)||a),0===(c=this.payloadBatcher({version:1,events:e.events})).events.length)return this.completeRequest({context:e}),[2];m.label=1;case 1:return m.trys.push([1,3,,4]),h={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(n),"X-Client-Version":a,"X-Client-Library":d,"X-Client-Url":s.substring(0,1e3),"X-Client-Sample-Rate":"".concat(l)},body:JSON.stringify(c),method:"POST"},[4,fetch("".concat(oQ(e.serverZone,this.trackServerUrl),"?").concat(u.toString()),h)];case 2:if(null===(p=m.sent()))return this.completeRequest({context:e,err:"Unexpected error occurred"}),[2];if(t)this.handleReponse(p.status,e);else{f="";try{f=JSON.stringify(p.body,null,2)}catch(e){}this.completeRequest({context:e,success:"".concat(p.status,": ").concat(f)})}return[3,4];case 3:return g=m.sent(),this.completeRequest({context:e,err:g}),[3,4];case 4:return[2]}})})},e.prototype.handleReponse=function(e,t){switch(new tY().buildStatus(e)){case $.Success:this.handleSuccessResponse(t);break;case $.Failed:this.handleOtherResponse(t);break;default:this.completeRequest({context:t,err:"Network error occurred, event batch rejected"})}},e.prototype.handleSuccessResponse=function(e){var t=Math.round(new Blob(e.events).size/1024);this.completeRequest({context:e,success:"Session replay event batch tracked successfully for session id ".concat(e.sessionId,", size of events: ").concat(t," KB")})},e.prototype.handleOtherResponse=function(e){this.addToQueue((0,ec.__assign)((0,ec.__assign)({},e),{timeout:e.attempts*this.retryTimeout}))},e.prototype.completeRequest=function(e){var t=e.context,i=e.err,r=e.success;t.onComplete(),i?this.loggerProvider.warn(i):r&&this.loggerProvider.log(r)},e}(),sj=e.i(601217),sG=function(){function e(e){var t,i,r,n=this;this.minInterval=500,this.maxInterval=1e4,this.maxPersistedEventsSize=1e6,this.interval=this.minInterval,this._timeAtLastSplit=Date.now(),this.shouldSplitEventsList=function(e,t){var i=n.getStringSize(t);return n.getEventsArraySize(e)+i>=n.maxPersistedEventsSize||Date.now()-n.timeAtLastSplit>n.interval&&!!e.length&&(n.interval=Math.min(n.maxInterval,n.interval+n.minInterval),n._timeAtLastSplit=Date.now(),!0)},this.loggerProvider=e.loggerProvider,this.minInterval=null!=(t=e.minInterval)?t:this.minInterval,this.maxInterval=null!=(i=e.maxInterval)?i:this.maxInterval,this.maxPersistedEventsSize=null!=(r=e.maxPersistedEventsSize)?r:this.maxPersistedEventsSize}return Object.defineProperty(e.prototype,"timeAtLastSplit",{get:function(){return this._timeAtLastSplit},enumerable:!1,configurable:!0}),e.prototype.getStringSize=function(e){return e.length},e.prototype.getEventsArraySize=function(e){var t,i,r=0;try{for(var n=(0,ec.__values)(e),o=n.next();!o.done;o=n.next()){var s=o.value;r+=this.getStringSize(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r+(2+Math.max(0,e.length-1)+2*e.length)},e}();(R=et||(et={})).RECORDING="recording",R.SENT="sent";var sW="sessionCurrentSequence",sU="sequencesToSend",s$=function(){var e=(0,eF.getGlobalScope)();return new Promise(function(t,i){if(!e)return i(Error("Global scope not found"));if(!e.indexedDB)return i(Error("Session Replay: cannot find indexedDB"));try{var r=e.indexedDB.open("keyval-store");r.onupgradeneeded=function(){1===r.result.version&&(r.result.close(),r.transaction&&r.transaction.abort(),e.indexedDB.deleteDatabase("keyval-store"),t())},r.onsuccess=function(){t(r.result)},r.onerror=function(){i(r.error)}}catch(e){i(e)}})},sq=function(e){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){switch(t.label){case 0:if(!(e.length>0))return[3,2];return[4,Promise.all(e.splice(0,10))];case 1:return t.sent(),[3,0];case 2:return[2]}})})},sK=function(e){var t,i;return e.objectStoreNames.contains(sW)||(i=e.createObjectStore(sW,{keyPath:"sessionId"})),e.objectStoreNames.contains(sU)||(t=e.createObjectStore(sU,{keyPath:"sequenceId",autoIncrement:!0})).createIndex("sessionId","sessionId"),{sequencesStore:t,currentSequenceStore:i}},sQ=function(e){function t(t){var i=e.call(this,t)||this;return i.getSequencesToSend=function(){return(0,ec.__awaiter)(i,void 0,void 0,function(){var e,t,i,r,n,o;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e=[],[4,this.db.transaction("sequencesToSend").store.openCursor()];case 1:t=s.sent(),s.label=2;case 2:if(!t)return[3,4];return r=(i=t.value).sessionId,n=i.events,e.push({events:n,sequenceId:t.key,sessionId:r}),[4,t.continue()];case 3:return t=s.sent(),[3,2];case 4:return[2,e];case 5:return o=s.sent(),this.loggerProvider.warn("".concat(sV,": ").concat(o)),[3,6];case 6:return[2,void 0]}})})},i.storeCurrentSequence=function(e){return(0,ec.__awaiter)(i,void 0,void 0,function(){var t,i,r;return(0,ec.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,this.db.get(sW,e)];case 1:if(!(t=n.sent()))return[2,void 0];return[4,this.db.put(sU,{sessionId:e,events:t.events})];case 2:return i=n.sent(),[4,this.db.put(sW,{sessionId:e,events:[]})];case 3:return n.sent(),[2,(0,ec.__assign)((0,ec.__assign)({},t),{sessionId:e,sequenceId:i})];case 4:return r=n.sent(),this.loggerProvider.warn("".concat(sV,": ").concat(r)),[3,5];case 5:return[2,void 0]}})})},i.addEventToCurrentSequence=function(e,t){return(0,ec.__awaiter)(i,void 0,void 0,function(){var i,r,n,o,s,a;return(0,ec.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,10,,11]),[4,(i=this.db.transaction(sW,"readwrite")).store.get(e)];case 1:if(r=l.sent())return[3,3];return[4,i.store.put({sessionId:e,events:[t]})];case 2:return l.sent(),[2];case 3:if(n=void 0,!this.shouldSplitEventsList(r.events,t))return[3,5];return n=r.events,[4,i.store.put({sessionId:e,events:[t]})];case 4:return l.sent(),[3,7];case 5:return o=r.events.concat(t),[4,i.store.put({sessionId:e,events:o})];case 6:l.sent(),l.label=7;case 7:return[4,i.done];case 8:if(l.sent(),!n)return[2,void 0];return[4,this.storeSendingEvents(e,n)];case 9:if(!(s=l.sent()))return[2,void 0];return[2,{events:n,sessionId:e,sequenceId:s}];case 10:return a=l.sent(),this.loggerProvider.warn("".concat(sV,": ").concat(a)),[3,11];case 11:return[2,void 0]}})})},i.storeSendingEvents=function(e,t){return(0,ec.__awaiter)(i,void 0,void 0,function(){var i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.db.put(sU,{sessionId:e,events:t})];case 1:return[2,r.sent()];case 2:return i=r.sent(),this.loggerProvider.warn("".concat(sV,": ").concat(i)),[3,3];case 3:return[2,void 0]}})})},i.cleanUpSessionEventsStore=function(e,t){return(0,ec.__awaiter)(i,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:if(!t)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.db.delete(sU,t)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),this.loggerProvider.warn("".concat(sV,": ").concat(e)),[3,4];case 4:return[2]}})})},i.transitionFromKeyValStore=function(e){return(0,ec.__awaiter)(i,void 0,void 0,function(){var t,i,r,n,o,s,a,l=this;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),[4,s$()];case 1:if(!(t=u.sent()))return[2];i=function(e,t){return(0,ec.__awaiter)(l,void 0,void 0,function(){var i,r,n=this;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:return i=t.sessionSequences,r=[],Object.keys(i).forEach(function(o){var s=parseInt(o,10),a=i[s];if(s===t.currentSequenceId){var l=a.events.map(function(t){return(0,ec.__awaiter)(n,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return[2,this.addEventToCurrentSequence(e,t)]})})});r.push.apply(r,(0,ec.__spreadArray)([],(0,ec.__read)(l),!1))}else a.status!==et.SENT&&r.push(n.storeSendingEvents(e,a.events))}),[4,sq(r)];case 1:return o.sent(),[2]}})})},r="".concat(eh,"_").concat(this.apiKey.substring(0,10)),u.label=2;case 2:return u.trys.push([2,4,,5]),n=t.transaction("keyval").objectStore("keyval").getAll(r),[4,new Promise(function(t){n.onsuccess=function(r){return(0,ec.__awaiter)(l,void 0,void 0,function(){var n,o,s,a=this;return(0,ec.__generator)(this,function(l){switch(l.label){case 0:if(!(o=(n=r&&r.target.result)&&n[0]))return[3,2];return s=[],Object.keys(o).forEach(function(t){var r=parseInt(t,10),n=o[r];if(e===r)s.push(i(r,n));else{var l=n.sessionSequences;Object.keys(l).forEach(function(e){var t=parseInt(e,10);l[t].status!==et.SENT&&s.push(a.storeSendingEvents(r,l[t].events))})}}),[4,sq(s)];case 1:l.sent(),l.label=2;case 2:return t(),[2]}})})}})];case 3:return u.sent(),(o=(0,eF.getGlobalScope)())&&o.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return s=u.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(s)),[3,5];case 5:return[3,7];case 6:return a=u.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(a,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}})})},i.apiKey=t.apiKey,i.db=t.db,i}return(0,ec.__extends)(t,e),t.new=function(e,i,r){return(0,ec.__awaiter)(this,void 0,void 0,function(){var n,o,s,a;return(0,ec.__generator)(this,function(l){switch(l.label){case 0:var u;return l.trys.push([0,3,,4]),n="replay"===e?"":"_".concat(e),[4,(u="".concat(i.apiKey.substring(0,10),"_amp_session_replay_events").concat(n),(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,sj.openDB)(u,1,{upgrade:sK})];case 1:return[2,e.sent()]}})}))];case 1:return o=l.sent(),[4,(s=new t((0,ec.__assign)((0,ec.__assign)({},i),{db:o}))).transitionFromKeyValStore(r)];case 2:return l.sent(),[2,s];case 3:return a=l.sent(),i.loggerProvider.warn("".concat(sV,": ").concat(a)),[3,4];case 4:return[2]}})})},t.prototype.getCurrentSequenceEvents=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i,r,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(!e)return[3,2];return[4,this.db.get("sessionCurrentSequence",e)];case 1:if(!(t=a.sent()))return[2,void 0];return[2,[t]];case 2:i=[],a.label=3;case 3:return a.trys.push([3,8,9,10]),[4,this.db.getAll("sessionCurrentSequence")];case 4:n=(r=ec.__values.apply(void 0,[a.sent()])).next(),a.label=5;case 5:if(n.done)return[3,7];t=n.value,i.push(t),a.label=6;case 6:return n=r.next(),[3,5];case 7:return[3,10];case 8:return o={error:a.sent()},[3,10];case 9:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2,i]}})})},t}(sG),sX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finalizedSequences={},t.sequences={},t.sequenceId=0,t}return(0,ec.__extends)(t,e),t.prototype.resetCurrentSequence=function(e){this.sequences[e]=[]},t.prototype.addSequence=function(e){var t=this.sequenceId++,i=(0,ec.__spreadArray)([],(0,ec.__read)(this.sequences[e]),!1);return this.finalizedSequences[t]={sessionId:e,events:i},this.resetCurrentSequence(e),{sequenceId:t,events:i,sessionId:e}},t.prototype.getSequencesToSend=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return[2,Object.entries(this.finalizedSequences).map(function(e){var t=(0,ec.__read)(e,2),i=t[0],r=t[1],n=r.sessionId,o=r.events;return{sequenceId:Number(i),sessionId:n,events:o}})]})})},t.prototype.storeCurrentSequence=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){return this.sequences[e]?[2,this.addSequence(e)]:[2,void 0]})})},t.prototype.addEventToCurrentSequence=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){var i;return(0,ec.__generator)(this,function(r){return this.sequences[e]||this.resetCurrentSequence(e),this.shouldSplitEventsList(this.sequences[e],t)&&(i=this.addSequence(e)),this.sequences[e].push(t),[2,i]})})},t.prototype.storeSendingEvents=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return this.finalizedSequences[this.sequenceId]={sessionId:e,events:t},[2,this.sequenceId++]})})},t.prototype.cleanUpSessionEventsStore=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){return void 0!==t&&delete this.finalizedSequences[t],[2]})})},t}(sG),sY=function(e){var t=e.config,i=e.sessionId,r=e.minInterval,n=e.maxInterval,o=e.type,s=e.payloadBatcher,a=e.storeType;return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e,l,u,d,c;function h(t){return void 0===t&&(t=!1),(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return[2,e.flush(t)]})})}return(0,ec.__generator)(this,function(p){switch(p.label){case 0:if(e=new sz((0,ec.__assign)((0,ec.__assign)({},t),{loggerProvider:t.loggerProvider,payloadBatcher:s})),l=function(){return new sX({loggerProvider:t.loggerProvider,maxInterval:n,minInterval:r})},"idb"!==a)return[3,2];return[4,(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:return[4,sQ.new(o,{loggerProvider:t.loggerProvider,minInterval:r,maxInterval:n,apiKey:t.apiKey},i)];case 1:return e=s.sent(),t.loggerProvider.log("Failed to initialize idb store, falling back to memory store."),[2,null!=e?e:l()]}})})];case 1:return d=p.sent(),[3,3];case 2:d=l(),p.label=3;case 3:return u=d,c=function(i){var r=i.events,n=i.sessionId,s=i.deviceId,a=i.sequenceId;t.debugMode&&oJ().then(function(e){var i=e.totalStorageSize,r=e.percentOfQuota,n=e.usageDetails;t.loggerProvider.debug("Total storage size: ".concat(i," KB, percentage of quota: ").concat(r,"%, usage details: ").concat(n))}).catch(function(){}),e.sendEventsList({events:r,sessionId:n,flushMaxRetries:t.flushMaxRetries,apiKey:t.apiKey,deviceId:s,sampleRate:t.sampleRate,serverZone:t.serverZone,version:t.version,type:o,onComplete:function(){return(0,ec.__awaiter)(void 0,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){switch(e.label){case 0:return[4,u.cleanUpSessionEventsStore(n,a)];case 1:return e.sent(),[2]}})})}})},[2,{sendCurrentSequenceEvents:function(e){var i=e.sessionId,r=e.deviceId;u.storeCurrentSequence(i).then(function(e){e&&c({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:r})}).catch(function(e){t.loggerProvider.warn("Failed to get current sequence of session replay events for session:",e)})},addEvent:function(e){var i=e.event,r=e.sessionId,n=e.deviceId;u.addEventToCurrentSequence(r,i.data).then(function(e){return e&&c({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:n})}).catch(function(e){t.loggerProvider.warn("Failed to add event to session replay capture:",e)})},sendStoredEvents:function(e){var t=e.deviceId;return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return[4,u.getSequencesToSend()];case 1:return(e=i.sent())&&e.forEach(function(e){c({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:t})}),[2]}})})},flush:h}]}})})},sZ=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=new Map;e.forEach(function(e){i.set(e.name,e.manager)}),this.managers=i}return e.prototype.sendStoredEvents=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return t=[],this.managers.forEach(function(i){t.push(i.sendStoredEvents(e))}),[4,Promise.all(t)];case 1:return i.sent(),[2]}})})},e.prototype.addEvent=function(e){var t,i=e.sessionId,r=e.event,n=e.deviceId;null==(t=this.managers.get(r.type))||t.addEvent({sessionId:i,event:r,deviceId:n})},e.prototype.sendCurrentSequenceEvents=function(e){var t=e.sessionId,i=e.deviceId;this.managers.forEach(function(e){e.sendCurrentSequenceEvents({sessionId:t,deviceId:i})})},e.prototype.flush=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t;return(0,ec.__generator)(this,function(i){switch(i.label){case 0:return t=[],this.managers.forEach(function(i){t.push(i.flush(e))}),[4,Promise.all(t)];case 1:return i.sent(),[2]}})})},e}();let sJ={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},s0={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},s1={};function s2(e){var t,i;let r;if(s1[e])return s1[e];let n=((r=null==(i=null==(t=null==globalThis?void 0:globalThis.Zone)?void 0:t.__symbol__)?void 0:i.call(t,e))&&globalThis[r]?globalThis[r]:void 0)||globalThis[e],o=n.prototype,s=e in sJ?sJ[e]:void 0,a=!!(s&&s.every(e=>{var t,i;return!!(null==(i=null==(t=Object.getOwnPropertyDescriptor(o,e))?void 0:t.get)?void 0:i.toString().includes("[native code]"))})),l=e in s0?s0[e]:void 0,u=!!(l&&l.every(e=>{var t;return"function"==typeof o[e]&&(null==(t=o[e])?void 0:t.toString().includes("[native code]"))}));if(a&&u)return s1[e]=n.prototype,n.prototype;try{let t=document.createElement("iframe");document.body.appendChild(t);let i=t.contentWindow;if(!i)return n.prototype;let r=i[e].prototype;if(document.body.removeChild(t),!r)return o;return s1[e]=r}catch{return o}}let s5={},s3=function(e){var t,i="Node",r=e,n="parentElement";let o=`${i}.${String(n)}`;if(s5[o])return s5[o].call(r);let s=null==(t=Object.getOwnPropertyDescriptor(s2(i),n))?void 0:t.get;return s?(s5[o]=s,s.call(r)):r[n]};function s4(){var e=(0,eF.getGlobalScope)();return(null==e?void 0:e.innerHeight)||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function s8(){var e=(0,eF.getGlobalScope)();return(null==e?void 0:e.innerWidth)||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function s6(e,t,i){for(var r=null,n=[],o=e,s=0;o&&"break"!==function(){var e,a,l,u,d=new Date().getTime()-en.getTime();if(void 0!==ei.timeoutMs&&d>ei.timeoutMs)throw Error("Timeout: Can't find a unique selector after ".concat(d,"ms"));var c=ao((e=o.getAttribute("id"))&&ei.idName(e)?{name:"#"+CSS.escape(e),penalty:0}:null)||ao.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(Array.from(o.attributes).filter(function(e){return ei.attr(e.name,e.value)}).map(function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}})),!1))||ao.apply(void 0,(0,ec.__spreadArray)([],(0,ec.__read)(Array.from(o.classList).filter(ei.className).map(function(e){return{name:"."+CSS.escape(e),penalty:1}})),!1))||ao((a=o.tagName.toLowerCase(),ei.tagName(a)?{name:a,penalty:2}:null))||[ai()],h=function(e){var t=e.parentNode;if(!t)return null;var i=t.firstChild;if(!i)return null;for(var r=0;i&&(i.nodeType===Node.ELEMENT_NODE&&r++,i!==e);)i=i.nextSibling;return r}(o);if("all"==t)h&&(c=c.concat(c.filter(an).map(function(e){return ar(e,h)})));else if("two"==t)c=c.slice(0,1),h&&(c=c.concat(c.filter(an).map(function(e){return ar(e,h)})));else if("one"==t){var p=(0,ec.__read)(c=c.slice(0,1),1)[0];h&&an(p)&&(c=[ar(p,h)])}else"none"==t&&(c=[ai()],h&&(c=[ar(c[0],h)]));try{for(var f=(l=void 0,(0,ec.__values)(c)),g=f.next();!g.done;g=f.next()){var p=g.value;p.level=s}}catch(e){l={error:e}}finally{try{g&&!g.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}if(n.push(c),n.length>=ei.seedMinLength&&(r=s7(n,i)))return"break";o=o.parentElement,s++}(););return(r||(r=s7(n,i)),!r&&i)?i():r}function s7(e,t){var i,r,n=aa(function e(t,i){var r,n,o,s,a;return void 0===i&&(i=[]),(0,ec.__generator)(this,function(l){switch(l.label){case 0:if(!(t.length>0))return[3,9];l.label=1;case 1:l.trys.push([1,6,7,8]),n=(r=(0,ec.__values)(t[0])).next(),l.label=2;case 2:if(n.done)return[3,5];return o=n.value,[5,(0,ec.__values)(e(t.slice(1,t.length),i.concat(o)))];case 3:l.sent(),l.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return s={error:l.sent()},[3,8];case 7:try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,i];case 10:l.sent(),l.label=11;case 11:return[2]}})}(e));if(n.length>ei.threshold)return t?t():null;try{for(var o=(0,ec.__values)(n),s=o.next();!s.done;s=o.next()){var a=s.value;if(at(a))return a}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return null}function s9(e){for(var t=e[0],i=t.name,r=1;r<e.length;r++){var n=e[r].level||0;i=t.level===n-1?"".concat(e[r].name," > ").concat(i):"".concat(e[r].name," ").concat(i),t=e[r]}return i}function ae(e){return e.map(function(e){return e.penalty}).reduce(function(e,t){return e+t},0)}function at(e){var t=s9(e);switch(er.querySelectorAll(t).length){case 0:throw Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function ai(){return{name:"*",penalty:3}}function ar(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function an(e){return"html"!==e.name&&!e.name.startsWith("#")}function ao(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.filter(as);return i.length>0?i:null}function as(e){return null!=e}function aa(e){return(0,ec.__spreadArray)([],(0,ec.__read)(e),!1).sort(function(e,t){return ae(e)-ae(t)})}var al=function(e){var t=e.version,i=e.events,r=[];return i.forEach(function(e){var t=JSON.parse(e);t.count=1,"click"===t.type&&r.push(t)}),{version:t,events:r}},au=function(e){var t=e.version,i=e.events,r=[];return i.forEach(function(e){var t=JSON.parse(e);"click"===t.type&&r.push(t)}),{version:t,events:Object.values(r.reduce(function(e,t){var i=t.x,r=t.y,n=t.selector,o=t.timestamp,s=o-o%36e5,a="".concat(i,":").concat(r,":").concat(null!=n?n:"",":").concat(s);return e[a]?e[a].count+=1:e[a]=(0,ec.__assign)((0,ec.__assign)({},t),{timestamp:s,count:1}),e},{}))}},ad=function(e,t){var i=t.eventsManager,r=t.sessionId,n=t.deviceIdFn,o=t.mirror,s=t.ugcFilterRules;return function(t){if(t.type!==o4.Click)return;var a,l=(0,eF.getGlobalScope)();if(l){var u=l.location,d=l.innerHeight,c=l.innerWidth;if(u){var h=t.x,p=t.y;if(void 0!==h&&void 0!==p){var f,g,m,v,y,b=o.getNode(t.id);if(b)try{a=function(e,t){if(en=new Date,e.nodeType!==Node.ELEMENT_NODE)throw Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var i,r,n={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};i=(ei=(0,ec.__assign)((0,ec.__assign)({},n),void 0)).root,r=n,er=i.nodeType===Node.DOCUMENT_NODE?i:i===r.root?i.ownerDocument:i;var o=s6(e,"all",function(){return s6(e,"two",function(){return s6(e,"one",function(){return s6(e,"none")})})});if(o){var s=aa(function e(t,i,r){var n,o,s;return void 0===r&&(r={counter:0,visited:new Map}),(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(!(t.length>2&&t.length>ei.optimizedMinLength))return[3,5];n=1,a.label=1;case 1:var l,u;if(!(n<t.length-1))return[3,5];if(r.counter>ei.maxNumberOfTries||(r.counter+=1,(o=(0,ec.__spreadArray)([],(0,ec.__read)(t),!1)).splice(n,1),s=s9(o),r.visited.has(s)))return[2];if(!(at(o)&&(l=o,u=i,er.querySelector(s9(l))===u)))return[3,4];return[4,o];case 2:return a.sent(),r.visited.set(s,!0),[5,(0,ec.__values)(e(o,i,r))];case 3:a.sent(),a.label=4;case 4:return n++,[3,1];case 5:return[2]}})}(o,e));return s.length>0&&(o=s[0]),s9(o)}throw Error("Selector was not found.")}(b)}catch(t){e.debug("error resolving selector from finder")}var w={left:(y=l.document).scrollingElement?y.scrollingElement.scrollLeft:void 0!==l.pageXOffset?l.pageXOffset:y.documentElement.scrollLeft||(null==y?void 0:y.body)&&(null==(f=s3(y.body))?void 0:f.scrollLeft)||(null==(g=null==y?void 0:y.body)?void 0:g.scrollLeft)||0,top:y.scrollingElement?y.scrollingElement.scrollTop:void 0!==l.pageYOffset?l.pageYOffset:(null==y?void 0:y.documentElement.scrollTop)||(null==y?void 0:y.body)&&(null==(m=s3(y.body))?void 0:m.scrollTop)||(null==(v=null==y?void 0:y.body)?void 0:v.scrollTop)||0},C={x:h+w.left,y:p+w.top,selector:a,viewportHeight:d,viewportWidth:c,pageUrl:oZ(u.href,s),timestamp:Date.now(),type:"click"},x=n();x&&i.addEvent({sessionId:r,event:{type:"interaction",data:JSON.stringify(C)},deviceId:x})}}}}},ac=function(){function e(e,t){var i=(0,eF.getGlobalScope)();i&&i.navigator&&"function"==typeof i.navigator.sendBeacon?this.sendBeacon=function(e,t){try{if(i.navigator.sendBeacon(e,JSON.stringify(t)))return!0}catch(e){}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(e,t){var i=new XMLHttpRequest;return i.open("POST",e,!0),i.setRequestHeader("Accept","*/*"),i.send(JSON.stringify(t)),!0},this.basePageUrl=oQ(t.serverZone,t.trackServerUrl),this.apiKey=t.apiKey,this.context=e}return e.prototype.send=function(e,t){var i=this.context,r=i.sessionId,n=i.type,o=new URLSearchParams({device_id:e,session_id:String(r),type:String(n),api_key:this.apiKey}),s="".concat(this.basePageUrl,"?").concat(o.toString());this.sendBeacon(s,t)||this.sendXhr(s,t)},e}(),ah=function(){function e(e,t){var i=this;this.timestamp=Date.now(),this.hook=function(e){i.update(e)},this.send=function(e){return function(t){var r,n,o=e(),s=(0,eF.getGlobalScope)();s&&o&&i.transport.send(o,{version:1,events:[{maxScrollX:i._maxScrollX,maxScrollY:i._maxScrollY,maxScrollWidth:i._maxScrollWidth,maxScrollHeight:i._maxScrollHeight,viewportHeight:s4(),viewportWidth:s8(),pageUrl:oZ(s.location.href,null!=(n=null==(r=i.config.interactionConfig)?void 0:r.ugcFilterRules)?n:[]),timestamp:i.timestamp,type:"scroll"}]})}},this._maxScrollX=0,this._maxScrollY=0,this._maxScrollWidth=s8(),this._maxScrollHeight=s4(),this.config=t,this.transport=e}return e.default=function(t,i){return new e(new ac(t,i),i)},Object.defineProperty(e.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),e.prototype.update=function(e){var t=Date.now();if(e.x>this._maxScrollX){var i=s8();this._maxScrollX=e.x;var r=e.x+i;r>this._maxScrollWidth&&(this._maxScrollWidth=r),this.timestamp=t}if(e.y>this._maxScrollY){var n=s4();this._maxScrollY=e.y;var o=e.y+n;o>this._maxScrollHeight&&(this._maxScrollHeight=o),this.timestamp=t}},e}(),ap=function(e){var t=e.sessionId,i=e.deviceId;this.deviceId=i,this.sessionId=t,t&&i&&(this.sessionReplayId="".concat(i,"/").concat(t))},af=new function(){var e=this;this.dbs={},this.createStore=function(t){return(0,ec.__awaiter)(e,void 0,void 0,function(){return(0,ec.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,sj.openDB)(t,1,{upgrade:function(e){e.objectStoreNames.contains("sessionTargetingMatch")||e.createObjectStore("sessionTargetingMatch",{keyPath:"sessionId"})}})];case 1:return[2,e.sent()]}})})},this.openOrCreateDB=function(t){return(0,ec.__awaiter)(e,void 0,void 0,function(){var e,i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(this.dbs&&this.dbs[t])return[2,this.dbs[t]];return e="".concat(t.substring(0,10),"_amp_session_replay_targeting"),[4,this.createStore(e)];case 1:return i=r.sent(),this.dbs[t]=i,[2,i]}})})},this.getTargetingMatchForSession=function(t){var i=t.loggerProvider,r=t.apiKey,n=t.sessionId;return(0,ec.__awaiter)(e,void 0,void 0,function(){var e,t,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.openOrCreateDB(r)];case 1:return e=a.sent(),t=String(n),[4,e.get("sessionTargetingMatch",t)];case 2:return[2,null==(o=a.sent())?void 0:o.targetingMatch];case 3:return s=a.sent(),i.warn("Failed to get targeting match for session id ".concat(n,": ").concat(s)),[3,4];case 4:return[2,void 0]}})})},this.storeTargetingMatchForSession=function(t){var i=t.loggerProvider,r=t.apiKey,n=t.sessionId,o=t.targetingMatch;return(0,ec.__awaiter)(e,void 0,void 0,function(){var e,t,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.openOrCreateDB(r)];case 1:return e=a.sent(),t=String(n),[4,e.put("sessionTargetingMatch",{targetingMatch:o,sessionId:t,lastUpdated:Date.now()})];case 2:return[2,a.sent()];case 3:return s=a.sent(),i.warn("Failed to store targeting match for session id ".concat(n,": ").concat(s)),[3,4];case 4:return[2,void 0]}})})},this.clearStoreOfOldSessions=function(t){var i=t.loggerProvider,r=t.apiKey,n=t.currentSessionId;return(0,ec.__awaiter)(e,void 0,void 0,function(){var e,t,o,s,a,l,u,d;return(0,ec.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,8,,9]),[4,this.openOrCreateDB(r)];case 1:return e=c.sent(),t=String(n),[4,(o=e.transaction("sessionTargetingMatch","readwrite")).store.getAll()];case 2:s=c.sent(),a=0,c.label=3;case 3:if(!(a<s.length))return[3,6];if(l=s[a],u=Date.now()-l.lastUpdated,!(l.sessionId!==t&&u>1728e5))return[3,5];return[4,o.store.delete(l.sessionId)];case 4:c.sent(),c.label=5;case 5:return a++,[3,3];case 6:return[4,o.done];case 7:return c.sent(),[3,9];case 8:return d=c.sent(),i.warn("Failed to clear old targeting matches for sessions: ".concat(d)),[3,9];case 9:return[2]}})})}},ag=function(t){var i=t.sessionId,r=t.targetingConfig,n=t.loggerProvider,o=t.apiKey,s=t.targetingParams;return(0,ec.__awaiter)(void 0,void 0,void 0,function(){var t,a,l;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:return[4,af.clearStoreOfOldSessions({loggerProvider:n,apiKey:o,currentSessionId:i})];case 1:return u.sent(),[4,af.getTargetingMatchForSession({loggerProvider:n,apiKey:o,sessionId:i})];case 2:if(!0===u.sent())return[2,!0];t=!0,u.label=3;case 3:return u.trys.push([3,6,,7]),[4,e.A(18737)];case 4:return[4,(0,u.sent().evaluateTargeting)((0,ec.__assign)((0,ec.__assign)({},s),{flag:r,sessionId:i,apiKey:o,loggerProvider:n}))];case 5:return(a=u.sent())&&a.sr_targeting_config&&(t="on"===a.sr_targeting_config.key),af.storeTargetingMatchForSession({loggerProvider:n,apiKey:o,sessionId:i,targetingMatch:t}),[3,7];case 6:return l=u.sent(),n.warn(l.message),[3,7];case 7:return[2,t]}})})};function am(e){return void 0===e&&(e={}),{name:"amplitude/url-tracking@1",observer:function(t,i,r){var n,o,s,a=(0,ec.__assign)((0,ec.__assign)({},e),r),l=a.ugcFilterRules||[],u=null!=(n=a.enablePolling)&&n,d=null!=(o=a.pollingInterval)?o:1e3,c=null!=(s=a.captureDocumentTitle)&&s;if(!i)return function(){};var h=void 0,p=function(){return i.location&&i.location.href||""},f=function(){var e=i.innerHeight,t=i.innerWidth,r=i.document,n=p(),o="";return c&&(o=(null==r?void 0:r.title)||""),{href:l.length>0?oZ(n,l):n,title:o,viewportHeight:e,viewportWidth:t,type:"url-change-event"}},g=function(){var e=p();(void 0===h||e!==h)&&(h=e,t(f()))},m=function(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=e.apply(this,t);return g(),r}},v=function(){g()};if(u){var y=i.setInterval(function(){g()},d);return g(),function(){y&&i.clearInterval(y)}}if(i.history){var b=i.history.pushState.bind(i.history),w=i.history.replaceState.bind(i.history);return i.history.pushState=m(b),i.history.replaceState=m(w),i.addEventListener("popstate",g),i.addEventListener("hashchange",v),g(),function(){i.history.pushState=b,i.history.replaceState=w,i.removeEventListener("popstate",g),i.removeEventListener("hashchange",v)}}return i.addEventListener("hashchange",v),g(),function(){i.removeEventListener("hashchange",v)}},options:e}}am();var av=function(){function t(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.eventCount=0,this.sessionTargetingMatch=!1,this.pageLeaveFns=[],this.recordFunction=null,this.teardownEventListeners=function(t){var i=(0,eF.getGlobalScope)();i&&(i.removeEventListener("blur",e.blurListener),i.removeEventListener("focus",e.focusListener),t||i.addEventListener("blur",e.blurListener),t||i.addEventListener("focus",e.focusListener),i.self&&"onpagehide"in i.self?(i.removeEventListener("pagehide",e.pageLeaveListener),t||i.addEventListener("pagehide",e.pageLeaveListener)):(i.removeEventListener("beforeunload",e.pageLeaveListener),t||i.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents(!1)},this.pageLeaveListener=function(t){e.pageLeaveFns.forEach(function(e){e(t)})},this.evaluateTargetingAndCapture=function(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),(0,ec.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:if(!this.identifiers||!this.identifiers.sessionId||!this.config)return this.identifiers&&!this.identifiers.sessionId?this.loggerProvider.log("Session ID has not been set yet, cannot evaluate targeting for Session Replay."):this.loggerProvider.warn("Session replay init has not been called, cannot evaluate targeting."),[2];if(!this.config.targetingConfig)if(!i)return this.loggerProvider.log("No targeting config set, skipping initialization/recording for event."),[2];else this.loggerProvider.log("Targeting config has not been set yet, cannot evaluate targeting.");if(this.lastTargetingParams=t,!(this.config.targetingConfig&&!this.sessionTargetingMatch))return[3,2];return(e=t.event)&&Object.values(W).includes(e.event_type)&&(e=void 0),n=this,[4,ag({sessionId:this.identifiers.sessionId,targetingConfig:this.config.targetingConfig,loggerProvider:this.loggerProvider,apiKey:this.config.apiKey,targetingParams:{userProperties:t.userProperties,event:e}})];case 1:n.sessionTargetingMatch=o.sent(),this.loggerProvider.debug(JSON.stringify({name:"targeted replay capture config",sessionTargetingMatch:this.sessionTargetingMatch,event:e,targetingParams:t},null,2)),o.label=2;case 2:if(!i)return[3,3];return this.initialize(!0),[3,5];case 3:if(!(r||!this.recordCancelCallback))return[3,5];return this.loggerProvider.log("Recording events for session due to forceRestart or no ongoing recording."),[4,this.recordEvents()];case 4:o.sent(),o.label=5;case 5:return[2]}})})},this.addCustomRRWebEvent=function(t,i,r){return void 0===i&&(i={}),void 0===r&&(r=!0),(0,ec.__awaiter)(e,void 0,void 0,function(){var e,n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),e=void 0,!((n=this.config)&&t!==ee.METADATA)||(e={config:o0(n),version:sH},!r))return[3,2];return[4,oJ()];case 1:o=a.sent(),e=(0,ec.__assign)((0,ec.__assign)({},o),e),a.label=2;case 2:return this.recordCancelCallback&&this.recordFunction?this.recordFunction.addCustomEvent(t,(0,ec.__assign)((0,ec.__assign)({},i),e)):this.loggerProvider.debug("Not able to add custom replay capture event ".concat(t," due to no ongoing recording.")),[3,4];case 3:return s=a.sent(),this.loggerProvider.debug("Error while adding custom replay capture event: ",s),[3,4];case 4:return[2]}})})},this.stopRecordingEvents=function(){var t;try{e.loggerProvider.log("Session Replay capture stopping."),e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null,null==(t=e.networkObservers)||t.stop()}catch(t){e.loggerProvider.warn("Error occurred while stopping replay capture: ".concat(t.toString()))}},this.loggerProvider=new oG(new eU)}return t.prototype.init=function(e,t){return ez(this._init(e,t))},t.prototype._init=function(t,i){var r,n,o,s,a,l,u;return(0,ec.__awaiter)(this,void 0,void 0,function(){var d,c,h,p,f,g,m,v,y,b,w,C,x,S;return(0,ec.__generator)(this,function(k){switch(k.label){case 0:return this.loggerProvider=new oG(i.loggerProvider||new eU),Object.prototype.hasOwnProperty.call(i,"logLevel")&&this.loggerProvider.enable(i.logLevel),this.identifiers=new ap({sessionId:i.sessionId,deviceId:i.deviceId}),d=this,[4,(0,ec.__awaiter)(void 0,void 0,void 0,function(){var e;return(0,ec.__generator)(this,function(r){return e=new o2(t,i),[2,new si(new tp(t,e.loggerProvider,e.serverZone,i.configServerUrl),e)]})})];case 1:return d.joinedConfigGenerator=k.sent(),[4,this.joinedConfigGenerator.generateJoinedConfig()];case 2:h=(c=k.sent()).joinedConfig,p=c.localConfig,f=c.remoteConfig,this.config=h,this.setMetadata(i.sessionId,h,p,f,null==(r=i.version)?void 0:r.version,sH,null==(n=i.version)?void 0:n.type),i.sessionId&&(null==(o=this.config.interactionConfig)?void 0:o.enabled)&&(g=ah.default({sessionId:i.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[g.send(this.getDeviceId.bind(this)).bind(g)],this.scrollHook=g.hook.bind(g)),m=[],"idb"!==(v=this.config.storeType)||(null==(s=(0,eF.getGlobalScope)())?void 0:s.indexedDB)||(v="memory",this.loggerProvider.warn("Could not use preferred indexedDB storage, reverting to in memory option.")),this.loggerProvider.log("Using ".concat(v," for event storage.")),k.label=3;case 3:return k.trys.push([3,5,,6]),[4,sY({config:this.config,sessionId:this.identifiers.sessionId,type:"replay",storeType:v})];case 4:return y=k.sent(),m.push({name:"replay",manager:y}),[3,6];case 5:return b=k.sent(),this.loggerProvider.warn("Error occurred while creating replay events manager: ".concat(b.toString())),[3,6];case 6:if(!(null==(a=this.config.interactionConfig)?void 0:a.enabled))return[3,10];w=this.config.interactionConfig.batch?au:al,k.label=7;case 7:return k.trys.push([7,9,,10]),[4,sY({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:null!=(l=this.config.interactionConfig.trackEveryNms)?l:3e4,maxInterval:6e4,payloadBatcher:w,storeType:v})];case 8:return C=k.sent(),m.push({name:"interaction",manager:C}),[3,10];case 9:return b=k.sent(),this.loggerProvider.warn("Error occurred while creating interaction events manager: ".concat(b.toString())),[3,10];case 10:if(this.eventsManager=new(sZ.bind.apply(sZ,(0,ec.__spreadArray)([void 0],(0,ec.__read)(m),!1))),this.eventCompressor&&this.eventCompressor.terminate(),x=void 0,S=(0,eF.getGlobalScope)(),!((null==(u=this.config.experimental)?void 0:u.useWebWorker)&&S&&S.Worker))return[3,12];return[4,e.A(686224)];case 11:x=k.sent().compressionScript,k.label=12;case 12:return this.eventCompressor=new sB(this.eventsManager,this.config,this.getDeviceId(),x),[4,this.initializeNetworkObservers()];case 13:return k.sent(),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),[4,this.evaluateTargetingAndCapture({userProperties:i.userProperties},!0)];case 14:return k.sent(),[2]}})})},t.prototype.setSessionId=function(e,t){return ez(this.asyncSetSessionId(e,t))},t.prototype.asyncSetSessionId=function(e,t,i){var r;return(0,ec.__awaiter)(this,void 0,void 0,function(){var n,o,s;return(0,ec.__generator)(this,function(a){switch(a.label){case 0:if(this.sessionTargetingMatch=!1,this.lastShouldRecordDecision=void 0,(n=this.identifiers&&this.identifiers.sessionId)&&this.sendEvents(n),o=t||this.getDeviceId(),this.identifiers=new ap({sessionId:e,deviceId:o}),!(this.joinedConfigGenerator&&n))return[3,2];return[4,this.joinedConfigGenerator.generateJoinedConfig()];case 1:s=a.sent().joinedConfig,this.config=s,a.label=2;case 2:if(!(null==(r=this.config)?void 0:r.targetingConfig))return[3,4];return[4,this.evaluateTargetingAndCapture({userProperties:null==i?void 0:i.userProperties},!1,!0)];case 3:return a.sent(),[3,6];case 4:return[4,this.recordEvents()];case 5:a.sent(),a.label=6;case 6:return[2]}})})},t.prototype.getSessionReplayProperties=function(){var e,t=this.config,i=this.identifiers;if(!t||!i)return this.loggerProvider.warn("Session replay init has not been called, cannot get session replay properties."),{};var r=this.getShouldRecord(),n={};return r&&((e={})[oB]=i.sessionReplayId?i.sessionReplayId:null,n=e,t.debugMode&&(n[oz]=JSON.stringify({appHash:tC(t.apiKey).toString()}))),this.addCustomRRWebEvent(ee.GET_SR_PROPS,{shouldRecord:r,eventProperties:n},10===this.eventCount),10===this.eventCount&&(this.eventCount=0),this.eventCount++,n},t.prototype.sendEvents=function(e){var t,i=e||(null==(t=this.identifiers)?void 0:t.sessionId),r=this.getDeviceId();this.eventsManager&&i&&r&&this.eventsManager.sendCurrentSequenceEvents({sessionId:i,deviceId:r})},t.prototype.initialize=function(e){var t;return void 0===e&&(e=!1),(0,ec.__awaiter)(this,void 0,void 0,function(){var i;return(0,ec.__generator)(this,function(r){return(null==(t=this.identifiers)?void 0:t.sessionId)?(i=this.getDeviceId())?(this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:i}),[2,this.recordEvents()]):(this.loggerProvider.log("Session is not being recorded due to lack of device id."),[2,Promise.resolve()]):(this.loggerProvider.log("Session is not being recorded due to lack of session id."),[2,Promise.resolve()])})})},t.prototype.shouldOptOut=function(){if(null==(e=this.config)?void 0:e.instanceName){var e,t,i;i=to(this.config.instanceName).identityStore.getIdentity().optOut}return void 0!==i?i:null==(t=this.config)?void 0:t.optOut},t.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e,t,i=!1,r="",n=!1;return this.config.targetingConfig?this.sessionTargetingMatch?(r="Capturing replays for session ".concat(this.identifiers.sessionId," due to matching targeting conditions."),this.loggerProvider.log(r),i=!0,n=!0):(r="Not capturing replays for session ".concat(this.identifiers.sessionId," due to not matching targeting conditions."),this.loggerProvider.log(r),i=!1,n=!1):(e=this.identifiers.sessionId,t=this.config.sampleRate,31*Math.abs(tC(e.toString()))%1e6/1e6<t)?(i=!0,n=!0):(r="Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate."),this.loggerProvider.log(r),i=!1,n=!1),this.lastShouldRecordDecision!==i&&this.config.targetingConfig&&(this.addCustomRRWebEvent(ee.TARGETING_DECISION,{message:r,sessionId:this.identifiers.sessionId,matched:n,targetingParams:this.lastTargetingParams}),this.lastShouldRecordDecision=i),i},t.prototype.getBlockSelectors=function(){var e,t,i,r=null!=(i=null==(t=null==(e=this.config)?void 0:e.privacyConfig)?void 0:t.blockSelector)?i:[];if(0!==r.length)return r},t.prototype.getMaskTextSelectors=function(){if((null==(t=null==(e=this.config)?void 0:e.privacyConfig)?void 0:t.defaultMaskLevel)==="conservative")return"*";var e,t,i,r,n=null==(r=null==(i=this.config)?void 0:i.privacyConfig)?void 0:r.maskSelector;if(n)return n},t.prototype.getRecordingPlugins=function(t){var i,r,n,o,s,a;return(0,ec.__awaiter)(this,void 0,void 0,function(){var l,u,d,c;return(0,ec.__generator)(this,function(h){switch(h.label){case 0:l=[];try{u=am({ugcFilterRules:(null==(r=null==(i=this.config)?void 0:i.interactionConfig)?void 0:r.ugcFilterRules)||[],enablePolling:(null==(n=this.config)?void 0:n.enableUrlChangePolling)||!1,pollingInterval:null==(o=this.config)?void 0:o.urlChangePollingInterval,captureDocumentTitle:null==(s=this.config)?void 0:s.captureDocumentTitle}),l.push(u)}catch(e){this.loggerProvider.warn("Failed to create URL tracking plugin:",e)}if(!(null==(a=null==t?void 0:t.console)?void 0:a.enabled))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.A(525120)];case 2:return d=h.sent().getRecordConsolePlugin,l.push(d({level:t.console.levels})),[3,4];case 3:return c=h.sent(),this.loggerProvider.warn("Failed to load console plugin:",c),[3,4];case 4:return[2,l.length>0?l:void 0]}})})},t.prototype.getRecordFunction=function(){return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,i;return(0,ec.__generator)(this,function(r){switch(r.label){case 0:if(this.recordFunction)return[2,this.recordFunction];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.A(197107)];case 2:return t=r.sent().record,this.recordFunction=t,[2,t];case 3:return i=r.sent(),this.loggerProvider.warn("Failed to load rrweb-record module:",i),[2,null];case 4:return[2]}})})},t.prototype.recordEvents=function(e){var t,i,r,n,o;return void 0===e&&(e=!0),(0,ec.__awaiter)(this,void 0,void 0,function(){var s,a,l,u,d,c,h,p,f,g,m,v,y,b=this;return(0,ec.__generator)(this,function(w){switch(w.label){case 0:if(s=this.config,a=this.getShouldRecord(),l=null==(t=this.identifiers)?void 0:t.sessionId,!a||!l||!s)return[2];return this.stopRecordingEvents(),[4,this.getRecordFunction()];case 1:if(!(u=w.sent()))return[2];return[4,this.initializeNetworkObservers()];case 2:w.sent(),null==(i=this.networkObservers)||i.start(function(e){b.addCustomRRWebEvent(ee.FETCH_REQUEST,e)}),d=s.privacyConfig,c=s.interactionConfig,h=s.loggingConfig,p=(null==c?void 0:c.enabled)?{mouseInteraction:this.eventsManager&&ad(this.loggerProvider,{eventsManager:this.eventsManager,sessionId:l,deviceIdFn:this.getDeviceId.bind(this),mirror:u.mirror,ugcFilterRules:null!=(r=c.ugcFilterRules)?r:[]}),scroll:this.scrollHook}:{},f=(null==c?void 0:c.enabled)&&c.ugcFilterRules?c.ugcFilterRules:[],this.loggerProvider.log("Session Replay capture beginning for ".concat(l,".")),w.label=3;case 3:return w.trys.push([3,5,,6]),g=this,m=u,y={emit:function(e){if(b.shouldOptOut()){b.loggerProvider.log("Opting session ".concat(l," out of recording due to optOut config.")),b.stopRecordingEvents(),b.sendEvents();return}e.type===o5.Meta&&(e.data.href=oZ(e.data.href,f)),b.eventCompressor&&b.eventCompressor.enqueueEvent(e,l)},inlineStylesheet:s.shouldInlineStylesheet,hooks:p,maskAllInputs:!0,maskTextClass:oj,blockClass:"amp-block",blockSelector:this.getBlockSelectors(),applyBackgroundColorToBlockedElements:s.applyBackgroundColorToBlockedElements,maskInputFn:oq("input",d),maskTextFn:oq("text",d),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,slimDOMOptions:{script:null==(n=s.omitElementTags)?void 0:n.script,comment:null==(o=s.omitElementTags)?void 0:o.comment},errorHandler:function(e){if(e.message.includes("insertRule")&&e.message.includes("CSSStyleSheet")||e._external_)throw e;return b.loggerProvider.warn("Error while capturing replay: ",e.toString()),!0}},[4,this.getRecordingPlugins(h)];case 4:return g.recordCancelCallback=m.apply(void 0,[(y.plugins=w.sent(),y)]),this.addCustomRRWebEvent(ee.DEBUG_INFO),e&&this.addCustomRRWebEvent(ee.METADATA,this.metadata),[3,6];case 5:return v=w.sent(),this.loggerProvider.warn("Failed to initialize session replay:",v),[3,6];case 6:return[2]}})})},t.prototype.getDeviceId=function(){var e;return null==(e=this.identifiers)?void 0:e.deviceId},t.prototype.getSessionId=function(){var e;return null==(e=this.identifiers)?void 0:e.sessionId},t.prototype.flush=function(e){var t;return void 0===e&&(e=!1),(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return[2,null==(t=this.eventsManager)?void 0:t.flush(e)]})})},t.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},t.prototype.mapSDKType=function(e){return"plugin"===e?"@amplitude/plugin-session-replay-browser":"segment"===e?"@amplitude/segment-session-replay-plugin":null},t.prototype.setMetadata=function(e,t,i,r,n,o,s){var a=(null==e?void 0:e.toString())?tC(e.toString()):void 0;this.metadata={joinedConfig:t,localConfig:i,remoteConfig:r,sessionId:e,hashValue:a,sampleRate:t.sampleRate,replaySDKType:this.mapSDKType(s),replaySDKVersion:n,standaloneSDKType:"@amplitude/session-replay-browser",standaloneSDKVersion:o}},t.prototype.initializeNetworkObservers=function(){var t,i,r;return(0,ec.__awaiter)(this,void 0,void 0,function(){var n,o;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:if(!((null==(r=null==(i=null==(t=this.config)?void 0:t.loggingConfig)?void 0:i.network)?void 0:r.enabled)&&!this.networkObservers))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.A(33542)];case 2:return n=s.sent().NetworkObservers,this.networkObservers=new n,[3,4];case 3:return o=s.sent(),this.loggerProvider.warn("Failed to import or instantiate NetworkObservers:",o),[3,4];case 4:return[2]}})})},t}(),ay=function(e){return function(){var t=e.config||o1();return{logger:t.loggerProvider,logLevel:t.logLevel}}};let ab={init:e1((E=new av).init.bind(E),"init",ay(E)),evaluateTargetingAndCapture:e1(E.evaluateTargetingAndCapture.bind(E),"evaluateTargetingAndRecord",ay(E)),setSessionId:e1(E.setSessionId.bind(E),"setSessionId",ay(E)),getSessionId:e1(E.getSessionId.bind(E),"getSessionId",ay(E)),getSessionReplayProperties:e1(E.getSessionReplayProperties.bind(E),"getSessionReplayProperties",ay(E)),flush:e1(E.flush.bind(E),"flush",ay(E)),shutdown:e1(E.shutdown.bind(E),"shutdown",ay(E))};var aw=ab.init,aC=ab.setSessionId,ax=ab.getSessionId,aS=ab.getSessionReplayProperties,ak=ab.flush,aR=ab.shutdown,aE=ab.evaluateTargetingAndCapture;(P=eo||(eo={})).SET="$set",P.SET_ONCE="$setOnce",P.ADD="$add",P.APPEND="$append",P.PREPEND="$prepend",P.REMOVE="$remove",P.PREINSERT="$preInsert",P.POSTINSERT="$postInsert",P.UNSET="$unset",P.CLEAR_ALL="$clearAll",(M=es||(es={})).REVENUE_PRODUCT_ID="$productId",M.REVENUE_QUANTITY="$quantity",M.REVENUE_PRICE="$price",M.REVENUE_TYPE="$revenueType",M.REVENUE_CURRENCY="$currency",M.REVENUE="$revenue",(D=ea||(ea={})).IDENTIFY="$identify",D.GROUP_IDENTIFY="$groupidentify",D.REVENUE="revenue_amount";var aP=[eo.SET,eo.SET_ONCE,eo.ADD,eo.APPEND,eo.PREPEND,eo.POSTINSERT],aM=function(e){if(e.user_properties){var t={};return Object.keys(e.user_properties).forEach(function(i){if(aP.includes(i)){var r=e.user_properties&&e.user_properties[i];t=(0,ec.__assign)((0,ec.__assign)({},t),r)}}),t}},aD="1.23.1",aT=function(){function e(t){this.name=e.pluginName,this.type="enrichment",this.sessionReplay={flush:ak,getSessionId:ax,getSessionReplayProperties:aS,init:aw,setSessionId:aC,shutdown:aR,evaluateTargetingAndCapture:aE},this.options=(0,ec.__assign)({forceSessionTracking:!1},t),this.srInitOptions=this.options}return e.prototype.setup=function(e,t){var i,r,n,o,s,a;return(0,ec.__awaiter)(this,void 0,void 0,function(){var t,l;return(0,ec.__generator)(this,function(u){switch(u.label){case 0:var d;return u.trys.push([0,2,,3]),null==e||e.loggerProvider.log("Installing @amplitude/plugin-session-replay, version ".concat(aD,".")),this.config=e,this.options.forceSessionTracking&&("boolean"==typeof e.defaultTracking?!1===e.defaultTracking&&(e.defaultTracking={pageViews:!1,formInteractions:!1,fileDownloads:!1,sessions:!0}):e.defaultTracking=(0,ec.__assign)((0,ec.__assign)({},e.defaultTracking),{sessions:!0})),t=(void 0===(d=this.config.instanceName)&&(d="$default_instance"),tn.getInstance(d)).identityStore.getIdentity().userProperties,this.srInitOptions={instanceName:this.config.instanceName,deviceId:null!=(i=this.options.deviceId)?i:this.config.deviceId,optOut:this.config.optOut,sessionId:this.options.customSessionId?void 0:this.config.sessionId,loggerProvider:this.config.loggerProvider,logLevel:this.config.logLevel,flushMaxRetries:this.config.flushMaxRetries,serverZone:this.config.serverZone,configServerUrl:this.options.configServerUrl||(null==(r=this.config.remoteConfig)?void 0:r.serverUrl),trackServerUrl:this.options.trackServerUrl,sampleRate:this.options.sampleRate,privacyConfig:{blockSelector:null==(n=this.options.privacyConfig)?void 0:n.blockSelector,maskSelector:null==(o=this.options.privacyConfig)?void 0:o.maskSelector,unmaskSelector:null==(s=this.options.privacyConfig)?void 0:s.unmaskSelector,defaultMaskLevel:null==(a=this.options.privacyConfig)?void 0:a.defaultMaskLevel},debugMode:this.options.debugMode,shouldInlineStylesheet:this.options.shouldInlineStylesheet,version:{type:"plugin",version:aD},performanceConfig:this.options.performanceConfig,storeType:this.options.storeType,experimental:this.options.experimental,userProperties:t,omitElementTags:this.options.omitElementTags,applyBackgroundColorToBlockedElements:this.options.applyBackgroundColorToBlockedElements,interactionConfig:this.options.interactionConfig,captureDocumentTitle:this.options.captureDocumentTitle,enableUrlChangePolling:this.options.enableUrlChangePolling,urlChangePollingInterval:this.options.urlChangePollingInterval},[4,this.sessionReplay.init(e.apiKey,this.srInitOptions).promise];case 1:return u.sent(),[3,3];case 2:return l=u.sent(),null==e||e.loggerProvider.error("Session Replay: Failed to initialize due to ".concat(l.message)),[3,3];case 3:return[2]}})})},e.prototype.onSessionIdChanged=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){switch(t.label){case 0:return this.config.loggerProvider.debug("Analytics session id is changed to ".concat(e,", SR session id is ").concat(String(this.sessionReplay.getSessionId()),".")),[4,this.sessionReplay.setSessionId(e).promise];case 1:return t.sent(),[2]}})})},e.prototype.onOptOutChanged=function(e){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){switch(t.label){case 0:if(this.config.loggerProvider.debug("optOut is changed to ".concat(String(e),", calling ").concat(e?"sessionReplay.shutdown()":"sessionReplay.init()",".")),!e)return[3,1];return this.sessionReplay.shutdown(),[3,3];case 1:return[4,this.sessionReplay.init(this.config.apiKey,this.srInitOptions).promise];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.execute=function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){var i,r,n,o;return(0,ec.__generator)(this,function(s){switch(s.label){case 0:if(s.trys.push([0,9,,10]),!this.options.customSessionId)return[3,4];if(!(i=this.options.customSessionId(e)))return[3,3];if(i===this.sessionReplay.getSessionId())return[3,2];return[4,this.sessionReplay.setSessionId(i).promise];case 1:s.sent(),s.label=2;case 2:r=this.sessionReplay.getSessionReplayProperties(),e.event_properties=(0,ec.__assign)((0,ec.__assign)({},e.event_properties),r),s.label=3;case 3:return[3,8];case 4:if(!((i=this.config.sessionId)&&i!==this.sessionReplay.getSessionId()))return[3,6];return[4,this.sessionReplay.setSessionId(i).promise];case 5:s.sent(),s.label=6;case 6:if(!(i&&i===e.session_id))return[3,8];return n=void 0,e.event_type===W.IDENTIFY&&(n=aM(e)),[4,this.sessionReplay.evaluateTargetingAndCapture({event:e,userProperties:n})];case 7:s.sent(),r=this.sessionReplay.getSessionReplayProperties(),e.event_properties=(0,ec.__assign)((0,ec.__assign)({},e.event_properties),r),s.label=8;case 8:return[2,Promise.resolve(e)];case 9:return o=s.sent(),null==(t=this.config)||t.loggerProvider.error("Session Replay: Failed to enrich event due to ".concat(o.message)),[2,Promise.resolve(e)];case 10:return[2]}})})},e.prototype.teardown=function(){var e;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){try{this.sessionReplay.shutdown(),this.config=null}catch(t){null==(e=this.config)||e.loggerProvider.error("Session Replay: teardown failed due to ".concat(t.message))}return[2]})})},e.prototype.getSessionReplayProperties=function(){return this.sessionReplay.getSessionReplayProperties()},e.pluginName="@amplitude/plugin-session-replay-browser",e}(),aO=e.i(415306),a_=function(e,t){return(a_=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function aA(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}a_(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var aF=function(){return(aF=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function aI(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function aL(e,t){var i,r,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(i)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(i=1,r&&(n=2&u[0]?r.return:u[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,u[1])).done)return n;switch(r=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){o.label=u[1];break}if(6===u[0]&&o.label<n[1]){o.label=n[1],n=u;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(u);break}n[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{i=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function aN(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function aB(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function aV(e,t,i){if(i||2==arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var aH="is not",az="contains",aj="does not contain",aG="less",aW="less or equal",aU="greater",a$="greater or equal",aq="version less",aK="version less or equal",aQ="version greater",aX="version greater or equal",aY="set is",aZ="set is not",aJ="set contains",a0="set does not contain",a1="set contains any",a2="set does not contain any",a5=function(e){for(var t=[],i=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:((64512&n)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128)}return Uint8Array.from(t)},a3=function(e,t){void 0===t&&(t=0);for(var i=a5(e),r=i.length,n=r>>2,o=t,s=0;s<n;s++)o=a4(a7(i,s<<2),o);var a=n<<2,l=0;switch(r-a){case 3:l^=i[a+2]<<16,l^=i[a+1]<<8,l^=i[a],o^=l=Math.imul(l=a6(l=Math.imul(l,-0x3361d2af),15),0x1b873593);break;case 2:l^=i[a+1]<<8,l^=i[a],o^=l=Math.imul(l=a6(l=Math.imul(l,-0x3361d2af),15),0x1b873593);break;case 1:l^=i[a],o^=l=Math.imul(l=a6(l=Math.imul(l,-0x3361d2af),15),0x1b873593)}return a8(o^=r)>>>0},a4=function(e,t){var i=e,r=t;return r^=i=Math.imul(i=a6(i=Math.imul(i,-0x3361d2af),15),0x1b873593),(r=Math.imul(r=a6(r,13),5))+-0x19ab949c|0},a8=function(e){var t=e;return t^=t>>>16,t=Math.imul(t,-0x7a143595),t^=t>>>13,t=Math.imul(t,-0x3d4d51cb),t^=t>>>16},a6=function(e,t,i){void 0===i&&(i=32),t>i&&(t%=i);var r=(e&0xffffffff<<i-t>>>0)>>>0>>>i-t>>>0;return(e<<t|r)>>>0},a7=function(e,t){return void 0===t&&(t=0),a9(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},a9=function(e){return(-0x1000000&e)>>>24|(0xff0000&e)>>>8|(65280&e)<<8|(255&e)<<24},le=function(e,t){var i,r;if(t&&0!==t.length){try{for(var n=aN(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(!s||!e||"object"!=typeof e)return;e=e[s]}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}if(null==e)return;return e}},lt="^".concat("(\\d+)\\.(\\d+)","(\\.").concat("(\\d+)").concat("(-(([-\\w]+\\.?)*))?",")?$"),li=function(){function e(e,t,i,r){void 0===r&&(r=void 0),this.major=e,this.minor=t,this.patch=i,this.preRelease=r}return e.parse=function(t){if(t){var i=new RegExp(lt).exec(t);if(i){var r=Number(i[1]),n=Number(i[2]);if(!(isNaN(r)||isNaN(n)))return new e(r,n,Number(i[4])||0,i[5]||void 0)}}},e.prototype.compareTo=function(e){if(this.major>e.major)return 1;if(this.major<e.major)return -1;if(this.minor>e.minor)return 1;if(this.minor<e.minor)return -1;if(this.patch>e.patch)return 1;if(this.patch<e.patch||this.preRelease&&!e.preRelease)return -1;if(!this.preRelease&&e.preRelease)return 1;if(this.preRelease&&e.preRelease){if(this.preRelease>e.preRelease)return 1;if(this.preRelease<e.preRelease)return -1}return 0},e}(),lr=function(){function e(){}return e.prototype.evaluate=function(e,t){var i,r,n={},o={context:e,result:n};try{for(var s=aN(t),a=s.next();!a.done;a=s.next()){var l=a.value,u=this.evaluateFlag(o,l);u&&(n[l.key]=u)}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return n},e.prototype.evaluateFlag=function(e,t){try{for(var i,r,n,o=aN(t.segments),s=o.next();!s.done;s=o.next()){var a=s.value;if(n=this.evaluateSegment(e,t,a)){var l=aF(aF(aF({},t.metadata),a.metadata),n.metadata);n=aF(aF({},n),{metadata:l});break}}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return n},e.prototype.evaluateSegment=function(e,t,i){if(!i.conditions){var r=this.bucket(e,i);return void 0!==r?t.variants[r]:void 0}if(this.evaluateConditions(e,i.conditions)){var r=this.bucket(e,i);if(void 0!==r)return t.variants[r]}},e.prototype.evaluateConditions=function(e,t){var i,r,n,o;try{for(var s=aN(t),a=s.next();!a.done;a=s.next()){var l=a.value,u=!0;try{for(var d=(n=void 0,aN(l)),c=d.next();!c.done;c=d.next()){var h=c.value;if(!(u=this.matchCondition(e,h)))break}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}if(u)return!0}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return!1},e.prototype.matchCondition=function(e,t){var i=le(e,t.selector);if(null==i)return this.matchNull(t.op,t.values);if(this.isSetOperator(t.op)){var r=this.coerceStringArray(i);return!!r&&this.matchSet(r,t.op,t.values)}var n=this.coerceString(i);return void 0!==n&&this.matchString(n,t.op,t.values)},e.prototype.getHash=function(e){return a3(e)},e.prototype.bucket=function(e,t){if(!t.bucket)return t.variant;var i,r,n,o,s=this.coerceString(le(e,t.bucket.selector));if(!s||0===s.length)return t.variant;var a="".concat(t.bucket.salt,"/").concat(s),l=this.getHash(a),u=l%100,d=Math.floor(l/100);try{for(var c=aN(t.bucket.allocations),h=c.next();!h.done;h=c.next()){var p=h.value,f=p.range[0],g=p.range[1];if(u>=f&&u<g)try{for(var m=(n=void 0,aN(p.distributions)),v=m.next();!v.done;v=m.next()){var y=v.value,b=y.range[0],w=y.range[1];if(d>=b&&d<w)return y.variant}}catch(e){n={error:e}}finally{try{v&&!v.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}}}catch(e){i={error:e}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}return t.variant},e.prototype.matchNull=function(e,t){var i=this.containsNone(t);switch(e){case"is":case az:case aG:case aW:case aU:case a$:case aq:case aK:case aQ:case aX:case aY:case aJ:case a1:return i;case aH:case aj:case a0:case a2:return!i;default:return!1}},e.prototype.matchSet=function(e,t,i){switch(t){case aY:return this.setEquals(e,i);case aZ:return!this.setEquals(e,i);case aJ:return this.matchesSetContainsAll(e,i);case a0:return!this.matchesSetContainsAll(e,i);case a1:return this.matchesSetContainsAny(e,i);case a2:return!this.matchesSetContainsAny(e,i);default:return!1}},e.prototype.matchString=function(e,t,i){var r=this;switch(t){case"is":return this.matchesIs(e,i);case aH:return!this.matchesIs(e,i);case az:return this.matchesContains(e,i);case aj:return!this.matchesContains(e,i);case aG:case aW:case aU:case a$:return this.matchesComparable(e,t,i,function(e){return r.parseNumber(e)},this.comparator);case aq:case aK:case aQ:case aX:return this.matchesComparable(e,t,i,function(e){return li.parse(e)},this.versionComparator);case"regex match":return this.matchesRegex(e,i);case"regex does not match":return!this.matchesRegex(e,i);default:return!1}},e.prototype.matchesIs=function(e,t){if(this.containsBooleans(t)){var i=e.toLowerCase();if("true"===i||"false"===i)return t.some(function(e){return e.toLowerCase()===i})}return t.some(function(t){return e===t})},e.prototype.matchesContains=function(e,t){var i,r;try{for(var n=aN(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(e.toLowerCase().includes(s.toLowerCase()))return!0}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return!1},e.prototype.matchesComparable=function(e,t,i,r,n){var o=this,s=r(e),a=i.map(function(e){return r(e)}).filter(function(e){return void 0!==e});return void 0===s||0===a.length?i.some(function(i){return o.comparator(e,t,i)}):a.some(function(e){return n(s,t,e)})},e.prototype.comparator=function(e,t,i){switch(t){case aG:case aq:return e<i;case aW:case aK:return e<=i;case aU:case aQ:return e>i;case a$:case aX:return e>=i;default:return!1}},e.prototype.versionComparator=function(e,t,i){var r=e.compareTo(i);switch(t){case aG:case aq:return r<0;case aW:case aK:return r<=0;case aU:case aQ:return r>0;case a$:case aX:return r>=0;default:return!1}},e.prototype.matchesRegex=function(e,t){return t.some(function(t){return!!new RegExp(t).exec(e)})},e.prototype.containsNone=function(e){return e.some(function(e){return"(none)"===e})},e.prototype.containsBooleans=function(e){return e.some(function(e){switch(e.toLowerCase()){case"true":case"false":return!0;default:return!1}})},e.prototype.parseNumber=function(e){var t;return null!=(t=Number(e))?t:void 0},e.prototype.coerceString=function(e){if(null!=e)return"object"==typeof e?JSON.stringify(e):String(e)},e.prototype.coerceStringArray=function(e){var t=this;if(Array.isArray(e)){var i=e;return i.map(function(e){return t.coerceString(e)}).filter(Boolean)}var r=String(e);try{var n=JSON.parse(r);if(Array.isArray(n)){var i=e;return i.map(function(e){return t.coerceString(e)}).filter(Boolean)}var o=this.coerceString(r);return o?[o]:void 0}catch(e){var o=this.coerceString(r);return o?[o]:void 0}},e.prototype.isSetOperator=function(e){switch(e){case aY:case aZ:case aJ:case a0:case a1:case a2:return!0;default:return!1}},e.prototype.setEquals=function(e,t){var i=new Set(e),r=new Set(t);return i.size===r.size&&aV([],aB(r),!1).every(function(e){return i.has(e)})},e.prototype.matchesSetContainsAll=function(e,t){var i,r;if(e.length<t.length)return!1;try{for(var n=aN(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(!this.matchesIs(s,e))return!1}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return!0},e.prototype.matchesSetContainsAny=function(e,t){var i,r;try{for(var n=aN(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(this.matchesIs(s,e))return!0}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return!1},e}(),ln=function(e,t){var i,r,n=aF({},e),o=[],s=t||Object.keys(n);try{for(var a=aN(s),l=a.next();!l.done;l=a.next()){var u=l.value,d=lo(u,n);d&&o.push.apply(o,aV([],aB(d),!1))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},lo=function(e,t,i){void 0===i&&(i=[]);var r,n,o=t[e];if(o){if(!o.dependencies||0===o.dependencies.length)return delete t[o.key],[o];i.push(o.key);var s=[],a=function(e){if(i.some(function(t){return t===e}))throw Error("Detected a cycle between flags ".concat(i));var r=lo(e,t,i);r&&s.push.apply(s,aV([],aB(r),!1))};try{for(var l=aN(o.dependencies),u=l.next();!u.done;u=l.next()){var d=u.value;a(d)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return s.push(o),i.pop(),delete t[o.key],s}};let ls="function"==typeof aO.Buffer,la="function"==typeof TextDecoder?new TextDecoder:void 0,ll="function"==typeof TextEncoder?new TextEncoder:void 0,lu=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),ld=(i={},lu.forEach((e,t)=>i[e]=t),i),lc=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,lh=String.fromCharCode.bind(String),lp="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),lf=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),lg="function"==typeof btoa?e=>btoa(e):ls?e=>aO.Buffer.from(e,"binary").toString("base64"):e=>{let t,i,r,n,o="",s=e.length%3;for(let s=0;s<e.length;){if((i=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255)throw TypeError("invalid character found");o+=lu[(t=i<<16|r<<8|n)>>18&63]+lu[t>>12&63]+lu[t>>6&63]+lu[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},lm=ls?e=>aO.Buffer.from(e).toString("base64"):e=>{let t=[];for(let i=0,r=e.length;i<r;i+=4096)t.push(lh.apply(null,e.subarray(i,i+4096)));return lg(t.join(""))},lv=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?lh(192|t>>>6)+lh(128|63&t):lh(224|t>>>12&15)+lh(128|t>>>6&63)+lh(128|63&t)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return lh(240|t>>>18&7)+lh(128|t>>>12&63)+lh(128|t>>>6&63)+lh(128|63&t)},ly=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,lb=ls?e=>aO.Buffer.from(e,"utf8").toString("base64"):ll?e=>lm(ll.encode(e)):e=>lg(e.replace(ly,lv)),lw=(e,t=!1)=>t?lf(lb(e)):lb(e),lC=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,lx=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return lh((t>>>10)+55296)+lh((1023&t)+56320);case 3:return lh((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return lh((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},lS="function"==typeof atob?e=>atob(e.replace(/[^A-Za-z0-9\+\/]/g,"")):ls?e=>aO.Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!lc.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,i="",r,n;for(let o=0;o<e.length;)t=ld[e.charAt(o++)]<<18|ld[e.charAt(o++)]<<12|(r=ld[e.charAt(o++)])<<6|(n=ld[e.charAt(o++)]),i+=64===r?lh(t>>16&255):64===n?lh(t>>16&255,t>>8&255):lh(t>>16&255,t>>8&255,255&t);return i},lk=ls?e=>lp(aO.Buffer.from(e,"base64")):e=>lp(lS(e).split("").map(e=>e.charCodeAt(0))),lR=ls?e=>aO.Buffer.from(e,"base64").toString("utf8"):la?e=>la.decode(lk(e)):e=>lS(e).replace(lC,lx);var lE=function(e){function t(i,r){var n=e.call(this,r)||this;return n.statusCode=i,Object.setPrototypeOf(n,t.prototype),n}return aA(t,e),t}(Error),lP=function(e){function t(i){var r=e.call(this,i)||this;return Object.setPrototypeOf(r,t.prototype),r}return aA(t,e),t}(Error),lM=function(){function e(e,t,i){this.deploymentKey=e,this.serverUrl=t,this.httpClient=i}return e.prototype.getVariants=function(e,t){return aI(this,void 0,void 0,function(){var i,r,n,o;return aL(this,function(s){switch(s.label){case 0:return i=lw(JSON.stringify(e),!0),r={Authorization:"Api-Key ".concat(this.deploymentKey),"X-Amp-Exp-User":i},(null==t?void 0:t.flagKeys)&&(r["X-Amp-Exp-Flag-Keys"]=lw(JSON.stringify(t.flagKeys),!0)),(null==t?void 0:t.trackingOption)&&(r["X-Amp-Exp-Track"]=t.trackingOption),n=new URL("".concat(this.serverUrl,"/sdk/v2/vardata?v=0")),(null==t?void 0:t.evaluationMode)&&n.searchParams.append("eval_mode",null==t?void 0:t.evaluationMode),(null==t?void 0:t.deliveryMethod)&&n.searchParams.append("delivery_method",null==t?void 0:t.deliveryMethod),[4,this.httpClient.request({requestUrl:n.toString(),method:"GET",headers:r,timeoutMillis:null==t?void 0:t.timeoutMillis})];case 1:if(200!=(o=s.sent()).status)throw new lE(o.status,"Fetch error response: status=".concat(o.status));return[2,JSON.parse(o.body)]}})})},e}(),lD=function(){function e(e,t,i){this.deploymentKey=e,this.serverUrl=t,this.httpClient=i}return e.prototype.getFlags=function(e){return aI(this,void 0,void 0,function(){var t,i;return aL(this,function(r){switch(r.label){case 0:return t={Authorization:"Api-Key ".concat(this.deploymentKey)},(null==e?void 0:e.libraryName)&&(null==e?void 0:e.libraryVersion)&&(t["X-Amp-Exp-Library"]="".concat(e.libraryName,"/").concat(e.libraryVersion)),(null==e?void 0:e.user)&&(t["X-Amp-Exp-User"]=lw(JSON.stringify(e.user),!0)),[4,this.httpClient.request({requestUrl:"".concat(this.serverUrl,"/sdk/v2/flags")+((null==e?void 0:e.deliveryMethod)?"?delivery_method=".concat(e.deliveryMethod):""),method:"GET",headers:t,timeoutMillis:null==e?void 0:e.timeoutMillis})];case 1:if(200!=(i=r.sent()).status)throw Error("Flags error response: status=".concat(i.status));return[2,JSON.parse(i.body).reduce(function(e,t){return e[t.key]=t,e},{})]}})})},e}(),lT="undefined"!=typeof globalThis?globalThis:e.g||self,lO=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:e.g},l_=function(){var e=lO();if(e)try{var t="EXP_test";return e.localStorage.setItem(t,t),e.localStorage.removeItem(t),!0}catch(e){}return!1},lA=function(){function e(e,t){this.poller=void 0,this.action=e,this.ms=t}return e.prototype.start=function(){this.poller||(this.poller=lT.setInterval(this.action,this.ms),this.action())},e.prototype.stop=function(){this.poller&&(lT.clearInterval(this.poller),this.poller=void 0)},e}(),lF=e.i(484404);function lI(e){this.amplitudeInstance=e}function lL(e){this.amplitudeInstance=e}lI.prototype.getUser=function(){var e,t,i,r,n,o,s,a,l,u;return{device_id:null==(t=null==(e=this.amplitudeInstance)?void 0:e.options)?void 0:t.deviceId,user_id:null==(r=null==(i=this.amplitudeInstance)?void 0:i.options)?void 0:r.userId,version:null==(o=null==(n=this.amplitudeInstance)?void 0:n.options)?void 0:o.versionName,language:null==(a=null==(s=this.amplitudeInstance)?void 0:s.options)?void 0:a.language,platform:null==(u=null==(l=this.amplitudeInstance)?void 0:l.options)?void 0:u.platform,os:this.getOs(),device_model:this.getDeviceModel()}},lI.prototype.getOs=function(){var e,t,i,r,n,o;return[null==(i=null==(t=null==(e=this.amplitudeInstance)?void 0:e._ua)?void 0:t.browser)?void 0:i.name,null==(o=null==(n=null==(r=this.amplitudeInstance)?void 0:r._ua)?void 0:n.browser)?void 0:o.major].filter(function(e){return null!=e}).join(" ")},lI.prototype.getDeviceModel=function(){var e,t,i;return null==(i=null==(t=null==(e=this.amplitudeInstance)?void 0:e._ua)?void 0:t.os)?void 0:i.name},lL.prototype.track=function(e){this.amplitudeInstance.logEvent(e.name,e.properties)},lL.prototype.setUserProperty=function(e){var t,i;this.amplitudeInstance.setUserProperties(((t={})[e.userProperty]=null==(i=e.variant)?void 0:i.value,t))},lL.prototype.unsetUserProperty=function(e){var t;this.amplitudeInstance._logEvent("$identify",null,null,{$unset:((t={})[e.userProperty]="-",t)})};var lN=function(){return(lN=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function lB(e,t,i,r){return new(i||(i=Promise))(function(n,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function lV(e,t){var i,r,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(i)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(i=1,r&&(n=2&u[0]?r.return:u[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,u[1])).done)return n;switch(r=0,n&&(u=[2&u[0],n.value]),u[0]){case 0:case 1:n=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){o.label=u[1];break}if(6===u[0]&&o.label<n[1]){o.label=n[1],n=u;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(u);break}n[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{i=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function lH(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lz(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function lj(e,t,i){if(i||2==arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var lG=function(e,t){void 0===t&&(t=!1);var i,r,n=l$(e,t),o=void 0,s=lT.document.cookie.split("; ");try{for(var a=lH(s),l=a.next();!l.done;l=a.next()){var u=l.value,d=lz(u.split("=",2),2),c=d[0],h=d[1];c===n&&(o=decodeURIComponent(h))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}if(o)try{if(t){var p=atob(o);return JSON.parse(decodeURIComponent(p))}var f=o.split("."),g=void 0;return f.length>=2&&f[1]&&(g=atob(f[1])),{deviceId:f[0],userId:g}}catch(e){return}},lW=function(e){var t=l$(e,!0);try{var i=lT.localStorage.getItem(t);if(!i)return;var r=JSON.parse(i);if("object"!=typeof r)return;return r}catch(e){return}},lU=function(e){var t=l$(e,!0);try{var i=lT.sessionStorage.getItem(t);if(!i)return;var r=JSON.parse(i);if("object"!=typeof r)return;return r}catch(e){return}},l$=function(e,t){if(t){if((null==e?void 0:e.length)<10)return;return"AMP_".concat(e.substring(0,10))}if(!((null==e?void 0:e.length)<6))return"amp_".concat(e.substring(0,6))},lq=function(){function e(e,t,i){this.type="integration",this.apiKey=e,this.identityStore=t.identityStore,this.eventBridge=t.eventBridge,this.contextProvider=t.applicationContextProvider,this.timeoutMillis=i,this.loadPersistedState(),i<=0&&(this.setup=void 0)}return e.prototype.setup=function(e,t){return lB(this,void 0,void 0,function(){return lV(this,function(i){return(null==e?void 0:e.automaticFetchOnAmplitudeIdentityChange)&&this.identityStore.addIdentityListener(function(){null==t||t.fetch()}),[2,this.waitForConnectorIdentity(this.timeoutMillis)]})})},e.prototype.getUser=function(){var e=this.identityStore.getIdentity();return{user_id:e.userId,device_id:e.deviceId,user_properties:e.userProperties,version:this.contextProvider.versionName}},e.prototype.track=function(e){return!!this.eventBridge.receiver&&(this.eventBridge.logEvent({eventType:e.eventType,eventProperties:e.eventProperties}),!0)},e.prototype.loadPersistedState=function(){if(!this.apiKey||this.apiKey.startsWith("client-"))return!1;var e=lG(this.apiKey,!0);return!!(e||(e=lG(this.apiKey,!1))||(e=lW(this.apiKey))||(e=lU(this.apiKey)))&&(this.commitIdentityToConnector(e),!0)},e.prototype.commitIdentityToConnector=function(e){var t=this.identityStore.editIdentity();t.setDeviceId(e.deviceId),e.userId&&t.setUserId(e.userId),t.commit()},e.prototype.waitForConnectorIdentity=function(e){return lB(this,void 0,void 0,function(){var t,i=this;return lV(this,function(r){return(t=this.identityStore.getIdentity()).userId||t.deviceId?[2]:[2,Promise.race([new Promise(function(e){var t=function(){e(),i.identityStore.removeIdentityListener(t)};i.identityStore.addIdentityListener(t)}),new Promise(function(t,i){lT.setTimeout(i,e,"Timed out waiting for Amplitude Analytics SDK to initialize.")})])]})})},e}(),lK=lT.fetch||function(e,t){return t=t||{},new Promise(function(i,r){var n=new XMLHttpRequest,o=[],s=[],a={},l=function(){return{ok:2==(n.status/100|0),statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(JSON.parse(n.responseText))},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:l,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var u in n.open(t.method||"get",e,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,i){o.push(t=t.toLowerCase()),s.push([t,i]),a[t]=a[t]?a[t]+","+i:i}),i(l())},n.onerror=r,n.withCredentials="include"==t.credentials,t.headers)n.setRequestHeader(u,t.headers[u]);n.send(t.body||null)})},lQ=function(){function e(e){this.client=e}return e.prototype.request=function(e){return lB(this,void 0,void 0,function(){return lV(this,function(t){switch(t.label){case 0:return[4,this.client.request(e.requestUrl,e.method,e.headers,null,e.timeoutMillis)];case 1:return[2,t.sent()]}})})},e}(),lX={request:function(e,t,i,r,n){var o;return o=lB(void 0,void 0,void 0,function(){var n,o;return lV(this,function(s){switch(s.label){case 0:return[4,lK(e,{method:t,headers:i,body:r})];case 1:return o={status:(n=s.sent()).status},[4,n.text()];case 2:return o.body=s.sent(),[2,o]}})}),null==n||n<=0?o:new Promise(function(e,t){lT.setTimeout(function(){t(new lP("Request timeout after "+n+" milliseconds"))},n),o.then(e,t)})}};(T=el||(el={})).LocalStorage="localStorage",T.InitialVariants="initialVariants",(O=eu||(eu={})).LocalStorage="storage",O.InitialVariants="initial",O.SecondaryLocalStorage="secondary-storage",O.SecondaryInitialVariants="secondary-initial",O.FallbackInline="fallback-inline",O.FallbackConfig="fallback-config",O.LocalEvaluation="local-evaluation";var lY=function(e){return!e||e===eu.FallbackInline||e===eu.FallbackConfig||e===eu.SecondaryInitialVariants},lZ={debug:!1,instanceName:"$default_instance",fallbackVariant:{},initialVariants:{},initialFlags:void 0,source:el.LocalStorage,serverUrl:"https://api.lab.amplitude.com",flagsServerUrl:"https://flag.lab.amplitude.com",serverZone:"US",fetchTimeoutMillis:1e4,retryFetchOnFailure:!0,throwOnError:!1,automaticExposureTracking:!0,pollOnStart:!0,flagConfigPollingIntervalMillis:3e5,fetchOnStart:!0,automaticFetchOnAmplitudeIdentityChange:!1,userProvider:null,analyticsProvider:null,exposureTrackingProvider:null,httpClient:lX},lJ="1.18.0",l0=function(){function e(e,t){var i,r=this;this.isReady=new Promise(function(e){r.resolve=e}),this.config=e,this.client=t;var n=null!=(i=e.instanceName)?i:lZ.instanceName;this.queue=new l2(n),this.cache=new l1(n)}return e.prototype.ready=function(){return this.integration?this.isReady:Promise.resolve()},e.prototype.setIntegration=function(e){var t=this;this.integration&&this.integration.teardown&&this.integration.teardown(),this.integration=e,e.setup?this.integration.setup(this.config,this.client).then(function(){t.queue.setTracker(t.integration.track.bind(e)),t.resolve()},function(){t.queue.setTracker(t.integration.track.bind(e)),t.resolve()}):(this.queue.setTracker(this.integration.track.bind(e)),this.resolve())},e.prototype.getUser=function(){return this.integration?this.integration.getUser():{}},e.prototype.track=function(e){if(this.cache.shouldTrack(e)){var t=this.getExposureEvent(e);this.queue.push(t)}},e.prototype.getExposureEvent=function(e){var t,i,r,n={eventType:"$exposure",eventProperties:e};return(null==(t=e.metadata)?void 0:t.exposureEvent)?n={eventType:null==(i=e.metadata)?void 0:i.exposureEvent,eventProperties:e}:(null==(r=e.metadata)?void 0:r.deliveryMethod)==="web"&&(n={eventType:"$impression",eventProperties:e}),n},e}(),l1=function(){function e(e){this.isSessionStorageAvailable=l5(),this.inMemoryCache={},this.storageKey="EXP_sent_v2_".concat(e),this.isSessionStorageAvailable&&lT.sessionStorage.removeItem("EXP_sent_".concat(e))}return e.prototype.shouldTrack=function(e){if((null==(t=e.metadata)?void 0:t.deliveryMethod)==="web")return!0;this.loadCache();var t,i=this.inMemoryCache[e.flag_key],r=!1;return i&&i.variant===e.variant||(r=!0,this.inMemoryCache[e.flag_key]=e),this.storeCache(),r},e.prototype.loadCache=function(){if(this.isSessionStorageAvailable){var e=lT.sessionStorage.getItem(this.storageKey);this.inMemoryCache=e?JSON.parse(e):{}}},e.prototype.storeCache=function(){this.isSessionStorageAvailable&&lT.sessionStorage.setItem(this.storageKey,JSON.stringify(this.inMemoryCache))},e}(),l2=function(){function e(e,t){void 0===t&&(t=512),this.isLocalStorageAvailable=l_(),this.inMemoryQueue=[],this.storageKey="EXP_unsent_".concat(e),this.maxQueueSize=t}return e.prototype.push=function(e){this.loadQueue(),this.inMemoryQueue.push(e),this.flush(),this.storeQueue()},e.prototype.setTracker=function(e){var t=this;this.tracker=e,this.poller=lT.setInterval(function(){t.loadFlushStore()},1e3),this.loadFlushStore()},e.prototype.flush=function(){var e,t;if(this.tracker&&0!==this.inMemoryQueue.length){try{for(var i=lH(this.inMemoryQueue),r=i.next();!r.done;r=i.next()){var n=r.value;try{if(!this.tracker(n))return}catch(e){return}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.inMemoryQueue=[],this.poller&&(lT.clearInterval(this.poller),this.poller=void 0)}},e.prototype.loadQueue=function(){if(this.isLocalStorageAvailable){var e=lT.localStorage.getItem(this.storageKey);this.inMemoryQueue=e?JSON.parse(e):[]}},e.prototype.storeQueue=function(){this.isLocalStorageAvailable&&(this.inMemoryQueue.length>this.maxQueueSize&&(this.inMemoryQueue=this.inMemoryQueue.slice(this.inMemoryQueue.length-this.maxQueueSize)),lT.localStorage.setItem(this.storageKey,JSON.stringify(this.inMemoryQueue)))},e.prototype.loadFlushStore=function(){this.loadQueue(),this.flush(),this.storeQueue()},e}(),l5=function(){var e=lO();if(e)try{var t="EXP_test";return e.sessionStorage.setItem(t,t),e.sessionStorage.removeItem(t),!0}catch(e){}return!1},l3=function(){function e(){this.globalScope=lO()}return e.prototype.get=function(e){var t;return null==(t=this.globalScope)?void 0:t.localStorage.getItem(e)},e.prototype.put=function(e,t){var i;null==(i=this.globalScope)||i.localStorage.setItem(e,t)},e.prototype.delete=function(e){var t;null==(t=this.globalScope)||t.localStorage.removeItem(e)},e}(),l4=function(e,t,i){var r=e.substring(e.length-6);return new l6("amp-exp-".concat(t,"-").concat(r),i,l7)},l8=function(e,t,i){void 0===i&&(i=new l3);var r=e.substring(e.length-6);return new l6("amp-exp-".concat(t,"-").concat(r,"-flags"),i)},l6=function(){function e(e,t,i){this.cache={},this.namespace=e,this.storage=t,this.transformer=i}return e.prototype.get=function(e){return this.cache[e]},e.prototype.getAll=function(){return lN({},this.cache)},e.prototype.put=function(e,t){this.cache[e]=t},e.prototype.putAll=function(e){var t,i;try{for(var r=lH(Object.keys(e)),n=r.next();!n.done;n=r.next()){var o=n.value;this.cache[o]=e[o]}}catch(e){t={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.clear=function(){this.cache={}},e.prototype.load=function(){var e,t,i,r=this.storage.get(this.namespace);try{i=JSON.parse(r)||{}}catch(e){return}var n={};try{for(var o=lH(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value;try{var l=void 0;(l=this.transformer?this.transformer(i[a]):i[a])&&(n[a]=l)}catch(e){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.clear(),this.putAll(n)},e.prototype.store=function(e){void 0===e&&(e=this.cache),this.storage.put(this.namespace,JSON.stringify(e))},e}(),l7=function(e){if("string"==typeof e)return{key:e,value:e};if("object"==typeof e){var t=e.key,i=e.value,r=e.payload,n=e.metadata,o=e.expKey;n&&n.experimentKey?o=n.experimentKey:o&&((n=n||{}).experimentKey=o);var s={};return t?s.key=t:i&&(s.key=i),i&&(s.value=i),n&&(s.metadata=n),r&&(s.payload=r),o&&(s.expKey=o),s}},l9=function(){function e(){this.globalScope=lO()}return e.prototype.get=function(e){var t;return null==(t=this.globalScope)?void 0:t.sessionStorage.getItem(e)},e.prototype.put=function(e,t){var i;null==(i=this.globalScope)||i.sessionStorage.setItem(e,t)},e.prototype.delete=function(e){var t;null==(t=this.globalScope)||t.sessionStorage.removeItem(e)},e}(),ue=function(e,t,i,r){var n,o=null==i?void 0:i.value,s="[Experiment] ".concat(t);return{name:"[Experiment] Exposure",user:e,key:t,variant:i,userProperty:s,properties:{key:t,variant:o,source:r},userProperties:((n={})[s]=o,n)}},ut=function(e){return null==e},ui=function(e){return!!ut(e)||e&&0===Object.keys(e).length},ur=function(e){if(!e||"object"!=typeof e)return{};var t,i,r={};try{for(var n=lH(Object.entries(e)),o=n.next();!o.done;o=n.next()){var s=lz(o.value,2),a=s[0],l=s[1];ut(l)||(r[a]=l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r},un=function(e){var t;return(null==(t=null==e?void 0:e.metadata)?void 0:t.evaluationMode)==="local"},uo=function(){function e(e,t,i,r){this.started=!1,this.done=!1,this.attempts=e,this.min=t,this.max=i,this.scalar=r}return e.prototype.start=function(e){return lB(this,void 0,void 0,function(){return lV(this,function(t){switch(t.label){case 0:if(this.started)throw Error("Backoff already started");return this.started=!0,[4,this.backoff(e,0,this.min)];case 1:return t.sent(),[2]}})})},e.prototype.cancel=function(){this.done=!0,clearTimeout(this.timeoutHandle)},e.prototype.backoff=function(e,t,i){return lB(this,void 0,void 0,function(){var r=this;return lV(this,function(n){return this.done||(this.timeoutHandle=lT.setTimeout(function(){return lB(r,void 0,void 0,function(){var r,n;return lV(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e()];case 1:return o.sent(),[3,3];case 2:return o.sent(),(r=t+1)<this.attempts&&(n=Math.min(i*this.scalar,this.max),this.backoff(e,r,n)),[3,3];case 3:return[2]}})})},i)),[2]})})},e}(),us=function(e){if(!e)return{};var t,i,r,n,o={user:e},s=lO();s&&(o.page={url:s.location.href});var a={};if(!e.groups)return o;try{for(var l=lH(Object.keys(e.groups)),u=l.next();!u.done;u=l.next()){var d=u.value,c=e.groups[d];if(c.length>0&&c[0]){var h=c[0],p={group_name:h},f=null==(n=null==(r=e.group_properties)?void 0:r[d])?void 0:n[h];f&&Object.keys(f).length>0&&(p.group_properties=f),a[d]=p}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}return Object.keys(a).length>0&&(o.groups=a),delete o.user.groups,delete o.user.group_properties,o},ua=function(e){return null==e?{}:"string"==typeof e?{key:e,value:e}:e},ul=function(e){if(!e)return{};var t=void 0;e.metadata&&(t=e.metadata.experimentKey);var i={};return e.key&&(i.key=e.key),e.value&&(i.value=e.value),e.payload&&(i.payload=e.payload),t&&(i.expKey=t),e.metadata&&(i.metadata=e.metadata),i},uu=function(){function e(e){this.setProperties={},this.unsetProperties={},this.analyticsProvider=e}return e.prototype.track=function(e){this.setProperties[e.key]!=e.variant.value&&(this.setProperties[e.key]=e.variant.value,delete this.unsetProperties[e.key],this.analyticsProvider.track(e))},e.prototype.setUserProperty=function(e){this.setProperties[e.key]!=e.variant.value&&this.analyticsProvider.setUserProperty(e)},e.prototype.unsetUserProperty=function(e){this.unsetProperties[e.key]||(this.unsetProperties[e.key]="unset",delete this.setProperties[e.key],this.analyticsProvider.unsetUserProperty(e))},e}(),ud=function(){function e(e){this.tracked={},this.identity={},this.exposureTrackingProvider=e}return e.prototype.track=function(e,t){var i={userId:null==t?void 0:t.user_id,deviceId:null==t?void 0:t.device_id};this.identityEquals(this.identity,i)||(this.tracked={}),this.identity=i;var r=e.flag_key in this.tracked,n=this.tracked[e.flag_key];r&&n===e.variant||(this.tracked[e.flag_key]=e.variant,this.exposureTrackingProvider.track(e))},e.prototype.identityEquals=function(e,t){return e.userId===t.userId&&e.deviceId===t.deviceId},e}(),uc=function(){function e(e,t){var i,r,n,o,s,a=this;this.engine=new lr,this.isRunning=!1,this.apiKey=e,t=ur(t),this.config=lN(lN(lN({},lZ),t),{serverUrl:(null==t?void 0:t.serverUrl)||((null==(i=null==t?void 0:t.serverZone)?void 0:i.toLowerCase())==="eu"?"https://api.lab.eu.amplitude.com":lZ.serverUrl),flagsServerUrl:(null==t?void 0:t.flagsServerUrl)||((null==(r=null==t?void 0:t.serverZone)?void 0:r.toLowerCase())==="eu"?"https://flag.lab.eu.amplitude.com":lZ.flagsServerUrl),flagConfigPollingIntervalMillis:t.flagConfigPollingIntervalMillis<6e4?6e4:null!=(n=t.flagConfigPollingIntervalMillis)?n:lZ.flagConfigPollingIntervalMillis});var l=null==(o=this.config)?void 0:o.internalInstanceNameSuffix;if(this.isWebExperiment="web"===l,this.poller=new lA(function(){return a.doFlags()},this.config.flagConfigPollingIntervalMillis),this.config.initialVariants)for(var u in this.config.initialVariants)this.config.initialVariants[u]=l7(this.config.initialVariants[u]);this.config.userProvider&&(this.userProvider=this.config.userProvider),this.config.analyticsProvider&&(this.analyticsProvider=new uu(this.config.analyticsProvider)),this.config.exposureTrackingProvider&&(this.userSessionExposureTracker=new ud(this.config.exposureTrackingProvider)),this.integrationManager=new l0(this.config,this);var d=new lQ(this.config.httpClient||lX);this.flagApi=new lD(this.apiKey,this.config.flagsServerUrl,d),this.evaluationApi=new lM(this.apiKey,this.config.serverUrl,d);var c=l?"".concat(this.config.instanceName,"-").concat(l):this.config.instanceName;s=this.isWebExperiment?new l9:new l3,this.variants=l4(this.apiKey,c,s),this.flags=l8(this.apiKey,c,s);try{this.flags.load(),this.variants.load()}catch(e){}this.mergeInitialFlagsWithStorage()}return e.prototype.start=function(e){return lB(this,void 0,void 0,function(){var t,i,r;return lV(this,function(n){switch(n.label){case 0:if(this.isRunning)return[2];this.isRunning=!0,this.setUser(e),n.label=1;case 1:if(n.trys.push([1,6,,7]),t=this.doFlags(),!(null==(r=this.config.fetchOnStart)||r))return[3,3];return[4,Promise.all([this.fetch(e),t])];case 2:return n.sent(),[3,5];case 3:return[4,t];case 4:n.sent(),n.label=5;case 5:return[3,7];case 6:if(i=n.sent(),this.config.throwOnError)throw i;return[3,7];case 7:return this.config.pollOnStart&&this.poller.start(),[2]}})})},e.prototype.stop=function(){this.isRunning&&(this.poller.stop(),this.isRunning=!1)},e.prototype.fetch=function(){return lB(this,arguments,void 0,function(e,t){var i;return void 0===e&&(e=this.user),lV(this,function(r){switch(r.label){case 0:this.setUser(e||{}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fetchInternal(e,this.config.fetchTimeoutMillis,this.config.retryFetchOnFailure,t)];case 2:return r.sent(),[3,4];case 3:if(i=r.sent(),this.config.throwOnError)throw i;return this.config.debug&&(i instanceof lP?console.debug(i):console.error(i)),[3,4];case 4:return[2,this]}})})},e.prototype.variant=function(e,t){if(!this.apiKey)return{value:void 0};var i,r,n=this.variantAndSource(e,t);return this.config.automaticExposureTracking&&this.exposureInternal(e,n),this.debug("[Experiment] variant for ".concat(e," is ").concat((null==(i=n.variant)?void 0:i.key)||(null==(r=n.variant)?void 0:r.value))),n.variant||{}},e.prototype.exposure=function(e){var t=this.variantAndSource(e);this.exposureInternal(e,t)},e.prototype.all=function(){if(!this.apiKey)return{};var e=this.evaluate();for(var t in e)un(this.flags.get(t))||delete e[t];return lN(lN(lN({},this.secondaryVariants()),this.sourceVariants()),e)},e.prototype.clear=function(){this.variants.clear();try{this.variants.store()}catch(e){}},e.prototype.getUser=function(){if(!this.user)return this.user;if(null==(e=this.user)||!e.user_properties)return lN({},this.user);var e,t=lN({},this.user.user_properties);return lN(lN({},this.user),{user_properties:t})},e.prototype.setUser=function(e){var t;if(!e){this.user=null;return}if(null==(t=this.user)?void 0:t.user_properties){var i=lN({},e.user_properties);this.user=lN(lN({},e),{user_properties:i})}else this.user=lN({},e)},e.prototype.getUserProvider=function(){return this.userProvider},e.prototype.setUserProvider=function(e){return this.userProvider=e,this},e.prototype.mergeInitialFlagsWithStorage=function(){var e=this;this.config.initialFlags&&JSON.parse(this.config.initialFlags).forEach(function(t){e.flags.get(t.key)||e.flags.put(t.key,t)})},e.prototype.evaluate=function(e){var t,i,r=this.addContext(this.user),n=ln(this.flags.getAll(),e),o=us(r),s=this.engine.evaluate(o,n),a={};try{for(var l=lH(Object.keys(s)),u=l.next();!u.done;u=l.next()){var d=u.value;a[d]=ul(s[d])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}return a},e.prototype.variantAndSource=function(e,t){var i={};this.config.source===el.LocalStorage?i=this.localStorageVariantAndSource(e,t):this.config.source===el.InitialVariants&&(i=this.initialVariantsVariantAndSource(e,t));var r=this.flags.get(e);return(un(r)||!i.variant&&r)&&(i=this.localEvaluationVariantAndSource(e,r,t)),i},e.prototype.localEvaluationVariantAndSource=function(e,t,i){var r,n={},o=this.evaluate([t.key])[e],s=eu.LocalEvaluation,a=null==(r=null==o?void 0:o.metadata)?void 0:r.default;if(!ut(o)&&!a)return{variant:ua(o),source:s,hasDefaultVariant:!1};if(a&&(n={variant:ua(o),source:s,hasDefaultVariant:!0}),!ut(i))return{variant:ua(i),source:eu.FallbackInline,hasDefaultVariant:n.hasDefaultVariant};var l=this.config.initialVariants[e];if(!ut(l))return{variant:ua(l),source:eu.SecondaryInitialVariants,hasDefaultVariant:n.hasDefaultVariant};var u=ua(this.config.fallbackVariant),d={variant:u,source:eu.FallbackConfig,hasDefaultVariant:n.hasDefaultVariant};return ui(u)?n:d},e.prototype.localStorageVariantAndSource=function(e,t){var i,r={},n=this.variants.get(e),o=null==(i=null==n?void 0:n.metadata)?void 0:i.default;if(!ut(n)&&!o)return{variant:ua(n),source:eu.LocalStorage,hasDefaultVariant:!1};if(o&&(r={variant:ua(n),source:eu.LocalStorage,hasDefaultVariant:!0}),!ut(t))return{variant:ua(t),source:eu.FallbackInline,hasDefaultVariant:r.hasDefaultVariant};var s=this.config.initialVariants[e];if(!ut(s))return{variant:ua(s),source:eu.SecondaryInitialVariants,hasDefaultVariant:r.hasDefaultVariant};var a=ua(this.config.fallbackVariant),l={variant:a,source:eu.FallbackConfig,hasDefaultVariant:r.hasDefaultVariant};return ui(a)?r:l},e.prototype.initialVariantsVariantAndSource=function(e,t){var i,r={},n=this.config.initialVariants[e];if(!ut(n))return{variant:ua(n),source:eu.InitialVariants,hasDefaultVariant:!1};var o=this.variants.get(e),s=null==(i=null==o?void 0:o.metadata)?void 0:i.default;if(!ut(o)&&!s)return{variant:ua(o),source:eu.LocalStorage,hasDefaultVariant:!1};if(s&&(r={variant:ua(o),source:eu.LocalStorage,hasDefaultVariant:!0}),!ut(t))return{variant:ua(t),source:eu.FallbackInline,hasDefaultVariant:r.hasDefaultVariant};var a=ua(this.config.fallbackVariant),l={variant:a,source:eu.FallbackConfig,hasDefaultVariant:r.hasDefaultVariant};return ui(a)?r:l},e.prototype.fetchInternal=function(e,t,i,r){return lB(this,void 0,void 0,function(){var n,o;return lV(this,function(s){switch(s.label){case 0:if(!this.apiKey)throw Error("Experiment API key is empty");this.debug("[Experiment] Fetch all: retry=".concat(i)),i&&this.stopRetries(),s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this.doFetch(e,t,r)];case 2:return n=s.sent(),[4,this.storeVariants(n,r)];case 3:return s.sent(),[2,n];case 4:throw o=s.sent(),i&&this.shouldRetryFetch(o)&&this.startRetries(e,r),o;case 5:return[2]}})})},e.prototype.cleanUserPropsForFetch=function(e){var t=lN({},e);return delete t.cookie,t},e.prototype.doFetch=function(e,t,i){return lB(this,void 0,void 0,function(){var r,n,o,s,a,l,u;return lV(this,function(d){switch(d.label){case 0:return[4,this.addContextOrWait(e)];case 1:return e=d.sent(),e=this.cleanUserPropsForFetch(e),this.debug("[Experiment] Fetch variants for user: ",e),[4,this.evaluationApi.getVariants(e,lN({timeoutMillis:t},i))];case 2:r=d.sent(),n={};try{for(s=(o=lH(Object.keys(r))).next();!s.done;s=o.next())n[a=s.value]=ul(r[a])}catch(e){l={error:e}}finally{try{s&&!s.done&&(u=o.return)&&u.call(o)}finally{if(l)throw l.error}}return this.debug("[Experiment] Received variants: ",n),[2,n]}})})},e.prototype.doFlags=function(){return lB(this,void 0,void 0,function(){var e,t,i;return lV(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,,5]),e=void 0,!this.isWebExperiment)return[3,2];return[4,this.addContextOrWait(this.getUser())];case 1:e=r.sent(),r.label=2;case 2:return[4,this.flagApi.getFlags({libraryName:"experiment-js-client",libraryVersion:lJ,timeoutMillis:this.config.fetchTimeoutMillis,deliveryMethod:this.isWebExperiment?"web":void 0,user:(null==e?void 0:e.user_id)||(null==e?void 0:e.device_id)?{user_id:null==e?void 0:e.user_id,device_id:null==e?void 0:e.device_id}:void 0})];case 3:return t=r.sent(),this.flags.clear(),this.flags.putAll(t),[3,5];case 4:if((i=r.sent())instanceof lP){if(this.config.debug&&console.debug(i),this.config.throwOnError)throw i}else throw i;return[3,5];case 5:try{this.flags.store()}catch(e){}return this.mergeInitialFlagsWithStorage(),[2]}})})},e.prototype.storeVariants=function(e,t){return lB(this,void 0,void 0,function(){var i,r,n,o;return lV(this,function(s){for(o in 0===(i=t&&t.flagKeys?t.flagKeys:[]).length&&this.variants.clear(),r=function(t){i=i.filter(function(e){return e!==t}),n.variants.put(t,e[t])},n=this,e)r(o);for(o in i)this.variants.remove(o);try{this.variants.store()}catch(e){}return this.debug("[Experiment] Stored variants: ",e),[2]})})},e.prototype.startRetries=function(e,t){return lB(this,void 0,void 0,function(){var i=this;return lV(this,function(r){return this.debug("[Experiment] Retry fetch"),this.retriesBackoff=new uo(8,500,1e4,1.5),this.retriesBackoff.start(function(){return lB(i,void 0,void 0,function(){return lV(this,function(i){switch(i.label){case 0:return[4,this.fetchInternal(e,1e4,!1,t)];case 1:return i.sent(),[2]}})})}),[2]})})},e.prototype.stopRetries=function(){this.retriesBackoff&&this.retriesBackoff.cancel()},e.prototype.addContext=function(e){var t,i=null==(t=this.userProvider)?void 0:t.getUser(),r=this.integrationManager.getUser(),n=lN(lN(lN({},null==i?void 0:i.user_properties),r.user_properties),null==e?void 0:e.user_properties);return lN(lN(lN(lN({library:"experiment-js-client/".concat(lJ)},i),r),e),{user_properties:n})},e.prototype.addContextOrWait=function(e){return lB(this,void 0,void 0,function(){return lV(this,function(t){switch(t.label){case 0:return[4,this.integrationManager.ready()];case 1:return t.sent(),[2,this.addContext(e)]}})})},e.prototype.sourceVariants=function(){return this.config.source==el.LocalStorage?this.variants.getAll():this.config.source==el.InitialVariants?this.config.initialVariants:void 0},e.prototype.secondaryVariants=function(){return this.config.source==el.LocalStorage?this.config.initialVariants:this.config.source==el.InitialVariants?this.variants.getAll():void 0},e.prototype.exposureInternal=function(e,t){if(null==(n=null==(r=null==(i=t.variant)?void 0:i.metadata)?void 0:r.trackExposure)||n){this.legacyExposureInternal(e,t.variant,t.source);var i,r,n,o,s,a,l,u,d,c={flag_key:e},h=lY(t.source);if(!h||t.hasDefaultVariant){(null==(o=t.variant)?void 0:o.expKey)&&(c.experiment_key=null==(s=t.variant)?void 0:s.expKey);var p=null==(a=t.variant)?void 0:a.metadata;if(h||(null==p?void 0:p.default)||((null==(l=t.variant)?void 0:l.key)?c.variant=t.variant.key:(null==(u=t.variant)?void 0:u.value)&&(c.variant=t.variant.value)),p&&(c.metadata=p),this.isWebExperiment){var f=lO();if(null==f?void 0:f.location)try{var g=f.location.href;c.metadata.url=g.split("?")[0]||""}catch(e){}}var m=this.addContext(this.getUser());null==(d=this.userSessionExposureTracker)||d.track(c,m),this.integrationManager.track(c)}}},e.prototype.legacyExposureInternal=function(e,t,i){var r,n,o,s,a;if(this.analyticsProvider){var l=ue(this.addContext(this.getUser()),e,t,i);!lY(i)&&(null==t?void 0:t.value)?(null==t?void 0:t.value)&&(null==(s=null==(o=this.analyticsProvider)?void 0:o.setUserProperty)||s.call(o,l),null==(a=this.analyticsProvider)||a.track(l)):null==(n=null==(r=this.analyticsProvider)?void 0:r.unsetUserProperty)||n.call(r,l)}},e.prototype.debug=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.config.debug&&console.debug.apply(console,lj([e],lz(t),!1))},e.prototype.shouldRetryFetch=function(e){return!(e instanceof lE)||e.statusCode<400||e.statusCode>=500||429===e.statusCode},e.prototype.addPlugin=function(e){"integration"===e.type&&this.integrationManager.setIntegration(e)},e}(),uh=function(){function e(e,t){var i,r,n;this.globalScope=lO(),this.userAgent=void 0!==(null==(i=this.globalScope)?void 0:i.navigator)?null==(r=this.globalScope)?void 0:r.navigator.userAgent:void 0,this.ua=new lF.UAParser(this.userAgent).getResult(),this.localStorage=new l3,this.sessionStorage=new l9,this.userProvider=e,this.apiKey=t,this.storageKey="EXP_".concat(null==(n=this.apiKey)?void 0:n.slice(0,10),"_DEFAULT_USER_PROVIDER")}return e.prototype.getUser=function(){var e,t,i,r,n,o=(null==(e=this.userProvider)?void 0:e.getUser())||{};return lN({language:this.getLanguage(),platform:"Web",os:this.getOs(this.ua),device_model:this.getDeviceModel(this.ua),device_category:null!=(i=null==(t=this.ua.device)?void 0:t.type)?i:"desktop",referring_url:null==(n=null==(r=this.globalScope)?void 0:r.document)?void 0:n.referrer.replace(/\/$/,""),cookie:this.getCookie(),browser:this.getBrowser(this.ua),landing_url:this.getLandingUrl(),first_seen:this.getFirstSeen(),url_param:this.getUrlParam(),user_agent:this.userAgent},o)},e.prototype.getLanguage=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},e.prototype.getOs=function(e){var t,i;return[null==(t=e.browser)?void 0:t.name,null==(i=e.browser)?void 0:i.major].filter(function(e){return null!=e}).join(" ")},e.prototype.getDeviceModel=function(e){var t;return null==(t=e.os)?void 0:t.name},e.prototype.getBrowser=function(e){var t,i=null==(t=e.browser)?void 0:t.name;return(null==i?void 0:i.includes("Chrom"))&&(i="Chrome"),(null==i?void 0:i.includes("Firefox"))&&(i="Firefox"),(null==i?void 0:i.includes("Safari"))&&(i="Safari"),(null==i?void 0:i.includes("Edge"))&&(i="Edge"),(null==i?void 0:i.includes("Opera"))&&(i="Opera"),i},e.prototype.getCookie=function(){var e,t,i,r,n;if(null==(t=null==(e=this.globalScope)?void 0:e.document)?void 0:t.cookie)return Object.fromEntries(null==(n=null==(r=null==(i=this.globalScope)?void 0:i.document)?void 0:r.cookie)?void 0:n.split("; ").map(function(e){return e.split("=")}))},e.prototype.getLandingUrl=function(){var e,t;try{var i=JSON.parse(this.sessionStorage.get(this.storageKey)||"{}");return i.landing_url||(i.landing_url=null==(t=null==(e=this.globalScope)?void 0:e.location)?void 0:t.href.replace(/\/$/,""),this.sessionStorage.put(this.storageKey,JSON.stringify(i))),i.landing_url}catch(e){return}},e.prototype.getFirstSeen=function(){try{var e=JSON.parse(this.localStorage.get(this.storageKey)||"{}");return e.first_seen||(e.first_seen=(Date.now()/1e3).toString(),this.localStorage.put(this.storageKey,JSON.stringify(e))),e.first_seen}catch(e){return}},e.prototype.getUrlParam=function(){if(this.globalScope){var e,t,i,r={};try{var n=new URL(this.globalScope.location.href);try{for(var o=lH(n.searchParams),s=o.next();!s.done;s=o.next()){var a=lz(s.value,2),l=a[0],u=a[1];r[l]=lj(lj([],lz(null!=(i=r[l])?i:[]),!1),lz(u.split(",")),!1)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}catch(e){return}return Object.entries(r).reduce(function(e,t){var i=lz(t,2),r=i[0],n=i[1];return e[r]=1==n.length?n[0]:n,e},{})}},e}();lT.experimentInstances={};var up=lT.experimentInstances,uf=function(e){return(null==e?void 0:e.instanceName)||lZ.instanceName},ug=function(e,t){var i=uf(t),r=null==t?void 0:t.internalInstanceNameSuffix;return r?"".concat(i,".").concat(e,".").concat(r):"".concat(i,".").concat(e)},um=function(e,t,i){var r=ug(e,t),n=up[r];return n?n:(n=new uc(e,lN(lN({},t),{userProvider:new uh(null==t?void 0:t.userProvider,e)})),i&&n.addPlugin(i()),up[r]=n,n)};function uv(){}uv.prototype.getUser=function(){return{}},uv.prototype.start=function(e){return lB(this,void 0,void 0,function(){return lV(this,function(e){return[2]})})},uv.prototype.stop=function(){},uv.prototype.setUser=function(e){},uv.prototype.fetch=function(e,t){return lB(this,void 0,void 0,function(){return lV(this,function(e){return[2,this]})})},uv.prototype.getUserProvider=function(){return null},uv.prototype.setUserProvider=function(e){return this},uv.prototype.variant=function(e,t){return lZ.fallbackVariant},uv.prototype.all=function(){return{}},uv.prototype.clear=function(){},uv.prototype.exposure=function(e){};var uy=function(){function e(t){this.name=e.pluginName,this.config=t}return e.prototype.setup=function(e,t){return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(t){var i,r;return this.experiment=um(i=e.apiKey,r=this.config,function(){return new lq(i,tn.getInstance(uf(r)),1e4)}),[2]})})},e.pluginName="@amplitude/experiment-analytics-plugin",e}(),ub=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:uw(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),uw=function(){return"u">typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},uC=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(t){e(t)}),this.queue=[])},e}(),ux=function(){return(ux=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function uS(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function uk(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var uR=function(e,t){var i,r,n=typeof e;if(n!==typeof t)return!1;try{for(var o=uS(["string","number","boolean","undefined"]),s=o.next();!s.done;s=o.next())if(s.value===n)return e===t}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;var a=Array.isArray(e),l=Array.isArray(t);if(a!==l)return!1;if(a&&l){for(var u=0;u<e.length;u++)if(!uR(e[u],t[u]))return!1}else{if(!uR(Object.keys(e).sort(),Object.keys(t).sort()))return!1;var d=!0;return Object.keys(e).forEach(function(i){uR(e[i],t[i])||(d=!1)}),d}return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,r=Array(i);i--;)r[i]=[t[i],e[t[i]]];return r});var uE=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=ux({},this.identity.userProperties),i=ux(ux({},this.identity),{userProperties:t});return{setUserId:function(e){return i.userId=e,this},setDeviceId:function(e){return i.deviceId=e,this},setUserProperties:function(e){return i.userProperties=e,this},setOptOut:function(e){return i.optOut=e,this},updateUserProperties:function(e){var t,r,n,o,s,a,l=i.userProperties||{};try{for(var u=uS(Object.entries(e)),d=u.next();!d.done;d=u.next()){var c=uk(d.value,2),h=c[0],p=c[1];switch(h){case"$set":try{for(var f=(n=void 0,uS(Object.entries(p))),g=f.next();!g.done;g=f.next()){var m=uk(g.value,2),v=m[0],y=m[1];l[v]=y}}catch(e){n={error:e}}finally{try{g&&!g.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}break;case"$unset":try{for(var b=(s=void 0,uS(Object.keys(p))),w=b.next();!w.done;w=b.next()){var v=w.value;delete l[v]}}catch(e){s={error:e}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}break;case"$clearAll":l={}}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i.userProperties=l,this},commit:function(){return e.setIdentity(i),this}}},e.prototype.getIdentity=function(){return ux({},this.identity)},e.prototype.setIdentity=function(e){var t=ux({},this.identity);this.identity=ux({},e),uR(t,this.identity)||this.listeners.forEach(function(t){t(e)})},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),uP="u">typeof globalThis?globalThis:"u">typeof window?window:self,uM=function(){function e(){this.identityStore=new uE,this.eventBridge=new uC,this.applicationContextProvider=new ub}return e.getInstance=function(t){return uP.analyticsConnectorInstances||(uP.analyticsConnectorInstances={}),uP.analyticsConnectorInstances[t]||(uP.analyticsConnectorInstances[t]=new e),uP.analyticsConnectorInstances[t]},e}(),uD=["boot"],uT=((r=uT||{}).Local="https://local.amplitude.com:3010/",r.Staging="https://apps.stag2.amplitude.com/",r.Production="https://app.amplitude.com/",r.ProductionEU="https://app.eu.amplitude.com/",r),uO=((e=>{if("u">typeof window&&window.opener)for(let t of Object.values(uT))window.opener.postMessage({message:e},t)})("ENGAGEMENT_SNIPPET"),_=(e,t,i,r)=>(function(e,t,i,r){for(let n of e){let e=document.createElement("script");e.src=n,e.id="engagement-sdk-bundle",i&&e.setAttribute("nonce",i),t&&e.setAttribute("type",t),r&&(e.onerror=r),document.getElementsByTagName("head")[0].appendChild(e)}})([e||"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz"],t,i,r),new Proxy(o={_q:null!=(A=null==(n="u">typeof window?window.engagement:void 0)?void 0:n._q)?A:[],_configuration:{apiKey:null!=(I=null==(F=null==n?void 0:n._configuration)?void 0:F.apiKey)?I:"",serverUrl:null==(L=null==n?void 0:n._configuration)?void 0:L.serverUrl,chatUrl:null==(N=null==n?void 0:n._configuration)?void 0:N.chatUrl,mediaUrl:null==(B=null==n?void 0:n._configuration)?void 0:B.mediaUrl,serverZone:null!=(H=null==(V=null==n?void 0:n._configuration)?void 0:V.serverZone)?H:"US",options:{...null==(z=null==n?void 0:n._configuration)?void 0:z.options}},_sentry:void 0,init(e,t){var i,r,n;let s;if(o._configuration.apiKey)return void console.log("Engagement SDK has already been initialized. Ignoring additional init call.");if(o._configuration={...o._configuration,...t,apiKey:e,options:{splitting:!0,...o._configuration.options,...null==t?void 0:t.options}},null!=(r=null==(i=o._configuration)?void 0:i.options)&&r.logger&&o._configuration.options.logger.enable(null!=(n=o._configuration.options.logLevel)?n:2),null!=t&&t.cdnUrl)s=o._configuration.options.splitting?`${t.cdnUrl}/engagement-browser/prod/split/index.js`:t.cdnUrl+"/engagement-browser/prod/index.min.js.gz";else{let e="EU"===o._configuration.serverZone?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com";s=o._configuration.options.splitting?`${e}/engagement-browser/prod/split/index.js`:`${e}/engagement-browser/prod/index.min.js.gz`}let a=null,l=()=>{if(a&&(clearTimeout(a),a=null),o._q&&o._q.length>0)for(console.warn(`Engagement SDK failed to load within ${u}ms. Resolving pending calls gracefully.`);o._q.length>0;){let e=o._q.shift();if(!e)continue;let t=e[0];if(uD.includes(t)&&e[1]instanceof Function&&e[2]instanceof Function){let i=e[1];console.warn(`Engagement SDK method '${t}' resolved as no-op due to script loading failure`),i(void 0)}}};_(s,o._configuration.options.splitting?"module":void 0,null==t?void 0:t.nonce,l);let u=1e4;a=setTimeout(()=>{l()},1e4)},plugin(e){let t=o.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(i,r){var n;let o=null!=(n=i.instanceName)?n:"$default_instance",s=uM.getInstance(o).identityStore;t(i.apiKey,{serverZone:i.serverZone,...e,options:{logLevel:i.logLevel,logger:i.loggerProvider,...null==e?void 0:e.options}});let a=[{track:e=>{r.track(e)}}];await window.engagement.boot({user:()=>{let e=s.getIdentity();return{user_id:r.getUserId(),device_id:r.getDeviceId(),user_properties:e.userProperties,getSessionId:r.getSessionId}},integrations:a}),s.addIdentityListener(e=>{var t,i,n,o;null!=(t=window.engagement)&&t._.user&&null!=(i=window.engagement)&&i._analytics.hasBooted?(null==(o=null==(n=window.engagement)?void 0:n._.user)?void 0:o.user_id)!==e.userId?(window.engagement.shutdown(),window.engagement.boot({user:()=>{let e=s.getIdentity();return{user_id:r.getUserId(),device_id:r.getDeviceId(),user_properties:e.userProperties,getSessionId:r.getSessionId}},integrations:a})):window.engagement._setUserProperties(e.userProperties):console.warn("Engagement SDK not booted. Ignoring identity change.")})},execute:async e=>(window.engagement.forwardEvent(e),e)}}},{get:function(e,t){return t in o?o[t]:"then"!==t?"gs"===t||"rc"===t?new Proxy({},{get:function(e,i){return function(){let e=Array.from(arguments),r=`${t}.${i}`;e.unshift(r),o._q.push(e)}}}):uD.includes(t)?function(){let e=Array.prototype.slice.call(arguments);return new Promise((i,r)=>{e.unshift(t,i,r),o._q.push(e)})}:function(){let e=Array.prototype.slice.call(arguments);e.unshift(t),o._q.push(e)}:void 0}}));let u_={_setDiagnosticsSampleRate:e1((j=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,ec.__extends)(t,e),t.prototype.sessionReplay=function(){return this._sessionReplay},t.prototype.experiment=function(){if(void 0!==this.config){var e=this.plugins(uy);return 0===e.length?void this.config.loggerProvider.debug("".concat(uy.pluginName," plugin is not found.")):1===e.length?e[0].experiment:void this.config.loggerProvider.debug("Multiple instances of ".concat(uy.pluginName," are found."))}},t.prototype.initAll=function(t,i){return(0,ec.__awaiter)(this,void 0,void 0,function(){var r,n;return(0,ec.__generator)(this,function(o){switch(o.label){case 0:return r={serverZone:null==i?void 0:i.serverZone,instanceName:null==i?void 0:i.instanceName},e.prototype.add.call(this,{type:"enrichment",name:"@amplitude/unified-library-plugin",execute:function(e){var t;return(0,ec.__awaiter)(this,void 0,void 0,function(){return(0,ec.__generator)(this,function(i){return e.library="".concat("amplitude-ts-unified","/").concat("1.0.0-beta.9","-").concat(null!=(t=e.library)?t:""),[2,e]})})}}),[4,e.prototype.init.call(this,t,(0,ec.__assign)((0,ec.__assign)({},null==i?void 0:i.analytics),r)).promise];case 1:return o.sent(),[4,e.prototype.add.call(this,new aT((0,ec.__assign)((0,ec.__assign)({},null==i?void 0:i.sessionReplay),r))).promise];case 2:return o.sent(),[4,e.prototype.add.call(this,new uy((0,ec.__assign)((0,ec.__assign)({},null==i?void 0:i.experiment),r))).promise];case 3:let s;return o.sent(),void 0===(n=this.plugin(aT.pluginName))?this.config.loggerProvider.debug("".concat(aT.pluginName," plugin is not found.")):this._sessionReplay=n.sessionReplay,[4,e.prototype.add.call(this,(s=(0,ec.__assign)((0,ec.__assign)({},null==i?void 0:i.engagement),r),"u">typeof window&&!window.engagement&&(window.engagement=uO),uO.plugin(s))).promise];case 4:return o.sent(),[2]}})})},t.prototype.init=function(t,i,r){return void 0===t&&(t=""),e.prototype.init.call(this,t,i,r)},t}(oL)))._setDiagnosticsSampleRate.bind(j),"_setDiagnosticsSampleRate",eZ(j),e0(j,["config"])),experiment:e1(j.experiment.bind(j),"experiment",eZ(j),e0(j,["config"])),sessionReplay:e1(j.sessionReplay.bind(j),"sessionReplay",eZ(j),e0(j,["config"])),initAll:e1(j.initAll.bind(j),"initAll",eZ(j),e0(j,["config"])),init:e1(j.init.bind(j),"init",eZ(j),e0(j,["config"])),add:e1(j.add.bind(j),"add",eZ(j),e0(j,["config.apiKey","timeline.plugins"])),remove:e1(j.remove.bind(j),"remove",eZ(j),e0(j,["config.apiKey","timeline.plugins"])),track:e1(j.track.bind(j),"track",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),logEvent:e1(j.logEvent.bind(j),"logEvent",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),identify:e1(j.identify.bind(j),"identify",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),groupIdentify:e1(j.groupIdentify.bind(j),"groupIdentify",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),setGroup:e1(j.setGroup.bind(j),"setGroup",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),revenue:e1(j.revenue.bind(j),"revenue",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),flush:e1(j.flush.bind(j),"flush",eZ(j),e0(j,["config.apiKey","timeline.queue.length"])),getUserId:e1(j.getUserId.bind(j),"getUserId",eZ(j),e0(j,["config","config.userId"])),setUserId:e1(j.setUserId.bind(j),"setUserId",eZ(j),e0(j,["config","config.userId"])),getDeviceId:e1(j.getDeviceId.bind(j),"getDeviceId",eZ(j),e0(j,["config","config.deviceId"])),setDeviceId:e1(j.setDeviceId.bind(j),"setDeviceId",eZ(j),e0(j,["config","config.deviceId"])),reset:e1(j.reset.bind(j),"reset",eZ(j),e0(j,["config","config.userId","config.deviceId"])),getSessionId:e1(j.getSessionId.bind(j),"getSessionId",eZ(j),e0(j,["config"])),setSessionId:e1(j.setSessionId.bind(j),"setSessionId",eZ(j),e0(j,["config"])),extendSession:e1(j.extendSession.bind(j),"extendSession",eZ(j),e0(j,["config"])),setOptOut:e1(j.setOptOut.bind(j),"setOptOut",eZ(j),e0(j,["config"])),getOptOut:e1(j.getOptOut.bind(j),"getOptOut",eZ(j),e0(j,["config"])),setTransport:e1(j.setTransport.bind(j),"setTransport",eZ(j),e0(j,["config"])),getIdentity:e1(j.getIdentity.bind(j),"getIdentity",eZ(j),e0(j,["config"]))};u_._setDiagnosticsSampleRate;var uA=u_.initAll,uF=(u_.experiment,u_.sessionReplay,u_.add,u_.extendSession,u_.flush,u_.getDeviceId,u_.getSessionId,u_.getUserId,u_.groupIdentify,u_.identify,u_.logEvent,u_.remove,u_.reset,u_.revenue,u_.setDeviceId,u_.setGroup,u_.setOptOut,u_.setSessionId,u_.setTransport,u_.setUserId,u_.track);function uI(e,t,i){return uL||console.log("[Tracking]",e,t,i),uF(e,t,i)}let uL=!1;function uN(){let e,t=(e=document.cookie.match("(^|;)\\s*recce_user_id\\s*=\\s*([^;]+)"))?e.pop():"",i=ed.default.env.AMPLITUDE_API_KEY;if(t&&i)try{uA(i,{analytics:{userId:t,autocapture:!0},sessionReplay:{sampleRate:1}}),uL=!0}catch(e){console.error(e)}uL||console.log("[Tracking] Amplitude not initialized (missing API key or user ID). Events will be logged to console instead.")}function uB(e){uI("[Web] multi_nodes_action",e)}function uV(e){uI("[Web] history_action",e)}function uH(e){uI("[Experiment] preview_change",e)}function uz(e){uI("[Experiment] preview_change",e)}function uj(e){uI("[Experiment] single_environment",e)}function uG(){return!1}function uW(e){uI("[Web] column_level_lineage",e)}function uU(e){uI("[Web] share_state",e)}function u$(e){uI("[Web] state_action",e)}function uq(e){uI("[Click] copy_to_clipboard",e)}function uK(e){uI("[Web] navigation_change",e)}function uQ(e){uI("[Web] lineage_view_render",e)}function uX(e){uI("[Web] environment_config",e)}let uY={ROW_COUNT:"row_count",ROW_COUNT_DIFF:"row_count_diff",PROFILE:"profile",PROFILE_DIFF:"profile_diff",VALUE_DIFF:"value_diff",SCHEMA_DIFF:"schema_diff",LINEAGE_DIFF:"lineage_diff",QUERY:"query",HISTOGRAM_DIFF:"histogram_diff",TOP_K_DIFF:"top_k_diff"};function uZ(e){uI("[Web] explore_action",e)}function uJ(e){uI("[Web] explore_action_form",e)}function u0(e){return Object.values(uY).includes(e)}function u1(e){uI("[Web] lineage_selection",e)}e.s(["EXPLORE_ACTION",0,uY,"EXPLORE_FORM_EVENT",0,{EXECUTE:"execute",CANCEL:"cancel"},"EXPLORE_SOURCE",0,{LINEAGE_VIEW_TOP_BAR:"lineage_view_top_bar",LINEAGE_VIEW_CONTEXT_MENU:"lineage_view_context_menu",NODE_KEBAB_MENU:"node_kebab_menu",NODE_SIDEBAR_SINGLE_ENV:"node_sidebar_single_env",NODE_SIDEBAR_MULTI_ENV:"node_sidebar_multi_env",SCHEMA_ROW_COUNT_BUTTON:"schema_row_count_button",SCHEMA_COLUMN_MENU:"schema_column_menu"},"LINEAGE_SELECTION_ACTION",0,{SELECT_PARENT_NODES:"select_parent_nodes",SELECT_CHILD_NODES:"select_child_nodes",SELECT_ALL_UPSTREAM:"select_all_upstream",SELECT_ALL_DOWNSTREAM:"select_all_downstream"},"getExperimentTrackingBreakingChangeEnabled",()=>uG,"isExploreAction",()=>u0,"trackColumnLevelLineage",()=>uW,"trackCopyToClipboard",()=>uq,"trackEnvironmentConfig",()=>uX,"trackExploreAction",()=>uZ,"trackExploreActionForm",()=>uJ,"trackHistoryAction",()=>uV,"trackInit",()=>uN,"trackLineageSelection",()=>u1,"trackLineageViewRender",()=>uQ,"trackMultiNodesAction",()=>uB,"trackNavigation",()=>uK,"trackPreviewChange",()=>uH,"trackPreviewChangeFeedback",()=>uz,"trackShareState",()=>uU,"trackSingleEnvironment",()=>uj,"trackStateAction",()=>u$],203158)},862754,e=>{"use strict";function t(e){return"query"===e.type}function i(e){return"query_base"===e.type}function r(e){return"query_diff"===e.type}function n(e){return"value_diff"===e.type}function o(e){return"value_diff_detail"===e.type}function s(e){return"profile"===e.type}function a(e){return"profile_diff"===e.type}function l(e){return"row_count"===e.type}function u(e){return"row_count_diff"===e.type}function d(e){return"top_k_diff"===e.type}function c(e){return"histogram_diff"===e.type}e.s(["isHistogramDiffRun",()=>c,"isProfileDiffRun",()=>a,"isProfileRun",()=>s,"isQueryBaseRun",()=>i,"isQueryDiffRun",()=>r,"isQueryRun",()=>t,"isRowCountDiffRun",()=>u,"isRowCountRun",()=>l,"isTopKDiffRun",()=>d,"isValueDiffDetailRun",()=>o,"isValueDiffRun",()=>n])},461566,e=>{"use strict";var t=e.i(705443),i=e.i(203158),r=e.i(862754);async function n(e,r,n){let o=n?.trackProps?{...n.trackProps}:{};return(0,i.getExperimentTrackingBreakingChangeEnabled)()&&(o.breaking_change_analysis=!0),(await t.axiosClient.post("/api/runs",{type:e,params:r,nowait:n?.nowait,track_props:o})).data}async function o(e,i){var n;return null==(n=(await t.axiosClient.get(`/api/runs/${e}/wait`,{params:{timeout:i}})).data).result||(0,r.isQueryRun)(n)&&(n.result.columns=n.result.columns.map(e=>(e.key||(e.key=e.name),e))),n}async function s(e){return await t.axiosClient.post(`/api/runs/${e}/cancel`)}async function a(e,i){return(await t.axiosClient.post(`/api/checks/${e}/run`,{nowait:i?.nowait})).data}async function l(e,i,r){return(await t.axiosClient.post("/api/runs/search",{type:e,params:i,limit:r})).data}async function u(){return(await t.axiosClient.get("/api/runs")).data}async function d(){return(await t.axiosClient.post("/api/runs/aggregate",{})).data}e.s(["aggregateRuns",()=>d,"cancelRun",()=>s,"listRuns",()=>u,"searchRuns",()=>l,"submitRun",()=>n,"submitRunFromCheck",()=>a,"waitRun",()=>o])},916955,286568,e=>{"use strict";var t=e.i(19483),i=e.i(76130),r=e.i(468836),n=e.i(11321),o=e.i(772510),s=e.i(845209),a=e.i(73371),l=e.i(427938),u=e.i(333207),d=e.i(63257),c=e.i(79312),h=e.i(187725),p=e.i(603338),f=e.i(523043),g=e.i(23995),m=e.i(377855),v=e.i(912007),y=e.i(407101),b=e.i(473788),w=e.i(420856),C=e.i(461566),x=e.i(203158),S=e.i(830023),k=e.i(503135);let R=()=>(0,u.useQuery)({queryKey:y.cacheKeys.flag(),queryFn:b.getServerFlag});e.s(["useRecceServerFlag",0,R],286568);let E=(0,h.createContext)({isActionAvailable:()=>!0,isDemoSite:!1});function P({children:e}){let{idleTimeout:P,remainingSeconds:M,isEnabled:D,setDisconnected:T,resetConnection:O}=(0,k.useIdleTimeout)(),_=(0,u.useQuery)({queryKey:y.cacheKeys.lineage(),queryFn:w.getServerInfo}),A=(0,u.useQuery)({queryKey:y.cacheKeys.runsAggregated(),queryFn:C.aggregateRuns}),F=(0,h.useMemo)(()=>{let e=_.data?.lineage;if(e?.base)return(0,f.buildLineageGraph)(e.base,e.current,e.diff)},[_.data]),I=_.error?.message,{state_metadata:L,lineage:N,sqlmesh:B,demo:V,codespace:H,review_mode:z,cloud_mode:j,file_mode:G,filename:W,adapter_type:U,git:$,pull_request:q,support_tasks:K}=_.data??{demo:!1},Q=N?.base.manifest_metadata,X=N?.current.manifest_metadata,{connectionStatus:Y,connect:Z,envStatus:J}=function(){let[e,t]=(0,h.useState)(void 0),i=(0,h.useRef)({ws:void 0,status:"pending",artifactsUpdatedToastId:void 0}),[r,n]=(0,h.useState)("pending"),[o,s]=(0,h.useState)(void 0);(0,h.useEffect)(()=>{i.current.status=r},[r]),(0,h.useEffect)(()=>{i.current.artifactsUpdatedToastId=e},[e]);let a=(0,d.useQueryClient)(),l=(0,h.useCallback)(()=>{a.invalidateQueries({queryKey:y.cacheKeys.lineage()}),a.invalidateQueries({queryKey:y.cacheKeys.checks()}),a.invalidateQueries({queryKey:y.cacheKeys.runs()})},[a]),u=(0,h.useCallback)(()=>{let e=new WebSocket(`${S.PUBLIC_API_URL.replace(/(http)(s)?:\/\//,"ws$2://")}/api/ws`);i.current.ws=e,e.onopen=()=>{e.send("ping")},e.onmessage=e=>{if("pong"===e.data){"disconnected"===i.current.status&&l(),n("connected");return}try{let r=JSON.parse(e.data);if("refresh"===r.command){let{eventType:e,srcPath:n}=r.event,[o,s]=n.split("/").slice(-2),a=c.default.parse(s).name,u=`${o}-${a}-${e}`;null==i.current.artifactsUpdatedToastId&&t(m.toaster.create({id:u,description:`Detected ${o} ${a} ${e}`,type:"info",duration:5e3,closable:!0})),l()}else if("relaunch"===r.command)s("relaunch");else{let{id:e,title:i,description:n,status:o,duration:s}=r.event;t(m.toaster.create({id:e||"broadcast",title:i,description:n,type:o??"info",duration:s??5e3,closable:!0}))}}catch(e){console.error(e)}},e.onerror=e=>{console.error("An error occurred during Handling WebSockets",e)},e.onclose=()=>{n(e=>"connected"===e?"disconnected":e),i.current.ws=void 0}},[l]);return(0,h.useEffect)(()=>{let e=i.current;return u(),()=>{e.ws&&e.ws.close()}},[u]),{connectionStatus:r,connect:u,envStatus:o}}();(0,h.useEffect)(()=>{"disconnected"===Y?T():"connected"===Y&&O()},[Y,T,O]);let{data:ee,isLoading:et}=R(),{featureToggles:ei,shareUrl:er}=(0,v.useRecceInstanceContext)(),[en,eo]=(0,h.useState)(!1),[es,ea]=(0,h.useState)(!1),el=(0,d.useQueryClient)(),eu=(0,h.useCallback)(e=>!K||(K[e]??!0),[K]),ed=!et&&"relaunch"===J&&ee?.single_env_onboarding===!0&&ee.show_relaunch_hint;ed!==es&&(ea(ed),eo(ed)),(0,h.useEffect)(()=>{ed&&en&&(0,x.trackSingleEnvironment)({action:"target_base_added"})},[ed,en]);let ec=()=>{eo(!1),(0,b.markRelaunchHintCompleted)(),el.invalidateQueries({queryKey:y.cacheKeys.flag()})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.Provider,{value:{lineageGraph:F,retchLineageGraph:()=>{A.refetch()},envInfo:{stateMetadata:L,adapterType:U,git:$,pullRequest:q,dbt:{base:Q,current:X},sqlmesh:B},reviewMode:z,cloudMode:j,fileMode:G,fileName:W,isDemoSite:V,isCodespace:H,error:I,supportTasks:K,isActionAvailable:eu,isLoading:_.isLoading,runsAggregated:A.data,refetchRunsAggregated:()=>{A.refetch()}},children:e}),(0,t.jsx)(r.default,{open:"disconnected"===Y,onClose:()=>void 0,children:er&&null!==ei.mode?(0,t.jsx)(g.RecceInstanceDisconnectedModalContent,{shareUrl:er,mode:ei.mode}):(0,t.jsx)(g.ServerDisconnectedModalContent,{connect:Z,idleSeconds:D&&null!==P&&null!==M&&M<=5?P-Math.max(0,M):void 0})}),ee?.single_env_onboarding&&(0,t.jsxs)(r.default,{open:en,onClose:ec,children:[(0,t.jsx)(s.default,{children:"Target-base Added"}),(0,t.jsx)(a.default,{"aria-label":"close",onClick:ec,sx:{position:"absolute",right:8,top:8,color:"grey.500"},children:(0,t.jsx)(p.IoClose,{})}),(0,t.jsx)(o.default,{children:(0,t.jsx)(l.default,{children:"Please restart the Recce server."})}),(0,t.jsx)(n.default,{children:(0,t.jsx)(i.default,{color:"iochmara",variant:"contained",onClick:ec,children:"Got it!"})})]})]})}let M=()=>(0,h.useContext)(E);e.s(["LineageGraphContextProvider",()=>P,"useLineageGraphContext",0,M,"useRunsAggregated",0,()=>{let{runsAggregated:e,refetchRunsAggregated:t}=M();return[e,t]}],916955)},659004,(e,t,i)=>{t.exports=e.r(232115)},939338,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(387301),o=e.i(578509),s=e.i(446547),a=e.i(811347),l=e.i(73205),u=e.i(860223),d=e.i(519273),c=e.i(427938),h=e.i(435983),p=e.i(446519);function f(e){return(0,p.default)("MuiLink",e)}let g=(0,h.default)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var m=e.i(511507),v=e.i(896425),y=e.i(19483);let b={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},w=(0,s.styled)(c.default,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`underline${(0,o.default)(i.underline)}`],"button"===i.component&&t.button]}})((0,l.default)(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:t})=>"always"===e&&"inherit"!==t.color,style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:e,ownerState:t})=>"always"===e&&"inherit"===t.color,style:e.colorSpace?{textDecorationColor:e.alpha("currentColor",.4)}:null},...Object.entries(e.palette).filter((0,u.default)()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.alpha((e.vars||e).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g.focusVisible}`]:{outline:"auto"}}}]}))),C=t.forwardRef(function(e,s){let l=(0,d.useDefaultProps)({props:e,name:"MuiLink"}),u=(0,a.useTheme)(),{className:c,color:h="primary",component:p="a",onBlur:g,onFocus:C,TypographyClasses:x,underline:S="always",variant:k="inherit",sx:R,...E}=l,[P,M]=t.useState(!1),D={...l,color:h,component:p,focusVisible:P,underline:S,variant:k},T=(e=>{let{classes:t,component:i,focusVisible:n,underline:s}=e,a={root:["root",`underline${(0,o.default)(s)}`,"button"===i&&"button",n&&"focusVisible"]};return(0,r.default)(a,f,t)})(D);return(0,y.jsx)(w,{color:h,className:(0,i.default)(T.root,c),classes:x,component:p,onBlur:e=>{(0,n.default)(e.target)||M(!1),g&&g(e)},onFocus:e=>{(0,n.default)(e.target)&&M(!0),C&&C(e)},ref:s,ownerState:D,variant:k,...E,sx:[...void 0===b[h]?[{color:h}]:[],...Array.isArray(R)?R:[R]],style:{...E.style,..."always"===S&&"inherit"!==h&&!b[h]&&{"--Link-underlineColor":(({theme:e,ownerState:t})=>{let i=t.color;if("colorSpace"in e&&e.colorSpace){let r=(0,m.getPath)(e,`palette.${i}.main`)||(0,m.getPath)(e,`palette.${i}`)||t.color;return e.alpha(r,.4)}let r=(0,m.getPath)(e,`palette.${i}.main`,!1)||(0,m.getPath)(e,`palette.${i}`,!1)||t.color,n=(0,m.getPath)(e,`palette.${i}.mainChannel`)||(0,m.getPath)(e,`palette.${i}Channel`);return"vars"in e&&n?`rgba(${n} / 0.4)`:(0,v.alpha)(r,.4)})({theme:u,ownerState:D})}}})});e.s(["default",0,C],939338)},734786,790318,e=>{"use strict";function t(e,i=166){let r;function n(...t){let o=()=>{e.apply(this,t)};clearTimeout(r),r=setTimeout(o,i)}return n.clear=()=>{clearTimeout(r)},n}e.s(["default",()=>t],790318),e.s(["default",0,t],734786)},817360,e=>{"use strict";let t=e.i(842426).default;e.s(["default",0,t])},144758,e=>{"use strict";let t=e.i(138419).default;e.s(["default",0,t])},359143,937253,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(427447),o=e.i(446547),s=e.i(519273),a=e.i(734786),l=e.i(817360),u=e.i(144758),d=e.i(401440),c=e.i(687536),h=e.i(966196),p=e.i(435983),f=e.i(446519);function g(e){return(0,f.default)("MuiPopover",e)}(0,p.default)("MuiPopover",["root","paper"]);var m=e.i(577950);function v(e,t){if(!e)return t;function r(e,t){let i={};return Object.keys(t).forEach(r=>{var n;let o;n=t[r],o=r.charCodeAt(2),"o"===r[0]&&"n"===r[1]&&o>=65&&o<=90&&"function"==typeof n&&"function"==typeof e[r]&&(i[r]=(...i)=>{e[r](...i),t[r](...i)})}),i}if("function"==typeof e||"function"==typeof t)return n=>{let o="function"==typeof t?t(n):t,s="function"==typeof e?e({...n,...o}):e,a=(0,i.default)(n?.className,o?.className,s?.className),l=r(s,o);return{...o,...s,...l,...!!a&&{className:a},...o?.style&&s?.style&&{style:{...o.style,...s.style}},...o?.sx&&s?.sx&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(s.sx)?s.sx:[s.sx]]}}};let n=r(e,t),o=(0,i.default)(t?.className,e?.className);return{...t,...e,...n,...!!o&&{className:o},...t?.style&&e?.style&&{style:{...t.style,...e.style}},...t?.sx&&e?.sx&&{sx:[...Array.isArray(t.sx)?t.sx:[t.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}e.s(["mergeSlotProps",()=>v],937253);var y=e.i(19483);function b(e,t){let i=0;return"number"==typeof t?i=t:"center"===t?i=e.height/2:"bottom"===t&&(i=e.height),i}function w(e,t){let i=0;return"number"==typeof t?i=t:"center"===t?i=e.width/2:"right"===t&&(i=e.width),i}function C(e){return[e.horizontal,e.vertical].map(e=>"number"==typeof e?`${e}px`:e).join(" ")}function x(e){return"function"==typeof e?e():e}let S=(0,o.styled)(c.default,{name:"MuiPopover",slot:"Root"})({}),k=(0,o.styled)(h.default,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),R=t.forwardRef(function(e,o){let c=(0,s.useDefaultProps)({props:e,name:"MuiPopover"}),{action:h,anchorEl:p,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:R,anchorReference:E="anchorEl",children:P,className:M,container:D,elevation:T=8,marginThreshold:O=16,open:_,PaperProps:A={},slots:F={},slotProps:I={},transformOrigin:L={vertical:"top",horizontal:"left"},TransitionComponent:N,transitionDuration:B="auto",TransitionProps:V={},disableScrollLock:H=!1,...z}=c,j=t.useRef(),G={...c,anchorOrigin:f,anchorReference:E,elevation:T,marginThreshold:O,transformOrigin:L,TransitionComponent:N,transitionDuration:B,TransitionProps:V},W=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"],paper:["paper"]},g,t)})(G),U=t.useCallback(()=>{if("anchorPosition"===E)return R;let e=x(p),t=(e&&1===e.nodeType?e:(0,l.default)(j.current).body).getBoundingClientRect();return{top:t.top+b(t,f.vertical),left:t.left+w(t,f.horizontal)}},[p,f.horizontal,f.vertical,R,E]),$=t.useCallback(e=>({vertical:b(e,L.vertical),horizontal:w(e,L.horizontal)}),[L.horizontal,L.vertical]),q=t.useCallback(e=>{let t={width:e.offsetWidth,height:e.offsetHeight},i=$(t);if("none"===E)return{top:null,left:null,transformOrigin:C(i)};let r=U(),n=r.top-i.vertical,o=r.left-i.horizontal,s=n+t.height,a=o+t.width,l=(0,u.default)(x(p)),d=l.innerHeight-O,c=l.innerWidth-O;if(null!==O&&n<O){let e=n-O;n-=e,i.vertical+=e}else if(null!==O&&s>d){let e=s-d;n-=e,i.vertical+=e}if(null!==O&&o<O){let e=o-O;o-=e,i.horizontal+=e}else if(a>c){let e=a-c;o-=e,i.horizontal+=e}return{top:`${Math.round(n)}px`,left:`${Math.round(o)}px`,transformOrigin:C(i)}},[p,E,U,$,O]),[K,Q]=t.useState(_),X=t.useCallback(()=>{let e=j.current;if(!e)return;let t=q(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,Q(!0)},[q]);t.useEffect(()=>(H&&window.addEventListener("scroll",X),()=>window.removeEventListener("scroll",X)),[p,H,X]),t.useEffect(()=>{_&&X()}),t.useImperativeHandle(h,()=>_?{updatePosition:()=>{X()}}:null,[_,X]),t.useEffect(()=>{if(!_)return;let e=(0,a.default)(()=>{X()}),t=(0,u.default)(x(p));return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[p,_,X]);let Y=B,Z={slots:{transition:N,...F},slotProps:{transition:V,paper:A,...I}},[J,ee]=(0,m.default)("transition",{elementType:d.default,externalForwardedProps:Z,ownerState:G,getSlotProps:e=>({...e,onEntering:(t,i)=>{e.onEntering?.(t,i),X()},onExited:t=>{e.onExited?.(t),Q(!1)}}),additionalProps:{appear:!0,in:_}});"auto"!==B||J.muiSupportAuto||(Y=void 0);let et=D||(p?(0,l.default)(x(p)).body:void 0),[ei,{slots:er,slotProps:en,...eo}]=(0,m.default)("root",{ref:o,elementType:S,externalForwardedProps:{...Z,...z},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:F.backdrop},slotProps:{backdrop:v("function"==typeof I.backdrop?I.backdrop(G):I.backdrop,{invisible:!0})},container:et,open:_},ownerState:G,className:(0,i.default)(W.root,M)}),[es,ea]=(0,m.default)("paper",{ref:j,className:W.paper,elementType:k,externalForwardedProps:Z,shouldForwardComponentProp:!0,additionalProps:{elevation:T,style:K?void 0:{opacity:0}},ownerState:G});return(0,y.jsx)(ei,{...eo,...!(0,n.default)(ei)&&{slots:er,slotProps:en,disableScrollLock:H},children:(0,y.jsx)(J,{...ee,timeout:Y,children:(0,y.jsx)(es,{...ea,children:P})})})});e.s(["PopoverPaper",0,k,"default",0,R],359143)},272064,e=>{"use strict";var t=e.i(19483);e.s(["IconEdit",0,e=>(0,t.jsx)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M15.9143 1.75812L14.7422 0.585938C14.3515 0.195312 13.8397 0 13.3278 0C12.8159 0 12.304 0.195312 11.9137 0.585625L9.58593 2.91344L8.5 3.99938L0.901592 11.5975L0.504719 15.1669C0.454719 15.6163 0.80878 16 1.24847 16C1.27628 16 1.3044 15.9984 1.33253 15.9953L4.89939 15.6012L12.5006 8L13.5862 6.91437L15.914 4.58656C16.6953 3.80531 16.6953 2.53906 15.9143 1.75812ZM4.21095 14.1684L2.09909 14.4016L2.3344 12.2863L9.56062 5.06L10.53 4.09062L12.4094 5.97L11.44 6.93937L4.21095 14.1684ZM14.8534 3.52562L13.4697 4.90938L11.5906 3.03L12.9744 1.64625C13.1019 1.51875 13.2506 1.49969 13.3278 1.49969C13.405 1.49969 13.554 1.51875 13.6812 1.64625L14.8534 2.81844C15.0484 3.01375 15.0484 3.33094 14.8534 3.52562Z",fill:"currentColor"})}),"IconExport",0,e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("g",{clipPath:"url(#clip0_1479_25102)",children:(0,t.jsx)("path",{d:"M-1.88399 8.72062L0.358816 6.46094C0.594752 6.22344 1.00006 6.39031 1.00006 6.725V8.2525H4.00005V4.12438C4.00005 3.7275 4.16161 3.34313 4.44286 3.06219L7.06441 0.440625C7.34566 0.159375 7.72691 0 8.12347 0H14.5003C15.3281 0.003125 16 0.675 16 1.50281V14.5003C16 15.3281 15.3281 16 14.5003 16H5.50223C4.67411 16 4.00005 15.3281 4.00005 14.5003V11.2522H5.50005V14.5003H14.5003V1.50281H9.50128V4.75219C9.50128 5.16781 9.1669 5.50187 8.75128 5.50187H5.50005V8.25219H10.625C10.8322 8.25219 11 8.42 11 8.62719V9.37719C11 9.58438 10.8322 9.75219 10.625 9.75219H1.00006V11.2797C1.00006 11.6144 0.594752 11.7813 0.358816 11.5438L-1.88399 9.28406C-2.03867 9.12813 -2.03867 8.87656 -1.88399 8.72062ZM8.0016 4.00219V1.62469L5.62379 4.00219H8.0016Z",fill:"currentColor"})}),(0,t.jsx)("g",{clipPath:"url(#clip1_1479_25102)",children:(0,t.jsx)("path",{d:"M0.103056 8.72062L2.09667 6.46094C2.30639 6.22344 2.66667 6.39031 2.66667 6.725V8.2525H5.33333V4.12438C5.33333 3.7275 5.47694 3.34313 5.72694 3.06219L8.05722 0.440625C8.30722 0.159375 8.64611 0 8.99861 0H14.6669C15.4028 0.003125 16 0.675 16 1.50281V14.5003C16 15.3281 15.4028 16 14.6669 16H6.66861C5.9325 16 5.33333 15.3281 5.33333 14.5003V11.2522H6.66667V14.5003H14.6669V1.50281H10.2233V4.75219C10.2233 5.16781 9.92611 5.50187 9.55667 5.50187H6.66667V8.25219H11.2222C11.4064 8.25219 11.5556 8.42 11.5556 8.62719V9.37719C11.5556 9.58438 11.4064 9.75219 11.2222 9.75219H2.66667V11.2797C2.66667 11.6144 2.30639 11.7813 2.09667 11.5438L0.103056 9.28406C-0.0344448 9.12813 -0.0344448 8.87656 0.103056 8.72062ZM8.89028 4.00219V1.62469L6.77666 4.00219H8.89028Z",fill:"currentColor"})}),(0,t.jsxs)("defs",{children:[(0,t.jsx)("clipPath",{id:"clip0_1479_25102",children:(0,t.jsx)("rect",{width:"13",height:"16",fill:"white",transform:"matrix(-1 0 0 1 16 0)"})}),(0,t.jsx)("clipPath",{id:"clip1_1479_25102",children:(0,t.jsx)("rect",{width:"3",height:"16",fill:"white"})})]})]}),"IconImport",0,e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("g",{clipPath:"url(#clip0_1426_8619)",children:(0,t.jsx)("path",{d:"M15.5572 3.06188L12.9356 0.440625C12.6544 0.159375 12.2731 0 11.8766 0H5.49969C4.67188 0.003125 4 0.675 4 1.50281V8.25219H0.375C0.167812 8.25219 0 8.42 0 8.62719V9.37719C0 9.58438 0.167812 9.75219 0.375 9.75219H9V11.2797C9 11.6144 9.40531 11.7812 9.64125 11.5437L11.8841 9.28406C12.0388 9.12813 12.0388 8.87656 11.8841 8.72062L9.64125 6.46094C9.40531 6.22344 9 6.39031 9 6.725V8.2525H5.49969V1.50281H10.4987V4.75219C10.4987 5.16781 10.8331 5.50187 11.2487 5.50187H14.5V14.5003H5.49969V11.2522H4V14.5003C4 15.3281 4.67188 16 5.49969 16H14.4978C15.3259 16 16 15.3281 16 14.5003V4.12406C16 3.7275 15.8384 3.34313 15.5572 3.06188ZM11.9984 4.00219V1.62469L14.3763 4.00219H11.9984Z",fill:"black"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_1426_8619",children:(0,t.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}),"IconInfo",0,e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M7.26326 6.5462H8.71794V12.3642H7.26326V6.5462ZM7.9906 3.1102C7.43278 3.1102 6.97888 3.5641 6.97888 4.12192C6.97888 4.67974 7.43278 5.13364 7.9906 5.13364C8.54842 5.13364 9.00232 4.67974 9.00232 4.12192C9.00232 3.5641 8.54842 3.1102 7.9906 3.1102ZM16 8C16 12.411 12.411 16 8 16C3.589 16 0 12.411 0 8C0 3.589 3.589 0 8 0C12.411 0 16 3.589 16 8ZM14.5453 8C14.5453 4.3906 11.6093 1.4546 7.99992 1.4546C4.39052 1.4546 1.45452 4.3914 1.45452 8.0006C1.45452 11.6098 4.39052 14.546 7.99992 14.546C11.6093 14.546 14.5453 11.6092 14.5453 8.0006V8Z",fill:"currentColor"})}),"IconSave",0,e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("path",{d:"M14.5607 4.06066L11.9393 1.43934C11.658 1.15804 11.2765 1 10.8787 1H2.5C1.67156 1 1 1.67156 1 2.5V13.5C1 14.3284 1.67156 15 2.5 15H13.5C14.3284 15 15 14.3284 15 13.5V5.12131C15 4.72349 14.842 4.34196 14.5607 4.06066ZM9.5 2.5V5H5.5V2.5H9.5ZM13.3125 13.5H2.6875C2.63777 13.5 2.59008 13.4802 2.55492 13.4451C2.51975 13.4099 2.5 13.3622 2.5 13.3125V2.6875C2.5 2.63777 2.51975 2.59008 2.55492 2.55492C2.59008 2.51975 2.63777 2.5 2.6875 2.5H4V5.75C4 6.16422 4.33578 6.5 4.75 6.5H10.25C10.6642 6.5 11 6.16422 11 5.75V2.62131L13.4451 5.06641C13.4625 5.08382 13.4763 5.10449 13.4857 5.12724C13.4952 5.14999 13.5 5.17438 13.5 5.199V13.3125C13.5 13.3622 13.4802 13.4099 13.4451 13.4451C13.4099 13.4802 13.3622 13.5 13.3125 13.5ZM8 7.25C6.48366 7.25 5.25 8.48366 5.25 10C5.25 11.5163 6.48366 12.75 8 12.75C9.51634 12.75 10.75 11.5163 10.75 10C10.75 8.48366 9.51634 7.25 8 7.25ZM8 11.25C7.31075 11.25 6.75 10.6892 6.75 10C6.75 9.31075 7.31075 8.75 8 8.75C8.68925 8.75 9.25 9.31075 9.25 10C9.25 10.6892 8.68925 11.25 8 11.25Z",fill:"currentColor"})}),"IconSync",0,e=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("g",{clipPath:"url(#clip0_1479_25070)",children:(0,t.jsx)("path",{d:"M15.625 0.25H14.759C14.5484 0.25 14.3791 0.423375 14.3841 0.633937L14.4575 3.71441C13.0691 1.62634 10.6955 0.25 8 0.25C4.21291 0.25 1.06041 2.96638 0.38425 6.557C0.340875 6.78728 0.518875 7 0.753219 7H1.64622C1.82353 7 1.97566 6.87556 2.013 6.70222C2.60753 3.9415 5.05991 1.875 8 1.875C10.4858 1.875 12.6232 3.35256 13.5836 5.47819L9.63394 5.38416C9.42341 5.37916 9.25 5.54844 9.25 5.75906V6.625C9.25 6.83209 9.41791 7 9.625 7H15.625C15.8321 7 16 6.83209 16 6.625V0.625C16 0.417906 15.8321 0.25 15.625 0.25ZM15.2468 9H14.3538C14.1765 9 14.0243 9.12444 13.987 9.29778C13.3925 12.0585 10.9401 14.125 8 14.125C5.51419 14.125 3.37681 12.6474 2.41637 10.5218L6.36606 10.6158C6.57659 10.6208 6.75 10.4516 6.75 10.2409V9.375C6.75 9.16791 6.58209 9 6.375 9H0.375C0.167906 9 0 9.16791 0 9.375V15.375C0 15.5821 0.167906 15.75 0.375 15.75H1.24097C1.45156 15.75 1.62088 15.5766 1.61588 15.3661L1.54253 12.2856C2.93087 14.3737 5.3045 15.75 8 15.75C11.7871 15.75 14.9396 13.0336 15.6158 9.443C15.6591 9.21272 15.4811 9 15.2468 9Z",fill:"currentColor"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_1479_25070",children:(0,t.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]})])},976452,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(76130),n=e.i(468836),o=e.i(11321),s=e.i(772510),a=e.i(845209),l=e.i(73371),u=e.i(939338),d=e.i(359143),c=e.i(336277),h=e.i(427938),p=e.i(187725),f=e.i(603338),g=e.i(272064),m=e.i(203158);e.s(["RunModal",0,({isOpen:e,onClose:v,onExecute:y,type:b,title:w,params:C,RunForm:x})=>{let[S,k]=(0,p.useState)(C??{}),[R,E]=(0,p.useState)(null),[P,M]=(0,p.useState)(!1),D={value_diff:"https://docs.datarecce.io/features/lineage/#value-diff",profile_diff:"https://docs.datarecce.io/features/lineage/#profile-diff",histogram_diff:"https://docs.datarecce.io/features/lineage/#histogram-diff",top_k_diff:"https://docs.datarecce.io/features/lineage/#top-k-diff"}[b]||null,T=(0,p.useRef)(!1),O=()=>{!T.current&&(0,m.isExploreAction)(b)&&(0,m.trackExploreActionForm)({action:b,event:m.EXPLORE_FORM_EVENT.CANCEL}),T.current=!1,v()};return(0,t.jsxs)(n.default,{open:e,onClose:O,maxWidth:"sm",fullWidth:!0,scroll:"paper",slotProps:{paper:{sx:{height:"75%",minHeight:"400px"}}},children:[(0,t.jsxs)(a.default,{sx:{display:"flex",alignItems:"center"},children:[w," ",D&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{size:"small","aria-label":"Click this button to learn more about the SQL behind",onMouseEnter:e=>E(e.currentTarget),onMouseLeave:()=>E(null),onClick:()=>window.open(D,"_blank"),children:(0,t.jsx)(i.default,{component:g.IconInfo,sx:{fontSize:"16px"}})}),(0,t.jsx)(d.default,{open:!!R,anchorEl:R,onClose:()=>E(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},disableRestoreFocus:!0,sx:{pointerEvents:"none"},slotProps:{paper:{sx:{bgcolor:"black",color:"white",p:1}}},children:(0,t.jsxs)(h.default,{sx:{fontSize:"0.875rem"},children:["Click"," ",(0,t.jsx)(u.default,{href:D,target:"_blank",sx:{textDecoration:"underline",color:"white","&:hover":{color:"iochmara.300"}},children:"here"})," ","to learn more about the SQL behind"]})})]})]}),(0,t.jsx)(l.default,{"aria-label":"close",onClick:O,sx:{position:"absolute",right:8,top:8,color:"grey.500"},children:(0,t.jsx)(f.IoClose,{})}),(0,t.jsx)(s.default,{sx:{p:0,overflow:"auto",borderTop:"1px solid lightgray",borderBottom:"1px solid lightgray"},children:(0,t.jsx)(i.default,{sx:{contain:"layout"},children:x&&(0,t.jsx)(x,{params:S,onParamsChanged:k,setIsReadyToExecute:M})})}),(0,t.jsx)(o.default,{children:(0,t.jsx)(c.default,{direction:"row",spacing:"10px",children:(0,t.jsx)(r.default,{disabled:!P,color:"iochmara",variant:"contained",onClick:()=>{T.current=!0,(0,m.isExploreAction)(b)&&(0,m.trackExploreActionForm)({action:b,event:m.EXPLORE_FORM_EVENT.EXECUTE}),y(b,S)},children:"Execute"})})})]})}])},901407,897716,21292,e=>{"use strict";var t=e.i(955343);function i(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3v16a2 2 0 0 0 2 2h16"},child:[]},{tag:"rect",attr:{x:"7",y:"13",width:"9",height:"4",rx:"1"},child:[]},{tag:"rect",attr:{x:"7",y:"5",width:"12",height:"4",rx:"1"},child:[]}]})(e)}function r(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h6v6"},child:[]},{tag:"path",attr:{d:"M10 14 21 3"},child:[]},{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},child:[]}]})(e)}function n(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17h2v.5h-1v1h1v.5h-2v1h3v-4h-3zm1-9h1V4h-2v1h1zm-1 3h1.8L18 13.1v.9h3v-1h-1.8l1.8-2.1V10h-3zM2 5h14v2H2zm0 12h14v2H2zm0-6h14v2H2z"},child:[]}]})(e)}function o(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 9v2h-3V9H8.5V7H11V1H4v6h2.5v2H4v6h2.5v2H4v6h7v-6H8.5v-2H11v-2h3v2h7V9h-7z"},child:[]}]})(e)}function s(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z"},child:[]},{tag:"path",attr:{d:"M9 17h-2"},child:[]},{tag:"path",attr:{d:"M13 12h-6"},child:[]},{tag:"path",attr:{d:"M11 7h-4"},child:[]}]})(e)}function a(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M19 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M5 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M7 12h3l3.5 6h3.5"},child:[]},{tag:"path",attr:{d:"M17 6h-3.5l-3.5 6"},child:[]}]})(e)}function l(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3v18h18"},child:[]},{tag:"path",attr:{d:"M20 18v3"},child:[]},{tag:"path",attr:{d:"M16 16v5"},child:[]},{tag:"path",attr:{d:"M12 13v8"},child:[]},{tag:"path",attr:{d:"M8 16v5"},child:[]},{tag:"path",attr:{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5"},child:[]}]})(e)}function u(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.615 20h-2.615a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8"},child:[]},{tag:"path",attr:{d:"M14 19l2 2l4 -4"},child:[]},{tag:"path",attr:{d:"M9 8h4"},child:[]},{tag:"path",attr:{d:"M9 12h2"},child:[]}]})(e)}function d(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"},child:[]},{tag:"path",attr:{d:"M9 15l3 -3l3 3"},child:[]},{tag:"path",attr:{d:"M12 12l0 9"},child:[]}]})(e)}function c(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M11.192 17.966c-3.242 -.28 -5.972 -2.269 -8.192 -5.966c2.4 -4 5.4 -6 9 -6c3.326 0 6.14 1.707 8.442 5.122"},child:[]},{tag:"path",attr:{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z"},child:[]}]})(e)}function h(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M12 18c-.328 0 -.652 -.017 -.97 -.05c-3.172 -.332 -5.85 -2.315 -8.03 -5.95c2.4 -4 5.4 -6 9 -6c3.465 0 6.374 1.853 8.727 5.558"},child:[]},{tag:"path",attr:{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]},{tag:"path",attr:{d:"M20.2 20.2l1.8 1.8"},child:[]}]})(e)}function p(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5l0 14"},child:[]},{tag:"path",attr:{d:"M5 12l14 0"},child:[]}]})(e)}function f(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 8a2 2 0 0 1 2 2v4a2 2 0 1 1 -4 0v-4a2 2 0 0 1 2 -2z"},child:[]},{tag:"path",attr:{d:"M17 8v8h4"},child:[]},{tag:"path",attr:{d:"M13 15l1 1"},child:[]},{tag:"path",attr:{d:"M3 15a1 1 0 0 0 1 1h2a1 1 0 0 0 1 -1v-2a1 1 0 0 0 -1 -1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1"},child:[]}]})(e)}e.s(["LuChartBarBig",()=>i,"LuExternalLink",()=>r],901407),e.s(["MdFormatListNumberedRtl",()=>n,"MdSchema",()=>o],897716),e.s(["TbAlignBoxLeftStretch",()=>s,"TbBrandStackshare",()=>a,"TbChartHistogram",()=>l,"TbChecklist",()=>u,"TbCloudUpload",()=>d,"TbEyeEdit",()=>c,"TbEyeSearch",()=>h,"TbPlus",()=>p,"TbSql",()=>f],21292)},319557,e=>{"use strict";function t(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function i(e,r=!1){return e&&(t(e.value)&&""!==e.value||r&&t(e.defaultValue)&&""!==e.defaultValue)}function r(e){return e.startAdornment}e.s(["isAdornedStart",()=>r,"isFilled",()=>i])},624905,e=>{"use strict";var t=e.i(187725);function i(e,i){return t.isValidElement(e)&&-1!==i.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)}e.s(["default",()=>i])},981335,e=>{"use strict";let t=e.i(624905).default;e.s(["default",0,t])},895331,e=>{"use strict";let t=e.i(187725).createContext(void 0);e.s(["default",0,t])},992089,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(446547),o=e.i(519273),s=e.i(319557),a=e.i(578509),l=e.i(981335),u=e.i(895331),d=e.i(435983),c=e.i(446519);function h(e){return(0,c.default)("MuiFormControl",e)}(0,d.default)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var p=e.i(19483);let f=(0,n.styled)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[`margin${(0,a.default)(i.margin)}`],i.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),g=t.forwardRef(function(e,n){let d,c=(0,o.useDefaultProps)({props:e,name:"MuiFormControl"}),{children:g,className:m,color:v="primary",component:y="div",disabled:b=!1,error:w=!1,focused:C,fullWidth:x=!1,hiddenLabel:S=!1,margin:k="none",required:R=!1,size:E="medium",variant:P="outlined",...M}=c,D={...c,color:v,component:y,disabled:b,error:w,fullWidth:x,hiddenLabel:S,margin:k,required:R,size:E,variant:P},T=(e=>{let{classes:t,margin:i,fullWidth:n}=e,o={root:["root","none"!==i&&`margin${(0,a.default)(i)}`,n&&"fullWidth"]};return(0,r.default)(o,h,t)})(D),[O,_]=t.useState(()=>{let e=!1;return g&&t.Children.forEach(g,t=>{if(!(0,l.default)(t,["Input","Select"]))return;let i=(0,l.default)(t,["Select"])?t.props.input:t;i&&(0,s.isAdornedStart)(i.props)&&(e=!0)}),e}),[A,F]=t.useState(()=>{let e=!1;return g&&t.Children.forEach(g,t=>{(0,l.default)(t,["Input","Select"])&&((0,s.isFilled)(t.props,!0)||(0,s.isFilled)(t.props.inputProps,!0))&&(e=!0)}),e}),[I,L]=t.useState(!1);b&&I&&L(!1);let N=void 0===C||b?I:C;t.useRef(!1);let B=t.useCallback(()=>{F(!0)},[]),V=t.useCallback(()=>{F(!1)},[]),H=t.useMemo(()=>({adornedStart:O,setAdornedStart:_,color:v,disabled:b,error:w,filled:A,focused:N,fullWidth:x,hiddenLabel:S,size:E,onBlur:()=>{L(!1)},onFocus:()=>{L(!0)},onEmpty:V,onFilled:B,registerEffect:d,required:R,variant:P}),[O,v,b,w,A,N,x,S,d,V,B,R,E,P]);return(0,p.jsx)(u.default.Provider,{value:H,children:(0,p.jsx)(f,{as:y,ownerState:D,className:(0,i.default)(T.root,m),ref:n,...M,children:g})})});e.s(["default",0,g],992089)},854816,e=>{"use strict";function t({props:e,states:t,muiFormControl:i}){return t.reduce((t,r)=>(t[r]=e[r],i&&void 0===e[r]&&(t[r]=i[r]),t),{})}e.s(["default",()=>t])},331943,e=>{"use strict";var t=e.i(187725),i=e.i(895331);function r(){return t.useContext(i.default)}e.s(["default",()=>r])},384339,883124,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(854816),o=e.i(331943),s=e.i(578509),a=e.i(446547),l=e.i(73205),u=e.i(860223),d=e.i(519273),c=e.i(435983),h=e.i(446519);function p(e){return(0,h.default)("MuiFormLabel",e)}let f=(0,c.default)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);e.s(["default",0,f,"getFormLabelUtilityClasses",()=>p],883124);var g=e.i(19483);let m=(0,a.styled)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,"secondary"===i.color&&t.colorSecondary,i.filled&&t.filled]}})((0,l.default)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter((0,u.default)()).map(([t])=>({props:{color:t},style:{[`&.${f.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${f.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),v=(0,a.styled)("span",{name:"MuiFormLabel",slot:"Asterisk"})((0,l.default)(({theme:e})=>({[`&.${f.error}`]:{color:(e.vars||e).palette.error.main}}))),y=t.forwardRef(function(e,t){let a=(0,d.useDefaultProps)({props:e,name:"MuiFormLabel"}),{children:l,className:u,color:c,component:h="label",disabled:f,error:y,filled:b,focused:w,required:C,...x}=a,S=(0,o.default)(),k=(0,n.default)({props:a,muiFormControl:S,states:["color","required","focused","disabled","error","filled"]}),R={...a,color:k.color||"primary",component:h,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required},E=(e=>{let{classes:t,color:i,focused:n,disabled:o,error:a,filled:l,required:u}=e,d={root:["root",`color${(0,s.default)(i)}`,o&&"disabled",a&&"error",l&&"filled",n&&"focused",u&&"required"],asterisk:["asterisk",a&&"error"]};return(0,r.default)(d,p,t)})(R);return(0,g.jsxs)(m,{as:h,ownerState:R,className:(0,i.default)(E.root,u),ref:t,...x,children:[l,k.required&&(0,g.jsxs)(v,{ownerState:R,"aria-hidden":!0,className:E.asterisk,children:["","*"]})]})});e.s(["default",0,y],384339)},176264,664271,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(578509),o=e.i(435983),s=e.i(446519);function a(e){return(0,s.default)("MuiNativeSelect",e)}let l=(0,o.default)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);e.s(["default",0,l,"getNativeSelectUtilityClasses",()=>a],664271);var u=e.i(446547),d=e.i(451962),c=e.i(19483);let h=(0,u.styled)("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${l.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:e})=>"filled"!==e.variant&&"outlined"!==e.variant,style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),p=(0,u.styled)(h,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:d.default,overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.select,t[i.variant],i.error&&t.error,{[`&.${l.multiple}`]:t.multiple}]}})({}),f=(0,u.styled)("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${l.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),g=(0,u.styled)(f,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${(0,n.default)(i.variant)}`],i.open&&t.iconOpen]}})({}),m=t.forwardRef(function(e,o){let{className:s,disabled:l,error:u,IconComponent:d,inputRef:h,variant:f="standard",...m}=e,v={...e,disabled:l,variant:f,error:u},y=(e=>{let{classes:t,variant:i,disabled:o,multiple:s,open:l,error:u}=e,d={select:["select",i,o&&"disabled",s&&"multiple",u&&"error"],icon:["icon",`icon${(0,n.default)(i)}`,l&&"iconOpen",o&&"disabled"]};return(0,r.default)(d,a,t)})(v);return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(p,{ownerState:v,className:(0,i.default)(y.select,s),disabled:l,ref:h||o,...m}),e.multiple?null:(0,c.jsx)(g,{as:d,ownerState:v,className:y.icon})]})});e.s(["StyledSelectIcon",0,f,"StyledSelectSelect",0,h,"default",0,m],176264)},861207,e=>{"use strict";var t=e.i(36297),i=e.i(19483);let r=(0,t.default)((0,i.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");e.s(["default",0,r])},360550,e=>{"use strict";var t=e.i(187725),i=e.i(790318),r=e.i(995044),n=e.i(86396),o=e.i(554191),s=e.i(138419),a=e.i(19483);function l(e){return parseInt(e,10)||0}let u={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function d(e){return function(e){for(let t in e)return!1;return!0}(e)||0===e.outerHeightStyle&&!e.overflowing}let c=t.forwardRef(function(e,c){let{onChange:h,maxRows:p,minRows:f=1,style:g,value:m,...v}=e,{current:y}=t.useRef(null!=m),b=t.useRef(null),w=(0,r.default)(c,b),C=t.useRef(null),x=t.useRef(null),S=t.useCallback(()=>{let t=b.current,i=x.current;if(!t||!i)return;let r=(0,s.default)(t).getComputedStyle(t);if("0px"===r.width)return{outerHeightStyle:0,overflowing:!1};i.style.width=r.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");let n=r.boxSizing,o=l(r.paddingBottom)+l(r.paddingTop),a=l(r.borderBottomWidth)+l(r.borderTopWidth),u=i.scrollHeight;i.value="x";let d=i.scrollHeight,c=u;return f&&(c=Math.max(Number(f)*d,c)),p&&(c=Math.min(Number(p)*d,c)),{outerHeightStyle:(c=Math.max(c,d))+("border-box"===n?o+a:0),overflowing:1>=Math.abs(c-u)}},[p,f,e.placeholder]),k=(0,o.default)(()=>{let e=b.current,t=S();if(!e||!t||d(t))return!1;let i=t.outerHeightStyle;return null!=C.current&&C.current!==i}),R=t.useCallback(()=>{let e=b.current,t=S();if(!e||!t||d(t))return;let i=t.outerHeightStyle;C.current!==i&&(C.current=i,e.style.height=`${i}px`),e.style.overflow=t.overflowing?"hidden":""},[S]),E=t.useRef(-1);return(0,n.default)(()=>{let e,t=(0,i.default)(R),r=b?.current;if(!r)return;let n=(0,s.default)(r);return n.addEventListener("resize",t),"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(()=>{k()&&(e.unobserve(r),cancelAnimationFrame(E.current),R(),E.current=requestAnimationFrame(()=>{e.observe(r)}))})).observe(r),()=>{t.clear(),cancelAnimationFrame(E.current),n.removeEventListener("resize",t),e&&e.disconnect()}},[S,R,k]),(0,n.default)(()=>{R()}),(0,a.jsxs)(t.Fragment,{children:[(0,a.jsx)("textarea",{value:m,onChange:e=>{y||R();let t=e.target,i=t.value.length,r=t.value.endsWith("\n"),n=t.selectionStart===i;r&&n&&t.setSelectionRange(i,i),h&&h(e)},ref:w,rows:f,style:g,...v}),(0,a.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:x,tabIndex:-1,style:{...u,...g,paddingTop:0,paddingBottom:0}})]})});e.s(["default",0,c])},921301,e=>{"use strict";let t=e.i(86396).default;e.s(["default",0,t])},973250,278903,330978,e=>{"use strict";e.i(316575);var t,i=e.i(187725),r=e.i(778024),n=e.i(456132),o=e.i(862088),s=e.i(7284),a=e.i(427447),l=e.i(360550),u=e.i(854816),d=e.i(895331),c=e.i(331943),h=e.i(446547),p=e.i(854920),f=e.i(73205),g=e.i(519273),m=e.i(578509),v=e.i(723938),y=e.i(921301),b=e.i(319557),w=e.i(435983),C=e.i(446519);function x(e){return(0,C.default)("MuiInputBase",e)}let S=(0,w.default)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var k=e.i(19483);let R=(e,t)=>{let{ownerState:i}=e;return[t.root,i.formControl&&t.formControl,i.startAdornment&&t.adornedStart,i.endAdornment&&t.adornedEnd,i.error&&t.error,"small"===i.size&&t.sizeSmall,i.multiline&&t.multiline,i.color&&t[`color${(0,m.default)(i.color)}`],i.fullWidth&&t.fullWidth,i.hiddenLabel&&t.hiddenLabel]},E=(e,t)=>{let{ownerState:i}=e;return[t.input,"small"===i.size&&t.inputSizeSmall,i.multiline&&t.inputMultiline,"search"===i.type&&t.inputTypeSearch,i.startAdornment&&t.inputAdornedStart,i.endAdornment&&t.inputAdornedEnd,i.hiddenLabel&&t.inputHiddenLabel]},P=(0,h.styled)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:R})((0,f.default)(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${S.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&"small"===t,style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),M=(0,h.styled)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:E})((0,f.default)(({theme:e})=>{let t="light"===e.palette.mode,i={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},n=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${S.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${S.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:e})=>!e.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:e})=>e.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),D=(0,p.globalCss)({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),T=i.forwardRef(function(e,n){let h=(0,g.useDefaultProps)({props:e,name:"MuiInputBase"}),{"aria-describedby":p,autoComplete:f,autoFocus:w,className:C,color:S,components:R={},componentsProps:E={},defaultValue:T,disabled:O,disableInjectingGlobalStyles:_,endAdornment:A,error:F,fullWidth:I=!1,id:L,inputComponent:N="input",inputProps:B={},inputRef:V,margin:H,maxRows:z,minRows:j,multiline:G=!1,name:W,onBlur:U,onChange:$,onClick:q,onFocus:K,onKeyDown:Q,onKeyUp:X,placeholder:Y,readOnly:Z,renderSuffix:J,rows:ee,size:et,slotProps:ei={},slots:er={},startAdornment:en,type:eo="text",value:es,...ea}=h,el=null!=B.value?B.value:es,{current:eu}=i.useRef(null!=el),ed=i.useRef(),ec=i.useCallback(e=>{},[]),eh=(0,v.default)(ed,V,B.ref,ec),[ep,ef]=i.useState(!1),eg=(0,c.default)(),em=(0,u.default)({props:h,muiFormControl:eg,states:["color","disabled","error","hiddenLabel","size","required","filled"]});em.focused=eg?eg.focused:ep,i.useEffect(()=>{!eg&&O&&ep&&(ef(!1),U&&U())},[eg,O,ep,U]);let ev=eg&&eg.onFilled,ey=eg&&eg.onEmpty,eb=i.useCallback(e=>{(0,b.isFilled)(e)?ev&&ev():ey&&ey()},[ev,ey]);(0,y.default)(()=>{eu&&eb({value:el})},[el,eb,eu]),i.useEffect(()=>{eb(ed.current)},[]);let ew=N,eC=B;G&&"input"===ew&&(eC=ee?{type:void 0,minRows:ee,maxRows:ee,...eC}:{type:void 0,maxRows:z,minRows:j,...eC},ew=l.default),i.useEffect(()=>{eg&&eg.setAdornedStart(!!en)},[eg,en]);let ex={...h,color:em.color||"primary",disabled:em.disabled,endAdornment:A,error:em.error,focused:em.focused,formControl:eg,fullWidth:I,hiddenLabel:em.hiddenLabel,multiline:G,size:em.size,startAdornment:en,type:eo},eS=(e=>{let{classes:t,color:i,disabled:n,error:o,endAdornment:s,focused:a,formControl:l,fullWidth:u,hiddenLabel:d,multiline:c,readOnly:h,size:p,startAdornment:f,type:g}=e,v={root:["root",`color${(0,m.default)(i)}`,n&&"disabled",o&&"error",u&&"fullWidth",a&&"focused",l&&"formControl",p&&"medium"!==p&&`size${(0,m.default)(p)}`,c&&"multiline",f&&"adornedStart",s&&"adornedEnd",d&&"hiddenLabel",h&&"readOnly"],input:["input",n&&"disabled","search"===g&&"inputTypeSearch",c&&"inputMultiline","small"===p&&"inputSizeSmall",d&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return(0,r.default)(v,x,t)})(ex),ek=er.root||R.Root||P,eR=ei.root||E.root||{},eE=er.input||R.Input||M;return eC={...eC,...ei.input??E.input},(0,k.jsxs)(i.Fragment,{children:[!_&&"function"==typeof D&&(t||(t=(0,k.jsx)(D,{}))),(0,k.jsxs)(ek,{...eR,ref:n,onClick:e=>{ed.current&&e.currentTarget===e.target&&ed.current.focus(),q&&q(e)},...ea,...!(0,a.default)(ek)&&{ownerState:{...ex,...eR.ownerState}},className:(0,s.default)(eS.root,eR.className,C,Z&&"MuiInputBase-readOnly"),children:[en,(0,k.jsx)(d.default.Provider,{value:null,children:(0,k.jsx)(eE,{"aria-invalid":em.error,"aria-describedby":p,autoComplete:f,autoFocus:w,defaultValue:T,disabled:em.disabled,id:L,onAnimationStart:e=>{eb("mui-auto-fill-cancel"===e.animationName?ed.current:{value:"x"})},name:W,placeholder:Y,readOnly:Z,required:em.required,rows:ee,value:el,onKeyDown:Q,onKeyUp:X,type:eo,...eC,...!(0,a.default)(eE)&&{as:ew,ownerState:{...ex,...eC.ownerState}},ref:eh,className:(0,s.default)(eS.input,eC.className,Z&&"MuiInputBase-readOnly"),onBlur:e=>{U&&U(e),B.onBlur&&B.onBlur(e),eg&&eg.onBlur?eg.onBlur(e):ef(!1)},onChange:(e,...t)=>{if(!eu){let t=e.target||ed.current;if(null==t)throw Error((0,o.default)(1));eb({value:t.value})}B.onChange&&B.onChange(e,...t),$&&$(e,...t)},onFocus:e=>{K&&K(e),B.onFocus&&B.onFocus(e),eg&&eg.onFocus?eg.onFocus(e):ef(!0)}})}),A,J?J({...em,startAdornment:en}):null]})]})});e.s(["InputBaseInput",0,M,"InputBaseRoot",0,P,"default",0,T,"inputOverridesResolver",0,E,"rootOverridesResolver",0,R],278903);var O=e.i(451962),_=e.i(860223);function A(e){return(0,C.default)("MuiInput",e)}e.s(["inputBaseClasses",0,S],330978);let F={...S,...(0,w.default)("MuiInput",["root","underline","input"])},I=(0,h.styled)(P,{shouldForwardProp:e=>(0,O.default)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[...R(e,t),!i.disableUnderline&&t.underline]}})((0,f.default)(({theme:e})=>{let t="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(t=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:e})=>e.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:e})=>!e.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${F.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${F.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${F.disabled}, .${F.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${F.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter((0,_.default)()).map(([t])=>({props:{color:t,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t].main}`}}}))]}})),L=(0,h.styled)(M,{name:"MuiInput",slot:"Input",overridesResolver:E})({}),N=i.forwardRef(function(e,t){let i=(0,g.useDefaultProps)({props:e,name:"MuiInput"}),{disableUnderline:o=!1,components:s={},componentsProps:a,fullWidth:l=!1,inputComponent:u="input",multiline:d=!1,slotProps:c,slots:h={},type:p="text",...f}=i,m=(e=>{let{classes:t,disableUnderline:i}=e,n=(0,r.default)({root:["root",!i&&"underline"],input:["input"]},A,t);return{...t,...n}})(i),v={root:{ownerState:{disableUnderline:o}}},y=c??a?(0,n.default)(c??a,v):v,b=h.root??s.Root??I,w=h.input??s.Input??L;return(0,k.jsx)(T,{slots:{root:b,input:w},slotProps:y,fullWidth:l,inputComponent:u,multiline:d,ref:t,type:p,...f,classes:m})});N.muiName="Input",e.s(["default",0,N],973250)},320182,e=>{"use strict";var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(176264),o=e.i(854816),s=e.i(331943),a=e.i(861207),l=e.i(973250),u=e.i(519273),d=e.i(664271),c=e.i(19483);let h=(0,c.jsx)(l.default,{}),p=t.forwardRef(function(e,l){let p=(0,u.useDefaultProps)({name:"MuiNativeSelect",props:e}),{className:f,children:g,classes:m={},IconComponent:v=a.default,input:y=h,inputProps:b,variant:w,...C}=p,x=(0,s.default)(),S=(0,o.default)({props:p,muiFormControl:x,states:["variant"]}),k=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},d.getNativeSelectUtilityClasses,t)})({...p,classes:m}),{root:R,...E}=m;return(0,c.jsx)(t.Fragment,{children:t.cloneElement(y,{inputComponent:n.default,inputProps:{children:g,classes:E,IconComponent:v,variant:S.variant,type:void 0,...b,...y?y.props.inputProps:{}},ref:l,...C,className:(0,i.default)(k.root,y.props.className,f)})})});p.muiName="Select",e.s(["default",0,p])},228337,(e,t,i)=>{(function(){var r,n="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",a=1/0,l=0/0,u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],d="[object Arguments]",c="[object Array]",h="[object Boolean]",p="[object Date]",f="[object Error]",g="[object Function]",m="[object GeneratorFunction]",v="[object Map]",y="[object Number]",b="[object Object]",w="[object Promise]",C="[object RegExp]",x="[object Set]",S="[object String]",k="[object Symbol]",R="[object WeakMap]",E="[object ArrayBuffer]",P="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",T="[object Int8Array]",O="[object Int16Array]",_="[object Int32Array]",A="[object Uint8Array]",F="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",N=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,j=RegExp(H.source),G=RegExp(z.source),W=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(X.source),Z=/^\s+/,J=/\s/,ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,et=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,eo=/\\(\\)?/g,es=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ea=/\w*$/,el=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ed=/^\[object .+?Constructor\]$/,ec=/^0o[0-7]+$/i,eh=/^(?:0|[1-9]\d*)$/,ep=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ef=/($^)/,eg=/['\n\r\u2028\u2029\\]/g,em="\ud800-\udfff",ev="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ey="\\u2700-\\u27bf",eb="a-z\\xdf-\\xf6\\xf8-\\xff",ew="A-Z\\xc0-\\xd6\\xd8-\\xde",eC="\\ufe0e\\ufe0f",ex="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eS="[']",ek="["+ex+"]",eR="["+ev+"]",eE="["+eb+"]",eP="[^"+em+ex+"\\d+"+ey+eb+ew+"]",eM="\ud83c[\udffb-\udfff]",eD="[^"+em+"]",eT="(?:\ud83c[\udde6-\uddff]){2}",eO="[\ud800-\udbff][\udc00-\udfff]",e_="["+ew+"]",eA="\\u200d",eF="(?:"+eE+"|"+eP+")",eI="(?:"+e_+"|"+eP+")",eL="(?:"+eS+"(?:d|ll|m|re|s|t|ve))?",eN="(?:"+eS+"(?:D|LL|M|RE|S|T|VE))?",eB="(?:"+eR+"|"+eM+")?",eV="["+eC+"]?",eH="(?:"+eA+"(?:"+[eD,eT,eO].join("|")+")"+eV+eB+")*",ez=eV+eB+eH,ej="(?:"+["["+ey+"]",eT,eO].join("|")+")"+ez,eG="(?:"+[eD+eR+"?",eR,eT,eO,"["+em+"]"].join("|")+")",eW=RegExp(eS,"g"),eU=RegExp(eR,"g"),e$=RegExp(eM+"(?="+eM+")|"+eG+ez,"g"),eq=RegExp([e_+"?"+eE+"+"+eL+"(?="+[ek,e_,"$"].join("|")+")",eI+"+"+eN+"(?="+[ek,e_+eF,"$"].join("|")+")",e_+"?"+eF+"+"+eL,e_+"+"+eN,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",ej].join("|"),"g"),eK=RegExp("["+eA+em+ev+eC+"]"),eQ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eX=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eY=-1,eZ={};eZ[M]=eZ[D]=eZ[T]=eZ[O]=eZ[_]=eZ[A]=eZ[F]=eZ[I]=eZ[L]=!0,eZ[d]=eZ[c]=eZ[E]=eZ[h]=eZ[P]=eZ[p]=eZ[f]=eZ[g]=eZ[v]=eZ[y]=eZ[b]=eZ[C]=eZ[x]=eZ[S]=eZ[R]=!1;var eJ={};eJ[d]=eJ[c]=eJ[E]=eJ[P]=eJ[h]=eJ[p]=eJ[M]=eJ[D]=eJ[T]=eJ[O]=eJ[_]=eJ[v]=eJ[y]=eJ[b]=eJ[C]=eJ[x]=eJ[S]=eJ[k]=eJ[A]=eJ[F]=eJ[I]=eJ[L]=!0,eJ[f]=eJ[g]=eJ[R]=!1;var e0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e1=parseFloat,e2=parseInt,e5=e.g&&e.g.Object===Object&&e.g,e3="object"==typeof self&&self&&self.Object===Object&&self,e4=e5||e3||Function("return this")(),e8=i&&!i.nodeType&&i,e6=e8&&t&&!t.nodeType&&t,e7=e6&&e6.exports===e8,e9=e7&&e5.process,te=function(){try{var e=e6&&e6.require&&e6.require("util").types;if(e)return e;return e9&&e9.binding&&e9.binding("util")}catch(e){}}(),tt=te&&te.isArrayBuffer,ti=te&&te.isDate,tr=te&&te.isMap,tn=te&&te.isRegExp,to=te&&te.isSet,ts=te&&te.isTypedArray;function ta(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function tl(e,t,i,r){for(var n=-1,o=null==e?0:e.length;++n<o;){var s=e[n];t(r,s,i(s),e)}return r}function tu(e,t){for(var i=-1,r=null==e?0:e.length;++i<r&&!1!==t(e[i],i,e););return e}function td(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(!t(e[i],i,e))return!1;return!0}function tc(e,t){for(var i=-1,r=null==e?0:e.length,n=0,o=[];++i<r;){var s=e[i];t(s,i,e)&&(o[n++]=s)}return o}function th(e,t){return!!(null==e?0:e.length)&&tx(e,t,0)>-1}function tp(e,t,i){for(var r=-1,n=null==e?0:e.length;++r<n;)if(i(t,e[r]))return!0;return!1}function tf(e,t){for(var i=-1,r=null==e?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}function tg(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}function tm(e,t,i,r){var n=-1,o=null==e?0:e.length;for(r&&o&&(i=e[++n]);++n<o;)i=t(i,e[n],n,e);return i}function tv(e,t,i,r){var n=null==e?0:e.length;for(r&&n&&(i=e[--n]);n--;)i=t(i,e[n],n,e);return i}function ty(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var tb=tE("length");function tw(e,t,i){var r;return i(e,function(e,i,n){if(t(e,i,n))return r=i,!1}),r}function tC(e,t,i,r){for(var n=e.length,o=i+(r?1:-1);r?o--:++o<n;)if(t(e[o],o,e))return o;return -1}function tx(e,t,i){return t==t?function(e,t,i){for(var r=i-1,n=e.length;++r<n;)if(e[r]===t)return r;return -1}(e,t,i):tC(e,tk,i)}function tS(e,t,i,r){for(var n=i-1,o=e.length;++n<o;)if(r(e[n],t))return n;return -1}function tk(e){return e!=e}function tR(e,t){var i=null==e?0:e.length;return i?tD(e,t)/i:l}function tE(e){return function(t){return null==t?r:t[e]}}function tP(e){return function(t){return null==e?r:e[t]}}function tM(e,t,i,r,n){return n(e,function(e,n,o){i=r?(r=!1,e):t(i,e,n,o)}),i}function tD(e,t){for(var i,n=-1,o=e.length;++n<o;){var s=t(e[n]);r!==s&&(i=r===i?s:i+s)}return i}function tT(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}function tO(e){return e?e.slice(0,tq(e)+1).replace(Z,""):e}function t_(e){return function(t){return e(t)}}function tA(e,t){return tf(t,function(t){return e[t]})}function tF(e,t){return e.has(t)}function tI(e,t){for(var i=-1,r=e.length;++i<r&&tx(t,e[i],0)>-1;);return i}function tL(e,t){for(var i=e.length;i--&&tx(t,e[i],0)>-1;);return i}var tN=tP({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tB=tP({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tV(e){return"\\"+e0[e]}function tH(e){return eK.test(e)}function tz(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function tj(e,t){return function(i){return e(t(i))}}function tG(e,t){for(var i=-1,r=e.length,n=0,o=[];++i<r;){var a=e[i];(a===t||a===s)&&(e[i]=s,o[n++]=i)}return o}function tW(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function tU(e){return tH(e)?function(e){for(var t=e$.lastIndex=0;e$.test(e);)++t;return t}(e):tb(e)}function t$(e){return tH(e)?e.match(e$)||[]:e.split("")}function tq(e){for(var t=e.length;t--&&J.test(e.charAt(t)););return t}var tK=tP({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tQ=function e(t){var i,J,em,ev,ey=(t=null==t?e4:tQ.defaults(e4.Object(),t,tQ.pick(e4,eX))).Array,eb=t.Date,ew=t.Error,eC=t.Function,ex=t.Math,eS=t.Object,ek=t.RegExp,eR=t.String,eE=t.TypeError,eP=ey.prototype,eM=eC.prototype,eD=eS.prototype,eT=t["__core-js_shared__"],eO=eM.toString,e_=eD.hasOwnProperty,eA=0,eF=(i=/[^.]+$/.exec(eT&&eT.keys&&eT.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",eI=eD.toString,eL=eO.call(eS),eN=e4._,eB=ek("^"+eO.call(e_).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eV=e7?t.Buffer:r,eH=t.Symbol,ez=t.Uint8Array,ej=eV?eV.allocUnsafe:r,eG=tj(eS.getPrototypeOf,eS),e$=eS.create,eK=eD.propertyIsEnumerable,e0=eP.splice,e5=eH?eH.isConcatSpreadable:r,e3=eH?eH.iterator:r,e8=eH?eH.toStringTag:r,e6=function(){try{var e=nf(eS,"defineProperty");return e({},"",{}),e}catch(e){}}(),e9=t.clearTimeout!==e4.clearTimeout&&t.clearTimeout,te=eb&&eb.now!==e4.Date.now&&eb.now,tb=t.setTimeout!==e4.setTimeout&&t.setTimeout,tP=ex.ceil,tX=ex.floor,tY=eS.getOwnPropertySymbols,tZ=eV?eV.isBuffer:r,tJ=t.isFinite,t0=eP.join,t1=tj(eS.keys,eS),t2=ex.max,t5=ex.min,t3=eb.now,t4=t.parseInt,t8=ex.random,t6=eP.reverse,t7=nf(t,"DataView"),t9=nf(t,"Map"),ie=nf(t,"Promise"),it=nf(t,"Set"),ii=nf(t,"WeakMap"),ir=nf(eS,"create"),io=ii&&new ii,is={},ia=nV(t7),il=nV(t9),iu=nV(ie),id=nV(it),ic=nV(ii),ih=eH?eH.prototype:r,ip=ih?ih.valueOf:r,ig=ih?ih.toString:r;function im(e){if(oK(e)&&!oN(e)&&!(e instanceof iw)){if(e instanceof ib)return e;if(e_.call(e,"__wrapped__"))return nH(e)}return new ib(e)}var iv=function(){function e(){}return function(t){if(!oq(t))return{};if(e$)return e$(t);e.prototype=t;var i=new e;return e.prototype=r,i}}();function iy(){}function ib(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function iw(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function iC(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ix(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function iS(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function ik(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new iS;++t<i;)this.add(e[t])}function iR(e){var t=this.__data__=new ix(e);this.size=t.size}function iE(e,t){var i=oN(e),r=!i&&oL(e),n=!i&&!r&&oz(e),o=!i&&!r&&!n&&o2(e),s=i||r||n||o,a=s?tT(e.length,eR):[],l=a.length;for(var u in e)(t||e_.call(e,u))&&!(s&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||nC(u,l)))&&a.push(u);return a}function iP(e){var t=e.length;return t?e[rc(0,t-1)]:r}im.templateSettings={escape:W,evaluate:U,interpolate:$,variable:"",imports:{_:im}},im.prototype=iy.prototype,im.prototype.constructor=im,ib.prototype=iv(iy.prototype),ib.prototype.constructor=ib,iw.prototype=iv(iy.prototype),iw.prototype.constructor=iw,iC.prototype.clear=function(){this.__data__=ir?ir(null):{},this.size=0},iC.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},iC.prototype.get=function(e){var t=this.__data__;if(ir){var i=t[e];return i===o?r:i}return e_.call(t,e)?t[e]:r},iC.prototype.has=function(e){var t=this.__data__;return ir?t[e]!==r:e_.call(t,e)},iC.prototype.set=function(e,t){var i=this.__data__;return this.size+=+!this.has(e),i[e]=ir&&r===t?o:t,this},ix.prototype.clear=function(){this.__data__=[],this.size=0},ix.prototype.delete=function(e){var t=this.__data__,i=iT(t,e);return!(i<0)&&(i==t.length-1?t.pop():e0.call(t,i,1),--this.size,!0)},ix.prototype.get=function(e){var t=this.__data__,i=iT(t,e);return i<0?r:t[i][1]},ix.prototype.has=function(e){return iT(this.__data__,e)>-1},ix.prototype.set=function(e,t){var i=this.__data__,r=iT(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this},iS.prototype.clear=function(){this.size=0,this.__data__={hash:new iC,map:new(t9||ix),string:new iC}},iS.prototype.delete=function(e){var t=nh(this,e).delete(e);return this.size-=!!t,t},iS.prototype.get=function(e){return nh(this,e).get(e)},iS.prototype.has=function(e){return nh(this,e).has(e)},iS.prototype.set=function(e,t){var i=nh(this,e),r=i.size;return i.set(e,t),this.size+=+(i.size!=r),this},ik.prototype.add=ik.prototype.push=function(e){return this.__data__.set(e,o),this},ik.prototype.has=function(e){return this.__data__.has(e)};function iM(e,t,i){(r===i||oA(e[t],i))&&(r!==i||t in e)||iA(e,t,i)}function iD(e,t,i){var n=e[t];e_.call(e,t)&&oA(n,i)&&(r!==i||t in e)||iA(e,t,i)}function iT(e,t){for(var i=e.length;i--;)if(oA(e[i][0],t))return i;return -1}function iO(e,t,i,r){return iH(e,function(e,n,o){t(r,e,i(e),o)}),r}function i_(e,t){return e&&rG(t,sf(t),e)}function iA(e,t,i){"__proto__"==t&&e6?e6(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function iF(e,t){for(var i=-1,n=t.length,o=ey(n),s=null==e;++i<n;)o[i]=s?r:su(e,t[i]);return o}function iI(e,t,i){return e==e&&(r!==i&&(e=e<=i?e:i),r!==t&&(e=e>=t?e:t)),e}function iL(e,t,i,n,o,s){var a,l=1&t,u=2&t,c=4&t;if(i&&(a=o?i(e,n,o,s):i(e)),r!==a)return a;if(!oq(e))return e;var f=oN(e);if(f){if(R=(w=e).length,N=new w.constructor(R),R&&"string"==typeof w[0]&&e_.call(w,"index")&&(N.index=w.index,N.input=w.input),a=N,!l)return rj(e,a)}else{var w,R,N,B,V,H,z,j,G=nv(e),W=G==g||G==m;if(oz(e))return rL(e,l);if(G==b||G==d||W&&!o){if(a=u||W?{}:nb(e),!l){return u?(B=e,V=(j=a)&&rG(e,sg(e),j),rG(B,nm(B),V)):(H=e,z=i_(a,e),rG(H,ng(H),z))}}else{if(!eJ[G])return o?e:{};a=function(e,t,i){var r,n,o=e.constructor;switch(t){case E:return rN(e);case h:case p:return new o(+e);case P:return r=i?rN(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case M:case D:case T:case O:case _:case A:case F:case I:case L:return rB(e,i);case v:return new o;case y:case S:return new o(e);case C:return(n=new e.constructor(e.source,ea.exec(e))).lastIndex=e.lastIndex,n;case x:return new o;case k:return ip?eS(ip.call(e)):{}}}(e,G,l)}}s||(s=new iR);var U=s.get(e);if(U)return U;s.set(e,a),oJ(e)?e.forEach(function(r){a.add(iL(r,t,i,r,e,s))}):oQ(e)&&e.forEach(function(r,n){a.set(n,iL(r,t,i,n,e,s))});var $=c?u?na:ns:u?sg:sf,q=f?r:$(e);return tu(q||e,function(r,n){q&&(r=e[n=r]),iD(a,n,iL(r,t,i,n,e,s))}),a}function iN(e,t,i){var n=i.length;if(null==e)return!n;for(e=eS(e);n--;){var o=i[n],s=t[o],a=e[o];if(r===a&&!(o in e)||!s(a))return!1}return!0}function iB(e,t,i){if("function"!=typeof e)throw new eE(n);return n_(function(){e.apply(r,i)},t)}function iV(e,t,i,r){var n=-1,o=th,s=!0,a=e.length,l=[],u=t.length;if(!a)return l;i&&(t=tf(t,t_(i))),r?(o=tp,s=!1):t.length>=200&&(o=tF,s=!1,t=new ik(t));e:for(;++n<a;){var d=e[n],c=null==i?d:i(d);if(d=r||0!==d?d:0,s&&c==c){for(var h=u;h--;)if(t[h]===c)continue e;l.push(d)}else o(t,c,r)||l.push(d)}return l}iR.prototype.clear=function(){this.__data__=new ix,this.size=0},iR.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},iR.prototype.get=function(e){return this.__data__.get(e)},iR.prototype.has=function(e){return this.__data__.has(e)},iR.prototype.set=function(e,t){var i=this.__data__;if(i instanceof ix){var r=i.__data__;if(!t9||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new iS(r)}return i.set(e,t),this.size=i.size,this};var iH=r$(iK),iz=r$(iQ,!0);function ij(e,t){var i=!0;return iH(e,function(e,r,n){return i=!!t(e,r,n)}),i}function iG(e,t,i){for(var n=-1,o=e.length;++n<o;){var s=e[n],a=t(s);if(null!=a&&(r===l?a==a&&!o1(a):i(a,l)))var l=a,u=s}return u}function iW(e,t){var i=[];return iH(e,function(e,r,n){t(e,r,n)&&i.push(e)}),i}function iU(e,t,i,r,n){var o=-1,s=e.length;for(i||(i=nw),n||(n=[]);++o<s;){var a=e[o];t>0&&i(a)?t>1?iU(a,t-1,i,r,n):tg(n,a):r||(n[n.length]=a)}return n}var i$=rq(),iq=rq(!0);function iK(e,t){return e&&i$(e,t,sf)}function iQ(e,t){return e&&iq(e,t,sf)}function iX(e,t){return tc(t,function(t){return oW(e[t])})}function iY(e,t){t=rA(t,e);for(var i=0,n=t.length;null!=e&&i<n;)e=e[nB(t[i++])];return i&&i==n?e:r}function iZ(e,t,i){var r=t(e);return oN(e)?r:tg(r,i(e))}function iJ(e){var t;return null==e?r===e?"[object Undefined]":"[object Null]":e8&&e8 in eS(e)?function(e){var t=e_.call(e,e8),i=e[e8];try{e[e8]=r;var n=!0}catch(e){}var o=eI.call(e);return n&&(t?e[e8]=i:delete e[e8]),o}(e):(t=e,eI.call(t))}function i0(e,t){return e>t}function i1(e,t){return null!=e&&e_.call(e,t)}function i2(e,t){return null!=e&&t in eS(e)}function i5(e,t,i){for(var n=i?tp:th,o=e[0].length,s=e.length,a=s,l=ey(s),u=1/0,d=[];a--;){var c=e[a];a&&t&&(c=tf(c,t_(t))),u=t5(c.length,u),l[a]=!i&&(t||o>=120&&c.length>=120)?new ik(a&&c):r}c=e[0];var h=-1,p=l[0];e:for(;++h<o&&d.length<u;){var f=c[h],g=t?t(f):f;if(f=i||0!==f?f:0,!(p?tF(p,g):n(d,g,i))){for(a=s;--a;){var m=l[a];if(!(m?tF(m,g):n(e[a],g,i)))continue e}p&&p.push(g),d.push(f)}}return d}function i3(e,t,i){t=rA(t,e);var n=null==(e=nD(e,t))?e:e[nB(nY(t))];return null==n?r:ta(n,e,i)}function i4(e){return oK(e)&&iJ(e)==d}function i8(e,t,i,n,o){return e===t||(null!=e&&null!=t&&(oK(e)||oK(t))?function(e,t,i,n,o,s){var a=oN(e),l=oN(t),u=a?c:nv(e),g=l?c:nv(t);u=u==d?b:u,g=g==d?b:g;var m=u==b,w=g==b,R=u==g;if(R&&oz(e)){if(!oz(t))return!1;a=!0,m=!1}if(R&&!m)return s||(s=new iR),a||o2(e)?nn(e,t,i,n,o,s):function(e,t,i,r,n,o,s){switch(i){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case E:if(e.byteLength!=t.byteLength||!o(new ez(e),new ez(t)))break;return!0;case h:case p:case y:return oA(+e,+t);case f:return e.name==t.name&&e.message==t.message;case C:case S:return e==t+"";case v:var a=tz;case x:var l=1&r;if(a||(a=tW),e.size!=t.size&&!l)break;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var d=nn(a(e),a(t),r,n,o,s);return s.delete(e),d;case k:if(ip)return ip.call(e)==ip.call(t)}return!1}(e,t,u,i,n,o,s);if(!(1&i)){var M=m&&e_.call(e,"__wrapped__"),D=w&&e_.call(t,"__wrapped__");if(M||D){var T=M?e.value():e,O=D?t.value():t;return s||(s=new iR),o(T,O,i,n,s)}}return!!R&&(s||(s=new iR),function(e,t,i,n,o,s){var a=1&i,l=ns(e),u=l.length;if(u!=ns(t).length&&!a)return!1;for(var d=u;d--;){var c=l[d];if(!(a?c in t:e_.call(t,c)))return!1}var h=s.get(e),p=s.get(t);if(h&&p)return h==t&&p==e;var f=!0;s.set(e,t),s.set(t,e);for(var g=a;++d<u;){var m=e[c=l[d]],v=t[c];if(n)var y=a?n(v,m,c,t,e,s):n(m,v,c,e,t,s);if(!(r===y?m===v||o(m,v,i,n,s):y)){f=!1;break}g||(g="constructor"==c)}if(f&&!g){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(f=!1)}return s.delete(e),s.delete(t),f}(e,t,i,n,o,s))}(e,t,i,n,i8,o):e!=e&&t!=t)}function i6(e,t,i,n){var o=i.length,s=o,a=!n;if(null==e)return!s;for(e=eS(e);o--;){var l=i[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var u=(l=i[o])[0],d=e[u],c=l[1];if(a&&l[2]){if(r===d&&!(u in e))return!1}else{var h=new iR;if(n)var p=n(d,c,u,e,t,h);if(!(r===p?i8(c,d,3,n,h):p))return!1}}return!0}function i7(e){var t;return!(!oq(e)||(t=e,eF&&eF in t))&&(oW(e)?eB:ed).test(nV(e))}function i9(e){return"function"==typeof e?e:null==e?sH:"object"==typeof e?oN(e)?rn(e[0],e[1]):rr(e):sQ(e)}function re(e){if(!nE(e))return t1(e);var t=[];for(var i in eS(e))e_.call(e,i)&&"constructor"!=i&&t.push(i);return t}function rt(e,t){return e<t}function ri(e,t){var i=-1,r=oV(e)?ey(e.length):[];return iH(e,function(e,n,o){r[++i]=t(e,n,o)}),r}function rr(e){var t=np(e);return 1==t.length&&t[0][2]?nP(t[0][0],t[0][1]):function(i){return i===e||i6(i,e,t)}}function rn(e,t){var i;return nS(e)&&(i=t)==i&&!oq(i)?nP(nB(e),t):function(i){var n=su(i,e);return r===n&&n===t?sd(i,e):i8(t,n,3)}}function ro(e,t,i,n,o){e!==t&&i$(t,function(s,a){if(o||(o=new iR),oq(s))!function(e,t,i,n,o,s,a){var l=nT(e,i),u=nT(t,i),d=a.get(u);if(d)return iM(e,i,d);var c=s?s(l,u,i+"",e,t,a):r,h=r===c;if(h){var p=oN(u),f=!p&&oz(u),g=!p&&!f&&o2(u);c=u,p||f||g?oN(l)?c=l:oH(l)?c=rj(l):f?(h=!1,c=rL(u,!0)):g?(h=!1,c=rB(u,!0)):c=[]:oY(u)||oL(u)?(c=l,oL(l)?c=se(l):(!oq(l)||oW(l))&&(c=nb(u))):h=!1}h&&(a.set(u,c),o(c,u,n,s,a),a.delete(u)),iM(e,i,c)}(e,t,a,i,ro,n,o);else{var l=n?n(nT(e,a),s,a+"",e,t,o):r;r===l&&(l=s),iM(e,a,l)}},sg)}function rs(e,t){var i=e.length;if(i)return nC(t+=t<0?i:0,i)?e[t]:r}function ra(e,t,i){t=t.length?tf(t,function(e){return oN(e)?function(t){return iY(t,1===e.length?e[0]:e)}:e}):[sH];var r=-1;t=tf(t,t_(nc()));var n=ri(e,function(e,i,n){return{criteria:tf(t,function(t){return t(e)}),index:++r,value:e}}),o=n.length;for(n.sort(function(e,t){return function(e,t,i){for(var r=-1,n=e.criteria,o=t.criteria,s=n.length,a=i.length;++r<s;){var l=rV(n[r],o[r]);if(l){if(r>=a)return l;return l*("desc"==i[r]?-1:1)}}return e.index-t.index}(e,t,i)});o--;)n[o]=n[o].value;return n}function rl(e,t,i){for(var r=-1,n=t.length,o={};++r<n;){var s=t[r],a=iY(e,s);i(a,s)&&rf(o,rA(s,e),a)}return o}function ru(e,t,i,r){var n=r?tS:tx,o=-1,s=t.length,a=e;for(e===t&&(t=rj(t)),i&&(a=tf(e,t_(i)));++o<s;)for(var l=0,u=t[o],d=i?i(u):u;(l=n(a,d,l,r))>-1;)a!==e&&e0.call(a,l,1),e0.call(e,l,1);return e}function rd(e,t){for(var i=e?t.length:0,r=i-1;i--;){var n=t[i];if(i==r||n!==o){var o=n;nC(n)?e0.call(e,n,1):rR(e,n)}}return e}function rc(e,t){return e+tX(t8()*(t-e+1))}function rh(e,t){var i="";if(!e||t<1||t>0x1fffffffffffff)return i;do t%2&&(i+=e),(t=tX(t/2))&&(e+=e);while(t)return i}function rp(e,t){return nA(nM(e,t,sH),e+"")}function rf(e,t,i,n){if(!oq(e))return e;t=rA(t,e);for(var o=-1,s=t.length,a=s-1,l=e;null!=l&&++o<s;){var u=nB(t[o]),d=i;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(o!=a){var c=l[u];d=n?n(c,u,l):r,r===d&&(d=oq(c)?c:nC(t[o+1])?[]:{})}iD(l,u,d),l=l[u]}return e}var rg=io?function(e,t){return io.set(e,t),e}:sH,rm=e6?function(e,t){return e6(e,"toString",{configurable:!0,enumerable:!1,value:sN(t),writable:!0})}:sH;function rv(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(i=i>n?n:i)<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var o=ey(n);++r<n;)o[r]=e[r+t];return o}function ry(e,t){var i;return iH(e,function(e,r,n){return!(i=t(e,r,n))}),!!i}function rb(e,t,i){var r=0,n=null==e?r:e.length;if("number"==typeof t&&t==t&&n<=0x7fffffff){for(;r<n;){var o=r+n>>>1,s=e[o];null!==s&&!o1(s)&&(i?s<=t:s<t)?r=o+1:n=o}return n}return rw(e,t,sH,i)}function rw(e,t,i,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=i(t))!=t,l=null===t,u=o1(t),d=r===t;o<s;){var c=tX((o+s)/2),h=i(e[c]),p=r!==h,f=null===h,g=h==h,m=o1(h);if(a)var v=n||g;else v=d?g&&(n||p):l?g&&p&&(n||!f):u?g&&p&&!f&&(n||!m):!f&&!m&&(n?h<=t:h<t);v?o=c+1:s=c}return t5(s,0xfffffffe)}function rC(e,t){for(var i=-1,r=e.length,n=0,o=[];++i<r;){var s=e[i],a=t?t(s):s;if(!i||!oA(a,l)){var l=a;o[n++]=0===s?0:s}}return o}function rx(e){return"number"==typeof e?e:o1(e)?l:+e}function rS(e){if("string"==typeof e)return e;if(oN(e))return tf(e,rS)+"";if(o1(e))return ig?ig.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}function rk(e,t,i){var r=-1,n=th,o=e.length,s=!0,a=[],l=a;if(i)s=!1,n=tp;else if(o>=200){var u=t?null:r7(e);if(u)return tW(u);s=!1,n=tF,l=new ik}else l=t?[]:a;e:for(;++r<o;){var d=e[r],c=t?t(d):d;if(d=i||0!==d?d:0,s&&c==c){for(var h=l.length;h--;)if(l[h]===c)continue e;t&&l.push(c),a.push(d)}else n(l,c,i)||(l!==a&&l.push(c),a.push(d))}return a}function rR(e,t){return t=rA(t,e),null==(e=nD(e,t))||delete e[nB(nY(t))]}function rE(e,t,i,r){return rf(e,t,i(iY(e,t)),r)}function rP(e,t,i,r){for(var n=e.length,o=r?n:-1;(r?o--:++o<n)&&t(e[o],o,e););return i?rv(e,r?0:o,r?o+1:n):rv(e,r?o+1:0,r?n:o)}function rM(e,t){var i=e;return i instanceof iw&&(i=i.value()),tm(t,function(e,t){return t.func.apply(t.thisArg,tg([e],t.args))},i)}function rD(e,t,i){var r=e.length;if(r<2)return r?rk(e[0]):[];for(var n=-1,o=ey(r);++n<r;)for(var s=e[n],a=-1;++a<r;)a!=n&&(o[n]=iV(o[n]||s,e[a],t,i));return rk(iU(o,1),t,i)}function rT(e,t,i){for(var n=-1,o=e.length,s=t.length,a={};++n<o;){var l=n<s?t[n]:r;i(a,e[n],l)}return a}function rO(e){return oH(e)?e:[]}function r_(e){return"function"==typeof e?e:sH}function rA(e,t){return oN(e)?e:nS(e,t)?[e]:nN(st(e))}function rF(e,t,i){var n=e.length;return i=r===i?n:i,!t&&i>=n?e:rv(e,t,i)}var rI=e9||function(e){return e4.clearTimeout(e)};function rL(e,t){if(t)return e.slice();var i=e.length,r=ej?ej(i):new e.constructor(i);return e.copy(r),r}function rN(e){var t=new e.constructor(e.byteLength);return new ez(t).set(new ez(e)),t}function rB(e,t){var i=t?rN(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function rV(e,t){if(e!==t){var i=r!==e,n=null===e,o=e==e,s=o1(e),a=r!==t,l=null===t,u=t==t,d=o1(t);if(!l&&!d&&!s&&e>t||s&&a&&u&&!l&&!d||n&&a&&u||!i&&u||!o)return 1;if(!n&&!s&&!d&&e<t||d&&i&&o&&!n&&!s||l&&i&&o||!a&&o||!u)return -1}return 0}function rH(e,t,i,r){for(var n=-1,o=e.length,s=i.length,a=-1,l=t.length,u=t2(o-s,0),d=ey(l+u),c=!r;++a<l;)d[a]=t[a];for(;++n<s;)(c||n<o)&&(d[i[n]]=e[n]);for(;u--;)d[a++]=e[n++];return d}function rz(e,t,i,r){for(var n=-1,o=e.length,s=-1,a=i.length,l=-1,u=t.length,d=t2(o-a,0),c=ey(d+u),h=!r;++n<d;)c[n]=e[n];for(var p=n;++l<u;)c[p+l]=t[l];for(;++s<a;)(h||n<o)&&(c[p+i[s]]=e[n++]);return c}function rj(e,t){var i=-1,r=e.length;for(t||(t=ey(r));++i<r;)t[i]=e[i];return t}function rG(e,t,i,n){var o=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var l=t[s],u=n?n(i[l],e[l],l,i,e):r;r===u&&(u=e[l]),o?iA(i,l,u):iD(i,l,u)}return i}function rW(e,t){return function(i,r){var n=oN(i)?tl:iO,o=t?t():{};return n(i,e,nc(r,2),o)}}function rU(e){return rp(function(t,i){var n=-1,o=i.length,s=o>1?i[o-1]:r,a=o>2?i[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&nx(i[0],i[1],a)&&(s=o<3?r:s,o=1),t=eS(t);++n<o;){var l=i[n];l&&e(t,l,n,s)}return t})}function r$(e,t){return function(i,r){if(null==i)return i;if(!oV(i))return e(i,r);for(var n=i.length,o=t?n:-1,s=eS(i);(t?o--:++o<n)&&!1!==r(s[o],o,s););return i}}function rq(e){return function(t,i,r){for(var n=-1,o=eS(t),s=r(t),a=s.length;a--;){var l=s[e?a:++n];if(!1===i(o[l],l,o))break}return t}}function rK(e){return function(t){var i=tH(t=st(t))?t$(t):r,n=i?i[0]:t.charAt(0),o=i?rF(i,1).join(""):t.slice(1);return n[e]()+o}}function rQ(e){return function(t){return tm(sF(sE(t).replace(eW,"")),e,"")}}function rX(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=iv(e.prototype),r=e.apply(i,t);return oq(r)?r:i}}function rY(e){return function(t,i,n){var o=eS(t);if(!oV(t)){var s=nc(i,3);t=sf(t),i=function(e){return s(o[e],e,o)}}var a=e(t,i,n);return a>-1?o[s?t[a]:a]:r}}function rZ(e){return no(function(t){var i=t.length,o=i,s=ib.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new eE(n);if(s&&!l&&"wrapper"==nu(a))var l=new ib([],!0)}for(o=l?o:i;++o<i;){var u=nu(a=t[o]),d="wrapper"==u?nl(a):r;l=d&&nk(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[nu(d[0])].apply(l,d[3]):1==a.length&&nk(a)?l[u]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&oN(r))return l.plant(r).value();for(var n=0,o=i?t[n].apply(this,e):r;++n<i;)o=t[n].call(this,o);return o}})}function rJ(e,t,i,n,o,s,a,l,u,d){var c=128&t,h=1&t,p=2&t,f=24&t,g=512&t,m=p?r:rX(e);function v(){for(var y=arguments.length,b=ey(y),w=y;w--;)b[w]=arguments[w];if(f)var C=nd(v),x=function(e,t){for(var i=e.length,r=0;i--;)e[i]===t&&++r;return r}(b,C);if(n&&(b=rH(b,n,o,f)),s&&(b=rz(b,s,a,f)),y-=x,f&&y<d){var S=tG(b,C);return r8(e,t,rJ,v.placeholder,i,b,S,l,u,d-y)}var k=h?i:this,R=p?k[e]:e;return y=b.length,l?b=function(e,t){for(var i=e.length,n=t5(t.length,i),o=rj(e);n--;){var s=t[n];e[n]=nC(s,i)?o[s]:r}return e}(b,l):g&&y>1&&b.reverse(),c&&u<y&&(b.length=u),this&&this!==e4&&this instanceof v&&(R=m||rX(R)),R.apply(k,b)}return v}function r0(e,t){return function(i,r){var n,o;return n=t(r),o={},iK(i,function(t,i,r){e(o,n(t),i,r)}),o}}function r1(e,t){return function(i,n){var o;if(r===i&&r===n)return t;if(r!==i&&(o=i),r!==n){if(r===o)return n;"string"==typeof i||"string"==typeof n?(i=rS(i),n=rS(n)):(i=rx(i),n=rx(n)),o=e(i,n)}return o}}function r2(e){return no(function(t){return t=tf(t,t_(nc())),rp(function(i){var r=this;return e(t,function(e){return ta(e,r,i)})})})}function r5(e,t){var i=(t=r===t?" ":rS(t)).length;if(i<2)return i?rh(t,e):t;var n=rh(t,tP(e/tU(t)));return tH(t)?rF(t$(n),0,e).join(""):n.slice(0,e)}function r3(e){return function(t,i,n){n&&"number"!=typeof n&&nx(t,i,n)&&(i=n=r),t=o8(t),r===i?(i=t,t=0):i=o8(i),n=r===n?t<i?1:-1:o8(n);for(var o=t,s=i,a=n,l=-1,u=t2(tP((s-o)/(a||1)),0),d=ey(u);u--;)d[e?u:++l]=o,o+=a;return d}}function r4(e){return function(t,i){return("string"!=typeof t||"string"!=typeof i)&&(t=o9(t),i=o9(i)),e(t,i)}}function r8(e,t,i,n,o,s,a,l,u,d){var c=8&t,h=c?a:r,p=c?r:a,f=c?s:r,g=c?r:s;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var m=[e,t,o,f,h,g,p,l,u,d],v=i.apply(r,m);return nk(e)&&nO(v,m),v.placeholder=n,nF(v,e,t)}function r6(e){var t=ex[e];return function(e,i){if(e=o9(e),(i=null==i?0:t5(o6(i),292))&&tJ(e)){var r=(st(e)+"e").split("e");return+((r=(st(t(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(r[1]-i))}return t(e)}}var r7=it&&1/tW(new it([,-0]))[1]==a?function(e){return new it(e)}:sU;function r9(e){return function(t){var i,r,n=nv(t);return n==v?tz(t):n==x?(i=-1,r=Array(t.size),t.forEach(function(e){r[++i]=[e,e]}),r):tf(e(t),function(e){return[e,t[e]]})}}function ne(e,t,i,o,a,l,u,d){var c=2&t;if(!c&&"function"!=typeof e)throw new eE(n);var h=o?o.length:0;if(h||(t&=-97,o=a=r),u=r===u?u:t2(o6(u),0),d=r===d?d:o6(d),h-=a?a.length:0,64&t){var p=o,f=a;o=a=r}var g=c?r:nl(e),m=[e,t,i,o,a,p,f,l,u,d];if(g&&function(e,t){var i=e[1],r=t[1],n=i|r,o=n<131,a=128==r&&8==i||128==r&&256==i&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==i;if(o||a){1&r&&(e[2]=t[2],n|=1&i?0:4);var l=t[3];if(l){var u=e[3];e[3]=u?rH(u,l,t[4]):l,e[4]=u?tG(e[3],s):t[4]}(l=t[5])&&(u=e[5],e[5]=u?rz(u,l,t[6]):l,e[6]=u?tG(e[5],s):t[6]),(l=t[7])&&(e[7]=l),128&r&&(e[8]=null==e[8]?t[8]:t5(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}}(m,g),e=m[0],t=m[1],i=m[2],o=m[3],a=m[4],(d=m[9]=m[9]===r?c?0:e.length:t2(m[9]-h,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?M=function(e,t,i){var n=rX(e);function o(){for(var s=arguments.length,a=ey(s),l=s,u=nd(o);l--;)a[l]=arguments[l];var d=s<3&&a[0]!==u&&a[s-1]!==u?[]:tG(a,u);return(s-=d.length)<i?r8(e,t,rJ,o.placeholder,r,a,d,r,r,i-s):ta(this&&this!==e4&&this instanceof o?n:e,this,a)}return o}(e,t,d):32!=t&&33!=t||a.length?M=rJ.apply(r,m):(v=e,y=t,b=i,w=o,C=1&y,x=rX(v),M=function e(){for(var t=-1,i=arguments.length,r=-1,n=w.length,o=ey(n+i),s=this&&this!==e4&&this instanceof e?x:v;++r<n;)o[r]=w[r];for(;i--;)o[r++]=arguments[++t];return ta(s,C?b:this,o)});else var v,y,b,w,C,x,S,k,R,E,P,M=(S=e,k=t,R=i,E=1&k,P=rX(S),function e(){return(this&&this!==e4&&this instanceof e?P:S).apply(E?R:this,arguments)});return nF((g?rg:nO)(M,m),e,t)}function nt(e,t,i,n){return r===e||oA(e,eD[i])&&!e_.call(n,i)?t:e}function ni(e,t,i,n,o,s){return oq(e)&&oq(t)&&(s.set(t,e),ro(e,t,r,ni,s),s.delete(t)),e}function nr(e){return oY(e)?r:e}function nn(e,t,i,n,o,s){var a=1&i,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var d=s.get(e),c=s.get(t);if(d&&c)return d==t&&c==e;var h=-1,p=!0,f=2&i?new ik:r;for(s.set(e,t),s.set(t,e);++h<l;){var g=e[h],m=t[h];if(n)var v=a?n(m,g,h,t,e,s):n(g,m,h,e,t,s);if(r!==v){if(v)continue;p=!1;break}if(f){if(!ty(t,function(e,t){if(!tF(f,t)&&(g===e||o(g,e,i,n,s)))return f.push(t)})){p=!1;break}}else if(!(g===m||o(g,m,i,n,s))){p=!1;break}}return s.delete(e),s.delete(t),p}function no(e){return nA(nM(e,r,n$),e+"")}function ns(e){return iZ(e,sf,ng)}function na(e){return iZ(e,sg,nm)}var nl=io?function(e){return io.get(e)}:sU;function nu(e){for(var t=e.name+"",i=is[t],r=e_.call(is,t)?i.length:0;r--;){var n=i[r],o=n.func;if(null==o||o==e)return n.name}return t}function nd(e){return(e_.call(im,"placeholder")?im:e).placeholder}function nc(){var e=im.iteratee||sz;return e=e===sz?i9:e,arguments.length?e(arguments[0],arguments[1]):e}function nh(e,t){var i,r,n=e.__data__;return("string"==(r=typeof(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function np(e){for(var t=sf(e),i=t.length;i--;){var r,n=t[i],o=e[n];t[i]=[n,o,(r=o)==r&&!oq(r)]}return t}function nf(e,t){var i=null==e?r:e[t];return i7(i)?i:r}var ng=tY?function(e){return null==e?[]:tc(tY(e=eS(e)),function(t){return eK.call(e,t)})}:sZ,nm=tY?function(e){for(var t=[];e;)tg(t,ng(e)),e=eG(e);return t}:sZ,nv=iJ;function ny(e,t,i){t=rA(t,e);for(var r=-1,n=t.length,o=!1;++r<n;){var s=nB(t[r]);if(!(o=null!=e&&i(e,s)))break;e=e[s]}return o||++r!=n?o:!!(n=null==e?0:e.length)&&o$(n)&&nC(s,n)&&(oN(e)||oL(e))}function nb(e){return"function"!=typeof e.constructor||nE(e)?{}:iv(eG(e))}function nw(e){return oN(e)||oL(e)||!!(e5&&e&&e[e5])}function nC(e,t){var i=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==i||"symbol"!=i&&eh.test(e))&&e>-1&&e%1==0&&e<t}function nx(e,t,i){if(!oq(i))return!1;var r=typeof t;return("number"==r?!!(oV(i)&&nC(t,i.length)):"string"==r&&t in i)&&oA(i[t],e)}function nS(e,t){if(oN(e))return!1;var i=typeof e;return!!("number"==i||"symbol"==i||"boolean"==i||null==e||o1(e))||K.test(e)||!q.test(e)||null!=t&&e in eS(t)}function nk(e){var t=nu(e),i=im[t];if("function"!=typeof i||!(t in iw.prototype))return!1;if(e===i)return!0;var r=nl(i);return!!r&&e===r[0]}(t7&&nv(new t7(new ArrayBuffer(1)))!=P||t9&&nv(new t9)!=v||ie&&nv(ie.resolve())!=w||it&&nv(new it)!=x||ii&&nv(new ii)!=R)&&(nv=function(e){var t=iJ(e),i=t==b?e.constructor:r,n=i?nV(i):"";if(n)switch(n){case ia:return P;case il:return v;case iu:return w;case id:return x;case ic:return R}return t});var nR=eT?oW:sJ;function nE(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eD)}function nP(e,t){return function(i){return null!=i&&i[e]===t&&(r!==t||e in eS(i))}}function nM(e,t,i){return t=t2(r===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=t2(r.length-t,0),s=ey(o);++n<o;)s[n]=r[t+n];n=-1;for(var a=ey(t+1);++n<t;)a[n]=r[n];return a[t]=i(s),ta(e,this,a)}}function nD(e,t){return t.length<2?e:iY(e,rv(t,0,-1))}function nT(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var nO=nI(rg),n_=tb||function(e,t){return e4.setTimeout(e,t)},nA=nI(rm);function nF(e,t,i){var r,n,o,s=t+"";return nA(e,function(e,t){var i=t.length;if(!i)return e;var r=i-1;return t[r]=(i>1?"& ":"")+t[r],t=t.join(i>2?", ":" "),e.replace(ee,"{\n/* [wrapped with "+t+"] */\n")}(s,(r=(o=s.match(et))?o[1].split(ei):[],n=i,tu(u,function(e){var t="_."+e[0];n&e[1]&&!th(r,t)&&r.push(t)}),r.sort())))}function nI(e){var t=0,i=0;return function(){var n=t3(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function nL(e,t){var i=-1,n=e.length,o=n-1;for(t=r===t?n:t;++i<t;){var s=rc(i,o),a=e[s];e[s]=e[i],e[i]=a}return e.length=t,e}var nN=(em=(J=oP(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,function(e,i,r,n){t.push(r?n.replace(eo,"$1"):i||e)}),t},function(e){return 500===em.size&&em.clear(),e})).cache,J);function nB(e){if("string"==typeof e||o1(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function nV(e){if(null!=e){try{return eO.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function nH(e){if(e instanceof iw)return e.clone();var t=new ib(e.__wrapped__,e.__chain__);return t.__actions__=rj(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var nz=rp(function(e,t){return oH(e)?iV(e,iU(t,1,oH,!0)):[]}),nj=rp(function(e,t){var i=nY(t);return oH(i)&&(i=r),oH(e)?iV(e,iU(t,1,oH,!0),nc(i,2)):[]}),nG=rp(function(e,t){var i=nY(t);return oH(i)&&(i=r),oH(e)?iV(e,iU(t,1,oH,!0),r,i):[]});function nW(e,t,i){var r=null==e?0:e.length;if(!r)return -1;var n=null==i?0:o6(i);return n<0&&(n=t2(r+n,0)),tC(e,nc(t,3),n)}function nU(e,t,i){var n=null==e?0:e.length;if(!n)return -1;var o=n-1;return r!==i&&(o=o6(i),o=i<0?t2(n+o,0):t5(o,n-1)),tC(e,nc(t,3),o,!0)}function n$(e){return(null==e?0:e.length)?iU(e,1):[]}function nq(e){return e&&e.length?e[0]:r}var nK=rp(function(e){var t=tf(e,rO);return t.length&&t[0]===e[0]?i5(t):[]}),nQ=rp(function(e){var t=nY(e),i=tf(e,rO);return t===nY(i)?t=r:i.pop(),i.length&&i[0]===e[0]?i5(i,nc(t,2)):[]}),nX=rp(function(e){var t=nY(e),i=tf(e,rO);return(t="function"==typeof t?t:r)&&i.pop(),i.length&&i[0]===e[0]?i5(i,r,t):[]});function nY(e){var t=null==e?0:e.length;return t?e[t-1]:r}var nZ=rp(nJ);function nJ(e,t){return e&&e.length&&t&&t.length?ru(e,t):e}var n0=no(function(e,t){var i=null==e?0:e.length,r=iF(e,t);return rd(e,tf(t,function(e){return nC(e,i)?+e:e}).sort(rV)),r});function n1(e){return null==e?e:t6.call(e)}var n2=rp(function(e){return rk(iU(e,1,oH,!0))}),n5=rp(function(e){var t=nY(e);return oH(t)&&(t=r),rk(iU(e,1,oH,!0),nc(t,2))}),n3=rp(function(e){var t=nY(e);return t="function"==typeof t?t:r,rk(iU(e,1,oH,!0),r,t)});function n4(e){if(!(e&&e.length))return[];var t=0;return e=tc(e,function(e){if(oH(e))return t=t2(e.length,t),!0}),tT(t,function(t){return tf(e,tE(t))})}function n8(e,t){if(!(e&&e.length))return[];var i=n4(e);return null==t?i:tf(i,function(e){return ta(t,r,e)})}var n6=rp(function(e,t){return oH(e)?iV(e,t):[]}),n7=rp(function(e){return rD(tc(e,oH))}),n9=rp(function(e){var t=nY(e);return oH(t)&&(t=r),rD(tc(e,oH),nc(t,2))}),oe=rp(function(e){var t=nY(e);return t="function"==typeof t?t:r,rD(tc(e,oH),r,t)}),ot=rp(n4),oi=rp(function(e){var t=e.length,i=t>1?e[t-1]:r;return i="function"==typeof i?(e.pop(),i):r,n8(e,i)});function or(e){var t=im(e);return t.__chain__=!0,t}function on(e,t){return t(e)}var oo=no(function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,o=function(t){return iF(t,e)};return!(t>1)&&!this.__actions__.length&&n instanceof iw&&nC(i)?((n=n.slice(i,+i+ +!!t)).__actions__.push({func:on,args:[o],thisArg:r}),new ib(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(o)}),os=rW(function(e,t,i){e_.call(e,i)?++e[i]:iA(e,i,1)}),oa=rY(nW),ol=rY(nU);function ou(e,t){return(oN(e)?tu:iH)(e,nc(t,3))}function od(e,t){return(oN(e)?function(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}:iz)(e,nc(t,3))}var oc=rW(function(e,t,i){e_.call(e,i)?e[i].push(t):iA(e,i,[t])}),oh=rp(function(e,t,i){var r=-1,n="function"==typeof t,o=oV(e)?ey(e.length):[];return iH(e,function(e){o[++r]=n?ta(t,e,i):i3(e,t,i)}),o}),op=rW(function(e,t,i){iA(e,i,t)});function of(e,t){return(oN(e)?tf:ri)(e,nc(t,3))}var og=rW(function(e,t,i){e[+!i].push(t)},function(){return[[],[]]}),om=rp(function(e,t){if(null==e)return[];var i=t.length;return i>1&&nx(e,t[0],t[1])?t=[]:i>2&&nx(t[0],t[1],t[2])&&(t=[t[0]]),ra(e,iU(t,1),[])}),ov=te||function(){return e4.Date.now()};function oy(e,t,i){return t=i?r:t,t=e&&null==t?e.length:t,ne(e,128,r,r,r,r,t)}function ob(e,t){var i;if("function"!=typeof t)throw new eE(n);return e=o6(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var ow=rp(function(e,t,i){var r=1;if(i.length){var n=tG(i,nd(ow));r|=32}return ne(e,r,t,i,n)}),oC=rp(function(e,t,i){var r=3;if(i.length){var n=tG(i,nd(oC));r|=32}return ne(t,r,e,i,n)});function ox(e,t,i){t=i?r:t;var n=ne(e,8,r,r,r,r,r,t);return n.placeholder=ox.placeholder,n}function oS(e,t,i){t=i?r:t;var n=ne(e,16,r,r,r,r,r,t);return n.placeholder=oS.placeholder,n}function ok(e,t,i){var o,s,a,l,u,d,c=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new eE(n);function g(t){var i=o,n=s;return o=s=r,c=t,l=e.apply(n,i)}function m(e){var i=e-d,n=e-c;return r===d||i>=t||i<0||p&&n>=a}function v(){var e,i,r,n=ov();if(m(n))return y(n);u=n_(v,(e=n-d,i=n-c,r=t-e,p?t5(r,a-i):r))}function y(e){return(u=r,f&&o)?g(e):(o=s=r,l)}function b(){var e,i=ov(),n=m(i);if(o=arguments,s=this,d=i,n){if(r===u)return c=e=d,u=n_(v,t),h?g(e):l;if(p)return rI(u),u=n_(v,t),g(d)}return r===u&&(u=n_(v,t)),l}return t=o9(t)||0,oq(i)&&(h=!!i.leading,a=(p="maxWait"in i)?t2(o9(i.maxWait)||0,t):a,f="trailing"in i?!!i.trailing:f),b.cancel=function(){r!==u&&rI(u),c=0,o=d=s=u=r},b.flush=function(){return r===u?l:y(ov())},b}var oR=rp(function(e,t){return iB(e,1,t)}),oE=rp(function(e,t,i){return iB(e,o9(t)||0,i)});function oP(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eE(n);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],o=i.cache;if(o.has(n))return o.get(n);var s=e.apply(this,r);return i.cache=o.set(n,s)||o,s};return i.cache=new(oP.Cache||iS),i}function oM(e){if("function"!=typeof e)throw new eE(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}oP.Cache=iS;var oD=rp(function(e,t){var i=(t=1==t.length&&oN(t[0])?tf(t[0],t_(nc())):tf(iU(t,1),t_(nc()))).length;return rp(function(r){for(var n=-1,o=t5(r.length,i);++n<o;)r[n]=t[n].call(this,r[n]);return ta(e,this,r)})}),oT=rp(function(e,t){var i=tG(t,nd(oT));return ne(e,32,r,t,i)}),oO=rp(function(e,t){var i=tG(t,nd(oO));return ne(e,64,r,t,i)}),o_=no(function(e,t){return ne(e,256,r,r,r,t)});function oA(e,t){return e===t||e!=e&&t!=t}var oF=r4(i0),oI=r4(function(e,t){return e>=t}),oL=i4(function(){return arguments}())?i4:function(e){return oK(e)&&e_.call(e,"callee")&&!eK.call(e,"callee")},oN=ey.isArray,oB=tt?t_(tt):function(e){return oK(e)&&iJ(e)==E};function oV(e){return null!=e&&o$(e.length)&&!oW(e)}function oH(e){return oK(e)&&oV(e)}var oz=tZ||sJ,oj=ti?t_(ti):function(e){return oK(e)&&iJ(e)==p};function oG(e){if(!oK(e))return!1;var t=iJ(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oY(e)}function oW(e){if(!oq(e))return!1;var t=iJ(e);return t==g||t==m||"[object AsyncFunction]"==t||"[object Proxy]"==t}function oU(e){return"number"==typeof e&&e==o6(e)}function o$(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function oq(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function oK(e){return null!=e&&"object"==typeof e}var oQ=tr?t_(tr):function(e){return oK(e)&&nv(e)==v};function oX(e){return"number"==typeof e||oK(e)&&iJ(e)==y}function oY(e){if(!oK(e)||iJ(e)!=b)return!1;var t=eG(e);if(null===t)return!0;var i=e_.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&eO.call(i)==eL}var oZ=tn?t_(tn):function(e){return oK(e)&&iJ(e)==C},oJ=to?t_(to):function(e){return oK(e)&&nv(e)==x};function o0(e){return"string"==typeof e||!oN(e)&&oK(e)&&iJ(e)==S}function o1(e){return"symbol"==typeof e||oK(e)&&iJ(e)==k}var o2=ts?t_(ts):function(e){return oK(e)&&o$(e.length)&&!!eZ[iJ(e)]},o5=r4(rt),o3=r4(function(e,t){return e<=t});function o4(e){if(!e)return[];if(oV(e))return o0(e)?t$(e):rj(e);if(e3&&e[e3]){for(var t,i=e[e3](),r=[];!(t=i.next()).done;)r.push(t.value);return r}var n=nv(e);return(n==v?tz:n==x?tW:sS)(e)}function o8(e){return e?(e=o9(e))===a||e===-a?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function o6(e){var t=o8(e),i=t%1;return t==t?i?t-i:t:0}function o7(e){return e?iI(o6(e),0,0xffffffff):0}function o9(e){if("number"==typeof e)return e;if(o1(e))return l;if(oq(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=oq(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tO(e);var i=eu.test(e);return i||ec.test(e)?e2(e.slice(2),i?2:8):el.test(e)?l:+e}function se(e){return rG(e,sg(e))}function st(e){return null==e?"":rS(e)}var si=rU(function(e,t){if(nE(t)||oV(t))return void rG(t,sf(t),e);for(var i in t)e_.call(t,i)&&iD(e,i,t[i])}),sr=rU(function(e,t){rG(t,sg(t),e)}),sn=rU(function(e,t,i,r){rG(t,sg(t),e,r)}),so=rU(function(e,t,i,r){rG(t,sf(t),e,r)}),ss=no(iF),sa=rp(function(e,t){e=eS(e);var i=-1,n=t.length,o=n>2?t[2]:r;for(o&&nx(t[0],t[1],o)&&(n=1);++i<n;)for(var s=t[i],a=sg(s),l=-1,u=a.length;++l<u;){var d=a[l],c=e[d];(r===c||oA(c,eD[d])&&!e_.call(e,d))&&(e[d]=s[d])}return e}),sl=rp(function(e){return e.push(r,ni),ta(sv,r,e)});function su(e,t,i){var n=null==e?r:iY(e,t);return r===n?i:n}function sd(e,t){return null!=e&&ny(e,t,i2)}var sc=r0(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=eI.call(t)),e[t]=i},sN(sH)),sh=r0(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=eI.call(t)),e_.call(e,t)?e[t].push(i):e[t]=[i]},nc),sp=rp(i3);function sf(e){return oV(e)?iE(e):re(e)}function sg(e){return oV(e)?iE(e,!0):function(e){if(!oq(e)){var t=e,i=[];if(null!=t)for(var r in eS(t))i.push(r);return i}var n=nE(e),o=[];for(var s in e)"constructor"==s&&(n||!e_.call(e,s))||o.push(s);return o}(e)}var sm=rU(function(e,t,i){ro(e,t,i)}),sv=rU(function(e,t,i,r){ro(e,t,i,r)}),sy=no(function(e,t){var i={};if(null==e)return i;var r=!1;t=tf(t,function(t){return t=rA(t,e),r||(r=t.length>1),t}),rG(e,na(e),i),r&&(i=iL(i,7,nr));for(var n=t.length;n--;)rR(i,t[n]);return i}),sb=no(function(e,t){return null==e?{}:rl(e,t,function(t,i){return sd(e,i)})});function sw(e,t){if(null==e)return{};var i=tf(na(e),function(e){return[e]});return t=nc(t),rl(e,i,function(e,i){return t(e,i[0])})}var sC=r9(sf),sx=r9(sg);function sS(e){return null==e?[]:tA(e,sf(e))}var sk=rQ(function(e,t,i){return t=t.toLowerCase(),e+(i?sR(t):t)});function sR(e){return sA(st(e).toLowerCase())}function sE(e){return(e=st(e))&&e.replace(ep,tN).replace(eU,"")}var sP=rQ(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),sM=rQ(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),sD=rK("toLowerCase"),sT=rQ(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}),sO=rQ(function(e,t,i){return e+(i?" ":"")+sA(t)}),s_=rQ(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),sA=rK("toUpperCase");function sF(e,t,i){if(e=st(e),t=i?r:t,r===t){var n;return(n=e,eQ.test(n))?e.match(eq)||[]:e.match(er)||[]}return e.match(t)||[]}var sI=rp(function(e,t){try{return ta(e,r,t)}catch(e){return oG(e)?e:new ew(e)}}),sL=no(function(e,t){return tu(t,function(t){iA(e,t=nB(t),ow(e[t],e))}),e});function sN(e){return function(){return e}}var sB=rZ(),sV=rZ(!0);function sH(e){return e}function sz(e){return i9("function"==typeof e?e:iL(e,1))}var sj=rp(function(e,t){return function(i){return i3(i,e,t)}}),sG=rp(function(e,t){return function(i){return i3(e,i,t)}});function sW(e,t,i){var r=sf(t),n=iX(t,r);null!=i||oq(t)&&(n.length||!r.length)||(i=t,t=e,e=this,n=iX(t,sf(t)));var o=!(oq(i)&&"chain"in i)||!!i.chain,s=oW(e);return tu(n,function(i){var r=t[i];e[i]=r,s&&(e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__);return(i.__actions__=rj(this.__actions__)).push({func:r,args:arguments,thisArg:e}),i.__chain__=t,i}return r.apply(e,tg([this.value()],arguments))})}),e}function sU(){}var s$=r2(tf),sq=r2(td),sK=r2(ty);function sQ(e){return nS(e)?tE(nB(e)):function(t){return iY(t,e)}}var sX=r3(),sY=r3(!0);function sZ(){return[]}function sJ(){return!1}var s0=r1(function(e,t){return e+t},0),s1=r6("ceil"),s2=r1(function(e,t){return e/t},1),s5=r6("floor"),s3=r1(function(e,t){return e*t},1),s4=r6("round"),s8=r1(function(e,t){return e-t},0);return im.after=function(e,t){if("function"!=typeof t)throw new eE(n);return e=o6(e),function(){if(--e<1)return t.apply(this,arguments)}},im.ary=oy,im.assign=si,im.assignIn=sr,im.assignInWith=sn,im.assignWith=so,im.at=ss,im.before=ob,im.bind=ow,im.bindAll=sL,im.bindKey=oC,im.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return oN(e)?e:[e]},im.chain=or,im.chunk=function(e,t,i){t=(i?nx(e,t,i):r===t)?1:t2(o6(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,s=0,a=ey(tP(n/t));o<n;)a[s++]=rv(e,o,o+=t);return a},im.compact=function(e){for(var t=-1,i=null==e?0:e.length,r=0,n=[];++t<i;){var o=e[t];o&&(n[r++]=o)}return n},im.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ey(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return tg(oN(i)?rj(i):[i],iU(t,1))},im.cond=function(e){var t=null==e?0:e.length,i=nc();return e=t?tf(e,function(e){if("function"!=typeof e[1])throw new eE(n);return[i(e[0]),e[1]]}):[],rp(function(i){for(var r=-1;++r<t;){var n=e[r];if(ta(n[0],this,i))return ta(n[1],this,i)}})},im.conforms=function(e){var t,i;return i=sf(t=iL(e,1)),function(e){return iN(e,t,i)}},im.constant=sN,im.countBy=os,im.create=function(e,t){var i=iv(e);return null==t?i:i_(i,t)},im.curry=ox,im.curryRight=oS,im.debounce=ok,im.defaults=sa,im.defaultsDeep=sl,im.defer=oR,im.delay=oE,im.difference=nz,im.differenceBy=nj,im.differenceWith=nG,im.drop=function(e,t,i){var n=null==e?0:e.length;return n?rv(e,(t=i||r===t?1:o6(t))<0?0:t,n):[]},im.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?rv(e,0,(t=n-(t=i||r===t?1:o6(t)))<0?0:t):[]},im.dropRightWhile=function(e,t){return e&&e.length?rP(e,nc(t,3),!0,!0):[]},im.dropWhile=function(e,t){return e&&e.length?rP(e,nc(t,3),!0):[]},im.fill=function(e,t,i,n){var o=null==e?0:e.length;if(!o)return[];i&&"number"!=typeof i&&nx(e,t,i)&&(i=0,n=o);var s=i,a=n,l=e.length;for((s=o6(s))<0&&(s=-s>l?0:l+s),(a=r===a||a>l?l:o6(a))<0&&(a+=l),a=s>a?0:o7(a);s<a;)e[s++]=t;return e},im.filter=function(e,t){return(oN(e)?tc:iW)(e,nc(t,3))},im.flatMap=function(e,t){return iU(of(e,t),1)},im.flatMapDeep=function(e,t){return iU(of(e,t),a)},im.flatMapDepth=function(e,t,i){return i=r===i?1:o6(i),iU(of(e,t),i)},im.flatten=n$,im.flattenDeep=function(e){return(null==e?0:e.length)?iU(e,a):[]},im.flattenDepth=function(e,t){return(null==e?0:e.length)?iU(e,t=r===t?1:o6(t)):[]},im.flip=function(e){return ne(e,512)},im.flow=sB,im.flowRight=sV,im.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,r={};++t<i;){var n=e[t];r[n[0]]=n[1]}return r},im.functions=function(e){return null==e?[]:iX(e,sf(e))},im.functionsIn=function(e){return null==e?[]:iX(e,sg(e))},im.groupBy=oc,im.initial=function(e){return(null==e?0:e.length)?rv(e,0,-1):[]},im.intersection=nK,im.intersectionBy=nQ,im.intersectionWith=nX,im.invert=sc,im.invertBy=sh,im.invokeMap=oh,im.iteratee=sz,im.keyBy=op,im.keys=sf,im.keysIn=sg,im.map=of,im.mapKeys=function(e,t){var i={};return t=nc(t,3),iK(e,function(e,r,n){iA(i,t(e,r,n),e)}),i},im.mapValues=function(e,t){var i={};return t=nc(t,3),iK(e,function(e,r,n){iA(i,r,t(e,r,n))}),i},im.matches=function(e){return rr(iL(e,1))},im.matchesProperty=function(e,t){return rn(e,iL(t,1))},im.memoize=oP,im.merge=sm,im.mergeWith=sv,im.method=sj,im.methodOf=sG,im.mixin=sW,im.negate=oM,im.nthArg=function(e){return e=o6(e),rp(function(t){return rs(t,e)})},im.omit=sy,im.omitBy=function(e,t){return sw(e,oM(nc(t)))},im.once=function(e){return ob(2,e)},im.orderBy=function(e,t,i,n){return null==e?[]:(oN(t)||(t=null==t?[]:[t]),oN(i=n?r:i)||(i=null==i?[]:[i]),ra(e,t,i))},im.over=s$,im.overArgs=oD,im.overEvery=sq,im.overSome=sK,im.partial=oT,im.partialRight=oO,im.partition=og,im.pick=sb,im.pickBy=sw,im.property=sQ,im.propertyOf=function(e){return function(t){return null==e?r:iY(e,t)}},im.pull=nZ,im.pullAll=nJ,im.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?ru(e,t,nc(i,2)):e},im.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?ru(e,t,r,i):e},im.pullAt=n0,im.range=sX,im.rangeRight=sY,im.rearg=o_,im.reject=function(e,t){return(oN(e)?tc:iW)(e,oM(nc(t,3)))},im.remove=function(e,t){var i=[];if(!(e&&e.length))return i;var r=-1,n=[],o=e.length;for(t=nc(t,3);++r<o;){var s=e[r];t(s,r,e)&&(i.push(s),n.push(r))}return rd(e,n),i},im.rest=function(e,t){if("function"!=typeof e)throw new eE(n);return rp(e,t=r===t?t:o6(t))},im.reverse=n1,im.sampleSize=function(e,t,i){return t=(i?nx(e,t,i):r===t)?1:o6(t),(oN(e)?function(e,t){return nL(rj(e),iI(t,0,e.length))}:function(e,t){var i=sS(e);return nL(i,iI(t,0,i.length))})(e,t)},im.set=function(e,t,i){return null==e?e:rf(e,t,i)},im.setWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:rf(e,t,i,n)},im.shuffle=function(e){return(oN(e)?function(e){return nL(rj(e))}:function(e){return nL(sS(e))})(e)},im.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&nx(e,t,i)?(t=0,i=n):(t=null==t?0:o6(t),i=r===i?n:o6(i)),rv(e,t,i)):[]},im.sortBy=om,im.sortedUniq=function(e){return e&&e.length?rC(e):[]},im.sortedUniqBy=function(e,t){return e&&e.length?rC(e,nc(t,2)):[]},im.split=function(e,t,i){return(i&&"number"!=typeof i&&nx(e,t,i)&&(t=i=r),i=r===i?0xffffffff:i>>>0)?(e=st(e))&&("string"==typeof t||null!=t&&!oZ(t))&&!(t=rS(t))&&tH(e)?rF(t$(e),0,i):e.split(t,i):[]},im.spread=function(e,t){if("function"!=typeof e)throw new eE(n);return t=null==t?0:t2(o6(t),0),rp(function(i){var r=i[t],n=rF(i,0,t);return r&&tg(n,r),ta(e,this,n)})},im.tail=function(e){var t=null==e?0:e.length;return t?rv(e,1,t):[]},im.take=function(e,t,i){return e&&e.length?rv(e,0,(t=i||r===t?1:o6(t))<0?0:t):[]},im.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?rv(e,(t=n-(t=i||r===t?1:o6(t)))<0?0:t,n):[]},im.takeRightWhile=function(e,t){return e&&e.length?rP(e,nc(t,3),!1,!0):[]},im.takeWhile=function(e,t){return e&&e.length?rP(e,nc(t,3)):[]},im.tap=function(e,t){return t(e),e},im.throttle=function(e,t,i){var r=!0,o=!0;if("function"!=typeof e)throw new eE(n);return oq(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),ok(e,t,{leading:r,maxWait:t,trailing:o})},im.thru=on,im.toArray=o4,im.toPairs=sC,im.toPairsIn=sx,im.toPath=function(e){return oN(e)?tf(e,nB):o1(e)?[e]:rj(nN(st(e)))},im.toPlainObject=se,im.transform=function(e,t,i){var r=oN(e),n=r||oz(e)||o2(e);if(t=nc(t,4),null==i){var o=e&&e.constructor;i=n?r?new o:[]:oq(e)&&oW(o)?iv(eG(e)):{}}return(n?tu:iK)(e,function(e,r,n){return t(i,e,r,n)}),i},im.unary=function(e){return oy(e,1)},im.union=n2,im.unionBy=n5,im.unionWith=n3,im.uniq=function(e){return e&&e.length?rk(e):[]},im.uniqBy=function(e,t){return e&&e.length?rk(e,nc(t,2)):[]},im.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?rk(e,r,t):[]},im.unset=function(e,t){return null==e||rR(e,t)},im.unzip=n4,im.unzipWith=n8,im.update=function(e,t,i){return null==e?e:rE(e,t,r_(i))},im.updateWith=function(e,t,i,n){return n="function"==typeof n?n:r,null==e?e:rE(e,t,r_(i),n)},im.values=sS,im.valuesIn=function(e){return null==e?[]:tA(e,sg(e))},im.without=n6,im.words=sF,im.wrap=function(e,t){return oT(r_(t),e)},im.xor=n7,im.xorBy=n9,im.xorWith=oe,im.zip=ot,im.zipObject=function(e,t){return rT(e||[],t||[],iD)},im.zipObjectDeep=function(e,t){return rT(e||[],t||[],rf)},im.zipWith=oi,im.entries=sC,im.entriesIn=sx,im.extend=sr,im.extendWith=sn,sW(im,im),im.add=s0,im.attempt=sI,im.camelCase=sk,im.capitalize=sR,im.ceil=s1,im.clamp=function(e,t,i){return r===i&&(i=t,t=r),r!==i&&(i=(i=o9(i))==i?i:0),r!==t&&(t=(t=o9(t))==t?t:0),iI(o9(e),t,i)},im.clone=function(e){return iL(e,4)},im.cloneDeep=function(e){return iL(e,5)},im.cloneDeepWith=function(e,t){return iL(e,5,t="function"==typeof t?t:r)},im.cloneWith=function(e,t){return iL(e,4,t="function"==typeof t?t:r)},im.conformsTo=function(e,t){return null==t||iN(e,t,sf(t))},im.deburr=sE,im.defaultTo=function(e,t){return null==e||e!=e?t:e},im.divide=s2,im.endsWith=function(e,t,i){e=st(e),t=rS(t);var n=e.length,o=i=r===i?n:iI(o6(i),0,n);return(i-=t.length)>=0&&e.slice(i,o)==t},im.eq=oA,im.escape=function(e){return(e=st(e))&&G.test(e)?e.replace(z,tB):e},im.escapeRegExp=function(e){return(e=st(e))&&Y.test(e)?e.replace(X,"\\$&"):e},im.every=function(e,t,i){var n=oN(e)?td:ij;return i&&nx(e,t,i)&&(t=r),n(e,nc(t,3))},im.find=oa,im.findIndex=nW,im.findKey=function(e,t){return tw(e,nc(t,3),iK)},im.findLast=ol,im.findLastIndex=nU,im.findLastKey=function(e,t){return tw(e,nc(t,3),iQ)},im.floor=s5,im.forEach=ou,im.forEachRight=od,im.forIn=function(e,t){return null==e?e:i$(e,nc(t,3),sg)},im.forInRight=function(e,t){return null==e?e:iq(e,nc(t,3),sg)},im.forOwn=function(e,t){return e&&iK(e,nc(t,3))},im.forOwnRight=function(e,t){return e&&iQ(e,nc(t,3))},im.get=su,im.gt=oF,im.gte=oI,im.has=function(e,t){return null!=e&&ny(e,t,i1)},im.hasIn=sd,im.head=nq,im.identity=sH,im.includes=function(e,t,i,r){e=oV(e)?e:sS(e),i=i&&!r?o6(i):0;var n=e.length;return i<0&&(i=t2(n+i,0)),o0(e)?i<=n&&e.indexOf(t,i)>-1:!!n&&tx(e,t,i)>-1},im.indexOf=function(e,t,i){var r=null==e?0:e.length;if(!r)return -1;var n=null==i?0:o6(i);return n<0&&(n=t2(r+n,0)),tx(e,t,n)},im.inRange=function(e,t,i){var n,o,s;return t=o8(t),r===i?(i=t,t=0):i=o8(i),(n=e=o9(e))>=t5(o=t,s=i)&&n<t2(o,s)},im.invoke=sp,im.isArguments=oL,im.isArray=oN,im.isArrayBuffer=oB,im.isArrayLike=oV,im.isArrayLikeObject=oH,im.isBoolean=function(e){return!0===e||!1===e||oK(e)&&iJ(e)==h},im.isBuffer=oz,im.isDate=oj,im.isElement=function(e){return oK(e)&&1===e.nodeType&&!oY(e)},im.isEmpty=function(e){if(null==e)return!0;if(oV(e)&&(oN(e)||"string"==typeof e||"function"==typeof e.splice||oz(e)||o2(e)||oL(e)))return!e.length;var t=nv(e);if(t==v||t==x)return!e.size;if(nE(e))return!re(e).length;for(var i in e)if(e_.call(e,i))return!1;return!0},im.isEqual=function(e,t){return i8(e,t)},im.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:r)?i(e,t):r;return r===n?i8(e,t,r,i):!!n},im.isError=oG,im.isFinite=function(e){return"number"==typeof e&&tJ(e)},im.isFunction=oW,im.isInteger=oU,im.isLength=o$,im.isMap=oQ,im.isMatch=function(e,t){return e===t||i6(e,t,np(t))},im.isMatchWith=function(e,t,i){return i="function"==typeof i?i:r,i6(e,t,np(t),i)},im.isNaN=function(e){return oX(e)&&e!=+e},im.isNative=function(e){if(nR(e))throw new ew("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return i7(e)},im.isNil=function(e){return null==e},im.isNull=function(e){return null===e},im.isNumber=oX,im.isObject=oq,im.isObjectLike=oK,im.isPlainObject=oY,im.isRegExp=oZ,im.isSafeInteger=function(e){return oU(e)&&e>=-0x1fffffffffffff&&e<=0x1fffffffffffff},im.isSet=oJ,im.isString=o0,im.isSymbol=o1,im.isTypedArray=o2,im.isUndefined=function(e){return r===e},im.isWeakMap=function(e){return oK(e)&&nv(e)==R},im.isWeakSet=function(e){return oK(e)&&"[object WeakSet]"==iJ(e)},im.join=function(e,t){return null==e?"":t0.call(e,t)},im.kebabCase=sP,im.last=nY,im.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return -1;var o=n;return r!==i&&(o=(o=o6(i))<0?t2(n+o,0):t5(o,n-1)),t==t?function(e,t,i){for(var r=i+1;r--&&e[r]!==t;);return r}(e,t,o):tC(e,tk,o,!0)},im.lowerCase=sM,im.lowerFirst=sD,im.lt=o5,im.lte=o3,im.max=function(e){return e&&e.length?iG(e,sH,i0):r},im.maxBy=function(e,t){return e&&e.length?iG(e,nc(t,2),i0):r},im.mean=function(e){return tR(e,sH)},im.meanBy=function(e,t){return tR(e,nc(t,2))},im.min=function(e){return e&&e.length?iG(e,sH,rt):r},im.minBy=function(e,t){return e&&e.length?iG(e,nc(t,2),rt):r},im.stubArray=sZ,im.stubFalse=sJ,im.stubObject=function(){return{}},im.stubString=function(){return""},im.stubTrue=function(){return!0},im.multiply=s3,im.nth=function(e,t){return e&&e.length?rs(e,o6(t)):r},im.noConflict=function(){return e4._===this&&(e4._=eN),this},im.noop=sU,im.now=ov,im.pad=function(e,t,i){e=st(e);var r=(t=o6(t))?tU(e):0;if(!t||r>=t)return e;var n=(t-r)/2;return r5(tX(n),i)+e+r5(tP(n),i)},im.padEnd=function(e,t,i){e=st(e);var r=(t=o6(t))?tU(e):0;return t&&r<t?e+r5(t-r,i):e},im.padStart=function(e,t,i){e=st(e);var r=(t=o6(t))?tU(e):0;return t&&r<t?r5(t-r,i)+e:e},im.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t*=1),t4(st(e).replace(Z,""),t||0)},im.random=function(e,t,i){if(i&&"boolean"!=typeof i&&nx(e,t,i)&&(t=i=r),r===i&&("boolean"==typeof t?(i=t,t=r):"boolean"==typeof e&&(i=e,e=r)),r===e&&r===t?(e=0,t=1):(e=o8(e),r===t?(t=e,e=0):t=o8(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var o=t8();return t5(e+o*(t-e+e1("1e-"+((o+"").length-1))),t)}return rc(e,t)},im.reduce=function(e,t,i){var r=oN(e)?tm:tM,n=arguments.length<3;return r(e,nc(t,4),i,n,iH)},im.reduceRight=function(e,t,i){var r=oN(e)?tv:tM,n=arguments.length<3;return r(e,nc(t,4),i,n,iz)},im.repeat=function(e,t,i){return t=(i?nx(e,t,i):r===t)?1:o6(t),rh(st(e),t)},im.replace=function(){var e=arguments,t=st(e[0]);return e.length<3?t:t.replace(e[1],e[2])},im.result=function(e,t,i){t=rA(t,e);var n=-1,o=t.length;for(o||(o=1,e=r);++n<o;){var s=null==e?r:e[nB(t[n])];r===s&&(n=o,s=i),e=oW(s)?s.call(e):s}return e},im.round=s4,im.runInContext=e,im.sample=function(e){return(oN(e)?iP:function(e){return iP(sS(e))})(e)},im.size=function(e){if(null==e)return 0;if(oV(e))return o0(e)?tU(e):e.length;var t=nv(e);return t==v||t==x?e.size:re(e).length},im.snakeCase=sT,im.some=function(e,t,i){var n=oN(e)?ty:ry;return i&&nx(e,t,i)&&(t=r),n(e,nc(t,3))},im.sortedIndex=function(e,t){return rb(e,t)},im.sortedIndexBy=function(e,t,i){return rw(e,t,nc(i,2))},im.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var r=rb(e,t);if(r<i&&oA(e[r],t))return r}return -1},im.sortedLastIndex=function(e,t){return rb(e,t,!0)},im.sortedLastIndexBy=function(e,t,i){return rw(e,t,nc(i,2),!0)},im.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var i=rb(e,t,!0)-1;if(oA(e[i],t))return i}return -1},im.startCase=sO,im.startsWith=function(e,t,i){return e=st(e),i=null==i?0:iI(o6(i),0,e.length),t=rS(t),e.slice(i,i+t.length)==t},im.subtract=s8,im.sum=function(e){return e&&e.length?tD(e,sH):0},im.sumBy=function(e,t){return e&&e.length?tD(e,nc(t,2)):0},im.template=function(e,t,i){var n=im.templateSettings;i&&nx(e,t,i)&&(t=r),e=st(e),t=sn({},t,n,nt);var o,s,a=sn({},t.imports,n.imports,nt),l=sf(a),u=tA(a,l),d=0,c=t.interpolate||ef,h="__p += '",p=ek((t.escape||ef).source+"|"+c.source+"|"+(c===$?es:ef).source+"|"+(t.evaluate||ef).source+"|$","g"),f="//# sourceURL="+(e_.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eY+"]")+"\n";e.replace(p,function(t,i,r,n,a,l){return r||(r=n),h+=e.slice(d,l).replace(eg,tV),i&&(o=!0,h+="' +\n__e("+i+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var g=e_.call(t,"variable")&&t.variable;if(g){if(en.test(g))throw new ew("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(N,""):h).replace(B,"$1").replace(V,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=sI(function(){return eC(l,f+"return "+h).apply(r,u)});if(m.source=h,oG(m))throw m;return m},im.times=function(e,t){if((e=o6(e))<1||e>0x1fffffffffffff)return[];var i=0xffffffff,r=t5(e,0xffffffff);t=nc(t),e-=0xffffffff;for(var n=tT(r,t);++i<e;)t(i);return n},im.toFinite=o8,im.toInteger=o6,im.toLength=o7,im.toLower=function(e){return st(e).toLowerCase()},im.toNumber=o9,im.toSafeInteger=function(e){return e?iI(o6(e),-0x1fffffffffffff,0x1fffffffffffff):0===e?e:0},im.toString=st,im.toUpper=function(e){return st(e).toUpperCase()},im.trim=function(e,t,i){if((e=st(e))&&(i||r===t))return tO(e);if(!e||!(t=rS(t)))return e;var n=t$(e),o=t$(t),s=tI(n,o),a=tL(n,o)+1;return rF(n,s,a).join("")},im.trimEnd=function(e,t,i){if((e=st(e))&&(i||r===t))return e.slice(0,tq(e)+1);if(!e||!(t=rS(t)))return e;var n=t$(e),o=tL(n,t$(t))+1;return rF(n,0,o).join("")},im.trimStart=function(e,t,i){if((e=st(e))&&(i||r===t))return e.replace(Z,"");if(!e||!(t=rS(t)))return e;var n=t$(e),o=tI(n,t$(t));return rF(n,o).join("")},im.truncate=function(e,t){var i=30,n="...";if(oq(t)){var o="separator"in t?t.separator:o;i="length"in t?o6(t.length):i,n="omission"in t?rS(t.omission):n}var s=(e=st(e)).length;if(tH(e)){var a=t$(e);s=a.length}if(i>=s)return e;var l=i-tU(n);if(l<1)return n;var u=a?rF(a,0,l).join(""):e.slice(0,l);if(r===o)return u+n;if(a&&(l+=u.length-l),oZ(o)){if(e.slice(l).search(o)){var d,c=u;for(o.global||(o=ek(o.source,st(ea.exec(o))+"g")),o.lastIndex=0;d=o.exec(c);)var h=d.index;u=u.slice(0,r===h?l:h)}}else if(e.indexOf(rS(o),l)!=l){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+n},im.unescape=function(e){return(e=st(e))&&j.test(e)?e.replace(H,tK):e},im.uniqueId=function(e){var t=++eA;return st(e)+t},im.upperCase=s_,im.upperFirst=sA,im.each=ou,im.eachRight=od,im.first=nq,sW(im,(ev={},iK(im,function(e,t){e_.call(im.prototype,t)||(ev[t]=e)}),ev),{chain:!1}),im.VERSION="4.17.21",tu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){im[e].placeholder=im}),tu(["drop","take"],function(e,t){iw.prototype[e]=function(i){i=r===i?1:t2(o6(i),0);var n=this.__filtered__&&!t?new iw(this):this.clone();return n.__filtered__?n.__takeCount__=t5(i,n.__takeCount__):n.__views__.push({size:t5(i,0xffffffff),type:e+(n.__dir__<0?"Right":"")}),n},iw.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tu(["filter","map","takeWhile"],function(e,t){var i=t+1,r=1==i||3==i;iw.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:nc(e,3),type:i}),t.__filtered__=t.__filtered__||r,t}}),tu(["head","last"],function(e,t){var i="take"+(t?"Right":"");iw.prototype[e]=function(){return this[i](1).value()[0]}}),tu(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");iw.prototype[e]=function(){return this.__filtered__?new iw(this):this[i](1)}}),iw.prototype.compact=function(){return this.filter(sH)},iw.prototype.find=function(e){return this.filter(e).head()},iw.prototype.findLast=function(e){return this.reverse().find(e)},iw.prototype.invokeMap=rp(function(e,t){return"function"==typeof e?new iw(this):this.map(function(i){return i3(i,e,t)})}),iw.prototype.reject=function(e){return this.filter(oM(nc(e)))},iw.prototype.slice=function(e,t){e=o6(e);var i=this;return i.__filtered__&&(e>0||t<0)?new iw(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),r!==t&&(i=(t=o6(t))<0?i.dropRight(-t):i.take(t-e)),i)},iw.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},iw.prototype.toArray=function(){return this.take(0xffffffff)},iK(iw.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=im[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(im.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,l=t instanceof iw,u=a[0],d=l||oN(t),c=function(e){var t=o.apply(im,tg([e],a));return n&&h?t[0]:t};d&&i&&"function"==typeof u&&1!=u.length&&(l=d=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,g=l&&!p;if(!s&&d){t=g?t:new iw(this);var m=e.apply(t,a);return m.__actions__.push({func:on,args:[c],thisArg:r}),new ib(m,h)}return f&&g?e.apply(this,a):(m=this.thru(c),f?n?m.value()[0]:m.value():m)})}),tu(["pop","push","shift","sort","splice","unshift"],function(e){var t=eP[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);im.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var n=this.value();return t.apply(oN(n)?n:[],e)}return this[i](function(i){return t.apply(oN(i)?i:[],e)})}}),iK(iw.prototype,function(e,t){var i=im[t];if(i){var r=i.name+"";e_.call(is,r)||(is[r]=[]),is[r].push({name:t,func:i})}}),is[rJ(r,2).name]=[{name:"wrapper",func:r}],iw.prototype.clone=function(){var e=new iw(this.__wrapped__);return e.__actions__=rj(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rj(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rj(this.__views__),e},iw.prototype.reverse=function(){if(this.__filtered__){var e=new iw(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},iw.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=oN(e),r=t<0,n=i?e.length:0,o=function(e,t,i){for(var r=-1,n=i.length;++r<n;){var o=i[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=t5(t,e+s);break;case"takeRight":e=t2(e,t-s)}}return{start:e,end:t}}(0,n,this.__views__),s=o.start,a=o.end,l=a-s,u=r?a:s-1,d=this.__iteratees__,c=d.length,h=0,p=t5(l,this.__takeCount__);if(!i||!r&&n==l&&p==l)return rM(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,m=e[u+=t];++g<c;){var v=d[g],y=v.iteratee,b=v.type,w=y(m);if(2==b)m=w;else if(!w)if(1==b)continue e;else break e}f[h++]=m}return f},im.prototype.at=oo,im.prototype.chain=function(){return or(this)},im.prototype.commit=function(){return new ib(this.value(),this.__chain__)},im.prototype.next=function(){this.__values__===r&&(this.__values__=o4(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}},im.prototype.plant=function(e){for(var t,i=this;i instanceof iy;){var n=nH(i);n.__index__=0,n.__values__=r,t?o.__wrapped__=n:t=n;var o=n;i=i.__wrapped__}return o.__wrapped__=e,t},im.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof iw){var t=e;return this.__actions__.length&&(t=new iw(this)),(t=t.reverse()).__actions__.push({func:on,args:[n1],thisArg:r}),new ib(t,this.__chain__)}return this.thru(n1)},im.prototype.toJSON=im.prototype.valueOf=im.prototype.value=function(){return rM(this.__wrapped__,this.__actions__)},im.prototype.first=im.prototype.head,e3&&(im.prototype[e3]=function(){return this}),im}();if("function"==typeof define&&"object"==typeof define.amd&&define.amd)e4._=tQ,e.r,r!==tQ&&e.v(tQ);else e6?((e6.exports=tQ)._=tQ,e8._=tQ):e4._=tQ}).call(e.e)},645364,400905,573478,520584,e=>{"use strict";let t,i;var r=e.i(19483),n=e.i(324066),o=e.i(992089),s=e.i(384339),a=e.i(320182),l=e.i(228337),u=e.i(187725),d=e.i(420856),c=e.i(916955);function h(e,t){let i=[];return e.forEach(e=>{i.some(t=>t.name===e.name)||i.push(e)}),t.forEach(e=>{i.some(t=>t.name===e.name)||i.push(e)}),i}let p=e=>{let{lineageGraph:t}=(0,c.useLineageGraphContext)(),i=l.default.find(t?.nodes,{data:{name:e}}),r=(0,u.useMemo)(()=>i?function(e){function t(e){return e?.columns?Object.values(e.columns).filter(e=>null!=e):[]}return h(t(e.data.data.base),t(e.data.data.current))}(i):[],[i]),[n,o]=(0,u.useState)([]),[s,a]=(0,u.useState)(),[p,f]=(0,u.useState)(!0),[g,m]=(0,u.useState)(null),[v,y]=(0,u.useState)([]),[b,w]=(0,u.useState)(i?.id),C=i?i.data.data.current?.primary_key:void 0,x=(0,u.useCallback)(async()=>{if(i)try{let e=(await (0,d.getModelInfo)(i.id)).model;if(!e.base.columns||!e.current.columns)return void o([]);a(e.current.primary_key);let t=Object.values(e.base.columns),r=Object.values(e.current.columns);o(h(t,r))}catch(e){m(e)}},[i]);return(r!==v||i?.id!==b)&&(y(r),w(i?.id),r.length>0?(o(r),a(C),f(!1)):i?.id===void 0&&(o([]),f(!1))),(0,u.useEffect)(()=>{0===r.length&&i?.id!==void 0&&(x().catch(e=>{console.error(e)}),f(!1))},[x,i?.id,r]),{columns:n,primaryKey:s,isLoading:p,error:g}};function f(e){let t=e.trim().toUpperCase();return!!["CHAR","VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT","NCHAR","NVARCHAR","VARCHAR2","NVARCHAR2","CLOB","NCLOB","VARCHAR(MAX)","XML","JSON"].includes(t)||/^(VARCHAR|NVARCHAR|VARCHAR2|NVARCHAR2|CHAR|NCHAR)\(\d+\)$/.test(t)}function g(e){return["BOOLEAN","TINYINT(1)","BIT","NUMBER(1)","BOOL"].includes(e.toUpperCase())}function m(e){return["DATE","DATETIME","TIMESTAMP","TIME","YEAR","DATETIME2","SMALLDATETIME","DATETIMEOFFSET","INTERVAL","TIMESTAMPTZ","TIMETZ","TIMESTAMP WITH TIME ZONE","TIMESTAMP WITH LOCAL TIME ZONE","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP_TZ"].includes(e.toUpperCase())}function v(e){return!f(e)&&!g(e)&&!m(e)}function y({params:e,onParamsChanged:t,setIsReadyToExecute:i}){let{columns:l,isLoading:u,error:d}=p(e.model),c=l.filter(e=>!f(e.type)&&!g(e.type)&&!m(e.type));return u?(0,r.jsx)(n.default,{children:"Loading..."}):0===l.length||d?(0,r.jsx)(n.default,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,r.jsx)(n.default,{sx:{m:"16px"},children:(0,r.jsxs)(o.default,{fullWidth:!0,disabled:0===c.length,children:[(0,r.jsx)(s.default,{sx:{mb:1},children:"Pick a column to show Histogram Diff"}),(0,r.jsxs)(a.default,{value:e.column_name,onChange:r=>{let n=r.target.value;i(!!n);let o=c.find(e=>e.name===n)?.type??"";t({...e,column_name:n,column_type:o})},children:[(0,r.jsx)("option",{value:"",children:0!==c.length?"Select column":"No numeric column is available"}),c.map(e=>(0,r.jsxs)("option",{value:e.name,className:"no-track-pii-safe",children:[e.name," : ",e.type]},e.name))]})]})})}function b(e){return e+.5|0}e.s(["default",0,p],400905),e.s(["HistogramDiffForm",()=>y,"supportsHistogramDiff",()=>v],645364);let w=(e,t,i)=>Math.max(Math.min(e,i),t);function C(e){return w(b(2.55*e),0,255)}function x(e){return w(b(255*e),0,255)}function S(e){return w(b(e/2.55)/100,0,1)}function k(e){return w(b(100*e),0,100)}let R={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},E=[..."0123456789ABCDEF"],P=e=>E[15&e],M=e=>E[(240&e)>>4]+E[15&e],D=e=>(240&e)>>4==(15&e),T=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function O(e,t,i){let r=t*Math.min(i,1-i),n=(t,n=(t+e/30)%12)=>i-r*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function _(e,t,i){let r=(r,n=(r+e/60)%6)=>i-i*t*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function A(e,t,i){let r,n=O(e,1,.5);for(t+i>1&&(r=1/(t+i),t*=r,i*=r),r=0;r<3;r++)n[r]*=1-t-i,n[r]+=t;return n}function F(e){let t,i,r,n=e.r/255,o=e.g/255,s=e.b/255,a=Math.max(n,o,s),l=Math.min(n,o,s),u=(a+l)/2;a!==l&&(r=a-l,i=u>.5?r/(2-a-l):r/(a+l),t=60*(t=n===a?(o-s)/r+6*(o<s):o===a?(s-n)/r+2:(n-o)/r+4)+.5);return[0|t,i||0,u]}function I(e,t,i,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,r)).map(x)}function L(e){return(e%360+360)%360}let N={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},B={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},V=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,H=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,z=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function j(e,t,i){if(e){let r=F(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*i,0===t?360:1)),e.r=(r=I(O,r,void 0,void 0))[0],e.g=r[1],e.b=r[2]}}function G(e,t){return e?Object.assign(t||{},e):e}function W(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=x(e[3]))):(t=G(e,{r:0,g:0,b:0,a:1})).a=x(t.a),t}class U{constructor(e){let i;if(e instanceof U)return e;const r=typeof e;"object"===r?i=W(e):"string"===r&&(i=function(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*R[e[1]],g:255&17*R[e[2]],b:255&17*R[e[3]],a:5===i?17*R[e[4]]:255}:(7===i||9===i)&&(t={r:R[e[1]]<<4|R[e[2]],g:R[e[3]]<<4|R[e[4]],b:R[e[5]]<<4|R[e[6]],a:9===i?R[e[7]]<<4|R[e[8]]:255})),t}(e)||function(e){t||((t=function(){let e,t,i,r,n,o={},s=Object.keys(B),a=Object.keys(N);for(e=0;e<s.length;e++){for(t=0,r=n=s[e];t<a.length;t++)i=a[t],n=n.replace(i,N[i]);i=parseInt(B[r],16),o[n]=[i>>16&255,i>>8&255,255&i]}return o}()).transparent=[0,0,0,0]);let i=t[e.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:4===i.length?i[3]:255}}(e)||function(e){return"r"===e.charAt(0)?function(e){let t,i,r,n=V.exec(e),o=255;if(n){if(n[7]!==t){let e=+n[7];o=n[8]?C(e):w(255*e,0,255)}return t=+n[1],i=+n[3],r=+n[5],t=255&(n[2]?C(t):w(t,0,255)),{r:t,g:i=255&(n[4]?C(i):w(i,0,255)),b:r=255&(n[6]?C(r):w(r,0,255)),a:o}}}(e):function(e){let t,i=T.exec(e),r=255;if(!i)return;i[5]!==t&&(r=i[6]?C(+i[5]):x(+i[5]));let n=L(+i[2]),o=i[3]/100,s=i[4]/100;return{r:(t="hwb"===i[1]?I(A,n,o,s):"hsv"===i[1]?I(_,n,o,s):I(O,n,o,s))[0],g:t[1],b:t[2],a:r}}(e)}(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=G(this._rgb);return e&&(e.a=S(e.a)),e}set rgb(e){this._rgb=W(e)}rgbString(){var e;return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${S(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0}hexString(){var e,t;let i,r;return this._valid?(t=D((i=e=this._rgb).r)&&D(i.g)&&D(i.b)&&D(i.a)?P:M,e?"#"+t(e.r)+t(e.g)+t(e.b)+(r=e.a,r<255?t(r):""):void 0):void 0}hslString(){return this._valid?function(e){if(!e)return;let t=F(e),i=t[0],r=k(t[1]),n=k(t[2]);return e.a<255?`hsla(${i}, ${r}%, ${n}%, ${S(e.a)})`:`hsl(${i}, ${r}%, ${n}%)`}(this._rgb):void 0}mix(e,t){if(e){let i,r=this.rgb,n=e.rgb,o=t===i?.5:t,s=2*o-1,a=r.a-n.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,r.r=255&l*r.r+i*n.r+.5,r.g=255&l*r.g+i*n.g+.5,r.b=255&l*r.b+i*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(e,t){var i,r;let n,o,s;return e&&(this._rgb=(i=this._rgb,r=e._rgb,n=z(S(i.r)),o=z(S(i.g)),s=z(S(i.b)),{r:x(H(n+t*(z(S(r.r))-n))),g:x(H(o+t*(z(S(r.g))-o))),b:x(H(s+t*(z(S(r.b))-s))),a:i.a+t*(r.a-i.a)})),this}clone(){return new U(this.rgb)}alpha(e){return this._rgb.a=x(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=b(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return j(this._rgb,2,e),this}darken(e){return j(this._rgb,2,-e),this}saturate(e){return j(this._rgb,1,e),this}desaturate(e){return j(this._rgb,1,-e),this}rotate(e){var t,i;return t=this._rgb,(i=F(t))[0]=L(i[0]+e),t.r=(i=I(O,i,void 0,void 0))[0],t.g=i[1],t.b=i[2],this}}function $(){}let q=(i=0,()=>i++);function K(e){return null==e}function Q(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function X(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Y(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function Z(e,t){return Y(e)?e:t}function J(e,t){return void 0===e?t:e}let ee=(e,t)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function et(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)}function ei(e,t,i,r){let n,o,s;if(Q(e))if(o=e.length,r)for(n=o-1;n>=0;n--)t.call(i,e[n],n);else for(n=0;n<o;n++)t.call(i,e[n],n);else if(X(e))for(n=0,o=(s=Object.keys(e)).length;n<o;n++)t.call(i,e[s[n]],s[n])}function er(e,t){let i,r,n,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,r=e.length;i<r;++i)if(n=e[i],o=t[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function en(e){if(Q(e))return e.map(en);if(X(e)){let t=Object.create(null),i=Object.keys(e),r=i.length,n=0;for(;n<r;++n)t[i[n]]=en(e[i[n]]);return t}return e}function eo(e){return -1===["__proto__","prototype","constructor"].indexOf(e)}function es(e,t,i,r){if(!eo(e))return;let n=t[e],o=i[e];X(n)&&X(o)?ea(n,o,r):t[e]=en(o)}function ea(e,t,i){let r,n=Q(t)?t:[t],o=n.length;if(!X(e))return e;let s=(i=i||{}).merger||es;for(let t=0;t<o;++t){if(!X(r=n[t]))continue;let o=Object.keys(r);for(let t=0,n=o.length;t<n;++t)s(o[t],e,r,i)}return e}function el(e,t){return ea(e,t,{merger:eu})}function eu(e,t,i){if(!eo(e))return;let r=t[e],n=i[e];X(r)&&X(n)?el(r,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=en(n))}let ed={"":e=>e,x:e=>e.x,y:e=>e.y};function ec(e,t){let i;return(ed[t]||(ed[t]=(i=function(e){let t=e.split("."),i=[],r="";for(let e of t)(r+=e).endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}(t),e=>{for(let t of i){if(""===t)break;e=e&&e[t]}return e})))(e)}function eh(e){return e.charAt(0).toUpperCase()+e.slice(1)}let ep=e=>void 0!==e,ef=e=>"function"==typeof e,eg=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0},em=Math.PI,ev=2*em,ey=ev+em,eb=1/0,ew=em/180,eC=em/2,ex=em/4,eS=2*em/3,ek=Math.log10,eR=Math.sign;function eE(e,t,i){return Math.abs(e-t)<i}function eP(e){let t=Math.round(e),i=Math.pow(10,Math.floor(ek(e=eE(e,t,e/1e3)?t:e))),r=e/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function eM(e){return"symbol"!=typeof e&&("object"!=typeof e||null===e||!!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e))&&!isNaN(parseFloat(e))&&isFinite(e)}function eD(e,t,i){let r,n,o;for(r=0,n=e.length;r<n;r++)isNaN(o=e[r][i])||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function eT(e){return em/180*e}function eO(e){if(!Y(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function e_(e,t){let i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r),o=Math.atan2(r,i);return o<-.5*em&&(o+=ev),{angle:o,distance:n}}function eA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function eF(e,t){return(e-t+ey)%ev-em}function eI(e){return(e%ev+ev)%ev}function eL(e,t,i,r){let n=eI(e),o=eI(t),s=eI(i),a=eI(o-n),l=eI(s-n),u=eI(n-o),d=eI(n-s);return n===o||n===s||r&&o===s||a>l&&u<d}function eN(e,t,i){return Math.max(t,Math.min(i,e))}function eB(e,t,i,r=1e-6){return e>=Math.min(t,i)-r&&e<=Math.max(t,i)+r}function eV(e,t,i){let r;i=i||(i=>e[i]<t);let n=e.length-1,o=0;for(;n-o>1;)i(r=o+n>>1)?o=r:n=r;return{lo:o,hi:n}}let eH=(e,t,i,r)=>eV(e,i,r?r=>{let n=e[r][t];return n<i||n===i&&e[r+1][t]===i}:r=>e[r][t]<i),ez=(e,t,i)=>eV(e,i,r=>e[r][t]>=i),ej=["push","pop","shift","splice","unshift"];function eG(e,t){let i=e._chartjs;if(!i)return;let r=i.listeners,n=r.indexOf(t);-1!==n&&r.splice(n,1),r.length>0||(ej.forEach(t=>{delete e[t]}),delete e._chartjs)}function eW(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}let eU="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function e$(e,t){let i=[],r=!1;return function(...n){i=n,r||(r=!0,eU.call(window,()=>{r=!1,e.apply(t,i)}))}}let eq=e=>"start"===e?"left":"end"===e?"right":"center",eK=(e,t,i)=>"start"===e?t:"end"===e?i:(t+i)/2;function eQ(e,t,i){let r=t.length,n=0,o=r;if(e._sorted){let{iScale:s,vScale:a,_parsed:l}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=s.axis,{min:c,max:h,minDefined:p,maxDefined:f}=s.getUserBounds();if(p){if(n=Math.min(eH(l,d,c).lo,i?r:eH(t,d,s.getPixelForValue(c)).lo),u){let e=l.slice(0,n+1).reverse().findIndex(e=>!K(e[a.axis]));n-=Math.max(0,e)}n=eN(n,0,r-1)}if(f){let e=Math.max(eH(l,s.axis,h,!0).hi+1,i?0:eH(t,d,s.getPixelForValue(h),!0).hi+1);if(u){let t=l.slice(e-1).findIndex(e=>!K(e[a.axis]));e+=Math.max(0,t)}o=eN(e,n,r)-n}else o=r-n}return{start:n,count:o}}function eX(e){let{xScale:t,yScale:i,_scaleRanges:r}=e,n={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!r)return e._scaleRanges=n,!0;let o=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,n),o}let eY=e=>0===e||1===e,eZ=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ev/i)),eJ=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*ev/i)+1,e0={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*eC)+1,easeOutSine:e=>Math.sin(e*eC),easeInOutSine:e=>-.5*(Math.cos(em*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>eY(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(-Math.pow(2,-10*(2*e-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>eY(e)?e:eZ(e,.075,.3),easeOutElastic:e=>eY(e)?e:eJ(e,.075,.3),easeInOutElastic:e=>eY(e)?e:e<.5?.5*eZ(2*e,.1125,.45):.5+.5*eJ(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-e0.easeOutBounce(1-e),easeOutBounce:e=>e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,easeInOutBounce:e=>e<.5?.5*e0.easeInBounce(2*e):.5*e0.easeOutBounce(2*e-1)+.5};function e1(e){if(e&&"object"==typeof e){let t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function e2(e){return e1(e)?e:new U(e)}function e5(e){return e1(e)?e:new U(e).saturate(.5).darken(.1).hexString()}let e3=["x","y","borderWidth","radius","tension"],e4=["color","borderColor","backgroundColor"],e8=new Map;function e6(e,t,i){var r;let n,o;return(n=t+JSON.stringify(r=(r=i)||{}),!(o=e8.get(n))&&(o=new Intl.NumberFormat(t,r),e8.set(n,o)),o).format(e)}let e7={values:e=>Q(e)?e:""+e,numeric(e,t,i){let r;if(0===e)return"0";let n=this.chart.options.locale,o=e;if(i.length>1){var s,a;let t,n=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(n<1e-4||n>1e15)&&(r="scientific"),s=e,Math.abs(t=(a=i).length>3?a[2].value-a[1].value:a[1].value-a[0].value)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),o=t}let l=ek(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),e6(e,n,d)},logarithmic(e,t,i){return 0===e?"0":[1,2,3,5,10,15].includes(i[t].significand||e/Math.pow(10,Math.floor(ek(e))))||t>.8*i.length?e7.numeric.call(this,e,t,i):""}},e9=Object.create(null),te=Object.create(null);function tt(e,t){if(!t)return e;let i=t.split(".");for(let t=0,r=i.length;t<r;++t){let r=i[t];e=e[r]||(e[r]=Object.create(null))}return e}function ti(e,t,i){return"string"==typeof t?ea(tt(e,t),i):ea(tt(e,""),t)}var tr=new class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>e5(t.backgroundColor),this.hoverBorderColor=(e,t)=>e5(t.borderColor),this.hoverColor=(e,t)=>e5(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ti(this,e,t)}get(e){return tt(this,e)}describe(e,t){return ti(te,e,t)}override(e,t){return ti(e9,e,t)}route(e,t,i,r){let n=tt(this,e),o=tt(this,i),s="_"+t;Object.defineProperties(n,{[s]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){let e=this[s],t=o[r];return X(e)?Object.assign({},t,e):J(e,t)},set(e){this[s]=e}}})}apply(e){e.forEach(e=>e(this))}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:e4},numbers:{type:"number",properties:e3}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:e7.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function tn(e,t,i,r,n){let o=t[n];return o||(o=t[n]=e.measureText(n).width,i.push(n)),o>r&&(r=o),r}function to(e,t,i){let r=e.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((t-n)*r)/r+n}function ts(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function ta(e,t,i,r){tl(e,t,i,r,null)}function tl(e,t,i,r,n){let o,s,a,l,u,d,c,h,p=t.pointStyle,f=t.rotation,g=t.radius,m=(f||0)*ew;if(p&&"object"==typeof p&&("[object HTMLImageElement]"===(o=p.toString())||"[object HTMLCanvasElement]"===o)){e.save(),e.translate(i,r),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!isNaN(g)&&!(g<=0)){switch(e.beginPath(),p){default:n?e.ellipse(i,r,n/2,g,0,0,ev):e.arc(i,r,g,0,ev),e.closePath();break;case"triangle":d=n?n/2:g,e.moveTo(i+Math.sin(m)*d,r-Math.cos(m)*g),m+=eS,e.lineTo(i+Math.sin(m)*d,r-Math.cos(m)*g),m+=eS,e.lineTo(i+Math.sin(m)*d,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":u=.516*g,s=Math.cos(m+ex)*(l=g-u),c=Math.cos(m+ex)*(n?n/2-u:l),a=Math.sin(m+ex)*l,h=Math.sin(m+ex)*(n?n/2-u:l),e.arc(i-c,r-a,u,m-em,m-eC),e.arc(i+h,r-s,u,m-eC,m),e.arc(i+c,r+a,u,m,m+eC),e.arc(i-h,r+s,u,m+eC,m+em),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,d=n?n/2:l,e.rect(i-d,r-l,2*d,2*l);break}m+=ex;case"rectRot":c=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(n?n/2:g),e.moveTo(i-c,r-a),e.lineTo(i+h,r-s),e.lineTo(i+c,r+a),e.lineTo(i-h,r+s),e.closePath();break;case"crossRot":m+=ex;case"cross":c=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(n?n/2:g),e.moveTo(i-c,r-a),e.lineTo(i+c,r+a),e.moveTo(i+h,r-s),e.lineTo(i-h,r+s);break;case"star":c=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(n?n/2:g),e.moveTo(i-c,r-a),e.lineTo(i+c,r+a),e.moveTo(i+h,r-s),e.lineTo(i-h,r+s),m+=ex,c=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(n?n/2:g),e.moveTo(i-c,r-a),e.lineTo(i+c,r+a),e.moveTo(i+h,r-s),e.lineTo(i-h,r+s);break;case"line":s=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(i-s,r-a),e.lineTo(i+s,r+a);break;case"dash":e.moveTo(i,r),e.lineTo(i+Math.cos(m)*(n?n/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function tu(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function td(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function tc(e){e.restore()}function th(e,t,i,r,n){if(!t)return e.lineTo(i.x,i.y);if("middle"===n){let r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else"after"===n!=!!r?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function tp(e,t,i,r){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function tf(e,t,i,r,n,o={}){let s,a,l=Q(t)?t:[t],u=o.strokeWidth>0&&""!==o.strokeColor;for(e.save(),e.font=n.string,o.translation&&e.translate(o.translation[0],o.translation[1]),K(o.rotation)||e.rotate(o.rotation),o.color&&(e.fillStyle=o.color),o.textAlign&&(e.textAlign=o.textAlign),o.textBaseline&&(e.textBaseline=o.textBaseline),s=0;s<l.length;++s)a=l[s],o.backdrop&&function(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}(e,o.backdrop),u&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),K(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(a,i,r,o.maxWidth)),e.fillText(a,i,r,o.maxWidth),function(e,t,i,r,n){if(n.strikethrough||n.underline){let o=e.measureText(r),s=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,u=i+o.actualBoundingBoxDescent,d=n.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(s,d),e.lineTo(a,d),e.stroke()}}(e,i,r,a,o),r+=Number(n.lineHeight);e.restore()}function tg(e,t){let{x:i,y:r,w:n,h:o,radius:s}=t;e.arc(i+s.topLeft,r+s.topLeft,s.topLeft,1.5*em,em,!0),e.lineTo(i,r+o-s.bottomLeft),e.arc(i+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,em,eC,!0),e.lineTo(i+n-s.bottomRight,r+o),e.arc(i+n-s.bottomRight,r+o-s.bottomRight,s.bottomRight,eC,0,!0),e.lineTo(i+n,r+s.topRight),e.arc(i+n-s.topRight,r+s.topRight,s.topRight,0,-eC,!0),e.lineTo(i+s.topLeft,r)}let tm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,ty=e=>+e||0;function tb(e,t){let i={},r=X(t),n=r?Object.keys(t):t,o=X(e)?r?i=>J(e[i],e[t[i]]):t=>e[t]:()=>e;for(let e of n)i[e]=ty(o(e));return i}function tw(e){return tb(e,{top:"y",right:"x",bottom:"y",left:"x"})}function tC(e){return tb(e,["topLeft","topRight","bottomLeft","bottomRight"])}function tx(e){let t=tw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function tS(e,t){e=e||{},t=t||tr.font;let i=J(e.size,t.size);"string"==typeof i&&(i=parseInt(i,10));let r=J(e.style,t.style);r&&!(""+r).match(tv)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let n={family:J(e.family,t.family),lineHeight:function(e,t){let i=(""+e).match(tm);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e}(J(e.lineHeight,t.lineHeight),i),size:i,style:r,weight:J(e.weight,t.weight),string:""};return n.string=!n||K(n.size)||K(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family,n}function tk(e,t,i,r){let n,o,s,a=!0;for(n=0,o=e.length;n<o;++n)if(void 0!==(s=e[n])&&(void 0!==t&&"function"==typeof s&&(s=s(t),a=!1),void 0!==i&&Q(s)&&(s=s[i%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function tR(e,t){return Object.assign(Object.create(e),t)}function tE(e,t=[""],i,r,n=()=>e[0]){let o=i||e;return void 0===r&&(r=tI("_fallback",e)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:r,_getTarget:n,override:i=>tE([i,...e],t,o,r)},{deleteProperty:(t,i)=>(delete t[i],delete t._keys,delete e[0][i],!0),get:(i,r)=>tO(i,r,()=>(function(e,t,i,r){let n;for(let o of t)if(void 0!==(n=tI(tD(o,e),i)))return tT(e,n)?tA(i,r,e,n):n})(r,t,e,i)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>tL(e).includes(t),ownKeys:e=>tL(e),set(e,t,i){let r=e._storage||(e._storage=n());return e[t]=r[t]=i,delete e._keys,!0}})}function tP(e,t,i,r){return new Proxy({_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:tM(e,r),setContext:t=>tP(e,t,i,r),override:n=>tP(e.override(n),t,i,r)},{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,t,i)=>tO(e,t,()=>(function(e,t,i){let{_proxy:r,_context:n,_subProxy:o,_descriptors:s}=e,a=r[t];return ef(a)&&s.isScriptable(t)&&(a=function(e,t,i,r){let{_proxy:n,_context:o,_subProxy:s,_stack:a}=i;if(a.has(e))throw Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(o,s||r);return a.delete(e),tT(e,l)&&(l=tA(n._scopes,n,e,l)),l}(t,a,e,i)),Q(a)&&a.length&&(a=function(e,t,i,r){let{_proxy:n,_context:o,_subProxy:s,_descriptors:a}=i;if(void 0!==o.index&&r(e))return t[o.index%t.length];if(X(t[0])){let i=t,r=n._scopes.filter(e=>e!==i);for(let l of(t=[],i)){let i=tA(r,n,e,l);t.push(tP(i,o,s&&s[e],a))}}return t}(t,a,e,s.isIndexable)),tT(t,a)&&(a=tP(a,n,o&&o[t],s)),a})(e,t,i)),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,r)=>(e[i]=r,delete t[i],!0)})}function tM(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:r=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:i,indexable:r,isScriptable:ef(i)?i:()=>i,isIndexable:ef(r)?r:()=>r}}let tD=(e,t)=>e?e+eh(t):t,tT=(e,t)=>X(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function tO(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];let r=i();return e[t]=r,r}let t_=(e,t)=>!0===e?t:"string"==typeof e?ec(t,e):void 0;function tA(e,t,i,r){var n;let o=t._rootScopes,s=(n=t._fallback,ef(n)?n(i,r):n),a=[...e,...o],l=new Set;l.add(r);let u=tF(l,a,i,s||i,r);return null!==u&&(void 0===s||s===i||null!==(u=tF(l,a,s,u,r)))&&tE(Array.from(l),[""],o,s,()=>{var e,n,o;let s,a;return e=t,n=i,o=r,n in(s=e._getTarget())||(s[n]={}),Q(a=s[n])&&X(o)?o:a||{}})}function tF(e,t,i,r,n){for(;i;)i=function(e,t,i,r,n){for(let s of t){let t=t_(i,s);if(t){var o;e.add(t);let s=(o=t._fallback,ef(o)?o(i,n):o);if(void 0!==s&&s!==i&&s!==r)return s}else if(!1===t&&void 0!==r&&i!==r)return null}return!1}(e,t,i,r,n);return i}function tI(e,t){for(let i of t){if(!i)continue;let t=i[e];if(void 0!==t)return t}}function tL(e){let t=e._keys;return t||(t=e._keys=function(e){let t=new Set;for(let i of e)for(let e of Object.keys(i).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function tN(e,t,i,r){let n,o,s,{iScale:a}=e,{key:l="r"}=this._parsing,u=Array(r);for(n=0;n<r;++n)s=t[o=n+i],u[n]={r:a.parse(ec(s,l),o)};return u}let tB=Number.EPSILON||1e-14,tV=(e,t)=>t<e.length&&!e[t].skip&&e[t],tH=e=>"x"===e?"y":"x";function tz(e,t,i){return Math.max(Math.min(e,i),t)}function tj(){return"undefined"!=typeof window&&"undefined"!=typeof document}function tG(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function tW(e,t,i){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[i])):r=e,r}let tU=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),t$=["top","right","bottom","left"];function tq(e,t,i){let r={};i=i?"-"+i:"";for(let n=0;n<4;n++){let o=t$[n];r[o]=parseFloat(e[t+"-"+o+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function tK(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:r}=t,n=tU(i),o="border-box"===n.boxSizing,s=tq(n,"padding"),a=tq(n,"border","width"),{x:l,y:u,box:d}=function(e,t){let i,r,n,o=e.touches,s=o&&o.length?o[0]:e,{offsetX:a,offsetY:l}=s,u=!1;if(n=e.target,(a>0||l>0)&&(!n||!n.shadowRoot))i=a,r=l;else{let e=t.getBoundingClientRect();i=s.clientX-e.left,r=s.clientY-e.top,u=!0}return{x:i,y:r,box:u}}(e,i),c=s.left+(d&&a.left),h=s.top+(d&&a.top),{width:p,height:f}=t;return o&&(p-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-c)/p*i.width/r),y:Math.round((u-h)/f*i.height/r)}}let tQ=e=>Math.round(10*e)/10;function tX(e,t,i){let r=t||1,n=tQ(e.height*r),o=tQ(e.width*r);e.height=tQ(e.height),e.width=tQ(e.width);let s=e.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==n||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=n,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}let tY=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};tj()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(e){}return e}();function tZ(e,t){let i=tU(e).getPropertyValue(t),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tJ(e,t,i,r){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function t0(e,t,i,r){return{x:e.x+i*(t.x-e.x),y:"middle"===r?i<.5?e.y:t.y:"after"===r?i<1?e.y:t.y:i>0?t.y:e.y}}function t1(e,t,i,r){let n={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},s=tJ(e,n,i),a=tJ(n,o,i),l=tJ(o,t,i),u=tJ(s,a,i),d=tJ(a,l,i);return tJ(u,d,i)}function t2(e,t,i){var r;return e?(r=i,{x:e=>t+t+r-e,setWidth(e){r=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function t5(e,t){let i,r;("ltr"===t||"rtl"===t)&&(r=[(i=e.canvas.style).getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=r)}function t3(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function t4(e){return"angle"===e?{between:eL,compare:eF,normalize:eI}:{between:eB,compare:(e,t)=>e-t,normalize:e=>e}}function t8({start:e,end:t,count:i,loop:r,style:n}){return{start:e%i,end:t%i,loop:r&&(t-e+1)%i==0,style:n}}function t6(e,t,i){let r,n,o;if(!i)return[e];let{property:s,start:a,end:l}=i,u=t.length,{compare:d,between:c,normalize:h}=t4(s),{start:p,end:f,loop:g,style:m}=function(e,t,i){let r,{property:n,start:o,end:s}=i,{between:a,normalize:l}=t4(n),u=t.length,{start:d,end:c,loop:h}=e;if(h){for(d+=u,c+=u,r=0;r<u&&a(l(t[d%u][n]),o,s);++r)d--,c--;d%=u,c%=u}return c<d&&(c+=u),{start:d,end:c,loop:h,style:e.style}}(e,t,i),v=[],y=!1,b=null,w=()=>y||c(a,o,r)&&0!==d(a,o),C=()=>!y||0===d(l,r)||c(l,o,r);for(let e=p,i=p;e<=f;++e)(n=t[e%u]).skip||(r=h(n[s]))!==o&&(y=c(r,a,l),null===b&&w()&&(b=0===d(r,a)?e:i),null!==b&&C()&&(v.push(t8({start:b,end:e,loop:g,count:u,style:m})),b=null),i=e,o=r);return null!==b&&v.push(t8({start:b,end:f,loop:g,count:u,style:m})),v}function t7(e,t){let i=[],r=e.segments;for(let n=0;n<r.length;n++){let o=t6(r[n],e.points,t);o.length&&i.push(...o)}return i}function t9(e,t,i,r){return r&&r.setContext&&i?function(e,t,i,r){let n=e._chart.getContext(),o=ie(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,l=i.length,u=[],d=o,c=t[0].start,h=c;function p(e,t,r,n){let o=a?-1:1;if(e!==t){for(e+=l;i[e%l].skip;)e-=o;for(;i[t%l].skip;)t+=o;e%l!=t%l&&(u.push({start:e%l,end:t%l,loop:r,style:n}),d=n,c=t%l)}}for(let e of t){let t,o=i[(c=a?c:e.start)%l];for(h=c+1;h<=e.end;h++){let a=i[h%l];(function(e,t){if(!t)return!1;let i=[],r=function(e,t){return e1(t)?(i.includes(t)||i.push(t),i.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)})(t=ie(r.setContext(tR(n,{type:"segment",p0:o,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),d)&&p(c,h-1,e.loop,d),o=a,d=t}c<h-1&&p(c,h-1,e.loop,d)}return u}(e,t,i,r):t}function ie(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function it(e,t,i){return e.options.clip?e[i]:t[i]}function ii(e,t){let i=t._clip;if(i.disabled)return!1;let r=function(e,t){let{xScale:i,yScale:r}=e;return i&&r?{left:it(i,t,"left"),right:it(i,t,"right"),top:it(r,t,"top"),bottom:it(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===i.left?0:r.left-(!0===i.left?0:i.left),right:!1===i.right?e.width:r.right+(!0===i.right?0:i.right),top:!1===i.top?0:r.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?e.height:r.bottom+(!0===i.bottom?0:i.bottom)}}var ir=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let n=t.listeners[r],o=t.duration;n.forEach(r=>r({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=eU.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{let n;if(!i.running||!i.items.length)return;let o=i.items,s=o.length-1,a=!1;for(;s>=0;--s)(n=o[s])._active?(n._total>i.duration&&(i.duration=n._total),n.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!!t&&!!t.running&&!!t.items.length}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};let io="transparent",is={boolean:(e,t,i)=>i>.5?t:e,color(e,t,i){let r=e2(e||io),n=r.valid&&e2(t||io);return n&&n.valid?n.mix(r,i).hexString():t},number:(e,t,i)=>e+(t-e)*i};class ia{constructor(e,t,i,r){const n=t[i];r=tk([e.to,r,n,e.from]);const o=tk([e.from,n,r]);this._active=!0,this._fn=e.fn||is[e.type||typeof o],this._easing=e0[e.easing]||e0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=tk([e.to,t,r,e.from]),this._from=tk([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t,i=e-this._start,r=this._duration,n=this._prop,o=this._from,s=this._loop,a=this._to;if(this._active=o!==a&&(s||i<r),!this._active){this._target[n]=a,this._notify(!0);return}if(i<0){this._target[n]=o;return}t=i/r%2,t=s&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[n]=this._fn(o,a,t)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let e=0;e<i.length;e++)i[e][t]()}}class il{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!X(e))return;let t=Object.keys(tr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let n=e[r];if(!X(n))return;let o={};for(let e of t)o[e]=n[e];(Q(n.properties)&&n.properties||[r]).forEach(e=>{e!==r&&i.has(e)||i.set(e,o)})})}_animateOptions(e,t){let i=t.options,r=function(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(e,i);if(!r)return[];let n=this._createAnimations(r,i);return i.$shared&&(function(e,t){let i=[],r=Object.keys(t);for(let t=0;t<r.length;t++){let n=e[r[t]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)})(e.options.$animations,i).then(()=>{e.options=i},()=>{}),n}_createAnimations(e,t){let i,r=this._properties,n=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();for(i=s.length-1;i>=0;--i){let l=s[i];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(e,t));continue}let u=t[l],d=o[l],c=r.get(l);if(d)if(c&&d.active()){d.update(c,u,a);continue}else d.cancel();if(!c||!c.duration){e[l]=u;continue}o[l]=d=new ia(c,e,l,u),n.push(d)}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);let i=this._createAnimations(e,t);if(i.length)return ir.add(this._chart,i),!0}}function iu(e,t){let i=e&&e.options||{},r=i.reverse,n=void 0===i.min?t:0,o=void 0===i.max?t:0;return{start:r?o:n,end:r?n:o}}function id(e,t){let i,r,n=[],o=e._getSortedDatasetMetas(t);for(i=0,r=o.length;i<r;++i)n.push(o[i].index);return n}function ic(e,t,i,r={}){let n,o,s,a,l=e.keys,u="single"===r.mode;if(null===t)return;let d=!1;for(n=0,o=l.length;n<o;++n){if((s=+l[n])===i){if(d=!0,r.all)continue;break}Y(a=e.values[s])&&(u||0===t||eR(t)===eR(a))&&(t+=a)}return d||r.all?t:0}function ih(e,t){let i=e&&e.options.stacked;return i||void 0===i&&void 0!==t.stack}function ip(e,t,i,r){for(let n of t.getMatchingVisibleMetas(r).reverse()){let t=e[n.index];if(i&&t>0||!i&&t<0)return n.index}return null}function ig(e,t){let i,{chart:r,_cachedMeta:n}=e,o=r._stacks||(r._stacks={}),{iScale:s,vScale:a,index:l}=n,u=s.axis,d=a.axis,c=`${s.id}.${a.id}.${n.stack||n.type}`,h=t.length;for(let e=0;e<h;++e){let r=t[e],{[u]:s,[d]:h}=r;(i=(r._stacks||(r._stacks={}))[d]=function(e,t,i){let r=e[t]||(e[t]={});return r[i]||(r[i]={})}(o,c,s))[l]=h,i._top=ip(i,a,!0,n.type),i._bottom=ip(i,a,!1,n.type),(i._visualValues||(i._visualValues={}))[l]=h}}function im(e,t){let i=e.scales;return Object.keys(i).filter(e=>i[e].axis===t).shift()}function iv(e,t){let i=e.controller.index,r=e.vScale&&e.vScale.axis;if(r)for(let n of t=t||e._parsed){let e=n._stacks;if(!e||void 0===e[r]||void 0===e[r][i])return;delete e[r][i],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[i]&&delete e[r]._visualValues[i]}}let iy=e=>"reset"===e||"none"===e,ib=(e,t)=>t?e:Object.assign({},e);class iw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ih(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&iv(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(e,t,i,r)=>"x"===e?t:"r"===e?r:i,n=t.xAxisID=J(i.xAxisID,im(e,"x")),o=t.yAxisID=J(i.yAxisID,im(e,"y")),s=t.rAxisID=J(i.rAxisID,im(e,"r")),a=t.indexAxis,l=t.iAxisID=r(a,n,o,s),u=t.vAxisID=r(a,o,n,s);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&eG(this._data,this),e._stacked&&iv(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(X(t)){let e=this._cachedMeta;this._data=function(e,t){let i,r,n,{iScale:o,vScale:s}=t,a="x"===o.axis?"x":"y",l="x"===s.axis?"x":"y",u=Object.keys(e),d=Array(u.length);for(i=0,r=u.length;i<r;++i)n=u[i],d[i]={[a]:n,[l]:e[n]};return d}(t,e)}else if(i!==t){if(i){eG(i,this);let e=this._cachedMeta;iv(e),e._parsed=[]}t&&Object.isExtensible(t)&&(t._chartjs?t._chartjs.listeners.push(this):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),ej.forEach(e=>{let i="_onData"+eh(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){let n=r.apply(this,e);return t._chartjs.listeners.forEach(t=>{"function"==typeof t[i]&&t[i](...e)}),n}})}))),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,i=this.getDataset(),r=!1;this._dataCheck();let n=t._stacked;t._stacked=ih(t.vScale,t),t.stack!==i.stack&&(r=!0,iv(t),t.stack=i.stack),this._resyncElements(e),(r||n!==t._stacked)&&(ig(this,t._parsed),t._stacked=ih(t.vScale,t))}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let i,r,n,{_cachedMeta:o,_data:s}=this,{iScale:a,_stacked:l}=o,u=a.axis,d=0===e&&t===s.length||o._sorted,c=e>0&&o._parsed[e-1];if(!1===this._parsing)o._parsed=s,o._sorted=!0,n=s;else{n=Q(s[e])?this.parseArrayData(o,s,e,t):X(s[e])?this.parseObjectData(o,s,e,t):this.parsePrimitiveData(o,s,e,t);let a=()=>null===r[u]||c&&r[u]<c[u];for(i=0;i<t;++i)o._parsed[i+e]=r=n[i],d&&(a()&&(d=!1),c=r);o._sorted=d}l&&ig(this,n)}parsePrimitiveData(e,t,i,r){let n,o,{iScale:s,vScale:a}=e,l=s.axis,u=a.axis,d=s.getLabels(),c=s===a,h=Array(r);for(n=0;n<r;++n)o=n+i,h[n]={[l]:c||s.parse(d[o],o),[u]:a.parse(t[o],o)};return h}parseArrayData(e,t,i,r){let n,o,s,{xScale:a,yScale:l}=e,u=Array(r);for(n=0;n<r;++n)s=t[o=n+i],u[n]={x:a.parse(s[0],o),y:l.parse(s[1],o)};return u}parseObjectData(e,t,i,r){let n,o,s,{xScale:a,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,c=Array(r);for(n=0;n<r;++n)s=t[o=n+i],c[n]={x:a.parse(ec(s,u),o),y:l.parse(ec(s,d),o)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){let r=this.chart,n=this._cachedMeta,o=t[e.axis];return ic({keys:id(r,!0),values:t._stacks[e.axis]._visualValues},o,n.index,{mode:i})}updateRangeFromParsed(e,t,i,r){let n=i[t.axis],o=null===n?NaN:n,s=r&&i._stacks[t.axis];r&&s&&(r.values=s,o=ic(r,n,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){let i,r,n,o=this._cachedMeta,s=o._parsed,a=o._sorted&&e===o.iScale,l=s.length,u=this._getOtherScale(e),d=(n=this.chart,t&&!o.hidden&&o._stacked&&{keys:id(n,!0),values:null}),c={min:1/0,max:-1/0},{min:h,max:p}=function(e){let{min:t,max:i,minDefined:r,maxDefined:n}=e.getUserBounds();return{min:r?t:-1/0,max:n?i:1/0}}(u);function f(){let t=(r=s[i])[u.axis];return!Y(r[e.axis])||h>t||p<t}for(i=0;i<l&&(f()||(this.updateRangeFromParsed(c,e,r,d),!a));++i);if(a){for(i=l-1;i>=0;--i)if(!f()){this.updateRangeFromParsed(c,e,r,d);break}}return c}getAllParsedValues(e){let t,i,r,n=this._cachedMeta._parsed,o=[];for(t=0,i=n.length;t<i;++t)Y(r=n[t][e.axis])&&o.push(r);return o}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,i=t.iScale,r=t.vScale,n=this.getParsed(e);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(e){var t;let i,r,n,o,s=this._cachedMeta;this.update(e||"default"),X(t=J(this.options.clip,function(e,t,i){if(!1===i)return!1;let r=iu(e,i),n=iu(t,i);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}(s.xScale,s.yScale,this.getMaxOverflow())))?(i=t.top,r=t.right,n=t.bottom,o=t.left):i=r=n=o=t,s._clip={top:i,right:r,bottom:n,left:o,disabled:!1===t}}update(e){}draw(){let e,t=this._ctx,i=this.chart,r=this._cachedMeta,n=r.data||[],o=i.chartArea,s=[],a=this._drawStart||0,l=this._drawCount||n.length-a,u=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,o,a,l),e=a;e<a+l;++e){let i=n[e];i.hidden||(i.active&&u?s.push(i):i.draw(t,o))}for(e=0;e<s.length;++e)s[e].draw(t,o)}getStyle(e,t){let i=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){var r,n;let o,s=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){let t=this._cachedMeta.data[e];(o=t.$context||(r=this.getContext(),t.$context=tR(r,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"}))).parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else(o=this.$context||(this.$context=tR(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:n=this.index,index:n,mode:"default",type:"dataset"}))).dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){let r="active"===t,n=this._cachedDataOpts,o=e+"-"+t,s=n[o],a=this.enableOptionSharing&&ep(i);if(s)return ib(s,a);let l=this.chart.config,u=l.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],c=l.getOptionScopes(this.getDataset(),u),h=Object.keys(tr.elements[e]),p=()=>this.getContext(i,r,t),f=l.resolveNamedOptions(c,h,p,d);return f.$shared&&(f.$shared=a,n[o]=Object.freeze(ib(f,a))),f}_resolveAnimations(e,t,i){let r,n=this.chart,o=this._cachedDataOpts,s=`animation-${t}`,a=o[s];if(a)return a;if(!1!==n.options.animation){let n=this.chart.config,o=n.datasetAnimationScopeKeys(this._type,t),s=n.getOptionScopes(this.getDataset(),o);r=n.createResolver(s,this.getContext(e,i,t))}let l=new il(n,r&&r.animations);return r&&r._cacheable&&(o[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||iy(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,n=this.getSharedOptions(i),o=this.includeOptions(t,n)||n!==r;return this.updateSharedOptions(n,t,i),{sharedOptions:n,includeOptions:o}}updateElement(e,t,i,r){iy(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!iy(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;let n=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,i=this._cachedMeta.data;for(let[e,t,i]of this._syncList)this[e](t,i);this._syncList=[];let r=i.length,n=t.length,o=Math.min(n,r);o&&this.parse(0,o),n>r?this._insertElements(r,n-r,e):n<r&&this._removeElements(n,r-n)}_insertElements(e,t,i=!0){let r,n=this._cachedMeta,o=n.data,s=e+t,a=e=>{for(e.length+=t,r=e.length-1;r>=s;r--)e[r]=e[r-t]};for(a(o),r=e;r<s;++r)o[r]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){let i=this._cachedMeta;if(this._parsing){let r=i._parsed.splice(e,t);i._stacked&&iv(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iC(e,t,i,r){if(Q(e)){let n,o,s,a,l,u;n=i.parse(e[0],r),s=Math.min(n,o=i.parse(e[1],r)),a=Math.max(n,o),l=s,u=a,Math.abs(s)>Math.abs(a)&&(l=a,u=s),t[i.axis]=u,t._custom={barStart:l,barEnd:u,start:n,end:o,min:s,max:a}}else t[i.axis]=i.parse(e,r);return t}function ix(e,t,i,r){let n,o,s,a,l=e.iScale,u=e.vScale,d=l.getLabels(),c=l===u,h=[];for(n=i,o=i+r;n<o;++n)a=t[n],(s={})[l.axis]=c||l.parse(d[n],n),h.push(iC(a,s,u,n));return h}function iS(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function ik(e,t,i,r){var n,o,s;return r?iR((n=e,o=t,s=i,e=n===o?s:n===s?o:n),i,t):iR(e,t,i)}function iR(e,t,i){return"start"===e?t:"end"===e?i:e}class iE extends iw{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,r){return ix(e,t,i,r)}parseArrayData(e,t,i,r){return ix(e,t,i,r)}parseObjectData(e,t,i,r){let n,o,s,a,{iScale:l,vScale:u}=e,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,h="x"===l.axis?d:c,p="x"===u.axis?d:c,f=[];for(n=i,o=i+r;n<o;++n)a=t[n],(s={})[l.axis]=l.parse(ec(a,h),n),f.push(iC(ec(a,p),s,u,n));return f}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);let n=i._custom;n&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let{iScale:t,vScale:i}=this._cachedMeta,r=this.getParsed(e),n=r._custom,o=iS(n)?"["+n.start+", "+n.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+t.getLabelForValue(r[t.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){let n="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:c}=this._getSharedOptions(t,r);for(let h=t;h<t+i;h++){let t=this.getParsed(h),i=n||K(t[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,u),f=(t._stacks||{})[s.axis],g={horizontal:l,base:i.base,enableBorderRadius:!f||iS(t._custom)||o===f._top||o===f._bottom,x:l?i.head:p.center,y:l?p.center:i.head,height:l?p.size:Math.abs(i.size),width:l?Math.abs(i.size):p.size};c&&(g.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));let m=g.options||e[h].options;!function(e,t,i,r){let n,o,s,a,l,u=t.borderSkipped,d={};if(!u){e.borderSkipped=d;return}if(!0===u){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:c,end:h,reverse:p,top:f,bottom:g}=(e.horizontal?(n=e.base>e.x,o="left",s="right"):(n=e.base<e.y,o="bottom",s="top"),n?(a="end",l="start"):(a="start",l="end"),{start:o,end:s,reverse:n,top:a,bottom:l});"middle"===u&&i&&(e.enableBorderRadius=!0,(i._top||0)===r?u=f:(i._bottom||0)===r?u=g:(d[ik(g,c,h,p)]=!0,u=f)),d[ik(u,c,h,p)]=!0,e.borderSkipped=d}(g,m,f,o),function(e,{inflateAmount:t},i){e.inflateAmount="auto"===t?.33*(1===i):t}(g,m,u.ratio),this.updateElement(e[h],h,g,r)}}_getStacks(e,t){let{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),n=i.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(t),a=s&&s[i.axis],l=e=>{let t=e._parsed.find(e=>e[i.axis]===a),r=t&&t[e.vScale.axis];if(K(r)||isNaN(r))return!0};for(let i of r)if(!(void 0!==t&&l(i))&&((!1===n||-1===o.indexOf(i.stack)||void 0===n&&void 0===i.stack)&&o.push(i.stack),i.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){let e={},t=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)e[J("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){let r=this._getStacks(e,i),n=void 0!==t?r.indexOf(t):-1;return -1===n?r.length-1:n}_getRuler(){let e,t,i=this.options,r=this._cachedMeta,n=r.iScale,o=[];for(e=0,t=r.data.length;e<t;++e)o.push(n.getPixelForValue(this.getParsed(e)[n.axis],e));let s=i.barThickness;return{min:s||function(e){let t,i,r,n,o=e.iScale,s=function(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),r=[];for(let t=0,n=i.length;t<n;t++)r=r.concat(i[t].controller.getAllParsedValues(e));e._cache.$bar=eW(r.sort((e,t)=>e-t))}return e._cache.$bar}(o,e.type),a=o._length,l=()=>{32767!==r&&-32768!==r&&(ep(n)&&(a=Math.min(a,Math.abs(r-n)||a)),n=r)};for(t=0,i=s.length;t<i;++t)r=o.getPixelForValue(s[t]),l();for(t=0,n=void 0,i=o.ticks.length;t<i;++t)r=o.getPixelForTick(t),l();return a}(r),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:i.grouped,ratio:s?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(e){let t,i,{_cachedMeta:{vScale:r,_stacked:n,index:o},options:{base:s,minBarLength:a}}=this,l=s||0,u=this.getParsed(e),d=u._custom,c=iS(d),h=u[r.axis],p=0,f=n?this.applyStack(r,u,n):h;f!==h&&(p=f-h,f=h),c&&(h=d.barStart,f=d.barEnd-d.barStart,0!==h&&eR(h)!==eR(d.barEnd)&&(p=0),p+=h);let g=K(s)||c?p:s,m=r.getPixelForValue(g);if(Math.abs(i=(t=this.chart.getDataVisibility(e)?r.getPixelForValue(p+f):m)-m)<a){var v;i=(0!==(v=i)?eR(v):(r.isHorizontal()?1:-1)*(r.min>=l?1:-1))*a,h===l&&(m-=i/2);let e=r.getPixelForDecimal(0),s=r.getPixelForDecimal(1),d=Math.min(e,s);t=(m=Math.max(Math.min(m,Math.max(e,s)),d))+i,n&&!c&&(u._stacks[r.axis]._visualValues[o]=r.getValueForPixel(t)-r.getValueForPixel(m))}if(m===r.getPixelForValue(l)){let e=eR(i)*r.getLineWidthForValue(l)/2;m+=e,i-=e}return{size:i,base:m,head:t,center:t+i/2}}_calculateBarIndexPixels(e,t){let i,r,n=t.scale,o=this.options,s=o.skipNull,a=J(o.maxBarThickness,1/0),l=this._getAxisCount();if(t.grouped){var u,d;let n,c,h,p,f,g,m,v,y,b=s?this._getStackCount(e):t.stackCount,w="flex"===o.barThickness?(u=b*l,c=(n=t.pixels)[e],h=e>0?n[e-1]:null,p=e<n.length-1?n[e+1]:null,f=o.categoryPercentage,null===h&&(h=c-(null===p?t.end-t.start:p-c)),null===p&&(p=c+c-h),g=c-(c-Math.min(h,p))/2*f,{chunk:Math.abs(p-h)/2*f/u,ratio:o.barPercentage,start:g}):(d=b*l,K(y=o.barThickness)?(m=t.min*o.categoryPercentage,v=o.barPercentage):(m=y*d,v=1),{chunk:m/d,ratio:v,start:t.pixels[e]-m/2}),C="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(J(C,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+x;i=w.start+w.chunk*S+w.chunk/2,r=Math.min(a,w.chunk*w.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),r=Math.min(a,t.min*t.ratio);return{base:i-r/2,head:i+r/2,center:i,size:r}}draw(){let e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length,n=0;for(;n<r;++n)null===this.getParsed(n)[t.axis]||i[n].hidden||i[n].draw(this._ctx)}}class iP extends iw{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){let n=super.parsePrimitiveData(e,t,i,r);for(let e=0;e<n.length;e++)n[e]._custom=this.resolveDataElementOptions(e+i).radius;return n}parseArrayData(e,t,i,r){let n=super.parseArrayData(e,t,i,r);for(let e=0;e<n.length;e++){let r=t[i+e];n[e]._custom=J(r[2],this.resolveDataElementOptions(e+i).radius)}return n}parseObjectData(e,t,i,r){let n=super.parseObjectData(e,t,i,r);for(let e=0;e<n.length;e++){let r=t[i+e];n[e]._custom=J(r&&r.r&&+r.r,this.resolveDataElementOptions(e+i).radius)}return n}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:n}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=n.getLabelForValue(o.y),l=o._custom;return{label:i[e]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){let n="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,r),u=o.axis,d=s.axis;for(let c=t;c<t+i;c++){let t=e[c],i=!n&&this.getParsed(c),h={},p=h[u]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[u]),f=h[d]=n?s.getBasePixel():s.getPixelForValue(i[d]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=a||this.resolveDataElementOptions(c,t.active?"active":r),n&&(h.options.radius=0)),this.updateElement(t,c,h,r)}}resolveDataElementOptions(e,t){let i=this.getParsed(e),r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let n=r.radius;return"active"!==t&&(r.radius=0),r.radius+=J(i&&i._custom,n),r}}class iM extends iw{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data,{labels:{pointStyle:i,textAlign:r,color:n,useBorderRadius:o,borderRadius:s}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,a)=>{let l=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:l.backgroundColor,fontColor:n,hidden:!e.getDataVisibility(a),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:i,borderRadius:o&&(s||l.borderRadius),index:a}}):[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){let i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let n,o,s=e=>+i[e];if(X(i[e])){let{key:e="value"}=this._parsing;s=t=>+ec(i[t],e)}for(n=e,o=e+t;n<o;++n)r._parsed[n]=s(n)}}_getRotation(){return eT(this.options.rotation-90)}_getCircumference(){return eT(this.options.circumference)}_getRotationExtents(){let e=ev,t=-ev;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let r=this.chart.getDatasetMeta(i).controller,n=r._getRotation(),o=r._getCircumference();e=Math.min(e,n),t=Math.max(t,n+o)}return{rotation:e,circumference:t-e}}update(e){let t,{chartArea:i}=this.chart,r=this._cachedMeta,n=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-o)/2,0),a=Math.min((t=this.options.cutout,"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/s),1),l=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:c,ratioY:h,offsetX:p,offsetY:f}=function(e,t,i){let r=1,n=1,o=0,s=0;if(t<ev){let a=e+t,l=Math.cos(e),u=Math.sin(e),d=Math.cos(a),c=Math.sin(a),h=(t,r,n)=>eL(t,e,a,!0)?1:Math.max(r,r*i,n,n*i),p=(t,r,n)=>eL(t,e,a,!0)?-1:Math.min(r,r*i,n,n*i),f=h(0,l,d),g=h(eC,u,c),m=p(em,l,d),v=p(em+eC,u,c);r=(f-m)/2,n=(g-v)/2,o=-(f+m)/2,s=-(g+v)/2}return{ratioX:r,ratioY:n,offsetX:o,offsetY:s}}(d,u,a),g=Math.max(Math.min((i.width-o)/c,(i.height-o)/h)/2,0),m=ee(this.options.radius,g),v=Math.max(m*a,0),y=(m-v)/this._getVisibleDatasetWeightTotal();this.offsetX=p*m,this.offsetY=f*m,r.total=this.calculateTotal(),this.outerRadius=m-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*l,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){let i=this.options,r=this._cachedMeta,n=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*n/ev)}updateElements(e,t,i,r){let n,o="reset"===r,s=this.chart,a=s.chartArea,l=s.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,c=o&&l.animateScale,h=c?0:this.innerRadius,p=c?0:this.outerRadius,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,r),m=this._getRotation();for(n=0;n<t;++n)m+=this._circumference(n,o);for(n=t;n<t+i;++n){let t=this._circumference(n,o),i=e[n],s={x:u+this.offsetX,y:d+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:p,innerRadius:h};g&&(s.options=f||this.resolveDataElementOptions(n,i.active?"active":r)),m+=t,this.updateElement(i,n,s,r)}}calculateTotal(){let e,t=this._cachedMeta,i=t.data,r=0;for(e=0;e<i.length;e++){let n=t._parsed[e];null!==n&&!isNaN(n)&&this.chart.getDataVisibility(e)&&!i[e].hidden&&(r+=Math.abs(n))}return r}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?Math.abs(e)/t*ev:0}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=e6(t._parsed[e],i.options.locale);return{label:r[e]||"",value:n}}getMaxBorderWidth(e){let t,i,r,n,o,s=0,a=this.chart;if(!e){for(t=0,i=a.data.datasets.length;t<i;++t)if(a.isDatasetVisible(t)){e=(r=a.getDatasetMeta(t)).data,n=r.controller;break}}if(!e)return 0;for(t=0,i=e.length;t<i;++t)"inner"!==(o=n.resolveDataElementOptions(t)).borderAlign&&(s=Math.max(s,o.borderWidth||0,o.hoverBorderWidth||0));return s}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){let e=this.resolveDataElementOptions(i);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class iD extends iw{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:i,data:r=[],_dataset:n}=t,o=this.chart._animationsDisabled,{start:s,count:a}=eQ(t,r,o);this._drawStart=s,this._drawCount=a,eX(t)&&(s=0,a=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=r;let l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},e),this.updateElements(r,s,a,e)}updateElements(e,t,i,r){let n="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r),c=o.axis,h=s.axis,{spanGaps:p,segment:f}=this.options,g=eM(p)?p:1/0,m=this.chart._animationsDisabled||n||"none"===r,v=t+i,y=e.length,b=t>0&&this.getParsed(t-1);for(let i=0;i<y;++i){let p=e[i],y=m?p:{};if(i<t||i>=v){y.skip=!0;continue}let w=this.getParsed(i),C=K(w[h]),x=y[c]=o.getPixelForValue(w[c],i),S=y[h]=n||C?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,w,a):w[h],i);y.skip=isNaN(x)||isNaN(S)||C,y.stop=i>0&&Math.abs(w[c]-b[c])>g,f&&(y.parsed=w,y.raw=l.data[i]),d&&(y.options=u||this.resolveDataElementOptions(i,p.active?"active":r)),m||this.updateElement(p,i,y,r),b=w}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];return r.length?Math.max(i,r[0].size(this.resolveDataElementOptions(0)),r[r.length-1].size(this.resolveDataElementOptions(r.length-1)))/2:i}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class iT extends iw{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((t,n)=>{let o=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(n),index:n}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let t=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=e6(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:n}}parseObjectData(e,t,i,r){return tN.bind(this)(e,t,i,r)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:1/0,max:-1/0};return e.data.forEach((e,i)=>{let r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,i=e.options,r=Math.max(Math.min(t.right-t.left,t.bottom-t.top)/2,0),n=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),o=(r-n)/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,i,r){let n,o="reset"===r,s=this.chart,a=s.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,d=l.yCenter,c=l.getIndexAngle(0)-.5*em,h=c,p=360/this.countVisibleElements();for(n=0;n<t;++n)h+=this._computeAngle(n,r,p);for(n=t;n<t+i;n++){let t=e[n],i=h,f=h+this._computeAngle(n,r,p),g=s.getDataVisibility(n)?l.getDistanceFromCenterForValue(this.getParsed(n).r):0;h=f,o&&(a.animateScale&&(g=0),a.animateRotate&&(i=f=c));let m={x:u,y:d,innerRadius:0,outerRadius:g,startAngle:i,endAngle:f,options:this.resolveDataElementOptions(n,t.active?"active":r)};this.updateElement(t,n,m,r)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((e,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?eT(this.resolveDataElementOptions(e,t).angle||i):0}}class iO extends iM{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class i_ extends iw{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,r){return tN.bind(this)(e,t,i,r)}update(e){let t=this._cachedMeta,i=t.dataset,r=t.data||[],n=t.iScale.getLabels();if(i.points=r,"resize"!==e){let t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);let o={_loop:!0,_fullLoop:n.length===r.length,options:t};this.updateElement(i,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){let n=this._cachedMeta.rScale,o="reset"===r;for(let s=t;s<t+i;s++){let t=e[s],i=this.resolveDataElementOptions(s,t.active?"active":r),a=n.getPointPositionForValue(s,this.getParsed(s).r),l=o?n.xCenter:a.x,u=o?n.yCenter:a.y,d={x:l,y:u,angle:a.angle,skip:isNaN(l)||isNaN(u),options:i};this.updateElement(t,s,d,r)}}}class iA extends iw{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:n}=t,o=this.getParsed(e),s=r.getLabelForValue(o.x),a=n.getLabelForValue(o.y);return{label:i[e]||"",value:"("+s+", "+a+")"}}update(e){let t=this._cachedMeta,{data:i=[]}=t,r=this.chart._animationsDisabled,{start:n,count:o}=eQ(t,i,r);if(this._drawStart=n,this._drawCount=o,eX(t)&&(n=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:n,_dataset:o}=t;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;let s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:s},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,n,o,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){let n="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(u),c=this.includeOptions(r,d),h=o.axis,p=s.axis,{spanGaps:f,segment:g}=this.options,m=eM(f)?f:1/0,v=this.chart._animationsDisabled||n||"none"===r,y=t>0&&this.getParsed(t-1);for(let u=t;u<t+i;++u){let t=e[u],i=this.getParsed(u),f=v?t:{},b=K(i[p]),w=f[h]=o.getPixelForValue(i[h],u),C=f[p]=n||b?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,i,a):i[p],u);f.skip=isNaN(w)||isNaN(C)||b,f.stop=u>0&&Math.abs(i[h]-y[h])>m,g&&(f.parsed=i,f.raw=l.data[u]),c&&(f.options=d||this.resolveDataElementOptions(u,t.active?"active":r)),v||this.updateElement(t,u,f,r),y=i}this.updateSharedOptions(d,r,u)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}let i=e.dataset,r=i.options&&i.options.borderWidth||0;return t.length?Math.max(r,t[0].size(this.resolveDataElementOptions(0)),t[t.length-1].size(this.resolveDataElementOptions(t.length-1)))/2:r}}function iF(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class iI{static override(e){Object.assign(iI.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return iF()}parse(){return iF()}format(){return iF()}add(){return iF()}diff(){return iF()}startOf(){return iF()}endOf(){return iF()}}function iL(e,t,i,r,n){let o=e.getSortedVisibleDatasetMetas(),s=i[t];for(let e=0,i=o.length;e<i;++e){let{index:i,data:a}=o[e],{lo:l,hi:u}=function(e,t,i,r){let{controller:n,data:o,_sorted:s}=e,a=n._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&s&&o.length){let s=a._reversePixels?ez:eH;if(r){if(n._sharedOptions){let e=o[0],r="function"==typeof e.getRange&&e.getRange(t);if(r){let e=s(o,t,i-r),n=s(o,t,i+r);return{lo:e.lo,hi:n.hi}}}}else{let r=s(o,t,i);if(l){let{vScale:t}=n._cachedMeta,{_parsed:i}=e,o=i.slice(0,r.lo+1).reverse().findIndex(e=>!K(e[t.axis]));r.lo-=Math.max(0,o);let s=i.slice(r.hi).findIndex(e=>!K(e[t.axis]));r.hi+=Math.max(0,s)}return r}}return{lo:0,hi:o.length-1}}(o[e],t,s,n);for(let e=l;e<=u;++e){let t=a[e];t.skip||r(t,i,e)}}}function iN(e,t,i,r,n){let o=[];return(n||e.isPointInArea(t))&&iL(e,i,t,function(i,s,a){(n||tu(i,e.chartArea,0))&&i.inRange(t.x,t.y,r)&&o.push({element:i,datasetIndex:s,index:a})},!0),o}function iB(e,t,i,r,n,o){let s,a,l,u,d,c;return o||e.isPointInArea(t)?"r"!==i||r?(s=[],a=-1!==i.indexOf("x"),l=-1!==i.indexOf("y"),u=function(e,t){return Math.sqrt(Math.pow(a?Math.abs(e.x-t.x):0,2)+Math.pow(l?Math.abs(e.y-t.y):0,2))},d=1/0,iL(e,i,t,function(i,a,l){let c=i.inRange(t.x,t.y,n);if(r&&!c)return;let h=i.getCenterPoint(n);if(!(o||e.isPointInArea(h))&&!c)return;let p=u(t,h);p<d?(s=[{element:i,datasetIndex:a,index:l}],d=p):p===d&&s.push({element:i,datasetIndex:a,index:l})}),s):(c=[],iL(e,i,t,function(e,i,r){let{startAngle:o,endAngle:s}=e.getProps(["startAngle","endAngle"],n),{angle:a}=e_(e,{x:t.x,y:t.y});eL(a,o,s)&&c.push({element:e,datasetIndex:i,index:r})}),c):[]}function iV(e,t,i,r,n){let o=[],s="x"===i?"inXRange":"inYRange",a=!1;return(iL(e,i,t,(e,r,l)=>{e[s]&&e[s](t[i],n)&&(o.push({element:e,datasetIndex:r,index:l}),a=a||e.inRange(t.x,t.y,n))}),r&&!a)?[]:o}var iH={modes:{index(e,t,i,r){let n=tK(t,e),o=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?iN(e,n,o,r,s):iB(e,n,o,!1,r,s),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{let t=a[0].index,i=e.data[t];i&&!i.skip&&l.push({element:i,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,i,r){let n=tK(t,e),o=i.axis||"xy",s=i.includeInvisible||!1,a=i.intersect?iN(e,n,o,r,s):iB(e,n,o,!1,r,s);if(a.length>0){let t=a[0].datasetIndex,i=e.getDatasetMeta(t).data;a=[];for(let e=0;e<i.length;++e)a.push({element:i[e],datasetIndex:t,index:e})}return a},point(e,t,i,r){let n=tK(t,e);return iN(e,n,i.axis||"xy",r,i.includeInvisible||!1)},nearest(e,t,i,r){let n=tK(t,e),o=i.axis||"xy",s=i.includeInvisible||!1;return iB(e,n,o,i.intersect,r,s)},x(e,t,i,r){let n=tK(t,e);return iV(e,n,"x",i.intersect,r)},y(e,t,i,r){let n=tK(t,e);return iV(e,n,"y",i.intersect,r)}}};let iz=["left","top","right","bottom"];function ij(e,t){return e.filter(e=>e.pos===t)}function iG(e,t){return e.filter(e=>-1===iz.indexOf(e.pos)&&e.box.axis===t)}function iW(e,t){return e.sort((e,i)=>{let r=t?i:e,n=t?e:i;return r.weight===n.weight?r.index-n.index:r.weight-n.weight})}function iU(e,t,i,r){return Math.max(e[i],t[i])+Math.max(e[r],t[r])}function i$(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function iq(e,t,i,r){let n,o,s,a,l,u,d=[];for(n=0,o=e.length,l=0;n<o;++n){(a=(s=e[n]).box).update(s.width||t.w,s.height||t.h,function(e,t){let i=t.maxPadding;return function(e){let r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],i[e])}),r}(e?["left","right"]:["top","bottom"])}(s.horizontal,t));let{same:o,other:c}=function(e,t,i,r){let{pos:n,box:o}=i,s=e.maxPadding;if(!X(n)){i.size&&(e[n]-=i.size);let t=r[i.stack]||{size:0,count:1};t.size=Math.max(t.size,i.horizontal?o.height:o.width),i.size=t.size/t.count,e[n]+=i.size}o.getPadding&&i$(s,o.getPadding());let a=Math.max(0,t.outerWidth-iU(s,e,"left","right")),l=Math.max(0,t.outerHeight-iU(s,e,"top","bottom")),u=a!==e.w,d=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:u,other:d}:{same:d,other:u}}(t,i,s,r);l|=o&&d.length,u=u||c,a.fullSize||d.push(s)}return l&&iq(d,t,i,r)||u}function iK(e,t,i,r,n){e.top=i,e.left=t,e.right=t+r,e.bottom=i+n,e.width=r,e.height=n}function iQ(e,t,i,r){let n=i.padding,{x:o,y:s}=t;for(let a of e){let e=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let r=t.w*u,o=l.size||e.height;ep(l.start)&&(s=l.start),e.fullSize?iK(e,n.left,s,i.outerWidth-n.right-n.left,o):iK(e,t.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=e.bottom}else{let r=t.h*u,s=l.size||e.width;ep(l.start)&&(o=l.start),e.fullSize?iK(e,o,n.top,s,i.outerHeight-n.bottom-n.top):iK(e,o,t.top+l.placed,s,r),l.start=o,l.placed+=r,o=e.right}}t.x=o,t.y=s}var iX={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,r){let n,o,s,a,l,u,d,c;if(!e)return;let h=tx(e.options.layout.padding),p=Math.max(t-h.width,0),f=Math.max(i-h.height,0),g=(o=iW((n=function(e){let t,i,r,n,o,s,a=[];for(t=0,i=(e||[]).length;t<i;++t)r=e[t],({position:n,options:{stack:o,stackWeight:s=1}}=r),a.push({index:t,box:r,pos:n,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&n+o,stackWeight:s});return a}(e.boxes)).filter(e=>e.box.fullSize),!0),s=iW(ij(n,"left"),!0),a=iW(ij(n,"right")),l=iW(ij(n,"top"),!0),u=iW(ij(n,"bottom")),d=iG(n,"x"),c=iG(n,"y"),{fullSize:o,leftAndTop:s.concat(l),rightAndBottom:a.concat(c).concat(u).concat(d),chartArea:ij(n,"chartArea"),vertical:s.concat(a).concat(c),horizontal:l.concat(u).concat(d)}),m=g.vertical,v=g.horizontal;ei(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});let y=Object.freeze({outerWidth:t,outerHeight:i,padding:h,availableWidth:p,availableHeight:f,vBoxMaxWidth:p/2/(m.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1),hBoxMaxHeight:f/2}),b=Object.assign({},h);i$(b,tx(r));let w=Object.assign({maxPadding:b,w:p,h:f,x:h.left,y:h.top},h),C=function(e,t){let i,r,n,o=function(e){let t={};for(let i of e){let{stack:e,pos:r,stackWeight:n}=i;if(!e||!iz.includes(r))continue;let o=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return t}(e),{vBoxMaxWidth:s,hBoxMaxHeight:a}=t;for(i=0,r=e.length;i<r;++i){let{fullSize:r}=(n=e[i]).box,l=o[n.stack],u=l&&n.stackWeight/l.weight;n.horizontal?(n.width=u?u*s:r&&t.availableWidth,n.height=a):(n.width=s,n.height=u?u*a:r&&t.availableHeight)}return o}(m.concat(v),y);iq(g.fullSize,w,y,C),iq(m,w,y,C),iq(v,w,y,C)&&iq(m,w,y,C);let x=w.maxPadding;function S(e){let t=Math.max(x[e]-w[e],0);return w[e]+=t,t}w.y+=S("top"),w.x+=S("left"),S("right"),S("bottom"),iQ(g.leftAndTop,w,y,C),w.x+=w.w,w.y+=w.h,iQ(g.rightAndBottom,w,y,C),e.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},ei(g.chartArea,t=>{let i=t.box;Object.assign(i,e.chartArea),i.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class iY{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class iZ extends iY{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}let iJ="$chartjs",i0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},i1=e=>null===e||""===e,i2=!!tY&&{passive:!0};function i5(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function i3(e,t,i){let r=e.canvas,n=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i5(i.addedNodes,r))&&!i5(i.removedNodes,r);t&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}function i4(e,t,i){let r=e.canvas,n=new MutationObserver(e=>{let t=!1;for(let i of e)t=(t=t||i5(i.removedNodes,r))&&!i5(i.addedNodes,r);t&&i()});return n.observe(document,{childList:!0,subtree:!0}),n}let i8=new Map,i6=0;function i7(){let e=window.devicePixelRatio;e!==i6&&(i6=e,i8.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function i9(e,t,i){let r=e.canvas,n=r&&tG(r);if(!n)return;let o=e$((e,t)=>{let r=n.clientWidth;i(e,t),r<n.clientWidth&&i()},window),s=new ResizeObserver(e=>{let t=e[0],i=t.contentRect.width,r=t.contentRect.height;(0!==i||0!==r)&&o(i,r)});return s.observe(n),i8.size||window.addEventListener("resize",i7),i8.set(e,o),s}function re(e,t,i){i&&i.disconnect(),"resize"===t&&(i8.delete(e),i8.size||window.removeEventListener("resize",i7))}function rt(e,t,i){let r=e.canvas,n=e$(t=>{null!==e.ctx&&i(function(e,t){let i=i0[e.type]||e.type,{x:r,y:n}=tK(e,t);return{type:i,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==n?n:null}}(t,e))},e);return r&&r.addEventListener(t,n,i2),n}class ri extends iY{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(!function(e,t){let i=e.style,r=e.getAttribute("height"),n=e.getAttribute("width");if(e[iJ]={initial:{height:r,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",i1(n)){let t=tZ(e,"width");void 0!==t&&(e.width=t)}if(i1(r))if(""===e.style.height)e.height=e.width/(t||2);else{let t=tZ(e,"height");void 0!==t&&(e.height=t)}}(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[iJ])return!1;let i=t[iJ].initial;["height","width"].forEach(e=>{let r=i[e];K(r)?t.removeAttribute(e):t.setAttribute(e,r)});let r=i.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[iJ],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),n={attach:i3,detach:i4,resize:i9}[t]||rt;r[t]=n(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];r&&((({attach:re,detach:re,resize:re})[t]||function(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,i2)})(e,t,r),i[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return function(e,t,i,r){let n=tU(e),o=tq(n,"margin"),s=tW(n.maxWidth,e,"clientWidth")||eb,a=tW(n.maxHeight,e,"clientHeight")||eb,l=function(e,t,i){let r,n;if(void 0===t||void 0===i){let o=e&&tG(e);if(o){let e=o.getBoundingClientRect(),s=tU(o),a=tq(s,"border","width"),l=tq(s,"padding");t=e.width-l.width-a.width,i=e.height-l.height-a.height,r=tW(s.maxWidth,o,"clientWidth"),n=tW(s.maxHeight,o,"clientHeight")}else t=e.clientWidth,i=e.clientHeight}return{width:t,height:i,maxWidth:r||eb,maxHeight:n||eb}}(e,t,i),{width:u,height:d}=l;if("content-box"===n.boxSizing){let e=tq(n,"border","width"),t=tq(n,"padding");u-=t.width+e.width,d-=t.height+e.height}return u=Math.max(0,u-o.width),d=Math.max(0,r?u/r:d-o.height),u=tQ(Math.min(u,s,l.maxWidth)),d=tQ(Math.min(d,a,l.maxHeight)),u&&!d&&(d=tQ(u/2)),(void 0!==t||void 0!==i)&&r&&l.height&&d>l.height&&(u=tQ(Math.floor((d=l.height)*r))),{width:u,height:d}}(e,t,i,r)}isAttached(e){let t=e&&tG(e);return!!(t&&t.isConnected)}}class rr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return eM(this.x)&&eM(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(e=>{r[e]=i[e]&&i[e].active()?i[e]._to:this[e]}),r}}function rn(e,t,i,r,n){let o,s,a,l=J(r,0),u=Math.min(J(n,e.length),e.length),d=0;for(i=Math.ceil(i),n&&(i=(o=n-r)/Math.floor(o/i)),a=l;a<0;)a=Math.round(l+ ++d*i);for(s=Math.max(l,0);s<u;s++)s===a&&(t.push(e[s]),a=Math.round(l+ ++d*i))}let ro=(e,t,i)=>"top"===t||"left"===t?e[t]+i:e[t]-i,rs=(e,t)=>Math.min(t||e,e);function ra(e,t){let i=[],r=e.length/t,n=e.length,o=0;for(;o<n;o+=r)i.push(e[Math.floor(o)]);return i}function rl(e){return e.drawTicks?e.tickLength:0}function ru(e,t){if(!e.display)return 0;let i=tS(e.font,t),r=tx(e.padding);return(Q(e.text)?e.text.length:1)*i.lineHeight+r.height}class rd extends rr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Z(e,1/0),t=Z(t,-1/0),i=Z(i,1/0),r=Z(r,-1/0),{min:Z(e,i),max:Z(t,r),minDefined:Y(e),maxDefined:Y(t)}}getMinMax(e){let t,{min:i,max:r,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:r};let s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)t=s[a].controller.getMinMax(this,e),n||(i=Math.min(i,t.min)),o||(r=Math.max(r,t.max));return i=o&&i>r?r:i,r=n&&i>r?i:r,{min:Z(i,Z(r,i)),max:Z(r,Z(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){et(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:n,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,i){let{min:r,max:n}=e,o=ee(t,(n-r)/2),s=(e,t)=>i&&0===e?0:e+t;return{min:s(r,-Math.abs(o)),max:s(n,o)}}(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let a=s<this.ticks.length;this._convertTicksToLabels(a?ra(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function(e,t){var i;let r,n,o=e.options.ticks,s=(r=(i=e).options.offset,n=i._tickSize(),Math.floor(Math.min(i._length/n+ +!r,i._maxLength/n))),a=Math.min(o.maxTicksLimit||s,s),l=o.major.enabled?function(e){let t,i,r=[];for(t=0,i=e.length;t<i;t++)e[t].major&&r.push(t);return r}(t):[],u=l.length,d=l[0],c=l[u-1],h=[];if(u>a)return function(e,t,i,r){let n,o=0,s=i[0];for(n=0,r=Math.ceil(r);n<e.length;n++)n===s&&(t.push(e[n]),s=i[++o*r])}(t,h,l,u/a),h;let p=function(e,t,i){let r=function(e){let t,i,r=e.length;if(r<2)return!1;for(i=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==i)return!1;return i}(e),n=t.length/i;if(!r)return Math.max(n,1);let o=function(e){let t,i=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t==0&&(i.push(t),i.push(e/t));return r===(0|r)&&i.push(r),i.sort((e,t)=>e-t).pop(),i}(r);for(let e=0,t=o.length-1;e<t;e++){let t=o[e];if(t>n)return t}return Math.max(n,1)}(l,t,a);if(u>0){let e,i,r=u>1?Math.round((c-d)/(u-1)):null;for(rn(t,h,p,K(r)?0:d-r,d),e=0,i=u-1;e<i;e++)rn(t,h,p,l[e],l[e+1]);return rn(t,h,p,c,K(r)?t.length:c+r),h}return rn(t,h,p),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,i=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,i=!i),this._startPixel=e,this._endPixel=t,this._reversePixels=i,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){et(this.options.afterUpdate,[this])}beforeSetDimensions(){et(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){et(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),et(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){et(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t,i,r,n=this.options.ticks;for(t=0,i=e.length;t<i;t++)(r=e[t]).label=et(n.callback,[r.value,t,e],this)}afterTickToLabelConversion(){et(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){et(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e,t,i,r=this.options,n=r.ticks,o=rs(this.ticks.length,r.ticks.maxTicksLimit),s=n.minRotation||0,a=n.maxRotation,l=s;if(!this._isVisible()||!n.display||s>=a||o<=1||!this.isHorizontal()){this.labelRotation=s;return}let u=this._getLabelSizes(),d=u.widest.width,c=u.highest.height,h=eN(this.chart.width-d,0,this.maxWidth);d+6>(e=r.offset?this.maxWidth/o:h/(o-1))&&(e=h/(o-(r.offset?.5:1)),t=this.maxHeight-rl(r.grid)-n.padding-ru(r.title,this.chart.options.font),i=Math.sqrt(d*d+c*c),l=Math.max(s,Math.min(a,l=180/em*Math.min(Math.asin(eN((u.highest.height+6)/e,-1,1)),Math.asin(eN(t/i,-1,1))-Math.asin(eN(c/i,-1,1)))))),this.labelRotation=l}afterCalculateLabelRotation(){et(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){et(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:n}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){let o=ru(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=rl(n)+o):(e.height=this.maxHeight,e.width=rl(n)+o),i.display&&this.ticks.length){let{first:t,last:r,widest:n,highest:o}=this._getLabelSizes(),a=2*i.padding,l=eT(this.labelRotation),u=Math.cos(l),d=Math.sin(l);if(s){let t=i.mirror?0:d*n.width+u*o.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{let t=i.mirror?0:u*n.width+d*o.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,r,d,u)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:n,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){let s=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),d=0,c=0;a?l?(d=r*e.width,c=i*t.height):(d=i*e.height,c=r*t.width):"start"===n?c=t.width:"end"===n?d=e.width:"inner"!==n&&(d=e.width/2,c=t.width/2),this.paddingLeft=Math.max((d-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((c-u+o)*this.width/(this.width-u),0)}else{let i=t.height/2,r=e.height/2;"start"===n?(i=0,r=e.height):"end"===n&&(i=t.height,r=0),this.paddingTop=i+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){et(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,i=e.length;t<i;t++)K(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=ra(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let r,n,o,s,a,l,u,d,c,h,p,{ctx:f,_longestTextCache:g}=this,m=[],v=[],y=Math.floor(t/rs(t,i)),b=0,w=0;for(r=0;r<t;r+=y){if(s=e[r].label,f.font=l=(a=this._resolveTickFontOptions(r)).string,u=g[l]=g[l]||{data:{},gc:[]},d=a.lineHeight,c=h=0,K(s)||Q(s)){if(Q(s))for(n=0,o=s.length;n<o;++n)K(p=s[n])||Q(p)||(c=tn(f,u.data,u.gc,c,p),h+=d)}else c=tn(f,u.data,u.gc,c,s),h=d;m.push(c),v.push(h),b=Math.max(c,b),w=Math.max(h,w)}ei(g,e=>{let i,r=e.gc,n=r.length/2;if(n>t){for(i=0;i<n;++i)delete e.data[r[i]];r.splice(0,n)}});let C=m.indexOf(b),x=v.indexOf(w),S=e=>({width:m[e]||0,height:v[e]||0});return{first:S(0),last:S(t-1),widest:S(C),highest:S(x),widths:m,heights:v}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return eN(this._alignToPixels?to(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){var t,i;let r=this.ticks||[];if(e>=0&&e<r.length){let i=r[e];return i.$context||(t=this.getContext(),i.$context=tR(t,{tick:i,index:e,type:"tick"}))}return this.$context||(this.$context=(i=this.chart.getContext(),tR(i,{scale:this,type:"scale"})))}_tickSize(){let e=this.options.ticks,t=eT(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),n=this._getLabelSizes(),o=e.autoSkipPadding||0,s=n?n.widest.width+o:0,a=n?n.highest.height+o:0;return this.isHorizontal()?a*i>s*r?s/i:a/r:a*r<s*i?a/i:s/r}_isVisible(){let e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t,i,r,n,o,s,a,l,u,d,c,h,p=this.axis,f=this.chart,g=this.options,{grid:m,position:v,border:y}=g,b=m.offset,w=this.isHorizontal(),C=this.ticks.length+ +!!b,x=rl(m),S=[],k=y.setContext(this.getContext()),R=k.display?k.width:0,E=R/2,P=function(e){return to(f,e,R)};if("top"===v)t=P(this.bottom),s=this.bottom-x,l=t-E,d=P(e.top)+E,h=e.bottom;else if("bottom"===v)t=P(this.top),d=e.top,h=P(e.bottom)-E,s=t+E,l=this.top+x;else if("left"===v)t=P(this.right),o=this.right-x,a=t-E,u=P(e.left)+E,c=e.right;else if("right"===v)t=P(this.left),u=e.left,c=P(e.right)-E,o=t+E,a=this.left+x;else if("x"===p){if("center"===v)t=P((e.top+e.bottom)/2+.5);else if(X(v)){let e=Object.keys(v)[0],i=v[e];t=P(this.chart.scales[e].getPixelForValue(i))}d=e.top,h=e.bottom,l=(s=t+E)+x}else if("y"===p){if("center"===v)t=P((e.left+e.right)/2);else if(X(v)){let e=Object.keys(v)[0],i=v[e];t=P(this.chart.scales[e].getPixelForValue(i))}a=(o=t-E)-x,u=e.left,c=e.right}let M=J(g.ticks.maxTicksLimit,C),D=Math.max(1,Math.ceil(C/M));for(i=0;i<C;i+=D){let e=this.getContext(i),t=m.setContext(e),p=y.setContext(e),g=t.lineWidth,v=t.color,C=p.dash||[],x=p.dashOffset,k=t.tickWidth,R=t.tickColor,E=t.tickBorderDash||[],P=t.tickBorderDashOffset;void 0!==(r=function(e,t,i){let r,n=e.ticks.length,o=Math.min(t,n-1),s=e._startPixel,a=e._endPixel,l=e.getPixelForTick(o);if(!i||(r=1===n?Math.max(l-s,a-l):0===t?(e.getPixelForTick(1)-l)/2:(l-e.getPixelForTick(o-1))/2,!((l+=o<t?r:-r)<s-1e-6)&&!(l>a+1e-6)))return l}(this,i,b))&&(n=to(f,r,g),w?o=a=u=c=n:s=l=d=h=n,S.push({tx1:o,ty1:s,tx2:a,ty2:l,x1:u,y1:d,x2:c,y2:h,width:g,color:v,borderDash:C,borderDashOffset:x,tickWidth:k,tickColor:R,tickBorderDash:E,tickBorderDashOffset:P}))}return this._ticksLength=C,this._borderValue=t,S}_computeLabelItems(e){let t,i,r,n,o,s,a,l,u,d,c,h=this.axis,p=this.options,{position:f,ticks:g}=p,m=this.isHorizontal(),v=this.ticks,{align:y,crossAlign:b,padding:w,mirror:C}=g,x=rl(p.grid),S=x+w,k=C?-w:S,R=-eT(this.labelRotation),E=[],P="middle";if("top"===f)o=this.bottom-k,s=this._getXAxisLabelAlignment();else if("bottom"===f)o=this.top+k,s=this._getXAxisLabelAlignment();else if("left"===f){let e=this._getYAxisLabelAlignment(x);s=e.textAlign,n=e.x}else if("right"===f){let e=this._getYAxisLabelAlignment(x);s=e.textAlign,n=e.x}else if("x"===h){if("center"===f)o=(e.top+e.bottom)/2+S;else if(X(f)){let e=Object.keys(f)[0],t=f[e];o=this.chart.scales[e].getPixelForValue(t)+S}s=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===f)n=(e.left+e.right)/2-S;else if(X(f)){let e=Object.keys(f)[0],t=f[e];n=this.chart.scales[e].getPixelForValue(t)}s=this._getYAxisLabelAlignment(x).textAlign}"y"===h&&("start"===y?P="top":"end"===y&&(P="bottom"));let M=this._getLabelSizes();for(t=0,i=v.length;t<i;++t){let e;r=v[t].label;let h=g.setContext(this.getContext(t));a=this.getPixelForTick(t)+g.labelOffset,u=(l=this._resolveTickFontOptions(t)).lineHeight;let p=(d=Q(r)?r.length:1)/2,y=h.color,w=h.textStrokeColor,x=h.textStrokeWidth,S=s;if(m?(n=a,"inner"===s&&(S=t===i-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),c="top"===f?"near"===b||0!==R?-d*u+u/2:"center"===b?-M.highest.height/2-p*u+u:-M.highest.height+u/2:"near"===b||0!==R?u/2:"center"===b?M.highest.height/2-p*u:M.highest.height-d*u,C&&(c*=-1),0===R||h.showLabelBackdrop||(n+=u/2*Math.sin(R))):(o=a,c=(1-d)*u/2),h.showLabelBackdrop){let r=tx(h.backdropPadding),n=M.heights[t],o=M.widths[t],a=c-r.top,l=0-r.left;switch(P){case"middle":a-=n/2;break;case"bottom":a-=n}switch(s){case"center":l-=o/2;break;case"right":l-=o;break;case"inner":t===i-1?l-=o:t>0&&(l-=o/2)}e={left:l,top:a,width:o+r.width,height:n+r.height,color:h.backdropColor}}E.push({label:r,font:l,textOffset:c,options:{rotation:R,color:y,strokeColor:w,strokeWidth:x,textAlign:S,textBaseline:P,translation:[n,o],backdrop:e}})}return E}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-eT(this.labelRotation))return"top"===e?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(e){let t,i,{position:r,ticks:{crossAlign:n,mirror:o,padding:s}}=this.options,a=this._getLabelSizes(),l=e+s,u=a.widest.width;return"left"===r?o?(i=this.right+s,"near"===n?t="left":"center"===n?(t="center",i+=u/2):(t="right",i+=u)):(i=this.right-l,"near"===n?t="right":"center"===n?(t="center",i-=u/2):(t="left",i=this.left)):"right"===r?o?(i=this.left+s,"near"===n?t="right":"center"===n?(t="center",i-=u/2):(t="left",i-=u)):(i=this.left+l,"near"===n?t="left":"center"===n?(t="center",i+=u/2):(t="right",i=this.right)):t="right",{textAlign:t,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:n,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,n,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(t=>t.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t,i,r=this.options.grid,n=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(r.display)for(t=0,i=o.length;t<i;++t){let e=o[t];r.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),r.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){let e,t,i,r,{chart:n,ctx:o,options:{border:s,grid:a}}=this,l=s.setContext(this.getContext()),u=s.display?l.width:0;if(!u)return;let d=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;this.isHorizontal()?(e=to(n,this.left,u)-u/2,t=to(n,this.right,d)+d/2,i=r=c):(i=to(n,this.top,u)-u/2,r=to(n,this.bottom,d)+d/2,e=t=c),o.save(),o.lineWidth=l.width,o.strokeStyle=l.color,o.beginPath(),o.moveTo(e,i),o.lineTo(t,r),o.stroke(),o.restore()}drawLabels(e){if(!this.options.ticks.display)return;let t=this.ctx,i=this._computeLabelArea();for(let r of(i&&td(t,i),this.getLabelItems(e))){let e=r.options,i=r.font;tf(t,r.label,0,r.textOffset,i,e)}i&&tc(t)}drawTitle(){let e,t,{ctx:i,options:{position:r,title:n,reverse:o}}=this;if(!n.display)return;let s=tS(n.font),a=tx(n.padding),l=n.align,u=s.lineHeight/2;"bottom"===r||"center"===r||X(r)?(u+=a.bottom,Q(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=a.top;let{titleX:d,titleY:c,maxWidth:h,rotation:p}=function(e,t,i,r){let n,o,s,{top:a,left:l,bottom:u,right:d,chart:c}=e,{chartArea:h,scales:p}=c,f=0,g=u-a,m=d-l;if(e.isHorizontal()){if(o=eK(r,l,d),X(i)){let e=Object.keys(i)[0],r=i[e];s=p[e].getPixelForValue(r)+g-t}else s="center"===i?(h.bottom+h.top)/2+g-t:ro(e,i,t);n=d-l}else{if(X(i)){let e=Object.keys(i)[0],r=i[e];o=p[e].getPixelForValue(r)-m+t}else o="center"===i?(h.left+h.right)/2-m+t:ro(e,i,t);s=eK(r,u,a),f="left"===i?-eC:eC}return{titleX:o,titleY:s,maxWidth:n,rotation:f}}(this,u,r,l);tf(i,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:p,textAlign:(e=eq(l),(o&&"right"!==r||!o&&"right"===r)&&(e="left"===(t=e)?"right":"right"===t?"left":t),e),textBaseline:"middle",translation:[d,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=J(e.grid&&e.grid.z,-1),r=J(e.border&&e.border.z,0);return this._isVisible()&&this.draw===rd.prototype.draw?[{z:i,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){let t,i,r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",o=[];for(t=0,i=r.length;t<i;++t){let i=r[t];i[n]!==this.id||e&&i.type!==e||o.push(i)}return o}_resolveTickFontOptions(e){return tS(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class rc{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){var t,i,r,n,o,s;let a,l,u=Object.getPrototypeOf(e);"id"in(t=u)&&"defaults"in t&&(l=this.register(u));let d=this.items,c=e.id,h=this.scope+"."+c;if(!c)throw Error("class does not have id: "+e);return c in d||(d[c]=e,i=e,r=h,n=l,a=ea(Object.create(null),[n?tr.get(n):{},tr.get(r),i.defaults]),tr.set(r,a),i.defaultRoutes&&(o=r,Object.keys(s=i.defaultRoutes).forEach(e=>{let t=e.split("."),i=t.pop(),r=[o].concat(t).join("."),n=s[e].split("."),a=n.pop(),l=n.join(".");tr.route(r,i,l,a)})),i.descriptors&&tr.describe(r,i.descriptors),this.override&&tr.override(e.id,e.overrides)),h}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in tr[r]&&(delete tr[r][i],this.override&&delete e9[i])}}var rh=new class{constructor(){this.controllers=new rc(iw,"datasets",!0),this.elements=new rc(rr,"elements"),this.plugins=new rc(Object,"plugins"),this.scales=new rc(rd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(t=>{let r=i||this._getRegistryForType(t);i||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ei(t,t=>{let r=i||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,i){let r=eh(e);et(i["before"+r],[],i),t[e](i),et(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(void 0===r)throw Error('"'+e+'" is not a registered '+i+".");return r}};class rp{constructor(){this._init=void 0}notify(e,t,i,r){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;let n=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(n,e,t,i);return"afterDestroy"===t&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,i,r){for(let n of(r=r||{},e)){let e=n.plugin;if(!1===et(e[i],[t,r,n.options],e)&&r.cancelable)return!1}return!0}invalidate(){K(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=J(i.options&&i.options.plugins,{}),n=function(e){let t={},i=[],r=Object.keys(rh.plugins.items);for(let e=0;e<r.length;e++)i.push(rh.getPlugin(r[e]));let n=e.plugins||[];for(let e=0;e<n.length;e++){let r=n[e];-1===i.indexOf(r)&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}(i);return!1!==r||t?function(e,{plugins:t,localIds:i},r,n){let o=[],s=e.getContext();for(let l of t){var a;let t=l.id,u=(a=r[t],n||!1!==a?!0===a?{}:a:null);null!==u&&o.push({plugin:l,options:function(e,{plugin:t,local:i},r,n){let o=e.pluginScopeKeys(t),s=e.getOptionScopes(r,o);return i&&t.defaults&&s.push(t.defaults),e.createResolver(s,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(e.config,{plugin:l,local:i[t]},u,s)})}return o}(e,n,r,t):[]}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function rf(e,t){let i=tr.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function rg(e){if("x"===e||"y"===e||"r"===e)return e}function rm(e,...t){if(rg(e))return e;for(let r of t){var i;let t=r.axis||("top"===(i=r.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||e.length>1&&rg(e[0].toLowerCase());if(t)return t}throw Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function rv(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function ry(e){let t,i,r,n,o=e.options||(e.options={});o.plugins=J(o.plugins,{}),t=e9[e.type]||{scales:{}},i=o.scales||{},r=rf(e.type,o),n=Object.create(null),Object.keys(i).forEach(o=>{let s=i[o];if(!X(s))return console.error(`Invalid scale configuration for scale: ${o}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let a=rm(o,s,function(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(i.length)return rv(e,"x",i[0])||rv(e,"y",i[0])}return{}}(o,e),tr.scales[s.type]),l=a===r?"_index_":"_value_",u=t.scales||{};n[o]=el(Object.create(null),[{axis:a},s,u[a],u[l]])}),e.data.datasets.forEach(t=>{let r=t.type||e.type,s=t.indexAxis||rf(r,o),a=(e9[r]||{}).scales||{};Object.keys(a).forEach(e=>{let r,o=(r=e,"_index_"===e?r=s:"_value_"===e&&(r="x"===s?"y":"x"),r),l=t[o+"AxisID"]||o;n[l]=n[l]||Object.create(null),el(n[l],[{axis:o},i[l],a[e]])})}),Object.keys(n).forEach(e=>{let t=n[e];el(t,[tr.scales[t.type],tr.scale])}),o.scales=n}function rb(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}let rw=new Map,rC=new Set;function rx(e,t){let i=rw.get(e);return i||(i=t(),rw.set(e,i),rC.add(i)),i}let rS=(e,t,i)=>{let r=ec(t,i);void 0!==r&&e.add(r)};class rk{constructor(e){this._config=function(e){return(e=e||{}).data=rb(e.data),ry(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),ry(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return rx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return rx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return rx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return rx(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:n}=this,o=this._cachedScopes(e,i),s=o.get(t);if(s)return s;let a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>rS(a,e,t))),t.forEach(e=>rS(a,r,e)),t.forEach(e=>rS(a,e9[n]||{},e)),t.forEach(e=>rS(a,tr,e)),t.forEach(e=>rS(a,te,e))});let l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),rC.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,e9[t]||{},tr.datasets[t]||{},{type:t},tr,te]}resolveNamedOptions(e,t,i,r=[""]){let n={$shared:!0},{resolver:o,subPrefixes:s}=rR(this._resolverCache,e,r),a=o;if(function(e,t){let{isScriptable:i,isIndexable:r}=tM(e);for(let n of t){let t=i(n),o=r(n),s=(o||t)&&e[n];if(t&&(ef(s)||rE(s))||o&&Q(s))return!0}return!1}(o,t)){n.$shared=!1,i=ef(i)?i():i;let t=this.createResolver(e,i,s);a=tP(o,i,t)}for(let e of t)n[e]=a[e];return n}createResolver(e,t,i=[""],r){let{resolver:n}=rR(this._resolverCache,e,i);return X(t)?tP(n,t,void 0,r):n}}function rR(e,t,i){let r=e.get(t);r||(r=new Map,e.set(t,r));let n=i.join(),o=r.get(n);return o||(o={resolver:tE(t,i),subPrefixes:i.filter(e=>!e.toLowerCase().includes("hover"))},r.set(n,o)),o}let rE=e=>X(e)&&Object.getOwnPropertyNames(e).some(t=>ef(e[t])),rP=["top","bottom","left","right","chartArea"];function rM(e,t){return"top"===e||"bottom"===e||-1===rP.indexOf(e)&&"x"===t}function rD(e,t){return function(i,r){return i[e]===r[e]?i[t]-r[t]:i[e]-r[e]}}function rT(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),et(i&&i.onComplete,[e],t)}function rO(e){let t=e.chart,i=t.options.animation;et(i&&i.onProgress,[e],t)}function r_(e){return tj()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}let rA={},rF=e=>{let t=r_(e);return Object.values(rA).filter(e=>e.canvas===t).pop()};class rI{static defaults=tr;static instances=rA;static overrides=e9;static registry=rh;static version="4.5.1";static getChart=rF;static register(...e){rh.add(...e),rL()}static unregister(...e){rh.remove(...e),rL()}constructor(e,t){const i=this.config=new rk(t),r=r_(e),n=rF(r);if(n)throw Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||(!tj()||"undefined"!=typeof OffscreenCanvas&&r instanceof OffscreenCanvas?iZ:ri)),this.platform.updateConfig(i);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,u=a&&a.width;if(this.id=q(),this.ctx=s,this.canvas=a,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rp,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let i;return function(...r){return t?(clearTimeout(i),i=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),o.resizeDelay||0),this._dataChanges=[],rA[this.id]=this,!s||!a)return void console.error("Failed to create chart: can't acquire context from the given item");ir.listen(this,"complete",rT),ir.listen(this,"progress",rO),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:n}=this;return K(e)?t&&n?n:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rh}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tX(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ts(this.canvas,this.ctx),this}stop(){return ir.stop(this),this}resize(e,t){ir.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let i=this.options,r=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,n),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,tX(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),et(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ei(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){let e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((e,t)=>(e[t]=!1,e),{}),n=[];t&&(n=n.concat(Object.keys(t).map(e=>{let i=t[e],r=rm(e,i),n="r"===r,o="x"===r;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}}))),ei(n,t=>{let n=t.options,o=n.id,s=rm(o,n),a=J(n.type,t.dtype);(void 0===n.position||rM(n.position,s)!==rM(t.dposition))&&(n.position=t.dposition),r[o]=!0;let l=null;o in i&&i[o].type===a?l=i[o]:i[(l=new(rh.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this})).id]=l,l.init(n,e)}),ei(r,(e,t)=>{e||delete i[t]}),ei(i,e=>{iX.configure(this,e,e.options),iX.addBox(this,e)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((e,t)=>e.index-t.index),i>t){for(let e=t;e<i;++e)this._destroyDatasetMeta(e);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(rD("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,i)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e,t,i=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){let t=r[e],n=this.getDatasetMeta(e),o=t.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(e),n=this.getDatasetMeta(e)),n.type=o,n.indexAxis=t.indexAxis||rf(o,this.options),n.order=t.order||0,n.index=e,n.label=""+t.label,n.visible=this.isDatasetVisible(e),n.controller)n.controller.updateIndex(e),n.controller.linkScales();else{let t=rh.getController(o),{datasetElementType:r,dataElementType:s}=tr.datasets[o];Object.assign(t,{dataElementType:rh.getElement(s),datasetElementType:r&&rh.getElement(r)}),n.controller=new t(this,e),i.push(n.controller)}}return this._updateMetasets(),i}_resetElements(){ei(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;let n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let e=0,t=this.data.datasets.length;e<t;e++){let{controller:t}=this.getDatasetMeta(e),i=!r&&-1===n.indexOf(t);t.buildOrUpdateElements(i),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ei(n,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rD("z","_idx"));let{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){ei(this.scales,e=>{iX.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options;eg(new Set(Object.keys(this._listeners)),new Set(e.events))&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this;for(let{method:i,start:r,count:n}of this._getUniformDataChanges()||[]){var t="_removeElements"===i?-n:n;for(let i of Object.keys(e)){let n=+i;if(n>=r){let o=e[i];delete e[i],(t>0||n>r)&&(e[n+t]=o)}}}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,i=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=i(0);for(let e=1;e<t;e++)if(!eg(r,i(e)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;iX.update(this,this.width,this.height,e);let t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],ei(this.boxes,e=>{i&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,ef(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ir.has(this)?this.attached&&!ir.running(this)&&ir.start(this):(this.draw(),rT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t,i,r=this._sortedMetasets,n=[];for(t=0,i=r.length;t<i;++t){let i=r[t];(!e||i.visible)&&n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=ii(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&td(t,r),e.controller.draw(),r&&tc(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return tu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){let n=iH.modes[t];return"function"==typeof n?n(this,e,i,r):[]}getDatasetMeta(e){let t=this.data.datasets[e],i=this._metasets,r=i.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=tR(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){let r=i?"show":"hide",n=this.getDatasetMeta(e),o=n.controller._resolveAnimations(void 0,r);ep(t)?(n.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(n,{visible:i}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ir.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ts(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete rA[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,i=(i,r)=>{t.addEventListener(this,i,r),e[i]=r},r=(e,t,i)=>{e.offsetX=t,e.offsetY=i,this._eventHandler(e)};ei(this.options.events,e=>i(e,r))}bindResponsiveEvents(){let e;this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(e,r)=>{i.addEventListener(this,e,r),t[e]=r},n=(e,r)=>{t[e]&&(i.removeEventListener(this,e,r),delete t[e])},o=(e,t)=>{this.canvas&&this.resize(e,t)},s=()=>{n("attach",s),this.attached=!0,this.resize(),r("resize",o),r("detach",e)};e=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),r("attach",s)},i.isAttached(this.canvas)?s():e()}unbindEvents(){ei(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ei(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){let r,n,o,s=i?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+s+"DatasetHoverStyle"](),n=0,o=e.length;n<o;++n){let t=(r=e[n])&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],i=e.map(({datasetIndex:e,index:t})=>{let i=this.getDatasetMeta(e);if(!i)throw Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[t],index:t}});er(i,t)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,i){let r=this.options.hover,n=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),o=n(t,e),s=i?e:n(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){let i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;let n=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(n||i.changed)&&this.render(),this}_handleEvent(e,t,i){var r;let{_active:n=[],options:o}=this,s=this._getActiveElements(e,n,i,t),a="mouseup"===e.type||"click"===e.type||"contextmenu"===e.type,l=(r=this._lastEvent,i&&"mouseout"!==e.type?a?r:e:null);i&&(this._lastEvent=null,et(o.onHover,[e,s,this],this),a&&et(o.onClick,[e,s,this],this));let u=!er(s,n);return(u||t)&&(this._active=s,this._updateHoverStyles(s,n,t)),this._lastEvent=l,u}_getActiveElements(e,t,i,r){if("mouseout"===e.type)return[];if(!i)return t;let n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,r)}}function rL(){return ei(rI.instances,e=>e._plugins.invalidate())}function rN(e,t,i,r){return{x:i+e*Math.cos(t),y:r+e*Math.sin(t)}}function rB(e,t,i,r,n,o){var s,a,l,u;let d,c,h,p,{x:f,y:g,startAngle:m,pixelMargin:v,innerRadius:y}=t,b=Math.max(t.outerRadius+r+i-v,0),w=y>0?y+r+i+v:0,C=0,x=n-m;if(r){let e=b>0?b-r:0,t=((y>0?y-r:0)+e)/2;C=(x-(0!==t?x*t/(t+r):x))/2}let S=Math.max(.001,x*b-i/em)/b,k=(x-S)/2,R=m+k+C,E=n-k-C,{outerStart:P,outerEnd:M,innerStart:D,innerEnd:T}=(s=t,a=w,l=b,u=E-R,d=tb(s.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),h=Math.min(c=(l-a)/2,u*a/2),{outerStart:(p=e=>{let t=(l-Math.min(c,e))*u/2;return eN(e,0,Math.min(c,t))})(d.outerStart),outerEnd:p(d.outerEnd),innerStart:eN(d.innerStart,0,h),innerEnd:eN(d.innerEnd,0,h)}),O=b-P,_=b-M,A=R+P/O,F=E-M/_,I=w+D,L=w+T,N=R+D/I,B=E-T/L;if(e.beginPath(),o){let t=(A+F)/2;if(e.arc(f,g,b,A,t),e.arc(f,g,b,t,F),M>0){let t=rN(_,F,f,g);e.arc(t.x,t.y,M,F,E+eC)}let i=rN(L,E,f,g);if(e.lineTo(i.x,i.y),T>0){let t=rN(L,B,f,g);e.arc(t.x,t.y,T,E+eC,B+Math.PI)}let r=(E-T/w+(R+D/w))/2;if(e.arc(f,g,w,E-T/w,r,!0),e.arc(f,g,w,r,R+D/w,!0),D>0){let t=rN(I,N,f,g);e.arc(t.x,t.y,D,N+Math.PI,R-eC)}let n=rN(O,R,f,g);if(e.lineTo(n.x,n.y),P>0){let t=rN(O,A,f,g);e.arc(t.x,t.y,P,R-eC,A)}}else{e.moveTo(f,g);let t=Math.cos(A)*b+f,i=Math.sin(A)*b+g;e.lineTo(t,i);let r=Math.cos(F)*b+f,n=Math.sin(F)*b+g;e.lineTo(r,n)}e.closePath()}class rV extends rr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let{angle:r,distance:n}=e_(this.getProps(["x","y"],i),{x:e,y:t}),{startAngle:o,endAngle:s,innerRadius:a,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,c=J(u,s-o),h=eL(r,o,s)&&o!==s,p=c>=ev||h,f=eB(n,a+d,l+d);return p&&f}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:n,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,u=(r+n)/2,d=(o+s+l+a)/2;return{x:t+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,n=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=.33*("inner"===t.borderAlign),this.fullCircles=i>ev?Math.floor(i/ev):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*r,Math.sin(s)*r);let a=r*(1-Math.sin(Math.min(em,i||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,i,r,n){let{fullCircles:o,startAngle:s,circumference:a}=t,l=t.endAngle;if(o){rB(e,t,i,r,l,n);for(let t=0;t<o;++t)e.fill();isNaN(a)||(l=s+(a%ev||ev))}rB(e,t,i,r,l,n),e.fill()}(e,this,a,n,o),function(e,t,i,r,n){let{fullCircles:o,startAngle:s,circumference:a,options:l}=t,{borderWidth:u,borderJoinStyle:d,borderDash:c,borderDashOffset:h,borderRadius:p}=l,f="inner"===l.borderAlign;if(!u)return;e.setLineDash(c||[]),e.lineDashOffset=h,f?(e.lineWidth=2*u,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(o){rB(e,t,i,r,g,n);for(let t=0;t<o;++t)e.stroke();isNaN(a)||(g=s+(a%ev||ev))}f&&function(e,t,i){let{startAngle:r,pixelMargin:n,x:o,y:s,outerRadius:a,innerRadius:l}=t,u=n/a;e.beginPath(),e.arc(o,s,a,r-u,i+u),l>n?(u=n/l,e.arc(o,s,l,i+u,r-u,!0)):e.arc(o,s,n,i+eC,r-eC),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-s>=em&&0===p&&"miter"!==d&&function(e,t,i){let{startAngle:r,x:n,y:o,outerRadius:s,innerRadius:a,options:l}=t,{borderWidth:u,borderJoinStyle:d}=l,c=Math.min(u/s,eI(r-i));if(e.beginPath(),e.arc(n,o,s-u/2,r+c/2,i-c/2),a>0){let t=Math.min(u/a,eI(r-i));e.arc(n,o,a+u/2,i-t/2,r+t/2,!0)}else{let t=Math.min(u/2,s*eI(r-i));if("round"===d)e.arc(n,o,t,i-em/2,r+em/2,!0);else if("bevel"===d){let s=2*t*t,a=-s*Math.cos(i+em/2)+n,l=-s*Math.sin(i+em/2)+o,u=s*Math.cos(r+em/2)+n,d=s*Math.sin(r+em/2)+o;e.lineTo(a,l),e.lineTo(u,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),o||(rB(e,t,i,r,g,n),e.stroke())}(e,this,a,n,o),e.restore()}}function rH(e,t,i=t){e.lineCap=J(i.borderCapStyle,t.borderCapStyle),e.setLineDash(J(i.borderDash,t.borderDash)),e.lineDashOffset=J(i.borderDashOffset,t.borderDashOffset),e.lineJoin=J(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=J(i.borderWidth,t.borderWidth),e.strokeStyle=J(i.borderColor,t.borderColor)}function rz(e,t,i){e.lineTo(i.x,i.y)}function rj(e,t,i={}){let r=e.length,{start:n=0,end:o=r-1}=i,{start:s,end:a}=t,l=Math.max(n,s),u=Math.min(o,a);return{count:r,start:l,loop:t.loop,ilen:u<l&&!(n<s&&o<s||n>a&&o>a)?r+u-l:u-l}}function rG(e,t,i,r){let n,o,s,{points:a,options:l}=t,{count:u,start:d,loop:c,ilen:h}=rj(a,i,r),p=l.stepped?th:l.tension||"monotone"===l.cubicInterpolationMode?tp:rz,{move:f=!0,reverse:g}=r||{};for(n=0;n<=h;++n)(o=a[(d+(g?h-n:n))%u]).skip||(f?(e.moveTo(o.x,o.y),f=!1):p(e,s,o,g,l.stepped),s=o);return c&&p(e,s,o=a[(d+(g?h:0))%u],g,l.stepped),!!c}function rW(e,t,i,r){let n,o,s,a,l,u,d=t.points,{count:c,start:h,ilen:p}=rj(d,i,r),{move:f=!0,reverse:g}=r||{},m=0,v=0,y=e=>(h+(g?p-e:e))%c,b=()=>{a!==l&&(e.lineTo(m,l),e.lineTo(m,a),e.lineTo(m,u))};for(f&&(o=d[y(0)],e.moveTo(o.x,o.y)),n=0;n<=p;++n){if((o=d[y(n)]).skip)continue;let t=o.x,i=o.y,r=0|t;r===s?(i<a?a=i:i>l&&(l=i),m=(v*m+t)/++v):(b(),e.lineTo(t,i),s=r,v=0,a=l=i),u=i}b()}function rU(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return e._decimated||e._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||i?rG:rW}let r$="function"==typeof Path2D;class rq extends rr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let r=i.spanGaps?this._loop:this._fullLoop;!function(e,t,i,r,n){let o,s,a,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)!function(e,t="x"){let i,r,n,o=tH(t),s=e.length,a=Array(s).fill(0),l=Array(s),u=tV(e,0);for(i=0;i<s;++i)if(r=n,n=u,u=tV(e,i+1),n){if(u){let e=u[t]-n[t];a[i]=0!==e?(u[o]-n[o])/e:0}l[i]=r?u?eR(a[i-1])!==eR(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,i){let r,n,o,s,a,l=e.length,u=tV(e,0);for(let d=0;d<l-1;++d)if(a=u,u=tV(e,d+1),a&&u){if(eE(t[d],0,tB)){i[d]=i[d+1]=0;continue}(s=Math.pow(r=i[d]/t[d],2)+Math.pow(n=i[d+1]/t[d],2))<=9||(o=3/Math.sqrt(s),i[d]=r*o*t[d],i[d+1]=n*o*t[d])}}(e,a,l),function(e,t,i="x"){let r,n,o,s=tH(i),a=e.length,l=tV(e,0);for(let u=0;u<a;++u){if(n=o,o=l,l=tV(e,u+1),!o)continue;let a=o[i],d=o[s];n&&(r=(a-n[i])/3,o[`cp1${i}`]=a-r,o[`cp1${s}`]=d-r*t[u]),l&&(r=(l[i]-a)/3,o[`cp2${i}`]=a+r,o[`cp2${s}`]=d+r*t[u])}}(e,l,t)}(e,n);else{let i=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)l=function(e,t,i,r){let n=e.skip?t:e,o=i.skip?t:i,s=eA(t,n),a=eA(o,t),l=s/(s+a),u=a/(s+a);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=r*l,c=r*u;return{previous:{x:t.x-d*(o.x-n.x),y:t.y-d*(o.y-n.y)},next:{x:t.x+c*(o.x-n.x),y:t.y+c*(o.y-n.y)}}}(i,a=e[o],e[Math.min(o+1,s-!r)%s],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}t.capBezierPoints&&function(e,t){let i,r,n,o,s,a=tu(e[0],t);for(i=0,r=e.length;i<r;++i)s=o,o=a,a=i<r-1&&tu(e[i+1],t),o&&(n=e[i],s&&(n.cp1x=tz(n.cp1x,t.left,t.right),n.cp1y=tz(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=tz(n.cp2x,t.left,t.right),n.cp2y=tz(n.cp2y,t.top,t.bottom)))}(e,i)}(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){let i=e.points,r=e.options.spanGaps,n=i.length;if(!n)return[];let o=!!e._loop,{start:s,end:a}=function(e,t,i,r){let n=0,o=t-1;if(i&&!r)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,i&&(o+=n);o>n&&e[o%t].skip;)o--;return{start:n,end:o%=t}}(i,n,o,r);if(!0===r)return t9(e,[{start:s,end:a,loop:o}],i,t);let l=a<s?a+n:a,u=!!e._fullLoop&&0===s&&a===n-1;return t9(e,function(e,t,i,r){let n,o=e.length,s=[],a=t,l=e[t];for(n=t+1;n<=i;++n){let i=e[n%o];i.skip||i.stop?l.skip||(r=!1,s.push({start:t%o,end:(n-1)%o,loop:r}),t=a=i.stop?n:null):(a=n,l.skip&&(t=n)),l=i}return null!==a&&s.push({start:t%o,end:a%o,loop:r}),s}(i,s,l,u),i,t)}(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){let i,r,n=this.options,o=e[t],s=this.points,a=t7(this,{property:t,start:o,end:o});if(!a.length)return;let l=[],u=n.stepped?t0:n.tension||"monotone"===n.cubicInterpolationMode?t1:tJ;for(i=0,r=a.length;i<r;++i){let{start:r,end:d}=a[i],c=s[r],h=s[d];if(c===h){l.push(c);continue}let p=Math.abs((o-c[t])/(h[t]-c[t])),f=u(c,h,p,n.stepped);f[t]=e[t],l.push(f)}return 1===l.length?l[0]:l}pathSegment(e,t,i){return rU(this)(e,this,t,i)}path(e,t,i){let r=this.segments,n=rU(this),o=this._loop;for(let s of(t=t||0,i=i||this.points.length-t,r))o&=n(e,this,s,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){let n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),function(e,t,i,r){if(r$&&!t.options.segment){let n;(n=t._path)||(n=t._path=new Path2D,t.path(n,i,r)&&n.closePath()),rH(e,t.options),e.stroke(n)}else!function(e,t,i,r){let{segments:n,options:o}=t,s=rU(t);for(let a of n)rH(e,o,a.style),e.beginPath(),s(e,t,a,{start:i,end:i+r-1})&&e.closePath(),e.stroke()}(e,t,i,r)}(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rK(e,t){let i,r,n,o,s,{x:a,y:l,base:u,width:d,height:c}=e.getProps(["x","y","base","width","height"],t);return e.horizontal?(s=c/2,i=Math.min(a,u),r=Math.max(a,u),n=l-s,o=l+s):(i=a-(s=d/2),r=a+s,n=Math.min(l,u),o=Math.max(l,u)),{left:i,top:n,right:r,bottom:o}}function rQ(e,t,i,r){return e?0:eN(t,i,r)}function rX(e,t,i,r){let n=null===t,o=null===i,s=e&&!(n&&o)&&rK(e,r);return s&&(n||eB(t,s.left,s.right))&&(o||eB(i,s.top,s.bottom))}function rY(e,t){e.rect(t.x,t.y,t.w,t.h)}function rZ(e,t,i={}){let r=e.x!==i.x?-t:0,n=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-r,s=(e.y+e.h!==i.y+i.h?t:0)-n;return{x:e.x+r,y:e.y+n,w:e.w+o,h:e.h+s,radius:e.radius}}class rJ extends rr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){var t,i,r;let n,o,s,a,l,u,d,c,{inflateAmount:h,options:{borderColor:p,backgroundColor:f}}=this,{inner:g,outer:m}=(o=(n=rK(this)).right-n.left,s=n.bottom-n.top,t=o/2,i=s/2,a=this.options.borderWidth,l=this.borderSkipped,u=tw(a),d={t:rQ(l.top,u.top,0,i),r:rQ(l.right,u.right,0,t),b:rQ(l.bottom,u.bottom,0,i),l:rQ(l.left,u.left,0,t)},c=function(e,t,i){let{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,o=tC(n),s=Math.min(t,i),a=e.borderSkipped,l=r||X(n);return{topLeft:rQ(!l||a.top||a.left,o.topLeft,0,s),topRight:rQ(!l||a.top||a.right,o.topRight,0,s),bottomLeft:rQ(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:rQ(!l||a.bottom||a.right,o.bottomRight,0,s)}}(this,o/2,s/2),{outer:{x:n.left,y:n.top,w:o,h:s,radius:c},inner:{x:n.left+d.l,y:n.top+d.t,w:o-d.l-d.r,h:s-d.t-d.b,radius:{topLeft:Math.max(0,c.topLeft-Math.max(d.t,d.l)),topRight:Math.max(0,c.topRight-Math.max(d.t,d.r)),bottomLeft:Math.max(0,c.bottomLeft-Math.max(d.b,d.l)),bottomRight:Math.max(0,c.bottomRight-Math.max(d.b,d.r))}}}),v=(r=m.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?tg:rY;e.save(),(m.w!==g.w||m.h!==g.h)&&(e.beginPath(),v(e,rZ(m,h,g)),e.clip(),v(e,rZ(g,-h,m)),e.fillStyle=p,e.fill("evenodd")),e.beginPath(),v(e,rZ(g,h)),e.fillStyle=f,e.fill(),e.restore()}inRange(e,t,i){return rX(this,e,t,i)}inXRange(e,t){return rX(this,e,null,t)}inYRange(e,t){return rX(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(t+r)/2:t,y:n?i:(i+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}let r0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],r1=r0.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")),r2=(e,t)=>{let{boxHeight:i=t,boxWidth:r=t}=e;return e.usePointStyle&&(i=Math.min(i,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(t,i)}};class r5 extends rr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=et(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,i)=>e.sort(t,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let e,t,{options:i,ctx:r}=this;if(!i.display){this.width=this.height=0;return}let n=i.labels,o=tS(n.font),s=o.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=r2(n,s);r.font=o.string,this.isHorizontal()?(e=this.maxWidth,t=this._fitRows(a,s,l,u)+10):(t=this.maxHeight,e=this._fitCols(a,o,l,u)+10),this.width=Math.min(e,i.maxWidth||this.maxWidth),this.height=Math.min(t,i.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:n,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+s,d=e;n.textAlign="left",n.textBaseline="middle";let c=-1,h=-u;return this.legendItems.forEach((e,p)=>{let f=i+t/2+n.measureText(e.text).width;(0===p||l[l.length-1]+f+2*s>o)&&(d+=u,l[l.length-(p>0?0:1)]=0,h+=u,c++),a[p]={left:0,top:h,row:c,width:f,height:r},l[l.length-1]+=f+s}),d}_fitCols(e,t,i,r){let{ctx:n,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=s,c=0,h=0,p=0,f=0;return this.legendItems.forEach((e,o)=>{var g,m,v,y,b,w,C,x,S,k,R,E;let P,M,{itemWidth:D,itemHeight:T}=(g=i,m=t,v=n,y=e,b=r,{itemWidth:(w=y,C=g,x=m,S=v,(P=w.text)&&"string"!=typeof P&&(P=P.reduce((e,t)=>e.length>t.length?e:t)),C+x.size/2+S.measureText(P).width),itemHeight:(k=b,R=y,E=m.lineHeight,M=k,"string"!=typeof R.text&&(M=r3(R,E)),M)});o>0&&h+T+2*s>u&&(d+=c+s,l.push({width:c,height:h}),p+=c+s,f++,c=h=0),a[o]={left:p,top:h,col:f,width:D,height:T},c=Math.max(c,D),h+=T+s}),d+=c,l.push({width:c,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:n}}=this,o=t2(n,this.left,this.width);if(this.isHorizontal()){let n=0,s=eK(i,this.left+r,this.right-this.lineWidths[n]);for(let a of t)n!==a.row&&(n=a.row,s=eK(i,this.left+r,this.right-this.lineWidths[n])),a.top+=this.top+e+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let n=0,s=eK(i,this.top+e+r,this.bottom-this.columnSizes[n].height);for(let a of t)a.col!==n&&(n=a.col,s=eK(i,this.top+e+r,this.bottom-this.columnSizes[n].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let e=this.ctx;td(e,this),this._draw(),tc(e)}}_draw(){let e,{options:t,columnSizes:i,lineWidths:r,ctx:n}=this,{align:o,labels:s}=t,a=tr.color,l=t2(t.rtl,this.left,this.width),u=tS(s.font),{padding:d}=s,c=u.size,h=c/2;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=u.string;let{boxWidth:p,boxHeight:f,itemHeight:g}=r2(s,c),m=function(e,t,i){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;n.save();let r=J(i.lineWidth,1);if(n.fillStyle=J(i.fillStyle,a),n.lineCap=J(i.lineCap,"butt"),n.lineDashOffset=J(i.lineDashOffset,0),n.lineJoin=J(i.lineJoin,"miter"),n.lineWidth=r,n.strokeStyle=J(i.strokeStyle,a),n.setLineDash(J(i.lineDash,[])),s.usePointStyle)tl(n,{radius:f*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:r},l.xPlus(e,p/2),t+h,s.pointStyleWidth&&p);else{let o=t+Math.max((c-f)/2,0),s=l.leftForLtr(e,p),a=tC(i.borderRadius);n.beginPath(),Object.values(a).some(e=>0!==e)?tg(n,{x:s,y:o,w:p,h:f,radius:a}):n.rect(s,o,p,f),n.fill(),0!==r&&n.stroke()}n.restore()},v=function(e,t,i){tf(n,i.text,e,t+g/2,u,{strikethrough:i.hidden,textAlign:l.textAlign(i.textAlign)})},y=this.isHorizontal(),b=this._computeTitleHeight();e=y?{x:eK(o,this.left+d,this.right-r[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:eK(o,this.top+b+d,this.bottom-i[0].height),line:0},t5(this.ctx,t.textDirection);let w=g+d;this.legendItems.forEach((a,c)=>{var f,g;n.strokeStyle=a.fontColor,n.fillStyle=a.fontColor;let C=n.measureText(a.text).width,x=l.textAlign(a.textAlign||(a.textAlign=s.textAlign)),S=p+h+C,k=e.x,R=e.y;if(l.setWidth(this.width),y?c>0&&k+S+d>this.right&&(R=e.y+=w,e.line++,k=e.x=eK(o,this.left+d,this.right-r[e.line])):c>0&&R+w>this.bottom&&(k=e.x=k+i[e.line].width+d,e.line++,R=e.y=eK(o,this.top+b+d,this.bottom-i[e.line].height)),m(l.x(k),R,a),f=k+p+h,g=y?k+S:this.right,k=x===(t.rtl?"left":"right")?g:"center"===x?(f+g)/2:f,v(l.x(k),R,a),y)e.x+=S+d;else if("string"!=typeof a.text){let t=u.lineHeight;e.y+=r3(a,t)+d}else e.y+=w}),t3(this.ctx,t.textDirection)}drawTitle(){let e,t=this.options,i=t.title,r=tS(i.font),n=tx(i.padding);if(!i.display)return;let o=t2(t.rtl,this.left,this.width),s=this.ctx,a=i.position,l=r.size/2,u=n.top+l,d=this.left,c=this.width;if(this.isHorizontal())c=Math.max(...this.lineWidths),e=this.top+u,d=eK(t.align,d,this.right-c);else{let i=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);e=u+eK(t.align,this.top,this.bottom-i-t.labels.padding-this._computeTitleHeight())}let h=eK(a,d,d+c);s.textAlign=o.textAlign(eq(a)),s.textBaseline="middle",s.strokeStyle=i.color,s.fillStyle=i.color,s.font=r.string,tf(s,i.text,h,e,r)}_computeTitleHeight(){let e=this.options.title,t=tS(e.font),i=tx(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,n;if(eB(e,this.left,this.right)&&eB(t,this.top,this.bottom)){for(i=0,n=this.legendHitBoxes;i<n.length;++i)if(eB(e,(r=n[i]).left,r.left+r.width)&&eB(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){var t,i;let r=this.options;if(t=e.type,i=r,("mousemove"!==t&&"mouseout"!==t||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==t&&"mouseup"!==t))return;let n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){let t=this._hoveredItem,i=null!==t&&null!==n&&t.datasetIndex===n.datasetIndex&&t.index===n.index;t&&!i&&et(r.onLeave,[e,t,this],this),this._hoveredItem=n,n&&!i&&et(r.onHover,[e,n,this],this)}else n&&et(r.onClick,[e,n,this],this)}}function r3(e,t){return t*(e.text?e.text.length:0)}var r4={id:"legend",_element:r5,start(e,t,i){let r=e.legend=new r5({ctx:e.ctx,options:i,chart:e});iX.configure(e,r,i),iX.addBox(e,r)},stop(e){iX.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let r=e.legend;iX.configure(e,r,i),r.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let r=t.datasetIndex,n=i.chart;n.isDatasetVisible(r)?(n.hide(r),t.hidden=!0):(n.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:n,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{let l=e.controller.getStyle(i?0:void 0),u=tx(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class r8 extends rr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=Q(i.text)?i.text.length:1;this._padding=tx(i.padding);let n=r*tS(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){let e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){let t,i,r,{top:n,left:o,bottom:s,right:a,options:l}=this,u=l.align,d=0;return this.isHorizontal()?(i=eK(u,o,a),r=n+e,t=a-o):("left"===l.position?(i=o+e,r=eK(u,s,n),d=-.5*em):(i=a-e,r=eK(u,n,s),d=.5*em),t=s-n),{titleX:i,titleY:r,maxWidth:t,rotation:d}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=tS(t.font),r=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);tf(e,t.text,0,0,i,{color:t.color,maxWidth:s,rotation:a,textAlign:eq(t.align),textBaseline:"middle",translation:[n,o]})}}var r6={id:"title",_element:r8,start(e,t,i){let r;r=new r8({ctx:e.ctx,options:i,chart:e}),iX.configure(e,r,i),iX.addBox(e,r),e.titleBlock=r},stop(e){let t=e.titleBlock;iX.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let r=e.titleBlock;iX.configure(e,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;let r7={average(e){let t,i;if(!e.length)return!1;let r=new Set,n=0,o=0;for(t=0,i=e.length;t<i;++t){let i=e[t].element;if(i&&i.hasValue()){let e=i.tooltipPosition();r.add(e.x),n+=e.y,++o}}return 0!==o&&0!==r.size&&{x:[...r].reduce((e,t)=>e+t)/r.size,y:n/o}},nearest(e,t){let i,r,n;if(!e.length)return!1;let o=t.x,s=t.y,a=1/0;for(i=0,r=e.length;i<r;++i){let r=e[i].element;if(r&&r.hasValue()){let e=eA(t,r.getCenterPoint());e<a&&(a=e,n=r)}}if(n){let e=n.tooltipPosition();o=e.x,s=e.y}return{x:o,y:s}}};function r9(e,t){return t&&(Q(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ne(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function nt(e,t){let i=e.chart.ctx,{body:r,footer:n,title:o}=e,{boxWidth:s,boxHeight:a}=t,l=tS(t.bodyFont),u=tS(t.titleFont),d=tS(t.footerFont),c=o.length,h=n.length,p=r.length,f=tx(t.padding),g=f.height,m=0,v=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);v+=e.beforeBody.length+e.afterBody.length,c&&(g+=c*u.lineHeight+(c-1)*t.titleSpacing+t.titleMarginBottom),v&&(g+=p*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing),h&&(g+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0,b=function(e){m=Math.max(m,i.measureText(e).width+y)};return i.save(),i.font=u.string,ei(e.title,b),i.font=l.string,ei(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?s+2+t.boxPadding:0,ei(r,e=>{ei(e.before,b),ei(e.lines,b),ei(e.after,b)}),y=0,i.font=d.string,ei(e.footer,b),i.restore(),{width:m+=f.width,height:g}}function ni(e,t,i){let r=i.yAlign||t.yAlign||function(e,t){let{y:i,height:r}=t;return i<r/2?"top":i>e.height-r/2?"bottom":"center"}(e,i);return{xAlign:i.xAlign||t.xAlign||function(e,t,i,r){let{x:n,width:o}=i,{width:s,chartArea:{left:a,right:l}}=e,u="center";return"center"===r?u=n<=(a+l)/2?"left":"right":n<=o/2?u="left":n>=s-o/2&&(u="right"),function(e,t,i,r){let{x:n,width:o}=r,s=i.caretSize+i.caretPadding;if("left"===e&&n+o+s>t.width||"right"===e&&n-o-s<0)return!0}(u,e,t,i)&&(u="center"),u}(e,t,i,r),yAlign:r}}function nr(e,t,i,r){let{caretSize:n,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:l}=i,u=n+o,{topLeft:d,topRight:c,bottomLeft:h,bottomRight:p}=tC(s),f=function(e,t){let{x:i,width:r}=e;return"right"===t?i-=r:"center"===t&&(i-=r/2),i}(t,a),g=function(e,t,i){let{y:r,height:n}=e;return"top"===t?r+=i:"bottom"===t?r-=n+i:r-=n/2,r}(t,l,u);return"center"===l?"left"===a?f+=u:"right"===a&&(f-=u):"left"===a?f-=Math.max(d,h)+n:"right"===a&&(f+=Math.max(c,p)+n),{x:eN(f,0,r.width-t.width),y:eN(g,0,r.height-t.height)}}function nn(e,t,i){let r=tx(i.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function no(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}let ns={beforeTitle:$,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return i[t.dataIndex]}return""},afterTitle:$,beforeBody:$,beforeLabel:$,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return K(i)||(t+=i),t},labelColor(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:$,afterBody:$,beforeFooter:$,footer:$,afterFooter:$};function na(e,t,i,r){let n=e[t].call(i,r);return void 0===n?ns[t].call(i,r):n}class nl extends rr{static positioners=r7;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,n=new il(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){var e;return this.$context||(this.$context=(e=this.chart.getContext(),tR(e,{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(e,t){let{callbacks:i}=t,r=na(i,"beforeTitle",this,e),n=na(i,"title",this,e),o=na(i,"afterTitle",this,e),s=[];return s=r9(s,ne(r)),s=r9(s,ne(n)),s=r9(s,ne(o))}getBeforeBody(e,t){return r9([],ne(na(t.callbacks,"beforeBody",this,e)))}getBody(e,t){let{callbacks:i}=t,r=[];return ei(e,e=>{let t={before:[],lines:[],after:[]},n=no(i,e);r9(t.before,ne(na(n,"beforeLabel",this,e))),r9(t.lines,na(n,"label",this,e)),r9(t.after,ne(na(n,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return r9([],ne(na(t.callbacks,"afterBody",this,e)))}getFooter(e,t){let{callbacks:i}=t,r=na(i,"beforeFooter",this,e),n=na(i,"footer",this,e),o=na(i,"afterFooter",this,e),s=[];return s=r9(s,ne(r)),s=r9(s,ne(n)),s=r9(s,ne(o))}_createItems(e){let t,i,r=this._active,n=this.chart.data,o=[],s=[],a=[],l=[];for(t=0,i=r.length;t<i;++t)l.push(function(e,t){let{element:i,datasetIndex:r,index:n}=t,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(n);return{chart:e,label:s,parsed:o.getParsed(n),raw:e.data.datasets[r].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:r,element:i}}(this.chart,r[t]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),ei(l,t=>{let i=no(e.callbacks,t);o.push(na(i,"labelColor",this,t)),s.push(na(i,"labelPointStyle",this,t)),a.push(na(i,"labelTextColor",this,t))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){let i,r=this.options.setContext(this.getContext()),n=this._active,o=[];if(n.length){let e=r7[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);let t=this._size=nt(this,r),s=Object.assign({},e,t),a=ni(this.chart,r,s),l=nr(r,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){let n=this.getCaretPosition(e,i,r);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,i){let r,n,o,s,a,l,{xAlign:u,yAlign:d}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:p,topRight:f,bottomLeft:g,bottomRight:m}=tC(h),{x:v,y:y}=e,{width:b,height:w}=t;return"center"===d?(a=y+w/2,"left"===u?(n=(r=v)-c,s=a+c,l=a-c):(n=(r=v+b)+c,s=a-c,l=a+c),o=r):(n="left"===u?v+Math.max(p,g)+c:"right"===u?v+b-Math.max(f,m)-c:this.caretX,"top"===d?(a=(s=y)-c,r=n-c,o=n+c):(a=(s=y+w)+c,r=n+c,o=n-c),l=s),{x1:r,x2:n,x3:o,y1:s,y2:a,y3:l}}drawTitle(e,t,i){let r,n,o,s=this.title,a=s.length;if(a){let l=t2(i.rtl,this.x,this.width);for(o=0,e.x=nn(this,i.titleAlign,i),t.textAlign=l.textAlign(i.titleAlign),t.textBaseline="middle",r=tS(i.titleFont),n=i.titleSpacing,t.fillStyle=i.titleColor,t.font=r.string;o<a;++o)t.fillText(s[o],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n,o+1===a&&(e.y+=i.titleMarginBottom-n)}}_drawColorBox(e,t,i,r,n){let o=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=n,u=tS(n.bodyFont),d=nn(this,"left",n),c=r.x(d),h=a<u.lineHeight?(u.lineHeight-a)/2:0,p=t.y+h;if(n.usePointStyle){let t={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},i=r.leftForLtr(c,l)+l/2,u=p+a/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,ta(e,t,i,u),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ta(e,t,i,u)}else{e.lineWidth=X(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;let t=r.leftForLtr(c,l),i=r.leftForLtr(r.xPlus(c,1),l-2),s=tC(o.borderRadius);Object.values(s).some(e=>0!==e)?(e.beginPath(),e.fillStyle=n.multiKeyBackground,tg(e,{x:t,y:p,w:l,h:a,radius:s}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),tg(e,{x:i,y:p+1,w:l-2,h:a-2,radius:s}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(t,p,l,a),e.strokeRect(t,p,l,a),e.fillStyle=o.backgroundColor,e.fillRect(i,p+1,l-2,a-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){let r,n,o,s,a,l,{body:u}=this,{bodySpacing:d,bodyAlign:c,displayColors:h,boxHeight:p,boxWidth:f,boxPadding:g}=i,m=tS(i.bodyFont),v=m.lineHeight,y=0,b=t2(i.rtl,this.x,this.width),w=function(i){t.fillText(i,b.x(e.x+y),e.y+v/2),e.y+=v+d},C=b.textAlign(c);for(t.textAlign=c,t.textBaseline="middle",t.font=m.string,e.x=nn(this,C,i),t.fillStyle=i.bodyColor,ei(this.beforeBody,w),y=h&&"right"!==C?"center"===c?f/2+g:f+2+g:0,o=0,a=u.length;o<a;++o){for(r=u[o],t.fillStyle=this.labelTextColors[o],ei(r.before,w),n=r.lines,h&&n.length&&(this._drawColorBox(t,e,o,b,i),v=Math.max(m.lineHeight,p)),s=0,l=n.length;s<l;++s)w(n[s]),v=m.lineHeight;ei(r.after,w)}y=0,v=m.lineHeight,ei(this.afterBody,w),e.y-=d}drawFooter(e,t,i){let r,n,o=this.footer,s=o.length;if(s){let a=t2(i.rtl,this.x,this.width);for(e.x=nn(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=a.textAlign(i.footerAlign),t.textBaseline="middle",r=tS(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,n=0;n<s;++n)t.fillText(o[n],a.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){let{xAlign:n,yAlign:o}=this,{x:s,y:a}=e,{width:l,height:u}=i,{topLeft:d,topRight:c,bottomLeft:h,bottomRight:p}=tC(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+d,a),"top"===o&&this.drawCaret(e,t,i,r),t.lineTo(s+l-c,a),t.quadraticCurveTo(s+l,a,s+l,a+c),"center"===o&&"right"===n&&this.drawCaret(e,t,i,r),t.lineTo(s+l,a+u-p),t.quadraticCurveTo(s+l,a+u,s+l-p,a+u),"bottom"===o&&this.drawCaret(e,t,i,r),t.lineTo(s+h,a+u),t.quadraticCurveTo(s,a+u,s,a+u-h),"center"===o&&"left"===n&&this.drawCaret(e,t,i,r),t.lineTo(s,a+d),t.quadraticCurveTo(s,a,s+d,a),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,i=this.$animations,r=i&&i.x,n=i&&i.y;if(r||n){let i=r7[e.position].call(this,this._active,this._eventPosition);if(!i)return;let o=this._size=nt(this,e),s=Object.assign({},i,this._size),a=ni(t,e,s),l=nr(e,s,a,t);(r._to!==l.x||n._to!==l.y)&&(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(t);let r={width:this.width,height:this.height},n={x:this.x,y:this.y};i=.001>Math.abs(i)?0:i;let o=tx(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=i,this.drawBackground(n,e,r,t),t5(e,t.textDirection),n.y+=o.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),t3(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let i=this._active,r=e.map(({datasetIndex:e,index:t})=>{let i=this.chart.getDatasetMeta(e);if(!i)throw Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[t],index:t}}),n=!er(i,r),o=this._positionChanged(r,t);(n||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,n=this._active||[],o=this._getActiveElements(e,n,t,i),s=this._positionChanged(o,e),a=t||!er(o,n)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,i,r){let n=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));let o=this.chart.getElementsAtEventForMode(e,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(e,t){let{caretX:i,caretY:r,options:n}=this,o=r7[n.position].call(this,e,t);return!1!==o&&(i!==o.x||r!==o.y)}}var nu={id:"tooltip",_element:nl,positioners:r7,afterInit(e,t,i){i&&(e.tooltip=new nl({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ns},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function nd(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class nc extends rd{static id="category";static defaults={ticks:{callback:nd}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let e=this.getLabels();for(let{index:i,label:r}of t)e[i]===r&&e.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){let i,r;if(K(e))return null;let n=this.getLabels();return i=t=isFinite(t)&&n[t]===e?t:function(e,t,i,r){let n=e.indexOf(t);if(-1===n){var o;return o=i,"string"==typeof t?(o=e.push(t)-1,r.unshift({index:o,label:t})):isNaN(t)&&(o=null),o}return n!==e.lastIndexOf(t)?i:n}(n,e,J(t,e),this._addedLabels),r=n.length-1,null===i?null:eN(Math.round(i),0,r)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){let e=this.min,t=this.max,i=this.options.offset,r=[],n=this.getLabels();n=0===e&&t===n.length-1?n:n.slice(e,t+1),this._valueRange=Math.max(n.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return nd.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function nh(e,t,{horizontal:i,minRotation:r}){let n=eT(r),o=(i?Math.sin(n):Math.cos(n))||.001,s=.75*t*(""+e).length;return Math.min(t/o,s)}class np extends rd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return K(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:n}=this,o=e=>r=t?r:e,s=e=>n=i?n:e;if(e){let e=eR(r),t=eR(n);e<0&&t<0?s(0):e>0&&t>0&&o(0)}if(r===n){let t=0===n?1:Math.abs(.05*n);s(n+t),e||o(r-t)}this.min=r,this.max=n}getTickLimit(){let e,{maxTicksLimit:t,stepSize:i}=this.options.ticks;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3):(e=this.computeTickLimit(),t=t||11),t&&(e=Math.min(t,e)),e}computeTickLimit(){return 1/0}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit(),r=function(e,t){var i,r;let n,o,s,a,l,u=[],{bounds:d,step:c,min:h,max:p,precision:f,count:g,maxTicks:m,maxDigits:v,includeBounds:y}=e,b=c||1,w=m-1,{min:C,max:x}=t,S=!K(h),k=!K(p),R=!K(g),E=(x-C)/(v+1),P=eP((x-C)/w/b)*b;if(P<1e-14&&!S&&!k)return[{value:C},{value:x}];(a=Math.ceil(x/P)-Math.floor(C/P))>w&&(P=eP(a*P/w/b)*b),K(f)||(P=Math.ceil(P*(n=Math.pow(10,f)))/n),"ticks"===d?(o=Math.floor(C/P)*P,s=Math.ceil(x/P)*P):(o=C,s=x),S&&k&&c&&(i=(p-h)/c,r=P/1e3,(l=Math.round(i))-r<=i&&l+r>=i)?(a=Math.round(Math.min((p-h)/P,m)),P=(p-h)/a,o=h,s=p):R?(o=S?h:o,P=((s=k?p:s)-o)/(a=g-1)):a=eE(a=(s-o)/P,Math.round(a),P/1e3)?Math.round(a):Math.ceil(a);let M=Math.max(eO(P),eO(o));o=Math.round(o*(n=Math.pow(10,K(f)?M:f)))/n,s=Math.round(s*n)/n;let D=0;for(S&&(y&&o!==h?(u.push({value:h}),o<h&&D++,eE(Math.round((o+D*P)*n)/n,h,nh(h,E,e))&&D++):o<h&&D++);D<a;++D){let e=Math.round((o+D*P)*n)/n;if(k&&e>p)break;u.push({value:e})}return k&&y&&s!==p?u.length&&eE(u[u.length-1].value,p,nh(p,E,e))?u[u.length-1].value=p:u.push({value:p}):k&&s!==p||u.push({value:s}),u}({maxTicks:i=Math.max(2,i),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&eD(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return e6(e,this.chart.options.locale,this.options.ticks.format)}}class nf extends np{static id="linear";static defaults={ticks:{callback:e7.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Y(e)?e:0,this.max=Y(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=eT(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001;return Math.ceil(t/Math.min(40,this._resolveTickFontOptions(0).lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}let ng=e=>Math.floor(ek(e)),nm=(e,t)=>Math.pow(10,ng(e)+t);function nv(e){return 1==e/Math.pow(10,ng(e))}function ny(e,t,i){let r=Math.pow(10,i),n=Math.floor(e/r);return Math.ceil(t/r)-n}class nb extends rd{static id="logarithmic";static defaults={ticks:{callback:e7.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=np.prototype.parse.apply(this,[e,t]);if(0===i){this._zero=!0;return}return Y(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Y(e)?Math.max(0,e):null,this.max=Y(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Y(this._userMin)&&(this.min=e===nm(this.min,0)?nm(this.min,-1):nm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,n=t=>i=e?i:t,o=e=>r=t?r:e;i===r&&(i<=0?(n(1),o(10)):(n(nm(i,-1)),o(nm(r,1)))),i<=0&&n(nm(r,-1)),r<=0&&o(nm(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t=function(e,{min:t,max:i}){t=Z(e.min,t);let r=[],n=ng(t),o=function(e,t){let i=ng(t-e);for(;ny(e,t,i)>10;)i++;for(;10>ny(e,t,i);)i--;return Math.min(i,ng(e))}(t,i),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=n>o?Math.pow(10,n):0,u=Math.round((t-l)*s)/s,d=Math.floor((t-l)/a/10)*a*10,c=Math.floor((u-d)/Math.pow(10,o)),h=Z(e.min,Math.round((l+d+c*Math.pow(10,o))*s)/s);for(;h<i;)r.push({value:h,major:nv(h),significand:c}),c>=10?c=c<15?15:20:c++,c>=20&&(c=2,s=++o>=0?1:s),h=Math.round((l+d+c*Math.pow(10,o))*s)/s;let p=Z(e.max,h);return r.push({value:p,major:nv(p),significand:c}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&eD(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":e6(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=ek(e),this._valueRange=ek(this.max)-ek(e)}getPixelForValue(e){return((void 0===e||0===e)&&(e=this.min),null===e||isNaN(e))?NaN:this.getPixelForDecimal(e===this.min?0:(ek(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function nw(e){let t=e.ticks;if(t.display&&e.display){let e=tx(t.backdropPadding);return J(t.font&&t.font.size,tr.font.size)+e.height}return 0}function nC(e,t,i,r,n){return e===r||e===n?{start:t-i/2,end:t+i/2}:e<r||e>n?{start:t-i,end:t}:{start:t,end:t+i}}function nx(e,t,i,r){let{ctx:n}=e;if(i)n.arc(e.xCenter,e.yCenter,t,0,ev);else{let i=e.getPointPosition(0,t);n.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=e.getPointPosition(o,t),n.lineTo(i.x,i.y)}}class nS extends np{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:e7.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=tx(nw(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Y(e)&&!isNaN(e)?e:0,this.max=Y(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/nw(this.options))}generateTickLabels(e){np.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{let i=et(this.options.pointLabels.callback,[e,t],this);return i||0===i?i:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){let e=this.options;e.display&&e.pointLabels.display?function(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),r=[],n=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?em/o:0;for(let d=0;d<o;d++){var l,u;let o=s.setContext(e.getPointLabelContext(d));n[d]=o.padding;let c=e.getPointPosition(d,e.drawingArea+n[d],a),h=tS(o.font),p=(l=e.ctx,u=Q(u=e._pointLabels[d])?u:[u],{w:function(e,t,i,r){let n,o,s,a,l,u=(r=r||{}).data=r.data||{},d=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(u=r.data={},d=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let c=0,h=i.length;for(n=0;n<h;n++)if(null==(a=i[n])||Q(a)){if(Q(a))for(o=0,s=a.length;o<s;o++)null==(l=a[o])||Q(l)||(c=tn(e,u,d,c,l))}else c=tn(e,u,d,c,a);e.restore();let p=d.length/2;if(p>i.length){for(n=0;n<p;n++)delete u[d[n]];d.splice(0,p)}return c}(l,h.string,u),h:u.length*h.lineHeight});r[d]=p;let f=eI(e.getIndexAngle(d)+a),g=Math.round(180/em*f);!function(e,t,i,r,n){let o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i)),a=0,l=0;r.start<t.l?(a=(t.l-r.start)/o,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/o,e.r=Math.max(e.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/s,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}(i,t,f,nC(g,c.x,p.w,0,180),nC(g,c.y,p.h,90,270))}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=function(e,t,i){let r,n=[],o=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:l}=s.pointLabels,u={extra:nw(s)/2,additionalAngle:a?em/o:0};for(let s=0;s<o;s++){u.padding=i[s],u.size=t[s];let o=function(e,t,i){var r,n,o,s,a,l,u;let d=e.drawingArea,{extra:c,additionalAngle:h,padding:p,size:f}=i,g=e.getPointPosition(t,d+c+p,h),m=Math.round(180/em*eI(g.angle+eC)),v=(r=g.y,n=f.h,90===(o=m)||270===o?r-=n/2:(o>270||o<90)&&(r-=n),r),y=0===(s=m)||180===s?"center":s<180?"left":"right",b=(a=g.x,l=f.w,"right"===(u=y)?a-=l:"center"===u&&(a-=l/2),a);return{visible:!0,x:g.x,y:v,textAlign:y,left:b,top:v,right:b+f.w,bottom:v+f.h}}(e,s,u);n.push(o),"auto"===l&&(o.visible=function(e,t){if(!t)return!0;let{left:i,top:r,right:n,bottom:o}=e;return!(tu({x:i,y:r},t)||tu({x:i,y:o},t)||tu({x:n,y:r},t)||tu({x:n,y:o},t))}(o,r),o.visible&&(r=o))}return n}(e,r,n)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){return eI(e*(ev/(this._pointLabels.length||1))+eT(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(K(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(K(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){var i;let r=t[e];return i=this.getContext(),tR(i,{label:r,index:e,type:"pointLabel"})}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-eC+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:n}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:n}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),nx(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e,t,i,r=this.ctx,n=this.options,{angleLines:o,grid:s,border:a}=n,l=this._pointLabels.length;if(n.pointLabels.display&&function(e,t){let{ctx:i,options:{pointLabels:r}}=e;for(let n=t-1;n>=0;n--){let t=e._pointLabelItems[n];if(!t.visible)continue;let o=r.setContext(e.getPointLabelContext(n));!function(e,t,i){let{left:r,top:n,right:o,bottom:s}=i,{backdropColor:a}=t;if(!K(a)){let i=tC(t.borderRadius),l=tx(t.backdropPadding);e.fillStyle=a;let u=r-l.left,d=n-l.top,c=o-r+l.width,h=s-n+l.height;Object.values(i).some(e=>0!==e)?(e.beginPath(),tg(e,{x:u,y:d,w:c,h:h,radius:i}),e.fill()):e.fillRect(u,d,c,h)}}(i,o,t);let s=tS(o.font),{x:a,y:l,textAlign:u}=t;tf(i,e._pointLabels[n],a,l+s.lineHeight/2,s,{color:o.color,textAlign:u,textBaseline:"middle"})}}(this,l),s.display&&this.ticks.forEach((e,i)=>{if(0!==i||0===i&&this.min<0){t=this.getDistanceFromCenterForValue(e.value);let r=this.getContext(i),n=s.setContext(r),o=a.setContext(r);!function(e,t,i,r,n){let o=e.ctx,s=t.circular,{color:a,lineWidth:l}=t;(s||r)&&a&&l&&!(i<0)&&(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(n.dash||[]),o.lineDashOffset=n.dashOffset,o.beginPath(),nx(e,i,s,r),o.closePath(),o.stroke(),o.restore())}(this,n,t,l,o)}}),o.display){for(r.save(),e=l-1;e>=0;e--){let s=o.setContext(this.getPointLabelContext(e)),{color:a,lineWidth:l}=s;l&&a&&(r.lineWidth=l,r.strokeStyle=a,r.setLineDash(s.borderDash),r.lineDashOffset=s.borderDashOffset,t=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),i=this.getPointPosition(e,t),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(i.x,i.y),r.stroke())}r.restore()}}drawBorder(){}drawLabels(){let e,t,i=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;let o=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(o),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((o,s)=>{if(0===s&&this.min>=0&&!r.reverse)return;let a=n.setContext(this.getContext(s)),l=tS(a.font);if(e=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){i.font=l.string,t=i.measureText(o.label).width,i.fillStyle=a.backdropColor;let r=tx(a.backdropPadding);i.fillRect(-t/2-r.left,-e-l.size/2-r.top,t+r.width,l.size+r.height)}tf(i,o.label,0,-e,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),i.restore()}drawTitle(){}}let nk={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nR=Object.keys(nk);function nE(e,t){return e-t}function nP(e,t){if(K(t))return null;let i=e._adapter,{parser:r,round:n,isoWeekday:o}=e._parseOpts,s=t;return("function"==typeof r&&(s=r(s)),Y(s)||(s="string"==typeof r?i.parse(s,r):i.parse(s)),null===s)?null:(n&&(s="week"===n&&(eM(o)||!0===o)?i.startOf(s,"isoWeek",o):i.startOf(s,n)),+s)}function nM(e,t,i,r){let n=nR.length;for(let o=nR.indexOf(e);o<n-1;++o){let e=nk[nR[o]],n=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((i-t)/(n*e.size))<=r)return nR[o]}return nR[n-1]}function nD(e,t,i){if(i){if(i.length){let{lo:r,hi:n}=eV(i,t);e[i[r]>=t?i[r]:i[n]]=!0}}else e[t]=!0}function nT(e,t,i){let r,n,o=[],s={},a=t.length;for(r=0;r<a;++r)s[n=t[r]]=r,o.push({value:n,major:!1});return 0!==a&&i?function(e,t,i,r){let n,o,s=e._adapter,a=+s.startOf(t[0].value,r),l=t[t.length-1].value;for(n=a;n<=l;n=+s.add(n,1,r))(o=i[n])>=0&&(t[o].major=!0);return t}(e,o,s,i):o}class nO extends rd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let i=e.time||(e.time={}),r=this._adapter=new iI(e.adapters.date);r.init(t),el(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:nP(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,i=e.time.unit||"day",{min:r,max:n,minDefined:o,maxDefined:s}=this.getUserBounds();function a(e){o||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(n=Math.max(n,e.max))}o&&s||(a(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&a(this.getMinMax(!1))),r=Y(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),n=Y(n)&&!isNaN(n)?n:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,n-1),this.max=Math.max(r+1,n)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=1/0,i=-1/0;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){let e=this.options,t=e.time,i=e.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let n=this.min,o=function(e,t,i){let r=0,n=e.length;for(;r<n&&e[r]<t;)r++;for(;n>r&&e[n-1]>i;)n--;return r>0||n<e.length?e.slice(r,n):e}(r,n,this.max);return this._unit=t.unit||(i.autoSkip?nM(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(e,t,i,r,n){for(let o=nR.length-1;o>=nR.indexOf(i);o--){let i=nR[o];if(nk[i].common&&e._adapter.diff(n,r,i)>=t-1)return i}return nR[i?nR.indexOf(i):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(e){for(let t=nR.indexOf(e)+1,i=nR.length;t<i;++t)if(nk[nR[t]].common)return nR[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&o.reverse(),nT(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t,i,r=0,n=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,i=this.getDecimalForValue(e[e.length-1]),n=1===e.length?i:(i-this.getDecimalForValue(e[e.length-2]))/2);let o=e.length<3?.5:.25;r=eN(r,0,o),n=eN(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){let e,t,i=this._adapter,r=this.min,n=this.max,o=this.options,s=o.time,a=s.unit||nM(s.minUnit,r,n,this._getLabelCapacity(r)),l=J(o.ticks.stepSize,1),u="week"===a&&s.isoWeekday,d=eM(u)||!0===u,c={},h=r;if(d&&(h=+i.startOf(h,"isoWeek",u)),h=+i.startOf(h,d?"day":a),i.diff(n,r,a)>1e5*l)throw Error(r+" and "+n+" are too far apart with stepSize of "+l+" "+a);let p="data"===o.ticks.source&&this.getDataTimestamps();for(e=h,t=0;e<n;e=+i.add(e,l,a),t++)nD(c,e,p);return(e===n||"ticks"===o.bounds||1===t)&&nD(c,e,p),Object.keys(c).sort(nE).map(e=>+e)}getLabelForValue(e){let t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){let i=this.options.time.displayFormats,r=this._unit,n=t||i[r];return this._adapter.format(e,n)}_tickFormatFunction(e,t,i,r){let n=this.options,o=n.ticks.callback;if(o)return et(o,[e,t,i],this);let s=n.time.displayFormats,a=this._unit,l=this._majorUnit,u=a&&s[a],d=l&&s[l],c=i[t],h=l&&d&&c&&c.major;return this._adapter.format(e,r||(h?d:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,i=this.ctx.measureText(e).width,r=eT(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:i*n+s*o,h:i*o+s*n}}_getLabelCapacity(e){let t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,n=this._tickFormatFunction(e,0,nT(this,[e],this._majorUnit),r),o=this._getLabelSize(n),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,i=this._cache.data||[];if(i.length)return i;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)i=i.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let e,t,i=this._cache.labels||[];if(i.length)return i;let r=this.getLabels();for(e=0,t=r.length;e<t;++e)i.push(nP(this,r[e]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(e){return eW(e.sort(nE))}}function n_(e,t,i){let r,n,o,s,a=0,l=e.length-1;i?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=eH(e,"pos",t)),{pos:r,time:o}=e[a],{pos:n,time:s}=e[l]):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=eH(e,"time",t)),{time:r,pos:o}=e[a],{time:n,pos:s}=e[l]);let u=n-r;return u?o+(s-o)*(t-r)/u:o}class nA extends nO{static id="timeseries";static defaults=nO.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=n_(t,this.min),this._tableRange=n_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let t,i,r,{min:n,max:o}=this,s=[],a=[];for(t=0,i=e.length;t<i;++t)(r=e[t])>=n&&r<=o&&s.push(r);if(s.length<2)return[{time:n,pos:0},{time:o,pos:1}];for(t=0,i=s.length;t<i;++t)Math.round((s[t+1]+s[t-1])/2)!==(r=s[t])&&a.push({time:r,pos:t/(i-1)});return a}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return i.includes(e)&&i.length||i.splice(0,0,e),i.includes(t)&&1!==i.length||i.push(t),i.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=t.length&&i.length?this.normalize(t.concat(i)):t.length?t:i,e=this._cache.all=e}getDecimalForValue(e){return(n_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return n_(this._table,i*this._tableRange+this._minPos,!0)}}e.s(["BarController",()=>iE,"BarElement",()=>rJ,"BubbleController",()=>iP,"CategoryScale",()=>nc,"Chart",()=>rI,"DoughnutController",()=>iM,"Legend",()=>r4,"LineController",()=>iD,"LinearScale",()=>nf,"PieController",()=>iO,"PolarAreaController",()=>iT,"RadarController",()=>i_,"ScatterController",()=>iA,"TimeSeriesScale",()=>nA,"Title",()=>r6,"Tooltip",()=>nu],573478);let nF="label";function nI(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function nL(e,t,i=nF){let r=[];e.datasets=t.map(t=>{let n=e.datasets.find(e=>e[i]===t[i]);return!n||!t.data||r.includes(n)?{...t}:(r.push(n),Object.assign(n,t),n)})}let nN=(0,u.forwardRef)(function(e,t){let{height:i=150,width:n=300,redraw:o=!1,datasetIdKey:s,type:a,data:l,options:d,plugins:c=[],fallbackContent:h,updateMode:p,...f}=e,g=(0,u.useRef)(null),m=(0,u.useRef)(null),v=()=>{g.current&&(m.current=new rI(g.current,{type:a,data:function(e,t=nF){let i={labels:[],datasets:[]};return i.labels=e.labels,nL(i,e.datasets,t),i}(l,s),options:d&&{...d},plugins:c}),nI(t,m.current))},y=()=>{nI(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,u.useEffect)(()=>{var e;let t;!o&&m.current&&d&&(e=m.current,(t=e.options)&&d&&Object.assign(t,d))},[o,d]),(0,u.useEffect)(()=>{!o&&m.current&&(m.current.config.data.labels=l.labels)},[o,l.labels]),(0,u.useEffect)(()=>{!o&&m.current&&l.datasets&&nL(m.current.config.data,l.datasets,s)},[o,l.datasets]),(0,u.useEffect)(()=>{m.current&&(o?(y(),setTimeout(v)):m.current.update(p))},[o,d,l.labels,l.datasets,p]),(0,u.useEffect)(()=>{m.current&&(y(),setTimeout(v))},[a]),(0,u.useEffect)(()=>(v(),()=>y()),[]),(0,r.jsx)("canvas",{ref:g,role:"img",height:i,width:n,...f,children:h})}),nB=(rI.register(iE),(0,u.forwardRef)((e,t)=>(0,r.jsx)(nN,{...e,ref:t,type:"bar"})));e.s(["Bar",()=>nB,"Chart",()=>nN],520584)},742760,(e,t,i)=>{var r,n="__lodash_hash_undefined__",o="[object Arguments]",s="[object Boolean]",a="[object Date]",l="[object Function]",u="[object GeneratorFunction]",d="[object Map]",c="[object Number]",h="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",k="[object Int16Array]",R="[object Int32Array]",E="[object Uint8Array]",P="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",T=/\w*$/,O=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,A={};A[o]=A["[object Array]"]=A[b]=A[w]=A[s]=A[a]=A[C]=A[x]=A[S]=A[k]=A[R]=A[d]=A[c]=A[h]=A[f]=A[g]=A[m]=A[v]=A[E]=A[P]=A[M]=A[D]=!0,A["[object Error]"]=A[l]=A[y]=!1;var F=e.g&&e.g.Object===Object&&e.g,I="object"==typeof self&&self&&self.Object===Object&&self,L=F||I||Function("return this")(),N=i&&!i.nodeType&&i,B=N&&t&&!t.nodeType&&t,V=B&&B.exports===N;function H(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function j(e,t,i,r){var n=-1,o=e?e.length:0;for(r&&o&&(i=e[++n]);++n<o;)i=t(i,e[n],n,e);return i}function G(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function U(e,t){return function(i){return e(t(i))}}function $(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var q=Array.prototype,K=Function.prototype,Q=Object.prototype,X=L["__core-js_shared__"],Y=(r=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Z=K.toString,J=Q.hasOwnProperty,ee=Q.toString,et=RegExp("^"+Z.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ei=V?L.Buffer:void 0,er=L.Symbol,en=L.Uint8Array,eo=U(Object.getPrototypeOf,Object),es=Object.create,ea=Q.propertyIsEnumerable,el=q.splice,eu=Object.getOwnPropertySymbols,ed=ei?ei.isBuffer:void 0,ec=U(Object.keys,Object),eh=eF(L,"DataView"),ep=eF(L,"Map"),ef=eF(L,"Promise"),eg=eF(L,"Set"),em=eF(L,"WeakMap"),ev=eF(Object,"create"),ey=eB(eh),eb=eB(ep),ew=eB(ef),eC=eB(eg),ex=eB(em),eS=er?er.prototype:void 0,ek=eS?eS.valueOf:void 0;function eR(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function eE(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function eP(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function eM(e){this.__data__=new eE(e)}function eD(e,t,i){var r=e[t];J.call(e,t)&&eV(r,i)&&(void 0!==i||t in e)||(e[t]=i)}function eT(e,t){for(var i=e.length;i--;)if(eV(e[i][0],t))return i;return -1}function eO(e){var t=new e.constructor(e.byteLength);return new en(t).set(new en(e)),t}function e_(e,t,i,r){i||(i={});for(var n=-1,o=t.length;++n<o;){var s=t[n],a=r?r(i[s],e[s],s,i,e):void 0;eD(i,s,void 0===a?e[s]:a)}return i}function eA(e,t){var i,r,n=e.__data__;return("string"==(r=typeof(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function eF(e,t){var i,r=null==e?void 0:e[t];return!(!eW(r)||(i=r,Y&&Y in i))&&(eG(r)||G(r)?et:O).test(eB(r))?r:void 0}eR.prototype.clear=function(){this.__data__=ev?ev(null):{}},eR.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},eR.prototype.get=function(e){var t=this.__data__;if(ev){var i=t[e];return i===n?void 0:i}return J.call(t,e)?t[e]:void 0},eR.prototype.has=function(e){var t=this.__data__;return ev?void 0!==t[e]:J.call(t,e)},eR.prototype.set=function(e,t){return this.__data__[e]=ev&&void 0===t?n:t,this},eE.prototype.clear=function(){this.__data__=[]},eE.prototype.delete=function(e){var t=this.__data__,i=eT(t,e);return!(i<0)&&(i==t.length-1?t.pop():el.call(t,i,1),!0)},eE.prototype.get=function(e){var t=this.__data__,i=eT(t,e);return i<0?void 0:t[i][1]},eE.prototype.has=function(e){return eT(this.__data__,e)>-1},eE.prototype.set=function(e,t){var i=this.__data__,r=eT(i,e);return r<0?i.push([e,t]):i[r][1]=t,this},eP.prototype.clear=function(){this.__data__={hash:new eR,map:new(ep||eE),string:new eR}},eP.prototype.delete=function(e){return eA(this,e).delete(e)},eP.prototype.get=function(e){return eA(this,e).get(e)},eP.prototype.has=function(e){return eA(this,e).has(e)},eP.prototype.set=function(e,t){return eA(this,e).set(e,t),this},eM.prototype.clear=function(){this.__data__=new eE},eM.prototype.delete=function(e){return this.__data__.delete(e)},eM.prototype.get=function(e){return this.__data__.get(e)},eM.prototype.has=function(e){return this.__data__.has(e)},eM.prototype.set=function(e,t){var i=this.__data__;if(i instanceof eE){var r=i.__data__;if(!ep||r.length<199)return r.push([e,t]),this;i=this.__data__=new eP(r)}return i.set(e,t),this};var eI=eu?U(eu,Object):function(){return[]},eL=function(e){return ee.call(e)};function eN(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Q)}function eB(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eV(e,t){return e===t||e!=e&&t!=t}(eh&&eL(new eh(new ArrayBuffer(1)))!=w||ep&&eL(new ep)!=d||ef&&eL(ef.resolve())!=p||eg&&eL(new eg)!=g||em&&eL(new em)!=y)&&(eL=function(e){var t=ee.call(e),i=t==h?e.constructor:void 0,r=i?eB(i):void 0;if(r)switch(r){case ey:return w;case eb:return d;case ew:return p;case eC:return g;case ex:return y}return t});var eH=Array.isArray;function ez(e){var t;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&!eG(e)}var ej=ed||function(){return!1};function eG(e){var t=eW(e)?ee.call(e):"";return t==l||t==u}function eW(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function eU(e){return ez(e)?function(e,t){var i,r,n,s,a,l=eH(e)||(n=r=i=e)&&"object"==typeof n&&ez(r)&&J.call(i,"callee")&&(!ea.call(i,"callee")||ee.call(i)==o)?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],u=l.length,d=!!u;for(var c in e){J.call(e,c)&&!(d&&("length"==c||(s=c,(a=null==(a=u)?0x1fffffffffffff:a)&&("number"==typeof s||_.test(s))&&s>-1&&s%1==0&&s<a)))&&l.push(c)}return l}(e):function(e){if(!eN(e))return ec(e);var t=[];for(var i in Object(e))J.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)}t.exports=function(e){return function e(t,i,r,n,p,y,O){if(n&&(_=y?n(t,p,y,O):n(t)),void 0!==_)return _;if(!eW(t))return t;var _,F=eH(t);if(F){if(L=(I=t).length,N=I.constructor(L),L&&"string"==typeof I[0]&&J.call(I,"index")&&(N.index=I.index,N.input=I.input),_=N,!i){var I,L,N,B=t,V=_,U=-1,q=B.length;for(V||(V=Array(q));++U<q;)V[U]=B[U];return V}}else{var K,Q,X,Y,Z,ee=eL(t),et=ee==l||ee==u;if(ej(t)){var ei=t,er=i;if(er)return ei.slice();var en=new ei.constructor(ei.length);return ei.copy(en),en}if(ee==h||ee==o||et&&!y){if(G(t))return y?t:{};if(_="function"!=typeof(K=et?{}:t).constructor||eN(K)?{}:eW(Q=eo(K))?es(Q):{},!i){return X=t,Y=(Z=_)&&e_(t,eU(t),Z),e_(X,eI(X),Y)}}else{if(!A[ee])return y?t:{};_=function(e,t,i,r){var n,o,l,u=e.constructor;switch(t){case b:return eO(e);case s:case a:return new u(+e);case w:return n=r?eO(e.buffer):e.buffer,new e.constructor(n,e.byteOffset,e.byteLength);case C:case x:case S:case k:case R:case E:case P:case M:case D:return o=r?eO(e.buffer):e.buffer,new e.constructor(o,e.byteOffset,e.length);case d:return j(r?i(W(e),!0):W(e),H,new e.constructor);case c:case m:return new u(e);case f:return(l=new e.constructor(e.source,T.exec(e))).lastIndex=e.lastIndex,l;case g:return j(r?i($(e),!0):$(e),z,new e.constructor);case v:return ek?Object(ek.call(e)):{}}}(t,ee,e,i)}}O||(O=new eM);var ea=O.get(t);if(ea)return ea;if(O.set(t,_),!F)var el=r?function(e){var t;return t=eU(e),eH(e)?t:function(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}(t,eI(e))}(t):eU(t);return!function(e,t){for(var i=-1,r=e?e.length:0;++i<r&&!1!==t(e[i],i,e););}(el||t,function(o,s){el&&(o=t[s=o]),eD(_,s,e(o,i,r,n,s,t,O))}),_}(e,!0,!0)}},238153,492421,e=>{"use strict";var t;let i={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(e){return (t={})=>{let i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}let n={date:r({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:r({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:r({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},o={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function s(e){return(t,i)=>{let r;if("formatting"===(i?.context?String(i.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,n=i?.width?String(i.width):t;r=e.formattingValues[n]||e.formattingValues[t]}else{let t=e.defaultWidth,n=i?.width?String(i.width):e.defaultWidth;r=e.values[n]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}let a={ordinalNumber:(e,t)=>{let i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:s({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:s({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:s({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:s({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:s({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function l(e){return(t,i={})=>{let r,n=i.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(o);if(!s)return null;let a=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}(l,e=>e.test(a)):function(e,t){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}(l,e=>e.test(a));return r=e.valueCallback?e.valueCallback(u):u,{value:r=i.valueCallback?i.valueCallback(r):r,rest:t.slice(a.length)}}}let u={ordinalNumber:(t={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,i={})=>{let r=e.match(t.matchPattern);if(!r)return null;let n=r[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];return{value:s=i.valueCallback?i.valueCallback(s):s,rest:e.slice(n.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};e.s(["defaultLocale",0,{code:"en-US",formatDistance:(e,t,r)=>{let n,o=i[e];if(n="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"in "+n;else return n+" ago";return n},formatLong:n,formatRelative:(e,t,i,r)=>o[e],localize:a,match:u,options:{weekStartsOn:0,firstWeekContainsDate:1}}],238153);let d={};function c(){return d}e.s(["getDefaultOptions",()=>c],492421)},487122,511518,e=>{"use strict";let t=Symbol.for("constructDateFrom");function i(e,i){return"function"==typeof e?e(i):e&&"object"==typeof e&&t in e?e[t](i):e instanceof Date?new e.constructor(i):new Date(i)}e.s(["constructFromSymbol",0,t,"millisecondsInDay",0,864e5,"millisecondsInHour",0,36e5,"millisecondsInMinute",0,6e4,"millisecondsInWeek",0,6048e5,"minutesInDay",0,1440,"minutesInMonth",0,43200],511518),e.s(["constructFrom",()=>i],487122)},632713,516467,539392,e=>{"use strict";var t=e.i(487122);function i(e,i){return(0,t.constructFrom)(i||e,e)}function r(e){let t=i(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),e-r}function n(e,...i){let r=t.constructFrom.bind(null,e||i.find(e=>"object"==typeof e));return i.map(r)}e.s(["toDate",()=>i],516467),e.s(["getTimezoneOffsetInMilliseconds",()=>r],632713),e.s(["normalizeDates",()=>n],539392)},230902,e=>{"use strict";var t=e.i(238153),i=e.i(492421),r=e.i(632713),n=e.i(539392),o=e.i(511518),s=e.i(516467);function a(e,t){let i=(0,s.toDate)(e,t?.in);return i.setHours(0,0,0,0),i}function l(e,t){let r=(0,i.getDefaultOptions)(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=(0,s.toDate)(e,t?.in),a=o.getDay();return o.setDate(o.getDate()-(7*(a<n)+a-n)),o.setHours(0,0,0,0),o}function u(e,t){return l(e,{...t,weekStartsOn:1})}var d=e.i(487122);function c(e,t){let i=(0,s.toDate)(e,t?.in),r=i.getFullYear(),n=(0,d.constructFrom)(i,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let o=u(n),a=(0,d.constructFrom)(i,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);let l=u(a);return i.getTime()>=o.getTime()?r+1:i.getTime()>=l.getTime()?r:r-1}function h(e,t){let r=(0,s.toDate)(e,t?.in),n=r.getFullYear(),o=(0,i.getDefaultOptions)(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,u=(0,d.constructFrom)(t?.in||e,0);u.setFullYear(n+1,0,a),u.setHours(0,0,0,0);let c=l(u,t),h=(0,d.constructFrom)(t?.in||e,0);h.setFullYear(n,0,a),h.setHours(0,0,0,0);let p=l(h,t);return+r>=+c?n+1:+r>=+p?n:n-1}function p(e,t){let i=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+i}let f={y(e,t){let i=e.getFullYear(),r=i>0?i:1-i;return p("yy"===t?r%100:r,t.length)},M(e,t){let i=e.getMonth();return"M"===t?String(i+1):p(i+1,2)},d:(e,t)=>p(e.getDate(),t.length),a(e,t){let i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(e,t)=>p(e.getHours()%12||12,t.length),H:(e,t)=>p(e.getHours(),t.length),m:(e,t)=>p(e.getMinutes(),t.length),s:(e,t)=>p(e.getSeconds(),t.length),S(e,t){let i=t.length;return p(Math.trunc(e.getMilliseconds()*Math.pow(10,i-3)),t.length)}},g={G:function(e,t,i){let r=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});default:return i.era(r,{width:"wide"})}},y:function(e,t,i){if("yo"===t){let t=e.getFullYear();return i.ordinalNumber(t>0?t:1-t,{unit:"year"})}return f.y(e,t)},Y:function(e,t,i,r){let n=h(e,r),o=n>0?n:1-n;return"YY"===t?p(o%100,2):"Yo"===t?i.ordinalNumber(o,{unit:"year"}):p(o,t.length)},R:function(e,t){return p(c(e),t.length)},u:function(e,t){return p(e.getFullYear(),t.length)},Q:function(e,t,i){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return p(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,i){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return p(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,i){let r=e.getMonth();switch(t){case"M":case"MM":return f.M(e,t);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,i){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return p(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let a,u,c,f,g,m=Math.round((l(a=(0,s.toDate)(e,n?.in),n)-(u=(0,i.getDefaultOptions)(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,f=h(a,n),(g=(0,d.constructFrom)(n?.in||a,0)).setFullYear(f,0,c),g.setHours(0,0,0,0),l(g,n)))/o.millisecondsInWeek)+1;return"wo"===t?r.ordinalNumber(m,{unit:"week"}):p(m,t.length)},I:function(e,t,i){let r,n,a,l=Math.round((u(r=(0,s.toDate)(e,void 0))-(n=c(r,void 0),(a=(0,d.constructFrom)(r,0)).setFullYear(n,0,4),a.setHours(0,0,0,0),u(a)))/o.millisecondsInWeek)+1;return"Io"===t?i.ordinalNumber(l,{unit:"week"}):p(l,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getDate(),{unit:"date"}):f.d(e,t)},D:function(e,t,i){let l,u,d=function(e,t,i){let[s,l]=(0,n.normalizeDates)(void 0,e,t),u=a(s),d=a(l);return Math.round((u-(0,r.getTimezoneOffsetInMilliseconds)(u)-(d-(0,r.getTimezoneOffsetInMilliseconds)(d)))/o.millisecondsInDay)}(l=(0,s.toDate)(e,void 0),((u=(0,s.toDate)(l,void 0)).setFullYear(u.getFullYear(),0,1),u.setHours(0,0,0,0),u))+1;return"Do"===t?i.ordinalNumber(d,{unit:"dayOfYear"}):p(d,t.length)},E:function(e,t,i){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,i,r){let n=e.getDay(),o=(n-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return p(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,i,r){let n=e.getDay(),o=(n-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return p(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"});default:return i.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,i){let r=e.getDay(),n=0===r?7:r;switch(t){case"i":return String(n);case"ii":return p(n,t.length);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,i){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,i){let r,n=e.getHours();switch(r=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,i){let r,n=e.getHours();switch(r=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(r,{width:"narrow",context:"formatting"});default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),i.ordinalNumber(t,{unit:"hour"})}return f.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getHours(),{unit:"hour"}):f.H(e,t)},K:function(e,t,i){let r=e.getHours()%12;return"Ko"===t?i.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},k:function(e,t,i){let r=e.getHours();return(0===r&&(r=24),"ko"===t)?i.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):f.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getSeconds(),{unit:"second"}):f.s(e,t)},S:function(e,t){return f.S(e,t)},X:function(e,t,i){let r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return v(r);case"XXXX":case"XX":return y(r);default:return y(r,":")}},x:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"x":return v(r);case"xxxx":case"xx":return y(r);default:return y(r,":")}},O:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m(r,":");default:return"GMT"+y(r,":")}},z:function(e,t,i){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m(r,":");default:return"GMT"+y(r,":")}},t:function(e,t,i){return p(Math.trunc(e/1e3),t.length)},T:function(e,t,i){return p(+e,t.length)}};function m(e,t=""){let i=e>0?"-":"+",r=Math.abs(e),n=Math.trunc(r/60),o=r%60;return 0===o?i+String(n):i+String(n)+t+p(o,2)}function v(e,t){return e%60==0?(e>0?"-":"+")+p(Math.abs(e)/60,2):y(e,t)}function y(e,t=""){let i=Math.abs(e);return(e>0?"-":"+")+p(Math.trunc(i/60),2)+t+p(i%60,2)}let b=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},w=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},C={p:w,P:(e,t)=>{let i,r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return b(e,t);switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",b(n,t)).replace("{{time}}",w(o,t))}},x=/^D+$/,S=/^Y+$/,k=["D","DD","YY","YYYY"],R=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,E=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P=/^'([^]*?)'?$/,M=/''/g,D=/[a-zA-Z]/;function T(e,r,n){let o=(0,i.getDefaultOptions)(),a=n?.locale??o.locale??t.defaultLocale,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,u=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,d=(0,s.toDate)(e,n?.in);if(!(d instanceof Date||"object"==typeof d&&"[object Date]"===Object.prototype.toString.call(d))&&"number"!=typeof d||isNaN(+(0,s.toDate)(d)))throw RangeError("Invalid time value");let c=r.match(E).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,C[t])(e,a.formatLong):e}).join("").match(R).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var i;let t;return{isToken:!1,value:(t=(i=e).match(P))?t[1].replace(M,"'"):i}}if(g[t])return{isToken:!0,value:e};if(t.match(D))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(c=a.localize.preprocessor(d,c));let h={firstWeekContainsDate:l,weekStartsOn:u,locale:a};return c.map(t=>{if(!t.isToken)return t.value;let i=t.value;return(!n?.useAdditionalWeekYearTokens&&S.test(i)||!n?.useAdditionalDayOfYearTokens&&x.test(i))&&function(e,t,i){var r,n,o;let s,a=(r=e,n=t,o=i,s="Y"===r[0]?"years":"days of the month",`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${n}\`) for formatting ${s} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(a),k.includes(e))throw RangeError(a)}(i,r,String(e)),(0,g[i[0]])(d,i,a.localize,h)}).join("")}e.s(["format",()=>T],230902)},353406,122429,665521,660844,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(187725),n=e.i(862754),o=e.i(573478),s=e.i(520584);function a(e,t="en-US",i){return"number"!=typeof e?e:new Intl.NumberFormat(t,i).format(e)}function l(e){let t=(t=e)=>a(t,"en-US",{style:"percent",minimumFractionDigits:1});if(e>0&&e<=.001){let e=t(.001);return`<${e}`}if(e<1&&e>=.999){let e=t(.999);return`>${e}`}return t()}function u(e){if("number"!=typeof e)return e;{let t=Math.abs(e),i=t>=.01,r=t>=1e6,n=t>=1e9,o=t>=1e15;if(o||t>=1e12)return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:2*!o}).format(e/1e12).replace("L","T");if(n||r||t>=1e3){let t={base:n?1e9:r?1e6:1e3,unit:n?"B":r?"M":"K"};return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:1}).format(e/t.base).replace("L",t.unit)}if(t>=1)return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e);else return new Intl.NumberFormat("en-US",{maximumFractionDigits:i?3:2,notation:i||0===t?"standard":"scientific"}).format(e)}}e.i(742760),e.i(230902),e.s(["formatAsAbbreviatedNumber",()=>u,"formatIntervalMinMax",()=>l,"formatNumber",()=>a],122429);let d="#63B3ED",c="#F6AD55",h=`${d}A5`,p=`${c}A5`;function f({color:e}){return(0,t.jsx)(i.default,{sx:{display:"inline-block",width:"10px",height:"10px",bgcolor:e,mr:1,borderRadius:"4px"}})}function g({data:e,hideAxis:i=!1,animation:r=!1}){o.Chart.register(o.BarElement,o.TimeSeriesScale,o.LinearScale,o.CategoryScale,o.Title,o.Legend,o.Tooltip);let n=function(e,t=!1,{...i}={}){let{title:r,datasets:n,type:o,samples:s=0,binEdges:a}=e,[d,c]=n,h="datetime"===o;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{reverse:!0},title:{display:!0,text:r,font:{size:20}},tooltip:{mode:"index",intersect:!1,callbacks:{title([{dataIndex:e,datasetIndex:t}]){let i=v(a,e);return`${h?"Date Range":"string"===o?"Text Length":"Value Range"}
${i}`},label({datasetIndex:e,dataIndex:t,dataset:{label:i}}){let r=0===e?c.counts:d.counts,n=l(r[t]/s),o=r[t];return`${i}: ${o} (${n})`}}}},scales:function({datasets:e,min:t=0,max:i=0,type:r,binEdges:n},o=!1){let[s,a]=e,l=Math.max(...a.counts,...s.counts),d=n.map((e,t)=>v(n,t)).slice(0,-1);return{x:"datetime"===r?{display:!o,type:"timeseries",min:t,max:i,adapters:{date:{}},time:{minUnit:"day"},grid:{display:!1},ticks:{minRotation:30,maxRotation:30,maxTicksLimit:8}}:{display:!o,type:"category",grid:{display:!1},ticks:{callback:(e,t)=>d[t]},stacked:!0},y:{display:!o,type:"linear",max:l,border:{dash:[2,2]},grid:{color:"lightgray"},ticks:{maxTicksLimit:8,callback:function(e){return u(e)}},beginAtZero:!0}}}(e,t),...i}}(e,i,{animation:r}),a=function(e){let{datasets:t,type:i,binEdges:r}=e,[n,o]=t,s=m(i,r,"Current",h,o),a=m(i,r,"Base",p,n);return{labels:r.map((e,t)=>v(r,t)).slice(0,-1),datasets:[s,a]}}(e);return(0,t.jsx)(s.Chart,{type:"bar",options:n,data:a,plugins:[]})}function m(e,t,i,r,n){let{counts:o=[]}=n;return{label:i,data:"datetime"===e?o.map((e,i)=>[t[i],e]):o,backgroundColor:r,borderColor:r,hoverBackgroundColor:r,borderWidth:0,categoryPercentage:1,barPercentage:1,xAxisID:"x"}}function v(e,t){let i=e[t],r=e[t+1],n=u(i),o=u(r);return`${n} - ${o}`}e.s(["BASE_BAR_COLOR",0,c,"BASE_BAR_COLOR_WITH_ALPHA",0,p,"CURRENT_BAR_COLOR",0,d,"CURRENT_BAR_COLOR_WITH_ALPHA",0,h,"SquareIcon",()=>f],665521);let y=(0,r.forwardRef)(({backgroundColor:e="white",blockSize:r,children:n,...o},s)=>(0,t.jsx)(i.default,{ref:s,...o,sx:{overflowY:"auto",overflowX:"hidden",...o.sx},children:(0,t.jsx)(i.default,{sx:{backgroundColor:e,height:"100%",blockSize:r},children:n})}));e.s(["ScreenshotBox",0,y],660844);let b=(0,r.forwardRef)(function({run:e},r){if(!(0,n.isHistogramDiffRun)(e))throw Error("Run type must be histogram_diff");let o=e.params,s=e.result?.base,a=e.result?.current,l=e.result?.min,u=e.result?.max,d=e.result?.bin_edges??[];return s&&a?(0,t.jsx)(i.default,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:(0,t.jsx)(y,{ref:r,height:"100%",children:(0,t.jsxs)(i.default,{sx:{display:"flex",flexDirection:"row"},children:[(0,t.jsx)(i.default,{sx:{flex:1}}),(0,t.jsx)(i.default,{sx:{width:"80%",height:"35vh",m:4},children:(0,t.jsx)(g,{data:{title:`Model ${o.model}.${o.column_name}`,type:e.params?.column_type??"",datasets:[s,a],min:l,max:u,samples:s.total,binEdges:d}})}),(0,t.jsx)(i.default,{sx:{flex:1}})]})})}):(0,t.jsx)("div",{children:"Loading..."})});e.s(["HistogramDiffResultView",0,b],353406)},623786,e=>{"use strict";e.i(316575);var t=e.i(187725);e.s(["default",0,function(e){let{controlled:i,default:r,name:n,state:o="value"}=e,{current:s}=t.useRef(void 0!==i),[a,l]=t.useState(r),u=t.useCallback(e=>{s||l(e)},[]);return[s?i:a,u]}],623786)},700425,e=>{"use strict";var t=e.i(435983),i=e.i(446519);function r(e){return(0,i.default)("PrivateSwitchBase",e)}(0,t.default)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]),e.s(["getSwitchBaseUtilityClass",()=>r])},605679,e=>{"use strict";var t=e.i(187725),i=e.i(778024),r=e.i(578509),n=e.i(451962),o=e.i(446547),s=e.i(623786),a=e.i(331943),l=e.i(98648),u=e.i(700425),d=e.i(577950),c=e.i(19483);let h=(0,o.styled)(l.default,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>"start"===e&&"small"!==t.size,style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>"end"===e&&"small"!==t.size,style:{marginRight:-12}}]}),p=(0,o.styled)("input",{name:"MuiSwitchBase",shouldForwardProp:n.default})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),f=t.forwardRef(function(e,t){let{autoFocus:n,checked:o,checkedIcon:l,defaultChecked:f,disabled:g,disableFocusRipple:m=!1,edge:v=!1,icon:y,id:b,inputProps:w,inputRef:C,name:x,onBlur:S,onChange:k,onFocus:R,readOnly:E,required:P=!1,tabIndex:M,type:D,value:T,slots:O={},slotProps:_={},...A}=e,[F,I]=(0,s.default)({controlled:o,default:!!f,name:"SwitchBase",state:"checked"}),L=(0,a.default)(),N=g;L&&void 0===N&&(N=L.disabled);let B="checkbox"===D||"radio"===D,V={...e,checked:F,disabled:N,disableFocusRipple:m,edge:v},H=(e=>{let{classes:t,checked:n,disabled:o,edge:s}=e,a={root:["root",n&&"checked",o&&"disabled",s&&`edge${(0,r.default)(s)}`],input:["input"]};return(0,i.default)(a,u.getSwitchBaseUtilityClass,t)})(V),z={slots:O,slotProps:{input:w,..._}},[j,G]=(0,d.default)("root",{ref:t,elementType:h,className:H.root,shouldForwardComponentProp:!0,externalForwardedProps:{...z,component:"span",...A},getSlotProps:e=>({...e,onFocus:t=>{e.onFocus?.(t),R&&R(t),L&&L.onFocus&&L.onFocus(t)},onBlur:t=>{e.onBlur?.(t),S&&S(t),L&&L.onBlur&&L.onBlur(t)}}),ownerState:V,additionalProps:{centerRipple:!0,focusRipple:!m,disabled:N,role:void 0,tabIndex:null}}),[W,U]=(0,d.default)("input",{ref:C,elementType:p,className:H.input,externalForwardedProps:z,getSlotProps:e=>({...e,onChange:t=>{e.onChange?.(t),(e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;I(t),k&&k(e,t)})(t)}}),ownerState:V,additionalProps:{autoFocus:n,checked:o,defaultChecked:f,disabled:N,id:B?b:void 0,name:x,readOnly:E,required:P,tabIndex:M,type:D,..."checkbox"===D&&void 0===T?{}:{value:T}}});return(0,c.jsxs)(j,{...G,children:[(0,c.jsx)(W,{...U}),F?l:y]})});e.s(["default",0,f])},562903,233799,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(605679),o=e.i(36297),s=e.i(19483);let a=(0,o.default)((0,s.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),l=(0,o.default)((0,s.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),u=(0,o.default)((0,s.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var d=e.i(578509),c=e.i(451962),h=e.i(435983),p=e.i(446519);function f(e){return(0,p.default)("MuiCheckbox",e)}let g=(0,h.default)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);var m=e.i(446547),v=e.i(73205),y=e.i(860223),b=e.i(519273),w=e.i(937253),C=e.i(577950);let x=(0,m.styled)(n.default,{shouldForwardProp:e=>(0,c.default)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t[`size${(0,d.default)(i.size)}`],"default"!==i.color&&t[`color${(0,d.default)(i.color)}`]]}})((0,v.default)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter((0,y.default)()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter((0,y.default)()).map(([t])=>({props:{color:t},style:{[`&.${g.checked}, &.${g.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),S=(0,s.jsx)(l,{}),k=(0,s.jsx)(a,{}),R=(0,s.jsx)(u,{}),E=t.forwardRef(function(e,n){let o=(0,b.useDefaultProps)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=S,color:l="primary",icon:u=k,indeterminate:c=!1,indeterminateIcon:h=R,inputProps:p,size:g="medium",disableRipple:m=!1,className:v,slots:y={},slotProps:E={},...P}=o,M=c?h:u,D=c?h:a,T={...o,disableRipple:m,color:l,indeterminate:c,size:g},O=(e=>{let{classes:t,indeterminate:i,color:n,size:o}=e,s={root:["root",i&&"indeterminate",`color${(0,d.default)(n)}`,`size${(0,d.default)(o)}`]},a=(0,r.default)(s,f,t);return{...t,...a}})(T),_=E.input??p,[A,F]=(0,C.default)("root",{ref:n,elementType:x,className:(0,i.default)(O.root,v),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:E,...P},ownerState:T,additionalProps:{type:"checkbox",icon:t.cloneElement(M,{fontSize:M.props.fontSize??g}),checkedIcon:t.cloneElement(D,{fontSize:D.props.fontSize??g}),disableRipple:m,slots:y,slotProps:{input:(0,w.mergeSlotProps)("function"==typeof _?_(T):_,{"data-indeterminate":c})}}});return(0,s.jsx)(A,{...F,classes:O})});e.s(["default",0,E],562903);var P=e.i(331943),P=P,M=e.i(427938);function D(e){return(0,p.default)("MuiFormControlLabel",e)}let T=(0,h.default)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var O=e.i(854816);let _=(0,m.styled)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{[`& .${T.label}`]:t.label},t.root,t[`labelPlacement${(0,d.default)(i.labelPlacement)}`]]}})((0,v.default)(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${T.disabled}`]:{cursor:"default"},[`& .${T.label}`]:{[`&.${T.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>"start"===e||"top"===e||"bottom"===e,style:{marginLeft:16}}]}))),A=(0,m.styled)("span",{name:"MuiFormControlLabel",slot:"Asterisk"})((0,v.default)(({theme:e})=>({[`&.${T.error}`]:{color:(e.vars||e).palette.error.main}}))),F=t.forwardRef(function(e,n){let o=(0,b.useDefaultProps)({props:e,name:"MuiFormControlLabel"}),{checked:a,className:l,componentsProps:u={},control:c,disabled:h,disableTypography:p,inputRef:f,label:g,labelPlacement:m="end",name:v,onChange:y,required:w,slots:x={},slotProps:S={},value:k,...R}=o,E=(0,P.default)(),T=h??c.props.disabled??E?.disabled,F=w??c.props.required,I={disabled:T,required:F};["checked","name","onChange","value","inputRef"].forEach(e=>{void 0===c.props[e]&&void 0!==o[e]&&(I[e]=o[e])});let L=(0,O.default)({props:o,muiFormControl:E,states:["error"]}),N={...o,disabled:T,labelPlacement:m,required:F,error:L.error},B=(e=>{let{classes:t,disabled:i,labelPlacement:n,error:o,required:s}=e,a={root:["root",i&&"disabled",`labelPlacement${(0,d.default)(n)}`,o&&"error",s&&"required"],label:["label",i&&"disabled"],asterisk:["asterisk",o&&"error"]};return(0,r.default)(a,D,t)})(N),V={slots:x,slotProps:{...u,...S}},[H,z]=(0,C.default)("typography",{elementType:M.default,externalForwardedProps:V,ownerState:N}),j=g;return null==j||j.type===M.default||p||(j=(0,s.jsx)(H,{component:"span",...z,className:(0,i.default)(B.label,z?.className),children:j})),(0,s.jsxs)(_,{className:(0,i.default)(B.root,l),ownerState:N,ref:n,...R,children:[t.cloneElement(c,I),F?(0,s.jsxs)("div",{children:[j,(0,s.jsxs)(A,{ownerState:N,"aria-hidden":!0,className:B.asterisk,children:["","*"]})]}):j]})});e.s(["default",0,F],233799)},889857,335706,e=>{"use strict";e.i(316575);var t,i=e.i(187725),r=e.i(456132),n=e.i(778024),o=e.i(278903),s=e.i(451962),a=e.i(446547),l=e.i(73205),u=e.i(860223),d=e.i(519273),c=e.i(435983),h=e.i(446519),p=e.i(330978);function f(e){return(0,h.default)("MuiFilledInput",e)}let g={...p.inputBaseClasses,...(0,c.default)("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])};var m=e.i(578509),m=m,v=e.i(19483);let y=(0,a.styled)(o.InputBaseRoot,{shouldForwardProp:e=>(0,s.default)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[...(0,o.rootOverridesResolver)(e,t),!i.disableUnderline&&t.underline]}})((0,l.default)(({theme:e})=>{let t="light"===e.palette.mode,i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i}},[`&.${g.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i},[`&.${g.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"},variants:[{props:({ownerState:e})=>!e.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${g.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${g.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)"}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${g.disabled}, .${g.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${g.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter((0,u.default)()).map(([t])=>({props:{disableUnderline:!1,color:t},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t]?.main}`}}})),{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:12}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:12}},{props:({ownerState:e})=>e.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:e,size:t})=>e.multiline&&"small"===t,style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.multiline&&e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.multiline&&e.hiddenLabel&&"small"===e.size,style:{paddingTop:8,paddingBottom:9}}]}})),b=(0,a.styled)(o.InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:o.inputOverridesResolver})((0,l.default)(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&"small"===e.size,style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),w=i.forwardRef(function(e,t){let i=(0,d.useDefaultProps)({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:a={},componentsProps:l,fullWidth:u=!1,hiddenLabel:c,inputComponent:h="input",multiline:p=!1,slotProps:g,slots:w={},type:C="text",...x}=i,S={...i,disableUnderline:s,fullWidth:u,inputComponent:h,multiline:p,type:C},k=(e=>{let{classes:t,disableUnderline:i,startAdornment:r,endAdornment:o,size:s,hiddenLabel:a,multiline:l}=e,u={root:["root",!i&&"underline",r&&"adornedStart",o&&"adornedEnd","small"===s&&`size${(0,m.default)(s)}`,a&&"hiddenLabel",l&&"multiline"],input:["input"]},d=(0,n.default)(u,f,t);return{...t,...d}})(i),R={root:{ownerState:S},input:{ownerState:S}},E=g??l?(0,r.default)(R,g??l):R,P=w.root??a.Root??y,M=w.input??a.Input??b;return(0,v.jsx)(o.default,{slots:{root:P,input:M},slotProps:E,fullWidth:u,inputComponent:h,multiline:p,ref:t,type:C,...x,classes:k})});w.muiName="Input",e.s(["default",0,w],889857);let C=(0,a.styled)("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:s.default})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),x=(0,a.styled)("legend",{name:"MuiNotchedOutlined",shouldForwardProp:s.default})((0,l.default)(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));var S=e.i(331943),k=e.i(854816);function R(e){return(0,h.default)("MuiOutlinedInput",e)}let E={...p.inputBaseClasses,...(0,c.default)("MuiOutlinedInput",["root","notchedOutline","input"])};var P=e.i(577950);let M=(0,a.styled)(o.InputBaseRoot,{shouldForwardProp:e=>(0,s.default)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:o.rootOverridesResolver})((0,l.default)(({theme:e})=>{let t="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${E.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${E.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${E.focused} .${E.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter((0,u.default)()).map(([t])=>({props:{color:t},style:{[`&.${E.focused} .${E.notchedOutline}`]:{borderColor:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${E.error} .${E.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${E.disabled} .${E.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:14}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:14}},{props:({ownerState:e})=>e.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:e,size:t})=>e.multiline&&"small"===t,style:{padding:"8.5px 14px"}}]}})),D=(0,a.styled)(function(e){let{children:i,classes:r,className:n,label:o,notched:s,...a}=e,l=null!=o&&""!==o,u={...e,notched:s,withLabel:l};return(0,v.jsx)(C,{"aria-hidden":!0,className:n,ownerState:u,...a,children:(0,v.jsx)(x,{ownerState:u,children:l?(0,v.jsx)("span",{children:o}):t||(t=(0,v.jsx)("span",{className:"notranslate","aria-hidden":!0,children:""}))})})},{name:"MuiOutlinedInput",slot:"NotchedOutline"})((0,l.default)(({theme:e})=>{let t="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),T=(0,a.styled)(o.InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:o.inputOverridesResolver})((0,l.default)(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),O=i.forwardRef(function(e,t){let r=(0,d.useDefaultProps)({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:a=!1,inputComponent:l="input",label:u,multiline:c=!1,notched:h,slots:p={},slotProps:f={},type:g="text",...m}=r,y=(e=>{let{classes:t}=e,i=(0,n.default)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},R,t);return{...t,...i}})(r),b=(0,S.default)(),w=(0,k.default)({props:r,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),C={...r,color:w.color||"primary",disabled:w.disabled,error:w.error,focused:w.focused,formControl:b,fullWidth:a,hiddenLabel:w.hiddenLabel,multiline:c,size:w.size,type:g},x=p.root??s.Root??M,E=p.input??s.Input??T,[O,_]=(0,P.default)("notchedOutline",{elementType:D,className:y.notchedOutline,shouldForwardComponentProp:!0,ownerState:C,externalForwardedProps:{slots:p,slotProps:f},additionalProps:{label:null!=u&&""!==u&&w.required?(0,v.jsxs)(i.Fragment,{children:[u,"","*"]}):u}});return(0,v.jsx)(o.default,{slots:{root:x,input:E},slotProps:f,renderSuffix:e=>(0,v.jsx)(O,{..._,notched:void 0!==h?h:!!(e.startAdornment||e.filled||e.focused)}),fullWidth:a,inputComponent:l,multiline:c,ref:t,type:g,...m,classes:{...y,notchedOutline:null}})});O.muiName="Input",e.s(["default",0,O],335706)},417636,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(778024),r=e.i(7284),n=e.i(854816),o=e.i(331943),s=e.i(384339),a=e.i(883124),a=a,l=e.i(578509),u=e.i(451962),d=e.i(446547),c=e.i(73205),h=e.i(519273),p=e.i(435983),f=e.i(446519);function g(e){return(0,f.default)("MuiInputLabel",e)}(0,p.default)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var m=e.i(19483);let v=(0,d.styled)(s.default,{shouldForwardProp:e=>(0,u.default)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{[`& .${a.default.asterisk}`]:t.asterisk},t.root,i.formControl&&t.formControl,"small"===i.size&&t.sizeSmall,i.shrink&&t.shrink,!i.disableAnimation&&t.animated,i.focused&&t.focused,t[i.variant]]}})((0,c.default)(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>"filled"===e&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:i})=>"filled"===e&&t.shrink&&"small"===i,style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>"outlined"===e&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),y=t.forwardRef(function(e,t){let s=(0,h.useDefaultProps)({name:"MuiInputLabel",props:e}),{disableAnimation:a=!1,margin:u,shrink:d,variant:c,className:p,...f}=s,y=(0,o.default)(),b=d;void 0===b&&y&&(b=y.filled||y.focused||y.adornedStart);let w=(0,n.default)({props:s,muiFormControl:y,states:["size","variant","required","focused"]}),C={...s,disableAnimation:a,formControl:y,shrink:b,size:w.size,variant:w.variant,required:w.required,focused:w.focused},x=(e=>{let{classes:t,formControl:r,size:n,shrink:o,disableAnimation:s,variant:a,required:u}=e,d={root:["root",r&&"formControl",!s&&"animated",o&&"shrink",n&&"medium"!==n&&`size${(0,l.default)(n)}`,a],asterisk:[u&&"asterisk"]},c=(0,i.default)(d,g,t);return{...t,...c}})(C);return(0,m.jsx)(v,{"data-shrink":b,ref:t,className:(0,r.default)(x.root,p),...f,ownerState:C,classes:x})});e.s(["default",0,y],417636)},343020,e=>{"use strict";e.i(316575);var t,i=e.i(187725),r=e.i(7284),n=e.i(778024),o=e.i(854816),s=e.i(331943),a=e.i(446547),l=e.i(73205),u=e.i(519273),d=e.i(578509),c=e.i(435983),h=e.i(446519);function p(e){return(0,h.default)("MuiFormHelperText",e)}let f=(0,c.default)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var g=e.i(19483);let m=(0,a.styled)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.size&&t[`size${(0,d.default)(i.size)}`],i.contained&&t.contained,i.filled&&t.filled]}})((0,l.default)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${f.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${f.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),v=i.forwardRef(function(e,i){let a=(0,u.useDefaultProps)({props:e,name:"MuiFormHelperText"}),{children:l,className:c,component:h="p",disabled:f,error:v,filled:y,focused:b,margin:w,required:C,variant:x,...S}=a,k=(0,s.default)(),R=(0,o.default)({props:a,muiFormControl:k,states:["variant","size","disabled","error","filled","focused","required"]}),E={...a,component:h,contained:"filled"===R.variant||"outlined"===R.variant,variant:R.variant,size:R.size,disabled:R.disabled,error:R.error,filled:R.filled,focused:R.focused,required:R.required};delete E.ownerState;let P=(e=>{let{classes:t,contained:i,size:r,disabled:o,error:s,filled:a,focused:l,required:u}=e,c={root:["root",o&&"disabled",s&&"error",r&&`size${(0,d.default)(r)}`,i&&"contained",l&&"focused",a&&"filled",u&&"required"]};return(0,n.default)(c,p,t)})(E);return(0,g.jsx)(m,{as:h,className:(0,r.default)(P.root,c),ref:i,...S,ownerState:E,children:" "===l?t||(t=(0,g.jsx)("span",{className:"notranslate","aria-hidden":!0,children:""})):l})});e.s(["default",0,v],343020)},523086,e=>{"use strict";var t=e.i(995044),i=e.i(345058),r=e.i(749661),n=e.i(752754);e.s(["default",0,function(e){let{elementType:o,externalSlotProps:s,ownerState:a,skipResolvingSlotProps:l=!1,...u}=e,d=l?{}:(0,n.default)(s,a),{props:c,internalRef:h}=(0,r.default)({...u,externalSlotProps:d}),p=(0,t.default)(h,d?.ref,e.additionalProps?.ref);return(0,i.default)(o,{...c,ref:p},a)}])},838443,e=>{"use strict";let t=e.i(187725).createContext({});e.s(["default",0,t])},228628,96336,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(446547),o=e.i(519273),s=e.i(838443),a=e.i(435983),l=e.i(446519);function u(e){return(0,l.default)("MuiList",e)}(0,a.default)("MuiList",["root","padding","dense","subheader"]);var d=e.i(19483);let c=(0,n.styled)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,!i.disablePadding&&t.padding,i.dense&&t.dense,i.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),h=t.forwardRef(function(e,n){let a=(0,o.useDefaultProps)({props:e,name:"MuiList"}),{children:l,className:h,component:p="ul",dense:f=!1,disablePadding:g=!1,subheader:m,...v}=a,y=t.useMemo(()=>({dense:f}),[f]),b={...a,component:p,dense:f,disablePadding:g},w=(e=>{let{classes:t,disablePadding:i,dense:n,subheader:o}=e;return(0,r.default)({root:["root",!i&&"padding",n&&"dense",o&&"subheader"]},u,t)})(b);return(0,d.jsx)(s.default.Provider,{value:y,children:(0,d.jsxs)(c,{as:p,className:(0,i.default)(w.root,h),ref:n,ownerState:b,...v,children:[m,l]})})});e.s(["default",0,h],228628);let p=e.i(589624).default;e.s(["default",0,p],96336)},392744,889095,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(817360),r=e.i(228628),n=e.i(592468),o=e.i(96336),s=e.i(723938),a=e.i(921301),l=e.i(144758);e.s(["ownerWindow",()=>l.default],889095);var l=l,u=e.i(19483);function d(e,t,i){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:i?null:e.firstChild}function c(e,t,i){return e===t?i?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:i?null:e.lastChild}function h(e,t){if(void 0===t)return!0;let i=e.innerText;return void 0===i&&(i=e.textContent),0!==(i=i.trim().toLowerCase()).length&&(t.repeating?i[0]===t.keys[0]:i.startsWith(t.keys.join("")))}function p(e,t,i,r,n,o){let s=!1,a=n(e,t,!!t&&i);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}let t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&h(a,o)&&!t)return a.focus(),!0;a=n(e,a,i)}return!1}let f=t.forwardRef(function(e,f){let{actions:g,autoFocus:m=!1,autoFocusItem:v=!1,children:y,className:b,disabledItemsFocusable:w=!1,disableListWrap:C=!1,onKeyDown:x,variant:S="selectedMenu",...k}=e,R=t.useRef(null),E=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,a.default)(()=>{m&&R.current.focus()},[m]),t.useImperativeHandle(g,()=>({adjustStyleForScrollbar:(e,{direction:t})=>{let i=!R.current.style.width;if(e.clientHeight<R.current.clientHeight&&i){let i=`${(0,o.default)((0,l.default)(e))}px`;R.current.style["rtl"===t?"paddingLeft":"paddingRight"]=i,R.current.style.width=`calc(100% + ${i})`}return R.current}}),[]);let P=(0,s.default)(R,f),M=-1;t.Children.forEach(y,(e,i)=>{if(!t.isValidElement(e)){M===i&&(M+=1)>=y.length&&(M=-1);return}e.props.disabled||("selectedMenu"===S&&e.props.selected?M=i:-1===M&&(M=i)),M===i&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(M+=1)>=y.length&&(M=-1)});let D=t.Children.map(y,(e,i)=>{if(i===M){let i={};return v&&(i.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===S&&(i.tabIndex=0),t.cloneElement(e,i)}return e});return(0,u.jsx)(r.default,{role:"menu",ref:P,className:b,onKeyDown:e=>{let t=R.current,r=e.key;if(e.ctrlKey||e.metaKey||e.altKey){x&&x(e);return}let o=(0,n.default)((0,i.default)(t));if("ArrowDown"===r)e.preventDefault(),p(t,o,C,w,d);else if("ArrowUp"===r)e.preventDefault(),p(t,o,C,w,c);else if("Home"===r)e.preventDefault(),p(t,null,C,w,d);else if("End"===r)e.preventDefault(),p(t,null,C,w,c);else if(1===r.length){let i=E.current,n=r.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&n!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(n);let a=o&&!i.repeating&&h(o,i);i.previousKeyMatched&&(a||p(t,o,!1,w,d,i))?e.preventDefault():i.previousKeyMatched=!1}x&&x(e)},tabIndex:m?0:-1,...k,children:D})});e.s(["default",0,f],392744)},135301,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(358102),o=e.i(523086),s=e.i(392744),a=e.i(359143),l=e.i(451962),u=e.i(446547),d=e.i(519273),c=e.i(435983),h=e.i(446519);function p(e){return(0,h.default)("MuiMenu",e)}(0,c.default)("MuiMenu",["root","paper","list"]);var f=e.i(577950),g=e.i(19483);let m={vertical:"top",horizontal:"right"},v={vertical:"top",horizontal:"left"},y=(0,u.styled)(a.default,{shouldForwardProp:e=>(0,l.default)(e)||"classes"===e,name:"MuiMenu",slot:"Root"})({}),b=(0,u.styled)(a.PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),w=(0,u.styled)(s.default,{name:"MuiMenu",slot:"List"})({outline:0}),C=t.forwardRef(function(e,s){let a=(0,d.useDefaultProps)({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:c,disableAutoFocusItem:h=!1,MenuListProps:C={},onClose:x,open:S,PaperProps:k={},PopoverClasses:R,transitionDuration:E="auto",TransitionProps:{onEntering:P,...M}={},variant:D="selectedMenu",slots:T={},slotProps:O={},..._}=a,A=(0,n.useRtl)(),F={...a,autoFocus:l,disableAutoFocusItem:h,MenuListProps:C,onEntering:P,PaperProps:k,transitionDuration:E,TransitionProps:M,variant:D},I=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"],paper:["paper"],list:["list"]},p,t)})(F),L=l&&!h&&S,N=t.useRef(null),B=-1;t.Children.map(u,(e,i)=>{t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===D&&e.props.selected?B=i:-1===B&&(B=i)))});let V={slots:T,slotProps:{list:C,transition:M,paper:k,...O}},H=(0,o.default)({elementType:T.root,externalSlotProps:O.root,ownerState:F,className:[I.root,c]}),[z,j]=(0,f.default)("paper",{className:I.paper,elementType:b,externalForwardedProps:V,shouldForwardComponentProp:!0,ownerState:F}),[G,W]=(0,f.default)("list",{className:(0,i.default)(I.list,C.className),elementType:w,shouldForwardComponentProp:!0,externalForwardedProps:V,getSlotProps:e=>({...e,onKeyDown:t=>{"Tab"===t.key&&(t.preventDefault(),x&&x(t,"tabKeyDown")),e.onKeyDown?.(t)}}),ownerState:F}),U="function"==typeof V.slotProps.transition?V.slotProps.transition(F):V.slotProps.transition;return(0,g.jsx)(y,{onClose:x,anchorOrigin:{vertical:"bottom",horizontal:A?"right":"left"},transformOrigin:A?m:v,slots:{root:T.root,paper:z,backdrop:T.backdrop,...T.transition&&{transition:T.transition}},slotProps:{root:H,paper:j,backdrop:"function"==typeof O.backdrop?O.backdrop(F):O.backdrop,transition:{...U,onEntering:(...e)=>{((e,t)=>{N.current&&N.current.adjustStyleForScrollbar(e,{direction:A?"rtl":"ltr"}),P&&P(e,t)})(...e),U?.onEntering?.(...e)}}},open:S,ref:s,transitionDuration:E,ownerState:F,..._,classes:R,children:(0,g.jsx)(G,{actions:N,autoFocus:l&&(-1===B||h),autoFocusItem:L,variant:D,...W,children:u})})});e.s(["default",0,C],135301)},908361,383793,e=>{"use strict";e.i(316575);var t,i=e.i(862088),r=e.i(187725),n=e.i(7284),o=e.i(778024),s=e.i(244875),a=e.i(817360),l=e.i(578509),u=e.i(135301),d=e.i(176264),c=e.i(319557),h=e.i(446547),p=e.i(619810),f=e.i(723938),g=e.i(623786),m=e.i(435983),v=e.i(446519);function y(e){return(0,v.default)("MuiSelect",e)}let b=(0,m.default)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);e.s(["default",0,b,"getSelectUtilityClasses",()=>y],383793);var w=e.i(19483);let C=(0,h.styled)(d.StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{[`&.${b.select}`]:t.select},{[`&.${b.select}`]:t[i.variant]},{[`&.${b.error}`]:t.error},{[`&.${b.multiple}`]:t.multiple}]}})({[`&.${b.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),x=(0,h.styled)(d.StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.icon,i.variant&&t[`icon${(0,l.default)(i.variant)}`],i.open&&t.iconOpen]}})({}),S=(0,h.styled)("input",{shouldForwardProp:e=>(0,p.default)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function k(e,t){return"object"==typeof t&&null!==t?e===t:String(e)===String(t)}let R=r.forwardRef(function(e,d){var h;let p,m,{"aria-describedby":v,"aria-label":b,autoFocus:R,autoWidth:E,children:P,className:M,defaultOpen:D,defaultValue:T,disabled:O,displayEmpty:_,error:A=!1,IconComponent:F,inputRef:I,labelId:L,MenuProps:N={},multiple:B,name:V,onBlur:H,onChange:z,onClose:j,onFocus:G,onKeyDown:W,onMouseDown:U,onOpen:$,open:q,readOnly:K,renderValue:Q,required:X,SelectDisplayProps:Y={},tabIndex:Z,type:J,value:ee,variant:et="standard",...ei}=e,[er,en]=(0,g.default)({controlled:ee,default:T,name:"Select"}),[eo,es]=(0,g.default)({controlled:q,default:D,name:"Select"}),ea=r.useRef(null),el=r.useRef(null),[eu,ed]=r.useState(null),{current:ec}=r.useRef(null!=q),[eh,ep]=r.useState(),ef=(0,f.default)(d,I),eg=r.useCallback(e=>{el.current=e,e&&ed(e)},[]),em=eu?.parentNode;r.useImperativeHandle(ef,()=>({focus:()=>{el.current.focus()},node:ea.current,value:er}),[er]),r.useEffect(()=>{D&&eo&&eu&&!ec&&(ep(E?null:em.clientWidth),el.current.focus())},[eu,E]),r.useEffect(()=>{R&&el.current.focus()},[R]),r.useEffect(()=>{if(!L)return;let e=(0,a.default)(el.current).getElementById(L);if(e){let t=()=>{getSelection().isCollapsed&&el.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}},[L]);let ev=(e,t)=>{e?$&&$(t):j&&j(t),ec||(ep(E?null:em.clientWidth),es(e))},ey=r.Children.toArray(P),eb=null!==eu&&eo;delete ei["aria-invalid"];let ew=[],eC=!1;((0,c.isFilled)({value:er})||_)&&(Q?p=Q(er):eC=!0);let ex=ey.map(e=>{let t;if(!r.isValidElement(e))return null;if(B){if(!Array.isArray(er))throw Error((0,i.default)(2));(t=er.some(t=>k(t,e.props.value)))&&eC&&ew.push(e.props.children)}else(t=k(er,e.props.value))&&eC&&(m=e.props.children);return r.cloneElement(e,{"aria-selected":t?"true":"false",onClick:t=>{let i;if(t.currentTarget.hasAttribute("tabindex")){if(B){i=Array.isArray(er)?er.slice():[];let t=er.indexOf(e.props.value);-1===t?i.push(e.props.value):i.splice(t,1)}else i=e.props.value;if(e.props.onClick&&e.props.onClick(t),er!==i&&(en(i),z)){let r=t.nativeEvent||t,n=new r.constructor(r.type,r);Object.defineProperty(n,"target",{writable:!0,value:{value:i,name:V}}),z(n,e)}B||ev(!1,t)}},onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})});eC&&(p=B?0===ew.length?null:ew.reduce((e,t,i)=>(e.push(t),i<ew.length-1&&e.push(", "),e),[]):m);let eS=eh;!E&&ec&&eu&&(eS=em.clientWidth);let ek=Y.id||(V?`mui-component-select-${V}`:void 0),eR={...e,variant:et,value:er,open:eb,error:A},eE=(e=>{let{classes:t,variant:i,disabled:r,multiple:n,open:s,error:a}=e,u={select:["select",i,r&&"disabled",n&&"multiple",a&&"error"],icon:["icon",`icon${(0,l.default)(i)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,o.default)(u,y,t)})(eR),eP={...N.PaperProps,..."function"==typeof N.slotProps?.paper?N.slotProps.paper(eR):N.slotProps?.paper},eM={...N.MenuListProps,..."function"==typeof N.slotProps?.list?N.slotProps.list(eR):N.slotProps?.list},eD=(0,s.default)();return(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(C,{as:"div",ref:eg,tabIndex:void 0!==Z?Z:O?null:0,role:"combobox","aria-controls":eb?eD:void 0,"aria-disabled":O?"true":void 0,"aria-expanded":eb?"true":"false","aria-haspopup":"listbox","aria-label":b,"aria-labelledby":[L,ek].filter(Boolean).join(" ")||void 0,"aria-describedby":v,"aria-required":X?"true":void 0,"aria-invalid":A?"true":void 0,onKeyDown:e=>{K||([" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),ev(!0,e)),W?.(e))},onMouseDown:O||K?null:e=>{U?.(e),0===e.button&&(e.preventDefault(),el.current.focus(),ev(!0,e))},onBlur:e=>{!eb&&H&&(Object.defineProperty(e,"target",{writable:!0,value:{value:er,name:V}}),H(e))},onFocus:G,...Y,ownerState:eR,className:(0,n.default)(Y.className,eE.select,M),id:ek,children:null!=(h=p)&&("string"!=typeof h||h.trim())?p:t||(t=(0,w.jsx)("span",{className:"notranslate","aria-hidden":!0,children:""}))}),(0,w.jsx)(S,{"aria-invalid":A,value:Array.isArray(er)?er.join(","):er,name:V,ref:ea,"aria-hidden":!0,onChange:e=>{let t=ey.find(t=>t.props.value===e.target.value);void 0!==t&&(en(t.props.value),z&&z(e,t))},tabIndex:-1,disabled:O,className:eE.nativeInput,autoFocus:R,required:X,...ei,ownerState:eR}),(0,w.jsx)(x,{as:F,className:eE.icon,ownerState:eR}),(0,w.jsx)(u.default,{id:`menu-${V||""}`,anchorEl:em,open:eb,onClose:e=>{ev(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...N,slotProps:{...N.slotProps,list:{"aria-labelledby":L,role:"listbox","aria-multiselectable":B?"true":void 0,disableListWrap:!0,id:eD,...eM},paper:{...eP,style:{minWidth:eS,...null!=eP?eP.style:null}}},children:ex})]})});e.s(["default",0,R],908361)},664766,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(244875),o=e.i(446547),s=e.i(519273),a=e.i(973250),l=e.i(889857),u=e.i(335706),d=e.i(417636),c=e.i(992089),h=e.i(343020),p=e.i(456132),f=e.i(272866),g=e.i(908361),m=e.i(854816),v=e.i(331943),y=e.i(861207),b=e.i(176264),w=e.i(723938),C=e.i(451962),x=e.i(383793),S=e.i(19483);let k={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>(0,C.default)(e)&&"variant"!==e},R=(0,o.styled)(a.default,k)(""),E=(0,o.styled)(u.default,k)(""),P=(0,o.styled)(l.default,k)(""),M=t.forwardRef(function(e,n){let o=(0,s.useDefaultProps)({name:"MuiSelect",props:e}),{autoWidth:a=!1,children:l,classes:u={},className:d,defaultOpen:c=!1,displayEmpty:h=!1,IconComponent:C=y.default,id:k,input:M,inputProps:D,label:T,labelId:O,MenuProps:_,multiple:A=!1,native:F=!1,onClose:I,onOpen:L,open:N,renderValue:B,SelectDisplayProps:V,variant:H="outlined",...z}=o,j=F?b.default:g.default,G=(0,v.default)(),W=(0,m.default)({props:o,muiFormControl:G,states:["variant","error"]}),U=W.variant||H,$={...o,variant:U,classes:u},q=(e=>{let{classes:t}=e,i=(0,r.default)({root:["root"]},x.getSelectUtilityClasses,t);return{...t,...i}})($),{root:K,...Q}=q,X=M||({standard:(0,S.jsx)(R,{ownerState:$}),outlined:(0,S.jsx)(E,{label:T,ownerState:$}),filled:(0,S.jsx)(P,{ownerState:$})})[U],Y=(0,w.default)(n,(0,f.default)(X));return(0,S.jsx)(t.Fragment,{children:t.cloneElement(X,{inputComponent:j,inputProps:{children:l,error:W.error,IconComponent:C,variant:U,type:void 0,multiple:A,...F?{id:k}:{autoWidth:a,defaultOpen:c,displayEmpty:h,labelId:O,MenuProps:_,onClose:I,onOpen:L,open:N,renderValue:B,SelectDisplayProps:{id:k,...V}},...D,classes:D?(0,p.default)(Q,D.classes):Q,...M?M.props.inputProps:{}},...(A&&F||h)&&"outlined"===U?{notched:!0}:{},ref:Y,className:(0,i.default)(X.props.className,d,q.root),...!M&&{variant:U},...z})})});M.muiName="Select";var D=e.i(435983),T=e.i(446519);function O(e){return(0,T.default)("MuiTextField",e)}(0,D.default)("MuiTextField",["root"]);var _=e.i(577950);let A={standard:a.default,filled:l.default,outlined:u.default},F=(0,o.styled)(c.default,{name:"MuiTextField",slot:"Root"})({}),I=t.forwardRef(function(e,t){let o=(0,s.useDefaultProps)({props:e,name:"MuiTextField"}),{autoComplete:a,autoFocus:l=!1,children:u,className:c,color:p="primary",defaultValue:f,disabled:g=!1,error:m=!1,FormHelperTextProps:v,fullWidth:y=!1,helperText:b,id:w,InputLabelProps:C,inputProps:x,InputProps:k,inputRef:R,label:E,maxRows:P,minRows:D,multiline:T=!1,name:I,onBlur:L,onChange:N,onFocus:B,placeholder:V,required:H=!1,rows:z,select:j=!1,SelectProps:G,slots:W={},slotProps:U={},type:$,value:q,variant:K="outlined",...Q}=o,X={...o,autoFocus:l,color:p,disabled:g,error:m,fullWidth:y,multiline:T,required:H,select:j,variant:K},Y=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},O,t)})(X),Z=(0,n.default)(w),J=b&&Z?`${Z}-helper-text`:void 0,ee=E&&Z?`${Z}-label`:void 0,et=A[K],ei={slots:W,slotProps:{input:k,inputLabel:C,htmlInput:x,formHelperText:v,select:G,...U}},er={},en=ei.slotProps.inputLabel;"outlined"===K&&(en&&void 0!==en.shrink&&(er.notched=en.shrink),er.label=E),j&&(G&&G.native||(er.id=void 0),er["aria-describedby"]=void 0);let[eo,es]=(0,_.default)("root",{elementType:F,shouldForwardComponentProp:!0,externalForwardedProps:{...ei,...Q},ownerState:X,className:(0,i.default)(Y.root,c),ref:t,additionalProps:{disabled:g,error:m,fullWidth:y,required:H,color:p,variant:K}}),[ea,el]=(0,_.default)("input",{elementType:et,externalForwardedProps:ei,additionalProps:er,ownerState:X}),[eu,ed]=(0,_.default)("inputLabel",{elementType:d.default,externalForwardedProps:ei,ownerState:X}),[ec,eh]=(0,_.default)("htmlInput",{elementType:"input",externalForwardedProps:ei,ownerState:X}),[ep,ef]=(0,_.default)("formHelperText",{elementType:h.default,externalForwardedProps:ei,ownerState:X}),[eg,em]=(0,_.default)("select",{elementType:M,externalForwardedProps:ei,ownerState:X}),ev=(0,S.jsx)(ea,{"aria-describedby":J,autoComplete:a,autoFocus:l,defaultValue:f,fullWidth:y,multiline:T,name:I,rows:z,maxRows:P,minRows:D,type:$,value:q,id:Z,inputRef:R,onBlur:L,onChange:N,onFocus:B,placeholder:V,inputProps:eh,slots:{input:W.htmlInput?ec:void 0},...el});return(0,S.jsxs)(eo,{...es,children:[null!=E&&""!==E&&(0,S.jsx)(eu,{htmlFor:Z,id:ee,...ed,children:E}),j?(0,S.jsx)(eg,{"aria-describedby":J,id:Z,labelId:ee,value:q,input:ev,...em,children:u}):ev,b&&(0,S.jsx)(ep,{id:J,...ef,children:b})]})});e.s(["default",0,I],664766)},728697,982732,838481,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,i||"default");if("object"!=t(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==t(i)?i:i+""}function r(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["default",()=>t],982732),e.s(["default",()=>i],838481),e.s(["default",()=>r],728697)},486127,690986,87353,e=>{"use strict";var t=e.i(728697);function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach(function(i){(0,t.default)(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function n(e){if(Array.isArray(e))return e}function o(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,o,s,a=[],l=!0,u=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(r=o.call(i)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(u)throw n}}return a}}e.s(["default",()=>r],486127),e.s(["default",()=>n],690986),e.s(["default",()=>o],87353)},484519,e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}e.s(["default",()=>t])},886401,e=>{"use strict";var t=e.i(484519);function i(e,i){if(e){if("string"==typeof e)return(0,t.default)(e,i);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,t.default)(e,i):void 0}}e.s(["default",()=>i])},984737,e=>{"use strict";var t=e.i(690986),i=e.i(87353),r=e.i(886401);function n(e,n){return(0,t.default)(e)||(0,i.default)(e,n)||(0,r.default)(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.s(["default",()=>n],984737)},740214,e=>{"use strict";var t=e.i(382034);function i(e,i){if(null==e)return{};var r,n,o=(0,t.default)(e,i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===i.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}e.s(["default",()=>i])},221095,590811,555129,105358,35580,e=>{"use strict";var t=e.i(486127),i=e.i(984737),r=e.i(740214),n=e.i(187725),o=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function s(e){var s=e.defaultInputValue,a=e.defaultMenuIsOpen,l=e.defaultValue,u=e.inputValue,d=e.menuIsOpen,c=e.onChange,h=e.onInputChange,p=e.onMenuClose,f=e.onMenuOpen,g=e.value,m=(0,r.default)(e,o),v=(0,n.useState)(void 0!==u?u:void 0===s?"":s),y=(0,i.default)(v,2),b=y[0],w=y[1],C=(0,n.useState)(void 0!==d?d:void 0!==a&&a),x=(0,i.default)(C,2),S=x[0],k=x[1],R=(0,n.useState)(void 0!==g?g:void 0===l?null:l),E=(0,i.default)(R,2),P=E[0],M=E[1],D=(0,n.useCallback)(function(e,t){"function"==typeof c&&c(e,t),M(e)},[c]),T=(0,n.useCallback)(function(e,t){var i;"function"==typeof h&&(i=h(e,t)),w(void 0!==i?i:e)},[h]),O=(0,n.useCallback)(function(){"function"==typeof f&&f(),k(!0)},[f]),_=(0,n.useCallback)(function(){"function"==typeof p&&p(),k(!1)},[p]),A=void 0!==u?u:b,F=void 0!==d?d:S,I=void 0!==g?g:P;return(0,t.default)((0,t.default)({},m),{},{inputValue:A,menuIsOpen:F,onChange:D,onInputChange:T,onMenuClose:_,onMenuOpen:O,value:I})}function a(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}e.s(["u",()=>s],221095),e.s(["default",()=>a],590811);var l=e.i(838481);function u(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,l.default)(r.key),r)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}e.s(["default",()=>d],555129);var c=e.i(640141);function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,c.default)(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}e.s(["default",()=>h],105358);var g=e.i(982732),m=e.i(73980);function v(e){var t=f();return function(){var i,r=p(e);i=t?Reflect.construct(r,arguments,p(this).constructor):r.apply(this,arguments);if(i&&("object"==(0,g.default)(i)||"function"==typeof i))return i;if(void 0!==i)throw TypeError("Derived constructors may only return object or undefined");return(0,m.default)(this)}}e.s(["default",()=>v],35580)},146679,958124,e=>{"use strict";var t=e.i(484519);function i(e){if(Array.isArray(e))return(0,t.default)(e)}function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e.s(["default",()=>i],146679),e.s(["default",()=>r],958124)},680152,e=>{"use strict";var t=e.i(146679),i=e.i(958124),r=e.i(886401);function n(e){return(0,t.default)(e)||(0,i.default)(e)||(0,r.default)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.s(["default",()=>n],680152)},909411,497647,231076,e=>{"use strict";var t,i,r,n=e.i(19483),o=e.i(324066),s=e.i(562903),a=e.i(233799),l=e.i(336277),u=e.i(664766),d=e.i(427938),c=e.i(187725),h=e.i(221095),p=e.i(230330);e.i(316575);var f=e.i(486127),g=e.i(590811),m=e.i(555129),v=e.i(105358),y=e.i(35580),b=e.i(680152),w=e.i(51071),C=e.i(984737),x=e.i(740214),S=e.i(982732),k=e.i(728697),R=e.i(316245);let E=Math.min,P=Math.max,M=Math.round,D=Math.floor,T=e=>({x:e,y:e});function O(e){let{x:t,y:i,width:r,height:n}=e;return{width:r,height:n,top:i,left:t,right:t+r,bottom:i+n,x:t,y:i}}function _(){return"undefined"!=typeof window}function A(e){return L(e)?(e.nodeName||"").toLowerCase():"#document"}function F(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function I(e){var t;return null==(t=(L(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function L(e){return!!_()&&(e instanceof Node||e instanceof F(e).Node)}function N(e){return!!_()&&(e instanceof Element||e instanceof F(e).Element)}function B(e){return!!_()&&(e instanceof HTMLElement||e instanceof F(e).HTMLElement)}function V(e){return!!_()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof F(e).ShadowRoot)}let H=new Set(["inline","contents"]);function z(e){let{overflow:t,overflowX:i,overflowY:r,display:n}=U(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+i)&&!H.has(n)}function j(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let G=new Set(["html","body","#document"]);function W(e){return G.has(A(e))}function U(e){return F(e).getComputedStyle(e)}function $(e){if("html"===A(e))return e;let t=e.assignedSlot||e.parentNode||V(e)&&e.host||I(e);return V(t)?t.host:t}function q(e,t,i){var r;void 0===t&&(t=[]),void 0===i&&(i=!0);let n=function e(t){let i=$(t);return W(i)?t.ownerDocument?t.ownerDocument.body:t.body:B(i)&&z(i)?i:e(i)}(e),o=n===(null==(r=e.ownerDocument)?void 0:r.body),s=F(n);if(o){let e=K(s);return t.concat(s,s.visualViewport||[],z(n)?n:[],e&&i?q(e):[])}return t.concat(n,q(n,[],i))}function K(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Q(e){return N(e)?e:e.contextElement}function X(e){var t;let i,r,n,o,s,a,l,u=Q(e);if(!B(u))return T(1);let d=u.getBoundingClientRect(),{width:c,height:h,$:p}=(r=parseFloat((i=U(t=u)).width)||0,n=parseFloat(i.height)||0,s=(o=B(t))?t.offsetWidth:r,a=o?t.offsetHeight:n,(l=M(r)!==s||M(n)!==a)&&(r=s,n=a),{width:r,height:n,$:l}),f=(p?M(d.width):d.width)/c,g=(p?M(d.height):d.height)/h;return f&&Number.isFinite(f)||(f=1),g&&Number.isFinite(g)||(g=1),{x:f,y:g}}let Y=T(0);function Z(e){let t=F(e);return j()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Y}function J(e,t,i,r){var n;void 0===t&&(t=!1),void 0===i&&(i=!1);let o=e.getBoundingClientRect(),s=Q(e),a=T(1);t&&(r?N(r)&&(a=X(r)):a=X(e));let l=(void 0===(n=i)&&(n=!1),r&&(!n||r===F(s))&&n)?Z(s):T(0),u=(o.left+l.x)/a.x,d=(o.top+l.y)/a.y,c=o.width/a.x,h=o.height/a.y;if(s){let e=F(s),t=r&&N(r)?F(r):r,i=e,n=K(i);for(;n&&r&&t!==i;){let e=X(n),t=n.getBoundingClientRect(),r=U(n),o=t.left+(n.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(n.clientTop+parseFloat(r.paddingTop))*e.y;u*=e.x,d*=e.y,c*=e.x,h*=e.y,u+=o,d+=s,n=K(i=F(n))}}return O({width:c,height:h,x:u,y:d})}function ee(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}var et=c.useLayoutEffect,ei=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],er=function(){};function en(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];var o=[].concat(r);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&o.push("".concat(s?"-"===s[0]?e+s:e+"__"+s:e));return o.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var eo=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===(0,S.default)(e)&&null!==e?[e]:[]},es=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=(0,x.default)(e,ei);return(0,f.default)({},t)},ea=function(e,t,i){var r=e.cx,n=e.getStyles,o=e.getClassNames,s=e.className;return{css:n(t,e),className:r(null!=i?i:{},o(t,e),s)}};function el(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function eu(e){return el(e)?window.pageYOffset:e.scrollTop}function ed(e,t){el(e)?window.scrollTo(0,t):e.scrollTop=t}function ec(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:er,n=eu(e),o=t-n,s=0;!function t(){var a;s+=10,ed(e,o*((a=(a=s)/i-1)*a*a+1)+n),s<i?window.requestAnimationFrame(t):r(e)}()}function eh(e,t){var i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=t.offsetHeight/3;r.bottom+n>i.bottom?ed(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+n,e.scrollHeight)):r.top-n<i.top&&ed(e,Math.max(t.offsetTop-n,0))}function ep(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var ef=!1,eg="undefined"!=typeof window?window:{};eg.addEventListener&&eg.removeEventListener&&(eg.addEventListener("p",er,{get passive(){return ef=!0}}),eg.removeEventListener("p",er,!1));var em=ef;function ev(e){return null!=e}var ey=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Object.entries(e).filter(function(e){var t=(0,C.default)(e,1)[0];return!i.includes(t)}).reduce(function(e,t){var i=(0,C.default)(t,2),r=i[0],n=i[1];return e[r]=n,e},{})},eb=["children","innerProps"],ew=["children","innerProps"],eC=function(e){return"auto"===e?"bottom":e},ex=(0,c.createContext)(null),eS=function(e){var t=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,n=e.menuPlacement,o=e.menuPosition,s=e.menuShouldScrollIntoView,a=e.theme,l=((0,c.useContext)(ex)||{}).setPortalPlacement,u=(0,c.useRef)(null),d=(0,c.useState)(r),h=(0,C.default)(d,2),p=h[0],g=h[1],m=(0,c.useState)(null),v=(0,C.default)(m,2),y=v[0],b=v[1],w=a.spacing.controlHeight;return et(function(){var e=u.current;if(e){var t="fixed"===o,a=function(e){var t,i=e.maxHeight,r=e.menuEl,n=e.minHeight,o=e.placement,s=e.shouldScroll,a=e.isFixedPosition,l=e.controlHeight,u=function(e){var t=getComputedStyle(e),i="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var n=e;n=n.parentElement;)if(t=getComputedStyle(n),(!i||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return n;return document.documentElement}(r),d={placement:"bottom",maxHeight:i};if(!r||!r.offsetParent)return d;var c=u.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,f=h.height,g=h.top,m=r.offsetParent.getBoundingClientRect().top,v=a||el(t=u)?window.innerHeight:t.clientHeight,y=eu(u),b=parseInt(getComputedStyle(r).marginBottom,10),w=parseInt(getComputedStyle(r).marginTop,10),C=m-w,x=v-g,S=C+y,k=c-y-g,R=p-v+y+b,E=y+g-w;switch(o){case"auto":case"bottom":if(x>=f)return{placement:"bottom",maxHeight:i};if(k>=f&&!a)return s&&ec(u,R,160),{placement:"bottom",maxHeight:i};if(!a&&k>=n||a&&x>=n)return s&&ec(u,R,160),{placement:"bottom",maxHeight:a?x-b:k-b};if("auto"===o||a){var P=i,M=a?C:S;return M>=n&&(P=Math.min(M-b-l,i)),{placement:"top",maxHeight:P}}if("bottom"===o)return s&&ed(u,R),{placement:"bottom",maxHeight:i};break;case"top":if(C>=f)return{placement:"top",maxHeight:i};if(S>=f&&!a)return s&&ec(u,E,160),{placement:"top",maxHeight:i};if(!a&&S>=n||a&&C>=n){var D=i;return(!a&&S>=n||a&&C>=n)&&(D=a?C-w:S-w),s&&ec(u,E,160),{placement:"top",maxHeight:D}}return{placement:"bottom",maxHeight:i};default:throw Error('Invalid placement provided "'.concat(o,'".'))}return d}({maxHeight:r,menuEl:e,minHeight:i,placement:n,shouldScroll:s&&!t,isFixedPosition:t,controlHeight:w});g(a.maxHeight),b(a.placement),null==l||l(a.placement)}},[r,n,o,s,i,l,w]),t({ref:u,placerProps:(0,f.default)((0,f.default)({},e),{},{placement:y||eC(n),maxHeight:p})})},ek=function(e,t){var i=e.theme,r=i.spacing.baseUnit,n=i.colors;return(0,f.default)({textAlign:"center"},t?{}:{color:n.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},eR=["size"],eE=["innerProps","isRtl","size"],eP={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},eM=function(e){var t=e.size,i=(0,x.default)(e,eR);return(0,w.jsx)("svg",(0,p.default)({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:eP},i))},eD=function(e){return(0,w.jsx)(eM,(0,p.default)({size:20},e),(0,w.jsx)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},eT=function(e){return(0,w.jsx)(eM,(0,p.default)({size:20},e),(0,w.jsx)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},eO=function(e,t){var i=e.isFocused,r=e.theme,n=r.spacing.baseUnit,o=r.colors;return(0,f.default)({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:i?o.neutral60:o.neutral20,padding:2*n,":hover":{color:i?o.neutral80:o.neutral40}})},e_=(0,w.keyframes)(r||(t=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],i||(i=t.slice(0)),r=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(i)}})))),eA=function(e){var t=e.delay,i=e.offset;return(0,w.jsx)("span",{css:(0,w.css)({animation:"".concat(e_," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},eF=["data"],eI=["innerRef","isDisabled","isHidden","inputClassName"],eL={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},eN={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":(0,f.default)({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},eL)},eB=function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",i,t)},eV={ClearIndicator:function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),t||(0,w.jsx)(eD,null))},Control:function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,n=e.innerRef,o=e.innerProps,s=e.menuIsOpen;return(0,w.jsx)("div",(0,p.default)({ref:n},ea(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":s}),o,{"aria-disabled":i||void 0}),t)},DropdownIndicator:function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),t||(0,w.jsx)(eT,null))},DownChevron:eT,CrossIcon:eD,Group:function(e){var t=e.children,i=e.cx,r=e.getStyles,n=e.getClassNames,o=e.Heading,s=e.headingProps,a=e.innerProps,l=e.label,u=e.theme,d=e.selectProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"group",{group:!0}),a),(0,w.jsx)(o,(0,p.default)({},s,{selectProps:d,theme:u,getStyles:r,getClassNames:n,cx:i}),l),(0,w.jsx)("div",null,t))},GroupHeading:function(e){var t=es(e);t.data;var i=(0,x.default)(t,eF);return(0,w.jsx)("div",(0,p.default)({},ea(e,"groupHeading",{"group-heading":!0}),i))},IndicatorsContainer:function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"indicatorsContainer",{indicators:!0}),i),t)},IndicatorSeparator:function(e){var t=e.innerProps;return(0,w.jsx)("span",(0,p.default)({},t,ea(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,i=e.value,r=es(e),n=r.innerRef,o=r.isDisabled,s=r.isHidden,a=r.inputClassName,l=(0,x.default)(r,eI);return(0,w.jsx)("div",(0,p.default)({},ea(e,"input",{"input-container":!0}),{"data-value":i||""}),(0,w.jsx)("input",(0,p.default)({className:t({input:!0},a),ref:n,style:(0,f.default)({label:"input",color:"inherit",background:0,opacity:+!s,width:"100%"},eL),disabled:o},l)))},LoadingIndicator:function(e){var t=e.innerProps,i=e.isRtl,r=e.size,n=(0,x.default)(e,eE);return(0,w.jsx)("div",(0,p.default)({},ea((0,f.default)((0,f.default)({},n),{},{innerProps:t,isRtl:i,size:void 0===r?4:r}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),(0,w.jsx)(eA,{delay:0,offset:i}),(0,w.jsx)(eA,{delay:160,offset:!0}),(0,w.jsx)(eA,{delay:320,offset:!i}))},Menu:function(e){var t=e.children,i=e.innerRef,r=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"menu",{menu:!0}),{ref:i},r),t)},MenuList:function(e){var t=e.children,i=e.innerProps,r=e.innerRef,n=e.isMulti;return(0,w.jsx)("div",(0,p.default)({},ea(e,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:r},i),t)},MenuPortal:function(e){var t=e.appendTo,i=e.children,r=e.controlElement,n=e.innerProps,o=e.menuPlacement,s=e.menuPosition,a=(0,c.useRef)(null),l=(0,c.useRef)(null),u=(0,c.useState)(eC(o)),d=(0,C.default)(u,2),h=d[0],g=d[1],m=(0,c.useMemo)(function(){return{setPortalPlacement:g}},[]),v=(0,c.useState)(null),y=(0,C.default)(v,2),b=y[0],x=y[1],S=(0,c.useCallback)(function(){if(r){var e,t={bottom:(e=r.getBoundingClientRect()).bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width},i="fixed"===s?0:window.pageYOffset,n=t[h]+i;(n!==(null==b?void 0:b.offset)||t.left!==(null==b?void 0:b.rect.left)||t.width!==(null==b?void 0:b.rect.width))&&x({offset:n,rect:t})}},[r,s,h,null==b?void 0:b.offset,null==b?void 0:b.rect.left,null==b?void 0:b.rect.width]);et(function(){S()},[S]);var k=(0,c.useCallback)(function(){"function"==typeof l.current&&(l.current(),l.current=null),r&&a.current&&(l.current=function(e,t,i,r){let n;void 0===r&&(r={});let{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:u=!1}=r,d=Q(e),c=o||s?[...d?q(d):[],...q(t)]:[];c.forEach(e=>{o&&e.addEventListener("scroll",i,{passive:!0}),s&&e.addEventListener("resize",i)});let h=d&&l?function(e,t){let i,r=null,n=I(e);function o(){var e;clearTimeout(i),null==(e=r)||e.disconnect(),r=null}return!function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();let u=e.getBoundingClientRect(),{left:d,top:c,width:h,height:p}=u;if(a||t(),!h||!p)return;let f={rootMargin:-D(c)+"px "+-D(n.clientWidth-(d+h))+"px "+-D(n.clientHeight-(c+p))+"px "+-D(d)+"px",threshold:P(0,E(1,l))||1},g=!0;function m(t){let r=t[0].intersectionRatio;if(r!==l){if(!g)return s();r?s(!1,r):i=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||ee(u,e.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(m,{...f,root:n.ownerDocument})}catch(e){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),o}(d,i):null,p=-1,f=null;a&&(f=new ResizeObserver(e=>{let[r]=e;r&&r.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=f)||e.observe(t)})),i()}),d&&!u&&f.observe(d),f.observe(t));let g=u?J(e):null;return u&&function t(){let r=J(e);g&&!ee(g,r)&&i(),g=r,n=requestAnimationFrame(t)}(),i(),()=>{var e;c.forEach(e=>{o&&e.removeEventListener("scroll",i),s&&e.removeEventListener("resize",i)}),null==h||h(),null==(e=f)||e.disconnect(),f=null,u&&cancelAnimationFrame(n)}}(r,a.current,S,{elementResize:"ResizeObserver"in window}))},[r,S]);et(function(){k()},[k]);var M=(0,c.useCallback)(function(e){a.current=e,k()},[k]);if(!t&&"fixed"!==s||!b)return null;var T=(0,w.jsx)("div",(0,p.default)({ref:M},ea((0,f.default)((0,f.default)({},e),{},{offset:b.offset,position:s,rect:b.rect}),"menuPortal",{"menu-portal":!0}),n),i);return(0,w.jsx)(ex.Provider,{value:m},t?(0,R.createPortal)(T,t):T)},LoadingMessage:function(e){var t=e.children,i=void 0===t?"Loading...":t,r=e.innerProps,n=(0,x.default)(e,ew);return(0,w.jsx)("div",(0,p.default)({},ea((0,f.default)((0,f.default)({},n),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},NoOptionsMessage:function(e){var t=e.children,i=void 0===t?"No options":t,r=e.innerProps,n=(0,x.default)(e,eb);return(0,w.jsx)("div",(0,p.default)({},ea((0,f.default)((0,f.default)({},n),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},MultiValue:function(e){var t=e.children,i=e.components,r=e.data,n=e.innerProps,o=e.isDisabled,s=e.removeProps,a=e.selectProps,l=i.Container,u=i.Label,d=i.Remove;return(0,w.jsx)(l,{data:r,innerProps:(0,f.default)((0,f.default)({},ea(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),n),selectProps:a},(0,w.jsx)(u,{data:r,innerProps:(0,f.default)({},ea(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),(0,w.jsx)(d,{data:r,innerProps:(0,f.default)((0,f.default)({},ea(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:a}))},MultiValueContainer:eB,MultiValueLabel:eB,MultiValueRemove:function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",(0,p.default)({role:"button"},i),t||(0,w.jsx)(eD,{size:14}))},Option:function(e){var t=e.children,i=e.isDisabled,r=e.isFocused,n=e.isSelected,o=e.innerRef,s=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":n}),{ref:o,"aria-disabled":i},s),t)},Placeholder:function(e){var t=e.children,i=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"placeholder",{placeholder:!0}),i),t)},SelectContainer:function(e){var t=e.children,i=e.innerProps,r=e.isDisabled,n=e.isRtl;return(0,w.jsx)("div",(0,p.default)({},ea(e,"container",{"--is-disabled":r,"--is-rtl":n}),i),t)},SingleValue:function(e){var t=e.children,i=e.isDisabled,r=e.innerProps;return(0,w.jsx)("div",(0,p.default)({},ea(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),t)},ValueContainer:function(e){var t=e.children,i=e.innerProps,r=e.isMulti,n=e.hasValue;return(0,w.jsx)("div",(0,p.default)({},ea(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":n}),i),t)}},eH=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function ez(e,t){if(e.length!==t.length)return!1;for(var i,r,n=0;n<e.length;n++)if(!((i=e[n])===(r=t[n])||eH(i)&&eH(r))&&1)return!1;return!0}for(var ej={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},eG=function(e){return(0,w.jsx)("span",(0,p.default)({css:ej},e))},eW={guidance:function(e){var t=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,n=e.context,o=e.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,i=e.label,r=void 0===i?"":i,n=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var t=e.context,i=e.focused,r=e.options,n=e.label,o=void 0===n?"":n,s=e.selectValue,a=e.isDisabled,l=e.isSelected,u=e.isAppleDevice,d=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(o," focused, ").concat(d(s,i),".");if("menu"===t&&u){var c="".concat(l?" selected":"").concat(a?" disabled":"");return"".concat(o).concat(c,", ").concat(d(r,i),".")}return""},onFilter:function(e){var t=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(t?" for search term "+t:"",".")}},eU=function(e){var t=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,n=e.focusableOptions,o=e.isFocused,s=e.selectValue,a=e.selectProps,l=e.id,u=e.isAppleDevice,d=a.ariaLiveMessages,h=a.getOptionLabel,p=a.inputValue,g=a.isMulti,m=a.isOptionDisabled,v=a.isSearchable,y=a.menuIsOpen,b=a.options,C=a.screenReaderStatus,x=a.tabSelectsValue,S=a.isLoading,k=a["aria-label"],R=a["aria-live"],E=(0,c.useMemo)(function(){return(0,f.default)((0,f.default)({},eW),d||{})},[d]),P=(0,c.useMemo)(function(){var e="";if(t&&E.onChange){var i=t.option,r=t.options,n=t.removedValue,o=t.removedValues,a=t.value,l=n||i||(Array.isArray(a)?null:a),u=l?h(l):"",d=r||o||void 0,c=d?d.map(h):[],p=(0,f.default)({isDisabled:l&&m(l,s),label:u,labels:c},t);e=E.onChange(p)}return e},[t,E,m,s,h]),M=(0,c.useMemo)(function(){var e="",t=i||r,o=!!(i&&s&&s.includes(i));if(t&&E.onFocus){var a={focused:t,label:h(t),isDisabled:m(t,s),isSelected:o,options:n,context:t===i?"menu":"value",selectValue:s,isAppleDevice:u};e=E.onFocus(a)}return e},[i,r,h,m,E,n,s,u]),D=(0,c.useMemo)(function(){var e="";if(y&&b.length&&!S&&E.onFilter){var t=C({count:n.length});e=E.onFilter({inputValue:p,resultsMessage:t})}return e},[n,p,y,E,b,C,S]),T=(null==t?void 0:t.action)==="initial-input-focus",O=(0,c.useMemo)(function(){var e="";if(E.guidance){var t=r?"value":y?"menu":"input";e=E.guidance({"aria-label":k,context:t,isDisabled:i&&m(i,s),isMulti:g,isSearchable:v,tabSelectsValue:x,isInitialFocus:T})}return e},[k,i,r,g,m,v,y,E,s,x,T]),_=(0,w.jsx)(c.Fragment,null,(0,w.jsx)("span",{id:"aria-selection"},P),(0,w.jsx)("span",{id:"aria-focused"},M),(0,w.jsx)("span",{id:"aria-results"},D),(0,w.jsx)("span",{id:"aria-guidance"},O));return(0,w.jsx)(c.Fragment,null,(0,w.jsx)(eG,{id:l},T&&_),(0,w.jsx)(eG,{"aria-live":R,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!T&&_))},e$=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],eq=RegExp("["+e$.map(function(e){return e.letters}).join("")+"]","g"),eK={},eQ=0;eQ<e$.length;eQ++)for(var eX=e$[eQ],eY=0;eY<eX.letters.length;eY++)eK[eX.letters[eY]]=eX.base;var eZ=function(e){return e.replace(eq,function(e){return eK[e]})},eJ=function(e,t){void 0===t&&(t=ez);var i=null;function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(i&&i.lastThis===this&&t(r,i.lastArgs))return i.lastResult;var o=e.apply(this,r);return i={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){i=null},r}(eZ),e0=function(e){return e.replace(/^\s+|\s+$/g,"")},e1=function(e){return"".concat(e.label," ").concat(e.value)},e2=["innerRef"];function e5(e){var t=e.innerRef,i=ey((0,x.default)(e,e2),"onExited","in","enter","exit","appear");return(0,w.jsx)("input",(0,p.default)({ref:t},i,{css:(0,w.css)({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var e3=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()},e4=["boxSizing","height","overflow","paddingRight","position"],e8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function e6(e){e.cancelable&&e.preventDefault()}function e7(e){e.stopPropagation()}function e9(){var e=this.scrollTop,t=this.scrollHeight,i=e+this.offsetHeight;0===e?this.scrollTop=1:i===t&&(this.scrollTop=e-1)}function te(){return"ontouchstart"in window||navigator.maxTouchPoints}var tt=!!("undefined"!=typeof window&&window.document&&window.document.createElement),ti=0,tr={capture:!1,passive:!1},tn=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},to={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ts(e){var t,i,r,n,o,s,a,l,u,d,h,p,f,g,m,v,y,b,C,x,S,k,R,E,P=e.children,M=e.lockEnabled,D=e.captureEnabled,T=(i=(t={isEnabled:void 0===D||D,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}).isEnabled,r=t.onBottomArrive,n=t.onBottomLeave,o=t.onTopArrive,s=t.onTopLeave,a=(0,c.useRef)(!1),l=(0,c.useRef)(!1),u=(0,c.useRef)(0),d=(0,c.useRef)(null),h=(0,c.useCallback)(function(e,t){if(null!==d.current){var i=d.current,u=i.scrollTop,c=i.scrollHeight,h=i.clientHeight,p=d.current,f=t>0,g=c-h-u,m=!1;g>t&&a.current&&(n&&n(e),a.current=!1),f&&l.current&&(s&&s(e),l.current=!1),f&&t>g?(r&&!a.current&&r(e),p.scrollTop=c,m=!0,a.current=!0):!f&&-t>u&&(o&&!l.current&&o(e),p.scrollTop=0,m=!0,l.current=!0),m&&e3(e)}},[r,n,o,s]),p=(0,c.useCallback)(function(e){h(e,e.deltaY)},[h]),f=(0,c.useCallback)(function(e){u.current=e.changedTouches[0].clientY},[]),g=(0,c.useCallback)(function(e){var t=u.current-e.changedTouches[0].clientY;h(e,t)},[h]),m=(0,c.useCallback)(function(e){if(e){var t=!!em&&{passive:!1};e.addEventListener("wheel",p,t),e.addEventListener("touchstart",f,t),e.addEventListener("touchmove",g,t)}},[g,f,p]),v=(0,c.useCallback)(function(e){e&&(e.removeEventListener("wheel",p,!1),e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",g,!1))},[g,f,p]),(0,c.useEffect)(function(){if(i){var e=d.current;return m(e),function(){v(e)}}},[i,m,v]),function(e){d.current=e}),O=(b=(y={isEnabled:M}).isEnabled,x=void 0===(C=y.accountForScrollbars)||C,S=(0,c.useRef)({}),k=(0,c.useRef)(null),R=(0,c.useCallback)(function(e){if(tt){var t=document.body,i=t&&t.style;if(x&&e4.forEach(function(e){var t=i&&i[e];S.current[e]=t}),x&&ti<1){var r=parseInt(S.current.paddingRight,10)||0,n=document.body?document.body.clientWidth:0,o=window.innerWidth-n+r||0;Object.keys(e8).forEach(function(e){var t=e8[e];i&&(i[e]=t)}),i&&(i.paddingRight="".concat(o,"px"))}t&&te()&&(t.addEventListener("touchmove",e6,tr),e&&(e.addEventListener("touchstart",e9,tr),e.addEventListener("touchmove",e7,tr))),ti+=1}},[x]),E=(0,c.useCallback)(function(e){if(tt){var t=document.body,i=t&&t.style;ti=Math.max(ti-1,0),x&&ti<1&&e4.forEach(function(e){var t=S.current[e];i&&(i[e]=t)}),t&&te()&&(t.removeEventListener("touchmove",e6,tr),e&&(e.removeEventListener("touchstart",e9,tr),e.removeEventListener("touchmove",e7,tr)))}},[x]),(0,c.useEffect)(function(){if(b){var e=k.current;return R(e),function(){E(e)}}},[b,R,E]),function(e){k.current=e});return(0,w.jsx)(c.Fragment,null,M&&(0,w.jsx)("div",{onClick:tn,css:to}),P(function(e){T(e),O(e)}))}var ta={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},tl=function(e){var t=e.name,i=e.onFocus;return(0,w.jsx)("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:ta,value:"",onChange:function(){}})};function tu(e){var t;return"undefined"!=typeof window&&null!=window.navigator&&e.test((null==(t=window.navigator.userAgentData)?void 0:t.platform)||window.navigator.platform)}var td={clearIndicator:eO,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var i=e.isDisabled,r=e.isFocused,n=e.theme,o=n.colors,s=n.borderRadius,a=n.spacing;return(0,f.default)({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:eO,group:function(e,t){var i=e.theme.spacing;return t?{}:{paddingBottom:2*i.baseUnit,paddingTop:2*i.baseUnit}},groupHeading:function(e,t){var i=e.theme,r=i.colors,n=i.spacing;return(0,f.default)({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*n.baseUnit,paddingRight:3*n.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var i=e.isDisabled,r=e.theme,n=r.spacing.baseUnit,o=r.colors;return(0,f.default)({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:2*n,marginTop:2*n})},input:function(e,t){var i=e.isDisabled,r=e.value,n=e.theme,o=n.spacing,s=n.colors;return(0,f.default)((0,f.default)({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},eN),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var i=e.isFocused,r=e.size,n=e.theme,o=n.colors,s=n.spacing.baseUnit;return(0,f.default)({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:i?o.neutral60:o.neutral20,padding:2*s})},loadingMessage:ek,menu:function(e,t){var i,r=e.placement,n=e.theme,o=n.borderRadius,s=n.spacing,a=n.colors;return(0,f.default)((i={label:"menu"},(0,k.default)(i,r?({bottom:"top",top:"bottom"})[r]:"bottom","100%"),(0,k.default)(i,"position","absolute"),(0,k.default)(i,"width","100%"),(0,k.default)(i,"zIndex",1),i),t?{}:{backgroundColor:a.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return(0,f.default)({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,i=e.offset,r=e.position;return{left:t.left,position:r,top:i,width:t.width,zIndex:1}},multiValue:function(e,t){var i=e.theme,r=i.spacing,n=i.borderRadius,o=i.colors;return(0,f.default)({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:n/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var i=e.theme,r=i.borderRadius,n=i.colors,o=e.cropWithEllipsis;return(0,f.default)({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:n.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var i=e.theme,r=i.spacing,n=i.borderRadius,o=i.colors,s=e.isFocused;return(0,f.default)({alignItems:"center",display:"flex"},t?{}:{borderRadius:n/2,backgroundColor:s?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:ek,option:function(e,t){var i=e.isDisabled,r=e.isFocused,n=e.isSelected,o=e.theme,s=o.spacing,a=o.colors;return(0,f.default)({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:n?a.primary:r?a.primary25:"transparent",color:i?a.neutral20:n?a.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:i?void 0:n?a.primary:a.primary50}})},placeholder:function(e,t){var i=e.theme,r=i.spacing,n=i.colors;return(0,f.default)({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:n.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var i=e.isDisabled,r=e.theme,n=r.spacing,o=r.colors;return(0,f.default)({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:i?o.neutral40:o.neutral80,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},valueContainer:function(e,t){var i=e.theme.spacing,r=e.isMulti,n=e.hasValue,o=e.selectProps.controlShouldRenderValue;return(0,f.default)({alignItems:"center",display:r&&n&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(2*i.baseUnit,"px")})}},tc={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},th={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ep(),captureMenuScroll:!ep(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var i=(0,f.default)({ignoreCase:!0,ignoreAccents:!0,stringify:e1,trim:!0,matchFrom:"any"},void 0),r=i.ignoreCase,n=i.ignoreAccents,o=i.stringify,s=i.trim,a=i.matchFrom,l=s?e0(t):t,u=s?e0(o(e)):o(e);return r&&(l=l.toLowerCase(),u=u.toLowerCase()),n&&(l=eJ(l),u=eZ(u)),"start"===a?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function tp(e,t,i,r){var n=tC(e,t,i),o=tx(e,t,i),s=tb(e,t),a=tw(e,t);return{type:"option",data:t,isDisabled:n,isSelected:o,label:s,value:a,index:r}}function tf(e,t){return e.options.map(function(i,r){if("options"in i){var n=i.options.map(function(i,r){return tp(e,i,t,r)}).filter(function(t){return tv(e,t)});return n.length>0?{type:"group",data:i,options:n,index:r}:void 0}var o=tp(e,i,t,r);return tv(e,o)?o:void 0}).filter(ev)}function tg(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,(0,b.default)(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function tm(e,t){return e.reduce(function(e,i){return"group"===i.type?e.push.apply(e,(0,b.default)(i.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(i.index,"-").concat(e.index)}}))):e.push({data:i.data,id:"".concat(t,"-").concat(i.index)}),e},[])}function tv(e,t){var i=e.inputValue,r=t.data,n=t.isSelected,o=t.label,s=t.value;return(!tk(e)||!n)&&tS(e,{label:o,value:s,data:r},void 0===i?"":i)}var ty=function(e,t){var i;return(null==(i=e.find(function(e){return e.data===t}))?void 0:i.id)||null},tb=function(e,t){return e.getOptionLabel(t)},tw=function(e,t){return e.getOptionValue(t)};function tC(e,t,i){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,i)}function tx(e,t,i){if(i.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,i);var r=tw(e,t);return i.some(function(t){return tw(e,t)===r})}function tS(e,t,i){return!e.filterOption||e.filterOption(t,i)}var tk=function(e){var t=e.hideSelectedOptions,i=e.isMulti;return void 0===t?i:t},tR=1,tE=function(e){(0,v.default)(i,e);var t=(0,y.default)(i);function i(e){var r;if((0,g.default)(this,i),(r=t.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(e){r.controlRef=e},r.focusedOptionRef=null,r.getFocusedOptionRef=function(e){r.focusedOptionRef=e},r.menuListRef=null,r.getMenuListRef=function(e){r.menuListRef=e},r.inputRef=null,r.getInputRef=function(e){r.inputRef=e},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(e,t){var i=r.props,n=i.onChange;t.name=i.name,r.ariaOnChange(e,t),n(e,t)},r.setValue=function(e,t,i){var n=r.props,o=n.closeMenuOnSelect,s=n.isMulti,a=n.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:a}),o&&(r.setState({inputIsHiddenAfterUpdate:!s}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(e,{action:t,option:i})},r.selectOption=function(e){var t=r.props,i=t.blurInputOnSelect,n=t.isMulti,o=t.name,s=r.state.selectValue,a=n&&r.isOptionSelected(e,s),l=r.isOptionDisabled(e,s);if(a){var u=r.getOptionValue(e);r.setValue(s.filter(function(e){return r.getOptionValue(e)!==u}),"deselect-option",e)}else{if(l)return void r.ariaOnChange(e,{action:"select-option",option:e,name:o});n?r.setValue([].concat((0,b.default)(s),[e]),"select-option",e):r.setValue(e,"select-option")}i&&r.blurInput()},r.removeValue=function(e){var t,i=r.props.isMulti,n=r.state.selectValue,o=r.getOptionValue(e),s=n.filter(function(e){return r.getOptionValue(e)!==o}),a=(t=s[0]||null,i?s:t);r.onChange(a,{action:"remove-value",removedValue:e}),r.focusInput()},r.clearValue=function(){var e,t,i=r.state.selectValue;r.onChange((e=r.props.isMulti,t=[],e?t:null),{action:"clear",removedValues:i})},r.popValue=function(){var e,t=r.props.isMulti,i=r.state.selectValue,n=i[i.length-1],o=i.slice(0,i.length-1),s=(e=o[0]||null,t?o:e);n&&r.onChange(s,{action:"pop-value",removedValue:n})},r.getFocusedOptionId=function(e){return ty(r.state.focusableOptionsWithIds,e)},r.getFocusableOptionsWithIds=function(){return tm(tf(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return en.apply(void 0,[r.props.classNamePrefix].concat(t))},r.getOptionLabel=function(e){return tb(r.props,e)},r.getOptionValue=function(e){return tw(r.props,e)},r.getStyles=function(e,t){var i=r.props.unstyled,n=td[e](t,i);n.boxSizing="border-box";var o=r.props.styles[e];return o?o(n,t):n},r.getClassNames=function(e,t){var i,n;return null==(i=(n=r.props.classNames)[e])?void 0:i.call(n,t)},r.getElementId=function(e){return"".concat(r.state.instancePrefix,"-").concat(e)},r.getComponents=function(){var e;return e=r.props,(0,f.default)((0,f.default)({},eV),e.components)},r.buildCategorizedOptions=function(){return tf(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return tg(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(e,t){r.setState({ariaSelection:(0,f.default)({value:e},t)})},r.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(e){r.blockOptionHover=!1},r.onControlMouseDown=function(e){if(!e.defaultPrevented){var t=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&r.onMenuClose():t&&r.openMenu("first"):(t&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},r.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!r.props.isDisabled){var t=r.props,i=t.isMulti,n=t.menuIsOpen;r.focusInput(),n?(r.setState({inputIsHiddenAfterUpdate:!i}),r.onMenuClose()):r.openMenu("first"),e.preventDefault()}},r.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(r.clearValue(),e.preventDefault(),r.openAfterFocus=!1,"touchend"===e.type?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(e){"boolean"==typeof r.props.closeMenuOnScroll?e.target instanceof HTMLElement&&el(e.target)&&r.props.onMenuClose():"function"==typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(e)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(e){var t=e.touches,i=t&&t.item(0);i&&(r.initialTouchX=i.clientX,r.initialTouchY=i.clientY,r.userIsDragging=!1)},r.onTouchMove=function(e){var t=e.touches,i=t&&t.item(0);if(i){var n=Math.abs(i.clientX-r.initialTouchX),o=Math.abs(i.clientY-r.initialTouchY);r.userIsDragging=n>5||o>5}},r.onTouchEnd=function(e){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(e.target)&&r.menuListRef&&!r.menuListRef.contains(e.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(e){r.userIsDragging||r.onControlMouseDown(e)},r.onClearIndicatorTouchEnd=function(e){r.userIsDragging||r.onClearIndicatorMouseDown(e)},r.onDropdownIndicatorTouchEnd=function(e){r.userIsDragging||r.onDropdownIndicatorMouseDown(e)},r.handleInputChange=function(e){var t=r.props.inputValue,i=e.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(i,{action:"input-change",prevInputValue:t}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(e){r.props.onFocus&&r.props.onFocus(e),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(e){var t=r.props.inputValue;r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(e),r.onInputChange("",{action:"input-blur",prevInputValue:t}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(e){if(!r.blockOptionHover&&r.state.focusedOption!==e){var t=r.getFocusableOptions().indexOf(e);r.setState({focusedOption:e,focusedOptionId:t>-1?r.getFocusedOptionId(e):null})}},r.shouldHideSelectedOptions=function(){return tk(r.props)},r.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),r.focus()},r.onKeyDown=function(e){var t=r.props,i=t.isMulti,n=t.backspaceRemovesValue,o=t.escapeClearsValue,s=t.inputValue,a=t.isClearable,l=t.isDisabled,u=t.menuIsOpen,d=t.onKeyDown,c=t.tabSelectsValue,h=t.openMenuOnFocus,p=r.state,f=p.focusedOption,g=p.focusedValue,m=p.selectValue;if(!l){if("function"==typeof d&&(d(e),e.defaultPrevented))return;switch(r.blockOptionHover=!0,e.key){case"ArrowLeft":if(!i||s)return;r.focusValue("previous");break;case"ArrowRight":if(!i||s)return;r.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(g)r.removeValue(g);else{if(!n)return;i?r.popValue():a&&r.clearValue()}break;case"Tab":if(r.isComposing||e.shiftKey||!u||!c||!f||h&&r.isOptionSelected(f,m))return;r.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(u){if(!f||r.isComposing)return;r.selectOption(f);break}return;case"Escape":u?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:s}),r.onMenuClose()):a&&o&&r.clearValue();break;case" ":if(s)return;if(!u){r.openMenu("first");break}if(!f)return;r.selectOption(f);break;case"ArrowUp":u?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":u?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!u)return;r.focusOption("pageup");break;case"PageDown":if(!u)return;r.focusOption("pagedown");break;case"Home":if(!u)return;r.focusOption("first");break;case"End":if(!u)return;r.focusOption("last");break;default:return}e.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++tR),r.state.selectValue=eo(e.value),e.menuIsOpen&&r.state.selectValue.length){var n=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),s=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=n,r.state.focusedOption=o[s],r.state.focusedOptionId=ty(n,o[s])}return r}return(0,m.default)(i,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&eh(this.menuListRef,this.focusedOptionRef),(tu(/^Mac/i)||tu(/^iPhone/i)||tu(/^iPad/i)||tu(/^Mac/i)&&navigator.maxTouchPoints>1)&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,i=t.isDisabled,r=t.menuIsOpen,n=this.state.isFocused;(n&&!i&&e.isDisabled||n&&r&&!e.menuIsOpen)&&this.focusInput(),n&&i&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):n||i||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(eh(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,i=this.state,r=i.selectValue,n=i.isFocused,o=this.buildFocusableOptions(),s="first"===e?0:o.length-1;if(!this.props.isMulti){var a=o.indexOf(r[0]);a>-1&&(s=a)}this.scrollToFocusedOptionOnUpdate=!(n&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[s],focusedOptionId:this.getFocusedOptionId(o[s])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,i=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var n=i.indexOf(r);r||(n=-1);var o=i.length-1,s=-1;if(i.length){switch(e){case"previous":s=0===n?0:-1===n?o:n-1;break;case"next":n>-1&&n<o&&(s=n+1)}this.setState({inputIsHidden:-1!==s,focusedValue:i[s]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,i=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var n=0,o=r.indexOf(i);i||(o=-1),"up"===e?n=o>0?o-1:r.length-1:"down"===e?n=(o+1)%r.length:"pageup"===e?(n=o-t)<0&&(n=0):"pagedown"===e?(n=o+t)>r.length-1&&(n=r.length-1):"last"===e&&(n=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[n],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[n])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(tc):(0,f.default)((0,f.default)({},tc),this.props.theme):tc}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,i=this.getStyles,r=this.getClassNames,n=this.getValue,o=this.selectOption,s=this.setValue,a=this.props,l=a.isMulti,u=a.isRtl,d=a.options;return{clearValue:e,cx:t,getStyles:i,getClassNames:r,getValue:n,hasValue:this.hasValue(),isMulti:l,isRtl:u,options:d,selectOption:o,selectProps:a,setValue:s,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,i=e.isMulti;return void 0===t?i:t}},{key:"isOptionDisabled",value:function(e,t){return tC(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return tx(this.props,e,t)}},{key:"filterOption",value:function(e,t){return tS(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(e);var i=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:i,selectValue:r})}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,i=e.isSearchable,r=e.inputId,n=e.inputValue,o=e.tabIndex,s=e.form,a=e.menuIsOpen,l=e.required,u=this.getComponents().Input,d=this.state,h=d.inputIsHidden,g=d.ariaSelection,m=this.commonProps,v=r||this.getElementId("input"),y=(0,f.default)((0,f.default)((0,f.default)({"aria-autocomplete":"list","aria-expanded":a,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":l,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},a&&{"aria-controls":this.getElementId("listbox")}),!i&&{"aria-readonly":!0}),this.hasValue()?(null==g?void 0:g.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return i?c.createElement(u,(0,p.default)({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:v,innerRef:this.getInputRef,isDisabled:t,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:s,type:"text",value:n},y)):c.createElement(e5,(0,p.default)({id:v,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:er,onFocus:this.onInputFocus,disabled:t,tabIndex:o,inputMode:"none",form:s,value:""},y))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),i=t.MultiValue,r=t.MultiValueContainer,n=t.MultiValueLabel,o=t.MultiValueRemove,s=t.SingleValue,a=t.Placeholder,l=this.commonProps,u=this.props,d=u.controlShouldRenderValue,h=u.isDisabled,f=u.isMulti,g=u.inputValue,m=u.placeholder,v=this.state,y=v.selectValue,b=v.focusedValue,w=v.isFocused;if(!this.hasValue()||!d)return g?null:c.createElement(a,(0,p.default)({},l,{key:"placeholder",isDisabled:h,isFocused:w,innerProps:{id:this.getElementId("placeholder")}}),m);if(f)return y.map(function(t,s){var a=t===b,u="".concat(e.getOptionLabel(t),"-").concat(e.getOptionValue(t));return c.createElement(i,(0,p.default)({},l,{components:{Container:r,Label:n,Remove:o},isFocused:a,isDisabled:h,key:u,index:s,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault()}},data:t}),e.formatOptionLabel(t,"value"))});if(g)return null;var C=y[0];return c.createElement(s,(0,p.default)({},l,{data:C,isDisabled:h}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,i=this.props,r=i.isDisabled,n=i.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||n)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return c.createElement(e,(0,p.default)({},t,{innerProps:s,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,i=this.props,r=i.isDisabled,n=i.isLoading,o=this.state.isFocused;return e&&n?c.createElement(e,(0,p.default)({},t,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:o})):null}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,i=e.IndicatorSeparator;if(!t||!i)return null;var r=this.commonProps,n=this.props.isDisabled,o=this.state.isFocused;return c.createElement(i,(0,p.default)({},r,{isDisabled:n,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,i=this.props.isDisabled,r=this.state.isFocused,n={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return c.createElement(e,(0,p.default)({},t,{innerProps:n,isDisabled:i,isFocused:r}))}},{key:"renderMenu",value:function(){var e,t=this,i=this.getComponents(),r=i.Group,n=i.GroupHeading,o=i.Menu,s=i.MenuList,a=i.MenuPortal,l=i.LoadingMessage,u=i.NoOptionsMessage,d=i.Option,h=this.commonProps,f=this.state.focusedOption,g=this.props,m=g.captureMenuScroll,v=g.inputValue,y=g.isLoading,b=g.loadingMessage,w=g.minMenuHeight,C=g.maxMenuHeight,x=g.menuIsOpen,S=g.menuPlacement,k=g.menuPosition,R=g.menuPortalTarget,E=g.menuShouldBlockScroll,P=g.menuShouldScrollIntoView,M=g.noOptionsMessage,D=g.onMenuScrollToTop,T=g.onMenuScrollToBottom;if(!x)return null;var O=function(e,i){var r=e.type,n=e.data,o=e.isDisabled,s=e.isSelected,a=e.label,l=e.value,u=f===n,g=o?void 0:function(){return t.onOptionHover(n)},m=o?void 0:function(){return t.selectOption(n)},v="".concat(t.getElementId("option"),"-").concat(i),y={id:v,onClick:m,onMouseMove:g,onMouseOver:g,tabIndex:-1,role:"option","aria-selected":t.state.isAppleDevice?void 0:s};return c.createElement(d,(0,p.default)({},h,{innerProps:y,data:n,isDisabled:o,isSelected:s,key:v,label:a,type:r,value:l,isFocused:u,innerRef:u?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())e=this.getCategorizedOptions().map(function(e){if("group"===e.type){var i=e.data,o=e.options,s=e.index,a="".concat(t.getElementId("group"),"-").concat(s),l="".concat(a,"-heading");return c.createElement(r,(0,p.default)({},h,{key:a,data:i,options:o,Heading:n,headingProps:{id:l,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map(function(e){return O(e,"".concat(s,"-").concat(e.index))}))}if("option"===e.type)return O(e,"".concat(e.index))});else if(y){var _=b({inputValue:v});if(null===_)return null;e=c.createElement(l,h,_)}else{var A=M({inputValue:v});if(null===A)return null;e=c.createElement(u,h,A)}var F={minMenuHeight:w,maxMenuHeight:C,menuPlacement:S,menuPosition:k,menuShouldScrollIntoView:P},I=c.createElement(eS,(0,p.default)({},h,F),function(i){var r=i.ref,n=i.placerProps,a=n.placement,l=n.maxHeight;return c.createElement(o,(0,p.default)({},h,F,{innerRef:r,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:y,placement:a}),c.createElement(ts,{captureEnabled:m,onTopArrive:D,onBottomArrive:T,lockEnabled:E},function(i){return c.createElement(s,(0,p.default)({},h,{innerRef:function(e){t.getMenuListRef(e),i(e)},innerProps:{role:"listbox","aria-multiselectable":h.isMulti,id:t.getElementId("listbox")},isLoading:y,maxHeight:l,focusedOption:f}),e)}))});return R||"fixed"===k?c.createElement(a,(0,p.default)({},h,{appendTo:R,controlElement:this.controlRef,menuPlacement:S,menuPosition:k}),I):I}},{key:"renderFormField",value:function(){var e=this,t=this.props,i=t.delimiter,r=t.isDisabled,n=t.isMulti,o=t.name,s=t.required,a=this.state.selectValue;if(s&&!this.hasValue()&&!r)return c.createElement(tl,{name:o,onFocus:this.onValueInputFocus});if(o&&!r)if(n)if(i){var l=a.map(function(t){return e.getOptionValue(t)}).join(i);return c.createElement("input",{name:o,type:"hidden",value:l})}else{var u=a.length>0?a.map(function(t,i){return c.createElement("input",{key:"i-".concat(i),name:o,type:"hidden",value:e.getOptionValue(t)})}):c.createElement("input",{name:o,type:"hidden",value:""});return c.createElement("div",null,u)}else{var d=a[0]?this.getOptionValue(a[0]):"";return c.createElement("input",{name:o,type:"hidden",value:d})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,i=t.ariaSelection,r=t.focusedOption,n=t.focusedValue,o=t.isFocused,s=t.selectValue,a=this.getFocusableOptions();return c.createElement(eU,(0,p.default)({},e,{id:this.getElementId("live-region"),ariaSelection:i,focusedOption:r,focusedValue:n,isFocused:o,selectValue:s,focusableOptions:a,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,i=e.IndicatorsContainer,r=e.SelectContainer,n=e.ValueContainer,o=this.props,s=o.className,a=o.id,l=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused,h=this.commonProps=this.getCommonProps();return c.createElement(r,(0,p.default)({},h,{className:s,innerProps:{id:a,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:d}),this.renderLiveRegion(),c.createElement(t,(0,p.default)({},h,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:d,menuIsOpen:u}),c.createElement(n,(0,p.default)({},h,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),c.createElement(i,(0,p.default)({},h,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var i,r=t.prevProps,n=t.clearFocusValueOnUpdate,o=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,a=t.isFocused,l=t.prevWasFocused,u=t.instancePrefix,d=e.options,c=e.value,h=e.menuIsOpen,p=e.inputValue,g=e.isMulti,m=eo(c),v={};if(r&&(c!==r.value||d!==r.options||h!==r.menuIsOpen||p!==r.inputValue)){var y,b=h?tg(tf(e,m)):[],w=h?tm(tf(e,m),"".concat(u,"-option")):[],C=n?function(e,t){var i=e.focusedValue,r=e.selectValue.indexOf(i);if(r>-1){if(t.indexOf(i)>-1)return i;if(r<t.length)return t[r]}return null}(t,m):null,x=(y=t.focusedOption)&&b.indexOf(y)>-1?y:b[0],S=ty(w,x);v={selectValue:m,focusedOption:x,focusedOptionId:S,focusableOptionsWithIds:w,focusedValue:C,clearFocusValueOnUpdate:!1}}var k=null!=o&&e!==r?{inputIsHidden:o,inputIsHiddenAfterUpdate:void 0}:{},R=s,E=a&&l;return a&&!E&&(R={value:(i=m[0]||null,g?m:i),options:m,action:"initial-input-focus"},E=!l),(null==s?void 0:s.action)==="initial-input-focus"&&(R=null),(0,f.default)((0,f.default)((0,f.default)({},v),k),{},{prevProps:e,ariaSelection:R,prevWasFocused:E})}}]),i}(c.Component);tE.defaultProps=th,e.i(737050),e.i(503172);var tP=(0,c.forwardRef)(function(e,t){var i=(0,h.u)(e);return c.createElement(tE,(0,p.default)({ref:t},i))});e.s(["default",()=>tP],497647);var tM=e.i(400905);function tD({params:e,onParamsChanged:t,setIsReadyToExecute:i}){let[r,h]=(0,c.useState)(!e.columns||0===e.columns.length),p=e.model,{columns:f,isLoading:g,error:m}=(0,tM.default)(e.model);(0,c.useEffect)(()=>{i(!!p)},[p,i]);let v=f.map(e=>e.name);return g?(0,n.jsx)(o.default,{children:"Loading..."}):0===v.length||m?(0,n.jsx)(o.default,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,n.jsxs)(l.default,{spacing:5,sx:{m:"8px 24px",pb:"200px"},children:[(0,n.jsxs)(o.default,{children:[(0,n.jsx)(d.default,{variant:"body2",sx:{mb:1},children:"Model"}),(0,n.jsx)(u.default,{fullWidth:!0,size:"small",value:e.model,slotProps:{input:{readOnly:!0}}})]}),(0,n.jsxs)(o.default,{children:[(0,n.jsx)(d.default,{variant:"body2",sx:{mb:1},children:"Columns"}),(0,n.jsx)(a.default,{control:(0,n.jsx)(s.default,{checked:r,onChange:i=>{h(i.target.checked),t({...e,columns:void 0})},size:"small"}),label:"All columns",sx:{mb:"10px"}}),!r&&(0,n.jsx)(tP,{isMulti:!0,className:"no-track-pii-safe",closeMenuOnSelect:!1,options:v.map(e=>({label:e,value:e})),value:(e.columns??[]).map(e=>({label:e,value:e})),onChange:i=>{let r,n=Array.isArray(i)?i.map(e=>e.value):[];r=0===n.length?void 0:n,t({...e,columns:r})},styles:{container:e=>({...e,width:"100%"}),control:e=>({...e,minHeight:"40px"})}})]})]})}e.s(["ProfileDiffForm",()=>tD],909411);function tT(e){let{columnMap:t,primaryKeys:i,pinnedColumns:r,columnsRenderMode:n,changedOnly:o=!1,rowStats:s,excludeColumns:a=[],strictMode:l=!1}=e,u=(s?.modified??0)>0,d=[];return i.forEach(e=>{let i=t[e];if(!i){if(l)throw Error(`Primary key column "${e}" not found in columnMap`);return}d.push({key:e,name:e,columnType:i.colType,columnStatus:i.status,columnRenderMode:n[e],frozen:!0,isPrimaryKey:!0})}),r.forEach(e=>{if(i.includes(e)||a.includes(e))return;let r=t[e];if(!r){if(l)throw Error(`Pinned column "${e}" not found in columnMap`);return}d.push({key:e,name:e,columnType:r.colType,columnStatus:r.status,columnRenderMode:n[e],frozen:!0})}),Object.entries(t).forEach(([e,t])=>{var s;i.includes(e)||r.includes(e)||!a.includes(e)&&(s=t.status,o&&u&&"added"!==s&&"removed"!==s&&"modified"!==s||d.push({key:e,name:e,columnType:t.colType,columnStatus:t.status,columnRenderMode:n[e]}))}),d}function tO(e){let{columnMap:t,primaryKeys:i,pinnedColumns:r,columnsRenderMode:n,excludeColumns:o=[],strictMode:s=!1}=e,a=[];return i.forEach(e=>{let i=t[e];if(!i){if(s)throw Error(`Primary key column "${e}" not found in columnMap`);return}a.push({key:e,name:e,columnType:i.colType,columnRenderMode:n[e],frozen:!0,isPrimaryKey:!0})}),r.forEach(e=>{if(i.includes(e)||o.includes(e))return;let r=t[e];if(!r){if(s)throw Error(`Pinned column "${e}" not found in columnMap`);return}a.push({key:r.key,name:e,columnType:r.colType,columnRenderMode:n[e],frozen:!0})}),Object.entries(t).forEach(([e,t])=>{i.includes(e)||r.includes(e)||o.includes(e)||a.push({key:t.key,name:e,columnType:t.colType,columnRenderMode:n[e]})}),a}e.s(["getDisplayColumns",()=>tT,"getSimpleDisplayColumns",()=>tO],231076)},332397,e=>{"use strict";var t=e.i(435983),i=e.i(446519);function r(e){return(0,i.default)("MuiDivider",e)}let n=(0,t.default)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);e.s(["default",0,n,"getDividerUtilityClass",()=>r])},386413,e=>{"use strict";var t=e.i(332397);e.s(["dividerClasses",()=>t.default])},89035,e=>{"use strict";var t=e.i(435983),i=e.i(446519);function r(e){return(0,i.default)("MuiListItemIcon",e)}let n=(0,t.default)("MuiListItemIcon",["root","alignItemsFlexStart"]);e.s(["default",0,n,"getListItemIconUtilityClass",()=>r])},950690,e=>{"use strict";var t=e.i(89035);e.s(["listItemIconClasses",()=>t.default])},120875,e=>{"use strict";var t=e.i(435983),i=e.i(446519);function r(e){return(0,i.default)("MuiListItemText",e)}let n=(0,t.default)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);e.s(["default",0,n,"getListItemTextUtilityClass",()=>r])},263712,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(451962),o=e.i(446547),s=e.i(73205),a=e.i(519273),l=e.i(838443),u=e.i(98648),d=e.i(921301),c=e.i(723938),h=e.i(386413),p=e.i(950690),f=e.i(120875),f=f,g=e.i(435983),m=e.i(446519);function v(e){return(0,m.default)("MuiMenuItem",e)}let y=(0,g.default)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var b=e.i(19483);let w=(0,o.styled)(u.default,{shouldForwardProp:e=>(0,n.default)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.dense&&t.dense,i.divider&&t.divider,!i.disableGutters&&t.gutters]}})((0,s.default)(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${y.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${y.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${y.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${y.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${h.dividerClasses.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${h.dividerClasses.inset}`]:{marginLeft:52},[`& .${f.default.root}`]:{marginTop:0,marginBottom:0},[`& .${f.default.inset}`]:{paddingLeft:36},[`& .${p.listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${p.listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),C=t.forwardRef(function(e,n){let o,s=(0,a.useDefaultProps)({props:e,name:"MuiMenuItem"}),{autoFocus:u=!1,component:h="li",dense:p=!1,divider:f=!1,disableGutters:g=!1,focusVisibleClassName:m,role:y="menuitem",tabIndex:C,className:x,...S}=s,k=t.useContext(l.default),R=t.useMemo(()=>({dense:p||k.dense||!1,disableGutters:g}),[k.dense,p,g]),E=t.useRef(null);(0,d.default)(()=>{u&&E.current&&E.current.focus()},[u]);let P={...s,dense:R.dense,divider:f,disableGutters:g},M=(e=>{let{disabled:t,dense:i,divider:n,disableGutters:o,selected:s,classes:a}=e,l=(0,r.default)({root:["root",i&&"dense",t&&"disabled",!o&&"gutters",n&&"divider",s&&"selected"]},v,a);return{...a,...l}})(s),D=(0,c.default)(E,n);return s.disabled||(o=void 0!==C?C:-1),(0,b.jsx)(l.default.Provider,{value:R,children:(0,b.jsx)(w,{ref:D,role:y,tabIndex:o,component:h,focusVisibleClassName:(0,i.default)(M.focusVisible,m),className:(0,i.default)(M.root,x),...S,ownerState:P,classes:M})})});e.s(["default",0,C],263712)},224378,e=>{"use strict";var t=e.i(955343);function i(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M9.588 2.215A5.808 5.808 0 0 0 8 2c-.554 0-1.082.073-1.588.215l-.006.002c-.514.141-.99.342-1.432.601A6.156 6.156 0 0 0 2.82 4.98l-.002.004A5.967 5.967 0 0 0 2.21 6.41 5.986 5.986 0 0 0 2 8c0 .555.07 1.085.21 1.591a6.05 6.05 0 0 0 1.548 2.651c.37.365.774.677 1.216.94a6.1 6.1 0 0 0 1.435.609A6.02 6.02 0 0 0 8 14c.555 0 1.085-.07 1.591-.21.515-.145.99-.348 1.426-.607l.004-.002a6.16 6.16 0 0 0 2.161-2.155 5.85 5.85 0 0 0 .6-1.432l.003-.006A5.807 5.807 0 0 0 14 8c0-.554-.072-1.082-.215-1.588l-.002-.006a5.772 5.772 0 0 0-.6-1.423l-.002-.004a5.9 5.9 0 0 0-.942-1.21l-.008-.008a5.902 5.902 0 0 0-1.21-.942l-.004-.002a5.772 5.772 0 0 0-1.423-.6l-.006-.002zm4.455 9.32a7.157 7.157 0 0 1-2.516 2.508 6.966 6.966 0 0 1-1.668.71A6.984 6.984 0 0 1 8 15a6.984 6.984 0 0 1-1.86-.246 7.098 7.098 0 0 1-1.674-.711 7.3 7.3 0 0 1-1.415-1.094 7.295 7.295 0 0 1-1.094-1.415 7.098 7.098 0 0 1-.71-1.675A6.985 6.985 0 0 1 1 8c0-.643.082-1.262.246-1.86a6.968 6.968 0 0 1 .711-1.667 7.156 7.156 0 0 1 2.509-2.516 6.895 6.895 0 0 1 1.675-.704A6.808 6.808 0 0 1 8 1a6.8 6.8 0 0 1 1.86.253 6.899 6.899 0 0 1 3.083 1.805 6.903 6.903 0 0 1 1.804 3.083C14.916 6.738 15 7.357 15 8s-.084 1.262-.253 1.86a6.9 6.9 0 0 1-.704 1.674z"},child:[]}]})(e)}function r(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8 8.707l3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z"},child:[]}]})(e)}function n(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 1h12l.5.5v12l-.5.5h-12l-.5-.5v-12l.5-.5zM2 13h11V2H2v11z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4H7v3H4v1h3v3h1V8h3V7H8V4z"},child:[]}]})(e)}function o(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 1h13l.5.5v13l-.5.5h-13l-.5-.5v-13l.5-.5zM2 2v12h12V2H2zm6 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"},child:[]}]})(e)}function s(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 7v1H5V7h5z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1.5 1h12l.5.5v12l-.5.5h-12l-.5-.5v-12l.5-.5zM2 13h11V2H2v11z"},child:[]}]})(e)}function a(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4.5 1L4 1.5V3.02746C4.16417 3.00932 4.331 3 4.5 3C4.669 3 4.83583 3.00932 5 3.02746V2H14V7H12.2929L11 8.29289V7H8.97254C8.99068 7.16417 9 7.331 9 7.5C9 7.669 8.99068 7.83583 8.97254 8H10V9.5L10.8536 9.85355L12.7071 8H14.5L15 7.5V1.5L14.5 1H4.5Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6.41705 10.4288C7.37039 9.80348 8 8.72527 8 7.5C8 5.567 6.433 4 4.5 4C2.567 4 1 5.567 1 7.5C1 8.72527 1.62961 9.80348 2.58295 10.4288C2.11364 10.6498 1.68557 10.9505 1.31802 11.318C0.900156 11.7359 0.568688 12.232 0.342542 12.7779C0.180451 13.1692 0.0747425 13.5807 0.0278638 14C0.00933826 14.1657 0 14.3326 0 14.5V15H1L0.999398 14.5C0.999398 14.4784 0.999599 14.4567 1 14.4351C1.00811 13.9975 1.09823 13.5651 1.26587 13.1604C1.44179 12.7357 1.69964 12.3498 2.0247 12.0247C2.34976 11.6996 2.73566 11.4418 3.16038 11.2659C3.57088 11.0958 4.00986 11.0056 4.45387 10.9997C4.46922 10.9999 4.4846 11 4.5 11C4.5154 11 4.53078 10.9999 4.54613 10.9997C4.99014 11.0056 5.42912 11.0958 5.83962 11.2659C6.26433 11.4418 6.65024 11.6996 6.9753 12.0247C7.30036 12.3498 7.55821 12.7357 7.73413 13.1604C7.90177 13.5651 7.99189 13.9975 8 14.4351C8.0004 14.4567 8.0006 14.4784 8.0006 14.5L8 15H9V14.5C9 14.3326 8.99066 14.1657 8.97214 14C8.92526 13.5807 8.81955 13.1692 8.65746 12.7779C8.43131 12.232 8.09984 11.7359 7.68198 11.318C7.31443 10.9505 6.88636 10.6498 6.41705 10.4288ZM4.5 10C3.11929 10 2 8.88071 2 7.5C2 6.11929 3.11929 5 4.5 5C5.88071 5 7 6.11929 7 7.5C7 8.88071 5.88071 10 4.5 10Z"},child:[]}]})(e)}function l(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5.616 4.928a2.487 2.487 0 0 1-1.119.922c-.148.06-.458.138-.458.138v5.008a2.51 2.51 0 0 1 1.579 1.062c.273.412.419.895.419 1.388.008.343-.057.684-.19 1A2.485 2.485 0 0 1 3.5 15.984a2.482 2.482 0 0 1-1.388-.419A2.487 2.487 0 0 1 1.05 13c.095-.486.331-.932.68-1.283.349-.343.79-.579 1.269-.68V5.949a2.6 2.6 0 0 1-1.269-.68 2.503 2.503 0 0 1-.68-1.283 2.487 2.487 0 0 1 1.06-2.565A2.49 2.49 0 0 1 3.5 1a2.504 2.504 0 0 1 1.807.729 2.493 2.493 0 0 1 .729 1.81c.002.494-.144.978-.42 1.389zm-.756 7.861a1.5 1.5 0 0 0-.552-.579 1.45 1.45 0 0 0-.77-.21 1.495 1.495 0 0 0-1.47 1.79 1.493 1.493 0 0 0 1.18 1.179c.288.058.586.03.86-.08.276-.117.512-.312.68-.56.15-.226.235-.49.249-.76a1.51 1.51 0 0 0-.177-.78zM2.708 4.741c.247.161.536.25.83.25.271 0 .538-.075.77-.211a1.514 1.514 0 0 0 .729-1.359 1.513 1.513 0 0 0-.25-.76 1.551 1.551 0 0 0-.68-.56 1.49 1.49 0 0 0-.86-.08 1.494 1.494 0 0 0-1.179 1.18c-.058.288-.03.586.08.86.117.276.312.512.56.68zm10.329 6.296c.48.097.922.335 1.269.68.466.47.729 1.107.725 1.766.002.493-.144.977-.42 1.388a2.499 2.499 0 0 1-4.532-.899 2.5 2.5 0 0 1 1.067-2.565c.267-.183.571-.308.889-.37V5.489a1.5 1.5 0 0 0-1.5-1.499H8.687l1.269 1.27-.71.709L7.117 3.84v-.7l2.13-2.13.71.711-1.269 1.27h1.85a2.484 2.484 0 0 1 2.312 1.541c.125.302.189.628.187.957v5.548zm.557 3.509a1.493 1.493 0 0 0 .191-1.89 1.552 1.552 0 0 0-.68-.559 1.49 1.49 0 0 0-.86-.08 1.493 1.493 0 0 0-1.179 1.18 1.49 1.49 0 0 0 .08.86 1.496 1.496 0 0 0 2.448.49z"},child:[]}]})(e)}function u(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.507 12.324a7 7 0 0 0 .065-8.56A7 7 0 0 0 2 4.393V2H1v3.5l.5.5H5V5H2.811a6.008 6.008 0 1 1-.135 5.77l-.887.462a7 7 0 0 0 11.718 1.092zm-3.361-.97l.708-.707L8 7.792V4H7v4l.146.354 3 3z"},child:[]}]})(e)}function d(e){return(0,t.GenIcon)({tag:"svg",attr:{fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7.444 13.832a1 1 0 1 0 1.111-1.663 1 1 0 0 0-1.11 1.662zM8 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"},child:[]}]})(e)}function c(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.351 1.091a4.528 4.528 0 0 1 3.44 3.16c.215.724.247 1.49.093 2.23a4.583 4.583 0 0 1-4.437 3.6c-.438 0-.874-.063-1.293-.19l-.8.938-.379.175H7v1.5l-.5.5H5v1.5l-.5.5h-3l-.5-.5v-2.307l.146-.353L6.12 6.87a4.464 4.464 0 0 1-.2-1.405 4.528 4.528 0 0 1 5.431-4.375zm1.318 7.2a3.568 3.568 0 0 0 1.239-2.005l.004.005A3.543 3.543 0 0 0 9.72 2.08a3.576 3.576 0 0 0-2.8 3.4c-.01.456.07.908.239 1.33l-.11.543L2 12.404v1.6h2v-1.5l.5-.5H6v-1.5l.5-.5h1.245l.876-1.016.561-.14a3.47 3.47 0 0 0 1.269.238 3.568 3.568 0 0 0 2.218-.795zm-.838-2.732a1 1 0 1 0-1.662-1.11 1 1 0 0 0 1.662 1.11z"},child:[]}]})(e)}function h(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 5v7h-.278c-.406 0-.778-.086-1.117-.258A2.528 2.528 0 0 1 11.73 11H8.87a3.463 3.463 0 0 1-.546.828 3.685 3.685 0 0 1-.735.633c-.27.177-.565.31-.882.398a3.875 3.875 0 0 1-.985.141h-.5V9H2l-1-.5L2 8h3.222V4h.5c.339 0 .664.047.977.14.312.094.607.227.883.4A3.404 3.404 0 0 1 8.87 6h2.859a2.56 2.56 0 0 1 .875-.734c.338-.172.71-.26 1.117-.266H14zm-.778 1.086a1.222 1.222 0 0 0-.32.156 1.491 1.491 0 0 0-.43.461L12.285 7H8.183l-.117-.336a2.457 2.457 0 0 0-.711-1.047C7.027 5.331 6.427 5.09 6 5v7c.427-.088 1.027-.33 1.355-.617.328-.287.565-.636.71-1.047L8.184 10h4.102l.18.297c.057.094.122.177.195.25.073.073.153.143.242.21.088.069.195.12.32.157V6.086z"},child:[]}]})(e)}function p(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 2h7v.278c0 .406-.086.778-.258 1.117-.172.339-.42.63-.742.875v2.86c.307.145.583.328.828.546.245.219.456.464.633.735.177.27.31.565.398.882.089.318.136.646.141.985v.5H8V14l-.5 1-.5-1v-3.222H3v-.5c0-.339.047-.664.14-.977.094-.312.227-.607.4-.883A3.404 3.404 0 0 1 5 7.13V4.27a2.561 2.561 0 0 1-.734-.875A2.505 2.505 0 0 1 4 2.278V2zm1.086.778c.042.125.094.232.156.32a1.494 1.494 0 0 0 .461.43L6 3.715v4.102l-.336.117c-.411.146-.76.383-1.047.711C4.331 8.973 4.09 9.573 4 10h7c-.088-.427-.33-1.027-.617-1.355a2.456 2.456 0 0 0-1.047-.71L9 7.816V3.715l.297-.18c.094-.057.177-.122.25-.195a2.28 2.28 0 0 0 .21-.242.968.968 0 0 0 .157-.32H5.086z"},child:[]}]})(e)}e.s(["VscCircleLarge",()=>i,"VscClose",()=>r,"VscDiffAdded",()=>n,"VscDiffModified",()=>o,"VscDiffRemoved",()=>s,"VscFeedback",()=>a,"VscGitPullRequest",()=>l,"VscHistory",()=>u,"VscKebabVertical",()=>d,"VscKey",()=>c,"VscPin",()=>h,"VscPinned",()=>p])},861729,251915,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(73371),n=e.i(135301),o=e.i(263712),s=e.i(187725),a=e.i(224378);function l(e,t){return[{value:"Show raw value",onClick:()=>{t({[e]:"raw"})}},{value:"Show 2 decimal points",onClick:()=>{t({[e]:2})}},{value:"Show as percentage",onClick:()=>{t({[e]:"percent"})}},{value:"Show with net change",onClick:()=>{t({[e]:"delta"})}}]}function u({name:e,columnStatus:u,columnType:d,primaryKeys:c=[],onPrimaryKeyChange:h,pinnedColumns:p=[],onPinnedColumnsChange:f,onColumnsRenderModeChanged:g}){let[m,v]=(0,s.useState)(null),y=()=>{v(null)};if("index"===e)return(0,t.jsx)(t.Fragment,{});let b=c.includes(e),w=p.includes(e),C=[];return g&&(C=l(e,g)),(0,t.jsxs)(i.default,{sx:{display:"flex",alignItems:"center",gap:"10px",width:"100%"},className:"grid-header",children:[b&&(0,t.jsx)(a.VscKey,{}),(0,t.jsx)(i.default,{sx:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e}),"added"!==u&&"removed"!==u&&h&&(0,t.jsx)(i.default,{component:b?a.VscClose:a.VscKey,className:b?"close-icon":"key-icon",sx:{display:b?"block":"none",cursor:"pointer"},onClick:b?()=>{h&&h(c.filter(t=>t!==e))}:()=>{h&&h([...c.filter(e=>"index"!==e),e])}}),!b&&f&&(0,t.jsx)(i.default,{component:w?a.VscPinned:a.VscPin,className:w?"unpin-icon":"pin-icon",sx:{display:w?"block":"none",cursor:"pointer"},onClick:w?()=>{f&&f(p.filter(t=>t!==e))}:()=>{f&&f([...p,e])}}),!b&&"number"===d&&C.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{"aria-label":"Options",size:"small",className:"!size-4 !min-w-4",onClick:e=>{v(e.currentTarget)},children:(0,t.jsx)(a.VscKebabVertical,{})}),(0,t.jsx)(n.default,{anchorEl:m,open:!!m,onClose:y,children:C.map(e=>(0,t.jsx)(o.default,{onClick:()=>{e.onClick(),y()},children:e.value},e.value))})]})]})}e.s(["columnPrecisionSelectOptions",()=>l],251915),e.s(["DataFrameColumnGroupHeader",()=>u],861729)},388797,e=>{"use strict";var t=e.i(955343);function i(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-4,48a12,12,0,1,1-12,12A12,12,0,0,1,124,72Zm12,112a16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40a8,8,0,0,1,0,16Z"},child:[]}]})(e)}function r(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM112,168a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm0-120H96V40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Z"},child:[]}]})(e)}function n(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184,32H72A16,16,0,0,0,56,48V224a8,8,0,0,0,12.24,6.78L128,193.43l59.77,37.35A8,8,0,0,0,200,224V48A16,16,0,0,0,184,32Zm0,177.57-51.77-32.35a8,8,0,0,0-8.48,0L72,209.57V48H184Z"},child:[]}]})(e)}function o(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"},child:[]}]})(e)}function s(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,48H40A16,16,0,0,0,24,64V224a15.85,15.85,0,0,0,9.24,14.5A16.13,16.13,0,0,0,40,240a15.89,15.89,0,0,0,10.25-3.78l.09-.07L83,208H216a16,16,0,0,0,16-16V64A16,16,0,0,0,216,48ZM40,224h0ZM216,192H80a8,8,0,0,0-5.23,1.95L40,224V64H216ZM88,112a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H96A8,8,0,0,1,88,112Zm0,32a8,8,0,0,1,8-8h64a8,8,0,1,1,0,16H96A8,8,0,0,1,88,144Z"},child:[]}]})(e)}function a(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},child:[]}]})(e)}function l(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"},child:[]}]})(e)}function u(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Z"},child:[]}]})(e)}function d(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"},child:[]}]})(e)}function c(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"},child:[]}]})(e)}function h(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"},child:[]}]})(e)}function p(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},child:[]}]})(e)}function f(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.68,147.31,64l24-24L216,84.68Z"},child:[]}]})(e)}function g(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"},child:[]}]})(e)}function m(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M24,128A72.08,72.08,0,0,1,96,56H204.69L194.34,45.66a8,8,0,0,1,11.32-11.32l24,24a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32-11.32L204.69,72H96a56.06,56.06,0,0,0-56,56,8,8,0,0,1-16,0Zm200-8a8,8,0,0,0-8,8,56.06,56.06,0,0,1-56,56H51.31l10.35-10.34a8,8,0,0,0-11.32-11.32l-24,24a8,8,0,0,0,0,11.32l24,24a8,8,0,0,0,11.32-11.32L51.31,200H160a72.08,72.08,0,0,0,72-72A8,8,0,0,0,224,120Z"},child:[]}]})(e)}function v(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,48H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM192,208H64V64H192ZM80,24a8,8,0,0,1,8-8h80a8,8,0,0,1,0,16H88A8,8,0,0,1,80,24Z"},child:[]}]})(e)}function y(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM222.93,203.8a8.5,8.5,0,0,1-7.48,4.2H40.55a8.5,8.5,0,0,1-7.48-4.2,7.59,7.59,0,0,1,0-7.72L120.52,44.21a8.75,8.75,0,0,1,15,0l87.45,151.87A7.59,7.59,0,0,1,222.93,203.8ZM120,144V104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,180Z"},child:[]}]})(e)}function b(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},child:[]}]})(e)}e.s(["PiBookmarkSimple",()=>n,"PiCaretDown",()=>o,"PiChatText",()=>s,"PiCheck",()=>l,"PiCheckCircle",()=>a,"PiCircle",()=>u,"PiCopy",()=>d,"PiDotsThreeVertical",()=>c,"PiInfo",()=>h,"PiInfoFill",()=>i,"PiNotePencil",()=>p,"PiPencilSimple",()=>f,"PiPlusCircle",()=>g,"PiRepeat",()=>m,"PiTrashFill",()=>r,"PiTrashSimple",()=>v,"PiWarning",()=>y,"PiX",()=>b])},978987,675155,196137,882244,392399,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(73371),n=e.i(135301),o=e.i(263712),s=e.i(187725),a=e.i(388797),l=e.i(224378),u=e.i(251915);function d({name:e,pinnedColumns:d=[],onPinnedColumnsChange:c=()=>{},columnType:h,onColumnsRenderModeChanged:p}){let[f,g]=(0,s.useState)(null),m=()=>{g(null)},v=[];p&&(v=(0,u.columnPrecisionSelectOptions)(e,p));let y=d.includes(e);return(0,t.jsxs)(i.default,{sx:{display:"flex",alignItems:"center",width:"100%"},className:"grid-header",children:[(0,t.jsx)(i.default,{sx:{flex:1},children:e}),(0,t.jsx)(i.default,{component:y?l.VscPinned:l.VscPin,className:y?"unpin-icon":"pin-icon",sx:{display:y?"block":"none",cursor:"pointer"},onClick:y?()=>{c(d.filter(t=>t!==e))}:()=>{c([...d,e])}}),"number"===h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{"aria-label":"Options",size:"small",className:"size-6!",sx:{p:0},onClick:e=>{g(e.currentTarget)},children:(0,t.jsx)(a.PiDotsThreeVertical,{})}),(0,t.jsx)(n.default,{anchorEl:f,open:!!f,onClose:m,children:v.map(e=>(0,t.jsx)(o.default,{onClick:()=>{e.onClick(),m()},children:e.value},e.value))})]})]})}e.s(["DataFrameColumnHeader",()=>d],978987);var c=e.i(427938);function h(e,t){let i=[...e],r=[...t],n=[];for(;i.length>0&&r.length>0;)if(n.includes(i[0]))i.shift();else if(n.includes(r[0]))r.shift();else if(i[0]===r[0])n.push(i[0]),i.shift(),r.shift();else if(r.includes(i[0])){let e=r.indexOf(i[0]);for(let t=0;t<e;t++)n.includes(r[t])||n.push(r[t]);n.push(i[0]),i.shift(),r.splice(0,e+1)}else n.push(i[0]),i.shift();return i.forEach(e=>{n.includes(e)||n.push(e)}),r.forEach(e=>{n.includes(e)||n.push(e)}),n}function p(e,t){let i=h(e,t),r={};for(let n of i)e.includes(n)?t.includes(n)?r[n]=void 0:r[n]="removed":r[n]="added";let n={};e.forEach((e,t)=>{n[e]=t});let o=-1;for(let e of i){let t=n[e];null!=t&&(t>o?o=t:r[e]="reordered")}return r}e.i(228337),e.s(["mergeKeys",()=>h,"mergeKeysWithStatus",()=>p],675155);var f=e.i(122429);function g(e){return e.data.map((t,i)=>({...e.columns.reduce((e,i,r)=>(e[i.key]=t[r],e),{}),__status:void 0,_index:i+1}))}function m(e){let t=Number(e);return!isNaN(t)&&isFinite(t)?t:function(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return Math.abs(t)}(e)}function v(e,t){let i=t.toLowerCase();if(i in e)return e[i];let r=Object.keys(e).find(e=>e.toLowerCase()===i);return r?e[r]:void 0}function y(e){let t={};return e.columns.forEach((e,i)=>{t[e.name]={key:e.key,index:i,colType:e.type}}),t}function b(e){let t={};if(e.columns.forEach((e,i)=>{t[e.key]={key:e.key,index:i,colType:e.type}}),!t.in_a)throw Error("Joined DataFrame missing required 'in_a' column");if(!t.in_b)throw Error("Joined DataFrame missing required 'in_b' column");return t}function w(e,t){let i={};return Object.entries(p(e.columns.map(e=>e.key),t.columns.map(e=>e.key))).forEach(([r,n])=>{let o=e.columns.find(e=>e.key===r),s=t.columns.find(e=>e.key===r);i[r]={status:n,baseColumnKey:o?.key??"unknown",currentColumnKey:s?.key??"unknown",colType:o?.type??s?.type??"unknown",key:o?.key??s?.key??"unknown"}}),i}function C(e,t){let i=[];for(let r of t){let t=e.find(e=>e.key===r);if(!t)throw Error(`Column ${r} not found`);i.push(t.key)}return i}function x(e,t,i){if(0===t.length)return String(i._index);let r=[];for(let n of t){let t=e.find(e=>e.key===n);if(!t)throw Error(`Primary Column ${n} not found`);let o=i[n];r.push(`${t.name}=${o}`)}return r.join("|")}function S(e,t=2){let i=Object.is(e,-0)?0:e,r=(0,f.formatNumber)(i,"en-US",{maximumFractionDigits:t,roundingMode:"halfEven"})??String(e);return"-0"===r?"0":r}function k(e,t){return Number.isNaN(e)?"NaN":Number.isFinite(e)?"raw"===t?String(e):"number"==typeof t?S(e,t):"percent"===t?(0,f.formatNumber)(e,"en-US",{style:"percent",maximumFractionDigits:2})??String(e):S(e,2):e>0?"":"-"}function R(e,t,i,r){let n,o=v(e,t);if(null==o)return["-",!0];let s=!1;return"boolean"==typeof o?n=o.toString():""===o?(n="(empty)",s=!0):n="number"==typeof o?k(o,r):"number"===i?k(parseFloat(o),r):String(o),[n,s]}function E(e){return"added"===e?"diff-header-added":"removed"===e?"diff-header-removed":void 0}e.s(["dataFrameToRowObjects",()=>g,"getCaseInsensitive",()=>v,"keyToNumber",()=>m],196137),e.s(["buildColumnMap",()=>y,"buildJoinedColumnMap",()=>b,"buildMergedColumnMap",()=>w,"formatSmartDecimal",()=>S,"getHeaderCellClass",()=>E,"getPrimaryKeyValue",()=>x,"toRenderedValue",()=>R,"validatePrimaryKeys",()=>C],882244),e.s(["defaultRenderCell",0,e=>{let i=e.colDef,r=i?.columnType,n=i?.columnRenderMode,o=i?.field??"";if(!e.data)return null;let[s,a]=R(e.data,o,r,n);return(0,t.jsx)(c.default,{component:"span",style:{color:a?"gray":"inherit"},children:s})}],392399)},941666,e=>{"use strict";function t(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function i(e){var i=t(e).Element;return e instanceof i||e instanceof Element}function r(e){var i=t(e).HTMLElement;return e instanceof i||e instanceof HTMLElement}function n(e){if("undefined"==typeof ShadowRoot)return!1;var i=t(e).ShadowRoot;return e instanceof i||e instanceof ShadowRoot}var o,s,a,l,u,d=Math.max,c=Math.min,h=Math.round;function p(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function f(){return!/^((?!chrome|android).)*safari/i.test(p())}function g(e,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var s=e.getBoundingClientRect(),a=1,l=1;n&&r(e)&&(a=e.offsetWidth>0&&h(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&h(s.height)/e.offsetHeight||1);var u=(i(e)?t(e):window).visualViewport,d=!f()&&o,c=(s.left+(d&&u?u.offsetLeft:0))/a,p=(s.top+(d&&u?u.offsetTop:0))/l,g=s.width/a,m=s.height/l;return{width:g,height:m,top:p,right:c+g,bottom:p+m,left:c,x:c,y:p}}function m(e){var i=t(e);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function v(e){return e?(e.nodeName||"").toLowerCase():null}function y(e){return((i(e)?e.ownerDocument:e.document)||window.document).documentElement}function b(e){return g(y(e)).left+m(e).scrollLeft}function w(e){return t(e).getComputedStyle(e)}function C(e){var t=w(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function x(e){var t=g(e),i=e.offsetWidth,r=e.offsetHeight;return 1>=Math.abs(t.width-i)&&(i=t.width),1>=Math.abs(t.height-r)&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function S(e){return"html"===v(e)?e:e.assignedSlot||e.parentNode||(n(e)?e.host:null)||y(e)}function k(e,i){void 0===i&&(i=[]);var n,o=function e(t){return["html","body","#document"].indexOf(v(t))>=0?t.ownerDocument.body:r(t)&&C(t)?t:e(S(t))}(e),s=o===(null==(n=e.ownerDocument)?void 0:n.body),a=t(o),l=s?[a].concat(a.visualViewport||[],C(o)?o:[]):o,u=i.concat(l);return s?u:u.concat(k(S(l)))}function R(e){return r(e)&&"fixed"!==w(e).position?e.offsetParent:null}function E(e){for(var i=t(e),o=R(e);o&&["table","td","th"].indexOf(v(o))>=0&&"static"===w(o).position;)o=R(o);return o&&("html"===v(o)||"body"===v(o)&&"static"===w(o).position)?i:o||function(e){var t=/firefox/i.test(p());if(/Trident/i.test(p())&&r(e)&&"fixed"===w(e).position)return null;var i=S(e);for(n(i)&&(i=i.host);r(i)&&0>["html","body"].indexOf(v(i));){var o=w(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}(e)||i}var P="bottom",M="right",D="left",T="auto",O=["top",P,M,D],_="start",A="viewport",F="popper",I=O.reduce(function(e,t){return e.concat([t+"-"+_,t+"-end"])},[]),L=[].concat(O,[T]).reduce(function(e,t){return e.concat([t,t+"-"+_,t+"-end"])},[]),N=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function B(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&n(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function V(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function H(e,r,n){var o,s,a,l,u,c,h,p,v,C;return r===A?V(function(e,i){var r=t(e),n=y(e),o=r.visualViewport,s=n.clientWidth,a=n.clientHeight,l=0,u=0;if(o){s=o.width,a=o.height;var d=f();(d||!d&&"fixed"===i)&&(l=o.offsetLeft,u=o.offsetTop)}return{width:s,height:a,x:l+b(e),y:u}}(e,n)):i(r)?((o=g(r,!1,"fixed"===n)).top=o.top+r.clientTop,o.left=o.left+r.clientLeft,o.bottom=o.top+r.clientHeight,o.right=o.left+r.clientWidth,o.width=r.clientWidth,o.height=r.clientHeight,o.x=o.left,o.y=o.top,o):V((s=y(e),l=y(s),u=m(s),c=null==(a=s.ownerDocument)?void 0:a.body,h=d(l.scrollWidth,l.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),p=d(l.scrollHeight,l.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),v=-u.scrollLeft+b(s),C=-u.scrollTop,"rtl"===w(c||l).direction&&(v+=d(l.clientWidth,c?c.clientWidth:0)-h),{width:h,height:p,x:v,y:C}))}function z(e){return e.split("-")[0]}function j(e){return e.split("-")[1]}function G(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function W(e){var t,i=e.reference,r=e.element,n=e.placement,o=n?z(n):null,s=n?j(n):null,a=i.x+i.width/2-r.width/2,l=i.y+i.height/2-r.height/2;switch(o){case"top":t={x:a,y:i.y-r.height};break;case P:t={x:a,y:i.y+i.height};break;case M:t={x:i.x+i.width,y:l};break;case D:t={x:i.x-r.width,y:l};break;default:t={x:i.x,y:i.y}}var u=o?G(o):null;if(null!=u){var d="y"===u?"height":"width";switch(s){case _:t[u]=t[u]-(i[d]/2-r[d]/2);break;case"end":t[u]=t[u]+(i[d]/2-r[d]/2)}}return t}function U(){return{top:0,right:0,bottom:0,left:0}}function $(e){return Object.assign({},U(),e)}function q(e,t){return t.reduce(function(t,i){return t[i]=e,t},{})}function K(e,t){void 0===t&&(t={});var n,o,s,a,l,u,h,p,f=t,m=f.placement,b=void 0===m?e.placement:m,C=f.strategy,x=void 0===C?e.strategy:C,R=f.boundary,D=f.rootBoundary,T=f.elementContext,_=void 0===T?F:T,I=f.altBoundary,L=f.padding,N=void 0===L?0:L,z=$("number"!=typeof N?N:q(N,O)),j=e.rects.popper,G=e.elements[void 0!==I&&I?_===F?"reference":F:_],U=(n=i(G)?G:G.contextElement||y(e.elements.popper),o=void 0===R?"clippingParents":R,s=void 0===D?A:D,h=(u=[].concat("clippingParents"===o?(a=k(S(n)),!i(l=["absolute","fixed"].indexOf(w(n).position)>=0&&r(n)?E(n):n)?[]:a.filter(function(e){return i(e)&&B(e,l)&&"body"!==v(e)})):[].concat(o),[s]))[0],(p=u.reduce(function(e,t){var i=H(n,t,x);return e.top=d(i.top,e.top),e.right=c(i.right,e.right),e.bottom=c(i.bottom,e.bottom),e.left=d(i.left,e.left),e},H(n,h,x))).width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p),K=g(e.elements.reference),Q=W({reference:K,element:j,strategy:"absolute",placement:b}),X=V(Object.assign({},j,Q)),Y=_===F?X:K,Z={top:U.top-Y.top+z.top,bottom:Y.bottom-U.bottom+z.bottom,left:U.left-Y.left+z.left,right:Y.right-U.right+z.right},J=e.modifiersData.offset;if(_===F&&J){var ee=J[b];Object.keys(Z).forEach(function(e){var t=[M,P].indexOf(e)>=0?1:-1,i=["top",P].indexOf(e)>=0?"y":"x";Z[e]+=ee[i]*t})}return Z}var Q={placement:"bottom",modifiers:[],strategy:"absolute"};function X(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Y={passive:!0},Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J(e){var i,r,n,o,s,a,l,u=e.popper,d=e.popperRect,c=e.placement,p=e.variation,f=e.offsets,g=e.position,m=e.gpuAcceleration,v=e.adaptive,b=e.roundOffsets,C=e.isFixed,x=f.x,S=void 0===x?0:x,k=f.y,R=void 0===k?0:k,T="function"==typeof b?b({x:S,y:R}):{x:S,y:R};S=T.x,R=T.y;var O=f.hasOwnProperty("x"),_=f.hasOwnProperty("y"),A=D,F="top",I=window;if(v){var L=E(u),N="clientHeight",B="clientWidth";L===t(u)&&"static"!==w(L=y(u)).position&&"absolute"===g&&(N="scrollHeight",B="scrollWidth"),("top"===c||(c===D||c===M)&&"end"===p)&&(F=P,R-=(C&&L===I&&I.visualViewport?I.visualViewport.height:L[N])-d.height,R*=m?1:-1),(c===D||("top"===c||c===P)&&"end"===p)&&(A=M,S-=(C&&L===I&&I.visualViewport?I.visualViewport.width:L[B])-d.width,S*=m?1:-1)}var V=Object.assign({position:g},v&&Z),H=!0===b?(i={x:S,y:R},r=t(u),n=i.x,o=i.y,{x:h(n*(s=r.devicePixelRatio||1))/s||0,y:h(o*s)/s||0}):{x:S,y:R};return(S=H.x,R=H.y,m)?Object.assign({},V,((l={})[F]=_?"0":"",l[A]=O?"0":"",l.transform=1>=(I.devicePixelRatio||1)?"translate("+S+"px, "+R+"px)":"translate3d("+S+"px, "+R+"px, 0)",l)):Object.assign({},V,((a={})[F]=_?R+"px":"",a[A]=O?S+"px":"",a.transform="",a))}var ee={left:"right",right:"left",bottom:"top",top:"bottom"};function et(e){return e.replace(/left|right|bottom|top/g,function(e){return ee[e]})}var ei={start:"end",end:"start"};function er(e){return e.replace(/start|end/g,function(e){return ei[e]})}function en(e,t,i){return d(e,c(t,i))}function eo(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function es(e){return["top",M,P,D].some(function(t){return e[t]>=0})}var ea=(a=void 0===(s=(o={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var i=e.state,r=e.instance,n=e.options,o=n.scroll,s=void 0===o||o,a=n.resize,l=void 0===a||a,u=t(i.elements.popper),d=[].concat(i.scrollParents.reference,i.scrollParents.popper);return s&&d.forEach(function(e){e.addEventListener("scroll",r.update,Y)}),l&&u.addEventListener("resize",r.update,Y),function(){s&&d.forEach(function(e){e.removeEventListener("scroll",r.update,Y)}),l&&u.removeEventListener("resize",r.update,Y)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=W({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=i.adaptive,o=i.roundOffsets,s=void 0===o||o,a={placement:z(t.placement),variation:j(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===r||r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,J(Object.assign({},a,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===n||n,roundOffsets:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,J(Object.assign({},a,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];r(o)&&v(o)&&(Object.assign(o.style,i),Object.keys(n).forEach(function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(e){var n=t.elements[e],o=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});r(n)&&v(n)&&(Object.assign(n.style,s),Object.keys(o).forEach(function(e){n.removeAttribute(e)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,r=e.name,n=i.offset,o=void 0===n?[0,0]:n,s=L.reduce(function(e,i){var r,n,s,a,l,u;return e[i]=(r=t.rects,s=[D,"top"].indexOf(n=z(i))>=0?-1:1,l=(a="function"==typeof o?o(Object.assign({},r,{placement:i})):o)[0],u=a[1],l=l||0,u=(u||0)*s,[D,M].indexOf(n)>=0?{x:u,y:l}:{x:l,y:u}),e},{}),a=s[t.placement],l=a.x,u=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,o=void 0===n||n,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,u=i.padding,d=i.boundary,c=i.rootBoundary,h=i.altBoundary,p=i.flipVariations,f=void 0===p||p,g=i.allowedAutoPlacements,m=t.options.placement,v=z(m)===m,y=l||(v||!f?[et(m)]:function(e){if(z(e)===T)return[];var t=et(e);return[er(e),t,er(t)]}(m)),b=[m].concat(y).reduce(function(e,i){var r,n,o,s,a,l,h,p,m,v,y,b;return e.concat(z(i)===T?(n=(r={placement:i,boundary:d,rootBoundary:c,padding:u,flipVariations:f,allowedAutoPlacements:g}).placement,o=r.boundary,s=r.rootBoundary,a=r.padding,l=r.flipVariations,p=void 0===(h=r.allowedAutoPlacements)?L:h,0===(y=(v=(m=j(n))?l?I:I.filter(function(e){return j(e)===m}):O).filter(function(e){return p.indexOf(e)>=0})).length&&(y=v),Object.keys(b=y.reduce(function(e,i){return e[i]=K(t,{placement:i,boundary:o,rootBoundary:s,padding:a})[z(i)],e},{})).sort(function(e,t){return b[e]-b[t]})):i)},[]),w=t.rects.reference,C=t.rects.popper,x=new Map,S=!0,k=b[0],R=0;R<b.length;R++){var E=b[R],A=z(E),F=j(E)===_,N=["top",P].indexOf(A)>=0,B=N?"width":"height",V=K(t,{placement:E,boundary:d,rootBoundary:c,altBoundary:h,padding:u}),H=N?F?M:D:F?P:"top";w[B]>C[B]&&(H=et(H));var G=et(H),W=[];if(o&&W.push(V[A]<=0),a&&W.push(V[H]<=0,V[G]<=0),W.every(function(e){return e})){k=E,S=!1;break}x.set(E,W)}if(S)for(var U=f?3:1,$=function(e){var t=b.find(function(t){var i=x.get(t);if(i)return i.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},q=U;q>0&&"break"!==$(q);q--);t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,o=i.altAxis,s=i.boundary,a=i.rootBoundary,l=i.altBoundary,u=i.padding,h=i.tether,p=void 0===h||h,f=i.tetherOffset,g=void 0===f?0:f,m=K(t,{boundary:s,rootBoundary:a,padding:u,altBoundary:l}),v=z(t.placement),y=j(t.placement),b=!y,w=G(v),C="x"===w?"y":"x",S=t.modifiersData.popperOffsets,k=t.rects.reference,R=t.rects.popper,T="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,O="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(S){if(void 0===n||n){var I,L="y"===w?"top":D,N="y"===w?P:M,B="y"===w?"height":"width",V=S[w],H=V+m[L],W=V-m[N],$=p?-R[B]/2:0,q=y===_?k[B]:R[B],Q=y===_?-R[B]:-k[B],X=t.elements.arrow,Y=p&&X?x(X):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:U(),J=Z[L],ee=Z[N],et=en(0,k[B],Y[B]),ei=b?k[B]/2-$-et-J-O.mainAxis:q-et-J-O.mainAxis,er=b?-k[B]/2+$+et+ee+O.mainAxis:Q+et+ee+O.mainAxis,eo=t.elements.arrow&&E(t.elements.arrow),es=eo?"y"===w?eo.clientTop||0:eo.clientLeft||0:0,ea=null!=(I=null==A?void 0:A[w])?I:0,el=en(p?c(H,V+ei-ea-es):H,V,p?d(W,V+er-ea):W);S[w]=el,F[w]=el-V}if(void 0!==o&&o){var eu,ed,ec="x"===w?"top":D,eh="x"===w?P:M,ep=S[C],ef="y"===C?"height":"width",eg=ep+m[ec],em=ep-m[eh],ev=-1!==["top",D].indexOf(v),ey=null!=(ed=null==A?void 0:A[C])?ed:0,eb=ev?eg:ep-k[ef]-R[ef]-ey+O.altAxis,ew=ev?ep+k[ef]+R[ef]-ey-O.altAxis:em,eC=p&&ev?(eu=en(eb,ep,ew))>ew?ew:eu:en(p?eb:eg,ep,p?ew:em);S[C]=eC,F[C]=eC-ep}t.modifiersData[r]=F}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,r=e.name,n=e.options,o=i.elements.arrow,s=i.modifiersData.popperOffsets,a=z(i.placement),l=G(a),u=[D,M].indexOf(a)>=0?"height":"width";if(o&&s){var d,c=(d=n.padding,$("number"!=typeof(d="function"==typeof d?d(Object.assign({},i.rects,{placement:i.placement})):d)?d:q(d,O))),h=x(o),p="y"===l?"top":D,f="y"===l?P:M,g=i.rects.reference[u]+i.rects.reference[l]-s[l]-i.rects.popper[u],m=s[l]-i.rects.reference[l],v=E(o),y=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,b=c[p],w=y-h[u]-c[f],C=y/2-h[u]/2+(g/2-m/2),S=en(b,C,w);i.modifiersData[r]=((t={})[l]=S,t.centerOffset=S-C,t)}},effect:function(e){var t=e.state,i=e.options.element,r=void 0===i?"[data-popper-arrow]":i;null==r||("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&B(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,s=K(t,{elementContext:"reference"}),a=K(t,{altBoundary:!0}),l=eo(s,r),u=eo(a,n,o),d=es(l),c=es(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":c})}}]}).defaultModifiers)?[]:s,u=void 0===(l=o.defaultOptions)?Q:l,function(e,n,o){void 0===o&&(o=u);var s,l,d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Q,u),modifiersData:{},elements:{reference:e,popper:n},attributes:{},styles:{}},c=[],p=!1,f={state:d,setOptions:function(t){var r,o,s,l,h,p,g="function"==typeof t?t(d.options):t;w(),d.options=Object.assign({},u,d.options,g),d.scrollParents={reference:i(e)?k(e):e.contextElement?k(e.contextElement):[],popper:k(n)};var m=(o=Object.keys(r=[].concat(a,d.options.modifiers).reduce(function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e},{})).map(function(e){return r[e]}),s=new Map,l=new Set,h=[],o.forEach(function(e){s.set(e.name,e)}),o.forEach(function(e){l.has(e.name)||function e(t){l.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!l.has(t)){var i=s.get(t);i&&e(i)}}),h.push(t)}(e)}),p=h,N.reduce(function(e,t){return e.concat(p.filter(function(e){return e.phase===t}))},[]));return d.orderedModifiers=m.filter(function(e){return e.enabled}),d.orderedModifiers.forEach(function(e){var t=e.name,i=e.options,r=e.effect;if("function"==typeof r){var n=r({state:d,name:t,instance:f,options:void 0===i?{}:i});c.push(n||function(){})}}),f.update()},forceUpdate:function(){if(!p){var e=d.elements,i=e.reference,n=e.popper;if(X(i,n)){d.rects={reference:(o=E(n),s="fixed"===d.options.strategy,a=r(o),w=r(o)&&(u=h((l=o.getBoundingClientRect()).width)/o.offsetWidth||1,c=h(l.height)/o.offsetHeight||1,1!==u||1!==c),S=y(o),k=g(i,w,s),R={scrollLeft:0,scrollTop:0},P={x:0,y:0},(a||!a&&!s)&&(("body"!==v(o)||C(S))&&(R=function(e){return e!==t(e)&&r(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:m(e)}(o)),r(o)?(P=g(o,!0),P.x+=o.clientLeft,P.y+=o.clientTop):S&&(P.x=b(S))),{x:k.left+R.scrollLeft-P.x,y:k.top+R.scrollTop-P.y,width:k.width,height:k.height}),popper:x(n)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(e){return d.modifiersData[e.name]=Object.assign({},e.data)});for(var o,s,a,l,u,c,w,S,k,R,P,M=0;M<d.orderedModifiers.length;M++){if(!0===d.reset){d.reset=!1,M=-1;continue}var D=d.orderedModifiers[M],T=D.fn,O=D.options,_=void 0===O?{}:O,A=D.name;"function"==typeof T&&(d=T({state:d,options:_,name:A,instance:f})||d)}}}},update:(s=function(){return new Promise(function(e){f.forceUpdate(),e(d)})},function(){return l||(l=new Promise(function(e){Promise.resolve().then(function(){l=void 0,e(s())})})),l}),destroy:function(){w(),p=!0}};if(!X(e,n))return f;function w(){c.forEach(function(e){return e()}),c=[]}return f.setOptions(o).then(function(e){!p&&o.onFirstUpdate&&o.onFirstUpdate(e)}),f});e.s(["createPopper",()=>ea],941666)},750724,e=>{"use strict";e.i(316575);var t=e.i(358102),i=e.i(187725),r=e.i(842426),n=e.i(86396),o=e.i(995044),s=e.i(941666),a=e.i(778024),l=e.i(523086),u=e.i(355503),d=e.i(435983),c=e.i(446519);function h(e){return(0,c.default)("MuiPopper",e)}(0,d.default)("MuiPopper",["root"]);var p=e.i(19483);function f(e){return"function"==typeof e?e():e}let g={},m=i.forwardRef(function(e,t){let{anchorEl:r,children:u,direction:d,disablePortal:c,modifiers:g,open:m,placement:v,popperOptions:y,popperRef:b,slotProps:w={},slots:C={},TransitionProps:x,ownerState:S,...k}=e,R=i.useRef(null),E=(0,o.default)(R,t),P=i.useRef(null),M=(0,o.default)(P,b),D=i.useRef(M);(0,n.default)(()=>{D.current=M},[M]),i.useImperativeHandle(b,()=>P.current,[]);let T=function(e,t){if("ltr"===t)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(v,d),[O,_]=i.useState(T),[A,F]=i.useState(f(r));i.useEffect(()=>{P.current&&P.current.forceUpdate()}),i.useEffect(()=>{r&&F(f(r))},[r]),(0,n.default)(()=>{if(!A||!m)return;let e=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{_(e.placement)}}];null!=g&&(e=e.concat(g)),y&&null!=y.modifiers&&(e=e.concat(y.modifiers));let t=(0,s.createPopper)(A,R.current,{placement:T,...y,modifiers:e});return D.current(t),()=>{t.destroy(),D.current(null)}},[A,c,g,m,y,T]);let I={placement:O};null!==x&&(I.TransitionProps=x);let L=(e=>{let{classes:t}=e;return(0,a.default)({root:["root"]},h,t)})(e),N=C.root??"div",B=(0,l.default)({elementType:N,externalSlotProps:w.root,externalForwardedProps:k,additionalProps:{role:"tooltip",ref:E},ownerState:e,className:L.root});return(0,p.jsx)(N,{...B,children:"function"==typeof u?u(I):u})}),v=i.forwardRef(function(e,t){let n,{anchorEl:o,children:s,container:a,direction:l="ltr",disablePortal:d=!1,keepMounted:c=!1,modifiers:h,open:v,placement:y="bottom",popperOptions:b=g,popperRef:w,style:C,transition:x=!1,slotProps:S={},slots:k={},...R}=e,[E,P]=i.useState(!0);if(!c&&!v&&(!x||E))return null;if(a)n=a;else if(o){let e=f(o);n=e&&void 0!==e.nodeType?(0,r.default)(e).body:(0,r.default)(null).body}let M=!v&&c&&(!x||E)?"none":void 0,D=x?{in:v,onEnter:()=>{P(!1)},onExited:()=>{P(!0)}}:void 0;return(0,p.jsx)(u.default,{disablePortal:d,container:n,children:(0,p.jsx)(m,{anchorEl:o,direction:l,disablePortal:d,modifiers:h,ref:t,open:x?!E:v,placement:y,popperOptions:b,popperRef:w,slotProps:S,slots:k,...R,style:{position:"fixed",top:0,left:0,display:M,...C},TransitionProps:D,children:s})})});var y=e.i(446547),b=e.i(519273);let w=(0,y.styled)(v,{name:"MuiPopper",slot:"Root"})({}),C=i.forwardRef(function(e,i){let r=(0,t.useRtl)(),{anchorEl:n,component:o,components:s,componentsProps:a,container:l,disablePortal:u,keepMounted:d,modifiers:c,open:h,placement:f,popperOptions:g,popperRef:m,transition:v,slots:y,slotProps:C,...x}=(0,b.useDefaultProps)({props:e,name:"MuiPopper"}),S=y?.root??s?.Root,k={anchorEl:n,container:l,disablePortal:u,keepMounted:d,modifiers:c,open:h,placement:f,popperOptions:g,popperRef:m,transition:v,...x};return(0,p.jsx)(w,{as:o,direction:r?"rtl":"ltr",slots:{root:S},slotProps:C??a,...k,ref:i})});e.s(["default",0,C],750724)},197068,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(143696),n=e.i(778024),o=e.i(358102),s=e.i(387301),a=e.i(272866),l=e.i(446547),u=e.i(811347),d=e.i(73205),c=e.i(519273),h=e.i(578509),p=e.i(401440),f=e.i(750724),g=e.i(134030),m=e.i(723938),v=e.i(909005),y=e.i(623786),b=e.i(577950),w=e.i(435983),C=e.i(446519);function x(e){return(0,C.default)("MuiTooltip",e)}let S=(0,w.default)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);var k=e.i(19483);let R=(0,l.styled)(f.default,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.popper,!i.disableInteractive&&t.popperInteractive,i.arrow&&t.popperArrow,!i.open&&t.popperClose]}})((0,d.default)(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${S.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${S.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${S.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${S.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${S.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${S.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${S.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${S.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),E=(0,l.styled)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.tooltip,i.touch&&t.touch,i.arrow&&t.tooltipArrow,t[`tooltipPlacement${(0,h.default)(i.placement.split("-")[0])}`]]}})((0,d.default)(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${S.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${S.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${S.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${S.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Math.round(16/14*1e5)/1e5}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${S.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${S.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${S.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${S.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${S.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${S.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${S.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${S.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${S.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${S.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),P=(0,l.styled)("span",{name:"MuiTooltip",slot:"Arrow"})((0,d.default)(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}))),M=!1,D=new r.Timeout,T={x:0,y:0};function O(e,t){return(i,...r)=>{t&&t(i,...r),e(i,...r)}}let _=t.forwardRef(function(e,l){let d=(0,c.useDefaultProps)({props:e,name:"MuiTooltip"}),{arrow:w=!1,children:C,classes:S,components:_={},componentsProps:A={},describeChild:F=!1,disableFocusListener:I=!1,disableHoverListener:L=!1,disableInteractive:N=!1,disableTouchListener:B=!1,enterDelay:V=100,enterNextDelay:H=0,enterTouchDelay:z=700,followCursor:j=!1,id:G,leaveDelay:W=0,leaveTouchDelay:U=1500,onClose:$,onOpen:q,open:K,placement:Q="bottom",PopperComponent:X,PopperProps:Y={},slotProps:Z={},slots:J={},title:ee,TransitionComponent:et,TransitionProps:ei,...er}=d,en=t.isValidElement(C)?C:(0,k.jsx)("span",{children:C}),eo=(0,u.useTheme)(),es=(0,o.useRtl)(),[ea,el]=t.useState(),[eu,ed]=t.useState(null),ec=t.useRef(!1),eh=N||j,ep=(0,r.default)(),ef=(0,r.default)(),eg=(0,r.default)(),em=(0,r.default)(),[ev,ey]=(0,y.default)({controlled:K,default:!1,name:"Tooltip",state:"open"}),eb=ev,ew=(0,v.default)(G),eC=t.useRef(),ex=(0,g.default)(()=>{void 0!==eC.current&&(document.body.style.WebkitUserSelect=eC.current,eC.current=void 0),em.clear()});t.useEffect(()=>ex,[ex]);let eS=e=>{D.clear(),M=!0,ey(!0),q&&!eb&&q(e)},ek=(0,g.default)(e=>{D.start(800+W,()=>{M=!1}),ey(!1),$&&eb&&$(e),ep.start(eo.transitions.duration.shortest,()=>{ec.current=!1})}),eR=e=>{ec.current&&"touchstart"!==e.type||(ea&&ea.removeAttribute("title"),ef.clear(),eg.clear(),V||M&&H?ef.start(M?H:V,()=>{eS(e)}):eS(e))},eE=e=>{ef.clear(),eg.start(W,()=>{ek(e)})},[,eP]=t.useState(!1),eM=e=>{(0,s.default)(e.target)||(eP(!1),eE(e))},eD=e=>{ea||el(e.currentTarget),(0,s.default)(e.target)&&(eP(!0),eR(e))},eT=e=>{ec.current=!0;let t=en.props;t.onTouchStart&&t.onTouchStart(e)};t.useEffect(()=>{if(eb)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"===e.key&&ek(e)}},[ek,eb]);let eO=(0,m.default)((0,a.default)(en),el,l);ee||0===ee||(eb=!1);let e_=t.useRef(),eA={},eF="string"==typeof ee;F?(eA.title=eb||!eF||L?null:ee,eA["aria-describedby"]=eb?ew:null):(eA["aria-label"]=eF?ee:null,eA["aria-labelledby"]=eb&&!eF?ew:null);let eI={...eA,...er,...en.props,className:(0,i.default)(er.className,en.props.className),onTouchStart:eT,ref:eO,...j?{onMouseMove:e=>{let t=en.props;t.onMouseMove&&t.onMouseMove(e),T={x:e.clientX,y:e.clientY},e_.current&&e_.current.update()}}:{}},eL={};B||(eI.onTouchStart=e=>{eT(e),eg.clear(),ep.clear(),ex(),eC.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",em.start(z,()=>{document.body.style.WebkitUserSelect=eC.current,eR(e)})},eI.onTouchEnd=e=>{en.props.onTouchEnd&&en.props.onTouchEnd(e),ex(),eg.start(U,()=>{ek(e)})}),!L&&(eI.onMouseOver=O(eR,eI.onMouseOver),eI.onMouseLeave=O(eE,eI.onMouseLeave),eh||(eL.onMouseOver=eR,eL.onMouseLeave=eE)),!I&&(eI.onFocus=O(eD,eI.onFocus),eI.onBlur=O(eM,eI.onBlur),eh||(eL.onFocus=eD,eL.onBlur=eM));let eN={...d,isRtl:es,arrow:w,disableInteractive:eh,placement:Q,PopperComponentProp:X,touch:ec.current},eB="function"==typeof Z.popper?Z.popper(eN):Z.popper,eV=t.useMemo(()=>{let e=[{name:"arrow",enabled:!!eu,options:{element:eu,padding:4}}];return Y.popperOptions?.modifiers&&(e=e.concat(Y.popperOptions.modifiers)),eB?.popperOptions?.modifiers&&(e=e.concat(eB.popperOptions.modifiers)),{...Y.popperOptions,...eB?.popperOptions,modifiers:e}},[eu,Y.popperOptions,eB?.popperOptions]),eH=(e=>{let{classes:t,disableInteractive:i,arrow:r,touch:o,placement:s}=e,a={popper:["popper",!i&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",o&&"touch",`tooltipPlacement${(0,h.default)(s.split("-")[0])}`],arrow:["arrow"]};return(0,n.default)(a,x,t)})(eN),ez="function"==typeof Z.transition?Z.transition(eN):Z.transition,ej={slots:{popper:_.Popper,transition:_.Transition??et,tooltip:_.Tooltip,arrow:_.Arrow,...J},slotProps:{arrow:Z.arrow??A.arrow,popper:{...Y,...eB??A.popper},tooltip:Z.tooltip??A.tooltip,transition:{...ei,...ez??A.transition}}},[eG,eW]=(0,b.default)("popper",{elementType:R,externalForwardedProps:ej,ownerState:eN,className:(0,i.default)(eH.popper,Y?.className)}),[eU,e$]=(0,b.default)("transition",{elementType:p.default,externalForwardedProps:ej,ownerState:eN}),[eq,eK]=(0,b.default)("tooltip",{elementType:E,className:eH.tooltip,externalForwardedProps:ej,ownerState:eN}),[eQ,eX]=(0,b.default)("arrow",{elementType:P,className:eH.arrow,externalForwardedProps:ej,ownerState:eN,ref:ed});return(0,k.jsxs)(t.Fragment,{children:[t.cloneElement(en,eI),(0,k.jsx)(eG,{as:X??f.default,placement:Q,anchorEl:j?{getBoundingClientRect:()=>({top:T.y,left:T.x,right:T.x,bottom:T.y,width:0,height:0})}:ea,popperRef:e_,open:!!ea&&eb,id:ew,transition:!0,...eL,...eW,popperOptions:eV,children:({TransitionProps:e})=>(0,k.jsx)(eU,{timeout:eo.transitions.duration.shorter,...e,...e$,children:(0,k.jsxs)(eq,{...eK,children:[ee,w?(0,k.jsx)(eQ,{...eX}):null]})})})]})});e.s(["default",0,_],197068)},351853,(e,t,i)=>{var r=0/0,n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,u=e.g&&e.g.Object===Object&&e.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=u||d||Function("return this")(),h=Object.prototype.toString,p=Math.max,f=Math.min,g=function(){return c.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==h.call(t))return r;if(m(e)){var t,i="function"==typeof e.valueOf?e.valueOf():e;e=m(i)?i+"":i}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=s.test(e);return u||a.test(e)?l(e.slice(2),u?2:8):o.test(e)?r:+e}t.exports=function(e,t,i){var r,n,o,s,a,l,u=0,d=!1,c=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var i=r,o=n;return r=n=void 0,u=t,s=e.apply(o,i)}function b(e){var i=e-l,r=e-u;return void 0===l||i>=t||i<0||c&&r>=o}function w(){var e,i,r,n=g();if(b(n))return C(n);a=setTimeout(w,(e=n-l,i=n-u,r=t-e,c?f(r,o-i):r))}function C(e){return(a=void 0,h&&r)?y(e):(r=n=void 0,s)}function x(){var e,i=g(),o=b(i);if(r=arguments,n=this,l=i,o){if(void 0===a)return u=e=l,a=setTimeout(w,t),d?y(e):s;if(c)return a=setTimeout(w,t),y(l)}return void 0===a&&(a=setTimeout(w,t)),s}return t=v(t)||0,m(i)&&(d=!!i.leading,o=(c="maxWait"in i)?p(v(i.maxWait)||0,t):o,h="trailing"in i?!!i.trailing:h),x.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=n=a=void 0},x.flush=function(){return void 0===a?s:C(g())},x}},536925,e=>{"use strict";var t=e.i(187725);e.i(351853);var i="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function r(){let[e,i]=(0,t.useState)(null);return[e,(0,t.useCallback)(async e=>{if(!(null==navigator?void 0:navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(e),i(e),!0}catch(e){return console.warn("Copy failed",e),i(null),!1}},[])]}function n(e,r){let n=(0,t.useRef)(e);i(()=>{n.current=e},[e]),(0,t.useEffect)(()=>{if(null===r)return;let e=setInterval(()=>{n.current()},r);return()=>{clearInterval(e)}},[r])}e.s(["useCopyToClipboard",()=>r,"useInterval",()=>n])},605740,285297,840908,72039,622670,848148,146459,652058,830055,490395,603634,130115,e=>{"use strict";var t=e.i(231076),i=e.i(19483),r=e.i(861729),n=e.i(978987),o=e.i(392399),s=e.i(324066),a=e.i(197068),l=e.i(427938),u=e.i(73371),d=e.i(187725),c=e.i(388797),h=e.i(536925),p=e.i(960247);let f=({value:e,colorPalette:t,grayOut:r,noCopy:n,fontSize:o})=>{let[a,l]=(0,d.useState)(!1),u=p.colors[t][800],c=p.colors[t][100];return(0,i.jsxs)(s.default,{sx:{display:"flex",p:"2px 5px",minWidth:"30px",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",color:u,bgcolor:c,alignItems:"center",gap:"2px",borderRadius:"8px",fontSize:o,flexShrink:n?0:"inherit"},onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[(0,i.jsx)(s.default,{sx:{overflow:"hidden",textOverflow:"ellipsis",color:r?"gray":"inherit"},children:e}),(0,i.jsx)(g,{value:e,noCopy:n,grayOut:r,isHovered:a})]})};function g({value:e,noCopy:t,grayOut:r,isHovered:n}){let[o,s]=(0,h.useCopyToClipboard)();return t||r?(0,i.jsx)(i.Fragment,{}):o?(0,i.jsx)(i.Fragment,{children:"Copied"}):n?(0,i.jsx)(u.default,{"aria-label":"Copy",size:"small",onClick:()=>s(e),sx:{minWidth:"10px",height:"10px",display:"flex",alignItems:"center",justifyContent:"center",p:0},children:(0,i.jsx)(c.PiCopy,{size:"10px"})}):(0,i.jsx)(i.Fragment,{})}e.s(["DiffText",0,f],285297);var m=e.i(882244);let v=e=>{let t=e.colDef,r=t?.columnType,n=t?.columnRenderMode,o=t?.field??"";if(!e.data)return null;let u=e.data,d=`base__${o}`.toLowerCase(),c=`current__${o}`.toLowerCase();if(!Object.hasOwn(u,d)&&!Object.hasOwn(u,c))return"-";let h=Object.hasOwn(u,d),p=Object.hasOwn(u,c),[g,v]=(0,m.toRenderedValue)(u,`base__${o}`.toLowerCase(),r,n),[b,w]=(0,m.toRenderedValue)(u,`current__${o}`.toLowerCase(),r,n);if(u[d]===u[c])return(0,i.jsx)(l.default,{component:"span",style:{color:w?"gray":"inherit"},children:b});if("delta"===n&&("number"===r||"integer"===r)&&h&&p){let e=y(u[d]),t=y(u[c]);if(Number.isFinite(e)&&Number.isFinite(t)){let r=t-e,n=0!==e?r/e*100:0,o=(0,m.formatSmartDecimal)(t),u=(0,m.formatSmartDecimal)(r),d=`(${r>=0?"+":""}${u})`,c=`Base: ${e}
Current: ${t}
Change: ${r>=0?"+":""}${r} (${n>=0?"+":""}${n.toFixed(2)}%)`;return(0,i.jsx)(a.default,{title:c,slotProps:{tooltip:{sx:{whiteSpace:"pre-line"}}},enterDelay:300,placement:"top",children:(0,i.jsxs)(s.default,{gap:"5px",display:"flex",alignItems:"center",lineHeight:"normal",height:"100%",children:[(0,i.jsx)(f,{value:o,colorPalette:"green",grayOut:w}),(0,i.jsx)(l.default,{fontSize:"0.75rem",color:r>=0?"green.600":"red.600",children:d})]})})}}return(0,i.jsxs)(s.default,{sx:{display:"flex",gap:"5px",alignItems:"center",lineHeight:"normal",height:"100%"},children:[h&&(0,i.jsx)(f,{value:g,colorPalette:"red",grayOut:v}),p&&(0,i.jsx)(f,{value:b,colorPalette:"green",grayOut:w})]})};function y(e){if("number"==typeof e)return e;if("string"==typeof e){let t=Number.parseFloat(e);return Number.isNaN(t)?0:t}return 0}var b=e.i(228337);function w(e){let{columns:t,displayMode:n,headerProps:s,baseTitle:a,currentTitle:l,allowIndexFallback:u=!1}=e,d=[],c=!1;for(let e of(!t.some(e=>e.isPrimaryKey)&&u&&(d.push({field:"_index",headerName:"",width:50,maxWidth:100,cellClass:"index-column",resizable:!1,pinned:"left"}),c=!0),t))if(e.isPrimaryKey)d.push(function(e,t){let{key:n,name:s,columnType:a,columnStatus:l,columnRenderMode:u}=e;return{field:n,headerName:s,headerComponent:()=>(0,i.jsx)(r.DataFrameColumnGroupHeader,{name:s,columnStatus:l??"",columnType:a,...t}),pinned:"left",cellClass:e=>{if(e.data?.__status)return`diff-header-${e.data.__status}`},cellRenderer:o.defaultRenderCell,columnType:a,columnRenderMode:u}}(e,s));else{let t=function(e,t,n,s,a){let{name:l,columnType:u,columnStatus:d,columnRenderMode:c}=e;return function(e){let{name:t,columnStatus:n,columnType:s,columnRenderMode:a,displayMode:l,baseTitle:u="Base",currentTitle:d="Current",headerProps:c={}}=e,h=(0,m.getHeaderCellClass)(n),p=()=>(0,i.jsx)(r.DataFrameColumnGroupHeader,{name:t,columnStatus:n,columnType:s,...c});if("inline"===l)return{field:t,headerName:t,headerClass:h,headerComponent:p,cellRenderer:v,columnType:s,columnRenderMode:a};let f=e=>{let i=e.data;if(!i)return;let r=i.__status;if("removed"===r)return"diff-cell-removed";if("added"===r)return"diff-cell-added";if("added"===n||"removed"===n)return;let o=`base__${t}`.toLowerCase(),s=`current__${t}`.toLowerCase();if(!b.default.isEqual(i[o],i[s]))return"diff-cell-removed"},g=e=>{let i=e.data;if(!i)return;let r=i.__status;if("removed"===r)return"diff-cell-removed";if("added"===r)return"diff-cell-added";if("added"===n||"removed"===n)return;let o=`base__${t}`.toLowerCase(),s=`current__${t}`.toLowerCase();if(!b.default.isEqual(i[o],i[s]))return"diff-cell-added"};return{headerName:t,headerClass:h,headerGroupComponent:p,columnType:s,columnRenderMode:a,children:[{field:`base__${t}`,headerName:u,headerClass:h,cellClass:f,cellRenderer:o.defaultRenderCell,columnType:s,columnRenderMode:a},{field:`current__${t}`,headerName:d,headerClass:h,cellClass:g,cellRenderer:o.defaultRenderCell,columnType:s,columnRenderMode:a}]}}({name:l,columnStatus:d??"",columnType:u,columnRenderMode:c,displayMode:t,baseTitle:s,currentTitle:a,headerProps:n})}(e,n,s,a,l);d.push({...t,pinned:e.frozen?"left":void 0})}return{columns:d,usedIndexFallback:c}}e.s(["buildDiffColumnDefinitions",()=>w],840908);var C=e.i(675155),x=e.i(196137);function S(e,t,i,r,n){i.forEach(i=>{let o=i.key;n.includes(o)?e[String(o).toLowerCase()]=t[o]:e[`${r}${o}`.toLowerCase()]=t[o]})}function k(e){let{baseMap:t,currentMap:i,baseColumns:r,currentColumns:n,columnMap:o,primaryKeys:s,changedOnly:a=!1}=e,l=(0,C.mergeKeysWithStatus)(Object.keys(t),Object.keys(i)),u={added:0,removed:0,modified:0},d=Object.entries(l).map(([e])=>{let a=t[e],l=i[e],d={_index:(0,x.keyToNumber)(e),__status:void 0};return a&&S(d,a,r,"base__",s),l&&S(d,l,n,"current__",s),a?l?function(e,t,i,r){let n=!1;for(let[o,s]of Object.entries(i)){if("index"===o||r.includes(o))continue;let{baseKey:i,currentKey:a}=function(e){return"baseColumnKey"in e&&"currentColumnKey"in e?{baseKey:e.baseColumnKey,currentKey:e.currentColumnKey}:{baseKey:e.key,currentKey:e.key}}(s);if("unknown"===i||"unknown"===a)continue;let l=e[i],u=t[a];b.default.isEqual(l,u)||(n=!0,s.status="modified")}return n}(a,l,o,s)&&(d.__status="modified",u.modified++):(d.__status="removed",u.removed++):(d.__status="added",u.added++),d});return a&&(d=d.filter(e=>"added"===e.__status||"removed"===e.__status||"modified"===e.__status)),{rows:d,rowStats:u}}e.s(["buildDiffRows",()=>k],72039);class R extends Error{context;details;constructor(e,t,i){super(t?`[${t}] ${e}`:e),this.context=t,this.details=i,this.name="DataGridValidationError"}}function E(e,t="DataFrame"){if(null!=e){if("object"!=typeof e)throw new R(`Expected an object, got ${typeof e}`,t);if(!("columns"in e))throw new R("Missing 'columns' property",t,{receivedKeys:Object.keys(e)});if(!Array.isArray(e.columns))throw new R(`'columns' must be an array, got ${typeof e.columns}`,t);if(!("data"in e))throw new R("Missing 'data' property",t,{receivedKeys:Object.keys(e)});if(!Array.isArray(e.data))throw new R(`'data' must be an array, got ${typeof e.data}`,t);(function(e,t="DataFrame"){e.forEach((e,i)=>{if(!e||"object"!=typeof e)throw new R(`Column at index ${i} is not an object`,t,{column:e});if("string"!=typeof e.key||""===e.key)throw new R(`Column at index ${i} has invalid 'key': expected non-empty string, got ${JSON.stringify(e.key)}`,t,{column:e});if("string"!=typeof e.name)throw new R(`Column '${e.key}' has invalid 'name': expected string, got ${typeof e.name}`,t,{column:e});if("string"!=typeof e.type)throw new R(`Column '${e.key}' has invalid 'type': expected string, got ${typeof e.type}`,t,{column:e})})})(e.columns,t),e.data.length>0&&function(e,t="DataFrame"){let i=e.columns.length;for(let r=0;r<e.data.length;r++){let n=e.data[r];if(!Array.isArray(n))throw new R(`Row at index ${r} is not an array`,t,{row:n,rowType:typeof n});if(n.length!==i)throw new R(`Row ${r} has ${n.length} values but expected ${i} (column count)`,t,{rowIndex:r,rowLength:n.length,columnCount:i,columns:e.columns.map(e=>e.key)})}}(e,t)}}function P(e,t,i={}){let{required:r=!1,caseInsensitive:n=!1,context:o="primaryKeys"}=i;if(r&&(!e||0===e.length))throw new R("Primary keys are required but none were provided",o);if(!e||0===e.length)return;let s=t.map(e=>e.key),a=n?s.map(e=>e.toLowerCase()):s;for(let t of e){let e=n?t.toLowerCase():t;if(!(n?a.includes(e):s.includes(t)))throw new R(`Primary key column '${t}' not found in columns`,o,{requestedKey:t,availableColumns:s,caseInsensitive:n})}let l=new Set;for(let t of e){let i=n?t.toLowerCase():t;if(l.has(i))throw new R(`Duplicate primary key: '${t}'`,o,{primaryKeys:e});l.add(i)}}function M(e,t){E(e,"dataframe"),e&&t?.primaryKeys&&P(t.primaryKeys,e.columns,{context:"toDataGrid"})}function D(e,t,i){if(E(e,"base"),E(t,"current"),i?.primaryKeys&&i.primaryKeys.length>0){let r=e?.columns??[],n=t?.columns??[],o=new Set([...r.map(e=>e.key),...n.map(e=>e.key)]);for(let e of i.primaryKeys)if(!o.has(e))throw new R(`Primary key column '${e}' not found in either base or current DataFrame`,"toDataDiffGrid",{requestedKey:e,baseColumns:r.map(e=>e.key),currentColumns:n.map(e=>e.key)})}}function T(e,t){if(!e)throw new R("DataFrame is required for value diff");if(E(e),!t||0===t.length)throw new R("Primary keys are required for value diff");P(t,e.columns,{required:!0,context:"toValueDiffGrid"});let i=e.columns.map(e=>e.key);if(!i.includes("in_a"))throw new R("Value diff DataFrame must include lowercase 'in_a' column");if(!i.includes("in_b"))throw new R("Value diff DataFrame must include lowercase 'in_b' column")}function O(e,i,r){D(e,i,r);let n=e??{columns:[],data:[]},o=i??{columns:[],data:[]},s=r?.primaryKeys??[],a=r?.pinnedColumns??[],l=r?.changedOnly??!1,u=r?.displayMode??"side_by_side",d=r?.columnsRenderMode??{},c=(0,x.dataFrameToRowObjects)(n),h=(0,x.dataFrameToRowObjects)(o),p=(0,m.buildMergedColumnMap)(n,o),f={},g={},v=!1,y=!1;if(0===s.length)c.forEach(e=>{f[String(e._index)]=e}),h.forEach(e=>{g[String(e._index)]=e});else{let e=(0,m.validatePrimaryKeys)(n.columns,s);c.forEach(t=>{let i=(0,m.getPrimaryKeyValue)(n.columns,e,t);i in f&&(v=!0),f[i]=t});let t=(0,m.validatePrimaryKeys)(o.columns,s);h.forEach(e=>{let i=(0,m.getPrimaryKeyValue)(o.columns,t,e);i in g&&(y=!0),g[i]=e})}let{rows:b,rowStats:C}=k({baseMap:f,currentMap:g,baseColumns:n.columns,currentColumns:o.columns,columnMap:p,primaryKeys:s,changedOnly:l}),{columns:S}=w({columns:(0,t.getDisplayColumns)({columnMap:p,primaryKeys:s,pinnedColumns:a,columnsRenderMode:d,changedOnly:l,rowStats:C,excludeColumns:["index"],strictMode:!1}),displayMode:u,allowIndexFallback:!0,baseTitle:r?.baseTitle,currentTitle:r?.currentTitle,headerProps:{primaryKeys:s,pinnedColumns:a,onPrimaryKeyChange:r?.onPrimaryKeyChange,onPinnedColumnsChange:r?.onPinnedColumnsChange,onColumnsRenderModeChanged:r?.onColumnsRenderModeChanged}});return{columns:S,rows:b,invalidPKeyBase:v,invalidPKeyCurrent:y}}function _(e,s){M(e,s);let a=s.primaryKeys??[],l=s.pinnedColumns??[],u=s.columnsRenderMode??{},d=(0,m.buildColumnMap)(e),{columns:c}=function(e){let{columns:t,headerProps:s,allowIndexFallback:a=!0}=e,l=[],u=!1;for(let e of(!t.some(e=>e.isPrimaryKey)&&a&&(l.push({field:"_index",headerName:"",width:50,cellClass:"index-column",resizable:!1,pinned:"left"}),u=!0),t))if(e.isPrimaryKey)l.push(function(e,t){let{key:n,name:s,columnType:a,columnRenderMode:l}=e;return{field:n,headerName:s,headerComponent:()=>(0,i.jsx)(r.DataFrameColumnGroupHeader,{name:s,columnStatus:"",columnType:a,pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged}),pinned:"left",cellRenderer:o.defaultRenderCell,columnType:a,columnRenderMode:l}}(e,s));else{let t=function(e,t){let{key:r,name:s,columnType:a,columnRenderMode:l}=e;return{field:r,headerName:s,headerComponent:()=>(0,i.jsx)(n.DataFrameColumnHeader,{name:s,columnType:a,pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged}),cellRenderer:o.defaultRenderCell,columnType:a,columnRenderMode:l}}(e,s);l.push({...t,pinned:e.frozen?"left":void 0})}return{columns:l,usedIndexFallback:u}}({columns:(0,t.getSimpleDisplayColumns)({columnMap:d,primaryKeys:a,pinnedColumns:l,columnsRenderMode:u}),headerProps:{pinnedColumns:l,onPinnedColumnsChange:s.onPinnedColumnsChange,onColumnsRenderModeChanged:s.onColumnsRenderModeChanged},allowIndexFallback:!0});return{columns:c,rows:(0,x.dataFrameToRowObjects)(e)}}function A(e,t){if(e<t){let i=(t-e)/e*100;return`+${i>=.1?i.toFixed(1):" <0.1 "}%`}if(!(e>t))return"0 %";{let i=(e-t)/e*100;return`-${i>=.1?i.toFixed(1):" <0.1 "}%`}}function F(e){return{columns:[{key:"name",name:"Name",type:"text"},{key:"base",name:"Base Rows",type:"number"},{key:"current",name:"Current Rows",type:"number"},{key:"delta",name:"Delta",type:"text"}],data:Object.entries(e).map(([e,t])=>{let i="number"==typeof t.base?t.base:null,r="number"==typeof t.curr?t.curr:null,n=null!==i&&null!==r?i!==r?A(i,r):"=":i===r?"N/A":null===i?"Added":null===r?"Removed":"N/A";return[e,i,r,n]})}}function I(e){return{columns:[{key:"name",name:"Name",type:"text"},{key:"current",name:"Row Count",type:"number"}],data:Object.entries(e).map(([e,t])=>[e,"number"==typeof t.curr?t.curr:null])}}function L(e,t){return null===e&&null!==t?"added":null!==e&&null===t?"removed":null!==e&&null!==t&&e!==t?"modified":void 0}function N(e){let t=I(e);return{columns:[{field:"name",headerName:"Name",resizable:!0},{field:"current",headerName:"Row Count",resizable:!0}],rows:(0,x.dataFrameToRowObjects)(t).map(e=>({...e,current:e.current??"N/A",__status:void 0}))}}function B(e){let t=F(e),i=(0,x.dataFrameToRowObjects)(t).map(e=>{let t=e.base,i=e.current;return{...e,base:t??"N/A",current:i??"N/A",__status:L("number"==typeof t?t:null,"number"==typeof i?i:null)}}),r=e=>{let t=e.data;if(!t)return;let i=t.base,r=t.current,n="N/A"===i?null:i,o="N/A"===r?null:r;if(n!==o){if(null===n||"number"==typeof n&&"number"==typeof o&&n<o)return"diff-cell-added";if(null===o||"number"==typeof n&&"number"==typeof o&&n>o)return"diff-cell-removed"}};return{columns:[{field:"name",headerName:"Name",resizable:!0,cellClass:r},{field:"base",headerName:"Base Rows",resizable:!0,cellClass:r},{field:"current",headerName:"Current Rows",resizable:!0,cellClass:r},{field:"delta",headerName:"Delta",resizable:!0,cellClass:r}],rows:i}}e.s(["validateToDataDiffGridInputs",()=>D,"validateToDataGridInputs",()=>M,"validateToValueDiffGridInputs",()=>T],622670),e.s([],848148),e.s(["toDataDiffGrid",()=>O],605740),e.s(["toDataGrid",()=>_],146459),e.s(["deltaPercentageString",()=>A],652058),e.s(["getRowCountDiffStatus",()=>L,"rowCountDiffResultToDataFrame",()=>F,"rowCountResultToDataFrame",()=>I],830055),e.s(["toRowCountDataGrid",()=>N],490395),e.s(["toRowCountDiffDataGrid",()=>B],603634),e.i(316575);var V=e.i(7284),H=e.i(778024),z=e.i(446547),j=e.i(73205),G=e.i(519273),W=e.i(578509),U=e.i(435983),$=e.i(446519);function q(e){return(0,$.default)("MuiListSubheader",e)}(0,U.default)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);let K=(0,z.styled)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,"default"!==i.color&&t[`color${(0,W.default)(i.color)}`],!i.disableGutters&&t.gutters,i.inset&&t.inset,!i.disableSticky&&t.sticky]}})((0,j.default)(({theme:e})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(e.vars||e).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:72}},{props:({ownerState:e})=>!e.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}}]}))),Q=d.forwardRef(function(e,t){let r=(0,G.useDefaultProps)({props:e,name:"MuiListSubheader"}),{className:n,color:o="default",component:s="li",disableGutters:a=!1,disableSticky:l=!1,inset:u=!1,...d}=r,c={...r,color:o,component:s,disableGutters:a,disableSticky:l,inset:u},h=(e=>{let{classes:t,color:i,disableGutters:r,inset:n,disableSticky:o}=e,s={root:["root","default"!==i&&`color${(0,W.default)(i)}`,!r&&"gutters",n&&"inset",!o&&"sticky"]};return(0,H.default)(s,q,t)})(c);return(0,i.jsx)(K,{as:s,className:(0,V.default)(h.root,n),ref:t,ownerState:c,...d})});Q&&(Q.muiSkipListHighlight=!0),e.s(["default",0,Q],130115)},757980,187726,913599,716396,162234,543482,412103,51297,64485,862031,522430,940159,e=>{"use strict";let t,i,r,n,o;e.s(["ProfileDiffResultView",()=>mI,"ProfileResultView",()=>mL],757980);var s,a,l,u,d,c,h,p,f,g,m,v,y,b,w,C,x,S,k,R=e.i(19483),E=e.i(324066),P=e.i(187725),M=e.i(862754);e.s(["createDataGrid",()=>ep,"createDataGridFromData",()=>ef],716396);var D=e.i(605740),T=e.i(146459),O=e.i(490395),_=e.i(603634),A=e.i(924011),F=e.i(73371),I=e.i(130115),L=e.i(135301),N=e.i(263712),B=e.i(197068),V=e.i(224378),H=e.i(203158),z=e.i(29134),j=e.i(912007),G=e.i(645364);let W=(0,P.createContext)(void 0),U=()=>(0,P.useContext)(W);function $({model:e,row:t,singleEnv:i,cllRunning:r,showMenu:n=!0}){let o=U(),{runAction:s}=(0,z.useRecceActionContext)(),{featureToggles:a}=(0,j.useRecceInstanceContext)(),{name:l,baseType:u,currentType:d,baseIndex:c,currentIndex:h}=t,p=d??u,[f,g]=(0,P.useState)(null),m=()=>{g(null)},v=!u||!d;return(0,R.jsx)(B.default,{title:"View column lineage",placement:"top",disableHoverListener:void 0===o||void 0!==c&&void 0===h,children:(0,R.jsxs)(E.default,{sx:{display:"flex",alignItems:"center",gap:"3px"},children:[(0,R.jsx)(E.default,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l}),(0,R.jsx)(E.default,{sx:{flex:1}}),r&&(0,R.jsx)(A.default,{size:12,color:"inherit"}),n&&!i&&"source"!==e.resource_type&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(F.default,{"aria-label":"Column options",className:"row-context-menu",size:"small",disabled:a.disableDatabaseQuery,onClick:e=>{e.stopPropagation(),g(e.currentTarget)},children:(0,R.jsx)(V.VscKebabVertical,{})}),(0,R.jsxs)(L.default,{anchorEl:f,open:!!f,onClose:m,slotProps:{list:{sx:{lineHeight:"20px"}}},children:[(0,R.jsx)(I.default,{sx:{m:0,p:"4px 12px",lineHeight:"20px"},children:"Diff"}),(0,R.jsx)(N.default,{onClick:()=>{(0,H.trackExploreAction)({action:H.EXPLORE_ACTION.PROFILE_DIFF,source:H.EXPLORE_SOURCE.SCHEMA_COLUMN_MENU,node_count:1}),s("profile_diff",{model:e.name,columns:[l]},{showForm:!1}),m()},disabled:v,sx:{fontSize:"0.85rem"},children:"Profile Diff"}),(0,R.jsx)(N.default,{onClick:()=>{(0,H.trackExploreAction)({action:H.EXPLORE_ACTION.HISTOGRAM_DIFF,source:H.EXPLORE_SOURCE.SCHEMA_COLUMN_MENU,node_count:1}),s("histogram_diff",{model:e.name,column_name:l,column_type:p},{showForm:!1}),m()},disabled:v||!p||!(0,G.supportsHistogramDiff)(p),sx:{fontSize:"0.85rem"},children:"Histogram Diff"}),(0,R.jsx)(N.default,{onClick:()=>{(0,H.trackExploreAction)({action:H.EXPLORE_ACTION.TOP_K_DIFF,source:H.EXPLORE_SOURCE.SCHEMA_COLUMN_MENU,node_count:1}),s("top_k_diff",{model:e.name,column_name:l,k:50},{showForm:!1}),m()},disabled:v,sx:{fontSize:"0.85rem"},children:"Top-k Diff"}),(0,R.jsx)(N.default,{onClick:()=>{(0,H.trackExploreAction)({action:H.EXPLORE_ACTION.VALUE_DIFF,source:H.EXPLORE_SOURCE.SCHEMA_COLUMN_MENU,node_count:1}),s("value_diff",{model:e.name,columns:[l]},{showForm:!0}),m()},disabled:v,sx:{fontSize:"0.85rem"},children:"Value Diff"})]})]})]})})}e.s(["LineageViewContext",0,W,"useLineageViewContext",0,U,"useLineageViewContextSafe",0,()=>{let e=(0,P.useContext)(W);if(!e)throw Error("useLineageViewContext must be used within a LineageViewProvider");return e}],187726);var q=e.i(675155);function K(e){let t=e.data;return t?.baseIndex!==void 0&&t?.currentIndex!==void 0&&t?.reordered===!0?"column-index-reordered schema-column schema-column-index":"schema-column schema-column-index"}function Q(){return"schema-column"}function X(e){let t=e.data;return t?.baseIndex!==void 0&&t?.currentIndex!==void 0&&t?.baseType!==t?.currentType?"column-body-type-changed schema-column":"schema-column"}e.s(["toValueDataGrid",()=>eo],913599);var Y=e.i(388797);function Z({columnName:e,primaryKeys:t}){let i=t.includes(e);return(0,R.jsx)(E.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:i&&(0,R.jsx)(V.VscKey,{})})}function J({params:e,column:t}){let{runAction:i}=(0,z.useRecceActionContext)(),{featureToggles:r}=(0,j.useRecceInstanceContext)(),[n,o]=(0,P.useState)(null),s=()=>{o(null)},a=(t,r)=>{i("value_diff_detail",{...e,...t},r)};return(0,R.jsxs)(E.default,{sx:{display:"flex"},children:[(0,R.jsx)(E.default,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t}),(0,R.jsx)(E.default,{sx:{flex:1}}),(0,R.jsx)(F.default,{"aria-label":"Column options",className:"row-context-menu",size:"small",disabled:r.disableDatabaseQuery,onClick:e=>{o(e.currentTarget)},children:(0,R.jsx)(Y.PiDotsThreeVertical,{})}),(0,R.jsxs)(L.default,{anchorEl:n,open:!!n,onClose:s,slotProps:{list:{sx:{lineHeight:"20px"}}},children:[(0,R.jsx)(I.default,{sx:{fontSize:"8pt",lineHeight:"20px"},children:"Action"}),(0,R.jsx)(N.default,{onClick:()=>{a({},{showForm:!0}),s()},sx:{fontSize:"10pt"},children:"Show mismatched values..."}),(0,R.jsxs)(N.default,{onClick:()=>{a({columns:[t]},{showForm:!1}),s()},sx:{fontSize:"10pt"},children:["Show mismatched values for '",t,"'"]})]})]})}function ee({value:e}){let t="N/A";return null!=e&&(t=e>.9999&&e<1?"~99.99 %":e<1e-4&&e>0?"~0.01 %":`${(100*e).toFixed(2)} %`),(0,R.jsx)(E.default,{sx:{textAlign:"right"},children:t})}function et(e){let t=e.data,i=e.colDef?.field??"";return t?(0,R.jsx)(ee,{value:t[i]}):null}var ei=e.i(196137);let er=[{key:"0",name:"Column",type:"text"},{key:"1",name:"Matched",type:"number"},{key:"2",name:"Matched %",type:"number"}];function en(e){let t=e.data;if(!t)return;let i=t["2"];return null!=i&&i<1?"diff-cell-modified":void 0}function eo(e,t){let{params:i}=t,r=Array.isArray(i.primary_key)?i.primary_key:[i.primary_key],n={...e.data,columns:er};return{columns:[{field:"__is_pk__",headerName:"",width:30,maxWidth:30,cellRenderer:e=>{let t=e.data;return t?(0,R.jsx)(Z,{columnName:String(t["0"]),primaryKeys:r}):null}},{field:"0",headerName:"Column",resizable:!0,cellRenderer:e=>{let t=e.data,r=e.colDef?.field??"";return t?(0,R.jsx)(J,{column:String(t[r]),params:i}):null},cellClass:"cell-show-context-menu"},{field:"1",headerName:"Matched",resizable:!0,cellClass:en},{field:"2",headerName:"Matched %",resizable:!0,cellRenderer:et,cellClass:en}],rows:(0,ei.dataFrameToRowObjects)(n)}}e.i(848148);var es=e.i(840908),ea=e.i(72039),el=e.i(882244),eu=e.i(231076),ed=e.i(622670);function ec(e,t,i){(0,ed.validateToValueDiffGridInputs)(e,t);let r=i?.pinnedColumns??[],n=i?.changedOnly??!1,o=i?.displayMode??"inline",s=i?.columnsRenderMode??{},a=(0,ei.dataFrameToRowObjects)(e),l=(0,el.buildJoinedColumnMap)(e),u={},d={},c=(0,el.validatePrimaryKeys)(e.columns,t),h=l.in_a.key,p=l.in_b.key;a.forEach(t=>{let i=(0,el.getPrimaryKeyValue)(e.columns,c,t);t[h]&&(u[i.toLowerCase()]=t),t[p]&&(d[i.toLowerCase()]=t)});let{rows:f,rowStats:g}=(0,ea.buildDiffRows)({baseMap:u,currentMap:d,baseColumns:e.columns,currentColumns:e.columns,columnMap:l,primaryKeys:t,changedOnly:n}),m=(0,eu.getDisplayColumns)({columnMap:l,primaryKeys:t,pinnedColumns:r,columnsRenderMode:s,changedOnly:n,rowStats:g,excludeColumns:["in_a","in_b"],strictMode:!0}),{columns:v}=(0,es.buildDiffColumnDefinitions)({columns:m,displayMode:o,allowIndexFallback:!1,baseTitle:i?.baseTitle,currentTitle:i?.currentTitle,headerProps:{primaryKeys:t,pinnedColumns:r,onPinnedColumnsChange:i?.onPinnedColumnsChange,onColumnsRenderModeChanged:i?.onColumnsRenderModeChanged}});return{columns:v,rows:f}}function eh(e){let t=e.current?.columns.find(e=>"column_name"===e.name.toLowerCase());return t?.name??"column_name"}function ep(e,t={}){let i=function(e){if((0,M.isQueryRun)(e)||(0,M.isQueryBaseRun)(e))return e.result?{kind:"query",result:e.result}:null;if((0,M.isQueryDiffRun)(e))return e.result?e.result.diff&&e.params?.primary_keys?{kind:"query_diff_joined",result:e.result,primaryKeys:e.params.primary_keys}:{kind:"query_diff_separate",result:e.result}:null;if((0,M.isValueDiffRun)(e))return e.result&&e.params?{kind:"value_diff",result:e.result,params:e.params}:null;if((0,M.isValueDiffDetailRun)(e)){if(!e.result||!e.params?.primary_key)return null;let t=e.params.primary_key,i=Array.isArray(t)?t:[t];return{kind:"value_diff_detail",result:e.result,primaryKeys:i}}return(0,M.isProfileRun)(e)?e.result?.current?{kind:"profile",result:e.result}:null:(0,M.isProfileDiffRun)(e)?e.result?{kind:"profile_diff",result:e.result}:null:(0,M.isRowCountRun)(e)?e.result?{kind:"row_count",result:e.result}:null:(0,M.isRowCountDiffRun)(e)?e.result?{kind:"row_count_diff",result:e.result}:null:null}(e);if(!i)return null;switch(i.kind){case"query":return(0,T.toDataGrid)(i.result,{primaryKeys:t.primaryKeys,pinnedColumns:t.pinnedColumns,columnsRenderMode:t.columnsRenderMode,onPrimaryKeyChange:t.onPrimaryKeyChange,onPinnedColumnsChange:t.onPinnedColumnsChange,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged});case"query_diff_separate":return(0,D.toDataDiffGrid)(i.result.base,i.result.current,t);case"query_diff_joined":if(!i.result.diff)return null;return ec(i.result.diff,i.primaryKeys,{changedOnly:t.changedOnly,pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,baseTitle:t.baseTitle,currentTitle:t.currentTitle,displayMode:t.displayMode,columnsRenderMode:t.columnsRenderMode,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged});case"value_diff":return eo(i.result,{params:i.params});case"value_diff_detail":return ec(i.result,i.primaryKeys,{changedOnly:t.changedOnly,pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,displayMode:t.displayMode,columnsRenderMode:t.columnsRenderMode,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged});case"profile":{if(!i.result.current)return null;let e=eh(i.result);return(0,T.toDataGrid)(i.result.current,{primaryKeys:[e],pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,columnsRenderMode:t.columnsRenderMode,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged})}case"profile_diff":{let e=eh(i.result);return(0,D.toDataDiffGrid)(i.result.base,i.result.current,{primaryKeys:[e],pinnedColumns:t.pinnedColumns,onPinnedColumnsChange:t.onPinnedColumnsChange,displayMode:t.displayMode,columnsRenderMode:t.columnsRenderMode,onColumnsRenderModeChanged:t.onColumnsRenderModeChanged})}case"row_count":return(0,O.toRowCountDataGrid)(i.result);case"row_count_diff":return(0,_.toRowCountDiffDataGrid)(i.result);default:return null}}function ef(e,t){switch(e.type){case"single":return(0,T.toDataGrid)(e.dataframe,t??{});case"dual":return(0,D.toDataDiffGrid)(e.base,e.current,t??{});case"joined":return ec(e.dataframe,e.primaryKeys,t??{});case"schema_diff":return function(e,t={}){let{node:i,cllRunningMap:r,showMenu:n}=t;return{columns:[{field:"baseIndex",headerName:"",resizable:!0,minWidth:35,width:35,cellClass:K},{field:"currentIndex",headerName:"",resizable:!0,minWidth:35,width:35,cellClass:K},{field:"name",headerName:"Name",resizable:!0,cellRenderer:i?e=>{let t=e.data;return t?(0,R.jsx)($,{model:i,row:t,cllRunning:r?.get(t.name)??!1,showMenu:n}):null}:void 0,cellClass:Q},{field:"baseType",headerName:"Base Type",resizable:!0,cellClass:X},{field:"currentType",headerName:"Current Type",resizable:!0,cellClass:X}],rows:Object.values(e)}}(function(e={},t={}){let i={};Object.entries((0,q.mergeKeysWithStatus)(Object.keys(e),Object.keys(t))).forEach(([e,t])=>{i[e]={name:e,reordered:"reordered"===t,__status:void 0}});let r=0;return Object.entries(e).forEach(([e,t])=>{null!=t&&(i[e].baseIndex=r+=1,i[e].baseType=t.type)}),r=0,Object.entries(t).forEach(([e,t])=>{null!=t&&(i[e].currentIndex=r+=1,i[e].currentType=t.type)}),i}(e.base,e.current),t??{});case"schema_single":return function(e={},t={}){let{node:i,cllRunningMap:r,showMenu:n}=t;return{columns:[{field:"index",headerName:"",resizable:!0,minWidth:35,width:35,cellClass:"schema-column schema-column-index"},{field:"name",headerName:"Name",resizable:!0,cellRenderer:i?e=>{let t=e.data;return t?(0,R.jsx)($,{model:i,row:t,cllRunning:r?.get(t.name)??!1,singleEnv:!0,showMenu:n}):null}:void 0,cellClass:"schema-column"},{field:"type",headerName:"Type",resizable:!0,cellClass:"schema-column"}],rows:Object.entries(e).filter(([e,t])=>null!=t).map(([e,t],i)=>({name:e,index:i+1,type:t.type,__status:void 0}))}}(e.columns,t??{})}}var eg=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){let r=t?this.allAsyncListeners:this.allSyncListeners,n=r.get(e);return!n&&i&&(n=new Set,r.set(e,n)),n}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){let r=this.getListeners(e,i,!1);r&&(r.delete(t),0===r.size&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let i=e.type;if(t&&"event"in e){let t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}let{frameworkOverrides:r}=this,n=e=>{let i=r?()=>r.wrapIncoming(e):e;t?this.dispatchAsync(i):i()},o=this.getListeners(i,t,!1);if((o?.size??0)>0)for(let t of new Set(o))o?.has(t)&&n(()=>t(e));let s=this.getGlobalListeners(t);if(s.size>0)for(let t of new Set(s))n(()=>t(i,e))}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();for(let t of(this.asyncFunctionsQueue=[],e))t()}};function em(e){return null==e||""===e?null:e}function ev(e){return null!=e&&""!==e}function ey(e){return!ev(e)}function eb(e){return null!=e&&"function"==typeof e.toString?e.toString():null}function ew(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}var eC=/[&<>"']/g,ex={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function eS(e){return e?.toString().toString()??null}function ek(e){return eS(e)?.replace(eC,e=>ex[e])??null}function eR(e){return"string"==typeof e&&e.startsWith("=")&&e.length>1}function eE(e){return e.eRootDiv.getRootNode()}function eP(e){return eE(e).activeElement}function eM(e){let{gos:t,eRootDiv:i}=e,r=null,n=t.get("getDocument");return(n&&ev(n)?r=n():i&&(r=i.ownerDocument),r&&ev(r))?r:document}function eD(e){let t=eP(e);return null===t||t===eM(e).body}function eT(e){return eM(e).defaultView||window}function eO(e){let t=null,i=null;try{t=eM(e).fullscreenElement}catch(e){}finally{t||(t=eE(e));let r=t.querySelector("body");i=r||(t instanceof ShadowRoot?t:t instanceof Document?t?.documentElement:t)}return i}function e_(e,t,i){null==i||"string"==typeof i&&""==i?eF(e,t):eA(e,t,i)}function eA(e,t,i){var r;e.setAttribute((r=t,`aria-${r}`),i.toString())}function eF(e,t){var i;e.removeAttribute((i=t,`aria-${i}`))}function eI(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function eL(e,t){e_(e,"label",t)}function eN(e,t){e_(e,"labelledby",t)}function eB(e,t){e_(e,"invalid",t)}function eV(e,t){e_(e,"hidden",t)}function eH(e,t){eA(e,"expanded",t)}function ez(e,t){eA(e,"rowindex",t)}function ej(e,t){eA(e,"colindex",t)}function eG(e,t){e_(e,"selected",t)}function eW(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var eU="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function e$(e){return!!e&&!!e.matches("input, select, button, textarea")&&!!e.matches(eU)&&e6(e)}function eq(e,t,i={}){let{skipAriaHidden:r}=i;e.classList.toggle("ag-hidden",!t),r||eV(e,!t)}function eK(e,t){let i="disabled",r=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);for(let t of(r(e),e.querySelectorAll("input")??[]))r(t)}function eQ(e,t,i){let r=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++r>i)break}else if(e===i)break}return!1}function eX(e){let{height:t,width:i,borderTopWidth:r,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:u,paddingLeft:d,marginTop:c,marginRight:h,marginBottom:p,marginLeft:f,boxSizing:g}=window.getComputedStyle(e),m=Number.parseFloat;return{height:m(t||"0"),width:m(i||"0"),borderTopWidth:m(r||"0"),borderRightWidth:m(n||"0"),borderBottomWidth:m(o||"0"),borderLeftWidth:m(s||"0"),paddingTop:m(a||"0"),paddingRight:m(l||"0"),paddingBottom:m(u||"0"),paddingLeft:m(d||"0"),marginTop:m(c||"0"),marginRight:m(h||"0"),marginBottom:m(p||"0"),marginLeft:m(f||"0"),boxSizing:g}}function eY(e){let t=eX(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function eZ(e){let t=eX(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function eJ(e){let{height:t,marginBottom:i,marginTop:r}=eX(e);return Math.floor(t+i+r)}function e0(e){let{width:t,marginLeft:i,marginRight:r}=eX(e);return Math.floor(t+i+r)}function e1(e){let t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:r,borderRightWidth:n,borderBottomWidth:o}=eX(e);return{top:t.top+(i||0),left:t.left+(r||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function e2(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function e5(e,t,i){i&&(t*=-1),e.scrollLeft=t}function e3(e){for(;e?.firstChild;)e.firstChild.remove()}function e4(e){e?.parentNode&&e.remove()}function e8(e){return!!e.offsetParent}function e6(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!e8(e)||"visible"!==window.getComputedStyle(e).visibility)}function e7(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function e9(e){return()=>{let t=e();return!t||te(t)||tt(t)}}function te(e){return e.clientWidth<e.scrollWidth}function tt(e){return e.clientHeight<e.scrollHeight}function ti(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):tr(e,t)}function tr(e,t){t=to(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function tn(e,t){t=to(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function to(e){return"number"==typeof e?`${e}px`:e}function ts(e){return e instanceof Node||e instanceof HTMLElement}function ta(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function tl(e,t,i){let r=eT(e).ResizeObserver,n=r?new r(i):null;return n?.observe(t),()=>n?.disconnect()}function tu(e,t){let i=eT(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var td="data-ref";function tc(){return c??(c=document.createTextNode(" ")),c.cloneNode()}function th(e){let{attrs:t,children:i,cls:r,ref:n,role:o,tag:s}=e,a=document.createElement(s);if(r&&(a.className=r),n&&a.setAttribute(td,n),o&&a.setAttribute("role",o),t)for(let e of Object.keys(t))a.setAttribute(e,t[e]);if(i)if("string"==typeof i)a.textContent=i;else{let e=!0;for(let t of i)t&&("string"==typeof t?(a.appendChild(document.createTextNode(t)),e=!1):"function"==typeof t?a.appendChild(t()):(e&&(a.appendChild(tc()),e=!1),a.append(th(t)),a.appendChild(tc())))}return a}var tp=["touchstart","touchend","touchmove","touchcancel","scroll"],tf=["wheel"],tg={},tm=(t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},e=>{if("boolean"==typeof tg[e])return tg[e];let i=document.createElement(t[e]||"div");return tg[e="on"+e]=e in i});function tv(e,t,i){return 0!==i&&Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))<=i}var ty=(e,t)=>{let i=e.identifier;for(let e=0,r=t.length;e<r;++e){let r=t[e];if(r.identifier===i)return r}return null};function tb(e,t){return e.gos.isElementInThisInstance(t.target)}var tw=(e,...t)=>{for(let i of t){let[t,r,n,o]=i;t.addEventListener(r,n,o),e.push(i)}},tC=e=>{if(e){for(let[t,i,r,n]of e)t.removeEventListener(i,r,n);e.length=0}},tx=e=>{e.cancelable&&e.preventDefault()};function tS(e,t){return t}function tk(e){return e?.getLocaleTextFunc()??tS}var tR=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){let{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new eg),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService?.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let i=[];for(let r of Object.keys(t)){let n=t[r];n&&i.push(this._setupListener(e,r,n))}return i}_setupListener(e,t,i){let r;if(this.destroyed)return()=>null;if(void 0!==e.__addEventListener)e.__addEventListener(t,i),r=()=>(e.__removeEventListener(t,i),null);else{let o="global"===e.eventServiceType;if(e instanceof HTMLElement){var n;let r,o,s,a;n=t,s=tp.includes(n),a=tf.includes(n),null!=(o=!!s||!a&&void 0)&&(r={passive:o}),e.addEventListener(t,i,r)}else o?e.addListener(t,i):e.addEventListener(t,i);r=o?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}setupPropertyListener(e,t){let{gos:i}=this;i.addPropertyEventListener(e,t);let r=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(e=>e!==r),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let i=e.join("-")+this.propertyListenerId++,r=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}t({type:"propertyChanged",changeSet:e.changeSet,source:e.source})};for(let t of e)this.setupPropertyListener(t,r)}getLocaleTextFunc(){return tk(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){let i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},tE=class extends tR{},tP=new Set,tM=(e,t)=>{tP.has(t)||(tP.add(t),e())};tM._set=tP;var tD={pending:!1,funcs:[]},tT={pending:!1,funcs:[]};function tO(e,t="setTimeout",i){let r="raf"===t?tT:tD;if(r.funcs.push(e),r.pending)return;r.pending=!0;let n=()=>{let e=r.funcs.slice();for(let t of(r.funcs.length=0,r.pending=!1,e))t()};"raf"===t?tu(i,n):window.setTimeout(n,0)}function t_(e,t,i){let r;return function(...n){let o=this;return window.clearTimeout(r),r=window.setTimeout(function(){e.isAlive()&&t.apply(o,n)},i)}}function tA(e,t){let i=0;return function(...r){let n=Date.now();n-i<t||(i=n,e.apply(this,r))}}var tF=new Set(["__proto__","constructor","prototype"]);function tI(e,t,i=!0,r=!1){ev(t)&&function(e,t){if(null!=e){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(let i of Object.keys(e).filter(e=>!tF.has(e)))t(i,e[i])}}(t,(t,n)=>{let o=e[t];o!==n&&(r&&null==o&&null!=n&&"object"==typeof n&&n.constructor===Object&&(o={},e[t]=o),tL(n)&&tL(o)&&!Array.isArray(o)?tI(o,n,i,r):(i||void 0!==n)&&(e[t]=n))})}function tL(e){return"object"==typeof e&&null!==e}var tN=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return{...t};let i={};return tI(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?tI(i,t,!0,!0):i={...i,...t},e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&tI(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if("deep"===e.mergeStrategy){let r=tB(t);if(r&&"object"==typeof r&&"object"==typeof i)return e.applyGlobalGridOptions({[t]:i})[t]}return i}};function tB(e){return tN.gridOptions?.[e]}tN.gridOptions=void 0,tN.mergeStrategy="shallow";var tV={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},tH="https://www.ag-grid.com";function tz(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)}function tj(e,...t){tM(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function tG(e,...t){tM(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var tW=new Set,tU={},t$={},tq=!1,tK=!1;function tQ(e,t,i=!1){let r,n,o;i||(tq=!0),h||(h=e.version),n=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`,e.version?!function(e){let[t,i]=e.version.split(".")||[],[r,n]=h.split(".")||[];return t===r&&i===n}(e)&&tG(n(`'${e.moduleName}' is version ${e.version} but the other modules are version ${h}.`)):tG(n(`'${e.moduleName}' is incompatible.`)),(o=e.validate?.())&&!o.isValid&&tG(`${o.message}`);let s=e.rowModels??["all"];for(let i of(tW.add(e),void 0!==t?(tK=!0,void 0===t$[t]&&(t$[t]={}),r=t$[t]):r=tU,s))void 0===r[i]&&(r[i]={}),r[i][e.moduleName]=e;if(e.dependsOn)for(let r of e.dependsOn)tQ(r,t,i)}function tX(e,t,i){let r=i=>!!tU[i]?.[e]||!!t$[t]?.[i]?.[e];return r(i)||r("all")}var tY=class{static register(e){tQ(e,void 0)}static registerModules(e){for(let t of e)tQ(t,void 0)}},tZ="35.0.0",tJ="_version_",t0=null,t1=`${tH}/javascript-data-grid`;function t2(e,t,i){return t0?.(e,t)??[t6(e,t,i)]}function t5(e,t,i,r,n){e(`${r?"warning":"error"} #${t}`,...t2(t,i,n))}function t3(e){return void 0===e?"undefined":null===e?"null":e}function t4(e,t){return`${e}?${t.toString()}`}function t8(e,t){let i=new URLSearchParams;if(i.append(tJ,tZ),t)for(let e of Object.keys(t))i.append(e,function(e){let t=e;return e instanceof Error?t=e.toString():"object"==typeof e&&(t=function(e){if(!e)return String(e);let t={};for(let i of Object.keys(e))"object"!=typeof e[i]&&"function"!=typeof e[i]&&(t[i]=e[i]);return JSON.stringify(t)}(e)),t}(t[e]));let r=`${t1}/errors/${e}`,n=t4(r,i);return n.length<=2e3?n:function(e,t,i){let r=Array.from(t.entries()).sort((e,t)=>t[1].length-e[1].length),n=t4(e,t);for(let[i,o]of r){if(i===tJ)continue;let r=n.length-2e3;if(r<=0)break;let s=r+3,a=o.length-s>100?o.slice(0,o.length-s)+"...":o.slice(0,100)+"...";t.set(i,a),n=t4(e,t)}return n}(r,i,0)}var t6=(e,t,i)=>{let r=t8(e,t),n=`${i?i+" \n":""}Visit ${r}`;return`${n}${i?"":" \n  Alternatively register the ValidationModule to see the full message in the console."}`};function t7(...e){t5(tj,e[0],e[1],!0)}function t9(...e){t5(tG,e[0],e[1],!1)}function ie(e,t,i){t5(tG,e,t,!1,i)}function it(...e){var t;let i;return t=void 0,i=e[0],`error #${i} `+t2(i,e[1],t).join(" ")}function ii(e,t){return e.get("rowModelType")===t}function ir(e,t){return ii(e,"clientSide")}function io(e,t){return ii(e,"serverSide")}function is(e,t){return e.get("domLayout")===t}function ia(e){return void 0!==iO(e)}function il(e){return"function"==typeof e.get("getRowHeight")}function iu(e,t,i=!1,r){let{gos:n,environment:o}=e;if(null==r&&(r=o.getDefaultRowHeight()),il(n)){if(i)return{height:r,estimated:!0};let e={node:t,data:t.data},o=n.getCallback("getRowHeight")(e);if(ic(o))return 0===o&&t7(23),{height:Math.max(1,o),estimated:!1}}if(t.detail&&n.get("masterDetail")){var s=n;if(s.get("detailRowAutoHeight"))return{height:1,estimated:!1};let e=s.get("detailRowHeight");return ic(e)?{height:e,estimated:!1}:{height:300,estimated:!1}}let a=n.get("rowHeight");return{height:a&&ic(a)?a:r,estimated:!1}}function id(e){let{environment:t,gos:i}=e,r=i.get("rowHeight");if(!r||ey(r))return t.getDefaultRowHeight();let n=t.refreshRowHeightVariable();return -1!==n?n:(t7(24),t.getDefaultRowHeight())}function ic(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function ih(e,t,i){let r=t[e.getDomDataKey()];return r?r[i]:void 0}function ip(e,t,i,r){let n=e.getDomDataKey(),o=t[n];ey(o)&&(o={},t[n]=o),o[i]=r}function ig(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function im(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||is(e,"print"))}function iv(e){let t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")}function iy(e){let t=e.get("groupAggFiltering");return"function"==typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function ib(e){return e.get("grandTotalRow")}function iw(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function iC(e,t,i){return!!t.group&&!t.footer&&iw(e,i)}function ix(e){let t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!=typeof i&&(tM(()=>t7(25,{id:i}),"getRowIdString"),i=String(i)),i}}function iS(e){return e?.checkboxes??!0}function ik(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function iR(e){if("object"==typeof e)return e.checkboxLocation??"selectionColumn"}function iE(e){return e?.hideDisabledCheckboxes??!1}function iP(e){let t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function iM(e){let t=e.get("cellSelection")??!1;return("object"==typeof t&&t.enableColumnSelection)??!1}function iD(e){let t=e.get("rowSelection")??"single";if("string"==typeof t){let t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function iT(e){let t=e.get("rowSelection");return"string"==typeof t?e.get("isRowSelectable"):t?.isRowSelectable}function iO(e){let t="beanName"in e&&"gos"===e.beanName?e.get("rowSelection"):e.rowSelection;if("string"==typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function i_(e){return"multiRow"===iO(e)}function iA(e){let t=e.get("rowSelection");if("string"==typeof t){let t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function iF(e,t=!0){let i=e.get("rowSelection");return"object"!=typeof i?t?"all":void 0:"multiRow"===i.mode?i.selectAll:"all"}function iI(e){let t=iA(e);return"descendants"===t||"filteredDescendants"===t}function iL(e){let t=e.get("rowSelection");return"object"==typeof t&&t.masterSelects||"self"}function iN(e){return"legacy"===e.get("columnMenu")}function iB(e,t){return e.addCommon(t)}function iV(e,t){return e[t]??e.gridOptions?.[t]??tB(t)??tV[t]}var iH={resizable:!0,sortable:!0},iz=0;function ij(e){return e instanceof iU}var iG=["asc","desc",null],iW=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],iU=class extends tE{constructor(e,t,i,r){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=r,this.isColumn=!0,this.instanceId=iz++,this.autoHeaderHeight=null,this.sortDef=i$(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new eg,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=ek(i)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}initState(){let{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:r}}=this;t?.initCol(this);let n=e.hide;void 0!==n?this.visible=!n:this.visible=!e.initialHide,i?.initCol(this),r?.initCol(this)}setColDef(e,t,i){let r=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),r&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){let{gos:e,colDef:{field:t,tooltipField:i}}=this,r=e.get("suppressFieldDotNotation");this.fieldContainsDots=ev(t)&&t.includes(".")&&!r,this.tooltipFieldContainsDots=ev(i)&&i.includes(".")&&!r}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){let e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;e&&t&&this.addManagedListeners(t,{colDefChanged:t=>{let i=e.recreateColDef(this.colDef);this.setColDef(i,i,t.source)}})}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t=e.width,i=e.initialWidth;return Math.max(Math.min(null!=t?t:null!=i?i:200,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let i=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){let i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return iB(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??iH[e]}isColumnFunc(e,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createColumnFunctionCallbackParams(e))}createColumnEvent(e,t){return iB(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){let e=[],{sort:t,initialSort:i}=this.colDef,r=null===t?t:iZ(t?.type),n=null===i?i:iZ(i?.type);return r&&e.push(r),n&&e.push(n),e}getSortingOrder(){let e=this.getColDefAllowedSortTypes().includes("absolute")?iW:iG;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??e).map(e=>i$(e))}getAvailableSortTypes(){return new Set(this.getSortingOrder().reduce((e,t)=>(t.direction&&e.push(t.type),e),this.getColDefAllowedSortTypes()))}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e,t=!1){t||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.getSort()}isSortDescending(){return"desc"===this.getSort()}isSortNone(){return ey(this.getSort())}isSorting(){return ev(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return t7(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){let i=!0===e;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return iB(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(ey(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e);return Math.max(this.colDef.colSpan(t),1)}getRowSpan(e){if(ey(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e);return Math.max(this.colDef.rowSpan(t),1)}setActualWidth(e,t,i=!1){e=Math.min(e=Math.max(e,this.minWidth),this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,null!=this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}isAllowFormula(){return!0===this.colDef.allowFormula}dispatchColEvent(e,t,i){let r=this.createColumnEvent(e,t);i&&tI(r,i),this.colEventSvc.dispatchEvent(r)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function i$(e){return iQ(e)?{direction:e.direction,type:e.type}:{direction:iY(e),type:iZ(e)}}function iq(e){return"asc"===e||"desc"===e||null===e}function iK(e){return"default"===e||"absolute"===e}function iQ(e){return!!e&&"object"==typeof e&&iK(e.type)&&iq(e.direction)}function iX(e,t){return e?t?e.type===t.type&&e.direction===t.direction:!e||null===e.direction:!t||null===t.direction}function iY(e){return iq(e)?e:null}function iZ(e){return iK(e)?e:"default"}function iJ(e){return e instanceof i0}var i0=class extends tE{constructor(e,t,i,r){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=r,this.isColumn=!1,this.expandable=!1,this.instanceId=iz++,this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(let t of this.children)ij(t)?e(t):iJ(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(let t of this.children)ij(t)?e.push(t):iJ(t)&&t.addLeafColumns(e)}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);for(let t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(let t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1,r=this.findChildrenRemovingPadding();for(let n=0,o=r.length;n<o;n++){let o=r[n];if(!o.isVisible())continue;let s=o.getColumnGroupShow();"open"===s?(e=!0,i=!0):"closed"===s?(t=!0,i=!0):(e=!0,t=!0)}let n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=i=>{for(let r of i)iJ(r)&&r.isPadding()?t(r.children):e.push(r)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},i1={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function i2(e,t,i){let r={},n=e.gos;return Object.assign(r,n.get("defaultColGroupDef")),Object.assign(r,t),n.validateColDef(r,i),r}var i5=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=eb(e);let i=0;for(;;){let r=e??t;if(r?0!==i&&(r+="_"+i):r=i,!this.existingKeys[r]){let t=String(r);return e&&i>0&&t7(273,{providedId:e,usedId:t}),this.existingKeys[t]=!0,t}i++}}};function i3(e){if(e?.length)return e[e.length-1]}function i4(e,t,i){if(e===t)return!0;if(!e||!t)return null==e&&null==t;let r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n]&&!i?.(e[n],t[n]))return!1;return!0}function i8(e,t){if(e){for(let i of e)if(t(i))return!0}}function i6(e,t){let i=e.indexOf(t);i>=0&&e.splice(i,1)}function i7(e,t,i){for(let i=0;i<t.length;i++)i6(e,t[i]);for(let r=t.length-1;r>=0;r--)e.splice(i,0,t[r])}Object.freeze([]);var i9="ag-Grid-AutoColumn",re="ag-Grid-SelectionColumn",rt="ag-Grid-RowNumbersColumn";function ri(e){let t=[],i=e=>{for(let r=0;r<e.length;r++){let n=e[r];ij(n)?t.push(n):iJ(n)&&i(n.getChildren())}};return i(e),t}function rr(e){return e.reduce((e,t)=>e+t.getActualWidth(),0)}function rn(e,t,i){let r={};if(!t)return;rm(null,t,e=>{r[e.getInstanceId()]=e}),i&&rm(null,i,e=>{r[e.getInstanceId()]=null});let n=Object.values(r).filter(e=>null!=e);e.context.destroyBeans(n)}function ro(e){return e.getId().startsWith(i9)}function rs(e){let t="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return t?.startsWith(re)??!1}function ra(e){let t="string"==typeof e?e:"getColId"in e?e.getColId():e.colId;return t?.startsWith(rt)??!1}function rl(e){let t=[];return e instanceof Array?t=e:"string"==typeof e&&(t=e.split(",")),t}function ru(e){return"optionsUpdated"===e?"gridOptionsChanged":e}function rd(e,t){let i=e===t,r=e.getColDef()===t,n=e.getColId()==t;return i||r||n}function rc(e){let{sort:t,initialSort:i}=e,r=iQ(t)||iq(t),n=iQ(i)||iq(i);return r?i$(t):n?i$(i):null}var rh=(e,t)=>{iJ(e)&&e.setupExpandable(),e.originalParent=t};function rp(e,t,i,r,n,o,s,a){if(!t)return[];let{colGroupSvc:l}=e,u=Array(t.length);for(let d=0;d<u.length;d++){let c=t[d];l&&void 0!==c.children?u[d]=l.createProvidedColumnGroup(r,c,i,n,o,s,a):u[d]=function(e,t,i,r,n,o){let s=function(e,t){if(t)for(let i=0;i<t.length;i++){let r=t[i].getUserProvidedColDef();if(r){if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(r.field===e.field)return{idx:i,column:t[i]};continue}if(r===e)return{idx:i,column:t[i]}}}}(i,r);s&&r?.splice(s.idx,1);let a=s?.column;if(a){let t=rg(e,i,a.getColId());a.setColDef(t,i,o),function(e,t,i,r){rf(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,r);let n=t.getFlex();if(null==n||!(n>0))if(null!=i.width)t.setActualWidth(i.width,r);else{let e=t.getActualWidth();t.setActualWidth(e,r)}}(e,a,t,o)}else{let r=n.getUniqueKey(i.colId,i.field);a=new iU(rg(e,i,r),i,r,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}(e,r,c,n,o,a)}return u}function rf(e,t,i,r,n,o,s,a){let{sortSvc:l,pinnedCols:u,colFlex:d}=e;void 0!==i&&t.setVisible(!i,a),l&&(l.updateColSort(t,r,a),void 0!==n&&l.setColSortIndex(t,n)),void 0!==o&&u?.setColPinned(t,o),void 0!==s&&d?.setColFlex(t,s)}function rg(e,t,i,r){var n,o,s,a;let l,u,{gos:d,dataTypeSvc:c}=e,h={};tI(h,d.get("defaultColDef"),!1,!0);let p=(n=e,o=h,s=t,a=i,l=n.dataTypeSvc?.updateColDefAndGetColumnType(o,s,a),u=s.type??l??o.type,o.type=u,u?rl(u):void 0);p&&function(e,t,i){if(!t.length)return;let r=Object.assign({},i1),n=e.gos.get("columnTypes")||{};for(let e of Object.keys(n)){let t=n[e];e in r?t7(34,{key:e}):(t.type&&t7(35),r[e]=t)}for(let e of t){let t=r[e.trim()];t?tI(i,t,!1,!0):t7(36,{t:e})}}(e,p,h);let f=h.cellDataType;tI(h,t,!1,!0),void 0!==f&&(h.cellDataType=f);let g=d.get("autoGroupColumnDef"),m=iv(d);return t.rowGroup&&g&&m&&tI(h,{sort:g.sort,initialSort:g.initialSort},!1,!0),c?.postProcess(h),c?.validateColDef(h),d.validateColDef(h,i,r),h}function rm(e,t,i){if(t)for(let r=0;r<t.length;r++){let n=t[r];iJ(n)&&rm(n,n.getChildren(),i),i(n,e)}}function rv(e,t){let i=[],r=[],n=[];return(e.forEach(e=>{let t=e.getColDef().lockPosition;"right"===t?n.push(e):"left"===t||!0===t?i.push(e):r.push(e)}),t.get("enableRtl"))?[...n,...r,...i]:[...i,...r,...n]}function ry(e,t){let i=!0;return rm(null,t,t=>{if(!iJ(t))return;let r=t.getColGroupDef();if(!r?.marryChildren)return;let n=[];for(let i of t.getLeafColumns()){let t=e.indexOf(i);n.push(t)}Math.max.apply(Math,n)-Math.min.apply(Math,n)>t.getLeafColumns().length-1&&(i=!1)}),i}function rb(e,t){if(!e||0==e.length)return;let i=t(e[0]);for(let r=1;r<e.length;r++)if(i!==t(e[r]))return;return i}function rw(e,t,i){if(!t.length)return;let r=1===t.length?t[0]:null,n=rb(t,e=>e.getPinned());e.dispatchEvent({type:"columnPinned",pinned:null!=n?n:null,columns:t,column:r,source:i})}function rC(e,t,i,r,n=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:1===t.length?t[0]:null,flexColumns:n,finished:i,source:r})}function rx(e,t,i){let{colModel:r,rowGroupColsSvc:n,pivotColsSvc:o,autoColSvc:s,selectionColSvc:a,colAnimation:l,visibleCols:u,pivotResultCols:d,environment:c,valueColsSvc:h,eventSvc:p,gos:f}=e,g=r.getColDefCols()??[],m=a?.getColumns();if(!g.length&&!m?.length)return!1;if(t?.state&&!t.state.forEach)return t7(32),!1;let v=(r,s,a,l,u)=>{let d;if(!r)return;let p=(d=t.defaultState,(e,t)=>{let i={value1:void 0,value2:void 0},r=!1;return s&&(void 0!==s[e]&&(i.value1=s[e],r=!0),ev(t)&&void 0!==s[t]&&(i.value2=s[t],r=!0)),!r&&d&&(void 0!==d[e]&&(i.value1=d[e]),ev(t)&&void 0!==d[t]&&(i.value2=d[t])),i}),f=p("flex").value1,g=p("sort").value1,m=p("sortType").value1,v=iq(g)||iK(m),y=iZ(m),b=iY(g);if(rf(e,r,p("hide").value1,v?{type:y,direction:b}:void 0,p("sortIndex").value1,p("pinned").value1,f,i),null==f){let e=p("width").value1;if(null!=e){let t=r.getColDef().minWidth??c.getDefaultColumnMinWidth();null!=t&&e>=t&&r.setActualWidth(e,i)}}!u&&r.isPrimary()&&(h?.syncColumnWithState(r,i,p),n?.syncColumnWithState(r,i,p,a),o?.syncColumnWithState(r,i,p,l))},y=(l,d,c)=>{let h=rS(e,i),g=d.slice(),m={},y={},b=[],w=[],C=[],x=0,S=n?.columns.slice()??[],k=o?.columns.slice()??[];for(let e of l){let t=e.colId;if(t.startsWith(i9)){b.push(e),C.push(e);continue}if(rs(t)){w.push(e),C.push(e);continue}let i=c(t);i?(v(i,e,m,y,!1),i6(g,i)):(C.push(e),x+=1)}let R=e=>v(e,null,m,y,!1);g.forEach(R),n?.sortColumns(rE.bind(n,m,S)),o?.sortColumns(rE.bind(o,y,k)),r.refreshCols(!1,i);let E=(e,t,i=[])=>{for(let r of t){let t=e(r.colId);i6(i,t),v(t,r,null,null,!0)}i.forEach(R)};return E(e=>s?.getColumn(e)??null,b,s?.getColumns()?.slice()),E(e=>a?.getColumn(e)??null,w,a?.getColumns()?.slice()),function(e,t,i){if(!e.applyOrder||!e.state)return;let r=[];for(let t of e.state)null!=t.colId&&r.push(t.colId);!function(e,t,i,r){if(null==e)return;let n=[],o={};for(let i of t){if(o[i])continue;let t=e.map[i];t&&(n.push(t),o[i]=!0)}let s=0;for(let t of e.list){let e=t.getColId();null==o[e]&&(e.startsWith(i9)?n.splice(s++,0,t):n.push(t))}ry(n=rv(n,r),i.getColTree())?e.list=n:t7(39)}(t.cols,r,t,i)}(t,r,f),u.refresh(i),p.dispatchEvent({type:"columnEverythingChanged",source:i}),h(),{unmatchedAndAutoStates:C,unmatchedCount:x}};l?.start();let{unmatchedAndAutoStates:b,unmatchedCount:w}=y(t.state||[],g,e=>r.getColDefCol(e));return(b.length>0||ev(t.defaultState))&&(w=y(b,d?.getPivotResultCols()?.list??[],e=>d?.getPivotResultCol(e)??null).unmatchedCount),l?.finish(),0===w}function rS(e,t){let{rowGroupColsSvc:i,pivotColsSvc:r,valueColsSvc:n,colModel:o,sortSvc:s,eventSvc:a}=e,l={rowGroupColumns:i?.columns.slice()??[],pivotColumns:r?.columns.slice()??[],valueColumns:n?.columns.slice()??[]},u=rk(e),d={};for(let e of u)d[e.colId]=e;return()=>{let n=(e,i,r,n)=>{if(i4(i.map(n),r.map(n)))return;let o=new Set(i);for(let e of r)o.delete(e)||o.add(e);let s=[...o];a.dispatchEvent({type:e,columns:s,column:1===s.length?s[0]:null,source:t})},c=e=>{let t=[];return o.forAllCols(i=>{let r=d[i.getColId()];r&&e(r,i)&&t.push(i)}),t},h=e=>e.getColId();n("columnRowGroupChanged",l.rowGroupColumns,i?.columns??[],h),n("columnPivotChanged",l.pivotColumns,r?.columns??[],h);let p=c((e,t)=>{let i=null!=e.aggFunc,r=i!=t.isValueActive(),n=i&&e.aggFunc!=t.getAggFunc();return r||n});p.length>0&&a.dispatchEvent({type:"columnValueChanged",columns:p,column:p&&1==p.length?p[0]:null,source:t}),rC(a,c((e,t)=>e.width!=t.getActualWidth()),!0,t),rw(a,c((e,t)=>e.pinned!=t.getPinned()),t),!function(e,t,i){if(!t.length)return;let r=1===t.length?t[0]:null,n=rb(t,e=>e.isVisible());e.dispatchEvent({type:"columnVisible",visible:n,columns:t,column:r,source:i})}(a,c((e,t)=>e.hide==t.isVisible()),t);let f=c((e,t)=>!iX(t.getSortDef(),{type:iZ(e.sortType),direction:iY(e.sort)})||e.sortIndex!=t.getSortIndex());f.length>0&&s?.dispatchSortChangedEvents(t,f),function(e,t,i,r,n){let o={};for(let e of t)o[e.colId]=e;let s={};for(let t of e)o[t.colId]&&(s[t.colId]=!0);let a=e.filter(e=>s[e.colId]),l=t.filter(e=>s[e.colId]),u=[];l.forEach((e,t)=>{let i=a?.[t];if(i&&i.colId!==e.colId){let e=r.getCol(i.colId);e&&u.push(e)}}),u.length&&n.dispatchEvent({type:"columnMoved",columns:u,column:1===u.length?u[0]:null,finished:!0,source:i})}(u,rk(e),t,o,a)}}function rk(e){let{colModel:t,rowGroupColsSvc:i,pivotColsSvc:r}=e;if(ey(t.getColDefCols())||!t.isAlive())return[];let n=i?.columns,o=r?.columns,s=[];t.forAllCols(e=>{let t,i,r,a;return t=e.isRowGroupActive()&&n?n.indexOf(e):null,i=e.isPivotActive()&&o?o.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,a=null!=e.getSortIndex()?e.getSortIndex():null,void s.push({colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:e.getSort(),sortType:e.getSortDef()?.type,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:e.getFlex()??null})});let a=new Map(t.getCols().map((e,t)=>[e.getColId(),t]));return s.sort((e,t)=>(a.has(e.colId)?a.get(e.colId):-1)-(a.has(t.colId)?a.get(t.colId):-1)),s}function rR(e){let t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),r=i$(t(i.sort,i.initialSort)),n=r.direction,o=r.type,s=t(i.sortIndex,i.initialSortIndex),a=t(i.hide,i.initialHide),l=t(i.pinned,i.initialPinned),u=t(i.width,i.initialWidth),d=t(i.flex,i.initialFlex),c=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);null!=c||h||(c=null,h=null);let p=t(i.pivotIndex,i.initialPivotIndex),f=t(i.pivot,i.initialPivot);null!=p||f||(p=null,f=null);let g=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortType:o,sortIndex:s,hide:a,pinned:l,width:u,flex:d,rowGroup:h,rowGroupIndex:c,pivot:f,pivotIndex:p,aggFunc:g}}var rE=(e,t,i,r)=>{let n=e[i.getId()],o=e[r.getId()],s=null!=n,a=null!=o;if(s&&a)return n-o;if(s)return -1;if(a)return 1;let l=t.indexOf(i),u=t.indexOf(r),d=l>=0;return d&&u>=0?l-u:d?-1:1},rP=class extends tE{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(ru(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),ru(e.source)))}createColsFromColDefs(e){let{beans:t}=this,{valueCache:i,colAutosize:r,rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:s,visibleCols:a,eventSvc:l,groupHierarchyColSvc:u}=t,d=this.colDefs?rS(t,e):void 0;i?.expire();let c=this.colDefCols?.list,h=this.colDefCols?.tree,p=function(e,t=null,i,r,n){var o;let s,a,l,u=new i5,{existingCols:d,existingGroups:c,existingColKeys:h}=(s=[],a=[],l=[],(o=r)&&rm(null,o,e=>{iJ(e)?a.push(e):(l.push(e.getId()),s.push(e))}),{existingCols:s,existingGroups:a,existingColKeys:l});u.addExistingKeys(h);let p=rp(e,t,0,i,d,u,c,n),{colGroupSvc:f}=e,g=f?.findMaxDepth(p,0)??0,m=f?f.balanceColumnTree(p,0,g,u):p;return rm(null,m,rh),{columnTree:m,treeDepth:g}}(t,this.colDefs,!0,h,e);rn(t,this.colDefCols?.tree,p.columnTree);let f=p.columnTree,g=p.treeDepth,m=ri(f),v={};for(let e of m)v[e.getId()]=e;this.colDefCols={tree:f,treeDepth:g,list:m,map:v},this.createColumnsForService([u],this.colDefCols,e),n?.extractCols(e,c),o?.extractCols(e,c),s?.extractCols(e,c),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),"gridInitializing"===e&&r?.applyAutosizeStrategy()}refreshCols(e,t){var i;if(!this.colDefCols)return;let r=this.cols?.tree;this.saveColOrder();let{autoColSvc:n,selectionColSvc:o,rowNumbersSvc:s,quickFilter:a,pivotResultCols:l,showRowGroupCols:u,rowAutoHeight:d,visibleCols:c,colViewport:h,eventSvc:p,formula:f}=this.beans,g=this.selectCols(l,this.colDefCols);f?.setFormulasActive(g),this.createColumnsForService([n,o,s],g,t);let m=(i=this.gos,this.showingPivotResult?!i.get("enableStrictPivotColumnOrder"):i.get("maintainColumnOrder"));(!e||m)&&this.restoreColOrder(g),this.positionLockedCols(g),u?.refresh(),a?.refreshCols(),this.setColSpanActive(),d?.setAutoHeightActive(g),c.clear(),h.clear(),i4(r,this.cols.tree)||p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(let r of e)r&&(r.createColumns(t,e=>{this.lastOrder=e(this.lastOrder),this.lastPivotOrder=e(this.lastPivotOrder)},i),r.addColumns(t))}selectCols(e,t){let i=e?.getPivotResultCols()??null;this.showingPivotResult=null!=i;let{map:r,list:n,tree:o,treeDepth:s}=i??t;return this.cols={list:n.slice(),map:{...r},tree:o.slice(),treeDepth:s},i&&(i.list.some(e=>this.cols?.map[e.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let{beans:e,showingPivotResult:t,cols:i}=this,{valueColsSvc:r,selectionColSvc:n}=e,o=this.isPivotMode()&&!t,s=n?.isSelectionColumnEnabled(),a=function({gos:e,formula:t}){let i=e.get("rowNumbers");return i||!!t?.active&&!1!==i}(e),l=r?.columns;return i.list.filter(e=>{let t=ro(e);if(!o)return t||e.isVisible();{let i=l?.includes(e);return t||i||s&&rs(e)||a&&ra(e)}})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){rx(this.beans,{state:e.map(e=>({colId:"string"==typeof e?e:e.getColId(),hide:!t}))},i)}restoreColOrder(e){let t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;let i=t.filter(t=>null!=e.map[t.getId()]);if(0===i.length)return;if(i.length===e.list.length){e.list=i;return}let r=e=>{let t=e.getOriginalParent();return!!t&&(t.getChildren().length>1||r(t))};if(!i.some(e=>r(e))){let t=new Set(i);for(let r of e.list)t.has(r)||i.push(r);e.list=i;return}let n=new Map;for(let e=0;e<i.length;e++){let t=i[e];n.set(t,e)}let o=e.list.filter(e=>!n.has(e));if(0===o.length){e.list=i;return}let s=(e,t)=>{let i=t?t.getOriginalParent():e.getOriginalParent();if(!i)return null;let r=null,o=null;for(let s of i.getChildren())if(s!==t&&s!==e){if(s instanceof iU){let e=n.get(s);if(null==e)continue;(null==r||r<e)&&(r=e,o=s);continue}s.forEachLeafColumn(e=>{let t=n.get(e);null!=t&&(null==r||r<t)&&(r=t,o=e)})}return null==o?s(e,i):o},a=[],l=new Map;for(let e of o){let t=s(e,null);if(null==t){a.push(e);continue}let i=l.get(t);void 0===i?l.set(t,e):Array.isArray(i)?i.push(e):l.set(t,[i,e])}let u=Array(e.list.length),d=u.length-1;for(let e=a.length-1;e>=0;e--)u[d--]=a[e];for(let e=i.length-1;e>=0;e--){let t=i[e],r=l.get(t);if(r)if(Array.isArray(r))for(let e=r.length-1;e>=0;e--){let t=r[e];u[d--]=t}else u[d--]=r;u[d--]=t}e.list=u}positionLockedCols(e){e.list=rv(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>null!=e.getColDef().colSpan)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);let{visibleCols:i,eventSvc:r}=this.beans;i.refresh(t),r.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){let e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);let t=ru(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){rn(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){let{pivotResultCols:t,autoColSvc:i,selectionColSvc:r,groupHierarchyColSvc:n}=this.beans;if(!(i8(this.colDefCols?.list,e)||i8(i?.columns?.list,e)||i8(r?.columns?.list,e))&&!i8(n?.columns?.list,e)&&i8(t?.getPivotResultCols()?.list,e))return}getColsForKeys(e){return e?e.map(e=>this.getCol(e)).filter(e=>null!=e):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(null==t)return null;let{map:i,list:r}=t;if("string"==typeof e&&i[e])return i[e];for(let t=0;t<r.length;t++)if(rd(r[t],e))return r[t];let{autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:s}=this.beans;return n?.getColumn(e)??o?.getColumn(e)??s?.getColumn(e)??null}},rM=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t,i=this.existingIds[e];return t="number"!=typeof i?0:i+1,this.existingIds[e]=t,t}},rD=class extends tE{};function rT(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}function rO(e){return"function"==typeof e?.getGui}var r_=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(e){if(e.includes(" ")){let i=(e||"").split(" ");if(i.length>1){for(let e of i)this.toggleCss(e,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}}},rA=0,rF=class extends tR{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=rA++,this.cssManager=new r_(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(e=>[e.selector,e])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());let e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(let t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(td):null}applyElementsToComponent(e,t,i,r=null){if(void 0===t&&(t=this.getDataRefAttribute(e)),t){let n=this[t];if(null===n)this[t]=r??e;else{let e=i?.[t];if(!this.suppressDataRefValidation&&!e)throw Error(`data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){let i=[];for(let t of e.childNodes??[])i.push(t);for(let r of i){if(!(r instanceof HTMLElement))continue;let i=this.createComponentFromElement(r,e=>{let t=e.getGui();if(t)for(let e of r.attributes??[])t.setAttribute(e.name,e.value)},t);if(i){if(i.addItems&&r.children.length){this.createChildComponentsFromTags(r,t);let e=Array.prototype.slice.call(r.children);i.addItems(e)}this.swapComponentForNode(i,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,t)}}createComponentFromElement(e,t,i){let r=e.nodeName,n=this.getDataRefAttribute(e),o=0===r.indexOf("AG-"),s=o?this.componentSelectors.get(r):null,a=null;if(s){let e=i&&n?i[n]:void 0;(a=new s.component(e)).setParentComponent(this),this.createBean(a,null,t)}else if(o)throw Error(`selector: ${r}`);return this.applyElementsToComponent(e,n,i,a),a}swapComponentForNode(e,t,i){let r=e.getGui();t.replaceChild(r,i),t.insertBefore(document.createComment(i.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){let i=t??this.gos.get("tabIndex");for(let t of(e||(e=[]),e.length||e.push(this.getGui()),e))t.setAttribute("tabindex",i.toString())}setTemplate(e,t,i){let r;r="string"==typeof e||null==e?e7(e):th(e),this.setTemplateFromElement(r,t,i)}setTemplateFromElement(e,t,i,r=!1){if(this.eGui=e,this.suppressDataRefValidation=r,t)for(let e=0;e<t.length;e++){let i=t[e];this.componentSelectors.set(i.selector,i)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),ts(e))?{element:e,parent:i}:{element:e.getGui(),parent:i}}prependChild(e,t){let{element:i,parent:r}=this.getContainerAndElement(e,t)||{};i&&r&&r.insertAdjacentElement("afterbegin",i)}appendChild(e,t){let{element:i,parent:r}=this.getContainerAndElement(e,t)||{};i&&r&&r.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:i}=t;!function(e,t,i={}){let{skipAriaHidden:r}=i;e.classList.toggle("ag-invisible",!t),r||eV(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:i}=t;eq(this.eGui,e,{skipAriaHidden:i});let r={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},rI=class extends rF{};function rL(e){return"object"==typeof e&&!!e.component}var rN=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(e=>this.onDone(e),e=>this.onReject(e))}static all(t){return t.length?new e(e=>{let i=t.length,r=Array(i);t.forEach((t,n)=>{t.then(t=>{r[n]=t,0==--i&&e(r)})})}):e.resolve()}static resolve(t=null){return new e(e=>e(t))}then(t){return new e(e=>{1===this.status?e(t(this.resolution)):this.waiters.push(i=>e(t(i)))})}onDone(e){for(let t of(this.status=1,this.resolution=e,this.waiters))t(e)}onReject(e){}};function rB(e,t,i,r){let n,o,s,a,l,u,{name:d}=i;if(t){let i=t[d+"Selector"],c=i?i(r):null,h=t=>{"string"==typeof t?n=t:null!=t&&!0!==t&&(e.isFrameworkComponent(t)?s=t:o=t)};c?(h(c.component),a=c.params,l=c.popup,u=c.popupPosition):h(t[d])}return{compName:n,jsComp:o,fwComp:s,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:u}}var rV=class extends tE{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,r=!1){return this.getCompDetails(this.gridOptions,e,t,i,r)}getCompDetails(e,t,i,r,n=!1){var o;let s,a,{name:l,cellRenderer:u}=t,{compName:d,jsComp:c,fwComp:h,paramsFromSelector:p,popupFromSelector:f,popupPositionFromSelector:g}=rB(this.beans.frameworkOverrides,e,t,r),m=e=>{let t=this.registry.getUserComponent(l,e);t&&(c=t.componentFromFramework?void 0:t.component,h=t.componentFromFramework?t.component:void 0,s=t.params,a=t.processParams)};if(null!=d&&m(d),null==c&&null==h&&null!=i&&m(i),c&&u&&!((o=c)&&o.prototype&&"getGui"in o.prototype)&&(c=this.agCompUtils?.adaptFunction(t,c)),!c&&!h){let{validation:e}=this.beans;n&&(d!==i||!i)?d?e?.isProvidedUserComp(d)||t9(50,{compName:d}):i?e||t9(260,{...this.gos.getModuleErrorParams(),propName:l,compName:i}):t9(216,{name:l}):i&&!e&&t9(146,{comp:i});return}let v=this.mergeParams(e,t,r,p,s,a),y=null==c,b=c??h;return{componentFromFramework:y,componentClass:b,params:v,type:t,popupFromSelector:f,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(b,y,v,t)}}newAgStackInstance(e,t,i,r){let n;n=t?this.frameworkCompWrapper.wrap(e,r.mandatoryMethods,r.optionalMethods,r):new e,this.createBean(n);let o=n.init?.(i);return null==o?rN.resolve(n):o.then(()=>n)}mergeParams(e,t,i,r=null,n,o){let s={...i,...n},a=e?.[t.name+"Params"];return"function"==typeof a?tI(s,a(i)):"object"==typeof a&&tI(s,a),tI(s,r),o?o(s):s}},rH={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},rz={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},rj={name:"headerComponent",optionalMethods:["refresh"]},rG={name:"innerHeaderComponent"},rW={name:"innerHeaderGroupComponent"},rU={name:"headerGroupComponent"},r$={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},rq={name:"loadingCellRenderer",cellRenderer:!0},rK={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},rQ={name:"tooltipComponent"},rX={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},rY={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},rZ={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},rJ={name:"loadingCellRenderer",cellRenderer:!0},r0={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},r1={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function r2(e,t,i){return e.getCompDetails(t,r$,void 0,i)}function r5(e,t,i){return e.getCompDetails(t,rq,"agSkeletonCellRenderer",i,!0)}function r3(e,t,i){return e.getCompDetails(t,rK,"agCellEditor",i,!0)}function r4(e,t,i){return e.mergeParams(t,rX,i)}function r8(e){return e?.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():e}var r6="Backspace",r7="Enter",r9="Escape",ne="ArrowLeft",nt="ArrowUp",ni="ArrowRight",nr="ArrowDown",nn="Delete",no="PageUp",ns="PageDown",na="Home",nl="KeyA",nu="KeyC",nd="KeyD",nc="KeyV",nh="KeyY",np="KeyZ";function nf(e){let t,{keyCode:i}=e;switch(i){case 65:t=nl;break;case 67:t=nu;break;case 86:t=nc;break;case 68:t=nd;break;case 90:t=np;break;case 89:t=nh;break;default:t=e.code}return t}var ng=class extends rF{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}};function nm(){return void 0===p&&(p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),p}function nv(){return void 0===f&&(f=/(firefox)/i.test(navigator.userAgent)),f}function ny(){return void 0===g&&(g=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),g}function nb(){return void 0===m&&(m=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),m}function nw(e){if(!e)return null;let t=e.tabIndex,i=e.getAttribute("tabIndex");return -1!==t||null!==i&&(""!==i||nv())?t.toString():null}function nC(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.remove(),null!=i&&(y=i,v=0===i)}function nx(){return null==v&&nC(),v}var nS=!1,nk=0;function nR(e){let t=nS,i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(nS=i)}function nE(e,t,i=!1){let r=eU;t&&(r+=", "+t),i&&(r+=', [tabindex="-1"]');let n=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(e=>e6(e)),o=Array.prototype.slice.apply(e.querySelectorAll(r));return o.length?n.filter(e=>-1===o.indexOf(e)):n}function nP(e,t=!1,i=!1,r=!1){let n=nE(e,r?".ag-tab-guard":null,i),o=t?i3(n):n[0];return!!o&&(o.focus({preventScroll:!0}),!0)}function nM(e,t,i,r){let n=nE(t,i?':not([tabindex="-1"])':null),o=eP(e),s=(i?n.findIndex(e=>e.contains(o)):n.indexOf(o))+(r?-1:1);return s<0||s>=n.length?null:n[s]}function nD(e,t=5){let i=0;for(;e&&null===nw(e)&&++i<=t;)e=e.parentElement;return null===nw(e)?null:e}var nT=class extends tR{constructor(e,t={isStopPropagation:()=>!1,stopPropagation:()=>{}},i={}){super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;let t=nM(this.beans,this.eFocusable,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...i}}postConstruct(){let{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add("ag-focus-managed"),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{if(e.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(e))return;let{callbacks:t}=this;t.shouldStopEventPropagation(e)?this.stopPropagationCallbacks.stopPropagation(e):"Tab"===e.key?t.onTabKeyDown(e):t.handleKeyDown&&t.handleKeyDown(e)}})}},nO="ag-tab-guard",n_="ag-tab-guard-top",nA="ag-tab-guard-bottom",nF=class extends tR{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:i,eTopGuard:r,eBottomGuard:n,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:l,onFocusIn:u,onFocusOut:d,shouldStopEventPropagation:c,onTabKeyDown:h,handleKeyDown:p,isEmpty:f,eFocusableElement:g}=e;this.comp=i,this.eTopGuard=r,this.eBottomGuard=n,this.providedFocusInnerElement=l,this.eFocusableElement=g,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=u,this.providedFocusOut=d,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=p,this.providedIsEmpty=f}postConstruct(){for(let e of(this.createManagedBean(new nT(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard]))this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():0===nE(this.eFocusableElement,".ag-tab-guard").length))return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))||!this.forceFocusOutWhenTabGuardsAreEmpty||this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){let t,i,r=nE(eM(this.beans).body,null,!0),n=r.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;e?(t=0,i=n):(t=n+1,i=r.length);let o=r.slice(t,i),s=this.gos.get("tabIndex");o.sort((e,t)=>{let i=Number.parseInt(e.getAttribute("tabindex")||"0"),r=Number.parseInt(t.getAttribute("tabindex")||"0");return r===s?1:i===s?-1:0===i?1:0===r?-1:i-r}),o[e?o.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){!this.focusTrapActive&&(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=nE(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),!!t.length&&(t[e?t.length-1:0].focus({preventScroll:!0}),!0)}getNextFocusableElement(e){return nM(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},nI=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick??20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return null!==this.tickingInterval}check(e,t=!1){let i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let r=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<r.left+n,this.tickRight=e.clientX>r.right-n,this.tickUp=e.clientY<r.top+n&&!i,this.tickDown=e.clientY>r.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},nL="ag-resizer-wrapper",nN=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),nB={tag:"div",cls:nL,children:[nN("eTopLeft","topLeft"),nN("eTop","top"),nN("eTopRight","topRight"),nN("eRight","right"),nN("eBottomRight","bottomRight"),nN("eBottom","bottom"),nN("eBottomLeft","bottomLeft"),nN("eLeft","left")]},nV=class extends tR{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config={popup:!1,...t}}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){let{clientHeight:t,clientWidth:i}=this.offsetParent,r=i/2-this.getWidth()/2,n=t/2-this.getHeight()/2;this.offsetElement(r,n,e)}initialisePosition(e){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:i,minWidth:r,width:n,minHeight:o,height:s,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let u=0,d=0,c=e6(this.element);if(c){let e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){let i=e.offsetWidth-this.element.offsetWidth;d=Number.parseInt(t.minWidth,10)-i}if(null!=t.minHeight){let i=e.offsetHeight-this.element.offsetHeight;u=Number.parseInt(t.minHeight,10)-i}}if(this.minHeight=o||u,this.minWidth=r||d,n&&this.setWidth(n),s&&this.setHeight(s),n&&s||this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(c&&i){let t=this.boundaryEl,i=!0;if(t||(t=this.findBoundaryElement(),i=!1),t){let r=Number.parseFloat(t.style.top),n=Number.parseFloat(t.style.left);i?this.offsetElement(Number.isNaN(n)?0:n,Number.isNaN(r)?0:r,e):this.setPosition(n,r)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(i),this.moveElementDragListener=i):(this.dragSvc?.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(let t of Object.keys(e)){let i=!!e[t],r=this.getResizerElement(t),n={dragStartPixels:0,eElement:r,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};!i&&(this.isAlive()||i)||(i?(this.dragSvc?.addDragSource(n),this.resizeListeners.push(n),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[t]=i)}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,i=this.element,r=!1;if("string"==typeof e&&e.includes("%"))tn(i,e),e=eJ(i),r=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(r?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?tn(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:Number.parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:r.top,s=e?0:n.top,a=0;if(t){let e=this.element.parentElement;if(e){let{bottom:t}=e.getBoundingClientRect();a=t-r.bottom}}return i+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:i}=this.config,r=!1;if("string"==typeof e&&e.includes("%"))tr(t,e),e=e0(t),r=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:t}=this.offsetParent,r=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+r>t&&(e=t-r)}this.getWidth()!==e&&(r?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?tr(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"==typeof e?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,i){let{forcePopupParentAsOffsetParent:r}=this.config,n=r?this.boundaryEl:this.element;n&&(this.popupSvc?.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:i}),this.setPosition(Number.parseFloat(n.style.left),Number.parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=tl(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:i,isTop:r,anywhereWithin:n,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!n,s)?0:s,movementY:this.shouldSkipY(t,!!r,o,a)?0:a}}shouldSkipX(e,t,i,r){let n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left,l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return!!l||(l=t?r<0&&e.clientX>a+o.left||r>0&&e.clientX<a+o.left:i?r<0&&e.clientX>s.right||r>0&&e.clientX<a+o.left:r<0&&e.clientX>s.right||r>0&&e.clientX<s.right)}shouldSkipY(e,t,i=0,r){let n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top,l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return!!l||(l=t?r<0&&e.clientY>a+o.top+i||r>0&&e.clientY<a+o.top:r<0&&e.clientY>s.bottom||r>0&&e.clientY<s.bottom)}createResizeMap(){let e=e=>({element:this.element.querySelector(`[data-ref=${e}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;let e=this.element;e&&(e.appendChild(th(nB)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${nL}`);e?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:r}=this.config;i||r||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(e=>!e.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,i=0;for(let r of e){let e=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r===this.element)continue;let n=this.minHeight||0,o=this.minWidth||0;if(e){let e=window.getComputedStyle(r);e.minHeight&&(n=Number.parseInt(e.minHeight,10)),e.minWidth&&(o=Number.parseInt(e.minWidth,10))}else n=r.offsetHeight,o=r.offsetWidth;t+=n,i+=o}return{height:t,width:i}}applySizeToSiblings(e){let t=null,i=this.getSiblings();if(i){for(let r=0;r<i.length;r++){let n=i[r];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[r+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:r,isRight:n,isBottom:o,isLeft:s}=this.currentResizer,a=n||s,l=o||r,{movementX:u,movementY:d}=this.calculateMouseMovement({e,isLeft:s,isTop:r}),c=this.position.x,h=this.position.y,p=0,f=0;if(a&&u){let e=s?-1:1,t=this.getWidth(),i=t+u*e,r=!1;s&&(c+(p=t-i)<=0||i<=this.minWidth)&&(r=!0,p=0),r||this.setWidth(i)}if(l&&d){let e=r?-1:1,t=this.getHeight(),i=t+d*e,n=!1;r?(h+(f=t-i)<=0||i<=this.minHeight)&&(n=!0,f=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(n=!0),n||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||f)&&this.offsetElement(c+p,h+f)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){let t;if(!this.isMoving)return;let{x:i,y:r}=this.position;this.config.calculateTopBuffer&&(t=this.config.calculateTopBuffer());let{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:t});this.offsetElement(i+n,r+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},nH=RegExp("[T ]"),nz=RegExp("^\\d{4}-\\d{2}-\\d{2}(T\\d{2}:\\d{2}:\\d{2}\\D?)?");function nj(e,t){return e.toString().padStart(t,"0")}function nG(e,t=!0,i="T"){if(!e)return null;let r=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(e=>nj(e,2)).join("-");return t&&(r+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(e=>nj(e,2)).join(":")),r}function nW(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),nj(e.getDate(),2),nj(e.getHours(),2),`:${nj(e.getMinutes(),2)}`,`:${nj(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,nj(e.getDate(),2)].map(String):null}var nU=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},n$=["January","February","March","April","May","June","July","August","September","October","November","December"],nq=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function nK(e,t){if(null==t)return nG(e,!1);let i=nj(e.getFullYear(),4),r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n$[e.getMonth()],MMM:()=>n$[e.getMonth()].slice(0,3),MM:()=>nj(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${nU(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${nU(e.getDate())}`,DD:()=>nj(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>nq[e.getDay()],ddd:()=>nq[e.getDay()].slice(0,3),dd:()=>nq[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${nU(e.getDay())}`,d:()=>`${e.getDay()}`},n=RegExp(Object.keys(r).join("|"),"g");return t.replace(n,e=>e in r?r[e]():e)}function nQ(e,t=!1){return!!nX(e,t)}function nX(e,t=!1,i){if(!e||!i&&!nz.test(e))return null;let[r,n]=e.split(nH);if(!r)return null;let o=r.split("-").map(e=>Number.parseInt(e,10));if(3!==o.filter(e=>!isNaN(e)).length)return null;let[s,a,l]=o,u=new Date(s,a-1,l);if(u.getFullYear()!==s||u.getMonth()!==a-1||u.getDate()!==l||!n&&t)return null;if(!n||"00:00:00"===n)return u;let[d,c,h]=n.split(":").map(e=>Number.parseInt(e,10));if(d>=0&&d<24)u.setHours(d);else if(t)return null;if(c>=0&&c<60)u.setMinutes(c);else if(t)return null;if(h>=0&&h<60)u.setSeconds(h);else if(t)return null;return u}function nY(e){let{inputValue:t,allSuggestions:i,hideIrrelevant:r,filterByPercentageOfBestMatch:n}=e,o=(i??[]).map((e,i)=>({value:e,relevance:function(e,t){let i,r=e.length,n=t.length;if(0===n)return r||0;let o=e.toLocaleLowerCase(),s=t.toLocaleLowerCase();e.length<t.length&&(i=s,s=o,o=i,i=t,t=e,e=i);let a=new Uint16Array(n+1),l=new Uint16Array(n+1);for(let e=0;e<=n;e++)a[e]=e;let u=0,d=r/2-10;for(let c=1;c<=r;c++){let r=e[c-1],h=o[c-1];l[0]=c;for(let i=1;i<=n;i++){let n=t[i-1];if(h!==s[i-1]){let e=l[i-1],t=a[i],r=a[i-1],n=e<t?e:t;r<n&&(n=r),l[i]=n+1|0;continue}if(u++,r===n&&u++,c>1&&i>1){let r=e[c-2],n=o[c-2],a=t[i-2];n===s[i-2]&&(u++,r===a&&u++)}c<d&&u++,l[i]=a[i-1]}i=a,a=l,l=i}return a[n]/(u+1)}(t,e),idx:i}));if(o.sort((e,t)=>e.relevance-t.relevance),r&&(o=o.filter(e=>e.relevance<Math.max(e.value.length,t.length))),o.length>0&&n&&n>0){let e=o[0].relevance*n;o=o.filter(t=>e-t.relevance<0)}let s=[],a=[];for(let e of o)s.push(e.value),a.push(e.idx);return{values:s,indices:a}}function nZ(e){return!e.altKey&&!e.ctrlKey&&!e.metaKey&&e.key?.length===1}var nJ=class extends rF{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}")}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:i,labelAlignment:r,disabled:n,labelEllipsis:o}=this.config;null!=n&&this.setDisabled(n),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),null!=o&&this.setLabelEllipsis(o),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:e,eLabel:t}=this;e3(t),"string"==typeof e?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),""===e?(eq(t,!1),eI(t,"presentation")):(eq(t,!0),eI(t,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){let e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){let t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||ti(this.eLabel,e),this}setDisabled(e){e=!!e;let t=this.getGui();return eK(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},n0=class extends nJ{constructor(e,t,i,r){super(e,t,i),this.className=r}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:i,ariaLabel:r}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),null!=r&&this.setAriaLabel(r),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?eN(e,""):eN(e,t??"")}setAriaLabel(e){return eL(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return tr(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},n1=class extends n0{constructor(e,t,i="text",r="input"){super(e,e?.template??{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:r,ref:"eInput",cls:"ag-input-field-input"}]}]},[],t),this.inputType=i,this.displayFieldTag=r,this.eLabel=null,this.eWrapper=null,this.eInput=null}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);let{eLabel:e,eWrapper:t,eInput:i,className:r}=this;e.classList.add(`${r}-label`),t.classList.add(`${r}-input-wrapper`),i.classList.add(`${r}-input`),this.addCss("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;let{inputName:n,inputWidth:o,inputPlaceholder:s,autoComplete:a,tabIndex:l}=this.config;null!=n&&this.setInputName(n),null!=o&&this.setInputWidth(o),null!=s&&this.setInputPlaceholder(s),null!=a&&this.setAutoComplete(a),this.addInputListeners(),this.activateTabIndex([i],l)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){"input"===this.displayFieldTag&&(this.inputType=e,ta(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return ti(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return ta(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return eL(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return eK(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){return!0===e?ta(this.eInput,"autocomplete",null):ta(this.eInput,"autocomplete","string"==typeof e?e:"off"),this}},n2=class extends n1{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t,name:i}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof t&&this.setPassive(t),null!=i&&this.setName(i)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0;let i=this.eInput;i.checked=e,i.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});let r=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:r.id,name:r.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){let t=this.eWrapper.classList;t.toggle("ag-checked",!0===e),t.toggle("ag-indeterminate",null==e)}},n5={selector:"AG-CHECKBOX",component:n2},n3=class extends n2{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){!this.eInput.disabled&&(this.isSelected()||this.setValue(!0))}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){let t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},n4=class extends n1{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){let i=this.eInput;return i.value!==e&&(i.value=ev(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}setCustomValidity(e){let t=this.eInput,i=e.length>0;t.setCustomValidity(e),i&&t.reportValidity(),eB(t,i)}preventDisallowedCharacters(){let e=RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{nZ(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{let i=t.clipboardData?.getData("text");i?.split("").some(t=>!e.test(t))&&t.preventDefault()}})}},n8={selector:"AG-INPUT-TEXT-FIELD",component:n4},n6={selector:"AG-INPUT-TEXT-AREA",component:class extends n1{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},n7=class extends n4{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();let e=this.eInput;this.addManagedListeners(e,{blur:()=>{let t=Number.parseFloat(e.value),i=isNaN(t)?"":this.normalizeValue(t.toString());this.value!==i&&this.setValue(i)},wheel:this.onWheel.bind(this)}),e.step="any";let{precision:t,min:i,max:r,step:n}=this.config;"number"==typeof t&&this.setPrecision(t),"number"==typeof i&&this.setMin(i),"number"==typeof r&&this.setMax(r),"number"==typeof n&&this.setStep(n)}onWheel(e){eP(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return""===e?"":(null!=this.precision&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){let i=this.precision;if(null==i)return e;if(t)return Number.parseFloat(Number.parseFloat(e).toFixed(i)).toString();let r=String(e).split(".");if(r.length>1){if(r[1].length<=i)return e;else if(i>0)return`${r[0]}.${r[1].slice(0,i)}`}return r[0]}setMin(e){return this.min===e||(this.min=e,ta(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,ta(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,ta(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue(e=>super.setValue(e,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},e)}setValueOrInputValue(e,t,i){if(ev(i)){let r=this.isScientificNotation(i);if(r&&this.eInput.validity.valid)return e(i);if(!r){i=this.adjustPrecision(i);let e=this.normalizeValue(i);r=i!=e}if(r)return t(i)}return e(i)}getValue(e=!1){let t=this.eInput;if(!t.validity.valid&&!e)return;let i=t.value;return this.isScientificNotation(i)?this.adjustPrecision(i,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}},n9={selector:"AG-INPUT-NUMBER-FIELD",component:n7},oe={selector:"AG-INPUT-DATE-FIELD",component:class extends n4{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=nm();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){eP(this.beans)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?nG(e??null,!!this.includeTime)??void 0:e;return this.min===t||(this.min=t,ta(this.eInput,"min",t)),this}setMax(e){let t=e instanceof Date?nG(e??null,!!this.includeTime)??void 0:e;return this.max===t||(this.max=t,ta(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,ta(this.eInput,"step",e)),this}setIncludeTime(e){return this.includeTime===e||(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1)),this}getDate(){if(this.eInput.validity.valid)return nX(this.getValue())??void 0}setDate(e,t){this.setValue(nG(e??null,this.includeTime),t)}}},ot=class extends rF{constructor(e,t,i){super({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),this.label=t,this.value=i,this.eText=null}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){let t=this.getGui();t.classList.toggle("ag-active-item",e),eG(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){let i=this.getGui();eA(i,"posinset",e),eA(i,"setsize",t)}createTooltip(){let e=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,{getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>te(this.eText)},this));e&&(this.tooltipFeature=e)}addEventListeners(){let e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},oi=class extends rF{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}")}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){let t=e.key;switch(t){case r7:if(this.highlightedItem){let e=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case nr:case nt:e.preventDefault(),this.navigate(t);break;case ns:case no:case na:case"End":e.preventDefault(),this.navigateToPage(t)}}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){let{value:t,text:i}=e,r=i??t;return this.options.push({value:t,text:r}),this.renderOption(t,r),this.updateIndices(),this}clearOptions(){for(let e of(this.options=[],this.reset(!0),this.listItems))e.destroy();e3(this.getGui()),this.listItems=[],this.refreshAriaRole()}updateOptions(e){let t=this.options!==e;return t&&(this.clearOptions(),this.addOptions(e)),t}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;let i=this.options.findIndex(t=>t.value===e);if(-1!==i){let e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.listItems[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(e=>e.value===this.value);-1!==e&&this.highlightItem(this.listItems[e])}highlightItem(e){let t=e.getGui();if(!e6(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;let{scrollTop:i,clientHeight:r}=this.getGui(),{offsetTop:n,offsetHeight:o}=t;(n+o>i+r||n<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){let i=new ot(this.cssIdentifier,t,e);i.setParentComponent(this);let r=this.createManagedBean(i);this.listItems.push(r),this.getGui().appendChild(r.getGui())}navigate(e){let t,i=e===nr,{listItems:r,highlightedItem:n}=this;if(n){let e=r.indexOf(n)+(i?1:-1);e=Math.min(Math.max(e,0),r.length-1),t=r[e]}else t=i?r[0]:i3(r);this.highlightItem(t)}navigateToPage(e){let{listItems:t,highlightedItem:i}=this;if(!i||0===t.length)return;let r=t.indexOf(i),n=this.options.length-1,o=t[0].getHeight(),s=Math.floor(this.getGui().clientHeight/o),a=-1;e===na?a=0:"End"===e?a=n:e===ns?a=Math.min(r+s,n):e===no&&(a=Math.max(r-s,0)),-1!==a&&this.highlightItem(t[a])}refreshAriaRole(){eI(this.getGui(),0===this.options.length?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();let e=this.listItems,t=e.length;e.forEach((e,i)=>{e.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},or={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},on=class extends n0{constructor(e){if(super(e,e?.template||or,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=null,this.eWrapper=null,this.eDisplayField=null,this.eIcon=null,this.registerCSS(".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}"),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:r,minPickerWidth:n,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!r,null!=i&&this.setPickerMaxHeight(i),null!=n&&this.setPickerMinWidth(n),null!=o&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:i,inputWidth:r}=this.config;if(i){let e=this.beans.iconSvc.createIconNoSpan(i);e&&this.eIcon.appendChild(e)}null!=r&&this.setInputWidth(r)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),eH(e,!1),this.ariaRole&&eI(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case nt:case nr:case r7:case" ":e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case r9:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:r,modalPicker:n=!0},maxPickerHeight:o,minPickerWidth:s,maxPickerWidth:a,variableWidth:l,beans:u,eWrapper:d}=this,c={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{let e=eD(u);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,r),anchorToElement:d};e.style.position="absolute";let h=u.popupSvc,p=h.addPopup(c);l?(s&&(e.style.minWidth=s),e.style.width=to(e0(d)),a&&(e.style.maxWidth=a)):ti(e,a??e0(d));let f=o??`${eY(h.getPopupParent())}px`;return e.style.setProperty("max-height",f),this.alignPickerToComponent(),p.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:r},eWrapper:n,pickerComponent:o}=this,s=r.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:n,ePopup:o.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;eH(this.getAriaElement(),e);let t=this.eWrapper.classList;t.toggle("ag-picker-expanded",e),t.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return ti(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},oo=class extends on{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}")}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:e9(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){let e=this.createBean(new oi("select"));this.listComponent=e,e.setParentComponent(this);let t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i);var r=this.getAriaElement();e_(r,"controls",t.id),eN(t,r.id),e.addManagedElementListeners(e.getGui(),{mousedown:e=>{e?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){let{key:t}=e;switch("Tab"===t&&this.hidePicker(),t){case r7:case nt:case nr:case no:case ns:case na:case"End":e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case r9:super.onKeyDown(e);break;case" ":this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){let e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(let t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}updateOptions(e){return this.listComponent?.updateOptions(e)&&this.setValue(void 0,!0),this}setValue(e,t,i){let{listComponent:r,config:{placeholder:n},eDisplayField:o,tooltipFeature:s}=this;if(this.value===e||!r||(i||r.setValue(e,!0),r.getValue()===this.getValue()))return this;let a=r.getDisplayValue();return null==a&&n&&(a=n),o.textContent=a,s?.setTooltipAndRefresh(a??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},os={selector:"AG-SELECT",component:oo},oa=((s=oa||{})[s.Vertical=0]="Vertical",s[s.Horizontal=1]="Horizontal",s),ol="object"!=typeof window||!window?.document?.fonts?.forEach,ou=(e,t,i,r,n,o)=>{let s;if(ol)return;r&&(e=`@layer ${CSS.escape(r).replaceAll("\\.",".")} { ${e} }`);let a=oc.map.get(t);if(a||(a=[],oc.map.set(t,a)),a.some(t=>t.css===e))return;let l=document.createElement("style");o&&l.setAttribute("nonce",o),l.dataset.agGlobalCss=i,l.textContent=e;let u={css:e,el:l,priority:n};for(let e of a){if(e.priority>n)break;s=e}if(s){s.el.insertAdjacentElement("afterend",l);let e=a.indexOf(s);a.splice(e+1,0,u)}else t.insertBefore(l,t.querySelector(":not(title, meta)")),a.push(u)},od=(e,t,i,r)=>{ou(':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',e,"shared",t,0,i),r?.forEach((r,n)=>r.forEach(r=>ou(r,e,n,t,0,i)))},oc=(w="object"==typeof window?window:{}).agStyleInjectionState??(w.agStyleInjectionState={map:new WeakMap,grids:new Set}),oh=e=>new og(e),op="$default",of=0,og=class{constructor({feature:e,params:t,modeParams:i={},css:r,cssImports:n}){this.feature=e,this.css=r,this.cssImports=n,this.modeParams={[op]:{...i[op]??{},...t??{}},...i}}use(e,t,i){let r=this._inject;if(null==r){let{css:e}=this;if(e){let t=`ag-theme-${this.feature??"part"}-${++of}`;for(let i of("function"==typeof e&&(e=e()),e=`:where(.${t}) {
${e}
}
`,this.cssImports??[]))e=`@import url(${JSON.stringify(i)});
${e}`;r={css:e,class:t}}else r=!1;this._inject=r}return r&&e&&ou(r.css,e,r.class,t,1,i),!!r&&r.class}},om=e=>`--ag-${e.replace(/[A-Z]/g,e=>`-${e}`).toLowerCase()}`,ov=e=>`var(${om(e)})`,oy=e=>({ref:"accentColor",mix:e}),ob=e=>({ref:"foregroundColor",mix:e}),ow=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),oC={ref:"backgroundColor"},ox={ref:"foregroundColor"},oS={ref:"accentColor"},ok={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ob(.15),chromeBackgroundColor:ow(.02),browserColorScheme:"light"},oR={...ok,textColor:ox,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:oy(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:oC,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:oS,toggleButtonOffBackgroundColor:ow(.3),toggleButtonSwitchBackgroundColor:oC,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},oE=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],oP=(a=e=>(e=e.toLowerCase(),oE.find(t=>e.endsWith(t.toLowerCase()))??"length"),i=new Map,e=>(i.has(e)||i.set(e,a(e)),i.get(e))),oM=e=>"object"==typeof e&&e?.ref?ov(e.ref):"string"==typeof e?e:"number"==typeof e&&String(e),oD=e=>{if("string"==typeof e)return e;if(e&&"ref"in e){let t=ov(e.ref);if(null==e.mix)return t;let i=e.onto?ov(e.onto):"transparent";return`color-mix(in srgb, ${i}, ${t} ${Math.max(0,Math.min(100,100*e.mix))}%)`}return!1},oT=e=>{if("string"==typeof e)return e;if("number"==typeof e)return`${e}px`;if(e&&"calc"in e){let t=e.calc.replace(/ ?[*/+] ?/g," $& ");return`calc(${t.replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,e=>"-"===e[0]?e:" "+ov(e)+" ")})`}return!!e&&"ref"in e&&ov(e.ref)},oO=(e,t)=>"string"==typeof e?e:!0===e?oO({},t):!1===e?"columnBorder"===t?oO({color:"transparent"},t):"none":e&&"ref"in e?ov(e.ref):o_(e.style??"solid")+" "+oT(e.width??{ref:"borderWidth"})+" "+oD(e.color??{ref:"borderColor"}),o_=oM,oA=e=>"string"==typeof e?e.includes(",")?e:oF(e):e&&"googleFont"in e?oA(e.googleFont):e&&"ref"in e?ov(e.ref):!!Array.isArray(e)&&e.map(e=>("object"==typeof e&&"googleFont"in e&&(e=e.googleFont),oF(e))).join(", "),oF=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),oI=e=>"string"==typeof e?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?oI({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):!!e&&"ref"in e&&ov(e.ref),oL={color:oD,colorScheme:oM,length:oT,scale:oM,border:oO,borderStyle:o_,shadow:e=>"string"==typeof e?e:!1===e?"none":e&&"ref"in e?ov(e.ref):[oT(e.offsetX??0),oT(e.offsetY??0),oT(e.radius??0),oT(e.spread??0),oD(e.color??{ref:"foregroundColor"})].join(" "),image:oI,fontFamily:oA,fontWeight:oM,duration:(e,t,i)=>"string"==typeof e?e:"number"==typeof e?(e>=10&&i.warn(104,{value:e,param:t}),`${e}s`):!!e&&"ref"in e&&ov(e.ref)},oN=(e,t,i)=>oL[oP(e)](t,e,i),oB=class e{constructor(e,t=[]){this.themeLogger=e,this.parts=t}withPart(t){return("function"==typeof t&&(t=t()),t instanceof og)?new e(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(e){return this.withPart(oh({feature:e}))}withParams(e,t=op){return this.withPart(oh({modeParams:{[t]:e}}))}_startUse({styleContainer:e,cssLayer:t,nonce:i,loadThemeGoogleFonts:r,moduleCss:n}){if(ol)return;oj(),od(e,t,i,n);let o=oH(this);if(o.length>0)for(let e of o)r&&oG(e,i);for(let r of this.parts)r.use(e,t,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=oV(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let e=this._paramsCache;if(!e){let t={[op]:{...oR}};for(let e of oV(this.parts))for(let i of Object.keys(e.modeParams)){let r=e.modeParams[i];if(r){let e=t[i]??(t[i]={}),n=new Set;for(let t of Object.keys(r)){let i=r[t];void 0!==i&&(e[t]=i,n.add(t))}if(i===op)for(let e of Object.keys(t)){let i=t[e];if(e!==op)for(let e of n)delete i[e]}}}this._paramsCache=e=t}return e}_getPerInstanceCss(e){let t="##SELECTOR##",i=this._paramsCssCache;if(!i){let e="",r="",n=this._getModeParams();for(let t of Object.keys(n)){let i=n[t];if(t!==op){let i="object"==typeof CSS?CSS.escape(t):t,n=`:where([data-ag-theme-mode="${i}"]) & {
`;e+=n,r+=n}for(let t of Object.keys(i).sort()){let n=i[t],o=oN(t,n,this.themeLogger);if(!1===o)this.themeLogger.error(107,{key:t,value:n});else{let i=om(t),n=i.replace("--ag-","--ag-inherited-");e+=`	${i}: var(${n}, ${o});
`,r+=`	${n}: var(${i});
`}}t!==op&&(e+="}\n",r+="}\n")}let o=`${t} {
${e}}
`;o+=`:has(> ${t}):not(${t}) {
${r}}
`,this._paramsCssCache=i=o}return i.replaceAll(t,`:where(.${e})`)}},oV=e=>{let t=new Map;for(let i of e)t.set(i.feature,i);let i=[];for(let r of e)r.feature&&t.get(r.feature)!==r||i.push(r);return i},oH=e=>{let t=new Set,i=e=>{if(Array.isArray(e))e.forEach(i);else{let i=e?.googleFont;"string"==typeof i&&t.add(i)}};return Object.values(e._getModeParams()).flatMap(e=>Object.values(e)).forEach(i),Array.from(t).sort()},oz=!1,oj=()=>{if(!oz)for(let e of(oz=!0,Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]'))))e.remove()},oG=async(e,t)=>{ou(`@import url('https://${oW}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`,document.head,`googleFont:${e}`,void 0,0,t)},oW="fonts.googleapis.com",oU=1,o$=class{constructor(e){if(this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=oU++,!e?.beanClasses)return;this.beanDestroyComparator=e.beanDestroyComparator,this.init(e)}init(e){for(let t of(this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback,Object.keys(e.providedBeanInstances)))this.beans[t]=e.providedBeanInstances[t];for(let t of e.beanClasses){let e=new t;e.beanName?this.beans[e.beanName]=e:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(e)}for(let t of e.derivedBeans??[]){let{beanName:e,bean:i}=t(this);this.beans[e]=i,this.createdBeans.push(i)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){let i=this.beans;for(let t of e)t.preWireBeans?.(i),t.wireBeans?.(i);for(let t of e)t.preConstruct?.();for(let i of(t&&e.forEach(t),e))i.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},oq=0,oK={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},oQ=class extends tR{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++oq}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){let{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t);let i=e.get("themeStyleContainer"),r="undefined"!=typeof ShadowRoot,n=r&&t.getRootNode()instanceof ShadowRoot;this.eStyleContainer=("function"==typeof i?i():i)??(n?t:document.head),i||n||!r||oY(t,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(oK),this.initVariables(),this.addDestroyFunc(()=>(e=>{if(oc.grids.delete(e),0===oc.grids.size)for(let e of(oc.map=new WeakMap,document.head.querySelectorAll("style[data-ag-global-css]")))e.remove()})(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){let i,{theme:r}=this;for(let t of(i=r?`${this.paramsClass} ${r._getCssClass()}`:this.applyLegacyThemeClasses(),Array.from(e.classList)))t.startsWith("ag-theme-")&&e.classList.remove(t);if(i){let r=e.className;e.className=`${r}${r?" ":""}${i}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(let r of Array.from(t.classList))r.startsWith("ag-theme-")&&(i=!0,e=e?`${e} ${r}`:r);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?ou(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(oK)}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(null!=t)return t;let i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){let t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";let i=t.offsetWidth;return i===oX?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=th({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.getMeasurementContainer();t=th({tag:"div"});let{border:r,noWarn:n}=e;r?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${oX}px)`)):t.style.width=`var(${e.cssName}, ${oX}px)`,i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);"no-styles"!==o||n||this.varError(e);let s=tl(this.beans,t,()=>{let t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==o&&(o=t,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}handleThemeChange(){let e,{gos:t,theme:i}=this,r=t.get("theme");if("legacy"===r)e=void 0;else{let t=r??this.getDefaultTheme();t instanceof oB?e=t:this.themeError(t)}e!==i&&this.handleNewTheme(e),this.postProcessThemeChange(e,r)}handleNewTheme(e){let{gos:t,eRootDiv:i,globalCSS:r}=this,n=this.getAdditionalCss();if(e){for(let[e,t]of(oc.grids.add(this),od(this.eStyleContainer,this.cssLayer,this.styleNonce,n),r))ou(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce);r.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=th({tag:"style"});let e=t.get("styleNonce");e&&o.setAttribute("nonce",e),i.appendChild(o)}ol||(o.textContent=e?._getPerInstanceCss(this.paramsClass)||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[e]:!0})}},oX=15538,oY=(e,t,i)=>{let r=60,n=setInterval(()=>{"undefined"!=typeof ShadowRoot&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(n)),(e8(e)||--r<0)&&clearInterval(n)},1e3);i(()=>clearInterval(n))},oZ=class extends tR{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e)for(let t of(this.dynamicBeans??(this.dynamicBeans={}),Object.keys(e)))this.dynamicBeans[t]=e[t]}createDynamicBean(e,t,...i){if(!this.dynamicBeans)throw Error(this.getDynamicError(e,!0));let r=this.dynamicBeans[e];if(null==r){if(t)throw Error(this.getDynamicError(e,!1));return}return new r(...i)}},oJ=class extends tR{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new eg}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},o0=class extends tR{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){let i="title",r=this.ctrl.getGui();r&&(null!=e&&(""!=e||t)?r.setAttribute(i,e):r.removeAttribute(i))}updateTooltipText(){let{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(null==this.tooltipManager){let e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},o1=!1,o2=class extends tR{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.tooltipCtrl.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){return Math.max(200,this.gos.get(e))}getTooltipDelay(e){return"show"===e?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),nb()||(o1?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},100):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){let t=e.relatedTarget,i=this.tooltipCtrl.getGui(),r=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&r?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(0!=this.state||o1)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-C<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=this.getTooltipValue(),t=this.tooltipCtrl;if(!ev(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip())return void this.setToDoNothing();let i=this.gos.addCommon({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()});this.state=2,this.tooltipInstanceCount++;let r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(i,r)}hideTooltip(e){(e||!this.isInteractingWithTooltip)&&(this.tooltipComp&&(this.destroyTooltipComp(),C=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);let i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");let r=this.getLocaleTextFunc(),n=this.popupSvc?.addPopup({eChild:i,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){let e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:e}),this.setEventHandlers(e)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(eM(this.beans),{keydown:e=>{i.contains(e?.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let e=this.tooltipComp?.getGui(),t=eP(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){let t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=1e3*(0===this.tooltipTrigger);window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(let e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){o1=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},100)}unlockService(){o1=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},o5=class extends o0{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){1===this.tooltipMode&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=+("focus"===e)}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},o3=0,o4=class extends tR{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:i,nudgeY:r,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:n,eventSource:o,alignSide:s="left",position:a="over",type:l}=e,u=o.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(o,t);let c=()=>{let i,n=u.left-d.left;return"right"===s&&(n-=t.offsetWidth-u.width),"over"===a?(i=u.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),i="under"===this.shouldRenderUnderOrAbove(t,u,d,e.nudgeY||0)?u.top-d.top+u.height:u.top-t.offsetHeight-2*(r||0)-d.top),{x:n,y:i}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:n,updatePosition:c,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,l,t,o,null)})}positionPopupForMenu(e){let{eventSource:t,ePopup:i,event:r}=e,n=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,i);let s=!1,a=()=>{let e,t=this.keepXYWithinBounds(i,n.top-o.top,0),r=i.clientWidth>0?i.clientWidth:200;s||(i.style.minWidth=`${r}px`,s=!0);let a=o.right-o.left-r;return this.gos.get("enableRtl")?((e=u())<0&&(e=l(),this.setAlignedStyles(i,"left")),e>a&&(e=0,this.setAlignedStyles(i,"right"))):((e=l())>a&&(e=u(),this.setAlignedStyles(i,"right")),e<0&&(e=0,this.setAlignedStyles(i,"left"))),{x:e,y:t};function l(){return n.right-o.left-2}function u(){return n.left-o.left-r}};this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",i,t,r instanceof MouseEvent?r:void 0)})}shouldRenderUnderOrAbove(e,t,i,r){let n=i.bottom-t.bottom,o=t.top-i.top,s=e.offsetHeight+r;return n>s?"under":o>s||o>n?"above":"under"}setAlignedStyles(e,t){let i=this.getPopupIndex(e);if(-1===i)return;let{alignedToElement:r}=this.popupList[i];if(r){for(let t of["right","left","over","above","under"])r.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`);t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}}setAlignedTo(e,t){let i=this.getPopupIndex(t);-1!==i&&(this.popupList[i].alignedToElement=e)}positionPopup(e){let{ePopup:t,keepWithinBounds:i,nudgeX:r,nudgeY:n,skipObserver:o,updatePosition:s}=e,a={width:0,height:0},l=(o=!1)=>{let{x:l,y:u}=s();(!o||t.clientWidth!==a.width||t.clientHeight!==a.height)&&(a.width=t.clientWidth,a.height=t.clientHeight,r&&(l+=r),n&&(u+=n),i&&(l=this.keepXYWithinBounds(t,l,1),u=this.keepXYWithinBounds(t,u,0)),t.style.left=`${l}px`,t.style.top=`${u}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){let e=tl(this.beans,t,()=>l(!0));setTimeout(()=>e(),200)}}getParentRect(){let e=eM(this.beans),t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),e1(t)}keepXYWithinBounds(e,t,i){let r=0===i,n=r?"top":"left",o=eM(this.beans),s=o.documentElement,a=this.getPopupParent(),l=e.getBoundingClientRect(),u=a.getBoundingClientRect(),d=o.documentElement.getBoundingClientRect(),c=a===o.body,h=Math.ceil(l[r?"height":"width"]),p=c?(r?eJ:e0)(s)+s[r?"scrollTop":"scrollLeft"]:a[r?"clientHeight":"clientWidth"];return c&&(p-=Math.abs(d[n]-u[n])),Math.min(Math.max(t,0),Math.max(p-h,0))}addPopup(e){let{eChild:t,ariaLabel:i,ariaOwns:r,alwaysOnTop:n,positionCallback:o,anchorToElement:s}=e,a=this.getPopupIndex(t);if(-1!==a)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);let l=this.createPopupWrapper(t,!!n,i,r),u=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(t,l,u,s),{hideFunc:u}}initialisePopupPosition(e){let t=this.getPopupParent().getBoundingClientRect();ev(e.style.top)||(e.style.top=`${-1*t.top}px`),ev(e.style.left)||(e.style.left=`${-1*t.left}px`)}createPopupWrapper(e,t,i,r){let n=this.getPopupParent(),{environment:o,gos:s}=this.beans,a=th({tag:"div"});return(o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(s.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||eI(e,"dialog"),i)?eL(e,i):r&&(e.id||(e.id=`popup-component-${o3}`),e_(r,"owns",e.id)),a.appendChild(e),n.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){let t=this.beans,i=eM(t),{wrapperEl:r,eChild:n,closedCallback:o,afterGuiAttached:s,closeOnEsc:a,modal:l,ariaOwns:u}=e,d=!1,c=e=>{!r.contains(eP(t))||e.key!==r9||this.isStopPropagation(e)||f({keyboardEvent:e})},h=e=>f({mouseEvent:e}),p=e=>f({touchEvent:e}),f=(e={})=>{let{mouseEvent:t,touchEvent:s,keyboardEvent:a,forceHide:l}=e;!l&&(this.isEventFromCurrentPopup({mouseEvent:t,touchEvent:s},n)||d)||(d=!0,r.remove(),i.removeEventListener("keydown",c),i.removeEventListener("mousedown",h),i.removeEventListener("touchstart",p),i.removeEventListener("contextmenu",h),this.eventSvc.removeListener("dragStarted",h),o&&o(t||s||a),this.removePopupFromPopupList(n,u))};return s&&s({hidePopup:f}),window.setTimeout(()=>{a&&i.addEventListener("keydown",c),l&&(i.addEventListener("mousedown",h),this.eventSvc.addListener("dragStarted",h),i.addEventListener("touchstart",p),i.addEventListener("contextmenu",h))},0),f}addPopupToPopupList(e,t,i,r){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:o3,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(e,r),o3+=1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let i=this.getPopupIndex(e);if(-1===i)return;let r=this.popupList[i];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(e=>e&&e()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!t)return;let n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:r.hideFunc});return r.stopAnchoringPromise=n,r.isAnchored=!0,n}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&e_(t,"owns",null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:r,ePopup:n}=e,o=r.getBoundingClientRect(),s=e=>Number.parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{let r=i[e]-o[e],a=s(n.style[e]);return{initialDiff:r,lastDiff:r,initial:a,last:a,direction:t}},l=a("top",0),u=a("left",1),d=this.beans.frameworkOverrides;return new rN(i=>{d.wrapIncoming(()=>{var o;(o=()=>{let i=t.getBoundingClientRect(),o=r.getBoundingClientRect();if(0==o.top&&0==o.left&&0==o.height&&0==o.width)return void e.hidePopup();let a=(e,t)=>{let r=s(n.style[t]);e.last!==r&&(e.initial=r,e.last=r);let a=i[t]-o[t];if(a!=e.lastDiff){let i=this.keepXYWithinBounds(n,e.initial+e.initialDiff-a,e.direction);n.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(u,"left")},new rN(e=>{e(window.setInterval(o,200))})).then(e=>{i(()=>{null!=e&&window.clearInterval(e)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){let{mouseEvent:i,touchEvent:r}=e,n=i||r;if(!n)return!1;let o=this.getPopupIndex(t);if(-1===o)return!1;for(let e=o;e<this.popupList.length;e++){var s;if(s=this.popupList[e].element,n&&s&&(function(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();let t=[],i=e.target;for(;i;)t.push(i),i=i.parentElement;return t})(n).indexOf(s)>=0)return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){let t=eM(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){let t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),r=i.length,n=this.getWrapper(e);if(!n||r<=1||!t.contains(e))return;let o=[],s=[];for(let e of i)e!==n&&(e.classList.contains("ag-always-on-top")?s.push(e):o.push(e));let a=[],l=s.length,u=n.classList.contains("ag-always-on-top")||!l?[...o,...s,n]:[...o,n,...s];for(let e=0;e<=r;e++){let r=u[e];if(i[e]!==u[e]&&r!==n){for(let e of r.querySelectorAll("div"))0!==e.scrollTop&&a.push([e,e.scrollTop]);0===e?t.insertAdjacentElement("afterbegin",r):u[e-1].insertAdjacentElement("afterend",r)}}for(;a.length;){let e=a.pop();e[0].scrollTop=e[1]}}handleThemeChange(e){if(e.themeChanged){let e=this.beans.environment;for(let t of this.popupList)e.applyThemeClasses(t.wrapper)}}},o8=class extends ng{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){let{value:t}=e,i=this.getGui();i.textContent=eS(t);let r=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add(`ag-${r}-tooltip`)}},o6=(e,t)=>{if(null!=t&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},o7=e=>{let{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},o9={passive:!0},se={passive:!1},st=e=>{if(S){if(S.has(e))return!1}else S=new WeakSet;return S.add(e),!0},si=class extends tR{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!x?.has(eE(this.beans))}hasPointerCapture(){let e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();let e=this.dragSources;for(let t of e)sr(t);e.length=0,super.destroy()}removeDragSource(e){let t=this.dragSources;for(let i=0,r=t.length;i<r;++i){let r=t[i];if(r.params===e){t.splice(i,1),sr(r);break}}}addDragSource(e){let t;if(!this.isAlive())return;let{eElement:i,includeTouch:r}=e,n=[];if(r){let e=i.style;e&&(t=e.touchAction,e.touchAction="none")}let o={handlers:n,params:e,oldTouchAction:t};this.dragSources.push(o),tw(n,[i,"pointerdown",t=>this.onPointerDown(e,t),se],[i,"mousedown",t=>this.onMouseDown(e,t)]);let s=this.gos.get("suppressTouch");r&&!s&&tw(n,[i,"touchstart",t=>this.onTouchStart(e,t),se])}cancelDrag(e){let t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){let t=e.type;return("mousemove"===t||"pointermove"===t)&&e.cancelable&&tb(this.beans,e)&&!e$(so(e))}initDrag(e,...t){this.drag=e;let i=this.beans,r=e=>this.onScroll(e),n=e=>this.onKeyDown(e),o=eE(i),s=eM(i);tw(e.handlers,[o,"contextmenu",tx],[o,"keydown",n],[s,"scroll",r,{capture:!0}],[s.defaultView||window,"scroll",r],...t)}destroyDrag(){this.dragging=!1;let e=this.drag;if(e){let t=e.rootEl;x?.get(t)===e&&x.delete(t),this.drag=null,(e=>{if(!e)return;o7(e);let{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch{}e.eElement=null}})(e.pointerCapture),tC(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;let i=this.beans;if(S?.has(t))return;let r=t.pointerType;if("touch"===r&&(i.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),e$(so(t)))))return;if(!t.isPrimary||"mouse"===r&&0!==t.button)return;this.destroyDrag();let n=eE(i),o=e.eElement,s=t.pointerId,a=new sn(n,e,t,s);x??(x=new WeakMap),x.set(n,a);let l=e=>{e.pointerId===s&&this.onMouseOrPointerMove(e)},u=e=>{e.pointerId===s&&this.onMouseOrPointerUp(e)},d=e=>{e.pointerId===s&&st(e)&&this.cancelDrag()},c=e=>this.draggingPreventDefault(e);this.initDrag(a,[n,"pointerup",u],[n,"pointercancel",d],[n,"pointermove",l,se],[n,"touchmove",c,se],[o,"mousemove",c,se]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):st(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!st(t)||e$(so(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){this.dragging&&tx(t);return}this.destroyDrag();let i=this.beans,r=new sn(eE(i),e,t.touches[0]),n=e=>this.onTouchMove(e),o=e=>this.onTouchUp(e),s=e=>this.onTouchCancel(e),a=e=>this.draggingPreventDefault(e),l=eE(i),u=t.target??e.eElement;this.initDrag(r,[u,"touchmove",n,o9],[u,"touchend",o,o9],[u,"touchcancel",s,o9],[l,"touchmove",a,se],[l,"touchend",o,se],[l,"touchcancel",s,se]),0===e.dragStartPixels&&this.onMove(r.start)}draggingPreventDefault(e){this.dragging&&tx(e)}onMouseDown(e,t){if(0!==t.button||S?.has(t)||this.isPointer())return;let i=this.beans;this.destroyDrag();let r=new sn(eE(i),e,t),n=e=>this.onMouseOrPointerMove(e),o=e=>this.onMouseOrPointerUp(e),s=eE(i);this.initDrag(r,[s,"mousemove",n],[s,"mouseup",o]),0===e.dragStartPixels?this.onMouseOrPointerMove(t):st(t)}onScroll(e){if(!st(e))return;let t=this.drag,i=t?.lastDrag;i&&this.dragging&&t.params?.onDragging?.(i)}onMouseOrPointerMove(e){st(e)&&(nm()&&eM(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&tx(e),this.onMove(e))}onTouchCancel(e){let t=this.drag;t&&st(e)&&ty(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){let t=this.drag;if(!t||!st(e))return;let i=ty(t.start,e.touches);i&&(this.onMove(i),this.draggingPreventDefault(e))}onMove(e){let t=this.drag;if(!t)return;t.lastDrag=e;let i=t.params;if(!this.dragging){let r=t.start;if(tv(e,r,i.dragStartPixels??4)||(this.dragging=!0,i.capturePointer&&(t.pointerCapture=((e,t)=>{if("undefined"==typeof PointerEvent||!(t instanceof PointerEvent))return null;let i=t.pointerId;if(!o6(e,i))return null;let r={eElement:e,pointerId:i,onLost(e){((e,t)=>{o7(e);let{eElement:i,pointerId:r}=e;i&&t.pointerId===r&&o6(i,r)})(r,e)}};return e.addEventListener("lostpointercapture",r.onLost),r})(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:i.eElement}),i.onDragStart?.(r),this.drag!==t)||(i.onDragging?.(r),this.drag!==t))return}i.onDragging?.(e)}onTouchUp(e){let t=this.drag;t&&st(e)&&this.onUp(ty(t.start,e.changedTouches))}onMouseOrPointerUp(e){st(e)&&this.onUp(e)}onUp(e){let t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop?.(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===r9&&this.cancelDrag()}},sr=e=>{tC(e.handlers);let t=e.oldTouchAction;if(null!=t){let i=e.params.eElement.style;i&&(i.touchAction=t)}},sn=class{constructor(e,t,i,r=null){this.rootEl=e,this.params=t,this.start=i,this.pointerId=r,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},so=e=>{let t=e.target;return t instanceof Element?t:null},ss=class extends tR{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e,t=!1){let i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:t=>this.onDragStart(e,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e,t=!1){let i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){let{dragSourceAndParamsList:t,beans:i}=this;for(let r=0,n=t.length;r<n;r++)if(t[r].dragSource===e){let e=t[r];i.dragSvc?.removeDragSource(e),t.splice(r,1);break}}destroy(){let{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,r=i.dragSvc;for(let t of e)r?.removeDragSource(t);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){let e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();let i=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-i.left,this.dragInitialSourcePointerOffsetY=t.clientY-i.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){let{dragSource:t,lastDropTarget:i}=this;if(t?.onDragStopped?.(),i){let t=this.dropTargetEvent(i,e,!1);i.onDragStop?.(t)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:e,lastDropTarget:t,lastMouseEvent:i}=this;if(e?.onDragCancelled?.(),t&&i){let e=this.dropTargetEvent(t,i,!1);t.onDragCancel?.(e)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);let i=this.findCurrentDropTarget(e),{lastDropTarget:r,dragSource:n,dragItem:o}=this,s=!1;if(i!==r){if(s=!0,r){let i=this.dropTargetEvent(r,e,t);r.onDragLeave?.(i)}if(null===r||i?null===r&&i&&this.handleEnter(n,o):this.handleExit(n,o),i){let r=this.dropTargetEvent(i,e,t);i.onDragEnter?.(r)}this.lastDropTarget=i}else if(i){let r=this.dropTargetEvent(i,e,t);i.onDragging?.(r),r?.changed&&(s=!0)}this.lastMouseEvent=e,s&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){let t=e.getContainer(),i=e.getSecondaryContainers?.(),r=i?.length;if(!r)return[[t]];let n=Array(r+1);n[0]=[t];for(let e=0;e<r;++e)n[e+1]=i[e];return n}isMouseOnDropTarget(e,t){let i=this.getAllContainersFromDropTarget(t),r=!1,n=(e,t)=>{for(let i of t){let{width:t,height:r,left:n,right:o,top:s,bottom:a}=i.getBoundingClientRect();if(0===t||0===r)return!1;let l=e.clientX>=n&&e.clientX<o,u=e.clientY>=s&&e.clientY<a;if(!l||!u)return!1}return!0};for(let t of i)if(n(e,t)){r=!0;break}let{eElement:o,type:s}=this.dragSource;return(!t.targetContainsSource||!!t.getContainer().contains(o))&&r&&t.isInterestedIn(s,o)}findCurrentDropTarget(e){let t=[],i=this.dropTargets;for(let r=0,n=i.length;r<n;++r){let n=i[r];this.isMouseOnDropTarget(e,n)&&t.push(n)}let r=t.length;if(0===r)return null;if(1===r)return t[0];let n=eE(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let e=0,i=n.length;e<i;++e){let i=n[e];for(let e=0,r=t.length;e<r;e++){let r=t[e],n=this.getAllContainersFromDropTarget(r),o=!1;for(let e=0,t=n.length;e<t&&!o;e++){let t=n[e];for(let e=0,r=t.length;e<r;e++)if(t[e]===i){o=!0;break}}if(o)return r}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){let t=e.getContainer(),i=this.dropTargets,r=0;for(let e=0,n=i.length;e<n;++e){let n=i[e];if(n.getContainer()===t){n.external&&--this.externalDropZoneCount;continue}r!==e&&(i[r]=n),++r}i.length=r}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){let t=this.dropTargets;for(let i=0,r=t.length;i<r;++i){let r=t[i];if(r.external&&r.getContainer()===e)return r}return null}dropTargetEvent(e,t,i){let{dragSource:r,dragItem:n,lastDraggingEvent:o,lastMouseEvent:s,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,u=e.getContainer(),d=u.getBoundingClientRect(),{clientX:c,clientY:h}=t,p=c-(s?.clientX||0),f=h-(s?.clientY||0),g=this.createEvent({event:t,x:c-d.left,y:h-d.top,vDirection:f>0?"down":f<0?"up":null,hDirection:p<0?"left":p>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:r,fromNudge:i,dragItem:n,dropZoneTarget:u,dropTarget:o?.dropTarget??null,changed:!!o?.changed});return this.lastDraggingEvent=g,g}positionDragImageComp(e){let t=this.dragImageComp?.getGui();t&&function(e,t,i){let r,n,o=e.getBoundingClientRect().height,s=(r=eO(i),(r?.clientWidth??(window.innerWidth||-1))-2),a=(n=eO(i),(n?.clientHeight??(window.innerHeight||-1))-2);if(!e.offsetParent)return;let l=e1(e.offsetParent),{clientY:u,clientX:d}=t,c=u-l.top-o/2,h=d-l.left-10,p=eM(i),f=p.defaultView||window,g=f.pageYOffset||p.documentElement.scrollTop,m=f.pageXOffset||p.documentElement.scrollLeft;s>0&&h+e.clientWidth>s+m&&(h=s+m-e.clientWidth),h<0&&(h=0),a>0&&c+e.clientHeight>a+g&&(c=a+g-e.clientHeight),c<0&&(c=0),e.style.left=`${h}px`,e.style.top=`${c}px`}(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){let t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(e=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive())return void this.destroyBean(e);this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;let i=this.dragImageComp;i!==e&&(this.dragImageComp=e,this.removeDragImageComp(i)),e&&(this.appendDragImageComp(e),this.updateDragImageComp())})}appendDragImageComp(e){let t=e.getGui(),i=t.style;i.position="absolute",i.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(i.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),i.top="20px",i.left="20px";let r=eO(this.beans);r?r.appendChild(t):this.warnNoBody()}updateDragImageComp(){let{dragImageComp:e,dragSource:t,lastDropTarget:i,lastDraggingEvent:r,dragImageLastLabel:n}=this;if(!e)return;this.setDragImageCompIcon(i?.getIconName?.(r)??null);let o=t?.dragItemName;"function"==typeof o&&(o=o(r)),o||(o=""),n!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},sa=class extends tR{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:i,eFocusableElement:r,stopPropagationCallbacks:n}=this,o=[t,i];this.addTabGuards(t,i);let{focusTrapActive:s=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:u,handleKeyDown:d,onTabKeyDown:c,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new nF({comp:{setTabIndex:e=>{for(let t of o)null==e?t.removeAttribute("tabindex"):t.setAttribute("tabindex",e)}},focusTrapActive:s,eTopGuard:t,eBottomGuard:i,eFocusableElement:r,onFocusIn:a,onFocusOut:l,focusInnerElement:u,handleKeyDown:d,onTabKeyDown:c,shouldStopEventPropagation:h,isEmpty:p,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:g},n))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=eM(this.beans).createElement("div");return t.classList.add(nO,"top"===e?n_:nA),eI(t,"presentation"),t}addTabGuards(e,t){let i=this.eFocusableElement;i.prepend(e),i.append(t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];e3(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){ts(t)||(t=t.getGui());let{eBottomGuard:r}=this;r?r.before(t):e(t,i)}destroy(){let{eTopGuard:e,eBottomGuard:t}=this;e4(e),e4(t),super.destroy()}},sl=class extends rF{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new sa(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},su=((l=su||{})[l.ToolPanel=0]="ToolPanel",l[l.HeaderCell=1]="HeaderCell",l[l.RowDrag=2]="RowDrag",l[l.ChartPanel=3]="ChartPanel",l[l.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",l),sd=class extends ss{createEvent(e){return iB(this.gos,e)}createDragImageComp(e){var t,i;let{gos:r,beans:n}=this,o=(t=n.userCompFactory,i=iB(r,{dragSource:e}),t.getCompDetailsFromGridOptions(rz,"agDragAndDropImage",i,!0));return o?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){t7(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){let i={getContainer:e,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}};function sc(e){return e instanceof sh}var sh=class extends tE{constructor(e,t,i,r){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=r,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=ek(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return this.groupId+"_"+this.partId}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!!e&&0!==e.length&&e.every(e=>e.isMoving())}checkLeft(){for(let e of this.displayedChildren)sc(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let e=i3(this.displayedChildren).getLeft();this.setLeft(e)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(let t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(let t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(let t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(let t of this.displayedChildren??[])ij(t)?e.push(t):sc(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(let t of this.children??[])ij(t)?e.push(t):sc(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return this.isPadding()&&e?.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e&&e.getProvidedColumnGroup().isExpandable())){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(let t of this.children??[])if(!sc(t)||t.displayedChildren?.length)switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},sp="row-group-",sf=0,sg=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=sf++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){let e=this._groupData;return void 0!==e?e:this.footer?this.sibling?.groupData:this.beans.groupStage?.loadGroupData(this)??null}set groupData(e){this._groupData=e}get allLeafChildren(){let e=this._leafs;return void 0===e?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){let{valueCache:i,eventSvc:r}=this.beans,n=this.data;this.data=e,i?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();let o=this.createDataChangedEvent(e,n,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;let i=this.sibling.createDataChangedEvent(e,n,t);this.sibling.__localEventService?.dispatchEvent(i)}r.dispatchEvent({type:"rowNodeDataChanged",node:this});let s=this.pinnedSibling;s&&(s.data=e,s.__localEventService?.dispatchEvent(s.createDataChangedEvent(e,n,t)),r.dispatchEvent({type:"rowNodeDataChanged",node:s}))}updateDataOnDetailNode(){let e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(t9(13),null):"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){let{selectionSvc:i}=this.beans,r=i?.createDaemonNode?.(this),n=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,r));let o=this.createDataChangedEvent(e,n,!1);this.__localEventService?.dispatchEvent(o)}setId(e){let t=ix(this.beans.gos);if(t)if(this.data){let e=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:e.length>0?e:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(sp)&&t9(14,{groupPrefix:sp})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");let t=null!==e;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){this.beans.expansionSvc?.setExpanded(this,e,t,i)}setDataValue(e,t,i){let{colModel:r,valueSvc:n,gos:o,editSvc:s}=this.beans,a="string"!=typeof e?e:r.getCol(e)??r.getColDefCol(e);if(!a)return!1;let l=n.getValueForDisplay({column:a,node:this,source:"api"}).value;if(o.get("readOnlyEdit")){let{beans:{eventSvc:e},data:r,rowIndex:n,rowPinned:o}=this;return e.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:n,rowPinned:o,column:a,colDef:a.colDef,data:r,node:this,oldValue:l,newValue:t,value:t,source:i}),!1}if(s&&!s.committing){let e=s.setDataValue({rowNode:this,column:a},t,i);if(null!=e)return e}let u=n.setValue(this,a,t,i);return this.dispatchCellChangedEvent(a,t,l),u&&this.pinnedSibling?.dispatchCellChangedEvent(a,t,l),u}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length,{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){this.__localEventService?.dispatchEvent({type:"cellChanged",node:this,column:e,newValue:t,oldValue:i})}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();let e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){let t=this.childrenAfterGroup;if(t)for(let i=0,r=t.length;i<r;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new eg)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);let i=this.__localEventService??(this.__localEventService=new eg);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,i);let r=this.frameworkEventListenerService?.wrap(e,t)??t;i.addEventListener(e,r)}removeEventListener(e,t){let i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){let i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(t7(61),this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;let e=[],t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){let e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}_destroy(e){if(this.destroyed)return!1;if(this.destroyed=!0,e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){let t=this.detailNode;t&&t._destroy(e);let i=this.sibling;i&&i._destroy(e)}return!0}},sm=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),sv=(e,t,i)=>{if(!i)return;let r=i.rowIndex;if(null==r)return;r+=t;let n=e.getRowCount();for(;r>=0&&r<n;){let i=e.getRow(r);if(!i||!i.footer&&!i.detail)return i;r+=t}},sy={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},sb=new Set(Object.values(sy));function sw(e,t){let i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;let r=i.create(i.refreshed);return i.created=!0,i.promise=r,r}function sC(e,t,i,r,n,o){e?.refresh?.({...t,model:i,state:r,source:n,additionalEventAttributes:o})}function sx(e,t,i,r){let n=e();n?.created&&n.promise.then(e=>{let o=t();sC(e,n.filterParams,o,i()??{model:o},"ui",r)})}function sS(e){let t,i,r=!1,{action:n,filterParams:o,getFilterUi:s,getModel:a,getState:l,updateState:u,updateModel:d,processModelToApply:c}=e;switch(n){case"apply":{let e=l();i=e?.model??null,c&&(i=c(i)),t={state:e?.state,model:i},r=!0;break}case"clear":t={model:null},o?.buttons?.includes("apply")||(r=!0,i=null);break;case"reset":t={model:null},r=!0,i=null;break;case"cancel":t={model:a()}}u(t),r?d(i):sx(s,a,l,{fromAction:n})}function sk(e,t){return e[t]??null}var sR=class extends rI{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super({tag:"div",cls:t}),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){let i,r=this.buttons;if(this.buttons=e,r===e)return;let n=this.getGui();e3(n),this.destroyListeners();let o=document.createDocumentFragment(),s=this.className,a=({type:e,label:r})=>{let n=t=>{this.dispatchLocalEvent({type:e,event:t})};["apply","clear","reset","cancel"].includes(e)||t7(75);let a="apply"===e,l=th({tag:"button",attrs:{type:a&&t?"submit":"button"},ref:`${e}FilterButton`,cls:`ag-button ag-standard-button ${s}-button${a?" "+s+"-apply-button":""}`,children:r});this.activateTabIndex([l]),a&&(i=l);let u=e=>{e.key===r7&&(e.preventDefault(),n(e))},d=this.listeners;l.addEventListener("click",n),d.push(()=>l.removeEventListener("click",n)),l.addEventListener("keydown",u),d.push(()=>l.removeEventListener("keydown",u)),o.append(l)};for(let t of e)a(t);this.eApply=i;let l=this.validationTooltipFeature;i&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!i&&l&&(this.validationTooltipFeature=this.destroyBean(l)),n.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){let i=this.eApply;i&&(eK(i,!e),this.validationMessage=t,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(let e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},sE={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`,minDateValidation:e=>`Date must be after ${e[0]}`,maxDateValidation:e=>`Date must be before ${e[0]}`,strictMinValueValidation:e=>`Must be greater than ${e[0]}`,strictMaxValueValidation:e=>`Must be less than ${e[0]}`};function sP(e,t,i){let r;return r=sE[t],e.getLocaleTextFunc()(t,"function"==typeof r?r(i):r,i)}function sM(e,t){let{debounceMs:i}=e;return sD(e)?(null!=i&&t7(71),0):i??t}function sD(e){return(e.buttons?.indexOf("apply")??-1)>=0}function sT(e,t,i,r){let n=sP(e,i);if("function"==typeof t){let i=sP(e,r);n=t({filterOptionKey:r,filterOption:i,placeholder:n})}else"string"==typeof t&&(n=t);return n}var sO=class extends rI{constructor(e,t,i,r,n,o){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=r,this.isGlobalButtons=n,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){let{comp:e,params:t}=this.wrapper,i=t.useForm;this.setTemplate({tag:i?"form":"div",cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:e=>{e?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=t,this.resetButtonsPanel(t),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:e,params:t})=>{e===this.column&&this.resetButtonsPanel(t,this.params)},filterStateChanged:({column:e,state:t})=>{e===this.column&&this.eButtons?.updateValidity(!1!==t.valid)},filterAction:({column:e,action:t,event:i})=>{e===this.column&&this.afterAction(t,i)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:e})=>{if(e!==this.isGlobalButtons){this.isGlobalButtons=e;let t=this.params;this.resetButtonsPanel(t,t,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){let{buttons:r,readOnly:n}=t??{},{buttons:o,readOnly:s,useForm:a}=e;if(!i&&n===s&&ew(r,o))return;let l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons,u=this.eButtons;if(l){let e=o.map(e=>{let t=`${e}Filter`;return{type:e,label:sP(this,t)}});if(this.applyActive=sD(this.params),!u){u=this.createBean(new sR),this.appendChild(u.getGui());let e=this.column,t=t=>({event:i})=>{this.updateModel(e,t,{fromButtons:!0}),this.afterAction(t,i)};u?.addManagedListeners(u,{apply:t("apply"),clear:t("clear"),reset:t("reset"),cancel:t("cancel")}),this.eButtons=u}u.updateButtons(e,a)}else this.applyActive=!1,u&&(e4(u.getGui()),this.eButtons=this.destroyBean(u))}close(e){let t,i=this.hidePopup;if(!i)return;let r=e?.key;(r===r7||" "===r)&&(t={keyboardEvent:e}),i(t),this.hidePopup=null}afterAction(e,t){let{params:i,applyActive:r}=this,n=i?.closeOnApply;switch(e){case"apply":t?.preventDefault(),n&&r&&this.close(t);break;case"reset":n&&r&&this.close();break;case"cancel":n&&this.close(t)}}handleKeyDown(e){!e.defaultPrevented&&e.key===r7&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},s_={tag:"div",cls:"ag-filter"},sA=class extends rI{constructor(e,t,i){super(s_),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return null!=this.wrapper}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??rN.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:i,beans:{colFilter:r}}=this,n=r.getFilterUiForDisplay(t)??null;this.wrapper=n,n?.then(n=>{let o;if(!n)return;let{isHandler:s,comp:a}=n;if(s){let e=!!this.enableGlobalButtonCheck,i=this.createBean(new sO(t,n,r,r.updateModel.bind(r),e&&r.isGlobalButtons,e));this.comp=i,o=i.getGui()}else ev(o=a.getGui())||t7(69,{guiFromFilter:o});this.appendChild(o),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){let{source:t,column:i}=e;("api"===t||"paramsUpdated"===t)&&i.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(e3(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},sF={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},sI=["january","february","march","april","may","june","july","august","september","october","november","december"];function sL(e,t){return null==e?-1:null==t?1:Number.parseFloat(e)-Number.parseFloat(t)}function sN(e){return e instanceof Date&&!isNaN(e.getTime())}var sB={number:()=>void 0,boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]}),date:()=>({isValidDate:sN}),dateString:({dataTypeDefinition:e})=>({comparator:(t,i)=>{let r=e.dateParser(i);return null==i||r<t?-1:+(r>t)},isValidDate:t=>"string"==typeof t&&sN(e.dateParser(t))}),dateTime:e=>sB.date(e),dateTimeString:e=>sB.dateString(e),object:()=>void 0,text:()=>void 0},sV={number:()=>({comparator:sL}),boolean:({t:e})=>({valueFormatter:t=>ev(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:i=>{let r=e(i);return ev(r)?r:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,i)=>{if("NaN"===e)return t("invalidDate","Invalid Date");if(1===i&&null!=e){let i=sI[Number(e)-1];return t(i,sF[i])}return e??t("blanks","(Blanks)")},treeListPathGetter:e=>nW(e,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:i})=>({valueFormatter:t=>{let r=e(t);return ev(r)?r:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:e=>nW(t.dateParser(e??void 0),!1),treeListFormatter:(e,t)=>{if(1===t&&null!=e){let t=sI[Number(e)-1];return i(t,sF[t])}return e??i("blanks","(Blanks)")}}),dateTime:e=>{let t=sV.date(e);return t.treeListPathGetter=nW,t},dateTimeString(e){let t=e.dataTypeDefinition.dateParser,i=sV.dateString(e);return i.treeListPathGetter=e=>nW(t(e??void 0)),i},object:({formatValue:e,t})=>({valueFormatter:i=>{let r=e(i);return ev(r)?r:t("blanks","(Blanks)")}}),text:()=>void 0},sH={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},sz={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"},sj=class extends nV{},sG="__ag_Grid_Stop_Propagation";function sW(e){e[sG]=!0}function sU(e){return!0===e[sG]}var s$={isStopPropagation:sU,stopPropagation:sW},sq=class extends nT{constructor(e,t){super(e,s$,t)}},sK=class extends rI{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){let e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new sq(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new sj(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){this.setParams(e),this.setModelIntoUi(e.state.model,!0).then(()=>this.updateUiVisibility())}areStatesEqual(e,t){return e===t}refresh(e){let t=this.params;this.params=e;let{source:i,state:r,additionalEventAttributes:n}=e;"colDef"===i&&this.updateParams(e,t);let o=this.state;this.state=r;let s=n?.fromAction;return(s&&"apply"!==s||r.model!==o.model||!this.areStatesEqual(r.state,o.state))&&this.setModelIntoUi(r.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=sD(e),this.setupApplyDebounced()}doesFilterPass(e){t7(283);let{getHandler:t,model:i,column:r}=this.params;return t().doesFilterPass({...e,model:i,handlerParams:this.beans.colFilter.getHandlerParams(r)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return t7(284),null!=this.params.model}setupApplyDebounced(){let e=sM(this.params,this.defaultDebounceMs),t=t_(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return t7(285),this.params.model}setModel(e){t7(286);let{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){let{params:t,state:{valid:i=!0,model:r}}=this;if(!i)return!1;let n=!this.areModelsEqual(t.model,r);return n&&t.onAction("apply",e),n}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();let i=this.getModelFromUi(),r={model:i,state:this.getState(),valid:this.canApply(i)};this.state=r;let{params:n,gos:o,eventSvc:s,applyActive:a}=this;n.onStateChange(r),n.onUiChange(this.getUiChangeEventParams()),o.get("enableFilterHandlers")||s.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this}),r.valid&&(e??(e=a?void 0:"debounce"),"immediately"===e?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):"debounce"===e&&this.applyDebounced())}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){let{positionableFeature:t,gos:i}=this;if(!t)return;let r="floatingFilter"===e||"columnFilter"===e;r?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(r)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e,t){return sP(this,e,t)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&this.areNonNullModelsEqual(e,t)}};function sQ(e){return!!e.operator}var sX={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},sY=class extends tE{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.gos.get("domLayout"),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?sX.AUTO_HEIGHT:t.print?sX.PRINT:sX.NORMAL;this.view.updateLayoutClasses(i,t)}},sZ="Viewport",sJ="fakeVScrollComp",s0=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],s1=class extends tE{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=t_(this,()=>this.lastScrollSource[1]=null,150),this.resetLastVScrollDebounced=t_(this,()=>this.lastScrollSource[0]=null,150)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");let e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){for(let e of(this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,sZ)}),s0)){let t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?t_(this,this.onVScroll.bind(this,sZ),100):this.onVScroll.bind(this,sZ),r=t?t_(this,this.onVScroll.bind(this,sJ),100):this.onVScroll.bind(this,sJ);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,r)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null!=this.centerRowsCtrl&&(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...s0,sZ])this.lastScrollSource[1]!==t&&e5(this.getViewportForSource(t),e,this.enableRtl)}getViewportForSource(e){return e===sZ?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let{scrollLeft:t}=this.centerRowsCtrl.eViewport;if(this.shouldBlockScrollUpdate(1,t,!0))return;let i=e2(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){let t;if(!this.isControllingScroll(e,0)||(t=e===sZ?this.eBodyViewport.scrollTop:this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)))return;let{animationFrameSvc:i}=this;i?.setScrollTop(t),this.nextScrollTop=t,e===sZ?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,i?.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){let t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();(this.scrollLeft!==e||e!==t)&&(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){let t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},150)}shouldBlockScrollUpdate(e,t,i=!1){return(!i||!!nb())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){let t=eY(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return!!(e<0||e+t>i)}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){let e=this.scrollLeft,t=!1;for(let i of s0)if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}t&&this.onHScroll(sZ)}scrollGridIfNeeded(e=!1){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:i:Math.min(Math.max(e,0),i)),e5(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){let{lastOffsetHeight:e,lastScrollTop:t}=this;return{top:t,bottom:t+e}}this.isVerticalPositionInvalidated=!1;let{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){let t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let{rowModel:i}=this.beans,r=i.getRowCount(),n=-1;for(let t=0;t<r;t++){let r=i.getRow(t);if("function"==typeof e){if(r&&e(r)){n=t;break}}else if(e===r||e===r.data){n=t;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t,i=0){if(is(this.gos,"print"))return;let{rowModel:r}=this.beans,n=r.getRowCount();if("number"!=typeof e||e<0||e>=n)return void t7(88,{index:e});this.clearRetryListeners();let{frameworkOverrides:o,pageBounds:s,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{let n,o,u=this.ctrlsSvc.getGridBodyCtrl(),d=r.getRow(e),c=0;this.invalidateVerticalScroll();do{let{stickyTopHeight:e,stickyBottomHeight:i}=u,r=d.rowTop,h=d.rowHeight,p=s.getPixelOffset(),f=d.rowTop-p,g=f+d.rowHeight,m=this.getVScrollPosition(),v=a.divStretchOffset,y=m.top+v,b=m.bottom+v,w=b-y,C=a.getScrollPositionForPixel(f),x=a.getScrollPositionForPixel(g-w),S=Math.min((C+x)/2,f),k=y+e>f,R=b-i<g,E=null;"top"===t?E=C-e:"bottom"===t?E=x+i:"middle"===t?E=S:k?E=C-e:R&&(E=x-C>w?C-e:x+i),null!==E&&(this.setVerticalScrollPosition(E),l.redraw({afterScroll:!0})),n=r!==d.rowTop||h!==d.rowHeight,o=e!==u.stickyTopHeight||i!==u.stickyBottomHeight,c++}while((n||o)&&c<10)if(this.animationFrameSvc?.flushAllFrames(),i<10&&(d?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){let n=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{n!==this.getVScrollPosition().top&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),e>=r.getRowCount()||this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(let e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){let{colModel:i,frameworkOverrides:r}=this.beans,n=i.getCol(e);if(!n||n.isPinned()||!this.visibleCols.isColDisplayed(n))return;let o=this.getPositionedHorizontalScroll(n,t);r.wrapIncoming(()=>{null!==o&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:i,columnAfterEnd:r}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?i:r)||n,l=s?r:i;"auto"!==t&&(a="start"===t,l="end"===t);let u="middle"===t;if(a||l||u){let{colLeft:t,colMiddle:i,colRight:r}=this.getColumnBounds(e);return u?i-o/2:a?s?r:t:s?t-o:r-o}return null}isColumnOutsideViewport(e){let{start:t,end:i}=this.getViewportBounds(),{colLeft:r,colRight:n}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>n:i<n,columnAfterEnd:o?i<r:t>r}}getColumnBounds(e){let t=this.enableRtl,i=this.visibleCols.bodyWidth,r=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,s=t?i-n:n;return{colLeft:s,colMiddle:s+r/2*o,colRight:s+r*o}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},s2=class extends tE{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e,t=is(this.gos,"print"),{visibleCols:i,scrollVisibleSvc:r}=this.beans,n=i.bodyWidth,o=i.getColsLeftWidth(),s=i.getDisplayedColumnsRightWidth();t?e=n+o+s:(e=n,this.addSpacer&&0===(this.gos.get("enableRtl")?o:s)&&r.verticalScrollShowing&&(e+=r.getScrollbarWidth())),this.callback(e)}},s5=class extends tE{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,r=()=>{tu(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(r),i.registerBodyViewportResizeListener(r)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=eY(this.gridBodyCtrl.eBodyViewport);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;let e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function s3(e,t,i,r){let n=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return s4(e,t,i,r,n)}function s4(e,t,i,r,n){return!!n&&n(iB(e,{column:t,node:i,event:r}))}function s8(e,t,i){let r=t;for(;r;){let t=ih(e,r,i);if(t)return t;r=r.parentElement}return null}var s6="cellCtrl",s7="renderedRow";function s9(e,t,i,r,n){let o=r?r.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;let s=iB(e,{event:t,editing:n,column:r,node:i,data:i.data,colDef:r.getColDef()});return!!(o&&o(s))||!1}var ae=class extends tE{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){for(let e of["dblclick","contextmenu","mouseover","mouseout","click",tm("touchstart")?"touchstart":"mousedown"]){let t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}}processMouseEvent(e,t){if(!tb(this.beans,t)||sU(t))return;let{cellCtrl:i,rowCtrl:r}=this.getControlsForEventTarget(t.target);"contextmenu"===e?(i?.column&&i.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,r,i)):(i&&i.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}getControlsForEventTarget(e){let{gos:t}=this;return{cellCtrl:s8(t,e,s6),rowCtrl:s8(t,e,s7)}}processKeyboardEvent(e,t){let{cellCtrl:i,rowCtrl:r}=this.getControlsForEventTarget(t.target);!t.defaultPrevented&&(i?this.processCellKeyboardEvent(i,e,t):r?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,e,t))}processCellKeyboardEvent(e,t,i){let r=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!s9(this.gos,i,e.rowNode,e.column,r)&&"keydown"===t&&(!r&&this.beans.navigation?.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,r),nZ(i)&&e.processCharacter(i)),"keydown"===t&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){let{rowNode:r}=e,{focusSvc:n,navigation:o}=this.beans,s=n.getFocusedCell(),a=s?.column;if(!s9(this.gos,i,r,a,!1)){let r=i.key;if("keydown"===t)switch(r){case na:case"End":case no:case ns:o?.handlePageScrollingKey(i,!0);break;case ne:case ni:if(!this.gos.get("embedFullWidthRows"))break;case nt:case nr:e.onKeyboardNavigate(i);break;case"Tab":e.onTabKeyDown(i)}}"keydown"===t&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!tb(this.beans,e))return;let i=nf(e),{clipboardSvc:r,undoRedo:n}=this.beans;return i===nl?this.onCtrlAndA(e):i===nu?this.onCtrlAndC(r,e):i===nd?this.onCtrlAndD(r,e):i===nc?this.onCtrlAndV(r,e):"KeyX"===i?this.onCtrlAndX(r,e):i===nh?this.onCtrlAndY(n):i===np?this.onCtrlAndZ(n,e):void 0}onCtrlAndA(e){let t,{beans:{rowModel:i,rangeSvc:r,selectionSvc:n},gos:o}=this;r&&iP(o)&&("string"==typeof(t=o.get("rowSelection"))||t?.mode!=="multiRow"||!t.ctrlASelectsRows)&&i.isRowsToRender()?!function(e){let t,i,{pinnedRowModel:r,rowModel:n,rangeSvc:o,visibleCols:s}=e;if(!o||0===s.allCols.length)return;let a=r?.isEmpty("top")??!0;r?.isEmpty("bottom")??!0?(t=null,i=n.getRowCount()-1):(t="bottom",i=r?.getPinnedBottomRowCount()??-1),o.setCellRange({rowStartIndex:0,rowStartPinned:a?null:"top",rowEndIndex:i,rowEndPinned:t})}(this.beans):n&&n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:iF(o)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){let{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){this.gos.get("undoRedoCellEditing")&&e&&(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},at=class extends tE{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){let t=e.uiContainerHeight,i=null!=t?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},ai=e=>e.topRowCtrls,ar=e=>e.getStickyTopRowCtrls(),an=e=>e.getStickyBottomRowCtrls(),ao=e=>e.bottomRowCtrls,as=e=>e.allRowCtrls,aa=e=>e.getCtrls("top"),al=e=>e.getCtrls("center"),au=e=>e.getCtrls("bottom"),ad={center:{type:"center",name:"center-cols",getRowCtrls:as,getSpannedRowCtrls:al},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:as,getSpannedRowCtrls:al},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:as,getSpannedRowCtrls:al},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:as},topCenter:{type:"center",name:"floating-top",getRowCtrls:ai,getSpannedRowCtrls:aa},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:ai,getSpannedRowCtrls:aa},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:ai,getSpannedRowCtrls:aa},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:ai},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:ar},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:ar},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:ar},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:ar},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:an},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:an},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:an},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:an},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:ao,getSpannedRowCtrls:au},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:ao,getSpannedRowCtrls:au},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:ao,getSpannedRowCtrls:au},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:ao}};function ac(e){let t=ad[e];return`ag-${t.name}-viewport`}function ah(e){let t=ad[e];return t.container??`ag-${t.name}-container`}var ap=["center","left","right","fullWidth"],af=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],ag=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],am=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],av=["stickyTopCenter","stickyTopLeft","stickyTopRight"],ay=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],ab=[...av,"stickyTopFullWidth",...ay,"stickyBottomFullWidth"],aw=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...av,...ay],aC=class extends tE{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=ad[e]}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new s5(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,r){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=r,this.createManagedBean(new ae(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:n,rangeSvc:o}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(ag,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(am,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(ap,()=>this.createManagedBean(new at(this.eContainer,"center"===this.name?r:void 0))),o&&this.forContainers(aw,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(af,()=>this.createManagedBean(new s2(e=>this.comp.setContainerWidth(`${e}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){let{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{let t=this.options.getSpannedRowCtrls(e);t&&this.comp.setSpannedRowCtrls(t,!1)}})}listenOnDomOrder(){if(ab.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);let e=()=>{let e=this.gos.get("ensureDomOrder"),t=is(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:e}=this.beans;if(!e)return;let t=t=>{e.dragging&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return eZ(this.eViewport)}getCenterViewportScrollLeft(){return e2(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=tl(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return e8(this.eViewport)}getViewportScrollLeft(){return e2(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||te(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){e5(this.eViewport,e,this.enableRtl)}isContainerVisible(){return null==this.options.pinnedType||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});let i=is(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||i,n=t.filter(e=>{let t=e.isFullWidth();return this.options.fullWidth?!r&&t:r||!t});this.comp.setRowCtrls({rowCtrls:n,useFlushSync:e})}},ax=class extends tE{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,r,n,o,s){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=r,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=i.querySelector(`.${ac("center")}`),this.eFullWidthContainer=i.querySelector(`.${ah("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${ah("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${ah("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",e=>this.setCellTextSelection(e.currentValue)),this.createManagedBean(new sY(this.comp)),this.scrollFeature=this.createManagedBean(new s1(i)),this.beans.rowDragSvc?.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,i,n,o,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(r),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){let e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){let t="rowResizeStarted"===e.type;this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){let e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let i=t&&e.getScrollbarWidth()||0,r=16*!!nx(),n=`calc(100% + ${i+r}px)`;tu(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:e,colModel:t,gos:i}=this,r=i.get("treeData");if(!r){let i=t.isPivotMode();r=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(r?"treegrid":"grid")}addFocusListeners(e){for(let t of e)this.addManagedElementListeners(t,{focusin:e=>{let{target:i}=e,r=eQ(i,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:e=>{let{target:i,relatedTarget:r}=e,n=t.contains(r),o=eQ(r,"ag-root",t);eQ(i,"ag-root",t)||(!n||o)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}updateScrollingClasses(){let{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1;this.comp.setRowCount(-1===i?-1:e+i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=is(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(e?"ag-force-vertical-scroll":null,e),e||t&&tt(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:e,environment:t}=this.beans,i=t.sizesMeasured,r=()=>{let t=i&&ig(this.gos)&&!e.stretching;this.comp.setRowAnimationCssOnBodyViewport(t?"ag-row-animation":"ag-row-no-animation",t)};r(),this.addManagedEventListeners({heightScaleChanged:r}),this.addManagedPropertyListener("animateRows",r),this.addManagedEventListeners({stylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,r())}})}addBodyViewportListener(){let{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:r,eBottom:n,beans:{popupSvc:o,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),s?.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});let l=this.onStickyWheel.bind(this);for(let e of[t,i,r,n])this.addManagedElementListeners(e,{wheel:l});let u=this.onHorizontalWheel.bind(this);for(let e of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(e).eContainer,{wheel:u});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:i,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(i))&&tb(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){let{deltaX:t,deltaY:i,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();let{target:r}=e||t;(r===this.eBodyViewport||r===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){let{pinnedRowModel:e,beans:{environment:t}}=this,i=e?.getPinnedTopTotalHeight(),r=e?.getPinnedBottomTotalHeight(),n=t.getPinnedRowBorderWidth()-t.getRowBorderWidth(),o=i?n+i:0,s=r?n+r:0;this.comp.setTopHeight(o),this.comp.setBottomHeight(s),this.comp.setTopInvisible(o<=0),this.comp.setBottomInvisible(s<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(e){let e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}setStickyTopOffsetTop(){let e=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,r=e?.getPinnedBottomTotalHeight()??0,n=t.horizontalScrollShowing&&t.getScrollbarWidth()||0;i.setStickyBottomBottom(`${r+n}px`)}};function aS(e,t){let i,r,n=is(e.gos,"normal");null!=t.clientX||null!=t.clientY?(i=t.clientX,r=t.clientY):(i=t.x,r=t.y);let{pageFirstPixel:o}=e.pageBounds.getCurrentPagePixelRange();if(r+=o,n){let t=e.ctrlsSvc.getScrollFeature(),n=t.getVScrollPosition();i+=t.getHScrollPosition().left,r+=n.top}return{x:i,y:r}}var ak=class extends rI{constructor(e,t){super(),this.direction=t,this.eViewport=null,this.eContainer=null,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",ny()||nb())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=nx(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),tu(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){let t=this.eViewport;!function(e,t,i,r=100){let n=Date.now(),o=null,s=!1,a=()=>{null!=o&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);let l=()=>{let e=Date.now()-n>r;(t()||e)&&(i(),s=!0,a())};l(),s||(o=window.setInterval(l,10))}(this,()=>e6(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},aR={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},aE=class extends ak{constructor(){super(aR,"horizontal"),this.eLeftSpacer=null,this.eRightSpacer=null,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new s2(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleSvc.verticalScrollShowing,t=this.visibleCols.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&e,r=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=r),tr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let n=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(n+=r),tr(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=r)}setScrollVisible(){let e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),r=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,n=0===r&&t?16:r,o=i?0:n,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),tn(this.getGui(),o),tn(this.eViewport,o),tn(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return e2(this.eViewport,this.enableRtl)}setScrollPosition(e){e6(this.eViewport)||this.attemptSettingScrollPosition(e),e5(this.eViewport,e,this.enableRtl)}},aP={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},aM=class extends ak{constructor(){super(aP,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new at(this.eContainer));let{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){let{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,r=t&&e.getScrollbarWidth()||0,n=0===r&&i?16:r;this.toggleCss("ag-scrollbar-invisible",i),tr(this.getGui(),n),tr(this.eViewport,n),tr(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){let t=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),r=t.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){t||e6(this.eViewport)||this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}};function aD(e,t,i,r){return ey(e)?[]:function(e,t,i,r,n){let o;if(ey(e))return[];if("function"==typeof e)o=e(iB(i,{colDef:t,column:r,columnGroup:n}));else o=e;return"string"==typeof o?[o]:Array.isArray(o)?[...o]:[]}(e.headerClass,e,t,i,r)}function aT(e,t,i){e.toggleCss("ag-column-first",i.isColAtEdge(t,"first")),e.toggleCss("ag-column-last",i.isColAtEdge(t,"last"))}function aO(e,t){let i=e.column===t.column,r=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&r&&n}function a_(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function aA(e,t){let i=e.spannedRowRenderer?.getCellByPosition(t);if(i)return i;let r=e.rowRenderer.getRowByPosition(t);return r?r.getCellCtrl(t.column):null}function aF(e,t,i=!1){let{rowIndex:r,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;return 0===r?"top"===n?null:"bottom"===n&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:s?.isRowsToRender("top")?{rowIndex:s.getPinnedTopRowCount()-1,rowPinned:"top"}:null:i?aL(e,n?void 0:a.getRow(r),!0)??{rowIndex:r-1,rowPinned:n}:{rowIndex:r-1,rowPinned:n}}function aI(e,t,i=!1){let{rowIndex:r,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:s,rowModel:a}=e;return function(e,t){let{rowPinned:i,rowIndex:r}=t,{pinnedRowModel:n,pageBounds:o}=e;return"top"===i?(n?.getPinnedTopRowCount()??0)-1<=r:"bottom"===i?(n?.getPinnedBottomRowCount()??0)-1<=r:o.getLastRow()<=r}(e,t)?"bottom"===n?null:"top"===n&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:s?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null:i?aL(e,n?void 0:a.getRow(r))??{rowIndex:r+1,rowPinned:n}:{rowIndex:r+1,rowPinned:n}}function aL(e,t,i=!1){let r,{gos:n,rowRenderer:o}=e;if(!t?.sticky||!im(n))return;let s=o.getStickyTopRowCtrls(),a=o.getStickyBottomRowCtrls(),l=!a.some(e=>e.rowNode.rowIndex===t.rowIndex),u=l?s:a,d=(i?-1:1)*(l?-1:1);for(let e=0;e<u.length;e++)if(u[e].rowNode.rowIndex===t.rowIndex){r=u[e+d];break}return r?{rowIndex:r.rowNode.rowIndex,rowPinned:null}:void 0}function aN(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.exclusive}function aB(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.exclusive}function aV(e,t,i=!1){let r=e.ctrlsSvc.get("gridCtrl");return!!(!i&&r.focusNextInnerContainer(t))||(!i&&(t||r.isDetailGrid())||r.forceFocusOutOfContainer(t),!1)}function aH(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function az(e){let t=[];for(let i of e.ctrlsSvc.getHeaderRowContainerCtrls()){if(!i)continue;let r=i.getGroupRowCount()||0;for(let n=0;n<r;n++){let r=i.getGroupRowCtrlAtIndex(n),o=t[n];if(r){let i=function(e,t){var i;let r=e.colModel.isPivotMode()?(i=e).gos.get("pivotGroupHeaderHeight")??aU(i):aU(e);for(let e of t.getHeaderCellCtrls()){let{column:t}=e,i=t.getAutoHeaderHeight();null!=i&&i>r&&t.isAutoHeaderHeight()&&(r=i)}return r}(e,r);(null==o||i>o)&&(t[n]=i)}}}return t}function aj(e){var t;let i=e.colModel.isPivotMode()?(t=e).gos.get("pivotHeaderHeight")??aG(t):aG(e);return e.colModel.forAllCols(e=>{let t=e.getAutoHeaderHeight();null!=t&&t>i&&e.isAutoHeaderHeight()&&(i=t)}),i}function aG(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function aW(e){return e.gos.get("floatingFiltersHeight")??aG(e)}function aU(e){return e.gos.get("groupHeaderHeight")??aG(e)}var a$=class extends tE{setComp(e,t,i){this.comp=e,this.eGui=t;let{beans:r}=this,{headerNavigation:n,touchSvc:o,ctrlsSvc:s}=r;n&&this.createManagedBean(new sq(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,r),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,r)}),this.onPivotModeChanged(r),this.setupHeaderHeight();let a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>tu(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){let{beans:e}=this,t=0,i=az(e).reduce((e,t)=>e+t,0),r=aj(e);if(e.filterManager?.hasFloatingFilters()&&(t+=aW(e)),t+=i,t+=r,this.headerHeight===t)return;this.headerHeight=t;let n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){let t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){let t=e.visibleCols.allCols.some(e=>e.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),i=e.shiftKey,{beans:r}=this,{headerNavigation:n,focusSvc:o}=r;(n.navigateHorizontally(i!==t?"LEFT":"RIGHT",!0,e)||!i&&o.focusOverlay(!1)||aV(r,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null,{headerNavigation:i}=this.beans;switch(e.key){case ne:t="LEFT";case ni:ev(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case nt:t="UP";case nr:ev(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break;default:return}}onFocusOut(e){let{relatedTarget:t}=e,{eGui:i,beans:r}=this;!(!t&&i.contains(eP(r)))&&(i.contains(t)||(r.focusSvc.focusedHeader=null))}onHeaderContextMenu(e,t,i){let{menuSvc:r,ctrlsSvc:n}=this.beans;if(!e&&!i||!r?.isHeaderContextMenuEnabled())return;let{target:o}=e??t;(o===this.eGui||o===n.getHeaderRowContainerCtrl()?.eViewport)&&r.showHeaderContextMenu(void 0,e,i)}},aq=class extends tE{constructor(e,t,i,r){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=r,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){let{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?i3(t):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),r=ev(this.columnOrGroup.getOldLeft());t?.isActive()&&r&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){let{gos:i,visibleCols:r}=this.beans;if(!is(i,"print")||"left"===e.getPinned())return t;let n=r.getColsLeftWidth();return"right"===e.getPinned()?n+r.bodyWidth+t:n+t}setLeft(e){if(ev(e)&&(this.eCell.style.left=`${e}px`),sc(this.columnOrGroup)){let e=this.columnOrGroup.getLeafColumns();e.length&&e.length>1&&eA(this.ariaEl,"colspan",e.length)}}},aK=0,aQ="headerCtrl",aX=class extends tE{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+aK++}postConstruct(){let e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,r,n){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,r,n),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){let{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,r=i.getDefinition(),n=r?.suppressHeaderKeyboardEvent;return!!ev(n)&&!!n(iB(this.gos,{colDef:r,column:i,headerRowIndex:t,event:e}))}getWrapperHasFocus(){return eP(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let e,t=this.column.getDefinition();if(!t)return;let{headerStyle:i}=t;(e="function"==typeof i?i(this.getHeaderClassParams()):i)&&this.comp.setUserStyles(e)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){let t,{wrapperElement:i,checkMeasuringCallback:r,compBean:n}=e,{beans:o}=this,s=e=>{if(!this.isAlive()||!n.isAlive())return;let{paddingTop:t,paddingBottom:r,borderBottomWidth:a,borderTopWidth:l}=eX(this.eGui),u=i.offsetHeight+(t+r+a+l);if(e<5){let t=eM(o),r=!t?.contains(i),n=0==u;if(r||n)return void tO(()=>s(e+1),"raf",o)}this.setColHeaderHeight(this.column,u)},a=!1,l=()=>{let e=this.column.isAutoHeaderHeight();e&&!a&&u(),!e&&a&&d()},u=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),s(0),t=tl(this.beans,i,()=>s(0))},d=()=>{a=!1,t&&t(),this.comp.toggleCss("ag-header-cell-auto-height",!1),t=void 0};l(),n.addDestroyFunc(()=>d()),n.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),n.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>s(0))}}),r&&r(l)}onDisplayedColumnsChanged(){let{comp:e,column:t,beans:i,eGui:r}=this;e&&t&&r&&(aT(e,t,i.visibleCols),ej(r,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let e=aN(this.beans);this.eGui&&ta(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){let t=eP(this.beans),i=e.key===ne||e.key===ni;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),(e.ctrlKey||e.metaKey)&&nf(e)===nu)return this.beans.clipboardSvc?.copyToClipboard();if(!i)return;let r=e.key===ne!==this.gos.get("enableRtl");if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r?"left":"right")}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){let{gos:t,column:i}=this,r=e.key===ne!==t.get("enableRtl"),n=i.getPinned(),o=t.get("enableRtl");return n&&o!==("right"===n)&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){let t=this.getWrapperHasFocus();switch(e.key){case ns:case no:case na:case"End":t&&e.preventDefault()}}addDomData(e){let{eGui:t,gos:i}=this;ip(i,t,aQ,this),e.addDestroyFunc(()=>ip(i,t,aQ,null))}focus(e){if(!this.isAlive())return!1;let{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){let r=e??t,{menuSvc:n,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&r.preventDefault(),n?.isHeaderContextMenuEnabled(i)&&n.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;let{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},aY=class extends aX{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,r,n){this.comp=e;let{rowCtrl:o,column:s,beans:a}=this,{colResize:l,context:u,colHover:d,rangeSvc:c}=a,h=rT(this,u,n);this.setGui(t,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:r,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(o.pinned,s,i,e,this)):eq(i,!1),d?.createHoverFeature(h,[s],t),c?.createRangeHighlightFeature(h,s,e),h.createManagedBean(new aq(s,t,a)),h.createManagedBean(new sq(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(s,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let p=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:p,columnRowGroupChanged:p,columnPivotChanged:p,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){let{column:e,beans:t}=this,i=e.colDef;return iB(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){let e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){var e;let t=this.createParams(),i=this.column.getColDef();return e=this.beans.userCompFactory,e.getCompDetails(i,rj,"agColumnHeader",t)}createParams(){let{menuSvc:e,sortSvc:t,colFilter:i,gos:r}=this.beans;return iB(r,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||iN(this.gos)),showColumnMenu:(t,i)=>{e?.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button",onClosedCallback:i})},showColumnMenuAfterMouseClick:(t,i)=>{e?.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse",onClosedCallback:i})},showFilter:t=>{e?.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{t?.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{t?.setSortForColumn(this.column,i$(e),!!i,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(e,t)=>{r.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)}})}setupSelectAll(e){let{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{let i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e)," "===e.key?this.selectAllFeature?.onSpaceKeyDown(e):e.key===r7?this.onEnterKeyDown(e):e.key===nr&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){let{column:t,gos:i,sortable:r,beans:n}=this,o=!1;(e.ctrlKey||e.metaKey)&&(o=this.showMenuOnKeyPress(e,!0)),!o&&(!e.altKey&&iM(i)?n.rangeSvc?.handleColumnSelection(t,e):r&&n.sortSvc?.progressSort(t,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){let i=this.comp.getUserCompInstance();return!!aZ(i)&&!!i.onMenuKeyboardShortcut(t)&&(e.preventDefault(),!0)}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),nS&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let e=()=>{let e=aD(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;for(let i of(this.userHeaderClasses=new Set(e),e))t.has(i)?t.delete(i):this.comp.toggleCss(i,!0);for(let e of t)this.comp.toggleCss(e,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),e&&this.draggable&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){let{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){for(let e of(this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions)))e()}refreshHeaderComp(){let e=this.lookupUserCompDetails();e&&(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e))}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!!t&&!!t.refresh&&t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let e=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted();this.comp.toggleCss("ag-header-highlight-before",0===e),this.comp.toggleCss("ag-header-highlight-after",1===e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:i,beans:r}=this,n=az(this.beans),o=0===n.reduce((e,t)=>e+t,0);if(i.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.toggleCss("ag-header-span-height",!1),i.toggleCss("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.toggleCss("ag-header-span-height",s>0);let l=aj(r);if(0===s){i.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.toggleCss("ag-header-span-total",a);let u=(this.column.getFirstRealParent()?.getLevel()??-1)+1,d=n.length-u,c=0;for(let e=0;e<d;e++)c+=n[n.length-1-e];e.style.setProperty("top",`${-c}px`),e.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){let e=null,{beans:t,column:i,comp:r,sortable:n}=this;if(n){var o;let n,s=this.getLocaleTextFunc(),a=t.sortSvc?.getDisplaySortForColumn(i)??null;r.setAriaSort((o=a,"asc"===(n=o?.direction)?"ascending":"desc"===n?"descending":"mixed"===n?"other":"none")),e=s("ariaSortableColumn","Press ENTER to sort")}else r.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;this.menuEnabled&&(e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null,{openFilterEnabled:t,gos:i}=this;t&&!iN(i)&&(e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;this.column.isFilterActive()&&(e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null,{gos:t,column:i,beans:r}=this;if(iM(t)){let t=this.getLocaleTextFunc(),n=r.rangeSvc?.isColumnInAnyRange(i);e=t("ariaColumnCellSelection",`Press CTRL+SPACE to ${n?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){let i=this.ariaDescriptionProperties;null!=t?i.set(e,t):i.delete(e)}announceAriaDescription(){let{beans:e,eGui:t,ariaDescriptionProperties:i}=this;if(!t.contains(eP(e)))return;let r=Array.from(i.keys()).sort((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0)).map(e=>i.get(e)).join(". ");e.ariaAnnounce?.announceValue(r,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){let t=e=>this.handleMouseOverChange("mouseenter"===e.type),i=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},r=e=>this.handleContextMenuMouseEvent(e,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:r})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return aZ(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function aZ(e){return"function"==typeof e?.getAnchorElementForMenu&&"function"==typeof e.onMenuKeyboardShortcut}var aJ=0,a0=class extends tE{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=aJ++,this.comp=null,this.allCtrls=[];let r="ag-header-row-column";"group"===i?r="ag-header-row-group":"filter"===i&&(r="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${r}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=is(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.allCtrls.every(e=>null!=e.eGui)}setComp(e,t,i=!0){this.comp=e,t=rT(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=is(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleCols:e}=this.beans;return this.isPrintLayout?null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0,t=az(this.beans);for(let i=0;i<t.length;i++){if(i===this.rowIndex&&"group"===this.type)return{topOffset:e,rowHeight:t[i]};e+=t[i]}let i=aj(this.beans);return"column"===this.type?{topOffset:e,rowHeight:i}:{topOffset:e+=i,rowHeight:aW(this.beans)}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;let t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){let e=this.ctrlsById;for(let t of(this.ctrlsById=new Map,this.getColumnsInViewport()))this.recycleAndCreateHeaderCtrls(t,this.ctrlsById,e);let t=e=>{let{focusSvc:t,visibleCols:i}=this.beans;return!!t.isHeaderWrapperFocused(e)&&i.isVisible(e.column)};if(e)for(let[i,r]of e)t(r)?this.ctrlsById.set(i,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){let r;if(e.isEmptyGroup())return;let n=e.getUniqueId();if(i&&(r=i.get(n),i.delete(n)),r&&r.column!=e&&(this.destroyBean(r),r=void 0),null==r)switch(this.type){case"filter":r=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break;case"group":r=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:r=this.createBean(new aY(e,this))}t.set(n,r)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];let e=[];for(let t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return"group"===this.type?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){let i=this.allCtrls.find(t=>t.column==e);return!!i&&i.focus(t)}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},a1=class extends tE{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;let{pinnedCols:i,ctrlsSvc:r,colModel:n,colMoves:o}=this.beans;this.setupCenterWidth(),i?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);let s=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:s,advancedFilterEnabledChanged:s});let a=`${"string"==typeof this.pinned?this.pinned:"center"}Header`;r.register(a,this),n.ready&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let{focusSvc:t,filterManager:i,visibleCols:r}=this.beans,n=0,o=t.getFocusHeaderToUseAfterRefresh(),s=()=>{let t=r.headerGroupRowCount;n=t,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));let i=this.groupsRowCtrls.length;if(i!==t){if(i>t){for(let e=t;e<i;e++)this.destroyBean(this.groupsRowCtrls[e]);this.groupsRowCtrls.length=t;return}for(let e=i;e<t;e++){let t=this.createBean(new a0(e,this.pinned,"group"));this.groupsRowCtrls.push(t)}}},a=()=>{let t=n++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}null!=this.columnsRowCtrl&&e?this.columnsRowCtrl.rowIndex!==t&&this.columnsRowCtrl.setRowIndex(t):(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new a0(t,this.pinned,"column")))},l=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;let t=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void t();e||t();let r=n++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==r&&this.filtersRowCtrl.setRowIndex(r):this.filtersRowCtrl=this.createBean(new a0(r,this.pinned,"filter"))},u=this.getAllCtrls();s(),a(),l();let d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,o),u.length!==d.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){let t=t=>t?.getHeaderCellCtrls().find(t=>t.column===e);if(ij(e))return t(this.columnsRowCtrl);if(0!==this.groupsRowCtrls.length)for(let e=0;e<this.groupsRowCtrls.length;e++){let i=t(this.groupsRowCtrls[e]);if(i)return i}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,i){let r=this.getAllCtrls()[e];return!!r&&r.focusHeader(t,i)}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+ +!!this.columnsRowCtrl+ +!!this.filtersRowCtrl}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){let i=e?.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;let{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new s2(e=>this.comp.setCenterWidth(`${e}px`),!0))}},a2=class extends tE{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){let{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(a3(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){a3(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){let{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(iN(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){let t=e&&ij(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.gos.get("columnMenu")}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(nb()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!iN(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!iN(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos,t=e.get("suppressMenuHide");return iN(e)?!!e.exists("suppressMenuHide")&&t:t}showColumnMenuCommon(e,t,i,r){let{positionBy:n,onClosedCallback:o}=t,s=t.column;if("button"===n){let{buttonElement:n}=t;e?.showMenuAfterButtonClick(s,n,i,o,r)}else if("mouse"===n){let{mouseEvent:n}=t;e?.showMenuAfterMouseEvent(s,n,i,o,r)}else if(s){let t=this.beans,n=t.ctrlsSvc;n.getScrollFeature().ensureColumnVisible(s,"auto"),tu(t,()=>{let t=n.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);t&&e?.showMenuAfterButtonClick(s,t.getAnchorElementForMenu(r),i,o,r)})}}};function a5(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function a3(e){let{enterpriseMenuFactory:t,filterMenuFactory:i,gos:r}=e;return t&&iN(r)?t:i}var a4=class extends ng{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},a8=class extends rI{constructor(){super()}};function a6(e,t,i){let r=null;"smallDown"===e?t7(262):"smallLeft"===e?t7(263):"smallRight"===e&&t7(264);let n=i?.getColDef().icons;if(n&&(r=n[e]),t.gos&&!r){let i=t.gos.get("icons");i&&(r=i[e])}if(r){let t;if("function"==typeof r)t=r();else{if("string"!=typeof r)return void t7(38,{iconName:e});t=r}return"string"==typeof t?e7(t):ts(t)?t:void t7(133,{iconName:e})}{let i=t.registry.getIcon(e);return i||t.validation?.validateIcon(e),th({tag:"span",cls:`ag-icon ag-icon-${i??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var a7={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},a9=class extends a8{constructor(){super(...arguments),this.eLoadingIcon=null,this.eLoadingText=null}init(e){let{beans:t,gos:i}=this,r=em(i.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(r??a7),!r){let i=a6("overlayLoading",t,null);i&&this.eLoadingIcon.appendChild(i);let r=e.loading?.overlayText??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=r,t.ariaAnnounce.announceValue(r,"overlay")}}},le={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},lt=class extends a8{constructor(){super(...arguments),this.eExportingIcon=null,this.eExportingText=null}init(e){let{beans:t}=this;this.setTemplate(le);let i=a6("overlayExporting",t,null);i&&this.eExportingIcon.appendChild(i);let r=e.exporting?.overlayText??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=r,t.ariaAnnounce.announceValue(r,"overlay")}},li={tag:"span",cls:"ag-overlay-no-rows-center"},lr=class extends a8{init(e){let{beans:t,gos:i}=this,r=em(i.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(r??li),!r){let i=e.noRows?.overlayText??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=i,t.ariaAnnounce.announceValue(i,"overlay")}}},ln={tag:"span",cls:"ag-overlay-no-matching-rows-center"},lo=class extends a8{init(e){let{beans:t}=this;this.setTemplate(ln);let i=e.noMatchingRows?.overlayText??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=i,t.ariaAnnounce.announceValue(i,"overlay")}},ls={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},la=class extends rI{constructor(){super(),this.dragSource=null,this.eIcon=null,this.eLabel=null,this.eGhost=null,this.registerCSS(".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}")}postConstruct(){let e=e=>(function(e,t,i){let r=a6(e,t,null);if(r){let{className:e}=r;if("string"==typeof e&&e.includes("ag-icon")||"object"==typeof e&&e["ag-icon"])return r}let n=th({tag:"span"});return n.appendChild(r),n})(e,this.beans,0);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(ls),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){let{eGhost:i,eIcon:r,dragSource:n,dropIconMap:o,gos:s}=this;e3(r);let a=null;e||(e=n?.getDefaultIconName?n.getDefaultIconName():"notAllowed"),a=o[e],i.classList.toggle("ag-dnd-ghost-not-allowed","notAllowed"===e),r.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&s.get("suppressDragLeaveHidesColumns"))&&a&&r.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},ll={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},lu=class extends rI{constructor(){super(ll,[n5]),this.eCheckbox=null,this.registerCSS(".ag-checkbox-cell{height:100%}")}init(e){this.refresh(e);let{eCheckbox:t,beans:i}=this,r=t.getInputElement();r.setAttribute("tabindex","-1"),e_(r,"live","polite"),this.addManagedListeners(r,{click:e=>{if(sW(e),t.isDisabled())return;let i=t.getValue();this.onCheckboxChanged(i)},dblclick:e=>{sW(e)}}),this.addManagedElementListeners(e.eGridCell,{keydown:r=>{if(" "===r.key&&!t.isDisabled()){e.eGridCell===eP(i)&&t.toggle();let n=t.getValue();this.onCheckboxChanged(n),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0,{value:r,column:n,node:o}=e;if(o.group&&n)if("boolean"==typeof r)t=r;else{let e=n.getColId();e.startsWith(i9)?t=null==r||""===r?void 0:"true"===r:o.aggData&&void 0!==o.aggData[e]||o.sourceRowIndex>=0?t=r??void 0:i=!1}else t=r??void 0;let{eCheckbox:s}=this;if(!i)return void s.setDisplayed(!1);s.setValue(t);let a=e.disabled??!n?.isCellEditable(o);s.setDisabled(a);let l=this.getLocaleTextFunc(),u=eW(l,t),d=a?u:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;s.setInputAriaLabel(d)}onCheckboxChanged(e){let{params:t}=this,{column:i,node:r,value:n}=t,{editSvc:o}=this.beans;if(!i)return;let s={rowNode:r,column:i};o?.dispatchCellEvent(s,null,"cellEditingStarted",{value:n});let a=r.setDataValue(i,e,"ui");o?.dispatchCellEvent(s,null,"cellEditingStopped",{oldValue:n,newValue:e,valueChanged:a}),a||this.updateCheckbox(t)}},ld=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){let{all:t,visible:i,order:r}=this;t.has(e)||(t.add(e),i.add(e),r.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),i6(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(let t of this.visible)if(t.id==e)return t}clear(){let{all:e,visible:t,order:i,queued:r}=this;e.clear(),r.clear(),t.clear(),i.length=0}sort(){let{sortSvc:e,rowNodeSorter:t,gos:i}=this.beans,r=e?.getSortOptions()??[],n=function(e){let t=e.findIndex(lh);if(t>-1)return e.splice(t,1)?.[0]}(this.order);if(this.order.sort((e,t)=>(e.pinnedSibling?.rowIndex??0)-(t.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,r)??this.order,!n)return;let o=ib(i);"bottom"===o||"pinnedBottom"===o?this.order.push(n):this.order.unshift(n)}hide(e){let{all:t,visible:i}=this,r=i.size;return t.forEach(t=>e(t)?i.delete(t):i.add(t)),this.order=Array.from(i),this.sort(),r!=i.size}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function lc(e,t){let{gos:i,rowModel:r,filterManager:n}=e;return io(i,r)?!r.getRowNode(t.id):n?.isAnyFilterPresent()?!function e(t){if(-1===t.level)return!0;let i=t.parent;return!!i?.childrenAfterSort?.some(e=>e==t)&&e(i)}(t):!!i.get("pivotMode")&&!t.group}function lh(e){var t;return!!e.pinnedSibling&&!!(t=e.pinnedSibling).footer&&-1===t.level}var lp=class extends tE{postConstruct(){let{gos:e,beans:t}=this;this.top=new ld(t,"top"),this.bottom=new ld(t,"bottom");let i=e=>lc(t,e.pinnedSibling),r=()=>{let i=e.get("isRowPinned");i&&e.get("enableRowPinning")&&t.rowModel.forEachNode(e=>this.pinRow(e,i(e)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:e})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow();let t=!1;this.forContainers(e=>{t||(t=e.hide(i))});let r=this.refreshRowPositions();(!e||r||t)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(lm),this.refreshRowPositions()},rowNodeDataChanged:({node:t})=>{let i=e.get("isRowPinnable");(i?.(t)??!0)||this.pinRow(t,null)},firstDataRendered:r}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(e=>e.hide(i)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:e})=>{this._grandTotalPinned="pinnedBottom"===e?"bottom":"pinnedTop"===e?"top":null}),this.addManagedPropertyListener("isRowPinned",r)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(e=>{let t=[];e.forEach(e=>t.push(e)),t.forEach(e=>this.pinRow(e,null)),e.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){if(e.footer&&e.level>-1)return;if(e.footer&&-1===e.level){this._grandTotalPinned=t,function({gos:e,rowModel:t}){ir(e,t)&&t.refreshModel({step:"map"})}(this.beans);return}let r=e.rowPinned??e.pinnedSibling?.rowPinned;if(null!=r&&null!=t&&t!=r){let r=e.rowPinned?e:e.pinnedSibling,n=e.rowPinned?e.pinnedSibling:e;this.pinRow(r,null,i),this.pinRow(n,t,i);return}let n=i&&function(e,t,i){let{rowSpanSvc:r}=e,n=(i&&r?.isCellSpanning(i,t))??!1;if(i&&n)return r?.getCellSpan(i,t)?.spannedNodes}(this.beans,e,i);if(n)return void n.forEach(e=>this.pinRow(e,t));if(null==t){let i=e.rowPinned?e:e.pinnedSibling,r=this.findPinnedRowNode(i);if(!r)return;r.delete(i);let n=i.pinnedSibling;lg(i),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(n)}else{let i=lf(this.beans,e,t),r=this.getContainer(t);r.add(i),lc(this.beans,e)&&r.hide(e=>lc(this.beans,e.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return 0===this.getContainer(e).size()}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0,i=i=>{if(i.rowHeightEstimated){let r=iu(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return lv(this.top)}getPinnedBottomTotalHeight(){return lv(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){let e=e=>{let t=[];return this.forEachPinnedRow(e,e=>t.push(e.pinnedSibling.id)),t};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,i)=>{for(let r of e[i]){let e=this.beans.rowModel.getRowNode(r);e?this.pinRow(e,i):t.queue(r)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{let i=new Set;for(let r of(e.forEachQueued(e=>{let t=this.beans.rowModel.getRowNode(e);t&&i.add(t)}),i))e.unqueue(r.id),this.pinRow(r,t)})}pinGrandTotalRow(){let{gos:e,beans:t,_grandTotalPinned:i}=this,r=t.rowModel;if(!ir(e,r))return;let n=r.rootNode?.sibling;if(!n)return;let o=n.pinnedSibling,s=o&&this.findPinnedRowNode(o);if(i){if(s&&s.floating!==i&&(s.delete(o),lg(o)),!s||s.floating!==i){let e=lf(t,n,i);this.getContainer(i).add(e)}}else{if(!s)return;s.delete(o),lg(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(e=>e.forEach(e=>e.setRowHeight(e.rowHeight,!0)))}getContainer(e){return"top"===e?this.top:this.bottom}findPinnedRowNode(e){return this.top.has(e)?this.top:this.bottom.has(e)?this.bottom:void 0}refreshRowPositions(e){let t=e=>{var t;let i,r;return t=this.beans,i=0,r=!1,e.forEach((e,n)=>{if(r||(r=e.rowTop!==i),e.setRowTop(i),e.rowHeightEstimated||null==e.rowHeight){let i=iu(t,e).height;r||(r=e.rowHeight!==i),e.setRowHeight(i)}e.setRowIndex(n),i+=e.rowHeight}),r};if(e)return t(this.getContainer(e));let i=!1;return this.forContainers(e=>{let r=t(e);i||(i=r)}),i}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function lf(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;let r=((e,t)=>{let i=new sg(t);for(let t of Object.keys(e))sm.has(t)||(i[t]=e[t]);return i.oldRowTop=null,i})(t,e);r.setRowTop(null),r.setRowIndex(null),r.rowPinned=i;let n="top"===i?"t-":"b-";return r.id=`${n}${i}-${t.id}`,r.pinnedSibling=t,t.pinnedSibling=r,r}function lg(e){if(!e.pinnedSibling)return;e.rowPinned=null,e._destroy(!1);let t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function lm(e){let t=new Set;e.forEach(e=>{e.group&&t.add(e)}),t.forEach(t=>e.delete(t))}function lv(e){let t=e.size();if(0===t)return 0;let i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}var ly=class extends tE{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return 0===this.getCache(e).order.length}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){let e=e=>{e.setRowHeight(e.rowHeight,!0)};lx(this.pinnedBottomRows,e),lx(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let e=!1,t=0,i=i=>{if(i.rowHeightEstimated){let r=iu(this.beans,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return lx(this.pinnedBottomRows,i),t=0,lx(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let i=this.getCache(t);if(void 0===e){i.order.length=0,i.cache={};return}let r=ix(this.gos),n="top"===t?"t-":"b-",o=new Set(i.order),s=[],a=new Set,l=0,u=-1;for(let d of e){let e=r?.({data:d,level:0,rowPinned:t})??n+this.nextId++;if(a.has(e)){t7(96,{id:e,data:d});continue}u++,a.add(e),s.push(e);let c=lw(i,e);if(void 0!==c)c.data!==d&&c.updateData(d),l+=this.setRowTopAndRowIndex(c,l,u),o.delete(e);else{let r=new sg(this.beans);r.id=e,r.data=d,r.rowPinned=t,l+=this.setRowTopAndRowIndex(r,l,u),i.cache[e]=r,i.order.push(e)}}for(let e of o)lw(i,e)?.clearRowTopAndRowIndex(),delete i.cache[e];i.order=s}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(iu(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return lb(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return lb(this.pinnedBottomRows)}getPinnedTopRowCount(){return lS(this.pinnedTopRows)}getPinnedBottomRowCount(){return lS(this.pinnedBottomRows)}getPinnedTopRow(e){return lC(this.pinnedTopRows,e)}getPinnedBottomRow(e){return lC(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return lw(this.getCache(t),e)}forEachPinnedRow(e,t){return lx(this.getCache(e),t)}getCache(e){return"top"===e?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function lb(e){let t=lS(e);if(0===t)return 0;let i=lC(e,t-1);return void 0===i?0:i.rowTop+i.rowHeight}function lw(e,t){return e.cache[t]}function lC(e,t){return lw(e,e.order[t])}function lx(e,t){e.order.forEach((i,r)=>{let n=lw(e,i);n&&t(n,r)})}function lS(e){return e.order.length}var lk=class extends tE{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){let{gos:e}=this,t=()=>{let t=e.get("enableRowPinning"),i=ib(e),r=!!t||"pinnedBottom"===i||"pinnedTop"===i,n=r?this.inner instanceof ly:this.inner instanceof lp;this.inner&&n&&this.destroyBean(this.inner),(n||!this.inner)&&(this.inner=this.createManagedBean(r?new lp:new ly))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},lR=e=>{let t=e.childrenAfterGroup;for(;t?.length;){let e=t[0];if(e.sourceRowIndex>=0)return e;t=e.childrenAfterGroup}},lE=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}},lP=((u=lP||{}).Applied="Applied",u.StoreNotFound="StoreNotFound",u.StoreLoading="StoreLoading",u.StoreWaitingToLoad="StoreWaitingToLoad",u.StoreLoadingFailed="StoreLoadingFailed",u.StoreWrongType="StoreWrongType",u.Cancelled="Cancelled",u.StoreNotStarted="StoreNotStarted",u);function lM(e){return!!(e.rowPinned&&e.pinnedSibling)}function lD(e,t,i,r){let n="top"===t;if(!i)return lD(e,t,n?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),r);if(!r){let r=n?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return lD(e,t,i,n?e.getPinnedTopRow(r-1):e.getPinnedBottomRow(r-1))}let o=!1,s=!1,a=[];return e.forEachPinnedRow(t,e=>{if(e===i&&!o){o=!0,a.push(e);return}if(o&&e===r){s=!0,a.push(e);return}o&&!s&&a.push(e)}),a}var lT={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},lO=class extends rI{constructor(){super(lT,[n5]),this.eCheckbox=null}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,r=t.isSelected(),n=eW(e,r),[o,s]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,s);i.setValue(r,!0),i.setInputAriaLabel(`${a} (${n})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getWrapperElement(),{dblclick:sW,click:e=>{sW(e),this.eCheckbox.isDisabled()||this.beans.selectionSvc?.handleSelectionEvent(e,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:e,previousValue:t})=>{("object"==typeof e?iE(e):void 0)!==("object"==typeof t?iE(t):void 0)&&this.onSelectableChanged()}),iT(this.gos)||"function"==typeof this.getIsVisible()){let e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){let e,{column:t,rowNode:i,overrides:r,gos:n}=this,o=i.selectable,s=this.getIsVisible();if("function"==typeof s){let n=r?.callbackParams;if(t){let r=t.createColumnFunctionCallbackParams(i);e=s({...n,...r})}else e=s({...n,node:i,data:i.data})}else e=s??!1;let a=o&&!e||!o&&e,l=o||e,u=n.get("rowSelection"),d=u&&"string"!=typeof u?!iE(u):!!t?.getColDef().showDisabledCheckboxes;this.setVisible(l&&(!a||d)),this.setDisplayed(l&&(!a||d)),l&&this.eCheckbox.setDisabled(a),r?.removeHidden&&this.setDisplayed(l)}getIsVisible(){let e=this.overrides;if(e)return e.isVisible;let t=this.gos.get("rowSelection");return t&&"string"!=typeof t?iS(t):this.column?.getColDef()?.checkboxSelection}},l_=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){let e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return null!==this.rootId&&this.getRange().some(t=>t.id===e.id)}getRoot(e){return this.rootId?this.getRowNode(this.rootId):e?(this.setRoot(e),e):void 0}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t,{rowModel:i,pinnedRowModel:r}=this;return t??(t=i.getRowNode(e)),r?.isManual()&&(t??(t=r.getPinnedRowById(e,"top")),t??(t=r.getPinnedRowById(e,"bottom"))),t}truncate(e){let t=this.getRange();if(0===t.length)return{keep:[],discard:[]};let i=t[0].id===this.rootId,r=t.findIndex(t=>t.id===e.id);if(!(r>-1))return{keep:t,discard:[]};{let n=t.slice(0,r),o=t.slice(r+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}}extend(e,t=!1){let i=this.getRoot();if(null==i){let i=this.getRange().slice();return t&&e.depthFirstSearch(e=>!e.group&&i.push(e)),i.push(e),this.setRoot(e),{keep:i,discard:[]}}let r=this.getNodesInRange(i,e);if(!r)return this.setRoot(e),{keep:[e],discard:[]};if(r.find(e=>e.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}getNodesInRange(e,t){let{pinnedRowModel:i,rowModel:r}=this;if(!i?.isManual())return r.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&!t.rowPinned)return lD(i,"top",e,void 0).concat(r.getNodesInRangeForSelection(r.getRow(0),t)??[]);if("bottom"===e.rowPinned&&!t.rowPinned){let n=lD(i,"bottom",void 0,e),o=r.getRowCount(),s=r.getRow(o-1);return(r.getNodesInRangeForSelection(t,s)??[]).concat(n)}if(!e.rowPinned&&!t.rowPinned)return r.getNodesInRangeForSelection(e,t);if("top"===e.rowPinned&&"top"===t.rowPinned)return lD(i,"top",e,t);if("bottom"===e.rowPinned&&"top"===t.rowPinned){let n=lD(i,"top",t,void 0),o=lD(i,"bottom",void 0,e),s=r.getRow(0),a=r.getRow(r.getRowCount()-1);return n.concat(r.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(!e.rowPinned&&"top"===t.rowPinned)return lD(i,"top",t,void 0).concat(r.getNodesInRangeForSelection(r.getRow(0),e)??[]);if("top"===e.rowPinned&&"bottom"===t.rowPinned){let n=lD(i,"top",e,void 0),o=lD(i,"bottom",void 0,t),s=r.getRow(0),a=r.getRow(r.getRowCount()-1);return n.concat(r.getNodesInRangeForSelection(s,a)??[]).concat(o)}if("bottom"===e.rowPinned&&"bottom"===t.rowPinned)return lD(i,"bottom",e,t);if(!e.rowPinned&&"bottom"===t.rowPinned){let n=lD(i,"bottom",void 0,t),o=r.getRow(r.getRowCount());return(r.getNodesInRangeForSelection(e,o)??[]).concat(n)}return null}},lA=class extends tE{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(eP(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;let t=this.createManagedBean(new n2);this.cbSelectAll=t,t.addCss("ag-header-select-all"),eI(t.getGui(),"presentation"),this.showOrHideSelectAll();let i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",({currentValue:e,previousValue:t})=>{let i=e=>"string"!=typeof e&&e&&"singleRow"!==e.mode?e.selectAll:void 0;i(e)!==i(t)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll("uiColumnMoved"===e.source)}showOrHideSelectAll(e=!1){let t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,r=t.getSelectAllState(e);i.setValue(r);let n=t.hasNodesToSelect(e);i.setDisabled(!n),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){let t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:r,cbSelectAllVisible:n}=this,o=eW(t,r.getValue()),s=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",n?`${s} (${o})`:null),r.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return!!i_(this.gos)||(t7(128,{feature:e}),!1)}checkRightRowModelType(e){let{gos:t,rowModel:i}=this.beans;return!!(ir(t)||io(t))||(t7(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.getSelectAllMode(),i="uiSelectAll";"currentPage"===t?i="uiSelectAllCurrentPage":"filtered"===t&&(i="uiSelectAllFiltered");let r={source:i,selectAll:t},n=this.beans.selectionSvc;e?n.selectAllRowNodes(r):n.deselectAllRowNodes(r)}isCheckboxSelection(){let{column:e,gos:t,beans:i}=this,r="object"==typeof t.get("rowSelection")?"headerCheckbox":"headerCheckboxSelection";return lF(i,e)&&this.checkRightRowModelType(r)&&this.checkSelectionType(r)}getSelectAllMode(){let e=iF(this.gos,!1);if(e)return e;let{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function lF({gos:e,selectionColSvc:t},i){let r=e.get("rowSelection"),n=i.getColDef(),{headerCheckboxSelection:o}=n,s=!1;if("object"==typeof r){let e=rs(i),n=ro(i);("autoGroupColumn"===iR(r)&&n||e&&t?.isSelectionColumnEnabled())&&(s=ik(r))}else s="function"==typeof o?o(iB(e,{column:i,colDef:n})):!!o;return s}var lI=class extends tE{postConstruct(){let{gos:e,beans:t}=this;this.selectionCtx=new l_(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{let t=iT(e);t!==this.isRowSelectable&&(this.isRowSelectable=t,this.updateSelectable())}),this.isRowSelectable=iT(e),this.addManagedEventListeners({cellValueChanged:e=>this.updateRowSelectable(e.node),rowNodeDataChanged:e=>this.updateRowSelectable(e.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new lO}createSelectAllFeature(e){if(lF(this.beans,e))return new lA(e)}isMultiSelect(){return i_(this.gos)}onRowCtrlSelected(e,t,i){let r=!!e.rowNode.isSelected();e.forEachGui(i,e=>{e.rowComp.toggleCss("ag-row-selected",r);let i=e.element;eG(i,r),i.contains(eP(this.beans))&&t(e)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;let t=e.isSelected(),i=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||i)return;let r=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(r,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!lM(e)||!ia(this.gos)}updateRowSelectable(e,t){let i=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t&&(e.selectable=t,e.dispatchRowEvent("selectableChanged"),!i)){if(iI(this.gos)){let t=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:t??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,i=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let r=0;r<e.childrenAfterGroup.length;r++){let n=e.childrenAfterGroup[r],o=n.isSelected();if(!n.selectable){let e=this.calculateSelectedFromChildren(n);if(null===e)continue;o=e}switch(o){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!t||!i)return!!t||!i&&(e.selectable?e.__selected:null)}selectRowNode(e,t,i,r="api"){if(t&&e.destroyed)return!1;let n=!e.selectable&&t,o=e.__selected===t;if(n||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");let s=e.sibling;s&&s.footer&&s.__localEventService&&s.dispatchRowEvent("rowSelected");let a=e.pinnedSibling;return a?.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...iB(this.gos,{type:"rowSelected",node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned}),event:i||null,source:r}),!0}isCellCheckboxSelection(e,t){let i=this.gos.get("rowSelection");if(!i||"string"==typeof i)return e.isColumnFunc(t,e.colDef.checkboxSelection);{let r=rs(e)&&iS(i);return e.isColumnFunc(t,r)}}inferNodeSelections(e,t,i,r){let n,o,{gos:s,selectionCtx:a}=this,l=e.isSelected(),u=iI(s),d=!0===(n=iD(s))||"enableSelection"===n,c=!0===(o=iD(s))||"enableDeselection"===o,h=this.isMultiSelect(),p="rowClicked"===r;if(p&&!(d||c))return null;if(t&&i&&h){let t=a.getRoot();if(!t)return null;if(!t.isSelected())return{select:[],deselect:a.extend(e,u).keep,reset:!1};{let t=a.isInRange(e)?a.truncate(e):a.extend(e,u);return{deselect:t.discard,select:t.keep,reset:!1}}}if(t&&h){let t=a.selectAll?this.beans.rowModel.getRow(0):void 0,i=a.getRoot(t),r=a.isInRange(e)?a.truncate(e):a.extend(e,u);return{select:r.keep,deselect:r.discard,reset:a.selectAll||!!(i&&!i.isSelected())}}if(i){if(p){let t=!l;return(!t||d)&&(t||c)?(a.setRoot(e),{node:e,newValue:t,clearSelection:!1}):null}return a.setRoot(e),{node:e,newValue:!l,clearSelection:!h}}{let t;a.setRoot(e);let i="string"==typeof(t=s.get("rowSelection"))?s.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1,r="filteredDescendants"===iA(s),n=p&&(!i||!d);if(r&&void 0===l&&ir(s))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!h||n};if(p){let t=l?!i:d;return(t!==l||n)&&(!t||d)&&(t||c)?{node:e,newValue:t,clearSelection:!h||n,keepDescendants:e.group&&u}:null}return{node:e,newValue:!l,clearSelection:!h||n}}}},lL=class extends sl{initialiseTabGuard(e){super.initialiseTabGuard(e,s$)}},lN=class extends nF{constructor(e){super(e,s$)}},lB=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(null===i)return;this.eventSvc=i=new eg;let e=this.onTouchStart.bind(this);this.startListener=e,this.eElement.addEventListener("touchstart",e,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!(e=>{if(k){if(k.has(e))return!1}else k=new WeakSet;return k.add(e),!0})(e))return;let t=e.touches[0];this.touchStart=t;let i=this.handlers;if(!i.length){let e=this.eElement,t=e.ownerDocument,r=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this),o=this.onTouchCancel.bind(this),s={passive:!0},a={passive:!1};tw(i,[e,"touchmove",r,s],[t,"touchcancel",o,s],[t,"touchend",n,a],[t,"contextmenu",tx,a])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart!==t||this.moved||(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},550)}onTouchMove(e){let{moved:t,touchStart:i}=this;if(!t&&i){let t=ty(i,e.touches);t&&!tv(t,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){let t=this.touchStart;t&&ty(t,e.changedTouches)&&(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&tx(e),this.cancel())}onTouchCancel(e){let t=this.touchStart;t&&ty(t,e.changedTouches)&&(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now(),i=this.lastTapTime;i&&t-i>500&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),tC(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){let e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},lV=((d=lV||{})[d.VALUE=0]="VALUE",d[d.DIMENSION=1]="DIMENSION",d),lH=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${tH}/${this.frameworkName}-data-grid`,t1=this.baseDocLink}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function lz(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var lj=Object.fromEntries(["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"].map((e,t)=>[e,t]));function lG(e,t){return((e.beanName?lj[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?lj[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function lW(e,t){return e?.beanName==="gridDestroySvc"?-1:+(t?.beanName==="gridDestroySvc")}var lU=class extends tE{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());let{dragAndDrop:r,ctrlsSvc:n}=this.beans;r?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new sY(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");let o=tl(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),n.register("gridCtrl",this)}isDetailGrid(){let e=nD(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){let{view:t}=this;!1===e?t.setCursor(null):t.setCursor(1===e?"ew-resize":"ns-resize")}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:r}=this.getNextFocusableIndex(t,e);if(r<0||r>=t.length)return!1;if(0===r){if(i>0){let{visibleCols:e,focusSvc:t}=this.beans,i=i3(e.allCols);if(t.focusGridView({column:i,backwards:!0}))return!0}return!1}return this.focusContainer(t[r],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t?.({fromBottom:!!e}))return!0;let i=this.getFocusableContainers(),{focusSvc:r,visibleCols:n}=this.beans,o=n.allCols;if(e){if(i.length>1)return this.focusContainer(i3(i),e);let t=i3(o);if(r.focusGridView({column:t,backwards:e}))return!0}if(0===this.gos.get("headerHeight")||aN(this.beans)){if(r.focusGridView({column:o[0],backwards:e}))return!0;for(let t=1;t<i.length;t++)if(nP(i[t].getGui(),e))return!0;return!1}return r.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:i}=this.getNextFocusableIndex(t,e),r=t[i];r?this.focusContainer(r):this.forceFocusOutOfContainer(e)}isFocusable(){let e=this.beans;return!aB(e)||!aN(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){let i=eP(this.beans),r=e.findIndex(e=>e.getGui().contains(i));return{indexWithFocus:r,nextIndex:r+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);let i=nP(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},l$=(e,t)=>{for(let i of Object.keys(t))t[i]=e;return t},lq={dispatchEvent:"CommunityCore",...l$("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...l$("GridState",{getState:0,setState:0}),...l$("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...l$("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...l$("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...l$("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...l$("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...l$("ValueCache",{expireValueCache:0}),...l$("CellApi",{getCellValue:0}),...l$("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...l$("Sort",{onSortChanged:0}),...l$("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...l$("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...l$("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...l$("HighlightChanges",{flashCells:0}),...l$("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...l$("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...l$("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...l$("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...l$("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...l$("ColumnResize",{setColumnWidths:0}),...l$("ColumnHover",{isColumnHovered:0}),...l$("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...l$("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...l$("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...l$("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...l$("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...l$("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...l$("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...l$("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...l$("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...l$("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...l$("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...l$("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...l$("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...l$("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...l$("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...l$("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...l$("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...l$("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...l$("ContextMenu",{showContextMenu:0}),...l$("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...l$("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...l$("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...l$("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...l$("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...l$("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...l$("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...l$("StatusBar",{getStatusPanel:0}),...l$("AiToolkit",{getStructuredSchema:0})},lK={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},lQ=(e,t)=>e.eventSvc.dispatchEvent(t),lX=class{};Reflect.defineProperty(lX,"name",{value:"GridApi"});var lY=class extends tE{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new lX,this.fns={...lK,dispatchEvent:lQ},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(lq))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:i,beans:r}=this;i!==lK&&(i[e]=r?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:i,fns:{[e]:r}}=this;return r?r(i,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:i,preDestroyLink:r}=this;if(t){let t=lq[e];i.assertModuleRegistered(t,`api.${e}`)&&t7(27,{fnName:e,module:t})}else t7(26,{fnName:e,preDestroyLink:r})}destroy(){super.destroy(),this.fns=lK,this.beans=null}};function lZ(e,t){e.gos.updateGridOptions({options:t})}var lJ={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},l0=class extends rI{constructor(e,t,i){super(lJ),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(a6("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let{rowNode:t,column:i,eCell:r,gos:n}=this,o=i.getColDef().dndSourceOnRowDrag,s=e.dataTransfer;if(s.setDragImage(r,0,0),o)o(iB(n,{rowNode:t,dragEvent:e}));else try{let e=JSON.stringify(t.data);s.setData("application/json",e),s.setData("text/plain",e)}catch(e){}}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},l1=class extends si{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},l2=class extends tE{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;return i.addDragSource(t),()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},l5={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},l3={skipAriaHidden:!0},l4=class extends rI{constructor(e,t,i,r,n,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=r,this.dragStartPixels=n,this.alwaysVisible=o,this.dragSource=null,this.disabled=!1}isCustomGui(){return null!=this.customGui}postConstruct(){let{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(l5),this.getGui().appendChild(a6("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){let{beans:e,rowNode:t}=this,i=this.refreshVisibility.bind(this);this.addManagedListeners(e.eventSvc,{rowDragVisibilityChanged:i}),this.addManagedListeners(t,{dataChanged:i,cellChanged:i}),this.refreshVisibility()}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;let{beans:e,column:t,rowNode:i}=this,{gos:r,dragAndDrop:n,rowDragSvc:o}=e,s=o?.visibility,a=!("suppress"===s||"hidden"===s&&!n?.hasExternalDropZones()),l=a;if(a&&!this.isCustomGui()&&t){let e=t.getColDef().rowDrag;!1===e?a=!1:(l=t.isRowDrag(i),a="function"==typeof e||l)}a&&l&&i.footer&&r.get("rowDragManaged")&&(l=!1,a=!0),l&&(l=a),a||this.setDisplayed(a,l3),l||this.setVisible(l,l3),this.setDisabled(!l||"disabled"===s&&!n?.hasExternalDropZones()),a&&this.setDisplayed(a,l3),l&&this.setVisible(l,l3)}setDisabled(e){e!==this.disabled&&(this.disabled=e,this.getGui()?.classList?.toggle("ag-drag-handle-disabled",e))}getSelectedNodes(){let e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];let t=this.beans.selectionSvc?.getSelectedNodes()??[];return -1!==t.indexOf(e)?t:[e]}getDragItem(){let{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);let i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:e=>this.getDragItemName(e,i),getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}getDragItemName(e,t){let i=e?.dragItem||this.getDragItem(),r=(e?.dropTarget?.rows.length??i.rowNodes?.length)||1,n=this.column?.getColDef()?.rowDragText??this.gos.get("rowDragText");if(n)return n(i,r);if(1!==r)return`${r} ${t("rowDragRows","rows")}`;let o=this.cellValueFn();return o||`1 ${t("rowDragRow","rows")}`}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},l8=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){let{rowNode:i,children:r}=e;if(r)for(let e=0;e<r.length;++e)this.depthFirstSearchChangedPath(r[e],t);t(i)}depthFirstSearchEverything(e,t,i){let r=e.childrenAfterGroup;if(r)for(let e=0,n=r.length;e<n;++e){let n=r[e];n.childrenAfterGroup?this.depthFirstSearchEverything(n,t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){let e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){for(let e of(this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t))this.nodeIdsToColumns[i.id][e.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let e=0;e<t;e++){let e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let i=this.nodeIdsToColumns[e.id];return t.filter(e=>i[e.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[e.id];return t.filter(e=>!i[e.getId()])}},l6=class extends tE{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.autoScroll=null,this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,t=>{let i=()=>t.gridBodyCtrl.scrollFeature.getVScrollPosition().top,r=new nI({scrollContainer:t.gridBodyCtrl.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:e=>t.gridBodyCtrl.scrollFeature.setVerticalScrollPosition(e),onScrollCallback:()=>{let t=i();if(this.autoScrollOldV!==t){this.autoScrollOldV=t,this.autoScrollChanging=!0;return}let r=this.autoScrollChanging;this.autoScrollChanged=r,this.autoScrollChanging=!1,r&&(e.dragAndDrop?.nudge(),this.autoScrollChanged=!1)}});this.autoScroll=r,this.clearAutoScroll()})}destroy(){super.destroy(),this.clearAutoScroll(),this.autoScroll=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(e){return e?.dropTarget?.allowed===!1||"visible"!==this.beans.rowDragSvc.visibility?"notAllowed":"move"}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let e=this.beans.selectionSvc?.getSelectedNodes();if(e&&e.indexOf(t)>=0)return e.slice().sort(l9)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){let{lastDraggingEvent:i,beans:r}=this;if(t){let t=this.getRowNodes(e);e.dragItem.rowNodes=t,ue(t,!0)}this.lastDraggingEvent=e;let n=e.fromNudge,o=this.makeRowsDrop(i,e,n,!1);r.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e);let s=this.autoScroll;o?.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!n&&!s?.scrolling||this.autoScrollChanged)&&this.dropRows(o),s?.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,i,r){let{beans:n,gos:o}=this,s=this.newRowsDrop(t,r),a=n.rowModel;if(t.dropTarget=s,t.changed=!1,!s)return null;let{sameGrid:l,rootNode:u,source:d,target:c}=s;c??(c=a.getRow(a.getRowCount()-1)??null);let h=this.beans.groupEditSvc,p=!!h?.canSetParent(s),f=null;if(c?.footer){let e=sv(a,-1,c)??sv(a,1,c);p&&(f=c.sibling??u),c=e??null}c?.detail&&(c=c.parent),s.moved&&(s.moved=d!==c);let g=.5;if(c&&(g=l&&s.moved&&(f||!p)?d.rowIndex>c.rowIndex?-.5:.5:(s.y-c.rowTop-c.rowHeight/2)/c.rowHeight||0),!p&&l&&c&&s.moved&&ir(o)){let e=ut(a,s);e&&(g=d.rowIndex>e.rowIndex?-.5:.5,c=e,s.moved&&(s.moved=d!==c))}return s.target=c,s.newParent=f,s.pointerPos=ui(c,s.y),s.yDelta=g,h?.fixRowsDrop(s,p,i,g),this.validateRowsDrop(s,p,r),t.changed||(t.changed=l7(e?.dropTarget,s)),s}newRowsDrop(e,t){let{beans:i,gos:r}=this,n=i.rowModel.rootNode,o=!!ir(r)&&r.get("rowDragManaged"),s=r.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e),{rowNode:l,rowNodes:u}=e.dragItem;if(u||(u=l?[l]:[]),l||(l=u[0]),!l||!n)return null;let d=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e),c=!0;!o||u.length&&"visible"===i.rowDragSvc.visibility&&(!s&&a||d)||(c=!1);let h=aS(i,e).y,p=this.getOverNode(h);return{api:i.gridApi,context:i.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:s,sameGrid:a,withinGrid:d,treeData:!1,rootNode:n,moved:l!==p,y:h,overNode:p,overIndex:p?.rowIndex??-1,pointerPos:"none",position:"none",source:l,target:p??null,newParent:null,rows:u,allowed:c,highlight:!t&&o&&s&&(d||!a),yDelta:0,inside:!1,droppedManaged:!1}}validateRowsDrop(e,t,i){let{source:r,target:n,yDelta:o,inside:s,moved:a,rowDragManaged:l,suppressMoveWhenRowDragging:u}=e;e.moved&&(e.moved=r!==n);let{position:d,fallbackPosition:c}=this.computeDropPosition(a,s,o);e.position=d,t||(e.newParent=null),this.enforceSuppressMoveWhenRowDragging(e,u,"initial");let h=(!l||e.allowed)&&this.gos.get("isRowValidDropPosition");h&&this.applyDropValidator(e,t,i,l,h),l&&(e.rows=this.filterRows(e)),this.beans.groupEditSvc?.clearNewSameParent(e,t),this.enforceSuppressMoveWhenRowDragging(e,u,"final"),"inside"!==e.position||e.allowed&&e.newParent||(e.position=c)}computeDropPosition(e,t,i){let r=i<0?"above":"below";return e?{position:t?"inside":r,fallbackPosition:r}:{position:"none",fallbackPosition:r}}enforceSuppressMoveWhenRowDragging(e,t,i){if(t){if("initial"===i){e.moved||(e.allowed=!1);return}e.rows.length&&"none"!==e.position||(e.allowed=!1)}}applyDropValidator(e,t,i,r,n){this.beans.groupEditSvc?.clearNewSameParent(e,t);let o=n(e);if(!o){e.allowed=!1;return}if("object"!=typeof o)return;void 0!==o.rows&&(e.rows=o.rows??[]),t&&void 0!==o.newParent&&(e.newParent=o.newParent),void 0!==o.target&&(e.target=o.target),o.position&&(e.position=o.position),void 0!==o.allowed?e.allowed=o.allowed:r||(e.allowed=!0);let s=e.draggingEvent;o.changed&&s&&(s.changed=!0),i||void 0===o.highlight||(e.highlight=o.highlight)}addRowDropZone(e){if(!e.getContainer())return void t7(55);let t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer()))return void t7(56);let i={isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0,...e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(t=>e.onDragEnter(this.rowDragEvent("rowDragEnter",t))),onDragLeave:e.onDragLeave&&(t=>e.onDragLeave(this.rowDragEvent("rowDragLeave",t))),onDragging:e.onDragging&&(t=>e.onDragging(this.rowDragEvent("rowDragMove",t))),onDragStop:e.onDragStop&&(t=>e.onDragStop(this.rowDragEvent("rowDragEnd",t))),onDragCancel:e.onDragCancel&&(t=>e.onDragCancel(this.rowDragEvent("rowDragCancel",t)))}};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:t=>{this.onDragEnter(t),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",t))},onDragLeave:t=>{this.onDragLeave(t),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",t))},onDragging:t=>{this.onDragging(t),e?.onDragging?.(this.rowDragEvent("rowDragMove",t))},onDragStop:t=>{this.onDragStop(t),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",t))},onDragCancel:t=>{this.onDragCancel(t),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",t))},fromGrid:!0}}getOverNode(e){let{pageBounds:t,rowModel:i}=this.beans,r=e>t.getCurrentPagePixelRange().pageLastPixel?-1:i.getRowIndexAtPixel(e);return r>=0?i.getRow(r):void 0}rowDragEvent(e,t){let i=this.beans,{dragItem:r,dropTarget:n,event:o,vDirection:s}=t,a=n?.rootNode===i.rowModel.rootNode,l=a?n.y:aS(i,t).y,u=a?n.overNode:this.getOverNode(l),d=a?n.overIndex:u?.rowIndex??-1;return{api:i.gridApi,context:i.gridOptions.context,type:e,event:o,node:r.rowNode,nodes:r.rowNodes,overIndex:d,overNode:u,y:l,vDirection:s,rowsDrop:n}}dispatchGridEvent(e,t){let i=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e,!1)}onDragStop(e){let t=this.lastDraggingEvent?.dropTarget??null,i=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),i?.allowed&&i.rowDragManaged&&(!t?.droppedManaged||l7(t,i))&&this.dropRows(i),this.stopDragging(e,!0)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e,!0)}stopDragging(e,t){this.clearAutoScroll(),this.beans.groupEditSvc?.stopDragging(t),this.beans.rowDropHighlightSvc?.fromDrag(null),ue(e.dragItem.rowNodes,!1),this.lastDraggingEvent=null}clearAutoScroll(){this.autoScroll?.ensureCleared(),this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}dropRows(e){return e.droppedManaged=!0,e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:i}){let r,n=ix(this.gos),o=this.beans.rowModel,s=i.filter(({data:e,rowPinned:t})=>!o.getRowNode(n?.({data:e,level:0,rowPinned:t})??e.id)).map(({data:e})=>e);if(0===s.length)return!1;if(t){let i=t.sourceRowIndex>=0?t:lR(t);i&&(r=i.sourceRowIndex+ +("above"!==e))}return o.updateRowData({add:s,addIndex:r}),!0}filterRows(e){let t,{groupEditSvc:i}=this.beans,{rows:r,sameGrid:n}=e;for(let o=0,s=r.length;o<s;++o){let s=!0,a=r[o];(!a||a.footer||n&&a.destroyed&&!a.group||!this.csrmGetLeaf(a))&&(s=!1),s&&i&&!i.canDropRow(a,e)&&(s=!1),s?t?.push(a):t??(t=r.slice(0,o))}return t??r}csrmMoveRows(e){let t=this.beans.groupEditSvc;return t?.isGroupingDrop(e)?t.dropGroupEdit(e):this.csrmMoveRowsReorder(e)}csrmMoveRowsReorder({position:e,target:t,rows:i,newParent:r,rootNode:n}){let o=!1,s=new Set;for(let e of i){r&&e.parent!==r&&(e.treeParent=r,o=!0);let t=this.csrmGetLeaf(e);t&&s.add(t)}if(!o&&0===s.size)return!1;let a=this.beans.focusSvc,l=a.getFocusedCell(),u=l&&aA(this.beans,l);if(s.size&&((e,t,i,r)=>{if(!t.size||!e)return!1;let n=!1,o=e.length??0,s=-1;i&&(i=(s=i.sourceRowIndex)<0?lR(i):null)&&(s=i.sourceRowIndex),s<0||s>=o?s=o:!r&&++s;let a=s,l=Math.min(s,o-1);for(let e of t){let t=e.sourceRowIndex;t<a&&(a=t),t>l&&(l=t)}let u=a;for(let i=a;i<s;++i){let r=e[i];!t.has(r)&&(r.sourceRowIndex!==u&&(r.sourceRowIndex=u,e[u]=r,n=!0),++u)}let d=l;for(let i=l;i>=s;--i){let r=e[i];!t.has(r)&&(r.sourceRowIndex!==d&&(r.sourceRowIndex=d,e[d]=r,n=!0),--d)}for(let i of t)i.sourceRowIndex!==u&&(i.sourceRowIndex=u,e[u]=i,n=!0),++u;return n})(n._leafs,s,t,"above"===e)&&(o=!0),!o)return!1;let d=this.beans.rowModel,c=new lE;return c.reordered=!0,d.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new l8(!1,n),changedRowNodes:c}),u?u.focusCell():a.clearFocusedCell(),!0}csrmGetLeaf(e){if(e.sourceRowIndex>=0)return e.destroyed?void 0:e;let t=this.beans.groupEditSvc;return t?t.csrmFirstLeaf(e):lR(e)}},l7=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!i4(e.rows,t.rows)),l9=({rowIndex:e},{rowIndex:t})=>null!==e&&null!==t?e-t:0,ue=(e,t)=>{for(let i=0,r=e?.length||0;i<r;++i){let r=e[i];r.dragging!==t&&(r.dragging=t,r.dispatchRowEvent("draggingChanged"))}},ut=(e,t)=>{let i=null,r=t.target;if(r&&0>t.rows.indexOf(r))return null;let n=t.source;if(!r||!n)return null;let o=r.rowIndex-n.rowIndex,s=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;let a=new Set(t.rows);do{let t=sv(e,s,r);if(!t)break;!a.has(t)&&(i=t,--o),r=t}while(o>0)return i},ui=(e,t)=>{let i=e?.rowTop,r=e?.rowHeight??0;if(null==i||!r||r<=0)return"none";let n=t-i,o=.25*r;return n<=o?"above":n>=r-o?"below":"inside"},ur=class extends tE{constructor(){super(...arguments),this.beanName="rowDragSvc",this.rowDragFeature=null,this.visibility="suppress"}setupRowDrag(e,t){let i=t.createManagedBean(new l6(e)),r=this.beans.dragAndDrop;r.addDropTarget(i),t.addDestroyFunc(()=>r.removeDropTarget(i)),this.rowDragFeature=i;let n=()=>this.refreshVisibility();this.addManagedPropertyListeners(["rowDragManaged","suppressRowDrag","refreshAfterGroupEdit"],n),this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:n,columnPivotModeChanged:n,sortChanged:n,filterChanged:n}),this.visibility=this.computeVisibility()}createRowDragComp(e,t,i,r,n,o){return new l4(e,t,i,r,n,o)}createRowDragCompForRow(e,t){if(iP(this.gos))return;let i=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${i("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,r,n,o){let s=this.gos;if(!(s.get("rowDragManaged")&&(!ir(s)||s.get("pagination"))))return this.createRowDragComp(i,e,t,r,n,o)}cancelRowDrag(){this.rowDragFeature?.lastDraggingEvent&&this.beans.dragSvc?.cancelDrag()}computeVisibility(){let e=this.beans,t=e.gos;if(t.get("suppressRowDrag"))return"suppress";if(!t.get("rowDragManaged"))return"visible";let i=e.colModel.isPivotMode();return(i||e.rowGroupColsSvc?.columns?.length)&&!t.get("refreshAfterGroupEdit")?"hidden":i||e.filterManager?.isAnyFilterPresent()||e.sortSvc?.isSortActive()?"disabled":"visible"}refreshVisibility(){let e=this.visibility,t=this.computeVisibility();e!==t&&(this.visibility=t,this.eventSvc?.dispatchEvent({type:"rowDragVisibilityChanged"}))}},un=class extends tE{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){let e=this.row,t=this.dragging;e&&e?.rowIndex!==null&&"none"!==this.position?this.set(e,this.position):this.clear(),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){let e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){let i=e!==this.row,r=e.uiLevel,n=t!==this.position,o=r!==this.uiLevel;this.dragging=!1,(i||n||o)&&(i&&this.clear(),this.uiLevel=r,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){let t=e?.dropTarget;if(t){let{highlight:e,target:i,position:r}=t;if(e&&i&&"none"!==r){this.set(i,r),this.dragging=!0;return}}this.dragging&&this.clear()}},uo={moduleName:"Drag",version:tZ,beans:[l1]},us={moduleName:"SharedDragAndDrop",version:tZ,beans:[sd],dependsOn:[uo],userComponents:{agDragAndDropImage:la},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},ua=class extends tE{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;let{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){let{executeNextFuncs:i,executeLaterFuncs:r}=this;if(0===i.length&&0===r.length){e(),t();return}let n=e=>{for(;e.length;){let t=e.pop();t&&t()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),n(i)},0),window.setTimeout(()=>{t(),n(r)},200)})}},ul=class extends tE{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;if(t)for(let e of t)e.isPrimary()&&!e.isAnyFunctionActive()&&(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){let{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:r}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&r?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function uu(e){var t,i;let r,n,o,{isFromHeader:s,fromLeft:a,xPosition:l,fromEnter:u,fakeEvent:d,pinned:c,gos:h,colModel:p,colMoves:f,visibleCols:g}=e,{allMovingColumns:m}=e;s&&(m=function(e){let t=[...e];for(let i of e){let e=null,r=i.getParent();for(;null!=r&&1===r.getDisplayedLeafColumns().length;)e=r,r=r.getParent();if(null!=e)for(let i of e.getColGroupDef()?.marryChildren?e.getProvidedColumnGroup().getLeafColumns():e.getLeafColumns())t.includes(i)||t.push(i)}return t}(m));let v=m.slice();t=p.getCols(),v&&!(v.length<=1)&&(v.filter(e=>0>t.indexOf(e)).length>0||v.sort((e,i)=>t.indexOf(e)-t.indexOf(i)));let y=function(e){let t,{movingCols:i,draggingRight:r,xPosition:n,pinned:o,gos:s,colModel:a,visibleCols:l}=e;if(s.get("suppressMovableColumns")||i.some(e=>e.getColDef().suppressMovable))return[];let u=function(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}(l,o),d=a.getCols(),c=u.filter(e=>i.includes(e)),h=u.filter(e=>!i.includes(e)),p=d.filter(e=>!i.includes(e)),f=0,g=n;if(r){let e=0;for(let t of c)e+=t.getActualWidth();g-=e}if(g>0){for(let e=0;e<h.length&&!((g-=h[e].getActualWidth())<0);e++)f++;r&&f++}if(f>0){let e=h[f-1];t=p.indexOf(e)+1}else -1===(t=p.indexOf(h[0]))&&(t=0);let m=[t],v=(e,t)=>e-t;if(r){let e=t+1,i=d.length-1;for(;e<=i;)m.push(e),e++;m.sort(v)}else{let e=t,i=d.length-1,r=d[e];for(;e<=i&&0>u.indexOf(r);)e++,m.push(e),r=d[e];for(e=t-1;e>=0;)m.push(e),e--;m.sort(v).reverse()}return m}({movingCols:v,draggingRight:a,xPosition:l,pinned:c,gos:h,colModel:p,visibleCols:g}),b=(i=v,r=p.getCols(),o=(n=i.map(e=>r.indexOf(e)).sort((e,t)=>e-t))[0],i3(n)-o!=n.length-1?null:o);if(0===y.length)return;let w=y[0];if(null!==b&&(s||!u)&&!d&&(!a&&w>=b||a&&w<=b))return;let C=function(e,t,i,r){let n=r.allCols,o=null,s=null;for(let r=0;r<e.length;r++){let a=e[r],l=i.getProposedColumnOrder(t,a);if(!i.doesOrderPassRules(l))continue;let u=l.filter(e=>n.includes(e));if(null===s)s=u;else if(!i4(u,s))break;let d=function(e){function t(e){let t=[],i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let r=0;r<e.length-1;r++){let n=t(e[r]),o=t(e[r+1]);for(let e of([n,o]=n.length>o.length?[n,o]:[o,n],n))-1===o.indexOf(e)&&i++}return i}(l);(null===o||d<o.fragCount)&&(o={move:a,fragCount:d})}return o}(y,v,f,g);if(!C)return;let x=C.move;if(!(x>p.getCols().length-v.length))return{columns:v,toIndex:x}}function ud(e){let{columns:t,toIndex:i}=uu(e)||{},{finished:r,colMoves:n}=e;return t&&null!=i?(n.moveColumns(t,i,"uiColumnMoved",r),r?null:{columns:t,toIndex:i}):null}function uc(e){let{pinned:t,fromKeyboard:i,gos:r,ctrlsSvc:n,useHeaderRow:o,skipScrollPadding:s}=e,a=n.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),r.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||s||(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function uh(e,t){for(let i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var up=class extends tE{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!ev(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let{pinned:e,lastDraggingEvent:t}=this,{dragItem:i}=t||{};for(let t of i?.columns??[]){let r=t.getPinned();if(t.getColDef().lockPinned){if(r==e)return"move";continue}let n=i?.containerType;if(n===e||!e)return"move";if(e&&(!r||n!==e))return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem,i=t.columns;if(0===e.dragSource.type)this.setColumnsVisible(i,!0,"uiColumnDragged");else{let e=t.visibleState,r=(i||[]).filter(t=>e[t.getId()]&&!t.isVisible());this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,r=!1){let{gos:n,ctrlsSvc:o}=this.beans,s=n.get("suppressMoveWhenColumnDragging");if(r&&!s)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!r&&ey(e.hDirection))return;let a=uc({x:e.x,pinned:this.pinned,gos:n,ctrlsSvc:o});t||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,r):this.handleColumnDragWhileAllowingMovement(e,t,i,a,r)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e?.length)return;let r=e.filter(e=>!e.getColDef().lockVisible);r.length&&this.beans.colModel.setColsVisible(r,t,i)}finishColumnMoving(){this.clearHighlighted();let e=this.lastMovedInfo;if(!e)return;let{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){let{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;let t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,r,n){let o=this.getAllMovingColumns(e,!0);if(n){let e=this.isAttemptingToPin(o);e&&this.attemptToPinColumns(o,void 0,!0);let{fromLeft:r,xPosition:n}=this.getNormalisedXPositionInfo(o,e)||{};if(null==r||null==n)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:n,fromEnter:t,fakeEvent:i,fromLeft:r})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,r)}}handleColumnDragWhileAllowingMovement(e,t,i,r,n){let o=this.getAllMovingColumns(e),s="right"===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=ud({...this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:r,fromLeft:s,fromEnter:t,fakeEvent:i}),finished:n});l&&(this.lastMovedInfo=l)}getAllMovingColumns(e,t=!1){let i=e.dragSource.getDragItem(),r=null;t&&(r=i.columnsInSplit)||(r=i.columns);let n=e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned;return r?r.filter(n):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:i,xPosition:r,fromLeft:n,fromEnter:o,fakeEvent:s}=e,{gos:a,colModel:l,colMoves:u,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:r,pinned:this.pinned,fromEnter:o,fakeEvent:s,gos:a,colModel:l,colMoves:u,visibleCols:d}}highlightHoveredColumn(e,t){let i,{gos:r,colModel:n}=this.beans,o=r.get("enableRtl"),s=n.getCols().filter(e=>e.isVisible()&&e.getPinned()===this.pinned),a=null,l=null,u=null;for(let e of s){if(l=e.getActualWidth(),null!=(a=this.getNormalisedColumnLeft(e,0,o))){let i=a+l;if(a<=t&&i>=t){u=e;break}}a=null,l=null}if(u)-1!==e.indexOf(u)&&(u=null);else{for(let e=s.length-1;e>=0;e--){let t=s[e],i=s[e].getParent();if(!i){u=t;break}let r=i?.getDisplayedLeafColumns();if(r.length){u=i3(r);break}}if(!u)return;a=this.getNormalisedColumnLeft(u,0,o),l=u.getActualWidth()}this.lastHighlightedColumn?.column!==u&&this.clearHighlighted(),null!=u&&null!=a&&null!=l&&(uf(u,i=t-a<l/2?0:1),this.lastHighlightedColumn={column:u,position:i})}getNormalisedXPositionInfo(e,t){let{gos:i,visibleCols:r}=this.beans,n=i.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!s||null==a)return;let l=r.allCols,u=l.indexOf(o),d=l.indexOf(s),c=0===a,h=u<d||u===d&&!c,p=0;if(c?h&&(p-=1):h||(p+=1),d+p===u)return;let f=l[d+p];if(f)return{fromLeft:h,xPosition:this.getNormalisedColumnLeft(f,20,n)}}getColumnMoveAndTargetInfo(e,t,i){let r=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=function(e){let t,i,r=e.length;for(let n=0;n<r;n++){if(!t){let i=e[n];null!=i.getLeft()&&(t=i)}if(!i){let t=e[r-1-n];null!=t.getLeft()&&(i=t)}if(t&&i)break}return{firstMovingCol:t,lastMovingCol:i}}(e);if(!n||!o||r.column||!t)return{firstMovingCol:n,...r};let s="left"===this.getPinDirection();return{firstMovingCol:n,position:+!!s,column:s!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){let{gos:r,ctrlsSvc:n}=this.beans,o=e.getLeft();if(null==o)return null;let s=e.getActualWidth();return uc({x:i?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:r,ctrlsSvc:n})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some(e=>e.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:i,fromEnter:r,fakeEvent:n,fromLeft:o}=e,{columns:s,toIndex:a}=uu(this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:r,fakeEvent:n}))||{};s&&null!=a&&(this.lastMovedInfo={columns:s,toIndex:a}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:e}=this;e&&(uf(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){let t,i;if(!this.isCenterContainer)return;let r=this.beans.ctrlsSvc.get("center"),n=r.getCenterViewportScrollLeft(),o=n+r.getCenterWidth();this.gos.get("enableRtl")?(t=e<n+50,i=e>o-50):(i=e<n+50,t=e>o-50),this.needToMoveRight=t,this.needToMoveLeft=i,i||t?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,(e=10+5*this.intervalCount)>100&&(e=100);let t=null,i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:e,dragAndDrop:t,gos:i}=this.beans;if(this.failedMoveAttempts<=8||!e)return;if(t.setDragImageCompIcon("pinned"),!i.get("suppressMoveWhenColumnDragging")){let e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t,i=!1){let r=(e||[]).filter(e=>!e.getColDef().lockPinned);if(!r.length)return 0;i&&(t=this.getPinDirection());let{pinnedCols:n,dragAndDrop:o}=this.beans;return n?.setColsPinned(r,t,"uiColumnDragged"),i&&o.nudge(),r.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function uf(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}var ug=class extends tE{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){let{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,e=>{let t,r=e.gridBodyCtrl.eBodyViewport;switch(i){case"left":t=[[r,e.left.eContainer],[e.bottomLeft.eContainer],[e.topLeft.eContainer]];break;case"right":t=[[r,e.right.eContainer],[e.bottomRight.eContainer],[e.topRight.eContainer]];break;default:t=[[r,e.center.eViewport],[e.bottomCenter.eViewport],[e.topCenter.eViewport]]}this.eSecondaryContainers=t}),this.moveColumnFeature=this.createManagedBean(new up(i)),this.bodyDropPivotTarget=this.createManagedBean(new ul(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},um=class extends tE{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){let r=this.beans.colModel.getCols();if(!r)return;let n=r[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,r=!0){let{colModel:n,colAnimation:o,visibleCols:s,eventSvc:a}=this.beans,l=n.getCols();if(!l)return;if(t>l.length-e.length)return void t7(30,{toIndex:t});o?.start();let u=n.getColsForKeys(e);this.doesMovePassRules(u,t)&&(i7(n.getCols(),u,t),s.refresh(i),a.dispatchEvent({type:"columnMoved",columns:u,column:1===u.length?u[0]:null,toIndex:t,finished:r,source:i})),o?.finish()}doesMovePassRules(e,t){let i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){let{colModel:t,gos:i}=this.beans;return!!ry(e,t.getColTree())&&!!(e=>{let t=e=>e?"left"===e||!0===e?-1:1:0,r=i.get("enableRtl"),n=r?1:-1,o=!0;for(let i of e){let e=t(i.getColDef().lockPosition);r?e>n&&(o=!1):e<n&&(o=!1),n=e}return o})(e)}getProposedColumnOrder(e,t){let i=this.beans.colModel.getCols().slice();return i7(i,e,t),i}createBodyDropTarget(e,t){return new ug(e,t)}moveHeader(e,t,i,r,n){let o,{ctrlsSvc:s,gos:a,colModel:l,visibleCols:u,focusSvc:d}=this.beans,c=t.getBoundingClientRect(),h=c.left,p=sc(i),f=p?c.width:i.getActualWidth(),g="left"===e!==a.get("enableRtl"),m=uc({x:g?h-20:h+f+20,pinned:r,fromKeyboard:!0,gos:a,ctrlsSvc:s}),v=d.focusedHeader;if(ud({allMovingColumns:p?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:"right"===e,xPosition:m,pinned:r,fromEnter:!1,fakeEvent:!1,gos:a,colModel:l,colMoves:this,visibleCols:u,finished:!0}),p){let e=i.getDisplayedLeafColumns();o=g?e[0]:i3(e)}else o=i;if(s.getScrollFeature().ensureColumnVisible(o,"auto"),(!n.isAlive()||a.get("ensureDomOrder"))&&v){let e;if(p){let t=i.getGroupId(),r=i.getLeafColumns();if(!r.length)return;let n=r[0].getParent();if(!n)return;e=function(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}(n,t)}else e=i;e&&d.focusHeaderPosition({headerPosition:{...v,column:e}})}}setDragSourceForHeader(e,t,i){let{gos:r,colModel:n,dragAndDrop:o,visibleCols:s}=this.beans,a=!r.get("suppressDragLeaveHidesColumns"),l=sc(t),u=l?t.getProvidedColumnGroup().getLeafColumns():[t],d={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>(function(e,t){let i=e.getProvidedColumnGroup().getLeafColumns(),r={};for(let e of i)r[e.getId()]=e.isVisible();let n=[];for(let e of t)i.indexOf(e)>=0&&(n.push(e),i6(i,e));for(let e of i)n.push(e);let o=[],s=e.getLeafColumns();for(let e of n)-1!==s.indexOf(e)&&o.push(e);return{columns:n,columnsInSplit:o,visibleState:r,containerType:o[0]?.pinned}})(t,s.allCols):()=>{var e;let i;return(i={})[(e=t).getId()]=e.isVisible(),{columns:[e],visibleState:i,containerType:e.pinned}},dragItemName:i,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),uh(u,!0)},onDragStopped:()=>uh(u,!1),onDragCancelled:()=>uh(u,!1),onGridEnter:e=>{if(a){let{columns:t=[],visibleState:i}=e??{},r=l?e=>!i||i[e.getColId()]:()=>!0,o=t.filter(e=>!e.getColDef().lockVisible&&r(e));n.setColsVisible(o,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){let t=e?.columns?.filter(e=>!e.getColDef().lockVisible)||[];n.setColsVisible(t,!1,"uiColumnMoved")}}};return o.addDragSource(d,!0),d}},uv={moduleName:"AutoWidth",version:tZ,beans:[class extends tE{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let i=this.getHeaderCellForColumn(e);if(!i)return -1;let r=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||r.push(i),this.getPreferredWidthForElements(r)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){let i=document.createElement("form");i.style.position="fixed";let r=this.centerRowContainerCtrl.eContainer;for(let t of e)this.cloneItemIntoDummy(t,i);r.appendChild(i);let n=i.offsetWidth;return i.remove(),n+(t=t??this.gos.get("autoSizePadding"))}getHeaderCellForColumn(e){let t=null;for(let i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){let r=i.getHtmlElementForColumnHeader(e);null!=r&&(t=r)}return t}cloneItemIntoDummy(e,t){let i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let r=document.createElement("div"),n=r.classList;["ag-header-cell","ag-header-group-cell"].some(e=>i.classList.contains(e))?(n.add("ag-header","ag-header-row"),r.style.position="static"):n.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(e=>o.classList.contains(e))){for(let e=0;e<o.classList.length;e++){let t=o.classList[e];"ag-row-position-absolute"!=t&&n.add(t)}break}o=o.parentElement}r.appendChild(i),t.appendChild(r)}}]},uy=class extends tE{constructor(e,t,i,r){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);let{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,r=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(r),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){let{columnsToResize:t,resizeStartWidth:i,resizeRatios:r,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:s}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=r,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){let r=this.normaliseDragChange(t),n=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){let t=e=>e.reduce((e,t)=>e+t.getActualWidth(),0),i=(e,t)=>e.map(e=>e.getActualWidth()/t),r=this.getColumnsToResize(),n=t(r),o=i(r,n),s={columnsToResize:r,resizeStartWidth:n,resizeRatios:o},a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){let e=s.groupAfterColumns=a.getDisplayedLeafColumns().filter(e=>e.isResizable()),r=s.groupAfterStartWidth=t(e);s.groupAfterRatios=i(e,r)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(e){let t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;let r={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(r,e,t,i)}resizeColumns(e,t,i,r=!0){let{columnsToResize:n,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:u}=e,d=[];if(d.push({columns:n,ratios:s,width:t}),a){let e=t-o;d.push({columns:a,ratios:u,width:l-e})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:r,source:i}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},ub=class extends tE{constructor(e,t,i,r,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=r,this.ctrl=n}postConstruct(){let e,t,i=[],r=()=>{if(eq(this.eResize,e),!e)return;let{horizontalResizeSvc:r,colAutosize:n}=this.beans,o=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});i.push(o),t&&n&&i.push(n.addColumnAutosizeListeners(this.eResize,this.column))},n=()=>{for(let e of i)e();i.length=0},o=()=>{let i=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(i!==e||o!==t)&&(e=i,t=o,n(),r())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){let{column:i,lastResizeAmount:r,resizeStartWidth:n,beans:o}=this,s=this.normaliseResizeAmount(t),{pinnedCols:a,ctrlsSvc:l,colResize:u}=o;if(!(this.column.getPinned()&&(a?.leftWidth??0)+(a?.rightWidth??0)+(s-r)>eZ(l.getGridBodyCtrl().eBodyViewport)-50))this.lastResizeAmount=s,u?.setColumnWidths([{key:i,newWidth:n+s}],this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,i="left"!==this.pinned,r="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):r&&(t*=-1),t}},uw=class extends tE{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,r){let n=[],{colModel:o,gos:s,visibleCols:a}=this.beans;for(let i of e){let e=o.getColDefCol(i.key)||o.getCol(i.key);if(e&&(n.push({width:i.newWidth,ratios:[1],columns:[e]}),"shift"===s.get("colResizeDefault")&&(t=!t),t)){let t=a.getColAfter(e);if(!t)continue;let r=e.getActualWidth()-i.newWidth,o=t.getActualWidth()+r;n.push({width:o,ratios:[1],columns:[t]})}}0!==n.length&&this.resizeColumnSets({resizeSets:n,finished:i,source:r})}resizeColumnSets(e){let{resizeSets:t,finished:i,source:r}=e;if(!(!t||t.every(e=>(function(e){let{columns:t,width:i}=e,r=0,n=0,o=!0;for(let e of t){r+=e.getMinWidth()||0;let t=e.getMaxWidth();t>0?n+=t:o=!1}let s=i>=r,a=!o||i<=n;return s&&a})(e)))){if(i){let e=t&&t.length>0?t[0].columns:null;rC(this.eventSvc,e,i,r)}return}let n=[],o=[];for(let e of t){let{width:t,columns:i,ratios:s}=e,a={},l={};for(let e of i)o.push(e);let u=!0,d=0;for(;u;){if(++d>1e3){t9(31);break}u=!1;let e=[],r=0,n=t;i.forEach((t,i)=>{if(l[t.getId()])n-=a[t.getId()];else{e.push(t);let n=s[i];r+=n}});let o=1/r;e.forEach((i,r)=>{let d;r===e.length-1?d=n:(d=Math.round(s[r]*t*o),n-=d);let c=i.getMinWidth(),h=i.getMaxWidth();d<c?(d=c,l[i.getId()]=!0,u=!0):h>0&&d>h&&(d=h,l[i.getId()]=!0,u=!0),a[i.getId()]=d})}for(let e of i){let t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,r),n.push(e))}}let s=n.length>0,a=[];if(s){let{colFlex:e,visibleCols:t,colViewport:i}=this.beans;a=e?.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0})??[],t.setLeftValues(r),t.updateBodyWidths(),i.checkViewportColumns()}let l=o.concat(a);(s||i)&&rC(this.eventSvc,l,i,r,a)}resizeHeader(e,t,i){if(!e.isResizable())return;let r=Math.min(Math.max(e.getActualWidth()+t,e.getMinWidth()),e.getMaxWidth());this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,r,n){return new ub(e,t,i,r,n)}createGroupResizeFeature(e,t,i,r){return new uy(e,t,i,r)}},uC=class extends tE{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);for(let t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(let e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",0===e)}},ux=class extends aX{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,r,n){let{column:o,beans:s}=this,{context:a,colNames:l,colHover:u,rangeSvc:d,colResize:c}=s;this.comp=e,n=rT(this,a,n),this.setGui(t,n),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:r,compBean:n}),this.setupUserComp(),this.addHeaderMouseListeners(n,r),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let h=this.rowCtrl.pinned,p=o.getProvidedColumnGroup().getLeafColumns();u?.createHoverFeature(n,p,t),d?.createRangeHighlightFeature(n,o,e),n.createManagedBean(new aq(o,t,s)),n.createManagedBean(new uC(e,o)),c?this.resizeFeature=n.createManagedBean(c.createGroupResizeFeature(e,i,h,o)):e.setResizableDisplayed(!1),n.createManagedBean(new sq(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>void 0,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,p),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:e,beans:t}=this,i=e.getDefinition();return iB(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),i=t[0]===e,r=i3(t)===e;if(!i&&!r)return;let n=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(e=>e.column.isMoving()),s=!1,a=!1;if(o){let e=this.beans.gos.get("enableRtl"),t=1===n,o=0===n;i&&(e?a=t:s=o),r&&(e?s=o:a=t)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){let{resizeFeature:i}=this;if(!i)return;let r=i.getInitialValues(t);i.resizeColumns(r,r.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){let e,{colGroupSvc:t,userCompFactory:i,gos:r,enterpriseMenuFactory:n}=this.beans,o=this.column,s=o.getProvidedColumnGroup(),a=iB(r,{displayName:this.displayName,columnGroup:o,setExpanded:e=>{t.setColumnGroupOpened(s,e,"gridInitializing")},setTooltip:(e,t)=>{r.assertModuleRegistered("Tooltip",3),this.setupTooltip(e,t)},showColumnMenu:(e,t)=>n?.showMenuAfterButtonClick(s,e,"columnMenu",t),showColumnMenuAfterMouseClick:(e,t)=>n?.showMenuAfterMouseEvent(s,e,"columnMenu",t),eGridHeader:this.eGui}),l=(e=a.columnGroup.getColGroupDef(),i.getCompDetails(e,rU,"agColumnGroupHeader",a));l&&this.comp.setUserCompDetails(l)}addHeaderMouseListeners(e,t){let{column:i,comp:r,beans:{rangeSvc:n},gos:o}=this,s=e=>this.handleMouseOverChange("mouseenter"===e.type),a=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",i.getProvidedColumnGroup()),l=e=>this.handleContextMenuMouseEvent(e,void 0,i.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:s,mouseleave:s,click:a,contextmenu:l}),r.toggleCss("ag-header-group-cell-selectable",iM(o));let u=n?.createHeaderGroupCellMouseListenerFeature(this.column,t);u&&this.createManagedBean(u)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:e}=this,t=e.getColGroupDef(),i=aD(t,this.gos,null,e);for(let r of(e.isPadding()?(i.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(e=>e.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&i.push("ag-header-cell-wrap-text")),i))this.comp.toggleCss(r,!0)}setupMovingCss(e){let{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(let t of i)e.addManagedListeners(t,{movingChanged:r});r()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){if(super.handleKeyDown(e),!this.getWrapperHasFocus())return;let{column:t,expandable:i,gos:r,beans:n}=this,o=iM(r);if(e.key==r7){if(o&&!e.altKey)n.rangeSvc?.handleColumnSelection(t,e);else if(i){let e=!t.isExpanded();n.colGroupSvc.setColumnGroupOpened(t.getProvidedColumnGroup(),e,"uiColumnExpanded")}}}refreshAnnouncement(){let e,{gos:t,column:i,beans:r}=this;if(iM(t)){let t=this.getLocaleTextFunc(),n=r.rangeSvc?.isColumnInAnyRange(i);e=t("ariaColumnCellSelection",`Press CTRL+SPACE to ${n?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=e}announceAriaDescription(){let{beans:e,eGui:t,ariaAnnouncement:i}=this;i&&t.contains(eP(e))&&e.ariaAnnounce?.announceValue(i,"columnHeader")}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}},uS=class extends tE{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){let{colFlex:i,colModel:r,colGroupSvc:n,colViewport:o,selectionColSvc:s}=this.beans;t||this.buildTrees(r,n),n?.updateOpenClosedVisibility(),this.leftCols=uR(this.treeLeft),this.centerCols=uR(this.treeCenter),this.rightCols=uR(this.treeRight),s?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(r),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(e=>e.isAutoHeight()),i?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(r,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(let t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){let t=i.getProvidedColumnGroup().getLevel()+1;t>e&&(e=t);break}i=i.getParent()}}return e}updateBodyWidths(){let e=rr(this.centerCols),t=rr(this.leftCols),i=rr(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,r){let n,o;for(let s of(this.gos.get("enableRtl")?(n=t?t[0]:null,o=i?i3(i):null):(n=t?i3(t):null,o=i?i[0]:null),e.getCols()))s.setLastLeftPinned(s===n,r),s.setFirstRightPinned(s===o,r)}buildTrees(e,t){let i=e.getColsToShow(),r=i.filter(e=>"left"==e.getPinned()),n=i.filter(e=>"right"==e.getPinned()),o=i.filter(e=>"left"!=e.getPinned()&&"right"!=e.getPinned()),s=new rM,a=e=>t?t.createColumnGroups(e):e.columns;this.treeLeft=a({columns:r,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:n,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){let t=e.getCols(),i=[],r=[],n=[];for(let e of t){let t=e.getPinned();t?!0===t||"left"===t?i.push(e):n.push(e):r.push(e)}this.ariaOrderColumns=i.concat(r).concat(n)}getAriaColIndex(e){let t;return t=sc(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(let e of[this.treeLeft,this.treeRight,this.treeCenter])for(let t of e)sc(t)&&t.checkLeft()}setLeftValuesOfCols(e){let{colModel:t}=this.beans;if(!t.getColDefCols())return;let i=t.getCols().slice(0),r=this.gos.get("enableRtl");for(let t of[this.leftCols,this.rightCols,this.centerCols]){if(r){let i=rr(t);for(let r of t)i-=r.getActualWidth(),r.setLeft(i,e)}else{let i=0;for(let r of t)r.setLeft(i,e),i+=r.getActualWidth()}for(let e=0;e<t.length;e++){let r=i.indexOf(t[e]);r>=0&&(i[r]=i[i.length-1],i.pop())}}for(let t of i)t.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){let{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){let{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,r){let n=[],o=null;for(let s=0;s<t.length;s++){let a,l=t[s],u=t.length-s,d=Math.min(l.getColSpan(e),u),c=[l];if(d>1){let e=d-1;for(let i=1;i<=e;i++)c.push(t[s+i]);s+=e}if(i)for(let e of(a=!1,c))i(e)&&(a=!0);else a=!0;a&&(0===n.length&&o&&r&&r(l)&&n.push(o),n.push(l)),o=l}return n}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){let t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};uk(this.treeCenter,!1,e),uk(this.treeLeft,!1,e),uk(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){let r=this[t[i]];if(r.length)return e?i3(r):r[0]}return null}getColAfter(e){let t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return rr(this.leftCols)}getDisplayedColumnsRightWidth(){return rr(this.rightCols)}isColAtEdge(e,t){let i,r=this.allCols;if(!r.length)return!1;let n="first"===t;if(sc(e)){let t=e.getDisplayedLeafColumns();if(!t.length)return!1;i=n?t[0]:i3(t)}else i=e;return(n?r[0]:i3(r))===i}};function uk(e,t,i){if(e)for(let r=0;r<e.length;r++){let n=e[r];sc(n)&&uk(t?n.getDisplayedChildren():n.getChildren(),t,i),i(n)}}function uR(e){let t=[];return uk(e,!0,e=>{ij(e)&&t.push(e)}),t}var uE=class extends tE{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){let e=[];return rm(null,this.beans.colModel.getColTree(),t=>{iJ(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}resetColumnGroupState(e){let t=this.beans.colModel.getColDefColTree();if(!t)return;let i=[];rm(null,t,e=>{if(iJ(e)){let t=e.getColGroupDef(),r={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(r)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){let{colModel:i,colAnimation:r,visibleCols:n,eventSvc:o}=this.beans;if(!i.getColTree().length)return;r?.start();let s=[];for(let t of e){let e=t.groupId,i=t.open,r=this.getProvidedColGroup(e);r&&r.isExpanded()!==i&&(r.setExpanded(i),s.push(r))}n.refresh(t,!0),s.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:1===s.length?s[0]:void 0,columnGroups:s}),r?.finish()}setColumnGroupOpened(e,t,i){let r;r=iJ(e)?e.getId():e||"",this.setColumnGroupState([{groupId:r,open:t}],i)}getProvidedColGroup(e){let t=null;return rm(null,this.beans.colModel.getColTree(),i=>{iJ(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){let i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),n="After"===t?i3(r):r[0],o=`getCol${t}`;for(;;){let t=this.beans.visibleCols[o](n);if(!t)return null;let r=this.getColGroupAtLevel(t,i);if(r!==e)return r}}getColGroupAtLevel(e,t){let i=e.getParent();for(;!(i.getProvidedColumnGroup().getLevel()+i.getPaddingLevel()<=t);)i=i.getParent();return i}updateOpenClosedVisibility(){uk(this.beans.visibleCols.getAllTrees(),!1,e=>{sc(e)&&e.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(sc(e))return e;let i=this.beans.visibleCols.getAllTrees(),r="number"==typeof t,n=null;return uk(i,!1,i=>{sc(i)&&(r?e===i.getGroupId()&&t===i.getPartId():e===i.getGroupId())&&(n=i)}),n}createColumnGroups(e){let{columns:t,idCreator:i,pinned:r,oldDisplayedGroups:n,isStandaloneStructure:o}=e,s=this.mapOldGroupsById(n),a=[],l=t;for(;l.length;){let e=l;l=[];let t=0,n=n=>{let u=t;t=n;let d=e[u],c=(sc(d)?d.getProvidedColumnGroup():d).getOriginalParent();if(null==c){for(let t=u;t<n;t++)a.push(e[t]);return}let h=this.createColumnGroup(c,i,s,r,o);for(let t=u;t<n;t++)h.addChild(e[t]);l.push(h)};for(let i=1;i<e.length;i++){let r=e[i],o=(sc(r)?r.getProvidedColumnGroup():r).getOriginalParent(),s=e[t];o!==(sc(s)?s.getProvidedColumnGroup():s).getOriginalParent()&&n(i)}t<e.length&&n(e.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,r,n,o,s){let a=n.getUniqueKey(t.groupId||null,null),l=i2(this.beans,t,a),u=new i0(l,a,!1,i);this.createBean(u);let d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);let c=d?.group;c&&u.setExpanded(c.isExpanded());let h=rp(this.beans,l.children,i+1,e,r,n,o,s);return u.setChildren(h),u}balanceColumnTree(e,t,i,r){let n=[];for(let o=0;o<e.length;o++){let s=e[o];if(iJ(s)){let e=this.balanceColumnTree(s.getChildren(),t+1,i,r);s.setChildren(e),n.push(s)}else{let o,a;for(let e=t;e<i;e++){let t=r.getUniqueKey(null,null),i=new i0(i2(this.beans,null,t),t,!0,e);this.createBean(i),a&&a.setChildren([i]),a=i,o||(o=a)}if(o&&a){if(n.push(o),e.some(e=>iJ(e))){a.setChildren([s]);continue}a.setChildren(e);break}n.push(s)}}return n}findDepth(e){let t=0,i=e;for(;i?.[0]&&iJ(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let r=0;r<e.length;r++){let n=e[r];if(iJ(n)){let e=this.findMaxDepth(n.getChildren(),t+1);i<e&&(i=e)}}return i}balanceTreeForAutoCols(e,t){let i=[];for(let r of e){let e=r;for(let i=t-1;i>=0;i--){let t=new i0(null,`FAKE_PATH_${r.getId()}}_${i}`,!0,i);this.createBean(t),t.setChildren([e]),e.originalParent=t,e=t}0===t&&(r.originalParent=null),i.push(e)}return i}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){let r=t[i];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:i,group:r}}}createColumnGroup(e,t,i,r,n){let o=e.getGroupId(),s=t.getInstanceIdForKey(o),a=i[o+"_"+s];return a&&a.getProvidedColumnGroup()!==e&&(a=null),ev(a)?a.reset():(a=new sh(e,o,s,r),n||this.createBean(a)),a}mapOldGroupsById(e){let t={},i=e=>{for(let r of e)sc(r)&&(t[r.getUniqueId()]=r,i(r.getChildren()))};return e&&i(e),t}setupParentsIntoCols(e,t){for(let i of e??[])i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,sc(i)&&this.setupParentsIntoCols(i.getChildren(),i)}},uP={tag:"div",cls:"ag-skeleton-container"},uM=class extends rI{constructor(){super(uP)}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>eN(e.eParentOfValue)),eN(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");eL(this.getGui(),t)}setupLoading(e){let t=th({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(null!=i){let e=75+25*(i%2==0?Math.sin(i):Math.cos(i));t.style.width=`${e}%`}this.getGui().appendChild(t);let r=this.getLocaleTextFunc(),n=e.deferRender?r("ariaDeferSkeletonCellLoading","Cell is loading"):r("ariaSkeletonCellLoading","Row data is loading");eL(this.getGui(),n)}refresh(e){return!1}};function uD(e,t){if(!e)return;let i={};for(let r of Object.keys(e)){if(t&&t.indexOf(r)>=0||tF.has(r))continue;let n=e[r];"object"==typeof n&&null!==n&&n.constructor===Object?i[r]=uD(n):i[r]=n}return i}var uT=class extends tE{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,r,n=!1){let o=e.slice();t?o.sort((e,t)=>i.indexOf(e)-i.indexOf(t)):(i||n)&&o.sort((e,t)=>r.indexOf(e)-r.indexOf(t));let s=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,s,a)}buildColumnDefs(e,t=[],i=[]){let r=[],n={};for(let o of e){let e=this.createDefFromColumn(o,t,i),s=!0,a=e,l=o.getOriginalParent(),u=null;for(;l;){let e=null;if(l.isPadding()){l=l.getOriginalParent();continue}let t=n[l.getGroupId()];if(t){t.children.push(a),s=!1;break}if((e=this.createDefFromGroup(l))&&(e.children=[a],n[e.groupId]=e,a=e,l=l.getOriginalParent()),null!=l&&u===l){s=!1;break}u=l}s&&r.push(a)}return r}createDefFromGroup(e){let t=uD(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){let r=uD(e.getColDef());return r.colId=e.getColId(),r.width=e.getActualWidth(),r.rowGroup=e.isRowGroupActive(),r.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,r.pivot=e.isPivotActive(),r.pivotIndex=e.isPivotActive()?i.indexOf(e):null,r.aggFunc=e.isValueActive()?e.getAggFunc():null,r.hide=!e.isVisible()||void 0,r.pinned=e.isPinned()?e.getPinned():null,r.sort=e.getSortDef(),r.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,r}},uO=class extends tE{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){let t=e.source??"flex";null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth);let i=this.flexViewportWidth,{visibleCols:r,colDelayRenderSvc:n}=this.beans,o=r.centerCols,s=-1;if(e.resizingCols){let t=new Set(e.resizingCols);for(let e=o.length-1;e>=0;e--)if(t.has(o[e])){s=e;break}}let a=!1,l=o.map((e,t)=>{let i=e.getFlex(),r=null!=i&&i>0&&t>s;return a||(a=r),{col:e,isFlex:r,flex:Math.max(0,i??0),initialSize:e.getActualWidth(),min:e.getMinWidth(),max:e.getMaxWidth(),targetSize:0}});if(a?(n?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(n),!i||!a)return[];let u=l.length,d=l.reduce((e,t)=>e+t.flex,0),c=i,h=(e,i)=>{e.frozenSize=i,e.col.setActualWidth(i,t),c-=i,d-=e.flex,u-=1},p=e=>null!=e.frozenSize;for(let e of l)e.isFlex||h(e,e.initialSize);for(;u>0;){let e,t=Math.round(d<1?c*d:c),i=0,r=0;for(let n of l){if(p(n))continue;e=n;let o=Math.round((r+=t*(n.flex/d))-i);n.targetSize=o,i+=o}e&&(e.targetSize+=t-i);let n=0;for(let e of l){if(p(e))continue;let t=e.targetSize,i=Math.min(Math.max(t,e.min),e.max);n+=i-t,e.violationType=i===t?void 0:i<t?"max":"min",e.targetSize=i}let o=0===n?"all":n>0?"min":"max";for(let e of l)p(e)||("all"===o||e.violationType===o)&&h(e,e.targetSize)}e.skipSetLeft||r.setLeftValues(t),e.updateBodyWidths&&r.updateBodyWidths();let f=l.filter(e=>e.isFlex&&!e.violationType).map(e=>e.col);if(e.fireResizedEvent){let e=l.filter(e=>e.initialSize!==e.frozenSize).map(e=>e.col),i=l.filter(e=>e.flex).map(e=>e.col);rC(this.eventSvc,e,!0,t,i)}return this.revealColumns(n),f}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){let{flex:t,initialFlex:i}=e.colDef;void 0!==t?e.flex=t:void 0!==i&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function u_(e,t,i){if(!t||!e)return;if(!i)return e[t];let r=t.split("."),n=e;for(let e=0;e<r.length;e++){if(null==n)return;n=n[r[e]]}return n}var uA=["dateTimeString","dateString","text","number","boolean","date"],uF=class extends tE{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number:()=>({cellEditor:"agNumberCellEditor"}),boolean:()=>({cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&" "===e.event.key}),date:({formatValue:e})=>({cellEditor:"agDateCellEditor",keyCreator:e}),dateString:({formatValue:e})=>({cellEditor:"agDateStringCellEditor",keyCreator:e}),dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object:({formatValue:e,colModel:t,colId:i})=>({cellEditorParams:{useFormatter:!0},comparator:(r,n)=>{let o=t.getColDefCol(i),s=o?.getColDef();if(!o||!s)return 0;let a=null==r?"":e({column:o,node:null,value:r}),l=null==n?"":e({column:o,node:null,value:n});return a===l?0:a>l?1:-1},keyCreator:e}),text:()=>({})}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes(),t={},i={},r=e=>t=>{let{column:i,node:r,value:n}=t,o=i.getColDef().valueFormatter;return o===e.groupSafeValueFormatter&&(o=e.valueFormatter),this.beans.valueSvc.formatValue(i,r,n,o)};for(let n of Object.keys(e)){let o=e[n],s={...o,groupSafeValueFormatter:uN(o,this.gos)};t[n]=s,i[n]=r(s)}let n=this.gos.get("dataTypeDefinitions")??{},o={};for(let s of Object.keys(n)){let a=n[s],l=this.processDataTypeDefinition(a,n,[s],e);l&&(t[s]=l,a.dataTypeMatcher&&(o[s]=a.dataTypeMatcher),i[s]=r(l))}let{valueParser:s,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:u}=t.object;this.hasObjectValueParser=l!==s,this.hasObjectValueFormatter=u!==a,this.formatValueFuncs=i,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){let i={...e};for(let r of uA)delete i[r],i[r]=e[r]??t[r].dataTypeMatcher;return i}processDataTypeDefinition(e,t,i,r){let n,o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=r[o],s=t[o];if(i&&s&&(i=s),!uL(e,i,o))return;n=uI(i,e)}else{if(i.includes(o))return void t7(44);let s=t[o];if(!uL(e,s,o))return;let a=this.processDataTypeDefinition(s,t,[...i,o],r);if(!a)return;n=uI(a,e)}return{...n,groupSafeValueFormatter:uN(n,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:r}=t,{field:n}=t;if(void 0===r&&(r=e.cellDataType),(null==r||!0===r)&&(r=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(n,i)),!r){e.cellDataType=!1;return}let o=this.dataTypeDefinitions[r];return o?(e.cellDataType=r,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,r,o,i),o.columnTypes):void t7(47,{cellDataType:r})}addColumnListeners(e){if(!this.isPendingInference)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let i=e=>{t.add(e.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){let{gos:i}=this;if(!ir(i))return!1;let r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(uB(t,r))return!1;let n=null===t.type?e.type:t.type;if(n){let e=i.get("columnTypes")??{};if(rl(n).some(t=>{let i=e[t.trim()];return i&&uB(i,r)}))return!1}return!uB(e,r)}inferCellDataType(e,t){let i;if(!e)return;let r=this.getInitialData();if(r){let t=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=u_(r,e,t)}else this.initWaitForRowData(t);if(null!=i)return Object.keys(this.dataTypeMatchers).find(e=>this.dataTypeMatchers[e](i))??"object"}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];{if(this.initialData)return this.initialData;let e=this.beans.rowModel.rootNode?._leafs;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:r}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);let[n]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{let{firstRowData:o}=e;o&&(n?.(),this.isPendingInference=!1,this.processColumnsPendingInference(o,t),this.columnStateUpdatesPendingInference={},t&&i?.processResizeOperations(),r.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;let i=[];this.destroyColumnStateUpdateListeners();let r={},n={};for(let e of Object.keys(this.columnStateUpdatesPendingInference)){let o=this.columnStateUpdatesPendingInference[e],s=this.colModel.getCol(e);if(!s)return;let a=s.getColDef();if(!this.resetColDefIntoCol(s,"cellDataTypeInferred"))return;let l=s.getColDef();if(t&&l.type&&l.type!==a.type){let t=function(e,t){let i=rR(e);for(let e of t)delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex;return i}(s,o);t.rowGroup&&null==t.rowGroupIndex&&(r[e]=t),t.pivot&&null==t.pivotIndex&&(n[e]=t),i.push(t)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(r,n)),i.length&&rx(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={},{rowGroupColsSvc:r,pivotColsSvc:n}=this.beans;return r?.restoreColumnOrder(i,e),n?.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){let i=e.getUserProvidedColDef();if(!i)return!1;let r=rg(this.beans,i,e.getColId());return e.setColDef(r,i,t),!0}getDateStringTypeDefinition(e){let{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return"dateTime"===e||"dateTimeString"===e}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;let i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!!(!i||e.getColDef().allowFormula&&this.beans.formula?.isFormula(t))||i(t)}validateColDef(e){let t=e=>t7(48,{property:e});if("object"===e.cellDataType){let{object:i}=this.dataTypeDefinitions;e.valueFormatter!==i.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){let t=e.cellDataType;if(!t||"string"!=typeof t)return;let{dataTypeDefinitions:i,beans:r,formatValueFuncs:n}=this,o=i[t];o&&r.colFilter?.setColDefPropsForDataType(e,o,n[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,r){let n=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:r,formatValue:n});Object.assign(e,o)}getDateObjectTypeDef(e){let t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:e=>nX(e.newValue&&String(e.newValue)),valueFormatter:e=>null==e.value?"":!(e.value instanceof Date)||isNaN(e.value.getTime())?t("invalidDate","Invalid Date"):nG(e.value,i)??"",dataTypeMatcher:e=>e instanceof Date}}getDateStringTypeDef(e){let t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:e=>nX(e)??void 0,dateFormatter:e=>nG(e??null,t)??void 0,valueParser:e=>nQ(String(e.newValue))?e.newValue:null,valueFormatter:e=>nQ(String(e.value))?String(e.value):"",dataTypeMatcher:e=>"string"==typeof e&&nQ(e)}}getDefaultDataTypes(){let e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>e.newValue?.trim?.()===""?null:Number(e.newValue),valueFormatter:t=>null==t.value?"":"number"!=typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:e=>"number"==typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:eb(e.newValue),dataTypeMatcher:e=>"string"==typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:e.newValue?.trim?.()===""?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"==typeof e},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:e=>"string"==typeof e&&nQ(e,!0)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>eb(e.value)??""}}}destroyColumnStateUpdateListeners(){for(let e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function uI(e,t){let i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...rl(e.columnTypes),...rl(t.columnTypes)]),i}function uL(e,t,i){return t?t.baseDataType===e.baseDataType||(t7(46),!1):(t7(45,{parentCellDataType:i}),!1)}function uN(e,t){if(e.valueFormatter)return i=>{if(i.node?.group){let t=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(t){if("first"===t||"last"===t)return e.valueFormatter(i);if("number"===e.baseDataType&&"count"!==t){if("number"==typeof i.value)return e.valueFormatter(i);if("object"==typeof i.value){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&"string"==typeof i.value&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}function uB(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,r])=>(function(e,t,i,r){if(!t[i])return!1;let n=e[i];return null===n?(t[i]=!1,!1):void 0===r?!!n:n===r})(e,t,i,r))}var uV={moduleName:"ColumnApi",version:tZ,beans:[uT],apiFunctions:{getColumnDef:function(e,t){let i=e.colModel.getColDefCol(t);return i?i.getColDef():null},getDisplayNameForColumn:function(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""},getColumn:function(e,t){return e.colModel.getColDefCol(t)},getColumns:function(e){return e.colModel.getColDefCols()},applyColumnState:function(e,t){return rx(e,t,"api")},getColumnState:function(e){return rk(e)},resetColumnState:function(e){!function(e,t){let{colModel:i,autoColSvc:r,selectionColSvc:n,eventSvc:o,gos:s}=e,a=i.getColDefCols();if(!a?.length)return;let l=ri(i.getColDefColTree()),u=[],d=1e3,c=1e3,h=e=>{let t=rR(e);ey(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=d++),ey(t.pivotIndex)&&t.pivot&&(t.pivotIndex=c++),u.push(t)};r?.getColumns()?.forEach(h),n?.getColumns()?.forEach(h),l?.forEach(h),rx(e,{state:u},"api");let p=r?.getColumns()??[];rx(e,{state:[...n?.getColumns()??[],...p,...a].map(e=>({colId:e.colId})),applyOrder:!0},"api"),o.dispatchEvent(iB(s,{type:"columnsReset",source:"api"}))}(e,0)},isPinning:function(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()},isPinningLeft:function(e){return e.visibleCols.isPinningLeft()},isPinningRight:function(e){return e.visibleCols.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleCols.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleCols.getColBefore(t)},setColumnsVisible:function(e,t,i){e.colModel.setColsVisible(t,i,"api")},setColumnsPinned:function(e,t,i){e.pinnedCols?.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.colModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleCols.leftCols},getDisplayedCenterColumns:function(e){return e.visibleCols.centerCols},getDisplayedRightColumns:function(e){return e.visibleCols.rightCols},getAllDisplayedColumns:function(e){return e.visibleCols.allCols},getAllDisplayedVirtualColumns:function(e){return e.colViewport.getViewportColumns()},getColumnDefs:function(e){return e.colModel.getColumnDefs(!0)}}},uH=class extends tE{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;let r=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:n}=this.beans;return i&&n?n.getHeaderName(e,r):r}getDisplayNameForProvidedColumnGroup(e,t,i){let r=t?.getColGroupDef();return r?this.getHeaderName(r,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,r,n){let o=e.headerValueGetter;if(o){let s=iB(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:r,location:n});if("function"==typeof o)return o(s);if("string"==typeof o)return this.beans.expressionSvc?.evaluate(o,s)??null}else if(null!=e.headerName)return e.headerName;else if(e.field){var s;return(s=e.field)&&null!=s?s.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):"")).join(" "):null}return""}},uz=class extends tE{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){let{visibleCols:r}=this,n=r.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,r.isBodyWidthDirty=!0,this.gos.get("enableRtl")){let i=r.bodyWidth;this.viewportLeft=i-t-e,this.viewportRight=i-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i??[]}extractViewportColumns(){let e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!!(e.isAutoHeaderHeight()||function(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}(e))||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,i=t+e.getActualWidth(),r=this.viewportLeft-200,n=this.viewportRight+200;return!(t<r&&i<r)&&!(t>n&&i>n)}getViewportColumns(){let{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let t=e=>{let t=e.getLeft();return ev(t)&&t>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:r}=this,n=r.centerCols;return r.getColsForRow(e,n,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){let{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;let i=e=>{let t=new Set,i={};for(let r of e){let e=r.getParent(),n=r.isSpanHeaderHeight();for(;e&&!t.has(e);){if(n&&e.isPadding()){e=e.getParent();continue}let r=e.getProvidedColumnGroup().getLevel();i[r]??(i[r]=[]),i[r].push(e),t.add(e),e=e.getParent()}}return i};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){this.extractViewportColumns();let e=this.getViewportColumns().map(e=>`${e.getId()}-${e.getPinned()||"normal"}`).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},uj=class extends tE{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){return e.cellRenderer?class{refresh(){return!1}getGui(){return this.eGui}init(e){let i=t(e),r=typeof i;if("string"===r||"number"===r||"boolean"===r){this.eGui=e7("<span>"+i+"</span>");return}if(null==i){this.eGui=th({tag:"span"});return}this.eGui=i}}:null}},uG=class extends oZ{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){let e=this.gos.get("components");if(null!=e)for(let t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){let{icons:t,userComponents:i,dynamicBeans:r,selectors:n}=e;if(i){let e=(e,t,i,r)=>{this.agGridDefaults[e]=t,(i||r)&&(this.agGridDefaultOverrides[e]={params:i,processParams:r})};for(let t of Object.keys(i)){var o;let r=i[t];if("object"==typeof(o=r)&&o.getComp&&(r=r.getComp(this.beans)),"object"==typeof r){let{classImp:i,params:n,processParams:o}=r;e(t,i,n,o)}else e(t,r)}}for(let e of(this.registerDynamicBeans(r),n??[]))this.selectors[e.selector]=e;if(t)for(let e of Object.keys(t))this.icons[e]=t[e]}getUserComponent(e,t){let i=(e,t,i,r)=>({componentFromFramework:t,component:e,params:i,processParams:r}),{frameworkOverrides:r}=this.beans,n=r.frameworkComponent(t,this.gos.get("components"));if(null!=n)return i(n,!0);let o=this.jsComps[t];if(o){let e=r.isFrameworkComponent(o);return i(o,e)}let s=this.agGridDefaults[t];if(s){let e=this.agGridDefaultOverrides[t];return i(s,!1,e?.params,e?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?it(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??it(256)}},uW=class extends tE{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(let e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let e=Object.values(this.params);this.ready=23===e.length&&e.every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},uU={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:oC,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:oS,rangeSelectionBackgroundColor:oy(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:oy(.5),rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08,onto:"headerBackgroundColor"},rowNumbersSelectedColor:oy(.5),rowHoverColor:oy(.08),columnHoverColor:oy(.05),selectedRowBackgroundColor:oy(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:oC,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:ob(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:ob(.1),iconButtonActiveColor:oS,iconButtonActiveBackgroundColor:oy(.28),iconButtonActiveIndicatorColor:oS,menuBorder:{color:ob(.2)},menuBackgroundColor:ow(.03),menuTextColor:ow(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ob(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:oS},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:ob(.2)},panelBackgroundColor:oC,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:ob(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ob(.13)},selectCellBackgroundColor:ob(.07),selectCellBorder:{color:ob(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:oC,filterPanelApplyButtonBackgroundColor:oS,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:ox,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:ox,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:ob(.15),statusBarLabelColor:ox,statusBarLabelFontWeight:500,statusBarValueColor:ox,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},u$={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},uq={...u$,cellBatchEditTextColor:"#f3d0b3"},uK=oh({feature:"batchEditStyle",params:u$,css:".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}"}),uQ=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",uX={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},uY=(oh({feature:"buttonStyle",params:uX,css:uQ}),oh({feature:"buttonStyle",params:{...uX,buttonBackgroundColor:oC,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:oS}},css:uQ})),uZ=(oh({feature:"buttonStyle",params:{...uX,buttonBackgroundColor:oC,buttonBorder:{color:oS},buttonFontWeight:600,buttonTextColor:oS,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBackgroundColor:oS,buttonActiveTextColor:oC},css:uQ}),oh({feature:"buttonStyle",params:{...uX,buttonBorder:{color:ox,width:2,style:"outset"},buttonActiveBorder:{color:ox,width:2,style:"inset"},buttonBackgroundColor:ow(.07),buttonHoverBackgroundColor:oC,buttonVerticalPadding:{calc:"spacing * 0.5"}},css:uQ}),oh({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}"})),uJ=(oh({feature:"columnDropStyle",css:".ag-column-drop-vertical-empty-message{color:var(--ag-subtle-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600;padding-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-empty-message{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing));padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-empty-message{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing))}"}),{warn:(...e)=>{t7(e[0],e[1])},error:(...e)=>{t9(e[0],e[1])},preInitErr:(...e)=>{ie(e[0],e[2],e[1])}}),u0=oh({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:oC,checkboxUncheckedBorderColor:ow(.3),checkboxCheckedBackgroundColor:oS,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:oC,checkboxIndeterminateBackgroundColor:ow(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:oC,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:'.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}'}),u1=()=>({...ok,...uq,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:ow(.05),rowHoverColor:oy(.15),selectedRowBackgroundColor:oy(.2),menuBackgroundColor:ow(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:ox,findMatchColor:oC,findActiveMatchColor:oC,checkboxUncheckedBorderColor:ow(.4),toggleButtonOffBackgroundColor:ow(.4),rowBatchEditBackgroundColor:ow(.1)}),u2=oh({feature:"colorScheme",params:ok,modeParams:{light:ok,dark:u1(),"dark-blue":{...u1(),backgroundColor:"#1f2836"}}}),u5={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},u3={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},u4=(e,t=1.5)=>{let i=u3[e];if(i)return i;let r=u5[e];if(!r)throw Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+r+"</svg>"},u8=((e={})=>oh({feature:"iconSet",css:()=>((e={})=>{let t="";for(let i of[...Object.keys(u5),...Object.keys(u3)]){let r=u4(i,e.strokeWidth);t+=`.ag-icon-${i}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(r)}'); }
`}return t})(e)}))(),u6=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select,.ag-floating-filter-search-icon){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',u7={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},u9=oh({feature:"inputStyle",params:{...u7,inputBackgroundColor:oC,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:oS},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:ow(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>u6+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}"}),de=(oh({feature:"inputStyle",params:{...u7,inputBackgroundColor:"transparent",inputBorder:{width:2,color:ob(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}},css:()=>u6+".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){border-left:none;border-right:none;border-top:none}"}),'.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}'),dt={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},di=oh({feature:"tabStyle",params:{...dt,tabBarBorder:!0,tabBarBackgroundColor:ob(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:oC},css:de}),dr=(oh({feature:"tabStyle",params:{...dt,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0},css:de}),oh({feature:"tabStyle",params:{...dt,tabBarBorder:!0,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabHoverTextColor:oS,tabSelectedTextColor:oS,tabSelectedUnderlineColor:oS,tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:"0.3s"},css:de}),oh({feature:"tabStyle",params:{...dt,tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabBarHorizontalPadding:{ref:"spacing"},tabBarTopPadding:{ref:"spacing"},tabBarBorder:!0,tabHorizontalPadding:{calc:"spacing * 2"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:{ref:"spacing"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:oC},css:()=>de+".ag-tab{border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;border-top:var(--ag-tab-selected-border-width) solid transparent;flex:none;&.ag-tab-selected{border-left-color:var(--ag-tab-selected-border-color);border-right-color:var(--ag-tab-selected-border-color);border-top-color:var(--ag-tab-selected-border-color);margin-bottom:-1px;padding-bottom:calc(var(--ag-tab-bottom-padding) + 1px)}}"}),new oB(uJ).withParams(uU).withPart(uY).withPart(uZ).withPart(uK).withPart(u0).withPart(u2).withPart(u8).withPart(di).withPart(u9).withPart(uZ).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]})),dn=(oh({feature:"styleMaterial",css:".ag-dnd-ghost,.ag-filter-toolpanel-header,.ag-filter-toolpanel-search,.ag-multi-filter-group-title-bar,.ag-panel-title-bar-title,.ag-status-bar{color:var(--ag-header-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600}.ag-column-drop-horizontal{background-color:color-mix(in srgb,var(--ag-background-color),var(--ag-foreground-color) 8%)}.ag-cell.ag-cell-inline-editing{background-color:var(--ag-background-color);background-image:linear-gradient(0deg,var(--ag-input-background-color),var(--ag-input-background-color));border:var(--ag-input-border)!important;border-width:1px!important;height:calc(var(--ag-row-height) + var(--ag-spacing)*3);padding:var(--ag-spacing);:where(.ag-row-last:not(.ag-row-first)) &{bottom:0}:where(.ag-has-focus) &{border:var(--ag-input-focus-border)!important;border-width:1px!important}}.ag-advanced-filter-builder-button,.ag-standard-button{text-transform:uppercase}.ag-status-bar{border:solid var(--ag-border-width) var(--ag-border-color)}.ag-list-item-hovered:after{background-color:var(--ag-primary-color)}.ag-pill-button:hover{color:var(--ag-primary-color)}.ag-filter-add-button,.ag-filter-add-button:hover{border-bottom:2px solid var(--ag-primary-color)}",params:n={...r={tabSelectedUnderlineColor:{ref:"primaryColor"},sideButtonSelectedUnderlineColor:{ref:"primaryColor"},buttonTextColor:{ref:"primaryColor"},rangeSelectionBackgroundColor:{ref:"primaryColor",mix:.2},rangeSelectionBorderColor:{ref:"primaryColor"},rangeSelectionHighlightColor:{ref:"primaryColor",mix:.5},rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08},rowNumbersSelectedColor:{ref:"primaryColor",mix:.5},inputFocusBorder:{width:2,color:{ref:"primaryColor"}},pickerButtonFocusBorder:{width:1,color:{ref:"primaryColor"}},cellEditingBorder:{color:{ref:"primaryColor"}},menuBackgroundColor:{ref:"backgroundColor"},sideButtonBarBackgroundColor:oC,sideButtonSelectedBackgroundColor:"transparent",sideButtonBarTopPadding:{calc:"spacing * 4"},headerColumnResizeHandleColor:"none",headerBackgroundColor:{ref:"backgroundColor"},rowHoverColor:ob(.08),columnHoverColor:ob(.08),headerCellHoverBackgroundColor:ob(.05),statusBarLabelColor:ob(.63),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,valueChangeValueHighlightBackgroundColor:"#00acc1",panelTitleBarIconColor:ox,advancedFilterBuilderButtonBarBorder:!1,filterPanelApplyButtonColor:{ref:"buttonTextColor"},filterPanelApplyButtonBackgroundColor:{ref:"buttonBackgroundColor"},colorPickerThumbSize:13,colorPickerTrackSize:11,colorPickerThumbBorderWidth:2,colorPickerTrackBorderRadius:2,colorPickerColorBorderRadius:2,rowDragIndicatorColor:{ref:"primaryColor"},columnDragIndicatorColor:{ref:"primaryColor"}},primaryColor:"#3f51b5",foregroundColor:"#000D",headerTextColor:"#0008",accentColor:"#ff4081",checkboxUncheckedBorderColor:ox,checkboxIndeterminateBackgroundColor:ox,toggleButtonOffBackgroundColor:ox,selectedRowBackgroundColor:"rgba(33, 150, 243, 0.3)"},modeParams:{light:n,dark:o={...r,primaryColor:"#3f51b5",foregroundColor:"#fffD",headerTextColor:"#fff8",accentColor:"#bb86fc",checkboxUncheckedBorderColor:ow(.5),checkboxIndeterminateBackgroundColor:ow(.5),toggleButtonOffBackgroundColor:ow(.5),selectedRowBackgroundColor:"#bb86fc33"},"dark-blue":o}}),{cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16}),ds={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},da={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},dl={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},du={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},dd={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},dc={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},dh=class extends oQ{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(dl),this.getSizeEl(du),this.getSizeEl(dd),this.getSizeEl(dc),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(dc)}getRowBorderWidth(){return this.getCSSVariablePixelValue(dd)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(dl)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(du)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(dn)}getCellPaddingLeft(){let e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(ds);return e-1+this.getCSSVariablePixelValue(da)*t}getCellPadding(){let e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){let{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(null==i||isNaN(i)||!isFinite(i))return null!==t&&e.style.setProperty("--ag-line-height",null),-1;let r=`${i}px`;return t!=r?(e.style.setProperty("--ag-line-height",r),i):""!=t?Number.parseFloat(t):-1}fireStylesChangedEvent(e){"rowBorderWidthChanged"===e&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){let e=this.getCSSVariablePixelValue(dd);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&(t?t9(106):t9(239))}getAdditionalCss(){let e=new Map;for(let t of(e.set("core",['.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}:where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}}:where(.ag-ltr) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{right:-1px}}:where(.ag-rtl) :where(.ag-filter-active,.ag-filter-toolpanel-group-instance-header-icon,.ag-filter-toolpanel-instance-header-icon){&:after{left:-1px}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}']),Array.from(new Set(tW)).sort((e,t)=>e.moduleName.localeCompare(t.moduleName)))){let i=t.css;i&&e.set(`module-${t.moduleName}`,i)}return e}getDefaultTheme(){return dr}varError(e){t7(9,{variable:e})}themeError(e){t9(240,{theme:e})}shadowRootError(){t9(293)}},dp=class extends oJ{postConstruct(){let{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function df(e,t,i){let r=e.visibleCols.headerGroupRowCount;if(i>=r)return{column:t,headerRowIndex:i};let n=t.getParent();for(;n&&n.getProvidedColumnGroup().getLevel()>i;)n=n.getParent();let o=t.isSpanHeaderHeight();return!n||o&&n.isPadding()?{column:t,headerRowIndex:r}:{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var dg=class extends tE{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){let e=this.beans;e.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl});let t=eM(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i,{colModel:r,colGroupSvc:n,ctrlsSvc:o}=this.beans;if("string"==typeof e?(i=r.getCol(e))||(i=n?.getColumnGroup(e)??null):i=e,!i)return null;let s=o.getHeaderRowContainerCtrl(),a="filter"===i3(s?.getAllCtrls()||[]).type,l=aH(this.beans)-1,u=-1,d=i;for(;d;)u++,d=d.getParent();let c=u;return t&&a&&c===l-1&&c++,-1===c?null:{headerRowIndex:c,column:i}}navigateVertically(e,t){let{focusSvc:i,visibleCols:r}=this.beans,{focusedHeader:n}=i;if(!n)return!1;let{headerRowIndex:o}=n,s=n.column,a=aH(this.beans),l=this.getHeaderRowType(o),u=r.headerGroupRowCount,{headerRowIndex:d,column:c,headerRowIndexWithoutSpan:h}="UP"===e?function(e,t,i){let r=i-1;if("filter"!==e){let e=t instanceof iU&&t.isSpanHeaderHeight(),i=t.getParent();for(;i&&(i.getProvidedColumnGroup().getLevel()>r||e&&i.isPadding());)i=i.getParent();if(i)if(e)return{column:i,headerRowIndex:i.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:r};else return{column:i,headerRowIndex:r,headerRowIndexWithoutSpan:r}}return{column:t,headerRowIndex:r,headerRowIndexWithoutSpan:r}}(l,s,o):function(e,t,i){let r=t+1,n={column:e,headerRowIndex:r,headerRowIndexWithoutSpan:r};if(e instanceof sh){if(r>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:r};let t=e.getDisplayedChildren()[0];if(t instanceof sh&&t.isPadding()){let e=t.getDisplayedLeafColumns()[0];e.isSpanHeaderHeight()&&(t=e)}n.column=t,t instanceof iU&&t.isSpanHeaderHeight()&&(n.headerRowIndex=i,n.headerRowIndexWithoutSpan=r)}return n}(s,o,u),p=!1;return d<0&&(d=0,c=s,p=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):void 0!==h&&(this.currentHeaderRowWithoutSpan=h),(!!p||!!c)&&i.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:c},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,i){let r,n,{focusSvc:o,gos:s}=this.beans,a={...o.focusedHeader};-1!==this.currentHeaderRowWithoutSpan?a.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=a.headerRowIndex,n="LEFT"===e!==s.get("enableRtl")?"Before":"After",r=this.findHeader(a,n);let l=s.getCallback("tabToNextHeader");if(t&&l){let e=o.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:n});if(e){let{headerRowIndex:e}=o.focusedHeader||{};null!=e&&e!=a.headerRowIndex&&(this.currentHeaderRowWithoutSpan=e)}return e}return r||!t?o.focusHeaderPosition({headerPosition:r,direction:n,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(a,n,i)}focusNextHeaderRow(e,t,i){let r,n=this.beans,o=e.headerRowIndex,s=null,a=aH(n),l=this.beans.visibleCols.allCols;if("Before"===t){if(o<=0)return!1;s=i3(l),r=o-1,this.currentHeaderRowWithoutSpan-=1}else s=l[0],r=o+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:u,headerRowIndex:d}=df(this.beans,s,r);return d>=a&&(d=-1),n.focusSvc.focusHeaderPosition({headerPosition:{column:u,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){let i;if(!e.getPinned()){if(sc(e)){let r=e.getDisplayedLeafColumns();i="Before"===t?i3(r):r[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}}findHeader(e,t){let{colGroupSvc:i,visibleCols:r}=this.beans,n=e.column;if(n instanceof sh){let e=n.getDisplayedLeafColumns();n="Before"===t?e[0]:e[e.length-1]}let o="Before"===t?r.getColBefore(n):r.getColAfter(n);if(!o)return;let s=r.headerGroupRowCount;if(e.headerRowIndex>=s)return{headerRowIndex:e.headerRowIndex,column:o};let a=i?.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:r.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof iU&&o.isSpanHeaderHeight()?r.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){let t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}},dm=class extends tE{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){let e,t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.addDestroyFunc((e=eM(this.beans),nk>0||(e.addEventListener("keydown",nR),e.addEventListener("mousedown",nR)),nk++,()=>{--nk>0||(e.removeEventListener("keydown",nR),e.removeEventListener("mousedown",nR))}))}attemptToRecoverFocus(){this.needsFocusRestored=!0,null!=this.focusFallbackTimeout&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,null!=this.focusFallbackTimeout&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;let e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){let{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return!this.gos.get("suppressFocusAfterRefresh")&&this.focusedHeader&&this.isDomDataPresentInHierarchy(eP(this.beans),aQ)?this.focusedHeader:null}doesRowOrCellHaveBrowserFocus(){let e=eP(this.beans);return!!this.isDomDataPresentInHierarchy(e,s6)||this.isDomDataPresentInHierarchy(e,s7)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(ih(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){let{rowIndex:t,rowPinned:i,column:r}=e,n={rowIndex:t,rowPinned:i,column:r,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(n.isFullWidthCell=o.isFullWidth()),n}clearFocusedCell(){if(null==this.focusedCell)return;let e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();let{column:t,rowIndex:i,rowPinned:r,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:s}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:i,rowPinned:em(r),column:a};let l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:n,preventScrollOnBrowserFocus:o,sourceEvent:s}),this.previousCellFocusParams=l}isCellFocused(e){return null!=this.focusedCell&&aO(e,this.focusedCell)}isHeaderWrapperFocused(e){if(null==this.focusedHeader)return!1;let{column:t,rowCtrl:{rowIndex:i,pinned:r}}=e,{column:n,headerRowIndex:o}=this.focusedHeader;return t===n&&i===o&&r==n.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),aN(this.beans))return!1;let{direction:t,fromTab:i,allowUserOverride:r,event:n,fromCell:o,rowWithoutSpanValue:s,scroll:a=!0}=e,{headerPosition:l}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(r){let e=this.focusedHeader,r=aH(this.beans);if(i){let i=this.gos.getCallback("tabToNextHeader");i&&(l=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:l,headerRowCount:r}))}else{let t=this.gos.getCallback("navigateToNextHeader");t&&n&&(l=t({key:n.key,previousHeaderPosition:e,nextHeaderPosition:l,headerRowCount:r,event:n}))}}return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:n,fromCell:o,rowWithoutSpanValue:s,scroll:a})}focusHeaderPositionFromUserFunc(e){if(aN(this.beans))return!1;let{userFunc:t,headerPosition:i,direction:r,event:n}=e,o=this.focusedHeader,s=aH(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:r,currentPosition:o,headerPosition:i,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:r,event:n})}getHeaderPositionFromUserFunc(e){let{userFunc:t,direction:i,currentPosition:r,headerPosition:n,headerRowCount:o}=e,s=t({backwards:"Before"===i,previousHeaderPosition:r,nextHeaderPosition:n,headerRowCount:o});return!0===s?r:!1===s?null:s}focusProvidedHeaderPosition(e){var t,i;let{headerPosition:r,direction:n,fromCell:o,rowWithoutSpanValue:s,event:a,scroll:l=!0}=e,{column:u,headerRowIndex:d}=r,{filterManager:c,ctrlsSvc:h,headerNavigation:p}=this.beans;if(this.focusedHeader&&(t=e.headerPosition,i=this.focusedHeader,t.headerRowIndex===i.headerRowIndex&&t.column===i.column))return!1;if(-1===d)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(r):this.focusGridView({column:u,event:a});l&&p?.scrollToColumn(u,n);let f=h.getHeaderRowContainerCtrl(u.getPinned()),g=f?.focusHeader(r.headerRowIndex,u,a)||!1;return p&&g&&(null!=s||o)&&(p.currentHeaderRowWithoutSpan=s??-1),g}focusFirstHeader(){if(this.overlays?.exclusive&&this.focusOverlay())return!0;let e=this.visibleCols.allCols[0];if(!e)return!1;let t=df(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.exclusive&&this.focusOverlay(!0))return!0;let t=aH(this.beans)-1,i=i3(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return null!=this.focusedCell&&this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===em(t)}focusOverlay(e){let t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&nP(t,e)}focusGridView(e){let{backwards:t=!1,canFocusOverlay:i=!0,event:r}=e;if(this.overlays?.exclusive)return i&&this.focusOverlay(t);if(aB(this.beans))return t&&!aN(this.beans)?this.focusLastHeader():!!(i&&this.focusOverlay(t))||!t&&aV(this.beans,t);let n=t?function(e){let t,i=null,{pinnedRowModel:r,pageBounds:n}=e,o=r?.getPinnedBottomRowCount(),s=r?.getPinnedTopRowCount();return o?(i="bottom",t=o-1):e.rowModel.getRowCount()?t=n.getLastRow():s&&(i="top",t=s-1),void 0===t?null:{rowIndex:t,rowPinned:i}}(this.beans):function(e){let t,i=0,{pinnedRowModel:r,rowModel:n,pageBounds:o}=e;return r?.getPinnedTopRowCount()?t="top":n.getRowCount()?(t=null,i=o.getFirstRow()):r?.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:i,rowPinned:t}}(this.beans);if(n){let i=e.column??this.focusedHeader?.column,{rowIndex:o,rowPinned:s}=n,a=a_(this.beans,n);if(!i||!a||null==o)return!1;if(i.isSuppressNavigable(a)){let e,t=this.gos.get("enableRtl");return e=r&&"Tab"!==r.key?r.key:t?ne:ni,this.beans.navigation?.navigateToNextCell(null,e,{rowIndex:o,column:i,rowPinned:s||null},!0),!0}if(this.navigation?.ensureCellVisible({rowIndex:o,column:i,rowPinned:s}),t){let e=this.rowRenderer.getRowByPosition(n);if(e?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(n,t))return!0}return this.setFocusedCell({rowIndex:o,column:i,rowPinned:em(s),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:o,rowPinned:s,column:i}),!0}return!!(i&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){let i=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:aH(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},dv=class extends tE{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=!0===this.gos.get("alwaysShowHorizontalScroll"),this.verticalScrollShowing=!0===this.gos.get("alwaysShowVerticalScroll"),this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(null==this.scrollbarWidth){let e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:(null==y&&nC(),y);null!=t&&(this.scrollbarWidth=t,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},dy=class extends tE{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),i.destroy(),super.destroy()}},db=new Set(["gridPreDestroyed","fillStart","pasteStart"]),dw=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"].reduce((e,t)=>(e[t]=t&&!(t.length<2)?"on"+t[0].toUpperCase()+t.substring(1):t,e),{}),dC={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function dx(e){return`"${e}"`}var dS={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?"string"==typeof e?dC[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>"string"!=typeof e?null:dC[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&"string"!=typeof e&&"boolean"!=typeof e?"CustomFilter":"string"==typeof e?dC[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(e=>t.includes(e))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},dk={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0,allowFormula:void 0},dR=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],dE=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","activeOverlayParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","formulaDataSource","formulaFuncs","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],dP=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","suppressOverlays"],dM=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],dD=["theme","rowSelection"],dT=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],dO=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","refreshAfterGroupEdit","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows","animateColumnResizing"],d_=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","overlayComponent","loadingOverlayComponent","noRowsOverlayComponent","overlayComponentSelector","activeOverlay","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"];function dA(e,t,i){return"number"==typeof t||null==t?null==t||t>=i?null:`${e}: value should be greater than or equal to ${i}`:`${e}: value should be a number`}var dF={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},dI=0,dL=0,dN="__ag_grid_instance",dB=class extends tE{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=dL++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new eg,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;let r=db.has(t);if(r&&!e||!r&&e||!dw[t])return;let n=(e,t)=>{let i=dw[e],r=this.gridOptions[i];"function"==typeof r&&this.beans.frameworkOverrides.wrapOutgoing(()=>r(t))};if(this.gridReadyFired)n(t,i);else if("gridReady"===t){for(let e of(n(t,i),this.gridReadyFired=!0,this.queueEvents))n(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??tV[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return ev(this.gridOptions[e])}mergeGridCommonParams(e){return e?t=>e(this.addCommon(t)):e}updateGridOptions({options:e,force:t,source:i="api"}){let r={id:dI++,properties:[]},n=[],{gridOptions:o,validation:s}=this;for(let a of Object.keys(e)){let l=tN.applyGlobalGridOption(a,e[a]);s?.warnOnInitialPropertyUpdate(i,a);let u=t||"object"==typeof l&&"api"===i,d=o[a];if(u||d!==l){o[a]=l;let e={type:a,currentValue:l,previousValue:d,changeSet:r,source:i};n.push(e)}}for(let e of(this.validateGridOptions(this.gridOptions),r.properties=n.map(e=>e.type),n))tz(this,`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propEventSvc.dispatchEvent(e)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(let i of Object.keys(e)){let r=e[i];if(null==r||!1===r)continue;let n=t[i];"function"==typeof n&&(n=n(e,this.gridOptions,this.beans)),n&&this.assertModuleRegistered(n,i)}}validateGridOptions(e){this.validateOptions(e,dF),this.validation?.processGridOptions(e)}validateColDef(e,t,i){(i||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,dS),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){let i=Array.isArray(e)?e.some(e=>this.isModuleRegistered(e)):this.isModuleRegistered(e);return i||t9(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:tK,rowModelType:this.get("rowModelType"),isUmd:!1}}isModuleRegistered(e){return tX(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[dN]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){let e=t[dN];if(ev(e))return e===this.instanceId;t=t.parentElement}return!1}},dV=class extends tE{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){let{sortSvc:t,rangeSvc:i,gos:r}=this.beans;if(!iM(r)||e.altKey){if(this.column.isSortable()){let i=this.column.isMoving(),r=Date.now()-this.lastMovingChanged<50;i||r||t?.progressSortFromEvent(this.column,e)}}else i?.handleColumnSelection(this.column,e)}},dH=class extends rI{constructor(){super(...arguments),this.eFilter=null,this.eFilterButton=null,this.eSortIndicator=null,this.eMenu=null,this.eLabel=null,this.eText=null,this.eColRef=null,this.eSortOrder=null,this.eSortAsc=null,this.eSortDesc=null,this.eSortMixed=null,this.eSortNone=null,this.eSortAbsoluteAsc=null,this.eSortAbsoluteDesc=null,this.isLoadingInnerComponent=!1}refresh(e){let t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||null!=this.currentSuppressMenuHide&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){let t={...e};tI(t,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(t)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){var i;let r,{formula:n}=this.beans,o=e.template;return o?o?.trim?o.trim():o:(i=!!n?.active,{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:r={"aria-hidden":"true"}},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:r},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[i?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:r},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]})}init(e){this.params=e;let{sortSvc:t,touchSvc:i,rowNumbersSvc:r,userCompFactory:n}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new dV(e.column,this.eLabel)))),i?.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),r?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){let i=e.getCompDetails(t,rG,void 0,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderComponent=e,this.eText&&this.eText.appendChild(e.getGui())):this.destroyBean(e))}))}setDisplayName(e){let{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent||(this.eText.textContent=eS(t))}addInIcon(e,t,i){let r=a6(e,this.beans,i);r&&t.appendChild(r)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){e4(this.eMenu),this.eMenu=void 0;return}let{gos:e,eMenu:t,params:i}=this,r=iN(e);this.addInIcon(r?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!r);let n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){let{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){let{params:t,gos:i,beans:r,eMenu:n,eFilterButton:o}=this,s=t.column,a=iN(i);if(e&&!a){if(r.menuSvc?.isFilterMenuInHeaderEnabled(s))return t.showFilter(o??n??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(n??o??this.getGui()),!0;return!1}setupSort(){let{sortSvc:e}=this.beans;if(!e)return;let{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));let{eSortIndicator:t,eSortOrder:i,eSortAsc:r,eSortDesc:n,eSortMixed:o,eSortNone:s,eSortAbsoluteAsc:a,eSortAbsoluteDesc:l}=this;t.attachCustomElements(i,r,n,o,s,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i)}setupColumnRefIndicator(){let{eColRef:e,beans:{editModelSvc:t},params:i}=this;e&&(this.currentRef=i.column.formulaRef,e.textContent=this.currentRef,eq(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{let i=t?.getEditPositions();eq(e,!!this.currentRef&&!!i?.some(e=>e.column.isAllowFormula()))},cellEditingStopped:()=>{eq(e,!1)}}))}setupFilterIcon(){let{eFilter:e,params:t}=this;e&&this.configureFilter(t.enableFilterIcon,e,()=>{eq(e,t.column.isFilterActive(),{skipAriaHidden:!0})},"filterActive")}setupFilterButton(){let{eFilterButton:e,params:t}=this;e&&(this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0)}configureFilter(e,t,i,r){if(!e)return e4(t),!1;let n=this.params.column;return this.addInIcon(r,t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){let{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},dz={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},dj=class extends rI{constructor(){super(dz),this.agOpened=null,this.agClosed=null,this.agLabel=null,this.isLoadingInnerComponent=!1}init(e){let{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),i?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&t7(89)}workOutInnerHeaderGroupComponent(e,t){let i=e.getCompDetails(t,rW,void 0,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(e=>{this.isLoadingInnerComponent=!1,e&&(this.isAlive()?(this.innerHeaderGroupComponent=e,this.agLabel.appendChild(e.getGui())):this.destroyBean(e))}))}setupExpandIcons(){let{agOpened:e,agClosed:t,params:{columnGroup:i},beans:{colGroupSvc:r}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);let n=e=>{if(sU(e))return;let t=!i.isExpanded();r.setColumnGroupOpened(i.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(t,n),this.addTouchAndClickListeners(e,n);let o=e=>{sW(e)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:n}),this.updateIconVisibility();let s=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t){this.beans.touchSvc?.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){let{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){let r=i.isExpanded();eq(e,r),eq(t,!r)}else eq(e,!1),eq(t,!1)}addInIcon(e,t){let i=a6(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){let{agOpened:e,agClosed:t}=this;eq(e,!1),eq(t,!1)}}setupLabel(e){let{displayName:t,columnGroup:i}=e,{innerHeaderGroupComponent:r,isLoadingInnerComponent:n}=this;ev(t)&&!(r||n)&&(this.agLabel.textContent=eS(t)),this.toggleCss("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},dG=class extends tE{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,0===e&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){!1===this.active&&t7(92)}createTask(e,t,i,r,n=!1){this.verify();let o=i;r&&this.batchFrameworkComps&&(o="f1");let s={task:e,index:t,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[o],s),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((e,i)=>e.deferred!==i.deferred?e.deferred?-1:1:e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){let{p1:t,p2:i,f1:r,destroyTasks:n,beans:o}=this,{ctrlsSvc:s,frameworkOverrides:a}=o,l=t.list,u=i.list,d=r.list,c=Date.now(),h=0,p=e<=0,f=s.getScrollFeature();for(;p||h<e;){if(!f.scrollGridIfNeeded()){let o;if(l.length)this.sortTaskList(t),o=l.pop().task;else if(u.length)this.sortTaskList(i),o=u.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(p||h<e)&&!f.scrollGridIfNeeded()&&d.length;){this.sortTaskList(r),(o=d.pop().task)();h=Date.now()-c}}),o=()=>{};else if(n.length)o=n.pop();else break;o()}h=Date.now()-c}l.length||u.length||d.length||n.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);tu(this.beans,e)}isQueueEmpty(){return!this.ticking}},dW=class extends tE{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return a6(e,this.beans,t?.column)}},dU=class extends tE{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!nb())return;let t=(t,i,r)=>{let{rowCtrl:n,cellCtrl:o}=e.getControlsForEventTarget(r?.target??null);o?.column&&o.dispatchCellContextMenuEvent(r??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,r,n,o)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return!!(()=>{if(!nb()||tm("dblclick"))return!1;let t=Date.now(),i=t-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=t,i})()&&(e.onCellDoubleClicked(t),t.preventDefault(),!0)}setupForHeader(e){let{gos:t,sortSvc:i,menuSvc:r}=this.beans;if(t.get("suppressTouch"))return;let{params:n,eMenu:o,eFilterButton:s}=e,a=new lB(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());let l=e.shouldSuppressMenuHide(),u=l&&ev(o)&&n.enableMenu,d=a;if(u&&(d=new lB(o,!0),e.addDestroyFunc(()=>d.destroy())),n.enableMenu||r?.isHeaderContextMenuEnabled(n.column)){let t=e=>n.showColumnMenuAfterMouseClick(e.touchStart);e.addManagedListeners(d,{[u?"tap":"longTap"]:t}),e.addManagedListeners(a,{longTap:t})}if(n.enableSorting&&e.addManagedListeners(a,{tap:e=>{let t=e.touchStart.target;l&&(o?.contains(t)||s?.contains(t))||i?.progressSort(n.column,!1,"uiColumnSorted")}}),n.enableFilterButton&&s){let t=new lB(s,!0);e.addManagedListeners(t,{tap:()=>n.showFilter(s)}),e.addDestroyFunc(()=>t.destroy())}}setupForHeaderGroup(e){let t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){let i=new lB(t.eGridHeader,!0);e.addManagedListeners(i,{longTap:e=>t.showColumnMenuAfterMouseClick(e.touchStart)}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,i){let r=new lB(t,!0);e.addManagedListeners(r,{tap:i}),e.addDestroyFunc(()=>r.destroy())}mockContextMenu(e,t,i){if(!nb())return;let r=new lB(t),n=e=>{tb(this.beans,e.touchEvent)&&i(void 0,e.touchStart,e.touchEvent)};e.addManagedListeners(r,{longTap:n}),e.addDestroyFunc(()=>r.destroy())}},d$=class extends tE{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let i,r,n=e===nt,{pageBounds:o,gos:s,visibleCols:a,pinnedRowModel:l}=this.beans,{rowPinned:u}=t;if(n||e===nr)r=u&&l?n?0:"top"===u?l.getPinnedTopRowCount()-1:l.getPinnedBottomRowCount()-1:n?o.getFirstRow():o.getLastRow(),i=t.column;else{let n=s.get("enableRtl");r=t.rowIndex,i=(e===ne!==n?a.allCols:[...a.allCols].reverse()).find(e=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:e}))}return i?{rowIndex:r,rowPinned:u,column:i}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,r=!1;for(;!r;){switch(e){case nt:i=this.getCellAbove(i);break;case nr:i=this.getCellBelow(i);break;case ni:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case ne:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,t7(8,{key:e})}r=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){let t,i=e.column,{pinnedRowModel:r,rowModel:n}=this.beans;switch(e.rowPinned){case"top":t=r?.getPinnedTopRow(e.rowIndex);break;case"bottom":t=r?.getPinnedBottomRow(e.rowIndex);break;default:t=n.getRow(e.rowIndex)}return!!t&&!this.isSuppressNavigable(i,t)}getCellToLeft(e){if(!e)return null;let t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;let t=this.rowSpanSvc?.getCellEnd(e)??e,i=aI(this.beans,t,!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getCellAbove(e){if(!e)return null;let t=this.rowSpanSvc?.getCellStart(e)??e,i=aF(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let{visibleCols:t,pagination:i}=this.beans,r=t.allCols,n=e.rowIndex,o=e.rowPinned,s=t.getColAfter(e.column);if(!s){s=r[0];let t=aI(this.beans,e,!0);if(ey(t)||!t.rowPinned&&!(i?.isRowInPage(t.rowIndex)??!0))return null;n=t?t.rowIndex:null,o=t?t.rowPinned:null}return{rowIndex:n,column:s,rowPinned:o}}getNextTabbedCellBackwards(e){let{beans:t}=this,{visibleCols:i,pagination:r}=t,n=i.allCols,o=e.rowIndex,s=e.rowPinned,a=i.getColBefore(e.column);if(!a){a=i3(n);let i=aF(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(ey(i)||!i.rowPinned&&!(r?.isRowInPage(i.rowIndex)??!0))return null;o=i?i.rowIndex:null,s=i?i.rowPinned:null}return{rowIndex:o,column:a,rowPinned:s}}isSuppressNavigable(e,t){let{suppressNavigable:i}=e.colDef;return"boolean"==typeof i?i:"function"==typeof i&&i(e.createColumnFunctionCallbackParams(t))}},dq=class extends tE{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new dK,this.rowValidations=new dQ,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;let i=this.getEditRow(e);t?i.delete(t):i.clear(),0===i.size&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||0===this.edits.size)return;let i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){let t=e.pinnedSibling;if(t)return this.getEditRow(t)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||0===this.edits.size)return;let i=this.getEditRow(e),r=e.pinnedSibling,n=t&&r&&this.getEditRow(r);if(!i&&!n)return;let o=Object.assign({},e.data),s=(e,t)=>e.forEach(({pendingValue:e},i)=>{e!==d0&&(t[i.getColId()]=e)});return i&&s(i,o),n&&s(n,o),o}getEdit(e,t){let i=this._getEdit(e);return t&&i?{...i}:i}_getEdit(e){if(!this.suspendEdits&&0!==this.edits.size)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||0===this.edits.size)return new Map;if(!e)return this.edits;let t=new Map;return this.edits.forEach((e,i)=>{let r=new Map;e.forEach(({editorState:e,...t},i)=>r.set(i,{...t})),t.set(i,r)}),t}setEditMap(e){this.edits.clear(),e.forEach((e,t)=>{let i=new Map;e.forEach((e,t)=>i.set(t,{...e})),this.edits.set(t,i)})}setEdit(e,t){0!==this.edits.size&&this.edits.has(e.rowNode)||this.edits.set(e.rowNode,new Map);let i=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...this._getEdit(e),...t});return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){let{rowNode:t,column:i}=e;if(t)if(i){let t=this._getEdit(e);t&&(t.editorValue=void 0,t.pendingValue=t.sourceValue,t.state="changed")}else this.getEditRow(t)?.forEach(e=>{e.editorValue=void 0,e.pendingValue=e.sourceValue,e.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||0===(e??this.edits).size)return[];let t=[];return(e??this.edits).forEach((e,i)=>{for(let r of e.keys()){let{editorState:n,...o}=e.get(r);t.push({rowNode:i,column:r,...o})}}),t}hasRowEdits(e,t){return!this.suspendEdits&&0!==this.edits.size&&!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||0===this.edits.size)return!1;let{rowNode:i,column:r}=e,{withOpenEditor:n}=t;if(i){let o=this.getEditRow(i,t);return!!o&&(r?n?this.getEdit(e)?.state==="editing":o.has(r)??!1:0!==o.size&&(!n||Array.from(o.values()).some(({state:e})=>"editing"===e)))}return n?this.getEditPositions().some(({state:e})=>"editing"===e):this.edits.size>0}start(e){let t=this.getEditRow(e.rowNode)??new Map,{rowNode:i,column:r}=e;r&&!t.has(r)&&t.set(r,{editorValue:void 0,pendingValue:d0,sourceValue:this.beans.valueSvc.getValue(r,i,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(i,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(let e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},dK=class{constructor(){this.cellValidations=new Map}getCellValidation(e){let{rowNode:t,column:i}=e||{};return this.cellValidations?.get(t)?.get(i)}hasCellValidation(e){return e?.rowNode&&e.column?!!this.getCellValidation(e):this.cellValidations.size>0}setCellValidation(e,t){let{rowNode:i,column:r}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(r,t)}clearCellValidation(e){let{rowNode:t,column:i}=e;this.cellValidations.get(t)?.delete(i)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},dQ=class{constructor(){this.rowValidations=new Map}getRowValidation(e){let{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function dX(e,t={}){let{rowIndex:i,rowId:r,rowCtrl:n,rowPinned:o}=t;if(n)return n;let{rowModel:s,rowRenderer:a}=e,{rowNode:l}=t;return l||(r?l=function(e,t,i){let r,{rowModel:n,pinnedRowModel:o}=e;return r??(r=n?.getRowNode(t)),i?r??(r=o?.getPinnedRowById(t,i)):(r??(r=o?.getPinnedRowById(t,"top")),r??(r=o?.getPinnedRowById(t,"bottom"))),r}(e,r,o):null!=i&&(l=s.getRow(i))),a.getRowCtrls(l?[l]:[])?.[0]}function dY(e,t={}){let{cellCtrl:i,colId:r,columnId:n,column:o}=t;if(i)return i;let s=e.colModel.getCol(r??n??dJ(o)),a=t.rowCtrl??dX(e,t),l=a?.getCellCtrl(s)??void 0;if(l)return l;let u=t.rowNode??a?.rowNode;if(u)return e.rowRenderer.getCellCtrls([u],[s])?.[0]}function dZ(e){let{editSvc:t}=e;t?.isBatchEditing()?(d7(e,{persist:!0}),ct(e)):t?.stopEditing(void 0,{source:"api"})}function dJ(e){if(e)return"string"==typeof e?e:e.getColId()}var d0=Symbol("unedited");function d1(e,t={}){let i=[];for(let r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){let e=r.comp?.getCellEditor();e&&i.push({ctrl:r,editor:r8(e)})}return i}function d2({pendingValue:e,sourceValue:t}){return e===d0&&(e=t),e!==t}function d5(e,t,i){let{key:r,event:n,cellStartedEdit:o,silent:s}=i??{},{editModelSvc:a,editSvc:l,gos:u,userCompFactory:d}=e,c=dY(e,t),h=c?.comp?.getCellEditor(),p=d4(e,t,r,o&&!s),f=t.column.isAllowFormula(),g=a?.getEdit(t),m=p.value??g?.sourceValue;if(h){a?.setEdit(t,{editorValue:ce(e,m,!0,t.column),state:"editing"}),h.refresh?.(p);return}let v=t.column.getColDef(),y=r3(d,f?{...v,cellEditor:"agTextCellEditor"}:v,p);if(!y)return;let{popupFromSelector:b,popupPositionFromSelector:w}=y,C=b??!!v.cellEditorPopup,x=w??v.cellEditorPopupPosition;if(d6(y.params,n),!c)return;let{rangeFeature:S,rowCtrl:k,comp:R,onEditorAttachedFuncs:E}=c;a?.setEdit(t,{editorValue:ce(e,m,!0,t.column),state:"editing"}),c.editCompDetails=y,E.push(()=>S?.unsetComp()),R?.setEditDetails(y,C,x,u.get("reactiveCustomComponents")),k?.refreshRow({suppressFlash:!0});let P=a?.getEdit(t,!0);s||P?.editorState?.cellStartedEditing||(l?.dispatchCellEvent(t,n,"cellEditingStarted",{value:m}),a?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}function d3(e,t,i){let r={editorValueExists:!1};if(co(e)){let e=t.getValidationErrors?.();if((e?.length??0)>0)return r}if(i?.isCancelling)return r;if(i?.isStopping){let e=t?.isCancelAfterEnd?.();if(e)return{...r,isCancelAfterEnd:e}}return{editorValue:t.getValue(),editorValueExists:!0}}function d4(e,t,i,r){let{valueSvc:n,gos:o,editSvc:s}=e,a=e.gos.get("enableGroupEdit"),l=dY(e,t),u=t.rowNode?.rowIndex??void 0,d=s?.isBatchEditing(),c=e.colModel.getCol(t.column.getId()),{rowNode:h,column:p}=t,f=l.comp?.getCellEditor(),g=s?.getCellDataValue(t,!1),m=void 0===g?f?d3(e,f)?.editorValue:void 0:g,v=m===d0?n.getValueForDisplay({column:c,node:h})?.value:m,y=a?m:v;return p.isAllowFormula()&&e.formula?.isFormula(y)&&(y=e.formula?.normaliseFormula(y,!0)??y),iB(o,{value:y,eventKey:i??null,column:p,colDef:p.getColDef(),rowIndex:u,node:h,data:h.data,cellStartedEdit:r??!1,onKeyDown:l?.onKeyDown.bind(l),stopEditing:i=>{s.stopEditing(t,{source:d?"ui":"api",suppressNavigateAfterEdit:i}),ci(e,t)},eGridCell:l?.eGui,parseValue:e=>n.parseValue(c,h,e,l?.value),formatValue:l?.formatValue.bind(l),validate:()=>{s?.validateEdit()}})}function d8(e,t){let{editModelSvc:i}=e;i?.getEditMap().forEach((e,r)=>{e.forEach((e,n)=>{(t||"editing"!==e.state&&e.pendingValue!==d0)&&!d2(e)&&("editing"!==e.state||t)&&i?.removeEdits({rowNode:r,column:n})})})}function d6(e,t){return t instanceof KeyboardEvent&&"agNumberCellEditor"===e.column.getColDef().cellEditor?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function d7(e,t){for(let i of e.editModelSvc?.getEditPositions()??[]){let r=dY(e,i);if(!r)continue;let n=r.comp?.getCellEditor();if(!n)continue;let{editorValue:o,editorValueExists:s,isCancelAfterEnd:a}=d3(e,n,t);a&&e.editModelSvc?.setEdit(i,{editorState:{isCancelAfterEnd:a}}),d9(e,i,o,void 0,!s,t)}}function d9(e,t,i,r,n,o){let{editModelSvc:s,valueSvc:a}=e;if(!s)return;let{rowNode:l,column:u}=t;if(!(l&&u))return;let d=s.getEdit(t,!0);if(!d?.sourceValue){let i={sourceValue:a.getValue(u,l,void 0,"api"),pendingValue:d?ce(e,d.editorValue,!1,u):d0};o?.persist&&(i.state="changed"),d=s.setEdit(t,i)}s.setEdit(t,{editorValue:n?ce(e,d.sourceValue,!0,u):i}),o?.persist&&function(e,t){let{editModelSvc:i}=e,r=i?.getEdit(t,!0);i?.setEdit(t,{pendingValue:ce(e,r?.editorValue,!1,t.column)})}(e,t)}function ce(e,t,i,r){let{formula:n}=e;return r.isAllowFormula()&&n?.isFormula(t)?n?.normaliseFormula(t,i)??t:t}function ct(e,t,i){for(let r of(t||(t=e.editModelSvc?.getEditPositions()),t??[]))ci(e,r,i)}function ci(e,t,i){let r=e.gos.get("enableGroupEdit"),{editModelSvc:n}=e,o=dY(e,t),s=n?.getEdit(t,!0);if(!o){s&&n?.setEdit(t,{state:"changed"});return}let{comp:a}=o;if(a&&!a.getCellEditor()){o?.refreshCell(),s&&(n?.setEdit(t,{state:"changed"}),cn(e,t,r?cr(i,s):{valueChanged:!1,newValue:void 0,oldValue:s.sourceValue},i));return}if(co(e)){let e=a?.getCellEditor()?.getValidationErrors?.(),i=n?.getCellValidationModel();e?.length?i?.setCellValidation(t,{errorMessages:e}):i?.clearCellValidation(t)}n?.setEdit(t,{state:"changed"}),a?.setEditDetails(),a?.refreshEditStyles(!1,!1),o?.refreshCell({force:!0,suppressFlash:!0});let l=n?.getEdit(t);l&&"changed"===l.state&&cn(e,t,r?cr(i,l):{valueChanged:d2(l)&&!i?.cancel,newValue:i?.cancel||l.editorState.isCancelAfterEnd?void 0:l?.editorValue??s?.pendingValue,oldValue:l?.sourceValue},i)}function cr(e,t){return e?.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:d2(t),oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function cn(e,t,i,{silent:r,event:n}={}){let{editSvc:o,editModelSvc:s}=e,{editorState:a}=s?.getEdit(t)||{},{isCancelBeforeStart:l}=a||{};r||l||(o?.dispatchCellEvent(t,n,"cellEditingStopped",i),s?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function co(e){let{gos:t,colModel:i}=e,r=!!t.get("getFullRowEditValidationErrors"),n=i.getColumnDefs()?.filter(e=>e.editable).some(({cellEditorParams:e})=>{let{minLength:t,maxLength:i,getValidationErrors:r,min:n,max:o}=e||{};return void 0!==t||void 0!==i||void 0!==r||void 0!==n||void 0!==o}),o=e.gridApi.getCellEditorInstances().some(e=>e.getValidationElement||e.getValidationErrors);return n||r||o}function cs(e,t){if(!(t||co(e)))return;let i=d1(e),r=new dK,{ariaAnnounce:n,localeSvc:o,editModelSvc:s,gos:a}=e,l="fullRow"===a.get("editType"),u=tk(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(let e of i){let{ctrl:t,editor:i}=e,{rowNode:o,column:s}=t,a=i.getValidationErrors?.()??[],l=i.getValidationElement?.(!1)||!i.isPopup?.()&&t.eGui;if(l){let e=null!=a&&a.length>0,t=e?a.join(". "):"";eB(l,e),e&&n.announceValue(`${u} ${a}`,"editorValidation"),l instanceof HTMLInputElement?l.setCustomValidity(t):l.classList.toggle("invalid",e)}a?.length>0&&r.setCellValidation({rowNode:o,column:s},{errorMessages:a})}d7(e,{persist:!1}),s?.setCellValidationModel(r);let d=new Set;for(let{ctrl:e}of i)d.add(e.rowCtrl);if(l){let t=ca(e);s?.setRowValidationModel(t)}for(let e of d.values())for(let t of(e.rowEditStyleFeature?.applyRowStyles(),e.getAllCellCtrls()))t.tooltipFeature?.refreshTooltip(!0),t.editorTooltipFeature?.refreshTooltip(!0),t.editStyleFeature?.applyCellStyles?.()}var ca=e=>{let t=new dQ,i=e.gos.get("getFullRowEditValidationErrors"),r=e.editModelSvc?.getEditMap();if(!r)return t;for(let e of r.keys()){let n=r.get(e);if(!n)continue;let o=[],{rowIndex:s,rowPinned:a}=e;for(let e of n.keys()){let t=n.get(e);if(!t)continue;let{editorValue:i,pendingValue:r,sourceValue:l}=t,u=i??(r===d0?void 0:r)??l;o.push({column:e,colId:e.getColId(),rowIndex:s,rowPinned:a,oldValue:l,newValue:u})}let l=i?.({editorsState:o})??[];l.length>0&&t.setRowValidation({rowNode:e},{errorMessages:l})}return t},cl=class extends tE{constructor(e,t,i,r){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=r,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){let t=e.key;switch(t){case r7:this.onEnterKeyDown(e);break;case"F2":this.onF2KeyDown(e);break;case r9:this.onEscapeKeyDown(e);break;case"Tab":this.onTabKeyDown(e);break;case r6:case nn:this.onBackspaceOrDeleteKeyDown(t,e);break;case nr:case nt:case ni:case ne:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){let{cellCtrl:i,beans:r}=this;if(!r.editSvc?.isEditing(i,{withOpenEditor:!0})){if(e.shiftKey&&i.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{let n=i.getFocusedCellPosition();r.navigation?.navigateToNextCell(e,t,n,!0)}e.preventDefault()}}onShiftRangeSelect(e){let{rangeSvc:t,navigation:i}=this.beans;if(!t)return;let r=t.extendLatestRangeInDirection(e);r&&(e.key===ne||e.key===ni?i?.ensureColumnVisible(r.column):i?.ensureRowVisible(r.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:i,beans:r,rowNode:n}=this,{gos:o,rangeSvc:s,eventSvc:a,editSvc:l}=r;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e,t=!1){return e===nn||!t&&e===r6&&ny()}(e,o.get("enableCellEditingOnBackspace"))&&!l?.isEditing(i,{withOpenEditor:!0})){if(s&&iP(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){let{column:e}=i,t=this.beans.valueSvc.getDeleteValue(e,n);n.setDataValue(e,t,"cellClear")}}else l?.isEditing(i,{withOpenEditor:!0})||r.editSvc?.startEditing(i,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){let{cellCtrl:t,beans:i}=this,{editSvc:r,navigation:n}=i,o=r?.isEditing(t,{withOpenEditor:!0}),s=t.rowNode,a=r?.isRowEditing(s,{withOpenEditor:!0}),l=t=>{r?.startEditing(t,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e))return void r?.applyBulkEdit(t,i?.rangeSvc?.getCellRanges()||[]);if(cs(i),r?.checkNavWithValidation(void 0,e)==="block-stop")return;r?.isEditing(t,{withOpenEditor:!0})?r?.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?r?.stopEditing({rowNode:s},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){let i=e.shiftKey?nt:nr;n?.navigateToNextCell(null,i,t.cellPosition,!1)}else{if(r?.hasValidationErrors())return;r?.hasValidationErrors(t)&&r.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===r7}onF2KeyDown(e){let{cellCtrl:t,beans:{editSvc:i}}=this;i?.isEditing()&&(cs(this.beans),i?.checkNavWithValidation(void 0,e)==="block-stop")||i?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){let{cellCtrl:t,beans:{editSvc:i}}=this;i?.checkNavWithValidation(t,e)==="block-stop"&&i.revertSingleCellEdit(t),setTimeout(()=>{i?.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){let t=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:r}=this;if(!(t||i?.isEditing(r,{withOpenEditor:!0}))){if(" "===e.key)this.onSpaceKeyDown(e);else if(i?.isCellEditable(r,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(r))return;i?.startEditing(r,{startedEdit:!0,event:e,source:"api"});let t=r.editCompDetails;t?.params?.suppressPreventDefault||e.preventDefault()}}}onSpaceKeyDown(e){let{gos:t,editSvc:i}=this.beans,{rowNode:r}=this.cellCtrl;!i?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&ia(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,r,"spaceKey"),e.preventDefault()}},cu=class extends tE{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!sU(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;let{eventSvc:t,rangeSvc:i,editSvc:r,editModelSvc:n,frameworkOverrides:o,gos:s}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:u,cellPosition:d,rowNode:c}=l,h=s3(s,u,c,e);i&&a&&!h&&i.getCellRangeCount(d)>1&&i.intersectLastRange(!0);let p=l.createEvent(e,"cellClicked");p.isEventHandlingSuppressed=h,t.dispatchEvent(p);let f=u.getColDef();if(f.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{f.onCellClicked(p)})},0),!h&&n?.getState(l)!=="editing"){let t=r?.isEditing(),i=n?.getCellValidationModel().getCellValidationMap().size??0,o=n?.getRowValidationModel().getRowValidationMap().size??0;if(t&&(i>0||o>0))return;r?.shouldStartEditing(l,e)?r?.startEditing(l,{event:e}):r?.shouldStopEditing(l,e)&&("fullRow"===this.beans.gos.get("editType")?r?.stopEditing(l,{event:e,source:"edit"}):r?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){let{column:t,beans:i,cellCtrl:r}=this,{eventSvc:n,frameworkOverrides:o,editSvc:s,editModelSvc:a,gos:l}=i,u=s3(l,r.column,r.rowNode,e),d=t.getColDef(),c=r.createEvent(e,"cellDoubleClicked");if(c.isEventHandlingSuppressed=u,n.dispatchEvent(c),"function"==typeof d.onCellDoubleClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{d.onCellDoubleClicked(c)})},0),!u&&s?.shouldStartEditing(r,e)&&a?.getState(r)!=="editing"){let t=s?.isEditing(),i=a?.getCellValidationModel().getCellValidationMap().size??0,n=a?.getRowValidationModel().getRowValidationMap().size??0;if(t&&(i>0||n>0))return;s?.startEditing(r,{event:e})}}onMouseDown(e){let{shiftKey:t}=e,i=e.target,{cellCtrl:r,beans:n}=this,{eventSvc:o,rangeSvc:s,rowNumbersSvc:a,focusSvc:l,gos:u,editSvc:d}=n,{column:c,rowNode:h,cellPosition:p}=r,f=s3(u,c,h,e),g=()=>{let t=r.createEvent(e,"cellMouseDown");t.isEventHandlingSuppressed=f,o.dispatchEvent(t)};if(f)return void g();if(this.isRightClickInExistingRange(e))return;let m=s&&!s.isEmpty(),v=this.containsWidget(i),y=ra(c);if(!a||!y||a.handleMouseDownOnCell(p,e)){if(!t||!m){let t=d?.isEditing(r),n=u.get("enableCellTextSelection")&&e.defaultPrevented,o=(nm()||n)&&!t&&!e$(i)&&!v;r.focusCell(o,e)}if(t&&m&&!l.isCellFocused(p)){e.preventDefault();let t=l.getFocusedCell();if(t){let{column:i,rowIndex:r,rowPinned:n}=t;d?.isEditing(t)&&d?.stopEditing(t),l.setFocusedCell({column:i,rowIndex:r,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}v||(s?.handleCellMouseDown(e,p),g())}}isRightClickInExistingRange(e){let{rangeSvc:t}=this.beans;if(t){let i=t.isCellInAnyRange(this.cellCtrl.cellPosition),r=function({gos:e},t){return 2===t.button||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}(this.beans,e);if(i&&r)return!0}return!1}containsWidget(e){return eQ(e,"ag-selection-checkbox",3)||eQ(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.eGui,i=t.contains(e.target),r=t.contains(e.relatedTarget);return i&&r}},cd=class extends tE{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){let t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){let t=e.getCellHeight();null!=t&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();i4(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:e,rowNode:t}=this,i=e.getColSpan(t),r=[];if(1===i)r.push(e);else{let t=e,n=e.getPinned();for(let e=0;t&&e<i&&(r.push(t),!(!(t=this.beans.visibleCols.getColAfter(t))||ey(t))&&n===t.getPinned());e++);}return r}onLeftChanged(){if(!this.eSetLeft)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){return(this.beans.gos.get("enableRtl")&&this.colsSpanning?i3(this.colsSpanning):this.column).getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||"left"===this.column.getPinned())return e;let{visibleCols:t}=this.beans,i=t.getColsLeftWidth();return"right"===this.column.getPinned()?i+t.bodyWidth+(e||0):i+(e||0)}_legacyApplyRowSpan(e){if(1===this.rowSpan&&!e)return;let t=id(this.beans)*this.rowSpan;this.eContent.style.height=`${t}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},cc=0,ch=class extends tE{constructor(e,t,i,r){super(),this.column=e,this.rowNode=t,this.rowCtrl=r,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.formulaTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:n}=e;this.instanceId=n+"-"+cc++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){let{beans:e}=this;this.positionFeature=new cd(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this),this.mouseListener=new cu(this,e,this.column),this.keyboardListener=new cl(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature(),this.enableFormulaTooltipFeature();let{rangeSvc:t}=e;t&&iP(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(this)),ra(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature(),this.disableFormulaTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}enableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.tooltipSvc?.setupFormulaTooltip(this)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}disableFormulaTooltipFeature(){this.formulaTooltipFeature=this.beans.context.destroyBean(this.formulaTooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),cs(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,r,n,o,s){if(this.comp=e,this.eGui=t,this.printLayout=n,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r,s),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0})?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(let e of this.onCompAttachedFuncs)e();this.onCompAttachedFuncs=[]}}checkFormulaError(){let e=!!this.beans.formula?.getFormulaError(this.column,this.rowNode);this.eGui.classList.toggle("formula-error",e),this.formulaTooltipFeature?.refreshTooltip(),e?this.disableTooltipFeature():this.enableTooltipFeature()}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){let{beans:e,column:t}=this,{userCompFactory:i,ctrlsSvc:r,eventSvc:n}=e,o=t.getColDef(),s=this.createCellRendererParams();s.deferRender=!0;let a=r5(i,o,s);if(r.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let e,t=new rN(t=>{e=t}),[i]=this.addManagedListeners(n,{bodyScrollEnd:()=>{e(),i()}});return{loadingComp:a,onReady:t}}return{loadingComp:a,onReady:rN.resolve()}}showValue(e,t){let i,{beans:r,column:n,rowNode:o,rangeFeature:s}=this,{userCompFactory:a}=r,l=this.getValueToDisplay(),u=o.stub&&o.groupData?.[n.getId()]==null,d=n.getColDef();if(u||this.isCellRenderer()){let e=this.createCellRendererParams();i=!u||ra(n)?r2(a,d,e):r5(a,d,e)}if(!i&&!u&&r.findSvc?.isMatch(o,n)){let e=this.createCellRendererParams();i=r2(a,{...n.getColDef(),cellRenderer:"agFindCellRenderer"},e)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(o,{checkSiblings:!0})){let e=this.editSvc.prepDetailsDuringBatch(this,{compDetails:i,valueToDisplay:l});e&&(e.compDetails?i=e.compDetails:e.valueToDisplay&&(l=e.valueToDisplay))}this.comp.setRenderDetails(i,l,e),this.customRowDragComp?.refreshVisibility(),!t&&s&&tu(r,()=>s?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){let e="agCheckboxCellRenderer"===this.column.getColDef().cellRenderer,t="";return e&&(t=" ag-allow-overflow"),`ag-cell-value${t}`}isIncludeControl(e,t=!1){return(null==this.rowNode.rowPinned||t&&lM(this.rowNode))&&!!e}isCheckboxSelection(e){let{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,r=iR(t),n=rs(this.column);return("custom"!==i||"selectionColumn"===r||!n)&&(e.checkboxSelection||n&&"object"==typeof t&&iS(t))}refreshShouldDestroy(){let e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||i||r||n}onPopupEditorClosed(){let{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){let{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){let{value:e,valueFormatted:t,column:i,rowNode:r,comp:n,eGui:o,beans:{valueSvc:s,gos:a,editSvc:l}}=this;return iB(a,{value:e,valueFormatted:t,getValue:()=>s.getValueForDisplay({column:i,node:r}).value,setValue:e=>l?.setDataValue({rowNode:r,column:i},e)||r.setDataValue(i,e),formatValue:this.formatValue.bind(this),data:r.data,node:r,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:n.getParentOfValue(),registerRowDragger:(e,t,i,r)=>this.registerRowDragger(e,t,r),setTooltip:(e,t)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){let{editSvc:e,comp:t}=this;!t?.getCellEditor()&&e.isEditing(this,{withOpenEditor:!0})&&e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:i}={}){let{editStyleFeature:r,customStyleFeature:n,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:s,filterManager:a},column:l,comp:u,suppressRefreshCell:d,tooltipFeature:c}=this;if(d)return;let{field:h,valueGetter:p,showRowGroup:f,enableCellChangeFlash:g}=l.getColDef(),m=!!u,v=this.updateAndFormatValue(m),y=e||null==h&&null==p&&null==f||i||v;if(m){if(y){this.showValue(!!i,!1);let e=a?.isSuppressFlashingCellsBecauseFiltering();t||e||!g||s?.flashCell(this),r?.applyCellStyles?.(),n?.applyUserStyles(),n?.applyClassesFromColDef(),o?.applyRowStyles(),this.checkFormulaError()}c?.refreshTooltip(),n?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let t=this.value,i=this.valueFormatted,{value:r,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0});return this.value=r,this.valueFormatted=n,!e||!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i}valuesAreEqual(e,t){let i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){let t=this.eGui;ip(this.beans.gos,t,s6,this),e.addDestroyFunc(()=>ip(this.beans.gos,t,s6,null))}createEvent(e,t){let{rowNode:i,column:r,value:n,beans:o}=this;return function(e,t,i,{rowNode:r,column:n},o){return iB(e.gos,{type:i,node:r,data:r.data,value:o,column:n,colDef:n.getColDef(),rowPinned:r.rowPinned,event:t,rowIndex:r.rowIndex})}(o,e,t,{rowNode:i,column:r},n)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:e,column:t,beans:i}=this;aT(e,t,i.visibleCols)}refreshAriaColIndex(){let e=this.beans.visibleCols.getAriaColIndex(this.column);ej(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.rangeFeature}focusCell(e=!1,t){let i=this.editSvc?.allowedFocusTargetOnValidation(this);i&&i!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){let{beans:{editSvc:t,focusSvc:i},comp:r}=this;if(!r||t?.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;let n=()=>{if(!this.isAlive())return;let e=r.getFocusableElement();this.isCellFocused()&&e.focus({preventScroll:!0})};e?setTimeout(n,0):n()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){let t=this.eGui;t&&(ra(this.column)&&(e=!0),ta(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let e=this.column.isFirstRightPinned();this.comp.toggleCss("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.comp)return;let e=this.column.isLastLeftPinned();this.comp.toggleCss("ag-cell-last-left-pinned",e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){let e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){let{beans:t}=this;if(aB(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}let i=this.isCellFocused(),r=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss("ag-cell-focus",i),i&&e?.forceBrowserFocus){let t=this.comp.getFocusableElement();if(r){let e=nE(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}i&&e&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:em(t),column:this.column}}applyStaticCssClasses(){let{comp:e}=this;e.toggleCss("ag-cell",!0),e.toggleCss("ag-cell-not-inline-editing",!0);let t=!0==this.column.isAutoHeight();e.toggleCss("ag-cell-auto-height",t),e.toggleCss("ag-cell-normal-height",!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){let e=!0==this.column.getColDef().wrapText;this.comp.toggleCss("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){let t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:r}=this;r.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{r.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(eP(this.beans))??!1}createSelectionCheckbox(){let e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);let r=this.createRowDragComp(e,t,i);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}),r.refreshVisibility())}createRowDragComp(e,t,i){let r=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(r)return this.beans.context.createBean(r),r}cellEditorAttached(){for(let e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function cp(e,t,i,r,n,o){if(null==i&&null==t)return;let s={},a={},l=(e,t)=>{for(let i of e.split(" "))""!=i.trim()&&t(i)};if(i){let t=Object.keys(i);for(let n=0;n<t.length;n++){let o,u=t[n],d=i[u];"string"==typeof d?o=!e||e.evaluate(d,r):"function"==typeof d&&(o=d(r)),l(u,e=>{o?s[e]=!0:a[e]=!0})}}if(t&&o)for(let e of Object.keys(t))l(e,e=>{s[e]||(a[e]=!0)});o&&Object.keys(a).forEach(o),Object.keys(s).forEach(n)}function cf(e){if(e.group)return e.level;let t=e.parent;return t?t.level+1:0}var cg=class extends tE{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){let i=this.gos,r=t=>{if("string"==typeof t)e.push(t);else if(Array.isArray(t))for(let i of t)e.push(i)},n=i.get("rowClass");n&&r(n);let o=i.getCallback("getRowClass");o&&r(o({data:t.data,node:t,rowIndex:t.rowIndex}))}preProcessRowClassRules(e,t){this.processRowClassRules(t,t=>{e.push(t)},()=>{})}processRowClassRules(e,t,i){let{gos:r,expressionSvc:n}=this.beans,o=iB(r,{data:e.data,node:e,rowIndex:e.rowIndex});cp(n,void 0,r.get("rowClassRules"),o,t,i)}processStylesFromGridOptions(e){let t,i=this.gos,r=i.get("rowStyle"),n=i.getCallback("getRowStyle");if(n&&(t=n({data:e.data,node:e,rowIndex:e.rowIndex})),t||r)return Object.assign({},r,t)}},cm=0,cv=class extends tE{constructor(e,t,i,r,n){super(),this.rowNode=e,this.useAnimationFrameForCreate=r,this.printLayout=n,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+cm++,this.rowId=ek(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=cf(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=ek(e)}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,r){let{context:n,focusSvc:o}=this.beans,s={rowComp:e,element:t,containerType:i,compBean:r=rT(this,n,r)};this.allRowGuis.push(s),this.updateGui(i,s),this.initialiseRowComp(s);let a=this.rowNode,l="FullWidthLoading"===this.rowType||a.stub,u=!a.data&&"infinite"===this.beans.rowModel.getType();l||u||a.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent();let d=this.fullWidthGui?.element;d&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){let t=e?"none":"";for(let e of this.allRowGuis)e.element.style.display=t}initialiseRowComp(e){let t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),ia(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=e.rowComp;for(let t of this.getInitialRowClasses(e.containerType))i.toggleCss(t,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&eH(e.element,!0==this.rowNode.expanded),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),ip(t,e.element,s7,this),e.compBean.addDestroyFunc(()=>ip(t,e.element,s7,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKey&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){let t=ek(this.rowNode.id);this.rowId=t,null!=t&&e.setRowId(t)}executeSlideAndFadeAnimations(e){let{containerType:t}=e;this.slideInAnimation[t]&&(tO(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(tO(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){let t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;let i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(e=>e!==i),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(i,this.beans.context)})}setupFullWidth(e){let t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");e&&this.areAllContainersReady()&&e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){let{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:r}}=this,n=!!e||!r.isPinningLeft(),o=!!i||!r.isPinningRight();return n&&!!t&&o}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){let{rowNode:e,gos:t,beans:{colModel:i}}=this,r=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),n=this.isNodeFullWidthCell(),o=t.get("masterDetail")&&e.detail,s=iC(t,e,i.isPivotMode());r?this.rowType="FullWidthLoading":o?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;let{animationFrameSvc:i}=this.beans;!i?.active||e||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new ch(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,i=null){let r={list:[],map:{}},n=(e,t,i)=>{null!=i?r.list.splice(i,0,t):r.list.push(t),r.map[e]=t},o=[];for(let i of t){let t=i.getInstanceId(),r=e.map[t];r&&!this.isCorrectCtrlForSpan(r)&&(r.destroy(),r=void 0),r||(r=this.getNewCellCtrl(i)),r&&n(t,r)}for(let t of e.list){let e=t.column.getInstanceId();null==r.map[e]&&(this.isCellEligibleToBeRemoved(t,i)?t.destroy():o.push([e,t]))}if(o.length)for(let[e,t]of o){let i=r.list.findIndex(e=>e.column.getLeft()>t.column.getLeft());n(e,t,-1===i?void 0:Math.max(i-1,0))}let{focusSvc:s,visibleCols:a}=this.beans,l=s.getFocusedCell();if(l&&l.column.getPinned()==i){let e=l.column.getInstanceId();if(!r.map[e]&&a.allCols.includes(l.column)){let t=this.createFocusedCellCtrl();if(t){let i=r.list.findIndex(e=>e.column.getLeft()>t.column.getLeft());n(e,t,-1===i?void 0:Math.max(i-1,0))}}}return r}createFocusedCellCtrl(){let{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;let r=t?.getCellSpan(i.column,this.rowNode);if(r){if(r.firstNode!==this.rowNode||!r.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(let t of this.allRowGuis){let i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let r=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");let n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){let{column:i}=e;if(i.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;let{visibleCols:r,editSvc:n}=this.beans,o=n?.isEditing(e),s=e.isCellFocused();return!o&&!s||!(r.allCols.indexOf(i)>=0)}getDomOrder(){return this.gos.get("ensureDomOrder")||is(this.gos,"print")}listenOnDomOrder(e){let t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;let t=ev(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,r=i.isPinningLeft(),n=i.isPinningRight();if(t){let{slideInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){e.fullWidth=!0;return}e.center=!0,e.left=r,e.right=n}else{let{fadeInAnimation:e}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){e.fullWidth=!0;return}e.center=!0,e.left=r,e.right=n}}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){let e=(e,t)=>!e||e.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(e.element,t).params),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),r=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&r&&n}addListeners(){let{beans:e,gos:t,rowNode:i}=this,{expansionSvc:r,eventSvc:n,context:o,rowSpanSvc:s}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...r?.getRowExpandedListeners(this)??{}}),i.detail&&this.addManagedListeners(i.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(i,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(n,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:e})=>{(!e||i.rowPinned)&&this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(let e of this.allRowGuis)this.addRowDraggerToRow(e);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(let e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(let t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(let e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())return void this.beans.rowRenderer.redrawRow(this.rowNode);if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(let t of this.getAllCellCtrls())t.refreshCell(e);for(let e of this.allRowGuis)this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",i="above"===t,r="inside"===t,n="below"===t,o="none"!==t,s=i||n,a=this.rowNode.uiLevel,l=s&&a>0,u=l?a.toString():"0";for(let e of this.allRowGuis){let t=e.rowComp;t.toggleCss("ag-row-highlight-above",i),t.toggleCss("ag-row-highlight-inside",r),t.toggleCss("ag-row-highlight-below",n),t.toggleCss("ag-row-highlight-indent",l),o?e.element.style.setProperty("--ag-row-highlight-level",u):e.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){let e=this.rowNode.dragging;for(let t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:em(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let t=this.findFullWidthInfoForEvent(e);if(!t)return;let{rowGui:i,column:r}=t;if(i.element!==e.target)return;let n=this.rowNode,{focusSvc:o,navigation:s}=this.beans,a=o.getFocusedCell(),l={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:a?.column??r};s?.navigateToNextCell(e,e.key,l,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||sU(e))return;let t=this.allRowGuis.find(t=>t.element.contains(e.target)),i=t?t.element:null,r=i===e.target,n=eP(this.beans),o=!1;i&&n&&(o=i.contains(n)&&n.classList.contains("ag-cell"));let s=null;r||o||(s=nM(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&r||!s)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let e=this.allRowGuis.find(e=>e6(e.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){let t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(let e of this.allRowGuis)ta(e.element,"tabindex",t)}onFullWidthRowFocused(e){let t,i=this.rowNode,r=!!e&&this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned;if(this.fullWidthGui)t=this.fullWidthGui.element;else{let i=this.beans.colModel.getCol(e?.column),r=i?.pinned;t=r?"right"===r?this.rightGui?.element:this.leftGui?.element:this.centerGui?.element}t&&(t.classList.toggle("ag-full-width-focus",r),r&&e?.forceBrowserFocus&&t.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){let i={list:[],map:{}};for(let r of e.list)r!==t&&(i.list.push(r),i.map[r.column.getInstanceId()]=r);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){let{rowNode:i}=this;return iB(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){let i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(sU(e))return;let t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;let t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);if(t&&i)return{rowGui:t,column:i}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){let{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=eQ(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;let{rangeSvc:t,focusSvc:i}=this.beans;t?.removeAllCellRanges();let r=this.findFullWidthInfoForEvent(e);if(!r)return;let{rowGui:n,column:o}=r,s=n.element,a=e.target,l=this.rowNode,u=e.defaultPrevented||nm();s&&s.contains(a)&&e$(a)&&(u=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:u})}isSuppressMouseEvent(e){let{gos:t,rowNode:i}=this;if(this.isFullWidth()){var r;let n=this.findFullWidthRowGui(e.target);return r=n?.rowComp.getFullWidthCellRendererParams(),s4(t,void 0,i,e,r?.suppressMouseEventHandling)}let n=s8(t,e.target,s6);return null!=n&&s3(t,n.column,i,e)}onRowClick(e){if(sU(e)||this.lastMouseDownOnDragger)return;let t=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:r}=this.beans,n=this.createRowEventWithSource("rowClicked",e);n.isEventHandlingSuppressed=t,i.dispatchEvent(n),t||r?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){"FullWidthDetail"===this.rowType&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){let{gos:i,rowNode:r}=this,n=iB(i,{fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,r)=>this.addFullWidthRowDragging(e,t,i,r),setTooltip:(e,t)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(e,t)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return o.getCompDetailsFromGridOptions(r1,"agDetailCellRenderer",n,!0);case"FullWidthGroup":{let{value:e,valueFormatted:t}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0});return n.value=e,n.valueFormatted=t,o.getCompDetailsFromGridOptions(r0,"agGroupRowRenderer",n,!0)}case"FullWidthLoading":return o.getCompDetailsFromGridOptions(rJ,"agLoadingCellRenderer",n,!0);default:return o.getCompDetailsFromGridOptions(rZ,void 0,n,!0)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",r){let{rowDragSvc:n,context:o}=this.beans;if(!n||!this.isFullWidth())return;let s=n.createRowDragComp(()=>i,this.rowNode,void 0,e,t,r);this.createBean(s,o),this.addDestroyFunc(()=>{this.destroyBean(s,o)})}onUiLevelChanged(){let e=cf(this.rowNode);if(this.rowLevel!=e){let t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(let e of this.allRowGuis)e.rowComp.toggleCss(t,!0),e.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e)for(let t of(this.firstRowOnPage=e,this.allRowGuis))t.rowComp.toggleCss("ag-row-first",e);if(this.lastRowOnPage!==t)for(let e of(this.lastRowOnPage=t,this.allRowGuis))e.rowComp.toggleCss("ag-row-last",t)}getAllCellCtrls(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),e.length)for(let t of e)for(let e of this.allRowGuis)e.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(let t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,e=>e.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){let t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:r,beans:n}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(r.rowIndex%2==0?"ag-row-even":"ag-row-odd"),r.isRowPinned()&&(o.push("ag-row-pinned"),n.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!r.isRowPinned()&&r.pinnedSibling&&o.push("ag-row-pinned-source"),r.isSelected()&&o.push("ag-row-selected"),r.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),r.stub&&o.push("ag-row-loading"),i&&o.push("ag-full-width-row"),n.expansionSvc?.addExpandedCss(o,r),r.dragging&&o.push("ag-row-dragging");let{rowStyleSvc:s}=n;return s&&(s.processClassesFromGridOptions(o,r),s.preProcessRowClassRules(o,r)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),i&&("left"===t&&o.push("ag-cell-last-left-pinned"),"right"===t&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,e=>{(e===this.centerGui||e===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;let{element:t,compBean:i}=e,{rowNode:r,beans:n,gos:o}=this;i.addManagedListeners(t,{pointerenter:e=>{"mouse"===e.pointerType&&r.dispatchRowEvent("mouseEnter")},pointerleave:e=>{"mouse"===e.pointerType&&r.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(r,{mouseEnter:()=>{n.dragSvc?.dragging||o.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),r.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){for(let t of e?[e]:this.allRowGuis.map(e=>e.element))t.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){let t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition();return Math.min(Math.max(this.applyPaginationOffset(t.top,!0)-100,e),this.applyPaginationOffset(t.bottom,!0)+100)}forEachGui(e,t){if(e)t(e);else for(let e of this.allRowGuis)t(e)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;let t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),r=il(this.gos)?iu(this.beans,this.rowNode).height:void 0,n=r?`${Math.min(i,r)-2}px`:void 0;this.forEachGui(e,e=>{e.element.style.height=`${t}px`,n&&e.element.style.setProperty("--ag-line-height",n)})}destroyFirstPass(e=!1){this.active=!1;let{rowNode:t}=this;if(!e&&ig(this.gos)&&!t.sticky)if(null!=t.rowTop){let e=this.roundRowTopToBounds(t.rowTop);this.setRowTop(e)}else for(let e of this.allRowGuis)e.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(eP(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);let i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;let e=e=>{for(let t of e.list)t.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){let e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?e:e+this.beans.pageBounds.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&ev(e)){let t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t),r=`${i}px`;this.setRowTopStyle(r)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){let t;if(this.printLayout)return"";let i=this.rowNode;if(i.sticky)t=i.stickyRowTop;else{let r=this.slideInAnimation[e]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,n=this.applyPaginationOffset(r);t=i.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return t+"px"}setRowTopStyle(e){for(let t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let i=null;for(let t of this.getAllCellCtrls())t.column==e&&(i=t);if(null!=i||t)return i;for(let t of this.getAllCellCtrls())t?.getColSpanningList().indexOf(e)>=0&&(i=t);return i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){let t=this.rowNode.getRowIndexString();if(null===t)return;let i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),r=this.rowNode.rowIndex%2==0,n=i+this.rowNode.rowIndex+1;this.forEachGui(e,e=>{e.rowComp.setRowIndex(t),e.rowComp.toggleCss("ag-row-even",r),e.rowComp.toggleCss("ag-row-odd",!r),ez(e.element,n)})}},cy=class extends tE{constructor(){super(),this.beanName="navigation",this.onPageDown=tA(this.onPageDown,100),this.onPageUp=tA(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){var i,r;let n=e.key,o=e.altKey,s=e.ctrlKey||e.metaKey,a=!!this.beans.rangeSvc&&e.shiftKey,l=(i=this.gos,r=e,s8(i,r.target,s6)?.getFocusedCellPosition()??null),u=!1;switch(n){case na:case"End":s||o||(this.onHomeOrEndKey(n),u=!0);break;case ne:case ni:case nt:case nr:if(!l)return!1;!s||o||a||(this.onCtrlUpDownLeftRight(n,l),u=!0);break;case ns:case no:s||o||(u=this.handlePageUpDown(n,l,t))}return u&&e.preventDefault(),u}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),!!t&&(e===no?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:i,focusIndex:r,focusColumn:n,isAsync:o,rowPinned:s}){let{scrollFeature:a}=this.gridBodyCon;ev(i)&&!i.isPinned()&&a.ensureColumnVisible(i),ev(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(r);let{focusSvc:l,rangeSvc:u}=this.beans;l.setFocusedCell({rowIndex:r,column:n,rowPinned:s,forceBrowserFocus:!0}),u?.setRangeToCell({rowIndex:r,rowPinned:s,column:n})}onPageDown(e){let t=this.beans,i=cb(t),r=this.getViewportHeight(),{pageBounds:n,rowModel:o,rowAutoHeight:s}=t,a=n.getPixelOffset(),l=i.top+r,u=o.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(e,u):this.navigateToNextPage(e,u)}onPageUp(e){let t=this.beans,i=cb(t),{pageBounds:r,rowModel:n,rowAutoHeight:o}=t,s=r.getPixelOffset(),a=i.top,l=n.getRowIndexAtPixel(a+s);o?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){let r,{pageBounds:n,rowModel:o}=this.beans,s=this.getViewportHeight(),a=n.getFirstRow(),l=n.getLastRow(),u=n.getPixelOffset(),d=o.getRow(e.rowIndex),c=i?d?.rowHeight-s-u:s-u,h=d?.rowTop+c,p=o.getRowIndexAtPixel(h+u);p===e.rowIndex&&(t=p=e.rowIndex+(i?-1:1)),i?(r="bottom",p<a&&(p=a),t<a&&(t=a)):(r="top",p>l&&(p=l),t>l&&(t=l)),this.isRowTallerThanView(o.getRow(p))&&(t=p,r="top"),this.navigateTo({scrollIndex:t,scrollType:r,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let r=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let i=t?-1:1,r=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,s=n.getLastRow(),a=0,l=e.rowIndex;for(;l>=0&&l<=s;){let e=o.getRow(l);if(e){let t=e.rowHeight??0;if(a+t>r)break;a+=t}l+=i}return Math.max(0,Math.min(l,s))}getViewportHeight(){let e=this.beans,t=cb(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth(),r=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(r-=i),r}isRowTallerThanView(e){if(!e)return!1;let t=e.rowHeight;return"number"==typeof t&&t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),{rowIndex:r,rowPinned:n,column:o}=this.getNormalisedPosition(i)??i;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o,rowPinned:n})}onHomeOrEndKey(e){let t=e===na,{visibleCols:i,pageBounds:r,rowModel:n}=this.beans,o=i.allCols,s=t?r.getFirstRow():r.getLastRow(),a=n.getRow(s);if(!a)return;let l=(t?o:[...o].reverse()).find(e=>!e.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:l,focusIndex:s,focusColumn:l})}onTabKeyDown(e,t){let i=t.shiftKey,r=this.tabToNextCellCommon(e,i,t),n=this.beans,{ctrlsSvc:o,pageBounds:s,focusSvc:a,gos:l}=n;if(!1!==r)return void(r?t.preventDefault():null===r&&o.get("gridCtrl").allowFocusForNextCoreContainer(i));if(i){let{rowIndex:i,rowPinned:r}=e.getRowPosition();(r?0===i:i===s.getFirstRow())&&(0===l.get("headerHeight")||aN(n)?aV(n,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof ch&&e.focusCell(!0),(a.focusOverlay(!1)||aV(n,i))&&t.preventDefault()}tabToNextCell(e,t){let i=this.beans,{focusSvc:r,rowRenderer:n}=i,o=r.getFocusedCell();if(!o)return!1;let s=aA(i,o);return(!!s||(s=n.getRowByPosition(o),!!s?.isFullWidth()))&&!!this.tabToNextCellCommon(s,e,t,"api")}tabToNextCellCommon(e,t,i,r="ui"){let n,{editSvc:o,focusSvc:s}=this.beans,a=e instanceof ch?e:e.getAllCellCtrls()?.[0];return null===(n=o?.isEditing()?o?.moveToNextCell(a,t,i,r):this.moveToNextCellNotEditing(e,t,i))?n:n||!!s.focusedHeader}moveToNextCellNotEditing(e,t,i){let r,n=this.beans.visibleCols.allCols;if(e instanceof cv){if(r={...e.getRowPosition(),column:t?n[0]:i3(n)},this.gos.get("embedFullWidthRows")&&i){let t=e.findFullWidthInfoForEvent(i);t&&(r.column=t.column)}}else r=e.getFocusedCellPosition();let o=this.findNextCellToFocusOn(r,{backwards:t,startEditing:!1});if(!1===o)return null;if(o instanceof ch)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return ev(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:i,skipToNextEditableCell:r}){let n=e,o=this.beans,{cellNavigation:s,gos:a,focusSvc:l,rowRenderer:u,rangeSvc:d}=o;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=s.getNextTabbedCell(n,t);let c=a.getCallback("tabToNextCell");if(ev(c)){let r=c({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(!0===r)n=e;else{if(!1===r)return!1;n={rowIndex:r.rowIndex,column:r.column,rowPinned:r.rowPinned}}}if(!n)return null;if(n.rowIndex<0){let e=aH(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:e+n.rowIndex,column:n.column},fromCell:!0}),null}let h="fullRow"===a.get("editType");if(i&&(!h||r)&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);let p=aA(o,n);if(!p){let e=u.getRowByPosition(n);if(!e||!e.isFullWidth()||i)continue;return{...e.getRowPosition(),column:n?.column}}if(!s.isSuppressNavigable(p.column,p.rowNode))return p.setFocusedCellPosition(n),d?.setRangeToCell(n),p}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){let{pinnedRowModel:i,rowModel:r}=this.beans;return"top"===t?i?.getPinnedTopRow(e):"bottom"===t?i?.getPinnedBottomRow(e):r.getRow(e)}navigateToNextCell(e,t,i,r){let n=i,o=!1,s=this.beans,{cellNavigation:a,focusSvc:l,gos:u}=s;for(;n&&(n===i||!this.isValidNavigateCell(n));)u.get("enableRtl")?t===ne&&(n=this.getLastCellOfColSpan(n)):t===ni&&(n=this.getLastCellOfColSpan(n)),o=ey(n=a.getNextCellToFocus(t,n));if(o&&e&&e.key===nt&&(n={rowIndex:-1,rowPinned:null,column:i.column}),r){let r=u.getCallback("navigateToNextCell");if(ev(r)){let o=r({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});n=ev(o)?{rowPinned:o.rowPinned,rowIndex:o.rowIndex,column:o.column}:null}}if(!n)return;if(n.rowIndex<0){let t=aH(s);l.focusHeaderPosition({headerPosition:{headerRowIndex:t+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}let d=this.getNormalisedPosition(n);d?this.focusPosition(d):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){if(this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);let t=aA(this.beans,e);return t?(e=t.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let{visibleCols:i,rowRenderer:r,focusSvc:n,eventSvc:o}=this.beans,s=i.allCols,a=r.getRowByPosition(e);if(!a?.isFullWidth())return!1;let l=n.getFocusedCell(),u={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?i3(s):s[0])};this.focusPosition(u);let d=null==t?null!=l&&function(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(ev(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}(u,l):t;return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:u.rowIndex,rowPinned:u.rowPinned,column:u.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(e){let{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i?.setRangeToCell(e)}isValidNavigateCell(e){return!!a_(this.beans,e)}getLastCellOfColSpan(e){let t=aA(this.beans,e);if(!t)return e;let i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:i3(i),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=im(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),r=t&&i?.sticky,{scrollFeature:n}=this.gridBodyCon;!r&&ey(e.rowPinned)&&n.ensureIndexVisible(e.rowIndex),e.column.isPinned()||n.ensureColumnVisible(e.column)}ensureColumnVisible(e){let t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function cb(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var cw=class extends tE{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},cC=class extends tE{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:e,bottomRowBounds:t}=this;return e&&t?Math.max(t.rowTop+t.rowHeight-e.rowTop,0):0}getCurrentPagePixelRange(){let{topRowBounds:e,bottomRowBounds:t}=this;return{pageFirstPixel:e?.rowTop??0,pageLastPixel:t?t.rowTop+t.rowHeight:0}}calculateBounds(e,t){let{rowModel:i}=this.beans,r=i.getRowBounds(e);r&&(r.rowIndex=e),this.topRowBounds=r;let n=i.getRowBounds(t);n&&(n.rowIndex=t),this.bottomRowBounds=n,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},cx=class extends tE{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let e=this.getWidth(),t=e>0;for(let i of this.elements)i&&(eq(i,t),tr(i,e))}},cS=class extends tE{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let{gos:e,visibleCols:t,eventSvc:i}=this.beans,r=is(e,"print"),n=r?0:t.getColsLeftWidth(),o=r?0:t.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,i.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){let e=eZ(this.gridBodyCtrl.eBodyViewport);if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:n}=t,o=r;(o.length||n)&&(i&&(o=i({columns:o,viewportWidth:e})),o?.length&&(o=o.filter(e=>!ra(e)),this.setColsPinned(o,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new cx(e,t)}setColsPinned(e,t,i){let r,{colModel:n,colAnimation:o,visibleCols:s,gos:a}=this.beans;if(!n.cols||!e?.length)return;if(is(a,"print"))return void t7(37);o?.start(),r=!0===t||"left"===t?"left":"right"===t?"right":null;let l=[];for(let t of e){if(!t)continue;let e=n.getCol(t);e&&e.getPinned()!==r&&(this.setColPinned(e,r),l.push(e))}l.length&&(s.refresh(i),rw(this.eventSvc,l,i)),o?.finish()}initCol(e){let{pinned:t,initialPinned:i}=e.colDef;void 0!==t?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){!0===t||"left"===t?e.pinned="left":"right"===t?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){let{scrollVisibleSvc:t}=this.beans;if(null==e.pinned)return;let i="left"===e.pinned,r="right"===e.pinned;e.hidden=!0;let n=()=>{let n=i?this.leftWidth:this.rightWidth;if(null==n)return;let o=0==n,s=e.hidden!==o,a=this.gos.get("enableRtl"),l=t.getScrollbarWidth(),u=t.verticalScrollShowing&&(a&&i||!a&&r);e.comp.setPinnedContainerWidth(`${u?n+l:n}px`),e.comp.setDisplayed(!o),s&&(e.hidden=o,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(e,t){if(t.getPinned()){let{leftWidth:t,rightWidth:i}=this,r=eZ(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(t+i+e>r)if(!(r>t+i))return 0;else e=r-t-i}return e}getPinnedColumnsOverflowingViewport(e){let t=(this.rightWidth??0)+(this.leftWidth??0),i=!1;if(t<e)return{columns:[],hasLockedPinned:i};let{visibleCols:r}=this.beans,n=[...r.leftCols],o=[...r.rightCols],s=0,a=0,l=[],u=t-0-e;for(;(a<n.length||s<o.length)&&u>0;){if(s<o.length){let e=o[s++];if(e.colDef.lockPinned){i=!0;continue}u-=e.getActualWidth(),l.push(e)}if(a<n.length&&u>0){let e=n[a++];if(e.colDef.lockPinned){i=!0;continue}u-=e.getActualWidth(),l.push(e)}}return{columns:l,hasLockedPinned:i}}},ck=class extends tR{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=t_(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let e=this.beans,t=eM(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),e_(i,"live","polite"),e_(i,"relevant","additions text"),e_(i,"atomic",!0),e.eRootDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(null==t||""==t.replace(/[ .]/g,"")){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}\u200B`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(e3(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},cR="ag-delay-render",cE=class extends tE{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){!(this.alreadyRevealed||this.requesters.has(e))&&(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,e=>{e.gridBodyCtrl.eGridBody.classList.add(cR)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;let{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(cR),this.alreadyRevealed=!0}},cP={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},cM=class extends rI{constructor(){super(cP),this.eOverlayWrapper=null,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}")}handleKeyDown(e){if("Tab"!==e.key||e.defaultPrevented||sU(e))return;let{beans:t,eOverlayWrapper:i}=this;if(!(i&&nM(t,i,!1,e.shiftKey)))(e.shiftKey?t.focusSvc.focusGridView({column:i3(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):aV(t,!1))&&e.preventDefault()}updateLayoutClasses(e,t){let i=this.eOverlayWrapper;if(!i)return;let r=i.classList,{AUTO_HEIGHT:n,NORMAL:o,PRINT:s}=sX;r.toggle(n,t.autoHeight),r.toggle(o,t.normal),r.toggle(s,t.print)}postConstruct(){this.createManagedBean(new sY(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper?.classList;if(!t){this.activeCssClass=null;return}this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=i,!e)return this.refreshWrapperPadding(),rN.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),i&&this.isGridFocused()){let e=eP(this.beans);e&&!eD(this.beans)&&(this.elToFocusAfter=e)}return e.then(t=>{let r=this.eOverlayWrapper;if(!r)return void this.destroyBean(t);if(this.activePromise!==e){this.activeOverlay!==t&&(this.destroyBean(t),t=null);return}this.activePromise=null,t&&(this.activeOverlay!==t&&(r.appendChild(t.getGui()),this.activeOverlay=t),i&&this.isGridFocused()&&nP(r))}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}let e=!!this.activeOverlay||!!this.activePromise,t=0;e&&!this.overlayExclusive&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),t!==this.oldWrapperPadding&&(this.oldWrapperPadding=t,this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`))}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let t=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,t&&!this.isGridFocused()&&(t=null),this.destroyBean(e);let i=this.eOverlayWrapper;i&&e3(i),t?.focus?.({preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let e=eP(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},cD={selector:"AG-OVERLAY-WRAPPER",component:cM},cT=["refresh"],cO=e=>({name:e,optionalMethods:cT}),c_={id:"agLoadingOverlay",overlayType:"loading",comp:cO("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{let t=e.get("loading");return!1===t||!0===e.get("suppressLoadingOverlay")&&!0!==t}},cA={id:"agNoRowsOverlay",overlayType:"noRows",comp:cO("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},cF={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:cO("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},cI={id:"agExportingOverlay",overlayType:"exporting",comp:cO("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},cL={id:"activeOverlay",comp:cO("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},cN=class extends tE{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){let e=this.gos;this.showInitialOverlay=ir(e);let t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[i,r,n,o]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),r()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=i,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],e=>this.onPropChange(new Set(e.changeSet?.properties)))}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos;if(!this.eWrapper||e.get("activeOverlay")||this.isDisabled(c_))return;let t=e.get("loading");(t||void 0===t)&&this.doShowOverlay(c_)}showNoRowsOverlay(){this.showInitialOverlay=!1;let e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(cA)||(this.userForcedNoRows=!0,this.doShowOverlay(cA))}async showExportOverlay(e){let{gos:t,beans:i}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(cI)||this.userForcedNoRows&&this.currentDef===cA)return void e();let r=this.getDesiredDefWithOverride(cI);if(!r)return void e();this.exportsInProgress++,this.focusedCell=i.focusSvc.getFocusedCell(),await this.doShowOverlay(r),await new Promise(e=>setTimeout(()=>e()));let n=Date.now();try{e()}finally{let e=Math.max(0,300-(Date.now()-n)),t=()=>{this.exportsInProgress--,0===this.exportsInProgress&&(this.updateOverlay(!1),function(e,t){let i=e.focusSvc,r=i.getFocusedCell();if(r&&t&&aO(r,t)){let{rowIndex:r,rowPinned:n,column:o}=t;eD(e)&&i.setFocusedCell({rowIndex:r,column:o,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!nS})}}(i,this.focusedCell),this.focusedCell=null)};e>0?setTimeout(()=>t(),e):t()}}hideOverlay(){let e=this.gos;this.showInitialOverlay=!1;let t=this.userForcedNoRows;(this.userForcedNoRows=!1,e.get("loading"))?t7(99):e.get("activeOverlay")?t7(296):this.currentDef===cF?t7(297):(this.doHideOverlay(),t&&this.getOverlayDef()!==cA&&this.updateOverlay(!1))}getOverlayWrapperSelector(){return cD}getOverlayWrapperCompClass(){return cM}onPropChange(e){let t=e.has("activeOverlay");if((t||e.has("loading"))&&this.updateOverlay(t))return;let i=this.currentDef,r=this.eWrapper?.activeOverlay;if(r&&i){let t=e.has("activeOverlayParams");if(i===cL)t&&r.refresh?.(this.makeCompParams(!0));else{let t=i.paramsKey;(e.has("overlayComponentParams")||t&&e.has(t))&&r.refresh?.(this.makeCompParams(!1,t,i.overlayType))}}}updateOverlay(e){let t=this.eWrapper;if(!t)return this.currentDef=null,!1;let i=this.getDesiredDefWithOverride(),r=this.currentDef,n=i===cL&&e;return i!==r?i?(this.doShowOverlay(i),!0):(this.disableInitialOverlay(),this.doHideOverlay()):n&&i?(t.hideOverlay(),this.doShowOverlay(i),!0):(i||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){var t;let{gos:i}=this,r=(t=i.get("activeOverlay"))?({agLoadingOverlay:c_,agNoRowsOverlay:cA,agNoMatchingRowsOverlay:cF,agExportingOverlay:cI})[t]??cL:null;return!r&&(r=e??this.getOverlayDef())&&this.isDisabled(r)&&(r=null),r}getOverlayDef(){var e;let{gos:t,beans:i}=this,{colModel:r,rowModel:n}=i,o=t.get("loading");if(void 0!==o){if(this.disableInitialOverlay(),o)return c_}else if(this.showInitialOverlay){if(!this.isDisabled(c_)&&(!t.get("columnDefs")||!r.ready||!t.get("rowData")))return c_;this.disableInitialOverlay()}else this.disableInitialOverlay();return(e=n.getOverlayType())?({loading:c_,noRows:cA,noMatchingRows:cF,exporting:cI})[e]:null}disableInitialOverlay(){this.showInitialOverlay=!1,this.newColumnsLoadedCleanup?.(),this.newColumnsLoadedCleanup=null}doShowOverlay(e){let t,i,{gos:r,beans:n}=this,{userCompFactory:o}=n;this.currentDef=e;let s=e!==cL,a=!!e.exclusive;this.exclusive=a,(e.paramsKey&&r.get(e.paramsKey)||e.compKey&&r.get(e.compKey))&&(t=e.paramsKey),s&&(r.get("overlayComponent")||r.get("overlayComponentSelector"))&&(i=o.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),i??(i=o.getCompDetailsFromGridOptions(e.comp,s?e.id:void 0,this.makeCompParams(!s,t,e.overlayType),!1));let l=i?.newAgStackInstance()??null,u=this.eWrapper?this.eWrapper.showOverlay(l,e.wrapperCls,a):rN.resolve();return this.eWrapper?.refreshWrapperPadding(),this.setExclusive(a),u}makeCompParams(e,t,i){let{gos:r}=this,n=e?r.get("activeOverlayParams"):{...r.get("overlayComponentParams"),...t&&r.get(t)||null,overlayType:i};return iB(r,n??{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;let t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){let{gos:t}=this;return e.overlayType&&t.get("suppressOverlays")?.includes(e.overlayType)||e.isSuppressed?.(t)===!0}},cB=class extends tE{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==b)return b;if(!document.body)return -1;let e=1e6,t=nv()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){let r=2*e;if(i.style.height=r+"px",r>t||i.clientHeight!==r)break;e=r}return i.remove(),b=e,e}(),tz(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;tz(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/t)}},cV=class extends tE{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{for(let e of this.getAllCellCtrls())e.onCellSelectionChanged()},t=()=>{for(let e of this.getAllCellCtrls())e.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},r=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{iP(this.gos)?i():r()}),iP(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:e,previousValue:t})=>{(!t&&e||t&&!e)&&this.redrawRows()});let{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{let e=i.columns;e.length&&this.refreshCells({columns:e,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let e=this.gridBodyCtrl;e.setStickyTopHeight(0),e.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=is(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount();this.cachedRowCtrls=new cH(null!=e?e:3)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=this.cachedRowCtrls?.getEntries()??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}isCellBeingRendered(e,t){let i=this.rowCtrlsByRowIndex[e];return t&&i?!!i.isFullWidth()||!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!i.getCellCtrl(t)||!i.isRowRendered():!!i}updateCellFocus(e){for(let t of this.getAllCellCtrls())t.onCellFocused(e);for(let t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){let t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(let t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(let t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{let{cellFlashSvc:t}=this.beans;if(t)for(let i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(let e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(let e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(let e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(let e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){for(let e of(this.removeGridColumnListeners(),this.colModel.getCols())){let t=t=>{for(let i of this.getAllCellCtrls())i.column===e&&t(i)},i=()=>{t(e=>e.onLeftChanged())},r=()=>{t(e=>e.onWidthChanged())},n=()=>{t(e=>e.onFirstRightPinnedChanged())},o=()=>{t(e=>e.onLastLeftPinnedChanged())},s=()=>{t(e=>e.onColDefChanged())};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",r),e.__addEventListener("firstRightPinnedChanged",n),e.__addEventListener("lastLeftPinnedChanged",o),e.__addEventListener("colDefChanged",s),this.destroyFuncsForColumnListeners.push(()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",r),e.__removeEventListener("firstRightPinnedChanged",n),e.__removeEventListener("lastLeftPinnedChanged",o),e.__removeEventListener("colDefChanged",s)})}}onDomLayoutChanged(){let e=is(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){let t=[];for(let i of this.getAllRowCtrls()){let r=i.getCellCtrl(e,!0)?.eGui;r&&t.push(r)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){let{pinnedRowModel:r,beans:n,printLayout:o}=this,s=Object.fromEntries(e.map(e=>[e.rowNode.id,e]));r?.forEachPinnedRow(t,(a,l)=>{let u=e[l];u&&void 0===r.getPinnedRowById(u.rowNode.id,t)&&(u.destroyFirstPass(),u.destroySecondPass()),a.id in s&&i?(e[l]=s[a.id],delete s[a.id]):e[l]=new cv(a,n,!1,!1,o)}),e.length=("top"===t?r?.getPinnedTopRowCount():r?.getPinnedBottomRowCount())??0}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);let t=t=>{let i=t[e.rowIndex];i&&i.rowNode===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){let{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),null!=e){for(let t of e??[])this.redrawRow(t,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);let i=!e.domLayoutChanged&&!!e.recycleRows,r=e.animate&&ig(this.gos),n=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:o,gos:s}=this;if(o){o.checkStickyRows();let e=o.extraTopHeight+o.extraBottomHeight;e&&this.updateContainerHeights(e)}this.recycleRows(n,r),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(s.get("enableRowPinning")?i:void 0),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){let{rowContainerHeight:t}=this;if(this.printLayout)return void t.setModelHeight(null);let i=this.pageBounds.getCurrentPageHeight();0===i&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw Error(it(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;let t=this.beans.focusSvc,i=this.findPositionToFocus(e);i?e.rowIndex!==i.rowIndex||e.rowPinned!=i.rowPinned?t.setFocusedCell({...i,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0}):t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(iB(this.gos,{...i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"})):t.focusHeaderPosition({headerPosition:{headerRowIndex:aH(this.beans)-1,column:e.column}})}findPositionToFocus(e){let{pagination:t,pageBounds:i}=this.beans,r=e;for(null==r.rowPinned&&t&&i&&!t.isRowInPage(r.rowIndex)&&(r={rowPinned:null,rowIndex:i.getFirstRow()});r;){if(null==r.rowPinned&&i)if(r.rowIndex<i.getFirstRow()){if(!(r=aF(this.beans,{rowPinned:null,rowIndex:0})))break}else r.rowIndex>i.getLastRow()&&(r={rowPinned:null,rowIndex:i.getLastRow()});let t=this.getRowByPosition(r);if(t?.isAlive())return{...t.getRowPosition(),column:e.column};r=aF(this.beans,r)}return null}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),i=t.length;for(let r=0;r<i;r++){let i=t[r].getAllCellCtrls(),n=i.length;for(let t=0;t<n;t++)e.push(i[t])}return e}getAllRowCtrls(){let{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){let r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(e,i)}refreshCells({rowNodes:e,columns:t,force:i,suppressFlash:r}={}){let n={force:i,newData:!1,suppressFlash:r};for(let i of this.getCellCtrls(e,t))i.refreshOrDestroyCell(n);this.refreshFullWidth(e)}refreshRows(e={}){for(let t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(let i of this.getRowCtrls(e))i.isFullWidth()&&(i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0)));t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){let t=cz(e),i=this.getAllRowCtrls();return e&&t?i.filter(e=>cj(e.rowNode,t)):i}getCellCtrls(e,t){let i;ev(t)&&(i={},t.forEach(e=>{let t=this.colModel.getCol(e);ev(t)&&(i[t.getId()]=!0)}));let r=[];for(let t of this.getRowCtrls(e))for(let e of t.getAllCellCtrls()){let t=e.column.getId();i&&!i[t]||r.push(e)}return r}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let e=[];for(let t of Object.keys(this.rowCtrlsByRowIndex))null==this.rowCtrlsByRowIndex[t].rowNode.id&&e.push(t);this.removeRowCtrls(e);let t={};for(let e of Object.values(this.rowCtrlsByRowIndex))t[e.rowNode.id]=e;return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(let i of e){let e=this.rowCtrlsByRowIndex[i];e&&(e.destroyFirstPass(t),e.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){let t,{focusSvc:i,animationFrameSvc:r}=this.beans,{afterScroll:n}=e,o=this.stickyRowFeature;o&&(t=i?.getFocusCellToUseAfterRefresh()||void 0);let s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();let e=o.extraTopHeight+o.extraBottomHeight;e&&this.updateContainerHeights(e)}let u=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if((!n||l||u)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),null!=t)){let e=i?.getFocusCellToUseAfterRefresh();null!=t&&null==e&&(r?.flushAllFrames(),this.restoreFocusedCell(t))}}removeRowCompsNotToDraw(e,t){let i={};for(let t of e)i[t]=!0;let r=Object.keys(this.rowCtrlsByRowIndex).filter(e=>!i[e]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){let t=[];for(let e=this.firstRenderedRow;e<=this.lastRenderedRow;e++)t.push(e);let i=this.beans.pagination,r=this.beans.focusSvc?.getFocusedCell()?.rowIndex;null!=r&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&(!i||i.isRowInPage(r))&&r<this.rowModel.getRowCount()&&t.push(r);let n=e=>{let i=e.rowNode.rowIndex;null!=i&&i!==r&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(e)&&t.push(i)};for(let e of Object.values(this.rowCtrlsByRowIndex))n(e);if(e)for(let t of Object.values(e))n(t);t.sort((e,t)=>e-t);let o=[];for(let e=0;e<t.length;e++){let i=t[e],r=this.rowModel.getRow(i);r&&!r.sticky&&o.push(i)}return o}recycleRows(e,t=!1,i=!1){let r=this.calculateIndexesToDraw(e);for(let n of((this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(r,!t),r))this.createOrUpdateRowCtrl(n,e,t,i);if(e){let{animationFrameSvc:r}=this.beans;r?.active&&i&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];for(let t of this.getFullWidthRowCtrls()){let i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=cz(e);return this.getAllRowCtrls().filter(e=>{if(!e.isFullWidth())return!1;let i=e.rowNode;return null==t||!!cj(i,t)})}createOrUpdateRowCtrl(e,t,i,r){let n,o=this.rowCtrlsByRowIndex[e];if(!o&&ev(n=this.rowModel.getRow(e))&&ev(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null),!o){if(n||(n=this.rowModel.getRow(e)),!ev(n))return;o=this.createRowCon(n,i,r)}n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){let i=[];if(e){for(let r of Object.values(e))if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);continue}if(r.destroyFirstPass(!t),t){let e=r.instanceId;this.zombieRowCtrls[e]=r,i.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[e]})}else r.destroySecondPass()}}t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(let e of i)e()},400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*id(this.beans)}workOutFirstAndLastRowsToRender(){let e,t,{rowContainerHeight:i,pageBounds:r,rowModel:n}=this;if(i.updateOffset(),n.isRowsToRender())if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),e=r.getFirstRow(),t=r.getLastRow();else{let o,s,a=this.getRowBufferInPixels(),l=this.ctrlsSvc.getScrollFeature(),u=this.gos.get("suppressRowVirtualisation"),d=!1;do{let e=r.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:n}=r.getCurrentPagePixelRange(),c=i.divStretchOffset,h=l.getVScrollPosition(),p=h.top,f=h.bottom;u?(o=t+c,s=n+c):(o=Math.max(p+e-a,t)+c,s=Math.min(f+e+a,n)+c),this.firstVisibleVPixel=Math.max(p+e,t)+c,this.lastVisibleVPixel=Math.min(f+e,n)+c,d=this.ensureAllRowsInRangeHaveHeightsCalculated(o,s)}while(d)let c=n.getRowIndexAtPixel(o),h=n.getRowIndexAtPixel(s),p=r.getFirstRow(),f=r.getLastRow();c<p&&(c=p),h>f&&(h=f),e=c,t=h}else e=0,t=-1;let o=is(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!s&&t-e>a&&(t=e+a);let l=e!==this.firstRenderedRow,u=t!==this.lastRenderedRow;(l||u)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,tu(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let i=this.pinnedRowModel?.ensureRowHeightsValid(),r=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:n,rowModel:o}=this,s=o.ensureRowHeightsValid(e,t,n.getFirstRow(),n.getLastRow());return(s||r)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),(!!r||!!s||!!i)&&(this.updateContainerHeights(),!0)}doNotUnVirtualiseRow(e){let t=e.rowNode,i=this.focusSvc.isRowFocused(t.rowIndex,t.rowPinned),r=this.editSvc?.isEditing(e),n=t.detail;return!!(i||r||n)&&!!this.isRowPresent(t)}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(this.beans.pagination?.isRowInPage(e.rowIndex)??!0)}createRowCon(e,t,i){let r=this.cachedRowCtrls?.getRow(e)??null;if(r)return r;let n=i&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new cv(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){let e=Object.values(this.rowCtrlsByRowIndex).map(e=>e.rowNode);return[...this.getStickyTopRowCtrls().map(e=>e.rowNode),...e,...this.getStickyBottomRowCtrls().map(e=>e.rowNode)]}getRowByPosition(e){let t,{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:!(t=this.rowCtrlsByRowIndex[i])&&((t=this.getStickyTopRowCtrls().find(e=>e.rowNode.rowIndex===i)||null)||(t=this.getStickyBottomRowCtrls().find(e=>e.rowNode.rowIndex===i)||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},cH=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(e?.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return null!=this.entriesMap[e.id]}removeRow(e){let t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],i6(this.entriesList,i)}removeFromCache(e){let t=e.rowNode.id;delete this.entriesMap[t],i6(this.entriesList,e)}getEntries(){return this.entriesList}};function cz(e){if(!e)return;let t={top:{},bottom:{},normal:{}};for(let i of e){let e=i.id;switch(i.rowPinned){case"top":t.top[e]=i;break;case"bottom":t.bottom[e]=i;break;default:t.normal[e]=i}}return t}function cj(e,t){let i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}var cG=class extends tE{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){let{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=iv(e),this.firstLeaf=ir(e)?lR:cW,this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=iv(e))}doFullSort(e,t){let i=e.map((e,t)=>({currentPos:t,rowNode:e}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(e=>e.rowNode)}compareRowNodes(e,t,i){let r=t.rowNode,n=i.rowNode;for(let t=0,i=e.length;t<i;t++){let i,o=e[t],s="desc"===o.sort,a=this.getValue(r,o.column),l=this.getValue(n,o.column),u=this.getComparator(o,r);if(u)i=u(a,l,r,n,s);else{let e={accentedCompare:this.isAccentedSort};"absolute"===o.type&&(e.transform=cU),i=function(e,t,i={}){var r,n,o,s;i.transform&&(e=i.transform(e),t=i.transform(t));let a=null==e,l=null==t;if(e?.toNumber&&(e=e.toNumber()),t?.toNumber&&(t=t.toNumber()),a&&l)return 0;if(a)return -1;if(l)return 1;if("string"!=typeof e||!i.accentedCompare){return(r=e)>(n=t)?1:r<n?-1:0}try{return e.localeCompare(t)}catch(i){return(o=e)>(s=t)?1:o<s?-1:0}}(a,l,e)}if(!isNaN(i)&&0!==i)return"asc"===o.sort?i:-1*i}return t.currentPos-i.currentPos}getComparator(e,t){let i=e.column.getColDef(),r=this.getComparatorFromColDef(i,e);if(r)return r;if(!i.showRowGroup)return;let n=!t.group&&i.field;if(!n)return;let o=this.beans.colModel.getColDefCol(n);if(o)return this.getComparatorFromColDef(o.getColDef(),e)}getComparatorFromColDef(e,t){let i=e.comparator;if(null!=i)return"object"==typeof i?i[iZ(t.type)]:i}getValue(e,t){if(this.primaryColumnsSortGroups&&e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return;let{valueSvc:i,formula:r}=this.beans,n=i.getValue(t,e,!1);return t.isAllowFormula()&&r?.isFormula(n)?r.resolveValue(t,e):n}getGroupDataValue(e,t){let{gos:i,valueSvc:r,colModel:n,showRowGroupCols:o}=this.beans;if(iw(i,n.isPivotActive())){let i=this.firstLeaf(e);return i&&r.getValue(t,i,!1)}let s=o?.getShowRowGroupCol(t.getId());if(s)return e.groupData?.[s.getId()]}},cW=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;t?.length;){let e=t[0];if(e.data)return e;t=e.childrenAfterGroup}};function cU(e){if(!e)return e;let t=Number(e);return isNaN(t)?e:Math.abs(t)}var c$=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),cq={tag:"span",cls:"ag-sort-indicator-container",children:[c$("Order","order"),c$("Asc","ascending-icon"),c$("Desc","descending-icon"),c$("Mixed","mixed-icon"),c$("AbsoluteAsc","absolute-ascending-icon"),c$("AbsoluteDesc","absolute-descending-icon"),c$("None","none-icon")]},cK=class extends rI{constructor(e){super(),this.eSortOrder=null,this.eSortAsc=null,this.eSortDesc=null,this.eSortMixed=null,this.eSortNone=null,this.eSortAbsoluteAsc=null,this.eSortAbsoluteDesc=null,e||this.setTemplate(cq)}attachCustomElements(e,t,i,r,n,o,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=r,this.eSortNone=n,this.eSortAbsoluteAsc=o,this.eSortAbsoluteDesc=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);let i=this.updateIcons.bind(this),r=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:r,columnRowGroupChanged:r}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;let r=a6(e,this.beans,i);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:i,eSortAbsoluteDesc:r,eSortNone:n,column:o,gos:s,beans:a}=this,l=a.sortSvc.getDisplaySortForColumn(o),u=iZ(l?.type),d=iY(l?.direction),c=o.getAvailableSortTypes(),h=c.has("default"),p=c.has("absolute"),f="absolute"===u,g="default"===u,m="asc"===d,v="desc"===d;e&&eq(e,m&&g&&h,{skipAriaHidden:!0}),t&&eq(t,v&&g&&h,{skipAriaHidden:!0}),n&&eq(n,!(!o.getColDef().unSortIcon&&!s.get("unSortIcon"))&&!d,{skipAriaHidden:!0}),i&&eq(i,m&&f&&p,{skipAriaHidden:!0}),r&&eq(r,v&&f&&p,{skipAriaHidden:!0})}setupMultiSortIndicator(){let{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);let r=t.getColDef().showRowGroup;iv(i)&&r&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:e,beans:t,column:i}=this;e&&eq(e,t.sortSvc.getDisplaySortForColumn(i)?.direction==="mixed",{skipAriaHidden:!0})}updateSortOrder(){let{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;let r=i.getColumnsWithSortingOrdered(),n=i.getDisplaySortIndexForColumn(t)??-1,o=r.some(e=>i.getDisplaySortIndexForColumn(e)??!1);eq(e,n>=0&&o,{skipAriaHidden:!0}),n>=0?e.textContent=(n+1).toString():e3(e)}},cQ={selector:"AG-SORT-INDICATOR",component:cK},cX={moduleName:"Sort",version:tZ,beans:[class extends tE{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){let r=this.getNextSortDirection(e);this.setSortForColumn(e,r,t,i)}progressSortFromEvent(e,t){let i="ctrl"===this.gos.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,i,r){let{gos:n,showRowGroupCols:o}=this.beans,s=iv(n),a=[e];if(s&&e.getColDef().showRowGroup){let t=o?.getSourceColumnsForGroupColumn?.(e),i=t?.filter(e=>e.isSortable());i&&(a=[e,...i])}for(let e of a)this.setColSort(e,t,r);let l=(i||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort"),u=[];if(!l){let e=this.clearSortBarTheseColumns(a,r);u.push(...e)}this.updateSortIndex(e),u.push(...a),this.dispatchSortChangedEvents(r,u)}updateSortIndex(e){let{gos:t,colModel:i,showRowGroupCols:r}=this.beans,n=iv(t),o=r?.getShowRowGroupCol(e.getId()),s=n&&o||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(e=>this.setColSortIndex(e,null));let l=a.filter(e=>(!n||!e.getColDef().showRowGroup)&&e!==s);(s.getSortDef()?[...l,s]:l).forEach((e,t)=>this.setColSortIndex(e,t))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){let i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){let i=[];return this.beans.colModel.forAllCols(r=>{e.includes(r)||(r.getSortDef()&&i.push(r),this.setColSort(r,void 0,t))}),i}getNextSortDirection(e){let t=e.getSortingOrder(),i=e.getSortDef(),r=t.findIndex(e=>iX(e,i))+1;return r>=t.length&&(r=0),i$(t[r])}getIndexedSortMap(){let{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:r}=this.beans,n=[];if(t.forAllCols(e=>{e.getSortDef()&&n.push(e)}),t.isPivotMode()){let t=iv(e);n=n.filter(e=>{let r=!!e.getAggFunc(),n=!e.isPrimary(),o=t?i?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return r||n||o})}let o=r?.columns.filter(e=>!!e.getSortDef())??[],s={};n.forEach((e,t)=>s[e.getId()]=t),n.sort((e,t)=>{let i=e.getSortIndex(),r=t.getSortIndex();return null!=i&&null!=r?i-r:null==i&&null==r?s[e.getId()]>s[t.getId()]?1:-1:null==r?-1:1});let a=iv(e)&&!!o.length;a&&(n=[...new Set(n.map(e=>i?.getShowRowGroupCol(e.getId())??e))]);let l=new Map;if(n.forEach((e,t)=>l.set(e,t)),a)for(let e of o){let t=i.getShowRowGroupCol(e.getId());l.set(e,l.get(t))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}collectSortItems(e=!1){let t=[];for(let i of this.getColumnsWithSortingOrdered()){let r=i.getSortDef()?.direction;if(!r)continue;let n={sort:r,type:iZ(i.getSortDef()?.type)};e?n.colId=i.getId():n.column=i,t.push(n)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){let t=iv(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){let t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSortDef();let i=null!=e.getColDef().field||e.getColDef().valueGetter?[e,...t]:t,r=i[0].getSortDef();return i.every(e=>iX(e.getSortDef(),r))?r:{type:iZ(e.getSortDef()?.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){let i=()=>{let{type:i,direction:r}=i$(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc","asc"===r),e.toggleCss("ag-header-cell-sorted-desc","desc"===r),e.toggleCss("ag-header-cell-sorted-abs-asc","absolute"===i&&"asc"===r),e.toggleCss("ag-header-cell-sorted-abs-desc","absolute"===i&&"desc"===r),e.toggleCss("ag-header-cell-sorted-none",!r),t.getColDef().showRowGroup){let i=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t),n=i?.every(e=>r==e.getSortDef()?.direction);e.toggleCss("ag-header-cell-sorted-mixed",!n)}};e.addManagedEventListeners({sortChanged:i,columnRowGroupChanged:i})}initCol(e){let{sortIndex:t,initialSortIndex:i}=e.colDef,r=rc(e.colDef);r&&e.setSortDef(r,!0),void 0!==t?null!==t&&(e.sortIndex=t):null!==i&&(e.sortIndex=i)}updateColSort(e,t,i){void 0!==t&&this.setColSort(e,i$(t),i)}setColSort(e,t,i){iX(e.getSortDef(),t)||(e.setSortDef(i$(t),void 0===t),e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new cK(e)}getSortIndicatorSelector(){return cQ}},cG],apiFunctions:{onSortChanged:function(e){e.sortSvc?.onSortChanged("api")}},userComponents:{agSortIndicator:cK},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},cY=class extends tE{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){let{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){let{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),tz(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,ru(e.source))}}},cZ=class extends tE{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){let{gos:e,rowModel:t}=this.beans;ir(e,t)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){let{gos:t,rowRenderer:i}=this.beans;if("paste"===e.source||t.get("suppressChangeDetection"))return;let r=e.node,n=[r],o=this.clientSideRowModel,s=o?.rootNode;if(s&&!r.isRowPinned()){let i=new l8(t.get("aggregateOnlyChangedColumns"),s);i.addParentNode(r.parent,[e.column]),o.doAggregate(i),i.forEachChangedNodeDepthFirst(e=>{n.push(e),e.sibling&&n.push(e.sibling)})}i.refreshCells({rowNodes:n})}},cJ=class extends tE{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);t9(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return t9(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){let t=this.cache;if(t[e])return t[e];let i=Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",this.createFunctionBody(e));return t[e]=i,i}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},c0=class extends tE{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){let e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){let r=this.cacheVersion;e.__cacheVersion!==r&&(e.__cacheVersion=r,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}},c1={moduleName:"CommunityCore",version:tZ,beans:[dy,lY,uG,rV,cB,uS,dp,dB,rP,cC,cw,cV,class extends tE{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){let{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=io(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;let i=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addListener("cellValueChanged",i,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",i,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(e){let{column:t,node:i,includeValueFormatted:r,useRawFormula:n,exporting:o,source:s="ui"}=e,{showRowGroupColValueSvc:a}=this.beans,l=!t&&i.group,u=t?.colDef.showRowGroup,d=!this.isTreeData||i.footer;if(a&&d&&(l||u)){let e=a.getGroupValue(i,t);if(null==e)return{value:null,valueFormatted:null};if(!r)return{value:e.value,valueFormatted:null};let n=a.formatAndPrefixGroupColValue(e,t,o);return{value:e.value,valueFormatted:n}}if(!t)return{value:i.key,valueFormatted:null};let c=i.leafGroup&&this.colModel.isPivotMode(),h=i.group&&i.expanded&&!i.footer&&!c,p=this.gos.get("groupSuppressBlankHeader")||!i.sibling,f=this.getValue(t,i,h&&!p,s),g=f,{formula:m}=this.beans,v=r&&!(o&&!1===t.colDef.useValueFormatterForExport);return t.isAllowFormula()&&m?.isFormula(f)&&(n?(f=m.normaliseFormula(f,!0),g=m.resolveValue(t,i)):g=f=m.resolveValue(t,i)),{value:f,valueFormatted:v?this.formatValue(t,i,g):null}}getValue(e,t,i=!1,r="ui"){if(this.initialised||this.init(),!t)return;if(this.hasEditSvc&&"ui"===r){let i=this.editSvc;if(i.isEditing()){let r=i.getCellDataValue({rowNode:t,column:e},!0);if(void 0!==r)return r}}let n=e.getColDef().showRowGroup;if("string"==typeof n&&(this.beans.rowGroupColsSvc?.getColumnIndex(n)??-1)>t.level)return null;let o=this.resolveValue(e,t,i);if(this.cellExpressions&&eR(o)){let i=o.substring(1);o=this.executeValueGetter(i,t.data,e,t)}return o}getFormulaFromDataSource(e,t){let i=this.formulaDataSvc;if(!i?.hasDataSource()||!e.isAllowFormula())return;let r=i.getFormula({column:e,rowNode:t});return eR(r)?r:void 0}resolveValue(e,t,i){let r=e.getColDef(),n=e.getColId(),o=this.isTreeData,s=this.getFormulaFromDataSource(e,t);if(void 0!==s)return s;let a=!i&&t.aggData&&void 0!==t.aggData[n];if(o&&a)return t.aggData[n];let l=t.data,u=r.field;if(o&&r.valueGetter)return this.executeValueGetter(r.valueGetter,l,e,t);if(o&&u&&l)return u_(l,u,e.isFieldContainsDots());let d=t.groupData;if(d&&n in d)return t.groupData[n];if(a)return t.aggData[n];let c=r.showRowGroup,h="string"!=typeof c||!t.group,p=this.isSsrm&&i&&!!r.aggFunc,f=this.isSsrm&&t.footer&&t.field&&(!0===c||c===t.field);if(r.valueGetter&&!p){if(!h)return;return this.executeValueGetter(r.valueGetter,l,e,t)}if(f)return u_(l,t.field,e.isFieldContainsDots());if(u&&l&&!p){if(!h)return;return u_(l,u,e.isFieldContainsDots())}}parseValue(e,t,i,r){let n=e.getColDef();if(n.allowFormula&&this.beans.formula?.isFormula(i))return i;let o=n.valueParser;if(ev(o)){let s=iB(this.gos,{node:t,data:t?.data,oldValue:r,newValue:i,colDef:n,column:e});return"function"==typeof o?o(s):this.expressionSvc?.evaluate(o,s)}return i}getDeleteValue(e,t){return ev(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t}).value)??null:null}formatValue(e,t,i,r,n=!0){let o,{expressionSvc:s}=this.beans,a=null,l=e.getColDef();if(r?o=r:n&&(o=l.valueFormatter),o){let r=t?t.data:null,n=iB(this.gos,{value:i,node:t,data:r,colDef:l,column:e});a="function"==typeof o?o(n):s?s.evaluate(o,n):null}else if(l.refData)return l.refData[i]||"";return null==a&&Array.isArray(i)&&(a=i.join(", ")),a}setValue(e,t,i,r){let n=this.colModel.getColDefCol(t);if(!e||!n)return!1;this.ensureRowData(e);let o=n.getColDef();if(!this.isSetValueSupported({column:n,newValue:i,colDef:o}))return!1;let s=iB(this.gos,{node:e,data:e.data,oldValue:this.getValue(n,e,void 0,r),newValue:i,colDef:o,column:n});s.newValue=i;let a=this.handleExternalFormulaChange({column:n,eventSource:r,newValue:i,setterParams:s,rowNode:e});if(null!==a)return a;let l=this.computeValueChange({column:n,newValue:i,params:s,rowData:e.data,valueSetter:o.valueSetter,field:o.field});return void 0===l&&(l=!0),!!l&&this.finishValueChange(e,n,s,r)}finishValueChange(e,t,i,r){e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let n=this.getValue(t,e);return this.dispatchCellValueChangedEvent(e,i,n,r),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,i,n,r),!0}ensureRowData(e){ey(e.data)&&(e.data={})}isSetValueSupported(e){let{column:t,newValue:i,colDef:r}=e,{field:n,valueSetter:o}=r,s=this.beans.formula,a=t.isAllowFormula()&&s?.isFormula(i),l=!!this.formulaDataSvc?.hasDataSource();return ey(n)&&ey(o)&&!(l&&a)?(t7(17),!1):!this.dataTypeSvc||!!this.dataTypeSvc.checkType(t,i)||(t7(135),!1)}handleExternalFormulaChange(e){let{column:t,rowNode:i,newValue:r,eventSource:n,setterParams:o}=e,s=this.beans.formula,a=this.formulaDataSvc;if(!a?.hasDataSource()||!t.isAllowFormula())return null;let l=s?.isFormula(r),u=a.getFormula({column:t,rowNode:i});if(l){if(u===r)return!1;a.setFormula({column:t,rowNode:i,formula:r});let e=s?.resolveValue(t,i),l=t.getColDef();if(ev(l.valueSetter)||!ey(l.field)){let r={...o,newValue:e};this.computeValueChange({column:t,newValue:e,params:r,rowData:i.data,valueSetter:l.valueSetter,field:l.field})}return this.finishValueChange(i,t,o,n)}return void 0!==u&&a.setFormula({column:t,rowNode:i,formula:void 0}),null}computeValueChange(e){let{valueSetter:t,params:i,rowData:r,field:n,column:o,newValue:s}=e;return ev(t)?"function"==typeof t?t(i):this.expressionSvc?.evaluate(t,i):this.setValueUsingField(r,n,s,o.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,i,r){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:r})}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;"function"==typeof t&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,r){if(!t)return!1;let n=!1;if(r){let r=t.split("."),o=e;for(;r.length>0&&o;){let e=r.shift();0===r.length?(n=o[e]===i)||(o[e]=i):o=o[e]}}else(n=e[t]===i)||(e[t]=i);return!n}executeValueGetterWithValueCache(e,t,i,r){let n=i.getColId(),o=this.valueCache.getValue(r,n);if(void 0!==o)return o;let s=this.executeValueGetterWithoutValueCache(e,t,i,r);return this.valueCache.setValue(r,n,s),s}executeValueGetterWithoutValueCache(e,t,i,r){let n=iB(this.gos,{data:t,node:r,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,r)});return"function"==typeof e?e(n):this.expressionSvc?.evaluate(e,n)}getValueCallback(e,t){let i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){let i=this.getValue(e,t),r=e.getColDef().keyCreator,n=i;return r&&(n=r(iB(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))),"string"==typeof n||null==n||"[object Object]"===(n=String(n))&&t7(121),n}},dm,dh,dv,uW,cY,uH,uz,dW],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:function(e){return e.context.getId()},destroy:function(e){e.gridDestroySvc.destroy()},isDestroyed:function(e){return e.gridDestroySvc.destroyCalled},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){lZ(e,{[t]:i})},updateGridOptions:lZ,isModuleRegistered:function(e,t){let i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}},dependsOn:[{moduleName:"DataType",version:tZ,beans:[uF],dependsOn:[{moduleName:"CheckboxCellRenderer",version:tZ,userComponents:{agCheckboxCellRenderer:lu}}]},{moduleName:"ColumnMove",version:tZ,beans:[um,ua],apiFunctions:{moveColumnByIndex:function(e,t,i){e.colMoves?.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){e.colMoves?.moveColumns(t,i,"api")}},dependsOn:[us],css:[":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}"]},{moduleName:"ColumnResize",version:tZ,beans:[uw],apiFunctions:{setColumnWidths:function(e,t,i=!0,r="api"){e.colResize?.setColumnWidths(t,!1,i,r)}},dependsOn:[{moduleName:"HorizontalResize",version:tZ,beans:[l2],dependsOn:[uo]},uv]},cX,{moduleName:"ColumnHeaderComp",version:tZ,userComponents:{agColumnHeader:dH},icons:{menu:"menu",menuAlt:"menu-alt"}},{moduleName:"ColumnGroup",version:tZ,dynamicBeans:{headerGroupCellCtrl:ux},beans:[uE],apiFunctions:{getAllDisplayedColumnGroups:function(e){return e.visibleCols.getAllTrees()},getCenterDisplayedColumnGroups:function(e){return e.visibleCols.treeCenter},getColumnGroup:function(e,t,i){return e.colGroupSvc?.getColumnGroup(t,i)??null},getColumnGroupState:function(e){return e.colGroupSvc?.getColumnGroupState()??[]},getDisplayNameForColumnGroup:function(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""},getLeftDisplayedColumnGroups:function(e){return e.visibleCols.treeLeft},getProvidedColumnGroup:function(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null},getRightDisplayedColumnGroups:function(e){return e.visibleCols.treeRight},resetColumnGroupState:function(e){e.colGroupSvc?.resetColumnGroupState("api")},setColumnGroupOpened:function(e,t,i){e.colGroupSvc?.setColumnGroupOpened(t,i,"api")},setColumnGroupState:function(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}}},{moduleName:"ColumnGroupHeaderComp",version:tZ,userComponents:{agColumnGroupHeader:dj},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},{moduleName:"Overlay",version:tZ,userComponents:{agLoadingOverlay:a9,agNoRowsOverlay:lr,agNoMatchingRowsOverlay:lo,agExportingOverlay:lt},apiFunctions:{showLoadingOverlay:function(e){e.overlays?.showLoadingOverlay()},showNoRowsOverlay:function(e){e.overlays?.showNoRowsOverlay()},hideOverlay:function(e){e.overlays?.hideOverlay()}},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[cN]},{moduleName:"ChangeDetection",version:tZ,beans:[cZ]},{moduleName:"AnimationFrame",version:tZ,beans:[dG]},{moduleName:"KeyboardNavigation",version:tZ,beans:[cy,d$,dg],apiFunctions:{getFocusedCell:function(e){return e.focusSvc.getFocusedCell()},clearFocusedCell:function(e){return e.focusSvc.clearFocusedCell()},setFocusedCell:function(e,t,i,r){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:r,forceBrowserFocus:!0})},setFocusedHeader:function(e,t,i=!1){let r=e.headerNavigation?.getHeaderPositionForColumn(t,i);r&&e.focusSvc.focusHeaderPosition({headerPosition:r})},tabToNextCell:function(e,t){return e.navigation?.tabToNextCell(!1,t)??!1},tabToPreviousCell:function(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}}},{moduleName:"PinnedColumn",version:tZ,beans:[cS],css:[".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}"]},{moduleName:"Aria",version:tZ,beans:[class extends ck{}]},{moduleName:"Touch",version:tZ,beans:[dU]},{moduleName:"CellRendererFunction",version:tZ,beans:[uj]},{moduleName:"ColumnFlex",version:tZ,beans:[uO]},{moduleName:"Expression",version:tZ,beans:[cJ]},{moduleName:"SkeletonCellRenderer",version:tZ,userComponents:{agSkeletonCellRenderer:uM}},{moduleName:"ColumnDelayRender",version:tZ,beans:[cE],css:[":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}"]}]},c2={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1,Formula:1},c5=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],c3={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:c5,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...c5,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...c5,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},c4={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"},c8=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `;function c6(e,t=!1){return t&&("IntegratedCharts"===e||"Sparklines"===e)?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function c7({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var c9=({reasonOrId:e,moduleName:t,gridScoped:i,gridId:r,rowModelType:n,additionalText:o,isUmd:s})=>{let a,l=function(e,t){let i=[];for(let r of Array.isArray(e)?e:[e]){let e=c3[r];if(e)for(let r of e){let e=c4[r];e&&e!==t||i.push(r)}else i.push(r)}return i}(t,n),u="string"==typeof e?e:hr[e];if(s){let e,t;return e=l.filter(e=>"IntegratedCharts"===e||"Sparklines"===e),t="",!globalThis?.agCharts&&e.length>0?t=`Unable to use ${u} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:l.some(e=>c2[e])&&(t+=`Unable to use ${u} as that requires the ag-grid-enterprise script to be included.
`),t}let d=l.filter(e=>"IntegratedCharts"===e||"Sparklines"===e),c=d.length>0?`${d.map(e=>c6(e)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"",h=`Unable to use ${u} as ${l.length>1?"one of "+l.map(e=>c6(e)).join(", "):c6(l[0])} is not registered${i?" for gridId: "+r:""}. ${c} Check if you have registered the module:
`;return`${h}
${a=l.map(e=>`import { ${c6(e)} } from '${c2[e]?"ag-grid-enterprise":"ag-grid-community"}';`),l.some(e=>"IntegratedCharts"===e||"Sparklines"===e)&&a.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${a.join(" \n")} 

ModuleRegistry.registerModules([ ${l.map(e=>c6(e,!0)).join(", ")} ]); 

For more info see: ${t1}/modules/`}`+(o?` 

${o}`:"")},he=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,ht={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
AG Grid: Unable to use the Clipboard API (navigator.clipboard.${t}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:r})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${r?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:r})=>{let n=[],o=nY({inputValue:t,allSuggestions:[...Object.keys(i??[]).filter(e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e)),...Object.keys(r??[]).filter(e=>!!r[e])],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return n.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),o.length>0&&n.push(`         Did you mean: [${o.slice(0,3)}]?
`),n.push("If using a custom component check it has been registered correctly."),n},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${t1}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{let i=nY({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,i.length>0?`         Did you mean: [${i.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join("\n")},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:c9,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${t1}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>"cannot get grid to draw rows when it is in the middle of drawing rows. \nYour code probably called a grid API method while the grid was in the render stage. \nTo overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). \nTo see what part of your code that caused the refresh check this stacktrace.",253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>he("IntegratedChartsModule"),258:()=>he("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:r,rowModelType:n})=>c9({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:dC[t],gridId:r,gridScoped:i,rowModelType:n}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${t1}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>c8(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children."}return t},275:c7,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`,293:()=>"The grid was initialised detached from the DOM and was then inserted into a Shadow Root. Theme styles are probably broken. Pass the themeStyleContainer grid option to let the grid know where in the document to insert theme CSS.",294:()=>"When using the `agRichSelectCellEditor` setting `filterListAsync = true` requires `allowTyping = true` and the `values()` callback must return a Promise of filtered values.",295:({blockedService:e})=>`colDef.allowFormula is not supported with ${e}. Formulas has been turned off.`,296:()=>"Since v35, `api.hideOverlay()` does not hide the overlay when `activeOverlay` is set. Set `activeOverlay=null` instead.",297:()=>'`api.hideOverlay()` does not hide the no matching rows overlay as it is only controlled by grid state. Set `suppressOverlays=["noMatchingRows"] to not show it.'};function hi(e,t){let i=ht[e];if(!i)return[`Missing error text for error id ${e}!`];let r=i(t),n=t8(e,t),o=`
See ${n}`;return Array.isArray(r)?r.concat(o):[r,o]}var hr={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},hn=new WeakMap,ho=new WeakMap,hs=1,ha=class{create(e,t,i,r,n,o){let s=tN.applyGlobalGridOptions(t),a=s.gridId??String(hs++),l=this.getRegisteredModules(n,a,s.rowModelType),u=this.createBeansList(s.rowModelType,l,a),d=this.createProvidedBeans(e,s,n);if(!u)return;let c=new o$({providedBeanInstances:d,beanClasses:u,id:a,beanInitComparator:lG,beanDestroyComparator:lW,derivedBeans:[lz],destroyCallback:()=>{ho.delete(h),hn.delete(e),delete t$[a],o?.()}});this.registerModuleFeatures(c,l),i(c),c.getBean("syncSvc").start(),r?.(c);let h=c.getBean("gridApi");return hn.set(e,h),ho.set(h,e),h}getRegisteredModules(e,t,i){var r;let n;return tQ(c1,void 0,!0),e?.modules?.forEach(e=>tQ(e,t)),r=hl(i),n=t$[t]??{},[...Object.values(tU.all??{}),...Object.values(n.all??{}),...Object.values(tU[r]??{}),...Object.values(n[r]??{})]}registerModuleFeatures(e,t){let i=e.getBean("registry"),r=e.getBean("apiFunctionSvc");for(let e of t){i.registerModule(e);let t=e.apiFunctions;if(t)for(let e of Object.keys(t))r?.addFunction(e,t[e])}}createProvidedBeans(e,t,i){let r=i?i.frameworkOverrides:null;ey(r)&&(r=new lH);let n={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:r};return i?.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e,t,i){let r={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},n=hl(e),o=r[n];if(!o)return void ie(201,{rowModelType:n},`Unknown rowModelType ${n}.`);if(!tq)return void ie(272,void 0,c8());if(!e){let e=Object.entries(r).filter(([e,t])=>tX(t,i,e));if(1==e.length){let[t,i]=e[0];if(t!==n){let e={moduleName:i,rowModelType:t};ie(275,e,c7(e));return}}}if(!tX(o,i,n)){let e=`rowModelType = '${n}'`,t=`Missing module ${o}Module for rowModelType ${n}.`;ie(200,{reasonOrId:e,moduleName:o,gridScoped:tK,gridId:i,rowModelType:n,isUmd:!1},t);return}let s=new Set;for(let e of t)for(let t of e.beans??[])s.add(t);return Array.from(s)}};function hl(e){return e??"clientSide"}function hu(e){let t=e.rowModel;return"clientSide"===t.getType()?t:void 0}function hd(e){let t=e.rowModel;return"infinite"===t.getType()?t:void 0}var hc=class extends tE{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){var e;let t=this.gos,i=t.getCallback("getLocaleText");return i?(e,t,r)=>i({key:e,defaultValue:t,variableValues:r}):(e=t.get("localeText"),(t,i,r)=>{let n=e?.[t];if(n&&r?.length){let e=0;for(;!(e>=r.length)&&-1!==n.indexOf("${variable}");)n=n.replace("${variable}",r[e++])}return n??i})}};function hh(e){return e.filter(e=>void 0!=e)}var hp=class{wrap(e,t,i,r){let n=this.createWrapper(e,r);for(let e of t??[])this.createMethod(n,e,!0);for(let e of i??[])this.createMethod(n,e,!1);return n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&t7(49,{methodName:t}),null)}}};function hf(e){return"whenTruncated"===e.get("tooltipShowMode")}var hg=class extends tE{getFileName(e){let t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},hm=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:r,valueSvc:n,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:u}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=r,this.valueSvc=n,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=u}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e){let{column:t,node:i,currentColumnIndex:r,accumulatedRowIndex:n,type:o,useRawFormula:s}=e,a=0===r&&iC(this.gos,i,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||i.group)&&(t.isRowGroupDisplayed(i.rowGroupColumn?.getColId()??"")||a))return{value:this.processRowGroupCallback(iB(this.gos,{column:t,node:i}))??""};if(this.processCellCallback)return{value:this.processCellCallback(iB(this.gos,{accumulatedRowIndex:n,column:t,node:i,value:this.valueSvc.getValueForDisplay({column:t,node:i}).value,type:o,parseValue:e=>this.valueSvc.parseValue(t,i,e,this.valueSvc.getValue(t,i,void 0)),formatValue:e=>this.valueSvc.formatValue(t,i,e)??e}))??""};let l=this.gos.get("treeData"),u=this.valueSvc,d=-1===i.level&&i.footer,c=!0===t.colDef.showRowGroup&&(i.group||l);if(!d&&(a||c)){let e="",r=i;for(;r&&-1!==r.level;){let{value:i,valueFormatted:n}=u.getValueForDisplay({column:a?void 0:t,node:r,includeValueFormatted:!0,exporting:!0});e=` -> ${n??i??""}${e}`,r=r.parent}return{value:e,valueFormatted:e}}let{value:h,valueFormatted:p}=u.getValueForDisplay({column:t,node:i,includeValueFormatted:!0,exporting:!0,useRawFormula:s});return{value:h??"",valueFormatted:p}}getHeaderName(e,t){return e?e(iB(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}},hv={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,overlayComponent:!0,suppressOverlays:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},hy="clientSide",hb="serverSide",hw="infinite",hC={onGroupExpandedOrCollapsed:[hy],refreshClientSideRowModel:[hy],isRowDataEmpty:[hy],forEachLeafNode:[hy],forEachNodeAfterFilter:[hy],forEachNodeAfterFilterAndSort:[hy],resetRowHeights:[hy,hb],applyTransaction:[hy],applyTransactionAsync:[hy],flushAsyncTransactions:[hy],getBestCostNodeSelection:[hy],getServerSideSelectionState:[hb],setServerSideSelectionState:[hb],applyServerSideTransaction:[hb],applyServerSideTransactionAsync:[hb],applyServerSideRowData:[hb],retryServerSideLoads:[hb],flushServerSideAsyncTransactions:[hb],refreshServerSide:[hb],getServerSideGroupLevelState:[hb],refreshInfiniteCache:[hw],purgeInfiniteCache:[hw],getInfiniteRowCount:[hw],isLastRowIndexKnown:[hw,hb],expandAll:[hy,hb],collapseAll:[hy,hb],onRowHeightChanged:[hy,hb],setRowCount:[hw,hb],getCacheBlockState:[hw,hb]},hx={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}},hS={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},hk={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,aasc:1,adesc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},hR={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",overlayLoading:"Overlay",overlayExporting:"Overlay",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",richSelectLoading:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortAbsoluteAscending:["MenuCore","Sort"],sortAbsoluteDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},hE=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),hP=class extends tE{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,t0=hi}warnOnInitialPropertyUpdate(e,t){"api"===e&&hv[t]&&t7(22,{key:t})}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...dP,...dE,...dR,...dM,...d_,...dO,...dT,...dD,...Object.values(dw)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}},validations:(()=>{let e={autoSizePadding:{validate:({autoSizePadding:e})=>dA("autoSizePadding",e,0)},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate:({cacheBlockSize:e})=>dA("cacheBlockSize",e,1)},cacheOverflowSize:{validate:({cacheOverflowSize:e})=>dA("cacheOverflowSize",e,1)},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:e=>{let t=e.domLayout,i=["autoHeight","normal","print"];return t&&!i.includes(t)?`domLayout must be one of [${i.join()}], currently it's ${t}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate:({enableRowPinning:e,pinnedTopRowData:t,pinnedBottomRowData:i})=>e&&(t||i)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null},isRowPinnable:{supportedRowModels:["clientSide"],validate:({enableRowPinning:e,isRowPinnable:t,pinnedTopRowData:i,pinnedBottomRowData:r})=>t&&(i||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!e&&t?"`isRowPinnable` requires `enableRowPinning` to be set.":null},isRowPinned:{supportedRowModels:["clientSide"],validate:({enableRowPinning:e,isRowPinned:t,pinnedTopRowData:i,pinnedBottomRowData:r})=>t&&(i||r)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!e&&t?"`isRowPinned` requires `enableRowPinning` to be set.":null},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:e={}},t,i){for(let t of Object.keys(e))i.validation?.validateColDef(e[t]);return null}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return it(262);if(e.smallLeft)return it(263);if(e.smallRight)return it(264)}return null}},infiniteInitialRowCount:{validate:({infiniteInitialRowCount:e})=>dA("infiniteInitialRowCount",e,1)},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:e=>{if("boolean"==typeof e.ssrmExpandAllAffectsAllRows){if("serverSide"!==e.rowModelType)return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(e.ssrmExpandAllAffectsAllRows&&"function"!=typeof e.getRowId)return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate:({keepDetailRowsCount:e})=>dA("keepDetailRowsCount",e,1)},paginationPageSize:{validate:({paginationPageSize:e})=>dA("paginationPageSize",e,1)},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return"boolean"==typeof t||null==t||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate:({rowBuffer:e})=>dA("rowBuffer",e,0)},rowClass:{validate:e=>"function"==typeof e.rowClass?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate:({rowSelection:e})=>e&&"string"==typeof e?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&"object"!=typeof e?"Expected `RowSelectionOptions` object for the `rowSelection` property.":e&&"multiRow"!==e.mode&&"singleRow"!==e.mode?`Selection mode "${e.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null},rowStyle:{validate:e=>{let t=e.rowStyle;return t&&"function"==typeof t?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate:({serverSideInitialRowCount:e})=>dA("serverSideInitialRowCount",e,1)},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:e=>{let t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){let e=t.filter(e=>!i$(e));if(e.length>0)return`sortingOrder must be an array of type (SortDirection | SortDef)[], incorrect items are: ${e.map(e=>"string"==typeof e||null==e?t3(e):JSON.stringify(e))}]`}else if(!Array.isArray(t)||!t.length)return`sortingOrder must be an array with at least one element, currently it's ${t}`;return null}},tooltipHideDelay:{validate:e=>e.tooltipHideDelay&&e.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:e=>e.tooltipShowDelay&&e.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let{treeDataChildrenField:t,treeDataParentIdField:i,getDataPath:r,getRowId:n}=e;if(!t&&!i&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(t){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(i)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(i){if(!n)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}break}case"serverSide":{let i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate:({viewportRowModelBufferSize:e})=>dA("viewportRowModelBufferSize",e,0)},viewportRowModelPageSize:{validate:({viewportRowModelPageSize:e})=>dA("viewportRowModelPageSize",e,1)},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate:({autoGroupColumnDef:e,showOpenedGroup:t})=>e?.field&&t?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":e?.valueGetter&&t?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null},renderingMode:{validate:e=>{let t=e.renderingMode,i=["default","legacy"];return t&&!i.includes(t)?`renderingMode must be one of [${i.join()}], currently it's ${t}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:e})=>{if(!e)return null;let t=e.type;return"fitCellContents"!==t&&"fitGridWidth"!==t&&"fitProvidedWidth"!==t?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${["fitCellContents","fitGridWidth","fitProvidedWidth"].map(e=>'"'+e+'"').join(", ")}, currently it's ${t}`:"fitProvidedWidth"===t&&"number"!=typeof e.width?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${e.width}`:null}}},t={};for(let e of dO)t[e]={expectedType:"boolean"};for(let e of dM)t[e]={expectedType:"number"};return tI(t,e),t})()})}validateApiFunction(e,t){return function(e,t,i){let r=hx[e];if(r){let{version:i,new:n,old:o,message:s}=r,a=o??e;return(...e)=>{let r=n?`Please use ${n} instead. `:"";return tj(`Since ${i} api.${a} is deprecated. ${r}${s??""}`),t.apply(t,e)}}let n=hC[e];return n?(...r)=>{let o=i.rowModel.getType();return n.includes(o)?t.apply(t,r):void tG(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`)}:t}(e,t,this.beans)}missingUserComponent(e,t,i,r){let n=dC[t];n?this.gos.assertModuleRegistered(n,`AG Grid '${e}' component: ${t}`):t7(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:r})}missingDynamicBean(e){let t=hS[e];return t?it(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){hM.has(e)&&t7(10,{eventType:e})}validateIcon(e){if(hE.has(e)&&t7(43,{iconName:e}),hk[e])return;let t=hR[e];t?t9(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:tK,gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."}):t7(134,{iconName:e})}isProvidedUserComp(e){return!!dC[e]}validateColDef(e){this.processOptions(e,{objectName:"colDef",allProperties:Object.keys(dk),docsUrl:"column-properties/",deprecations:{checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}},validations:{autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(e,{paginationAutoPageSize:t})=>t?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},allowFormula:{supportedRowModels:["clientSide"]},cellRendererParams:{validate:e=>(null!=e.rowGroup||null!=e.rowGroupIndex||"agGroupCellRenderer"===e.cellRenderer)&&"checkbox"in e.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(e,t)=>t.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:e=>{let t=e.headerValueGetter;return"function"==typeof t||"string"==typeof t?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:e})=>{if(e){if(e.smallDown)return it(262);if(e.smallLeft)return it(263);if(e.smallRight)return it(264)}return null}},sort:{validate:e=>iQ(e.sort)||iq(e.sort)?null:`sort must be of type (SortDirection | SortDef), currently it is ${"object"==typeof e.sort?JSON.stringify(e.sort):t3(e.sort)}`},initialSort:{validate:e=>iQ(e.initialSort)||iq(e.initialSort)?null:`initialSort must be of non-null type (SortDirection | SortDef), currently it is ${"object"==typeof e.initialSort?JSON.stringify(e.initialSort):t3(e.initialSort)}`},sortingOrder:{validate:e=>{let t=e.sortingOrder;if(Array.isArray(t)&&t.length>0){let e=t.filter(e=>!(iQ(e)||iq(e)));if(e.length>0)return`sortingOrder must be an array of type non-null (SortDirection | SortDef)[], incorrect items are: [${e.map(e=>"string"==typeof e||null==e?t3(e):JSON.stringify(e)).join(", ")}]`}else if(!Array.isArray(t)||!t.length)return`sortingOrder must be an array with at least one element, currently it is [${t}]`;return null}},type:{validate:e=>{let t=e.type;return t instanceof Array?t.some(e=>"string"!=typeof e)?"if colDef.type is supplied an array it should be of type 'string[]'":null:"string"==typeof t?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(e,{suppressRowTransform:t})=>t?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(e,{rowSelection:t,cellSelection:i,suppressRowTransform:r,enableCellSpan:n,rowDragEntireRow:o,enableCellTextSelection:s})=>"object"==typeof t&&t?.mode==="singleRow"&&t?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":r?"colDef.spanRows is not supported with suppressRowTransform.":n?o?"colDef.spanRows is not supported with rowDragEntireRow.":s?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(e,{groupHierarchyConfig:t={}},i){let r=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),n=[];for(let o of e.groupHierarchy??[]){if("object"==typeof o){i.validation?.validateColDef(o);continue}r.has(o)||o in t||n.push(dx(o))}if(n.length>0){let e=`The following parts of colDef.groupHierarchy are not recognised: ${n.join(", ")}.`,t=`Choose one of ${[...r].map(dx).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${e}
${t}`}return null}}}})}processOptions(e,t){let{validations:i,deprecations:r,allProperties:n,propertyExceptions:o,objectName:s,docsUrl:a}=t;n&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(r)],n,s,a);let l=new Set;if(Object.keys(e).forEach(t=>{let n=r[t];if(n){let{message:e,version:i}=n;l.add(`As of v${i}, ${String(t)} is deprecated. ${e??""}`)}let o=e[t];if(null==o||!1===o)return;let s=i[t];if(!s)return;let{dependencies:a,validate:u,supportedRowModels:d,expectedType:c}=s;if(c){let e=typeof o;if(e!==c)return void l.add(`${String(t)} should be of type '${c}' but received '${e}' (${o}).`)}if(d){let e=this.gridOptions.rowModelType??"clientSide";if(!d.includes(e))return void l.add(`${String(t)} is not supported with the '${e}' row model. It is only valid with: ${d.join(", ")}.`)}if(a){let i=this.checkForRequiredDependencies(t,a,e);if(i)return void l.add(i)}if(u){let t=u(e,this.gridOptions,this.beans);if(t)return void l.add(t)}}),l.size>0)for(let e of l)tj(e)}checkForRequiredDependencies(e,t,i){let r=Object.entries(t).filter(([e,t])=>{let r=i[e];return!t.required.includes(r)});return 0===r.length?null:r.map(([t,i])=>`'${String(e)}' requires '${t}' to be one of [${i.required.map(e=>null===e?"null":void 0===e?"undefined":e).join(", ")}]. ${i.reason??""}`).join("\n           ")}checkProperties(e,t,i,r,n){let o=function(e,t,i){let r={},n=e.filter(e=>!t.some(t=>t===e));if(n.length>0)for(let e of n)r[e]=nY({inputValue:e,allSuggestions:i}).values;return r}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i),s=Object.keys(o);for(let e of s){let t=o[e],n=`invalid ${r} property '${e}' did you mean any of these: ${t.slice(0,8).join(", ")}.`;i.includes("context")&&(n+=`
If you are trying to annotate ${r} with application data, use the '${r}.context' property instead.`),tj(n)}if(s.length>0&&n){let e=this.beans.frameworkOverrides.getDocLink(n);tj(`to see all the valid ${r} properties please check: ${e}`)}}},hM=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]);function hD(e){let t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var hT=class extends tE{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){let t=!!this.filterManager?.isChildFilterPresent();this.beans.formula?.active?this.softFilter(t,e):this.filterNodes(t,e)}filterNodes(e,t){let i=(t,i)=>{t.hasChildren()&&e&&!i?t.childrenAfterFilter=t.childrenAfterGroup.filter(e=>{let t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i}):t.childrenAfterFilter=t.childrenAfterGroup,hD(t)};if(this.doingTreeDataFiltering()){let e=(t,r)=>{if(t.childrenAfterGroup)for(let n=0;n<t.childrenAfterGroup.length;n++){let o=t.childrenAfterGroup[n],s=r||this.filterManager.doesRowPassFilter({rowNode:o});o.childrenAfterGroup?e(t.childrenAfterGroup[n],s):i(o,s)}i(t,r)};t.executeFromRootNode(t=>e(t,!1))}else t.forEachChangedNodeDepthFirst(e=>i(e,!1),!0)}softFilter(e,t){let i=t=>{if(t.childrenAfterFilter=t.childrenAfterGroup,t.hasChildren())for(let i of t.childrenAfterGroup)i.softFiltered=e&&!(i.data&&this.filterManager.doesRowPassFilter({rowNode:i}));hD(t)};t.forEachChangedNodeDepthFirst(i,!0)}doingTreeDataFiltering(){let{gos:e}=this;return e.get("treeData")&&!e.get("excludeChildrenWhenTreeDataFiltering")}},hO=class extends aX{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,i,r,n){this.comp=e;let o=rT(this,this.beans.context,n);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=r,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);let s=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:s}),o.addManagedEventListeners({filterSwitched:({column:e})=>{e===this.column&&s()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:e,beans:t}=this,i=e.colDef;return iB(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){let e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=a6("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new sq(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.getLocaleTextFunc();eL(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){let{beans:t}=this;if(eP(t)===this.eGui)return;let i=nM(t,this.eGui,null,e.shiftKey);if(i){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleCols,i=this.column;do if(!(i=e?t.getColBefore(i):t.getColAfter(i)))break;while(!i.getColDef().filter||!i.getColDef().floatingFilter)return i}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case nt:case nr:case ne:case ni:if(t)return;sW(e);case r7:t&&nP(this.eGui)&&e.preventDefault();break;case r9:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&eQ(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){let e=this.lastFocusEvent,t=!!(e&&"Tab"===e.key);if(e&&t){let t=e.shiftKey;nP(this.eGui,t)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){let t=new aq(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!iN(this.gos)}setupUserComp(){if(!this.active)return;let e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{beans:{colFilter:t},column:i,gos:r}=this,n=e=>{if(e?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;let n=this.comp.getFloatingFilterComp();n&&n.then(n=>{if(n){if(r.get("enableFilterHandlers")){let t="filter";e?.afterFloatingFilter?t="ui":e?.afterDataChange?t="dataChanged":e?.source==="api"&&(t="api"),this.updateFloatingFilterParams(this.userCompDetails,t);return}let o=t?.getCurrentFloatingFilterParentModel(i),s=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;n.onParentModelChanged(o,s)}})};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:n}),t?.isFilterActive(i)&&n(null)}setupWidth(e){let t=()=>{let e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let r=this.beans.colFilter,n=this.active?r?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();o&&n?o.then(t=>{!t||r?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n,"colDef")}):this.updateCompDetails(e,n,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let i=e.params;this.comp.getFloatingFilterComp()?.then(e=>{"function"==typeof e?.refresh&&(this.gos.get("enableFilterHandlers")&&(i={...i,model:sk(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),e.refresh(i))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}},h_={moduleName:"Popup",version:tZ,beans:[class extends o4{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,i,r,n){let o=this.gos.getCallback("postProcessPopup");if(o){let{column:s,rowNode:a}=e??{};o({column:s,rowNode:a,ePopup:i,type:t,eventSource:r,mouseEvent:n})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return sU(e)}}]},hA={filterHandler:()=>({doesFilterPass:()=>!0})},hF=class extends tE{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...sy},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});let e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",i){let{colModel:r,dataTypeSvc:n,filterManager:o}=this.beans;if(n?.isPendingInference)return void this.modelUpdates.push({model:e,source:t});let s=[],a=this.getModel(!0);if(e){let t=new Set(Object.keys(e));this.allColumnFilters.forEach((i,r)=>{let n=e[r];s.push(this.setModelOnFilterWrapper(i,n)),t.delete(r)}),t.forEach(t=>{let i=r.getColDefCol(t)||r.getCol(t);if(!i)return void t7(62,{colId:t});if(!i.isFilterAllowed())return void t7(63,{colId:t});let n=this.getOrCreateFilterWrapper(i,!0);n?s.push(this.setModelOnFilterWrapper(n,e[t],!0)):t7(64,{colId:t})})}else this.model={},this.allColumnFilters.forEach(e=>{s.push(this.setModelOnFilterWrapper(e,null))});rN.all(s).then(()=>{let e=this.getModel(!0),r=[];this.allColumnFilters.forEach((t,i)=>{ew(a?a[i]:null,e?e[i]:null)||r.push(t.column)}),r.length>0?o?.onFilterChanged({columns:r,source:t}):i&&this.updateActive("filterChanged")})}getModel(e){let t={},{allColumnFilters:i,initialModel:r,beans:{colModel:n}}=this;if(i.forEach((e,i)=>{let r=this.getModelFromFilterWrapper(e);ev(r)&&(t[i]=r)}),!e)for(let e of Object.keys(r)){let o=r[e];ev(o)&&!i.has(e)&&n.getCol(e)?.isFilterAllowed()&&(t[e]=o)}return t}setState(e,t,i="api"){if(this.state.clear(),t)for(let e of Object.keys(t)){let i=t[e];this.state.set(e,{model:sk(this.model,e),state:i})}this.setModel(e,i,!0)}getState(){let e=this.state;if(!e.size)return;let t={},i=!1;return e.forEach((e,r)=>{let n=e.state;null!=n&&(i=!0,t[r]=n)}),i?t:void 0}getModelFromFilterWrapper(e){let t=e.column.getColId();if(e.isHandler)return sk(this.model,t);let i=e.filter;return i?"function"!=typeof i.getModel?(t7(66),null):i.getModel():sk(this.initialModel,t)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};let{allColumnFilters:e}=this;return!!e.size&&(e.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0)}updateActiveFilters(){let{colModel:e,gos:t}=this.beans,i=!!iy(t),r=[],n=[],o=(t,o,s)=>{o&&((t=>{if(!t.isPrimary())return!0;let r=!e.isPivotActive();return!!t.isValueActive()&&!!r&&(!!e.isPivotMode()||i)})(t)?r.push(s):n.push(s))},s=[];return this.allColumnFilters.forEach(e=>{let t=e.column,i=t.getColId();if(e.isHandler)s.push(rN.resolve().then(()=>{o(t,this.isHandlerActive(t),{colId:i,isHandler:!0,handler:e.handler,handlerParams:e.handlerParams})}));else{let r=sw(e);r&&s.push(r.then(e=>{o(t,!!e&&(e.isFilterActive?e.isFilterActive():(t7(67),!1)),{colId:i,isHandler:!1,comp:e})}))}}),rN.all(s).then(()=>{this.activeAggregateFilters=r,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){let i=[];return this.allColumnFilters.forEach(r=>{let n=r.column;if(r.isHandler)i.push(rN.resolve().then(()=>{this.setColFilterActive(n,this.isHandlerActive(n),e,t)}));else{let o=sw(r);o&&i.push(o.then(i=>{this.setColFilterActive(n,i.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),rN.all(i)}doFiltersPass(e,t,i){let{data:r,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?n:r,a=this.model;for(let i=0;i<o.length;i++){let r=o[i],{colId:n,isHandler:l}=r;if(n!==t)if(l){let{handler:t,handlerParams:i}=r;if(!t.doesFilterPass({node:e,data:s,model:sk(a,n),handlerParams:i}))return!1}else{let t=r.comp;if("function"!=typeof t.doesFilterPass){t9(91);continue}if(!t.doesFilterPass({node:e,data:s}))return!1}}return!0}getHandlerParams(e){let t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){let{rowRenderer:t,filterManager:i}=this.beans,r=()=>{this.isAlive()&&i?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(r,0):r()}updateBeforeFilterChanged(e={}){let{column:t,additionalEventAttributes:i}=e,r=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(e=>{let{column:t,isHandler:i}=e;r!==t.getColId()&&(i&&e.handler.onAnyFilterChanged?.(),sw(e,i)?.then(e=>{"function"==typeof e?.onAnyFilterChanged&&e.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.gos.get("allowShowChangeAfterFilter")&&this.processingFilterChange}onNewRowsLoaded(e){let t=[];this.allColumnFilters.forEach(e=>{let i=e.isHandler;i&&e.handler.onNewRowsLoaded?.();let r=sw(e,i);r&&t.push(r.then(e=>{e.onNewRowsLoaded?.()}))}),rN.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){let{filterValueSvc:i,colModel:r}=this.beans;return(n,o)=>{let s=o?r.getCol(o):e;return s?i.getValue(s,n,t):void 0}}isFilterActive(e){let t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);let i=t?.filter;return i?i.isFilterActive():null!=sk(this.initialModel,e.getColId())}isHandlerActive(e){let t=ev(sk(this.model,e.getColId()));if(t)return t;let i=this.beans.groupFilter;return!!i?.isGroupFilter(e)&&i.isFilterActive(e)}getOrCreateFilterUi(e){let t=this.getOrCreateFilterWrapper(e,!0);return t?sw(t):null}getFilterUiForDisplay(e){let t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;let i=sw(t);return i?i.then(e=>({comp:e,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){let i=this.getOrCreateFilterWrapper(e,t);return i?.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){var i;return(i=this.gos).isModuleRegistered("SetFilter")&&!i.get("suppressSetFilterByDefault")?t?"agSetColumnFloatingFilter":"agSetColumnFilter":function(e,t=!1){return(t?sz:sH)[e??"text"]}(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,r,n,o){let s=()=>{var s,a;let l,u=r(this.createFilterCompParams(e,n,o),n);return s=this.beans.userCompFactory,rL(l=(a=t).filter)&&(a={filter:l.component,filterParams:a.filterParams}),s.getCompDetails(a,rX,i,u,!0)},a=s();return a?{compDetails:a,createFilterUi:e=>(e?s():a).newAgStackInstance()}:null}createFilterInstance(e,t,i,r){let n=this.beans.selectableFilter;n?.isSelectable(t)&&(t=n.getFilterDef(e,t));let{handler:o,handlerParams:s,handlerGenerator:a}=this.createHandler(e,t,i)??{},l=this.createFilterComp(e,t,i,r,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:s};let{compDetails:u,createFilterUi:d}=l;return this.isGlobalButtons&&(u.params?.buttons?.length||t7(281,{colId:e.getColId()})),{compDetails:u,handler:o,handlerGenerator:a,handlerParams:s,createFilterUi:d}}createBaseFilterParams(e,t){let{filterManager:i,rowModel:r}=this.beans;return iB(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:t=>i?.doesRowPassOtherFilters(e.getColId(),t)??!0,rowModel:r})}createFilterCompParams(e,t,i,r){let n=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,r);if(o.filterChangedCallback=n,o.filterModifiedCallback=r?()=>{}:t=>this.filterModified(e,t),t){let t=e.getColId(),r=sk(this.model,t);o.model=r,o.state=this.state.get(t)??{model:r},o.onModelChange=(i,r)=>{this.updateStoredModel(t,i),this.refreshHandlerAndUi(e,i,"ui",!1,r).then(()=>{n({...r,source:"columnFilter"})})},o.onStateChange=t=>{this.updateState(e,t),this.updateOrRefreshFilterUi(e)},o.onAction=(t,i,r)=>{this.updateModel(e,t,i),this.dispatchLocalEvent({type:"filterAction",column:e,action:t,event:r})},o.getHandler=()=>this.getHandler(e,!0),o.onUiChange=t=>this.filterUiChanged(e,t),o.source=i}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){let r=t(),n={created:!0,create:t,filterParams:e.params,compDetails:e,promise:r};return r.then(i),n}createFilterWrapper(e){let{compDetails:t,handler:i,handlerGenerator:r,handlerParams:n,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),e=>e),s=e.getColId();if(i)return delete this.initialModel[s],i.init?.({...n,source:"init",model:sk(this.model,s)}),{column:e,isHandler:!0,handler:i,handlerGenerator:r,handlerParams:n,filterUi:this.createFilterUiForHandler(t,o)};if(o){let i={column:e,filterUi:null,isHandler:!1};return i.filterUi=this.createFilterUiLegacy(t,o,e=>{i.filter=e??void 0}),i}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,i){let r,n,o,{gos:s,frameworkOverrides:a,registry:l}=this.beans,u=s.get("enableFilterHandlers"),d=u?(e=>{let t=e.filter;if(rL(t)){let e=t.handler;return e||((r=t.doesFilterPass)?()=>({doesFilterPass:r}):void 0)}return"string"==typeof t?t:void 0})(t):void 0,c=e=>()=>this.createBean(l.createDynamicBean(e,!0));if("string"==typeof d){let e=s.get("filterHandlers")?.[d];null!=e?n=e:sb.has(d)&&(n=c(d),o=d)}else n=d;if(!n){let e,{compName:r,jsComp:s,fwComp:l}=rB(a,t,rX);r?e=r:null==s&&null==l&&!0===t.filter&&(e=i),(o=this.handlerMap[e])&&(n=c(o))}if(!n){if(!u)return;return ir(s)&&t7(277,{colId:e.getColId()}),hA}return{filterHandler:n,handlerNameOrCallback:r??o}}createHandler(e,t,i){let r=this.createHandlerFunc(e,t,i);if(!r)return;let n=r4(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:s}=r,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,s,n);return{handler:a,handlerParams:l,handlerGenerator:o??s}}createHandlerFromFunc(e,t,i){let r=e.getColDef();return{handler:t(iB(this.gos,{column:e,colDef:r})),handlerParams:this.createHandlerParams(e,i)}}createHandlerParams(e,t){let i=e.getColDef(),r=e.getColId(),n=this.filterChangedCallbackFactory(e);return iB(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:e=>this.beans.filterManager?.doesRowPassOtherFilters(r,e)??!0,onModelChange:(t,i)=>{this.updateStoredModel(r,t),this.refreshHandlerAndUi(e,t,"handler",!1,i).then(()=>{n({...i,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){let e=[],{colModel:t,filterManager:i,groupFilter:r}=this.beans;this.allColumnFilters.forEach((i,r)=>{let n;(n=i.column.isPrimary()?t.getColDefCol(r):t.getCol(r))&&n===i.column||(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(r))});let n=r&&e.every(e=>r.isGroupFilter(e));e.length>0&&!n&&i?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let t=this.beans.groupFilter;return!t?.isGroupFilter(e)||t.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){let{userCompFactory:i,frameworkOverrides:r,selectableFilter:n,gos:o}=this.beans,s=t=>{let i=this.getOrCreateFilterUi(e);i?.then(e=>{t(r8(e))})},a=e.getColDef(),l=n?.isSelectable(a)?n.getFilterDef(e,a):a,u=function(e,t,i){if(null==t)return null;let r=null,{compName:n,jsComp:o,fwComp:s}=rB(e,t,rX);return n?r=({agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"})[n]:null==o&&null==s&&!0===t.filter&&(r=i()),r}(r,l,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",d=o.get("enableFilterHandlers"),c=r4(i,l,this.createFilterCompParams(e,d,"init",!0)),h=iB(o,{column:e,filterParams:c,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:s,showParentFilter:t});if(d){let t=e.getColId(),i=this.filterChangedCallbackFactory(e);h.onUiChange=t=>this.floatingFilterUiChanged(e,t),h.model=sk(this.model,t),h.onModelChange=(r,n)=>{this.updateStoredModel(t,r),this.refreshHandlerAndUi(e,r,"floating",!0,n).then(()=>{i({...n,source:"columnFilter"})})},h.getHandler=()=>this.getHandler(e,!0),h.source="init"}return i.getCompDetails(a,rY,u,h)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,i,r){let n="paramsUpdated";if(e.isHandler){let o=t.getColId();delete this.initialModel[o],this.state.delete(o);let s=e.filterUi;e.filterUi=this.createFilterUiForHandler(i,r);let a=this.eventSvc;s?.created?s.promise.then(e=>{this.destroyBean(e),a.dispatchEvent({type:"filterDestroyed",source:n,column:t})}):a.dispatchEvent({type:"filterHandlerDestroyed",source:n,column:t})}else this.destroyFilter(t,n)}destroyFilter(e,t="api"){let i=e.getColId(),r=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],r&&this.disposeFilterWrapper(r,t).then(t=>{t&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1,{column:r,isHandler:n,filterUi:o}=e,s=r.getColId();n&&(i=this.isHandlerActive(r),this.destroyBean(e.handler),delete this.model[s],this.state.delete(s));let a=()=>{this.setColFilterActive(r,!1,"filterDestroyed"),this.allColumnFilters.delete(s),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:r})};if(o)if(o.created)return o.promise.then(e=>(i=n?i:!!e?.isFilterActive(),this.destroyBean(e),a(),i));else a();return rN.resolve(i)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){let i=this.allColumnFilters.get(e);if(!i)return;let r=this.beans,n=i.column,o=n.getColDef(),s=n.isFilterAllowed(),a=this.getDefaultFilter(n),l=r.selectableFilter,u=l?.isSelectable(o)?l.getFilterDef(n,o):o,d=s?this.createHandlerFunc(n,u,this.getDefaultFilter(n)):void 0,c=!!d,h=i.isHandler;if(h!=c)return void this.destroyFilter(n,"paramsUpdated");let{compDetails:p,createFilterUi:f}=(s?this.createFilterComp(n,u,a,e=>e,c,"colDef"):null)??{compDetails:null,createFilterUi:null},g=p?.params??r4(r.userCompFactory,u,this.createFilterCompParams(n,c,"colDef"));if(h){let r=d?.handlerNameOrCallback??d?.filterHandler,o=sk(this.model,e);if(i.handlerGenerator!=r){let s=i.handler,{handler:a,handlerParams:l}=this.createHandlerFromFunc(n,d.filterHandler,g);i.handler=a,i.handlerParams=l,i.handlerGenerator=r,delete this.model[e],a.init?.({...l,source:"init",model:null}),this.destroyBean(s),null!=o&&this.beans.filterManager?.onFilterChanged({columns:[n],source:t})}else{let e=this.createHandlerParams(n,p?.params);i.handlerParams=e,i.handler.refresh?.({...e,source:"colDef",model:o})}}!this.areFilterCompsDifferent(i.filterUi?.compDetails??null,p)&&i.filterUi&&p?(i.filterUi.filterParams=g,sw(i,h)?.then(e=>{!1===(!e?.refresh||e.refresh(g))?this.destroyFilterUi(i,n,p,f):this.dispatchLocalEvent({type:"filterParamsChanged",column:n,params:g})})):this.destroyFilterUi(i,n,p,f)}refreshHandlerAndUi(e,t,i,r,n){var o,s;let a=this.cachedFilter(e);if(!a)return r&&this.getOrCreateFilterWrapper(e,!0),rN.resolve();if(!a.isHandler)return rN.resolve();let{filterUi:l,handler:u,handlerParams:d}=a;return o=()=>{if(l){let{created:e,filterParams:t}=l;if(e)return l.promise.then(e=>e?{filter:e,filterParams:t}:void 0);l.refreshed=!0}return rN.resolve(void 0)},s=this.state.get(e.getColId())??{model:t},u.refresh?.({...d,model:t,source:i,additionalEventAttributes:n}),o().then(e=>{if(e){let{filter:r,filterParams:o}=e;sC(r,o,t,s,i,n)}})}setColumnFilterWrapper(e,t){let i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:i}=e,{componentClass:r}=t;return!(i===r||i?.render&&r?.render&&i.render===r.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(e=>e.getColDef().floatingFilter)}getFilterInstance(e){let t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);let i=this.getOrCreateFilterUi(t);return i?new Promise(e=>{i.then(t=>{e(r8(t))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:i})=>{this.setModelForColumn(e,t).then(()=>i())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){let{state:t,model:i}=this,r=e.getColId(),n=t.get(r);return n?n.model??null:sk(i,r)}let i=this.cachedFilter(e);return i?this.getModelFromFilterWrapper(i):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let i=()=>{},r=new Promise(e=>{i=e});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),r}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(e=>i(e))})}getStateForColumn(e){return this.state.get(e)??{model:sk(this.model,e)}}setModelForColumnLegacy(e,t){let i=this.beans.colModel.getColDefCol(e),r=i?this.getOrCreateFilterWrapper(i,!0):null;return r?this.setModelOnFilterWrapper(r,t):rN.resolve()}setColDefPropsForDataType(e,t,i){let r,n,o=e.filter,s=!0===o?this.getDefaultFilterFromDataType(()=>t.baseDataType):o;if("string"!=typeof s)return;let a=this.beans,{filterParams:l,filterValueGetter:u}=e;if("agMultiColumnFilter"===s)({filterParams:r,filterValueGetter:n}=a.multiFilter?.getParamsForDataType(l,u,t,i)??{});else{var d;let e,o,c;({filterParams:r,filterValueGetter:n}=(d=this.getLocaleTextFunc(),e=u,o="agSetColumnFilter"===s,e||"object"!==t.baseDataType||o||(e=({column:e,node:t})=>i({column:e,node:t,value:a.valueSvc.getValue(e,t)})),c=(0,(o?sV:sB)[t.baseDataType])({dataTypeDefinition:t,formatValue:i,t:d}),{filterParams:"object"==typeof l?{...c,...l}:c,filterValueGetter:e}))}e.filterParams=r,n&&(e.filterValueGetter=n)}setColFilterActive(e,t,i,r){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,r)}setModelOnFilterWrapper(e,t,i){return new rN(r=>{if(e.isHandler){let n=e.column,o=n.getColId(),s=this.model[o];return(this.updateStoredModel(o,t),i&&t===s)?void r():void this.refreshHandlerAndUi(n,t,"api").then(()=>r())}let n=sw(e);n?n.then(e=>{if("function"!=typeof e?.setModel){t7(65),r();return}(e.setModel(t)||rN.resolve()).then(()=>r())}):r()})}updateStoredModel(e,t){ev(t)?this.model[e]=t:delete this.model[e];let i=this.state.get(e),r={model:t,state:i?.state};this.state.set(e,r)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,i){let r=e.getColId(),n=this.cachedFilter(e),o=()=>n?.filterUi;sS({action:t,filterParams:n?.filterUi?.filterParams,getFilterUi:o,getModel:()=>sk(this.model,r),getState:()=>this.state.get(r),updateState:t=>this.updateState(e,t),updateModel:e=>o()?.filterParams?.onModelChange(e,{...i,fromAction:t}),processModelToApply:n?.isHandler?n.handler.processModelToApply?.bind(n.handler):void 0})}updateAllModels(e,t){let i=[];this.allColumnFilters.forEach((t,r)=>{let n=this.beans.colModel.getColDefCol(r);n&&sS({action:e,filterParams:t.filterUi?.filterParams,getFilterUi:()=>t.filterUi,getModel:()=>sk(this.model,r),getState:()=>this.state.get(r),updateState:e=>this.updateState(n,e),updateModel:t=>{this.updateStoredModel(r,t),this.dispatchLocalEvent({type:"filterAction",column:n,action:e}),i.push(this.refreshHandlerAndUi(n,t,"ui"))},processModelToApply:t?.isHandler?t.handler.processModelToApply?.bind(t.handler):void 0})}),i.length&&rN.all(i).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){let t=e.getColId();sx(()=>this.cachedFilter(e)?.filterUi,()=>sk(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){let{state:e,model:t,activeFilterComps:i}=this;for(let e of i)if("COLUMN_MENU"===e.source)return!1;let r=!1;for(let i of e.keys()){let n=e.get(i);if(!1===n.valid)return!1;(n.model??null)!==sk(t,i)&&(r=!0)}return r}hasUnappliedModel(e){let{model:t,state:i}=this;return(i.get(e)?.model??null)!==sk(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if("newFiltersToolPanel"===t)return!0;let i=this.beans.filterPanelSvc;return!!i?.isActive&&!!i.getState(e.getColId())}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}},hI=class extends tE{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:e})=>this.onAdvFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});let{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return"function"==typeof t&&t(e)}setFilterState(e,t,i="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,i)}setFilterModel(e,t="api",i){if(this.isAdvFilterEnabled()){i||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){iy(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:i,columns:r=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):rN.resolve()).then(()=>{let e={source:t,type:"filterChanged",columns:r};i&&tI(e,i),this.eventSvc.dispatchEvent(e),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!iy(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){let{rowNode:t}=e;return!!this.alwaysPassFilter?.(t)||!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){let{rowNode:t}=e;return!!this.alwaysPassFilter?.(t)||!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return!this.isAdvFilterEnabled()&&!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference)return void this.advFilterModelUpdateQueue.push(e);this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvFilterEnabled()&&!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){t7(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return+!!this.isAdvFilterHeaderActive()}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(let e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},hL=class extends tE{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,i,r){(!e||e.isColumn)&&this.showPopup(e,r=>{this.popupSvc?.positionPopupUnderMouseEvent({additionalParams:{column:e},type:i,mouseEvent:t,ePopup:r})},i,t.target,iN(this.gos),r)}showMenuAfterButtonClick(e,t,i,r){if(e&&!e.isColumn)return;let n=-1,o="left",s=iN(this.gos);!s&&this.gos.get("enableRtl")&&(n=1,o="right");let a=s?void 0:4*n,l=s?void 0:4;this.showPopup(e,r=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:t,ePopup:r,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",additionalParams:{column:e}})},i,t,s,r)}showPopup(e,t,i,r,n,o){let s,a=e?this.createBean(new sA(e,"COLUMN_MENU")):void 0;if(this.activeMenu=a,!a?.hasFilter()||!e)return void t9(57);let l=th({tag:"div",cls:`ag-menu${!n?" ag-filter-menu":""}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(l,{keydown:e=>this.trapFocusWithin(e,l)}),l.appendChild(a?.getGui());let u=iN(this.gos)?void 0:r??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody,d=t=>{a5(e,!1,"contextMenu");let n=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),n&&r&&e6(r)){let e=nD(r);e?.focus({preventScroll:!0})}a?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),o?.()},c=this.getLocaleTextFunc(),h=n&&"columnFilter"!==i?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),p=this.popupSvc?.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(l),anchorToElement:u,ariaLabel:h});p&&(this.hidePopup=s=p.hideFunc),a.afterInit().then(()=>{t(l),a.afterGuiAttached({container:i,hidePopup:s})}),a5(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){"Tab"!==e.key||e.defaultPrevented||nM(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),nP(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},hN=class extends tE{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){if(!t)return;let r=e.getColDef(),{selectableFilter:n,valueSvc:o,formula:s}=this.beans,a=i??n?.getFilterValueGetter(e.getColId())??r.filterValueGetter;if(a)return this.executeFilterValueGetter(a,t.data,e,t,r);let l=o.getValue(e,t);return e.isAllowFormula()&&s?.isFormula(l)?s.resolveValue(e,t):l}executeFilterValueGetter(e,t,i,r,n){let{expressionSvc:o,valueSvc:s}=this.beans,a=iB(this.gos,{data:t,node:r,column:i,colDef:n,getValue:s.getValueCallback.bind(s,r)});return"function"==typeof e?e(a):o?.evaluate(e,a)}},hB={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},hV=class extends rI{constructor(){super(hB,[n8]),this.eFloatingFilterText=null}init(e){this.params=e;let t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){let t=e.getHandler();if(t.getModelAsString){let i=t.getModelAsString(e.model);this.eFloatingFilterText.setValue(i)}}}onParentModelChanged(e){null==e?this.eFloatingFilterText.setValue(""):this.params.parentFilterInstance(t=>{if(t.getModelAsString){let i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}refresh(e){this.init(e)}},hH=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){let i=e.filterOptions??t;this.filterOptions!==i&&(this.filterOptions=i,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){let{filterOptions:e}=this;if(e){for(let t of e)if("string"!=typeof t){if(![["displayKey"],["displayName"],["predicate","test"]].every(e=>!!e.some(e=>null!=t[e])||(t7(72,{keys:e}),!1))){this.filterOptions=e.filter(e=>e===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}}getDefaultItem(e){let{filterOptions:t}=this;if(e)return e;if(t.length>=1){let e=t[0];if("string"==typeof e)return e;if(e.displayKey)return e.displayKey;t7(73)}else t7(74)}getCustomOption(e){return this.customFilterOptions[e]}};function hz(e,t,i){return null==i?e.splice(t):e.splice(t,i)}function hj(e){return null==e||"string"==typeof e&&0===e.trim().length}function hG(e,t){let i=t.getCustomOption(e);if(i){let{numberOfInputs:e}=i;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}var hW=class extends sK{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);let t=new hH;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){var t;this.setNumConditions(e),this.defaultJoinOperator="AND"===(t=e.defaultJoinOperator)||"OR"===t?t:"AND",this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions(),ta(this.getGui(),"tabindex",this.isReadOnly()?"-1":null)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{let r=0===i?e:this.optionsFactory.defaultOption;t.setValue(r,!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){let{eJoinOrs:e,defaultJoinOperator:t}=this;return 0===e.length?t:!0===e[0].getValue()?"OR":"AND"}areNonNullModelsEqual(e,t){let i=!e.operator,r=!t.operator;return(!!i||!r)&&(!i||!!r)&&(i?this.areSimpleModelsEqual(e,t):e.operator===t.operator&&i4(e.conditions,t.conditions,(e,t)=>this.areSimpleModelsEqual(e,t)))}setModelIntoUi(e,t){if(null==e)return this.resetUiToDefaults(t),rN.resolve();if(e.operator){var i,r;let t,n=e.conditions;null==n&&(n=[],t7(77));let o=(i=n,r=this.maxNumConditions,(t=i.length)>r&&(i.splice(r),t7(78),t=r),t),s=this.getNumConditions();if(o<s)this.removeConditionsAndOperators(o);else if(o>s)for(let e=s;e<o;e++)this.createJoinOperatorPanel(),this.createOption();let a="OR"===e.operator;this.eJoinAnds.forEach(e=>e.setValue(!a,!0)),this.eJoinOrs.forEach(e=>e.setValue(a,!0)),n.forEach((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)})}else this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(e.type,!0),this.setConditionIntoUi(e,0);return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),rN.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(t7(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&(t7(80),i=1),i>t&&(t7(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){let e=this.getGui(),t=this.createManagedBean(new oo);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());let i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);let r=this.getNumConditions()-1;this.forEachPositionInput(r,e=>this.resetInput(e)),this.addChangedListeners(t,r)}createJoinOperatorPanel(){let e=th({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);let t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);let r=this.eJoinPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,r,n),this.resetJoinOperatorOr(i,r,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){let r=this.createManagedBean(new n3);e.push(r);let n="ag-filter-condition-operator";return r.addCss(n),r.addCss(`${n}-${i}`),t.appendChild(r.getGui()),r}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>"string"==typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){let{filterListOptions:t}=this;for(let i of t)e.addOption(i);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);let i=e+1,r=t-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((t,i)=>{let r=this.isConditionDisabled(i,e);t.setDisabled(r||this.filterListOptions.length<=1),1===i&&(eK(this.eJoinPanels[0],r),this.eJoinAnds[0].setDisabled(r),this.eJoinOrs[0].setDisabled(r))}),this.eConditionBodies.forEach((e,t)=>{eq(e,this.isConditionBodyVisible(t))});let i=(t??this.getJoinOperator())==="OR";for(let e of this.eJoinAnds)e.setValue(!i,!0);for(let e of this.eJoinOrs)e.setValue(i,!0);this.forEachInput((t,i,r,n)=>{this.setElementDisplayed(t,i<n),this.setElementDisabled(t,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;let{eTypes:i,eConditionBodies:r,eJoinPanels:n,eJoinAnds:o,eJoinOrs:s}=this;this.removeComponents(i,e,t),this.removeElements(r,e,t),this.removeEValues(e,t);let a=Math.max(e-1,0);this.removeElements(n,a,t),this.removeComponents(o,a,t),this.removeComponents(s,a,t)}removeElements(e,t,i){for(let r of hz(e,t,i))e4(r)}removeComponents(e,t,i){for(let r of hz(e,t,i))e4(r.getGui()),this.destroyBean(r)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let e;if(!this.isReadOnly()){let t=this.getInputs(0)[0];e=t instanceof n1&&this.isConditionBodyVisible(0)?t.getInputElement():this.eTypes[0]?.getFocusableElement()}(e??this.getGui()).focus({preventScroll:!0})}}shouldKeepInvalidInputState(){return!1}afterGuiDetached(){super.afterGuiDetached();let e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column)||this.shouldKeepInvalidInputState())return;e.onStateChange({model:e.model});let t=-1,i=-1,r=!1,n=this.getJoinOperator();for(let e=this.getNumConditions()-1;e>=0;e--)if(this.isConditionUiComplete(e))-1===t&&(t=e,i=e);else{let n=e>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(e-1),o=e<t;(n||o)&&(this.removeConditionsAndOperators(e,1),r=!0,o&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}resetPlaceholder(){let e=this.getLocaleTextFunc(),{filterPlaceholder:t,eTypes:i}=this;this.forEachInput((r,n,o,s)=>{if(!(r instanceof n1))return;let a=0===n&&s>1?e("ariaFilterFromValue","Filter from value"):0===n?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value"),l=sT(this,t,0===n&&s>1?"inRangeStart":0===n?"filterOoo":"inRangeEnd",i[o].getValue());r.setInputPlaceholder(l),r.setInputAriaLabel(a)})}setElementValue(e,t,i){e instanceof n1&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){rO(e)&&eq(e.getGui(),t)}setElementDisabled(e,t){rO(e)&&eK(e.getGui(),t)}attachElementOnChange(e,t){e instanceof n1&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){let i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){let r=hG(t,this.optionsFactory),n=this.getInputs(e);for(let t=0;t<n.length;t++){let o=n[t];null!=o&&i(o,t,e,r)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){return hG(this.getConditionType(e),this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||"empty"===this.getConditionType(e)||this.getValues(e).some(e=>null==e)||this.positionHasInvalidInputs(e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinAnds.forEach((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t)),this.eJoinOrs.forEach((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){let t=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,"AND"===this.defaultJoinOperator,this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,"OR"===this.defaultJoinOperator,this.translate("orCondition"),i)}resetJoinOperator(e,t,i,r,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(r),t)}updateJoinOperatorsDisabled(){let e=(e,t)=>this.updateJoinOperatorDisabled(e,t);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((e,r,n)=>{n===t&&this.setElementValue(e,null!=i[r]?i[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,r)=>{this.setElementValue(t,0===i&&0===r?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,e=>{this.attachElementOnChange(e,this.listener)}))}hasInvalidInputs(){return!1}positionHasInvalidInputs(e){return!1}isReadOnly(){return!!this.params.readOnly}},hU=".ag-input-field-input",h$=class{constructor(e,t,i,r,n,o){this.context=e,this.eParent=n,this.alive=!0,this.debouncedReport=t_({isAlive:()=>this.alive},hq,500),this.timeoutHandle=null;const s=t.getCompDetails(i,rH,"agDateInput",r,!0);s?.newAgStackInstance().then(t=>{if(!this.alive)return void e.destroyBean(t);if(this.dateComp=t,!t)return;n.appendChild(t.getGui()),t?.afterGuiAttached?.();let{tempValue:i,disabled:r}=this;i&&t.setDate(i),null!=r&&t.setDisabled?.(r),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){let t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){let t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){eq(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}setCustomValidity(e,t=!1){let i=this.dateComp?.getGui().querySelector(hU);if(i&&"setCustomValidity"in i){let r=e.length>0;i.setCustomValidity(e),r?t?this.timeoutHandle=this.debouncedReport(i):hq(i):this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),eB(i,r)}}getValidity(){return this.dateComp?.getGui().querySelector(hU)?.validity}};function hq(e){e.reportValidity()}var hK=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function hQ(e,t){let{dateFrom:i,dateTo:r,type:n}=e||{};return[i&&nX(i,void 0,!0)||null,r&&nX(r,void 0,!0)||null].slice(0,hG(n,t))}var hX=1/0,hY=class extends hW{constructor(){super("dateFilter",hQ,hK),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=hX,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!nv()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);let t=(t,i)=>{let r=e[t];if(null!=r)if(!isNaN(r))return null==r?i:Number(r);else t7(82,{param:t});return i},i=t("minValidYear",1e3),r=t("maxValidYear",hX);this.minValidYear=i,this.maxValidYear=r,i>r&&t7(83);let{minValidDate:n,maxValidDate:o}=e,s=n instanceof Date?n:nX(n);this.minValidDate=s;let a=o instanceof Date?o:nX(o);this.maxValidDate=a,s&&a&&s>a&&t7(84)}refreshInputValidation(){for(let e=0;e<this.dateConditionFromComps.length;e++)this.refreshInputPairValidation(e,!1,!0)}refreshInputPairValidation(e,t=!1,i=!1){var r,n,o;let{dateConditionFromComps:s,dateConditionToComps:a,beans:l}=this,u=s[e],d=a[e],c=u.getDate(),h=d.getDate(),p=(r=c,n=h,o=t,null!=r&&null!=n&&r>=n?`${o?"max":"min"}DateValidation`:null),f=p?this.translate(p,[String(t?h:c)]):"",g=!nv()&&!i;(t?u:d).setCustomValidity(f,g),(t?d:u).setCustomValidity("",g),f.length>0&&l.ariaAnnounce.announceValue(f,"dateFilter")}createDateCompWrapper(e,t,i){let{beans:{userCompFactory:r,context:n,gos:o},params:s}=this,a="from"===i,l=new h$(n,r,s.colDef,iB(o,{onDateChanged:()=>{this.refreshInputPairValidation(t,a),this.onUiChanged()},onFocusIn:()=>this.refreshInputPairValidation(t,a),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>l.destroy()),l}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}setElementValue(e,t){e.setDate(t),t||e.setCustomValidity("")}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){let e=th({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,r){let n=th({tag:"div",cls:`ag-filter-${r} ag-filter-date-${r}`});t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n,t.length-1,r))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),hz(this.eConditionPanelsFrom,e,t),hz(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){for(let r of hz(e,t,i))r.destroy()}isValidDateValue(e){if(null===e)return!1;let{minValidDate:t,maxValidDate:i,minValidYear:r,maxValidYear:n}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<r)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>n)return!1;return!0}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=null!=t.getDate()&&!(t.getValidity()?.valid??!0))),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,e=>t||(t=!(e.getValidity()?.valid??!0))),t}canApply(e){return!this.hasInvalidInputs()}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachPositionInput(e,(e,i,r,n)=>{t&&!(i>=n)&&t&&(t=this.isValidDateValue(e.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),i={},r=this.getValues(e),n=this.params.useIsoSeparator?"T":" ";return r.length>0&&(i.dateFrom=nG(r[0],!0,n)),r.length>1&&(i.dateTo=nG(r[1],!0,n)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}resetPlaceholder(){let e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)})}getInputs(e){let{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(e,i,r,n)=>{i<n&&t.push(e.getDate())}),t}translate(e,t){let i=e;return"lessThan"===e?i="before":"greaterThan"===e&&(i="after"),super.translate(i,t)}},hZ=class extends tE{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){let t=e.filterParams,i=new hH;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if("colDef"===e.source){let t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){let t=e.model;if(null==t)return!0;let{operator:i}=t,r=[];i?r.push(...t.conditions??[]):r.push(t);let n=this.params.getValue(e.node);return r[i&&"OR"===i?"some":"every"](t=>this.individualConditionPasses(e,t,n))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){let{model:t,filterParams:{filterOptions:i,maxNumConditions:r}}=e;if(null==t)return;let n=sQ(t)?t.conditions:[t],o=i?.map(e=>"string"==typeof e?e:e.displayKey)??this.defaultOptions;if(!(!n||n.every(e=>void 0!==o.find(t=>t===e.type)))){this.params={...e,model:null},e.onModelChange(null);return}let s=!1,a=this.filterType;if((n&&!n.every(e=>e.filterType===a)||t.filterType!==a)&&(n=n.map(e=>({...e,filterType:a})),s=!0),"number"==typeof r&&n&&n.length>r&&(n=n.slice(0,r),s=!0),s){let i=n.length>1?{...t,filterType:a,conditions:n}:{...n[0],filterType:a};this.params={...e,model:i},e.onModelChange(i)}}individualConditionPasses(e,t,i){let r=this.optionsFactory,n=this.mapValuesFromModel(t,r),o=function(e,t,i){if(null==e)return;let{predicate:r}=e;if(null!=r&&!t.some(e=>null==e))return r(t,i)}(r.getCustomOption(t.type),n,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e)}},hJ=class extends hZ{evaluateNullValue(e){let{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:r,includeBlanksInLessThan:n,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(r)return!0;break;case"lessThan":case"lessThanOrEqual":if(n)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0}return!1}evaluateNonNullValue(e,t,i){let r=i.type;if(!this.isValid(t))return"notEqual"===r||"notBlank"===r;let n=this.comparator(),o=null!=e[0]?n(e[0],t):0;switch(r){case"equals":return 0===o;case"notEqual":return 0!==o;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{let i=n(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&i<=0:o>0&&i<0}case"blank":return hj(t);case"notBlank":return!hj(t);default:return t7(76,{filterModelType:r}),!0}}},h0={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},h1={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},h2=class extends tE{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){let i=this.getLocaleTextFunc(),r="filterToolPanel"===t;if(!e)return r?sP(this,"filterSummaryInactive"):null;if(null!=e.operator){let i=(e.conditions??[]).map(e=>this.getModelAsString(e,t)),r="AND"===e.operator?"andCondition":"orCondition";return i.join(` ${sP(this,r)} `)}{if("blank"===e.type||"notBlank"===e.type)return r?sP(this,"blank"===e.type?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);let{displayKey:t,displayName:n,numberOfInputs:o}=this.optionsFactory.getCustomOption(e.type)||{};return t&&n&&0===o?i(t,n):this.conditionToString(e,r,"inRange"===e.type||2===o,t,n)}}updateParams(e){let{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,r,n,o){let s,a=this.getTypeKey(e);if(a&&(s=sP(this,a)),n&&o&&(s=this.getLocaleTextFunc()(n,o)),null!=s)if(t)return`${s} ${sP(this,"filterSummaryInRangeValues",[i(),r()])}`;else return`${s} ${i()}`;return null}getTypeKey(e){let t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){let t=this.valueFormatter;return t?t(e??null)??"":String(e)}},h5=class extends h2{constructor(e,t){super(e,t,e=>{let{dataTypeSvc:i,valueSvc:r}=this.beans,n=t.column,o=i?.getDateFormatterFunction(n),s=o?o(e??void 0):e;return r.formatValue(n,null,s)}),this.filterTypeKeys=h0}conditionToString(e,t,i,r,n){let{type:o}=e,s=nX(e.dateFrom),a=nX(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,u=t?this.formatValue.bind(this):e=>nK(e,l),d=()=>null!==s?u(s):"null",c=()=>null!==a?u(a):"null";if(t){let e=this.conditionForToolPanel(o,i,d,c,r,n);if(null!=e)return e}return i?`${d()}-${c()}`:null!=s?u(s):`${o}`}};function h3(e,t){return t<e?-1:+(t>e)}var h4=class extends rI{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){let t;if(!e){this.lastType=this.optionsFactory.defaultOption;return}t=e.operator?e.conditions[0]:e,this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)}init(e){this.params=e;let t=this.gos.get("enableFilterHandlers");this.reactive=t,this.setParams(e),t&&this.onModelUpdated(e.model)}setParams(e){let t=new hH;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){let i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;let r=this.isTypeEditable(i);this.setEditable(r)}refresh(e){this.params=e;let t=this.reactive;if(t&&"colDef"!==e.source||this.updateParams(e),t){let{source:t,model:i}=e;if("dataChanged"===t||"ui"===t)return;this.onModelUpdated(i)}}updateParams(e){let t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){let t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return null==t||1==t}isTypeEditable(e){return!!e&&!this.readOnly&&this.hasSingleInput(e)&&0>["inRange","empty","blank","notBlank"].indexOf(e)}getAriaLabel(e){let t=this.beans.colNames.getDisplayNameForColumn(e,"header",!0);return`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},h8={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},h6=class extends h4{constructor(){super(h8,[n8]),this.eReadOnlyText=null,this.eDateWrapper=null,this.FilterModelFormatterClass=h5,this.filterType="date",this.defaultOptions=hK}setParams(e){super.setParams(e),this.createDateComponent();let t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){let t=e?nX(e.dateFrom):null;this.dateComp.setDate(t),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){eq(this.eDateWrapper,e),eq(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){let e=this.dateComp.getDate();if(this.reactive){let t=this.params;t.onUiChange();let i=t.model,r=nG(e),n=null==r?null:{...i??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:r};t.onModelChange(n,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){let{filterParams:e}=this.params,t=sM(e,this.defaultDebounceMs);return iB(this.gos,{onDateChanged:t_(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){let{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:{column:r}}=this;this.dateComp=new h$(e,t,r.getColDef(),this.getDateComponentParams(),i,e=>{e.setInputAriaLabel(this.getAriaLabel(r))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},h7={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},h9=class extends rI{constructor(){super(h7,[n8]),this.eDateInput=null,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this),focusin:this.handleFocusIn.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}handleFocusIn(){this.params.onFocusIn?.()}setParams(e){let t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&nm();let{minValidYear:r,maxValidYear:n,minValidDate:o,maxValidDate:s,buttons:a,includeTime:l,colDef:u}=e.filterParams||{},d=this.beans.dataTypeSvc,c=l??d?.getDateIncludesTimeFlag?.(u.cellDataType)??!1;if(i?c?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&r&&t7(85),s&&n&&t7(86),o&&s){let[e,t]=[o,s].map(e=>e instanceof Date?e:nX(e));e&&t&&e.getTime()>t.getTime()&&t7(87)}o?o instanceof Date?t.min=nK(o):t.min=o:r&&(t.min=`${r}-01-01`),s?s instanceof Date?t.max=nK(s):t.max=s:n&&(t.max=`${n}-12-31`),this.isApply="floatingFilter"===e.location&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return nX(this.eDateInput.getValue())}setDate(e){let t=this.params.filterParams.colDef.cellDataType,i=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(nG(e,i))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},pe=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function pt(e){return e?.allowedCharPattern??null}function pi(e){return null==e||isNaN(e)?null:e}function pr(e,t){let{filter:i,filterTo:r,type:n}=e||{};return[pi(i),pi(r)].slice(0,hG(n,t))}var pn=class extends hW{constructor(){super("numberFilter",pr,pe),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!nv()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){let t=this.eValuesFrom[e],i=this.eValuesTo[e];this.refreshInputPairValidation(t,i)}}refreshInputPairValidation(e,t,i=!1){var r,n,o;let s=this.params.numberParser,a=ps(s,e),l=ps(s,t),u=(r=a,n=l,o=i,null!=r&&null!=n&&r>=n?`strict${o?"Max":"Min"}ValueValidation`:null),d=u?this.translate(u,[String(i?l:a)]):"";(i?e:t).setCustomValidity(d),(i?t:e).setCustomValidity(""),d.length>0&&this.beans.ariaAnnounce.announceValue(d,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}refresh(e){let t=super.refresh(e),{state:i,additionalEventAttributes:r}=e,n=this.state,o=r?.fromAction;return(o&&"apply"!=o||i.model!==n.model||!this.areStatesEqual(i.state,n.state))&&this.refreshInputValidation(),t}setElementValue(e,t,i){let{numberFormatter:r}=this.params,n=!i&&r?r(t??null):t;super.setElementValue(e,n),null===n&&e.setCustomValidity("")}createEValue(){let{params:e,eValuesFrom:t,eValuesTo:i}=this,r=pt(e),n=th({tag:"div",cls:"ag-filter-body",role:"presentation"}),o=this.createFromToElement(n,t,"from",r),s=this.createFromToElement(n,i,"to",r),a=(e,t,i)=>()=>this.refreshInputPairValidation(e,t,i),l=a(o,s,!0);o.onValueChange(l),o.addGuiEventListener("focusin",l);let u=a(o,s,!1);return s.onValueChange(u),s.addGuiEventListener("focusin",u),n}createFromToElement(e,t,i,r){let n=this.createManagedBean(r?new n4({allowedCharPattern:r}):new n7);return n.addCss(`ag-filter-${i}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui()),n}removeEValues(e,t){let i=i=>this.removeComponents(i,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){let t=[];return this.forEachPositionInput(e,(e,i,r,n)=>{i<n&&t.push(pi(po(this.params.numberParser,e.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){let t=this.getConditionType(e),i={filterType:this.filterType,type:t},r=this.getValues(e);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){let{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,e=>t||(t=!e.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}};function po(e,t){if("number"==typeof t)return t;let i=em(t);return(null!=i&&""===i.trim()&&(i=null),e)?e(i):null==i||"-"===i.trim()?null:Number.parseFloat(i)}function ps(e,t){return pi(po(e,t.getValue(!0)))}var pa=class extends h2{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=h0}conditionToString(e,t,i,r,n){let{filter:o,filterTo:s,type:a}=e,l=this.formatValue.bind(this);if(t){let e=this.conditionForToolPanel(a,i,()=>l(o),()=>l(s),r,n);if(null!=e)return e}return i?`${l(o)}-${l(s)}`:null!=o?l(o):`${a}`}},pl=class extends tE{constructor(e){super(),this.params=e,this.eInput=null,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new n4(this.params?.config));let t=this.eInput.getGui();e.appendChild(t);let i=e=>this.onValueChanged(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t,placeholder:i}){let{eInput:r}=this;r.setInputAriaLabel(e),void 0!==t&&r.setAutoComplete(t),r.toggleCss("ag-floating-filter-search-icon",!!i),r.setInputPlaceholder(i)}};function pu(e){let t=e?.trim();return""===t?e:t}function pd(e,t){let{filter:i,filterTo:r,type:n}=e||{};return[i||null,r||null].slice(0,hG(n,t))}var pc={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},ph=class extends h4{constructor(){super(...arguments),this.eFloatingFilterInputContainer=null,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(pc)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){let{inputSvc:t,defaultDebounceMs:i,readOnly:r}=this,{filterPlaceholder:n,column:o,browserAutoComplete:s,filterParams:a}=e,l=this.lastType??this.optionsFactory.defaultOption,u=e.filterParams.filterPlaceholder,d=!0===n?sT(this,u,"filterOoo",l):n||void 0;if(t.setParams({ariaLabel:this.getAriaLabel(o),autoComplete:s??!1,placeholder:d}),this.applyActive=sD(a),!r){let e=sM(a,i);t.setValueChangedListener(t_(this,this.syncUpWithParentFilter.bind(this),e))}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let{inputSvc:t}=this,i=t.getValue();e3(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){let t=e.key===r7,i=this.reactive;if(i&&this.params.onUiChange(),this.applyActive&&!t)return;let{inputSvc:r,params:n,lastType:o}=this,s=r.getValue();if(n.filterParams.trimInput&&(s=pu(s),r.setValue(s,!0)),i){let e=n.model,t=this.convertValue(s),i=null==t?null:{...e??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:t};n.onModelChange(i,{afterFloatingFilter:!0})}else n.parentFilterInstance(e=>{e?.onFloatingFilterChanged(o||null,s||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},pp=class extends tE{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new n7),this.eTextInput=this.createManagedBean(new n4),this.eTextInput.setDisabled(!0);let t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,e=>this.onValueChanged(e)),this.setupListeners(i,e=>this.onValueChanged(e))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams({ariaLabel:e,autoComplete:t,placeholder:i}){this.setAriaLabel(e),void 0!==t&&this.setAutoComplete(t),this.setPlaceholder(this.eNumberInput,i),this.setPlaceholder(this.eTextInput,i)}setPlaceholder(e,t){e.toggleCss("ag-floating-filter-search-icon",!!t),e.setInputPlaceholder(t)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},pf=class extends ph{constructor(){super(...arguments),this.FilterModelFormatterClass=pa,this.filterType="number",this.defaultOptions=pe}updateParams(e){pt(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return(this.allowedCharPattern=pt(e.filterParams),this.allowedCharPattern)?this.createManagedBean(new pl({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new pp)}convertValue(e){return e?Number(e):null}},pg=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],pm=class extends hW{constructor(){super("textFilter",pd,pg),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){let t=this.getConditionType(e),i={filterType:this.filterType,type:t},r=this.getValues(e);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){let{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(e,i,r,n)=>{i<n&&t.push(em(e.getValue()))}),t}createEValue(){let e=th({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){let r=this.createManagedBean(new n4);r.addCss(`ag-filter-${i}`),r.addCss("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeEValues(e,t){let i=i=>this.removeComponents(i,e,t),{eValuesFrom:r,eValuesTo:n}=this;i(r),i(n)}},pv=class extends h2{constructor(){super(...arguments),this.filterTypeKeys=h1}conditionToString(e,t,i,r,n){let{filter:o,filterTo:s,type:a}=e;if(t){let e=e=>()=>sP(this,"filterSummaryTextQuote",[e]),t=this.conditionForToolPanel(a,i,e(o),e(s),r,n);if(null!=t)return t}return i?`${o}-${s}`:null!=o?`${o}`:`${a}`}},py=({filterOption:e,value:t,filterText:i})=>{if(null==i)return!1;switch(e){case"contains":return t.includes(i);case"notContains":return!t.includes(i);case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return 0===t.indexOf(i);case"endsWith":{let e=t.lastIndexOf(i);return e>=0&&e===t.length-i.length}default:return!1}},pb=e=>e,pw=e=>null==e?null:e.toString().toLowerCase(),pC=class extends hZ{constructor(){super(pd,pg),this.filterType="text",this.FilterModelFormatterClass=pv}updateParams(e){super.updateParams(e);let t=e.filterParams;this.matcher=t.textMatcher??py,this.formatter=t.textFormatter??(t.caseSensitive?pb:pw)}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,r){let n=e.map(e=>this.formatter(e))||[],o=this.formatter(t),{api:s,colDef:a,column:l,context:u,filterParams:{textFormatter:d}}=this.params;if("blank"===i.type)return hj(t);if("notBlank"===i.type)return!hj(t);let c={api:s,colDef:a,column:l,context:u,node:r.node,data:r.data,filterOption:i.type,value:o,textFormatter:d};return n.some(e=>this.matcher({...c,filterText:e}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){let t=e=>{let t={...e},{filter:i,filterTo:r}=e;return i&&(t.filter=pu(i)??null),r&&(t.filterTo=pu(r)??null),t};return sQ(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},px=class extends ph{constructor(){super(...arguments),this.FilterModelFormatterClass=pv,this.filterType="text",this.defaultOptions=pg}createFloatingFilterInputService(){return this.createManagedBean(new pl)}},pS=class extends tE{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){let e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",e=>this.setFilter(e.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){let{autoColSvc:e,colModel:t,gos:i,pivotResultCols:r}=this.beans,n=t.isPivotMode(),o=e?.getColumns(),s=t.getColDefCols(),a=(n&&!i.get("applyQuickFilterBeforePivotOrAgg")?r?.getPivotResultCols()?.list:s)??[];o&&(a=a.concat(o)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter(e=>e.isVisible()||e.isRowGroupActive())}isFilterPresent(){return null!==this.quickFilter}doesRowPass(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return ev(e)?e.toUpperCase():null}setFilter(e){if(null!=e&&"string"!=typeof e)return void t7(70,{newFilter:e});let t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{let r=this.getTextForColumn(i,e);return ev(r)&&r.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);let{quickFilterParts:r,matcher:n}=this;return n(r,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t),r=e.getColDef();if(r.getQuickFilterText){let n=iB(this.gos,{value:i,node:t,data:t.data,column:e,colDef:r});i=r.getQuickFilterText(n)}return ev(i)?i.toString().toUpperCase():null}getAggText(e){let t=[];for(let i of this.colsToUse){let r=this.getTextForColumn(i,e);ev(r)&&t.push(r)}return t.join("\n")}},pk={moduleName:"FilterCore",version:tZ,beans:[hI],apiFunctions:{isAnyFilterPresent:function(e){return!!e.filterManager?.isAnyFilterPresent()},onFilterChanged:function(e,t="api"){e.filterManager?.onFilterChanged({source:t})}},css:[".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}"],dependsOn:[{moduleName:"ClientSideRowModelFilter",version:tZ,rowModels:["clientSide"],beans:[hT]}]},pR={moduleName:"FilterValue",version:tZ,beans:[hN]},pE={moduleName:"ColumnFilter",version:tZ,beans:[hF,hL],dynamicBeans:{headerFilterCellCtrl:hO},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:function(e){let t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()},getColumnFilterInstance:function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},destroyFilter:function(e,t){let i=e.colModel.getColDefCol(t);if(i)return e.colFilter?.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))},getFilterModel:function(e){return e.filterManager?.getFilterModel()??{}},getColumnFilterModel:function(e,t,i){let{gos:r,colModel:n,colFilter:o}=e;i&&!r.get("enableFilterHandlers")&&(t7(288),i=!1);let s=n.getColDefCol(t);return s?o?.getModelForColumn(s,i)??null:null},setColumnFilterModel:function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},showColumnFilter:function(e,t){let i=e.colModel.getCol(t);i?e.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):t9(12,{colKey:t})},hideColumnFilter:function(e){e.menuSvc?.hideFilterMenu()},getColumnFilterHandler:function(e,t){let i=e.colModel.getCol(t);return i?e.colFilter?.getHandler(i,!0):void t9(12,{colKey:t})},doFilterAction:function(e,t){let{colModel:i,colFilter:r,gos:n}=e;if(!n.get("enableFilterHandlers"))return void t7(287);let{colId:o,action:s}=t;if(o){let e=i.getColById(o);e&&r?.updateModel(e,s)}else r?.updateAllModels(s)}},dependsOn:[pk,h_,pR,{moduleName:"SharedMenu",version:tZ,beans:[a2],apiFunctions:{showColumnMenu:function(e,t){let i=e.colModel.getCol(t);i?e.menuSvc?.showColumnMenu({column:i,positionBy:"auto"}):t9(12,{colKey:t})},hidePopupMenu:function(e){e.menuSvc?.hidePopupMenu()}}}]},pP=(e,t,i)=>{let{editModelSvc:r}=e,n=r?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=r?.getRowValidationModel().getRowValidation(t)?.errorMessages,s=n||o;return s?.length?s.join(i("tooltipValidationErrorSeparator",". ")):void 0},pM={moduleName:"Tooltip",version:tZ,beans:[class extends tE{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,r){e&&t.destroyBean(e);let n=this.gos,o=hf(n),{column:s,eGui:a}=t,l=s.getColDef();r||!o||l.headerComponent||(r=e9(()=>a.querySelector(".ag-header-cell-text")));let u="header",d=this.beans.colNames.getDisplayNameForColumn(s,"header",!0),c=i??d,h={getGui:()=>a,getLocation:()=>u,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.(iB(n,{location:u,colDef:l,column:s,value:c,valueFormatted:d}))??l?.headerTooltip,shouldDisplayTooltip:r,getAdditionalParams:()=>({column:s,colDef:s.getColDef()})},p=this.createTooltipFeature(h);return p&&(p=t.createBean(p),t.setRefreshFunction("tooltip",()=>p.refreshTooltip())),p}setupHeaderGroupTooltip(e,t,i,r){e&&t.destroyBean(e);let n=this.gos,o=hf(n),{column:s,eGui:a}=t,l=s.getColGroupDef();r||!o||l?.headerGroupComponent||(r=e9(()=>a.querySelector(".ag-header-group-text")));let u="headerGroup",d=this.beans.colNames.getDisplayNameForColumnGroup(s,"header"),c=i??d,h={getGui:()=>a,getLocation:()=>u,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.(iB(n,{location:u,colDef:l,column:s,value:c,valueFormatted:d}))??l?.headerTooltip,shouldDisplayTooltip:r,getAdditionalParams:()=>{let e={column:s};return l&&(e.colDef=l),e}},p=this.createTooltipFeature(h);return p?t.createBean(p):p}enableCellTooltipFeature(e,t,i){let{beans:r}=this,{gos:n,editSvc:o}=r,{column:s,rowNode:a}=e,l="cell",u=()=>{let t=!o?.isEditing(e)&&pP(r,e,this.getLocaleTextFunc());if(t)return l="cellEditor",t;l="cell";let i=s.getColDef(),u=a.data;if(i.tooltipField&&ev(u))return u_(u,i.tooltipField,s.isTooltipFieldContainsDots());let d=i.tooltipValueGetter;return d?d(iB(n,{location:"cell",colDef:s.getColDef(),column:s,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},d=hf(n);i||(i=d&&!e.isCellRenderer()?()=>{let t=!!o?.isEditing(e);if(!t&&pP(r,e,this.getLocaleTextFunc()))return!0;if(!s.isTooltipEnabled())return!1;let i=e9(()=>{let t=e.eGui;return 0===t.children.length?t:t.querySelector(".ag-cell-value")});return!t&&i()}:()=>!o?.isEditing(e));let c={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:null!=t?()=>t:u,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:s,colDef:s.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(c,r)}setupFullWidthRowTooltip(e,t,i,r){let n=this.beans,o=n.context;e&&t.destroyBean(e,o);let s=this.createTooltipFeature({getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:r},n);if(s)return t.createBean(s,o)}setupFormulaTooltip(e){let{beans:t}=this,{context:i,formula:r}=t;if(!this.beans.formula?.active||!e.column.isAllowFormula())return;let n=this.createTooltipFeature({getGui:()=>e.eGui,getTooltipValue:()=>{let t=r?.getFormulaError(e.column,e.rowNode);return t?t.message:void 0},getLocation:()=>"cellFormula",shouldDisplayTooltip:()=>!!r?.getFormulaError(e.column,e.rowNode)},t);if(n)return e.createBean(n,i)}setupCellEditorTooltip(e,t){let{beans:i}=this,{context:r}=i,n=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!n)return;let o=this.createTooltipFeature({getGui:()=>n,getTooltipValue:()=>pP(i,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{let{editModelSvc:e}=i,t=e?.getRowValidationModel()?.getRowValidationMap(),r=e?.getCellValidationModel()?.getCellValidationMap(),n=!!t&&t.size>0,o=!!r&&r.size>0;return n||o}},i);if(o)return e.createBean(o,r)}initCol(e){let{colDef:t}=e;e.tooltipEnabled=ev(t.tooltipField)||ev(t.tooltipValueGetter)||ev(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}}],dynamicBeans:{tooltipFeature:o0,highlightTooltipFeature:o5,tooltipStateManager:class extends o2{createTooltipComp(e,t){var i;let r=(i=this.beans.userCompFactory,i.getCompDetails(e.colDef,rQ,"agTooltipComponent",e,!0));r?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}}},userComponents:{agTooltipComponent:o8},dependsOn:[h_],css:[".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}"]},pD=class{constructor(e){this.cellValueChanges=e}},pT=class extends pD{constructor(e,t,i,r){super(e),this.initialRange=t,this.finalRange=i,this.ranges=r}},pO=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},p_=class extends tE{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{var t;let i={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},r=null!==this.activeCellEdit&&aO(this.activeCellEdit,i),n=null!==this.activeRowEdit&&(t=this.activeRowEdit,!t&&!i||!!t&&!!i&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned);if(!(r||n||this.isPasting||this.isRangeInAction))return;let{rowPinned:o,rowIndex:s,column:a,oldValue:l,value:u}=e,d={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:u,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){let{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;let i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new pO(i),this.redoStack=new pO(i),this.addListeners();let r=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:r,newColumnsLoaded:r,columnGroupOpened:r,columnRowGroupChanged:r,columnMoved:r,columnPinned:r,columnVisible:r,rowDragEnd:r}),t.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){let{eventSvc:t,undoStack:i,redoStack:r}=this;t.dispatchEvent({type:"undoStarted",source:e});let n=this.undoRedo(i,r,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:n})}redo(e){let{eventSvc:t,undoStack:i,redoStack:r}=this;t.dispatchEvent({type:"redoStarted",source:e});let n=this.undoRedo(r,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:n})}undoRedo(e,t,i,r,n){if(!e)return!1;let o=e.pop();return!!o?.cellValueChanges&&(this.processAction(o,e=>e[r],n),o instanceof pT?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){for(let r of e.cellValueChanges){let{rowIndex:e,rowPinned:n,columnId:o}=r,s={rowIndex:e,rowPinned:n},a=a_(this.beans,s);a.displayed&&a.setDataValue(o,t(r),i)}}processRange(e){let t,i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((r,n)=>{if(!r)return;let o=r.startRow,s=r.endRow;n===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:r.startColumn.getColId()},this.setLastFocusedCell(t));let a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:r.startColumn,columns:r.columns};i.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:i,rowPinned:r}=t,n=a_(this.beans,{rowIndex:i,rowPinned:r}),o={rowPinned:t.rowPinned,rowIndex:n.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o)}setLastFocusedCell(e){let{rowIndex:t,columnId:i,rowPinned:r}=e,{colModel:n,focusSvc:o,rangeSvc:s}=this.beans,a=n.getCol(i);if(!a)return;let{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);let u={rowIndex:t,column:a,rowPinned:r};o.setFocusedCell({...u,forceBrowserFocus:!0}),s?.setRangeToCell(u)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new pD(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let e=new pD(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new pD(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new pT(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e,{rangeSvc:t,gos:i}=this.beans;e=t&&iP(i)?new pT(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):new pD(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){"bulkEditing"===e?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if("bulkEditing"===e&&!this.bulkEditing||"batchEditing"===e&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;let i=new pD(t??[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},pA={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},pF=class extends a4{constructor(){super(pA,[n5]),this.eEditor=null}initialiseEditor(e){let t=e.value??void 0,i=this.eEditor;i.setValue(t),i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.getLocaleTextFunc(),i=eW(t,e),r=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${r} (${i})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}},pI=class extends a4{constructor(e){super(),this.cellEditorInput=e,this.eEditor=null}initialiseEditor(e){let t,{cellEditorInput:i}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[i.getTemplate()]},i.getAgComponents());let{eEditor:r}=this,{cellStartedEdit:n,eventKey:o,suppressPreventDefault:s}=e;r.getInputElement().setAttribute("title",""),i.init(r,e);let a=!0;n?(this.focusAfterAttached=!0,o===r6||o===nn?t="":o&&1===o.length?s?a=!1:t=o:(t=i.getStartValue(),"F2"!==o&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,t=i.getStartValue()),a&&null!=t&&r.setStartValue(t),this.addGuiEventListener("keydown",e=>{let{key:t}=e;(t===no||t===ns)&&e.preventDefault()})}afterGuiAttached(){let e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;nm()||t.getFocusableElement().focus();let i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){let{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},pL={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},pN=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return pL}getAgComponents(){return[oe]}init(e,t){this.eEditor=e,this.params=t;let{min:i,max:r,step:n,colDef:o}=t;null!=i&&e.setMin(i),null!=r&&e.setMax(r),null!=n&&e.setStep(n),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let e=this.eEditor.getInputElement().valueAsDate,{params:t}=this,{min:i,max:r,getValidationErrors:n}=t,o=[],s=this.getLocaleTextFunc();if(e instanceof Date&&!isNaN(e.getTime())){if(i){let t=i instanceof Date?i:new Date(i);if(e<t){let e=t.toLocaleDateString();o.push(s("minDateValidation",`Date must be after ${e}`,[e]))}}if(r){let t=r instanceof Date?r:new Date(r);if(e>t){let e=t.toLocaleDateString();o.push(s("maxDateValidation",`Date must be before ${e}`,[e]))}}}return(o.length||(o=null),n)?n({value:e,cellEditorParams:t,internalErrors:o}):o}getValue(){let{eEditor:e,params:t}=this,i=e.getDate();return ev(i)||ev(t.value)?i??null:t.value}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return nG(e,this.includeTime??!1)}},pB={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},pV=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return pB}getAgComponents(){return[oe]}init(e,t){this.eEditor=e,this.params=t;let{min:i,max:r,step:n,colDef:o}=t;null!=i&&e.setMin(i),null!=r&&e.setMax(r),null!=n&&e.setStep(n),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),null!=this.includeTime&&e.setIncludeTime(this.includeTime)}getValidationErrors(){let{eEditor:e,params:t}=this,i=e.getInputElement().value,r=this.formatDate(this.parseDate(i??void 0)),{min:n,max:o,getValidationErrors:s}=t,a=[];if(r){let e=new Date(r),t=this.getLocaleTextFunc();if(n){let i=new Date(n);if(e<i){let e=i.toLocaleDateString();a.push(t("minDateValidation",`Date must be after ${e}`,[e]))}}if(o){let i=new Date(o);if(e>i){let e=i.toLocaleDateString();a.push(t("maxDateValidation",`Date must be before ${e}`,[e]))}}}return(a.length||(a=null),s)?s({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){let{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return ev(i)||ev(e.value)?e.parseValue(i??""):e.value}getStartValue(){return nG(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):nX(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):nG(e??null,this.includeTime??!1)??void 0}},pH={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},pz=class extends a4{constructor(){super(pH,[n6]),this.eEditor=null}initialiseEditor(e){let t,{eEditor:i}=this,{cellStartedEdit:r,eventKey:n,maxLength:o,cols:s,rows:a}=e;this.focusAfterAttached=r,i.getInputElement().setAttribute("title",""),i.setMaxLength(o||200).setCols(s||60).setRows(a||10),r?(this.focusAfterAttached=!0,n===r6||n===nn?t="":n&&1===n.length?t=n:(t=this.getStartValue(e),"F2"!==n&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,t=this.getStartValue(e)),null!=t&&i.setValue(t,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){let{value:t}=e;return t?.toString()??t}onKeyDown(e){let t=e.key;(t===ne||t===nt||t===ni||t===nr||e.shiftKey&&t===r7)&&e.stopPropagation()}afterGuiAttached(){let{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,r=this.getLocaleTextFunc();e.setInputAriaLabel(r("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){let{eEditor:e,params:t}=this,{value:i}=t,r=e.getValue();return ev(r)||ev(i)?t.parseValue(r):i}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:i}=e,r=this.getLocaleTextFunc(),n=this.getValue(),o=[];return("string"==typeof n&&null!=t&&n.length>t&&o.push(r("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i)?i({value:n,internalErrors:o,cellEditorParams:e}):o}},pj={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},pG=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return pj}getAgComponents(){return[n9]}init(e,t){this.eEditor=e,this.params=t;let{max:i,min:r,precision:n,step:o}=t;null!=i&&e.setMax(i),null!=r&&e.setMin(r),null!=n&&e.setPrecision(n),null!=o&&e.setStep(o);let s=e.getInputElement();t.preventStepping?e.addManagedElementListeners(s,{keydown:this.preventStepping}):t.showStepperButtons&&s.classList.add("ag-number-field-input-stepper")}getValidationErrors(){let{params:e}=this,{min:t,max:i,getValidationErrors:r}=e,n=this.eEditor.getInputElement().valueAsNumber,o=this.getLocaleTextFunc(),s=[];return("number"==typeof n&&(null!=t&&n<t&&s.push(o("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),null!=i&&n>i&&s.push(o("maxValueValidation",`Must be less than or equal to ${i}.`,[String(i)]))),s.length||(s=null),r)?r({value:n,cellEditorParams:e,internalErrors:s}):s}preventStepping(e){(e.key===nt||e.key===nr)&&e.preventDefault()}getValue(){let{eEditor:e,params:t}=this,i=e.getValue();if(!ev(i)&&!ev(t.value))return t.value;let r=t.parseValue(i);if(null==r)return r;if("string"==typeof r){if(""===r)return null;r=Number(r)}return isNaN(r)?null:r}getStartValue(){return this.params.value}setCaret(){nm()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},pW={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},pU=class extends a4{constructor(){super(pW,[os]),this.eEditor=null,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;let{eEditor:t,valueSvc:i,gos:r}=this,{values:n,value:o,eventKey:s}=e;if(ey(n))return void t7(58);this.startedByEnter=null!=s&&s===r7;let a=!1;n.forEach(r=>{let n={value:r},s=i.formatValue(e.column,null,r);n.text=null!=s?s:r,t.addOption(n),a=a||o===r}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:u,valueListMaxHeight:d}=e;null!=l&&t.setPickerGap(l),null!=d&&t.setPickerMaxHeight(d),null!=u&&t.setPickerMaxWidth(u),"fullRow"!==r.get("editType")&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){let{params:e}=this,{values:t,getValidationErrors:i}=e,r=this.getValue(),n=[];if(t&&!t.includes(r)){let e=this.getLocaleTextFunc();n.push(e("invalidSelectionValidation","Invalid selection."))}else n=null;return i?i({value:r,internalErrors:n,cellEditorParams:e}):n}},p$={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},pq=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return p$}getAgComponents(){return[n8]}init(e,t){this.eEditor=e,this.params=t;let i=t.maxLength;null!=i&&e.setMaxLength(i)}getValidationErrors(){let{params:e}=this,{maxLength:t,getValidationErrors:i}=e,r=this.getValue(),n=this.getLocaleTextFunc(),o=[];return(null!=t&&"string"==typeof r&&r.length>t&&o.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i)?i({value:r,cellEditorParams:e,internalErrors:o}):o}getValue(){let{eEditor:e,params:t}=this,i=e.getValue();return ev(i)||ev(t.value)?t.parseValue(i):t.value}getStartValue(){let e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){nm()&&this.eEditor.getInputElement().focus({preventScroll:!0});let e=this.eEditor,t=e.getValue(),i=ev(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},pK=class extends pI{constructor(){super(new pq(()=>this.getLocaleTextFunc()))}};function pQ(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function pX(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}var pY={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},pZ=class extends ng{constructor(e){super(pY),this.params=e}postConstruct(){ip(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,i=e=>{s9(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)};this.addManagedElementListeners(e,{keydown:i})}};function pJ(e,{rowNode:t,column:i},r="ui"){let n=i.getColDef().editable,o=e.editModelSvc;return i.isColumnFunc(t,n)||!!o&&o.hasEdits({rowNode:t,column:i},{withOpenEditor:!0})}var p0=(e,t=!1)=>{if(void 0!==e)return d2(e)||t&&"editing"===e.state};function p1(e,t,i=!1){return p0(e.editModelSvc?.getEdit(t),i)}var p2=(e,t,i)=>{if(e)for(let r=0,n=e.length;r<n;++r){let n=e[r];if(n.data&&(p0(t?.getEdit({rowNode:n,column:i}))||p0(t?.getEdit({rowNode:n.pinnedSibling,column:i})))||p2(n.childrenAfterGroup,t,i))return!0}};function p5(e,t){let{column:i,rowNode:r}=t;return(!e.gos.get("groupTotalRow")||!!r?.footer)&&p2(r?.childrenAfterGroup,e.editModelSvc,i)}function p3(e,{rowNode:t,column:i}){if(t=t.pinnedSibling)return p0(e.editModelSvc?.getEdit({rowNode:t,column:i}))}var p4=class extends tE{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){let{cellCtrl:e,editSvc:t,beans:i}=this;if(t?.isBatchEditing()&&t.isEditing()){let t=p1(i,e)||p5(i,e)||p3(i,e);this.applyBatchingStyle(t)}else this.applyBatchingStyle(!1);let r=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",r)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},p8=class extends tE{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){let{rowCtrl:e,editModelSvc:t,beans:i}=this,r=e.rowNode,n=t?.getEditRow(r),o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:r});if(!n&&r.pinnedSibling&&(r=r.pinnedSibling,n=t?.getEditRow(r)),n){let e=Array.from(n.keys()).some(e=>{let t={rowNode:r,column:e};return p1(i,t,!0)||p5(i,t)||p3(i,t)});this.applyStyle(o,e);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){let i=this.editSvc?.isBatchEditing()??!1,r="fullRow"===this.gos.get("editType");this.rowCtrl?.forEachGui(void 0,({rowComp:n})=>{n.toggleCss("ag-row-editing",r&&t),n.toggleCss("ag-row-batch-edit",r&&t&&i),n.toggleCss("ag-row-inline-editing",t),n.toggleCss("ag-row-not-inline-editing",!t),n.toggleCss("ag-row-editing-invalid",r&&t&&e)})}},p6=new Set(["undo","redo","paste","bulk","rangeSvc"]),p7=new Set(["ui","api"]),p9={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},fe=new Set(Object.keys(p9)),ft=new Set(["paste","rangeSvc","cellClear","redo","undo"]),fi={cancel:!0,source:"api"},fr={cancel:!1,source:"api"},fn={checkSiblings:!0},fo={force:!0,suppressFlash:!0},fs=class extends tE{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){let{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:e})=>{this.stopEditing(void 0,fi),this.createStrategy(e)});let t=()=>{let t=new Set(e.colModel.getCols()),i=new Set(e.editModelSvc.getEditMap(!0).keys());(({editModelSvc:e},t,i)=>{for(let r of t)e?.getEditRow(r)?.forEach((t,n)=>!i.has(n)&&e.removeEdits({rowNode:r,column:n}))})(e,(({rowModel:e,pinnedRowModel:t,editModelSvc:i},r)=>{let n=new Set;for(let o of(e.forEachNode(e=>r.has(e)&&n.add(e)),t?.forEachPinnedRow("top",e=>r.has(e)&&n.add(e)),t?.forEachPinnedRow("bottom",e=>r.has(e)&&n.add(e)),r))n.has(o)||i.removeEdits({rowNode:o});return n})(e,i),t)},i=()=>{let t=this.model.getCellValidationModel().getCellValidationMap().size>0,i=this.model.getRowValidationModel().getRowValidationMap().size>0;return t||i?this.stopEditing(void 0,fi):this.isEditing()&&(this.batch?ct(e,this.model.getEditPositions()):this.stopEditing(void 0,fr)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,fi)):(this.stopEditing(void 0,fi),this.batch=!1)}createStrategy(e){let{beans:t,gos:i,strategy:r}=this,n=fa(i,e);if(r){if(r.beanName===n)return r;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(n,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i,r="ui"){let n=function(e,{column:t},i,r,n="ui"){var o,s;if(i instanceof KeyboardEvent&&("Tab"===i.key||i.key===r7||"F2"===i.key||i.key===r6&&r))return!0;if(i?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;let a=t?.getColDef(),l=(o=e.gos,s=a,!0===o.get("suppressClickEdit")?0:!0===o.get("singleClickEdit")||s?.singleClickEdit?1:2),u=i?.type;return"click"===u&&i?.detail===1&&1===l||"dblclick"===u&&i?.detail===2&&2===l||"api"===n&&(r??!1)}(this.beans,e,t,i,r);return n&&(this.strategy??(this.strategy=this.createStrategy())),n}shouldStopEditing(e,t,i="ui"){return this.strategy?.shouldStop(e,t,i)??null}shouldCancelEditing(e,t,i="ui"){return this.strategy?.shouldCancel(e,t,i)??null}validateEdit(){var e=this.beans;cs(e,!0);let t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;let i=[];return t.forEach((e,t)=>{e.forEach(({errorMessages:e},r)=>{i.push({column:r,rowIndex:t.rowIndex,rowPinned:t.rowPinned,messages:e??null})})}),i}isEditing(e,t){return this.model.hasEdits(e,t??fn)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){let{startedEdit:i=!0,event:r=null,source:n="ui",ignoreEventKey:o=!1,silent:s}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;let a=dY(this.beans,e);if(a&&!a.comp)return void a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));let l=this.shouldStartEditing(e,r,i,n);if(!1===l&&"api"!==n){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,n)&&!t.continueEditing&&this.stopEditing(void 0,{source:n}),l&&this.batch&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:r,source:n,ignoreEventKey:o,startedEdit:i,silent:s})}stopEditing(e,t){let i=this.prepareStopContext(e,t);if(!i)return!1;this.stopping=!0;let r=!1,{edits:n}=i;try{let o=this.processStopRequest(i);return r||(r=o.res),n=o.edits,this.finishStopEditing({...i,edits:n,params:t,position:e,res:r}),r}finally{this.stopping=!1}}prepareStopContext(e,t){let{event:i,cancel:r,source:n="ui",forceCancel:o,forceStop:s}=t||{};if(fe.has(n)&&this.batch)return this.bulkRefresh(e),null;let a=this.committing?p9[n]:n;if(!(this.committing||this.isEditing(e)||this.batch&&this.model.hasEdits(e,fn))||!this.strategy||this.stopping)return null;let l=dY(this.beans,e);l&&(l.onEditorAttachedFuncs=[]);let u=!r&&(!!this.shouldStopEditing(e,i,a)||(this.committing||"paste"===n)&&!this.batch)||(s??!1),d=r&&!!this.shouldCancelEditing(e,i,a)||(o??!1);return{cancel:r,cellCtrl:l??void 0,edits:this.model.getEditMap(!0),event:i,forceCancel:o,forceStop:s,position:e,source:n,treatAsSource:a,willCancel:d,willStop:u}}processStopRequest(e){let{event:t,position:i,willCancel:r,willStop:n}=e;return n||r?this.handleStopOrCancel(e):this.shouldHandleMidBatchKey(t,i)?{res:!1,edits:this.handleMidBatchKey(t,i,e)}:(d7(this.beans,{persist:!0}),this.batch&&this.strategy?.cleanupEditors(i),{res:!1,edits:this.model.getEditMap()})}handleStopOrCancel(e){let{beans:t,model:i}=this,{cancel:r,edits:n,event:o,source:s,willCancel:a,willStop:l}=e;d7(t,{persist:!0,isCancelling:a||r,isStopping:l});let u=i.getEditMap(),d=this.processEdits(u,r,s);for(let e of(this.strategy?.stop(r,o),this.clearValidationIfNoOpenEditors(),d))i.clearEditValue(e);for(let e of(this.bulkRefresh(void 0,n),i.getEditPositions(u))){let i=dY(t,e),r=d2(e);i?.refreshCell({force:!0,suppressFlash:!r})}return{res:l,edits:u}}shouldHandleMidBatchKey(e,t){return e instanceof KeyboardEvent&&this.batch&&!!this.strategy?.midBatchInputsAllowed(t)&&this.isEditing(t,{withOpenEditor:!0})}handleMidBatchKey(e,t,i){let{beans:r,model:n}=this,{cellCtrl:o,edits:s}=i,{key:a}=e,l=a===r7,u=a===r9,d="Tab"===a;return l||d||u?(l||d?d7(r,{persist:!0}):u&&this.revertSingleCellEdit(o),this.batch?this.strategy?.cleanupEditors():ct(r,n.getEditPositions(),{event:e,cancel:u}),e.preventDefault(),this.bulkRefresh(t,s,{suppressFlash:!0}),n.getEditMap()):s}finishStopEditing({cellCtrl:e,edits:t,params:i,position:r,res:n,willCancel:o,willStop:s}){let a=this.beans;n&&r&&this.model.removeEdits(r),this.navigateAfterEdit(i,e?.cellPosition),d8(a),this.clearValidationIfNoOpenEditors(),this.bulkRefresh();let{rowRenderer:l,formula:u}=a;o&&l.refreshRows({rowNodes:Array.from(t.keys())}),this.batch&&(u?u.refreshFormulas(!0):l.refreshRows({suppressFlash:!0,force:!0}),n&&s&&this.dispatchBatchEvent("batchEditingStopped",t))}clearValidationIfNoOpenEditors(){this.model.hasEdits(void 0,{withOpenEditor:!0})||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap())}navigateAfterEdit(e,t){if(!e||!t)return;let{event:i,suppressNavigateAfterEdit:r}=e;if(!(i instanceof KeyboardEvent)||r)return;let{key:n,shiftKey:o}=i,s=this.gos.get("enterNavigatesVerticallyAfterEdit");n===r7&&s&&this.beans.navigation?.navigateToNextCell(null,o?nt:nr,t,!1)}processEdits(e,t=!1,i){let r=Array.from(e.keys()),n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(let s of r){let r=e.get(s);for(let e of r.keys()){let a=r.get(e),l={rowNode:s,column:e},u=d2(a);!t&&u&&!n&&(this.setNodeDataValue(s,e,a.pendingValue,void 0,i)||o.push(l))}}return o}setNodeDataValue(e,t,i,r,n="edit"){let{beans:o}=this,s=dY(o,{rowNode:e,column:t}),a=p7.has(n)?"edit":n;s&&(s.suppressRefreshCell=!0),this.committing=!0;let l=e.setDataValue(t,i,a);return this.committing=!1,s&&(s.suppressRefreshCell=!1),r&&s?.refreshCell(fo),l}setEditMap(e,t){var i;this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let r=fo;t?.forceRefreshOfEditCellsOnly&&(r={...{rowNodes:(i=e)?Array.from(i.keys()):void 0,columns:i?[...new Set(Array.from(i.values()).flatMap(e=>Array.from(e.keys())))]:void 0},...fo}),this.beans.rowRenderer.refreshCells(r)}dispatchEditValuesChanged({rowNode:e,column:t},i={}){if(!e||!t||!i)return;let{pendingValue:r,sourceValue:n}=i,{rowIndex:o,rowPinned:s,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:s,column:t,source:"api",data:a,newValue:r,oldValue:n,value:r,colDef:t.getColDef()})}bulkRefresh(e={},t,i={}){let{beans:r,gos:n}=this,{editModelSvc:o,rowModel:s}=r;ir(n,s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),i):t&&o?.getEditMap(!1)?.forEach((e,t)=>{for(let r of e.keys())this.refCell({rowNode:t,column:r},e.get(r),i)}))}refCell({rowNode:e,column:t},i,r={}){let{beans:n,gos:o}=this,s=new Set([e]),a=new Set,l=e.pinnedSibling;l&&s.add(l);let u=e.sibling;u&&a.add(u);let d=e.parent;for(;d;)d.sibling?.footer&&o.get("groupTotalRow")||!d.parent&&d.sibling&&o.get("grandTotalRow")?a.add(d.sibling):a.add(d),d=d.parent;for(let e of s)this.dispatchEditValuesChanged({rowNode:e,column:t},i);for(let e of s)dY(n,{rowNode:e,column:t})?.refreshCell(r);for(let e of a)dY(n,{rowNode:e,column:t})?.refreshCell(r)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){let{rowNode:i}=e,{gos:r,beans:n}=this;if(i.group){if(r.get("treeData")){if(!i.data&&!r.get("enableGroupEdit"))return!1}else if(!r.get("enableGroupEdit"))return!1}let o="fullRow"===fa(r)?function(e,t,i="ui"){let r=pJ(e,t,i);return!0===r||"ui"===i?r:e.colModel.getCols().some(r=>pJ(e,{rowNode:t.rowNode,column:r},i))}(n,e,t):pJ(n,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return"block"===this.gos.get("invalidEditValueMode")}checkNavWithValidation(e,t,i=!0){if(this.hasValidationErrors(e)){let r=dY(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),i&&(r?.hasBrowserFocus()||r?.focusCell(),r?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(r&&this.revertSingleCellEdit(r),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){let i=dY(this.beans,e);!i?.comp?.getCellEditor()||(ct(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),d5(this.beans,e,{silent:!0}),cs(this.beans),i?.refreshCell(fo),t&&(i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){cs(this.beans);let t=dY(this.beans,e);t&&(t.refreshCell(fo),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let i=!1;return e?.rowNode?(i||(i=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(i||(i=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(i||(i=this.model.getCellValidationModel().getCellValidationMap().size>0),i||(i=this.model.getRowValidationModel().getRowValidationMap().size>0)),i}moveToNextCell(e,t,i,r="ui"){let n,o=this.isEditing(),s=o&&"block-stop"===this.checkNavWithValidation(void 0,i);return e instanceof ch&&o&&(n=this.strategy?.moveToNextEditingCell(e,t,i,r,s)),null===n||!1!==(n=n||!!this.beans.focusSvc.focusedHeader)||s||this.stopEditing(),n}getCellDataValue({rowNode:e,column:t},i=!0){if(!e||!t)return;let r=this.model.getEdit({rowNode:e,column:t}),n=e.pinnedSibling;if(n){let e=this.model.getEdit({rowNode:n,column:t});e&&(r=e)}let o=i?r?.editorValue??r?.pendingValue:r?.pendingValue;return o!==d0&&r?o:r?.sourceValue??this.valueSvc.getValue(t,e,!1,"api")}addStopEditingWhenGridLosesFocus(e){!function(e,t,i){let{gos:r,popupSvc:n}=t;if(!r.get("stopEditingWhenCellsLoseFocus"))return;let o=e=>{let o=e.relatedTarget;if(null===nw(o))return void dZ(t);let s=i.some(e=>e.contains(o))&&r.isElementInThisInstance(o);s||(s=!!n&&(n.getActivePopups().some(e=>e.contains(o))||n.isElementWithinCustomPopup(o))),s||dZ(t)};for(let t of i)e.addManagedElementListeners(t,{focusout:o})}(this,this.beans,e)}createPopupEditorWrapper(e){return new pZ(e)}setDataValue(e,t,i){try{if((!this.isEditing()||this.committing)&&!ft.has(i))return;let{beans:r}=this;this.strategy??(this.strategy=this.createStrategy());let n=this.batch?"ui":this.committing?i??"api":"api";if(!i||p6.has(i)){if(d9(r,e,t,i,void 0,{persist:!0}),this.batch)return this.cleanupEditors(),d8(r),this.bulkRefresh(),!0;return this.setNodeDataValue(e.rowNode,e.column,t,!0,i)}let o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return d9(r,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:n,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return r.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...o,pendingValue:t}),!0}return d9(r,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:n,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){!function(e,t){let i=t.comp?.getCellEditor();if(!i?.refresh)return;let{eventKey:r,cellStartedEdit:n}=t.editCompDetails.params,{column:o}=t,s=d4(e,t,r,n),a=o.getColDef(),l=r3(e.userCompFactory,a,s);i.refresh(d6(l.params,r))}(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){let{model:i}=this;if(!this.batch||!i.hasRowEdits(e.rowNode,fn))return;let{rowNode:r}=e,{compDetails:n,valueToDisplay:o}=t;if(n){let{params:e}=n;return e.data=i.getEditRowDataValue(r,fn),{compDetails:n}}return{valueToDisplay:o}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,i,r){this.strategy?.dispatchCellEvent(e,t,i,r)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return iB(this.gos,{type:e,..."batchEditingStopped"===e?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(e=>({rowIndex:e.rowNode.rowIndex,rowPinned:e.rowNode.rowPinned,columnId:e.column.getColId(),newValue:e.pendingValue,oldValue:e.sourceValue}))}applyBulkEdit({rowNode:e,column:t},i){if(!i||0===i.length)return;let{beans:r,rangeSvc:n,valueSvc:o}=this,{formula:s}=r;d7(r,{persist:!0});let a=this.model.getEditMap(!0),l=a.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"});let u=s?.isFormula(l)??!1;i.forEach(e=>{let t=e.columns.some(e=>e?.isAllowFormula());if(n?.forEachRowInRange(e,i=>{let n=a_(r,i);if(void 0===n)return;let d=a.get(n)??new Map,c=l;for(let t of e.columns){if(!t)continue;let e=!!u&&t.isAllowFormula();if(this.isCellEditable({rowNode:n,column:t},"api")){let e=o.getValue(t,n,!0,"api"),i=o.parseValue(t,n??null,c,e);Number.isNaN(i)&&(i=null),d.set(t,{editorValue:void 0,pendingValue:i,sourceValue:e,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}e&&(c=s?.updateFormulaByOffset({value:c,columnDelta:1}))}d.size>0&&a.set(n,d),u&&t&&(l=s?.updateFormulaByOffset({value:l,rowDelta:1}))}),this.setEditMap(a),this.batch){this.cleanupEditors(),d8(r),this.bulkRefresh();return}this.committing=!0,this.stopEditing(void 0,{source:"bulk"}),this.committing=!1,this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(a)})}),this.bulkRefresh();let d=dY(r,{rowNode:e,column:t});d&&d.focusCell(!0)}createCellStyleFeature(e){return new p4(e,this.beans)}createRowStyleFeature(e){return new p8(e,this.beans)}setEditingCells(e,t){let{beans:i}=this,{colModel:r,valueSvc:n}=i,o=new Map;for(let{colId:s,column:a,colKey:l,rowIndex:u,rowPinned:d,newValue:c,state:h}of e){let e=s?r.getCol(s):l?r.getCol(l):a;if(!e)continue;let p=a_(i,{rowIndex:u,rowPinned:d});if(!p)continue;let f=n.getValue(e,p,!0,"api");if(!t?.forceRefreshOfEditCellsOnly&&!d2({pendingValue:c,sourceValue:f})&&"editing"!==h)continue;let g=o.get(p);g||(g=new Map,o.set(p,g)),void 0===c&&(c=d0),g.set(e,{editorValue:void 0,pendingValue:c,sourceValue:f,state:h??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){let t=dY(this.beans,e);if(!t||!this.isEditing(t,fn))return;let i=this.model.getEdit(t);if(!i||!d2(i))return;let r=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(r,"pendingChange")}allowedFocusTargetOnValidation(e){return dY(this.beans,e)}};function fa(e,t){return t??e.get("editType")??"singleCell"}var fl=class extends tE{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t,i=e.previousParams,{editSvc:r,beans:n}=this,o="cellFocused"===e.type?e.sourceEvent:null;i&&(t=dY(n,i));let{gos:s,editModelSvc:a}=n,l="cellFocusCleared"===e.type;if(r.isEditing(void 0,{withOpenEditor:!0})){let{column:t,rowIndex:u,rowPinned:d}=e,c={column:t,rowNode:a_(n,{rowIndex:u,rowPinned:d})},h="block"===s.get("invalidEditValueMode");if(h)return;let p=!h,f=!!a?.getCellValidationModel().hasCellValidation(c);!i&&!l||r.stopEditing(void 0,{cancel:p&&f,source:l&&p?"api":void 0,event:o})||(r.isBatchEditing()?r.cleanupEditors():r.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){let i=this.model.getEditPositions(),r={all:[],pass:[],fail:[]};for(let e of i){r.all.push(e);let t=this.model.getCellValidationModel().getCellValidation(e);if((t?.errorMessages?.length??0)>0){r.fail.push(e);continue}r.pass.push(e)}if(e)for(let t of i)ci(this.beans,t,{cancel:e}),this.model.stop(t);else{let i=this.processValidationResults(r);if(i.destroy.length>0)for(let r of i.destroy)ci(this.beans,r,{event:t,cancel:e}),this.model.stop(r);if(i.keep.length>0)for(let e of i.keep){let t=dY(this.beans,e);!this.editSvc?.cellEditingInvalidCommitBlocks()&&t&&this.editSvc.revertSingleCellEdit(t)}}return!0}cleanupEditors({rowNode:e}={},t){d7(this.beans,{persist:!1});let i=this.model.getEditPositions(),r=[];if(e)for(let t of i)t.rowNode!==e&&r.push(t);else for(let e of i)r.push(e);ct(this.beans,r),d8(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){let t=e.comp,i=t?.getCellEditor();if(i?.focusIn)i.focusIn();else{let i="fullRow"===this.beans.gos.get("editType");e.focusCell(i),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){let{event:t,ignoreEventKey:i=!1,startedEdit:r,position:n,cells:o=this.model.getEditPositions()}=e,s=t instanceof KeyboardEvent&&!i&&t.key||void 0;!function(e,t,i,r,n,o){0===t.length&&i?.rowNode&&i?.column&&d5(e,i,{key:r,event:n,cellStartedEdit:o});let{valueSvc:s,editSvc:a,editModelSvc:l}=e,{rowNode:u,column:d}=i??{};for(let c of t){let{rowNode:t,column:h}=c,p=dY(e,c);if(!p){if(t&&h){let n=s.getValue(h,t,void 0,"api"),o=(i?.rowNode===t&&i?.column===h&&r||void 0)??a?.getCellDataValue(c,!1)??s.getValueForDisplay({column:h,node:t})?.value??n??d0;l?.setEdit(c,{pendingValue:ce(e,o,!1,h),sourceValue:n,state:"editing"})}continue}let f=o&&u===p.rowNode&&p.column===d;d5(e,{rowNode:u,column:p.column},{key:f?r:null,event:f?n:null,cellStartedEdit:f&&o})}}(this.beans,o,n,s,t,r)}dispatchCellEvent(e,t,i,r){let n=dY(this.beans,e);n&&this.eventSvc.dispatchEvent({...n.createEvent(t??null,i),...r})}dispatchRowEvent(e,t,i){if(i)return;let r=dX(this.beans,e);r&&this.eventSvc.dispatchEvent(r.createRowEvent(t))}shouldStop(e,t,i="ui"){let r=this.editSvc.isBatchEditing();return!!r&&"api"===i||(!r||"ui"!==i&&"edit"!==i)&&("api"===i||(t instanceof KeyboardEvent&&!r?t.key===r7:null))}shouldCancel(e,t,i="ui"){let r=this.editSvc.isBatchEditing();return t instanceof KeyboardEvent&&!r&&t.key===r9||!!r&&"api"===i||"api"===i}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});let i=[];if(e.forEach((e,t)=>{e.forEach((e,r)=>{"editing"===e.state&&i.push({...e,rowNode:t,column:r})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),i.length>0){let e=i.at(-1),t=e.pendingValue===d0?void 0:e.pendingValue;this.start({position:e,event:new KeyboardEvent("keydown",{key:t}),source:"api"});let r=dY(this.beans,e);r&&this.setFocusInOnEditor(r)}}destroy(){this.cleanupEditors(),super.destroy()}},fu=class extends fl{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,i="ui"){let{rowNode:r}=e||{};if(!dX(this.beans,{rowNode:this.rowNode}))return!0;let n=super.shouldStop({rowNode:this.rowNode},t,i);return null!==n?n:!!this.rowNode&&r!==this.rowNode}midBatchInputsAllowed({rowNode:e}){return!!e&&this.model.hasEdits({rowNode:e})}clearEdits(e){this.model.clearEditValue(e)}start(e){let{position:t,silent:i,startedEdit:r,event:n,ignoreEventKey:o}=e,{rowNode:s}=t;this.rowNode!==s&&super.cleanupEditors(t);let a=this.beans.visibleCols.allCols,l=[],u=[];for(let e of a)e.isCellEditable(s)&&u.push(e);if(0!=u.length){for(let e of(this.dispatchRowEvent({rowNode:s},"rowEditingStarted",i),this.startedRows.push(s),u)){let t={rowNode:s,column:e};l.push(t),this.model.hasEdits(t)||this.model.start(t)}this.rowNode=s,this.setupEditors({cells:l,position:t,startedEdit:r,event:n,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){let{rowNode:i}=this;if(i&&!this.model.hasRowEdits(i))return!1;let r=[];if(e||this.model.getEditMap().forEach((e,t)=>{if(e&&0!==e.size){for(let i of e.values())if(d2(i)){r.push(t);break}}}),cs(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:i})==="block-stop")return!1;for(let i of(super.stop(e,t),r))this.dispatchRowEvent({rowNode:i},"rowValueChanged");return this.cleanupEditors({rowNode:i},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){let{rowIndex:t}=e,i=e.previousParams;if(i?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;let r=dY(this.beans,i);"block"===this.gos.get("invalidEditValueMode")&&r&&(this.model.getCellValidationModel().getCellValidation(r)||this.model.getRowValidationModel().getRowValidation(r))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){for(let i of(super.cleanupEditors(e,t),this.startedRows))this.dispatchRowEvent({rowNode:i},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,i,r="ui",n=!1){let o,s=e.cellPosition;this.model.suspend(!0);try{o=this.beans.navigation?.findNextCellToFocusOn(s,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(!1===o)return null;if(null==o)return!1;let a=o.cellPosition,l=e.isCellEditable(),u=o.isCellEditable(),d=a&&s.rowIndex===a.rowIndex&&s.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();let c=this.gos.get("suppressStartEditOnTab");return u&&!n?c?o.focusCell(!0,i):(o.comp?.getCellEditor()||d5(this.beans,o,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(o),o.focusCell(!1,i)):(u&&n&&this.setFocusInOnEditor(o),o.focusCell(!0,i)),d||n||(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:i}),this.cleanupEditors(o,!0),c?o.focusCell(!0,i):this.editSvc.startEditing(o,{startedEdit:!0,event:i,source:r,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:e},i)=>{if("editing"!==e)return;let r=dY(this.beans,{rowNode:t,column:i});r&&!r.comp?.getCellEditor()&&d5(this.beans,r,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},fd={moduleName:"EditCore",version:tZ,beans:[dq,fs],apiFunctions:{getEditingCells:function(e){let t=e.editModelSvc?.getEditMap(),i=[];return t?.forEach((e,t)=>{let{rowIndex:r,rowPinned:n}=t;e.forEach((e,t)=>{let{editorValue:o,pendingValue:s,sourceValue:a,state:l}=e,u=d2(e),d=o??s;d===d0&&(d=void 0);let c={newValue:d,oldValue:a,state:l,column:t,colId:t.getColId(),colKey:t.getColId(),rowIndex:r,rowPinned:n},h="changed"===l&&u;("editing"===l||h)&&i.push(c)})}),i},getEditRowValues:function(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})},getCellEditorInstances:(e,t={})=>d1(e,t).map(e=>e.editor),startEditingCell:function(e,t){let{key:i,colKey:r,rowIndex:n,rowPinned:o}=t,{editSvc:s,colModel:a}=e,l=a.getCol(r);if(!l)return void t7(12,{colKey:r});let u=a_(e,{rowIndex:n,rowPinned:o||null,column:l});u?s?.isCellEditable({rowNode:u,column:l},"api")&&(null==o&&pX(e,n),pQ(e,r),s?.startEditing({rowNode:u,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})):t7(290,{rowIndex:n,rowPinned:o})},stopEditing:function(e,t=!1){let{editSvc:i}=e;if(i?.isBatchEditing()){if(t)for(let t of e.editModelSvc?.getEditPositions()??[])"editing"===t.state&&i.revertSingleCellEdit(t);else d7(e,{persist:!0});ct(e,void 0,{cancel:t})}else i?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})},isEditing:function(e,t){let i=dY(e,t);return e.editSvc?.isEditing(i)??!1},validateEdit:function(e){return e.editSvc?.validateEdit()||null}},dynamicBeans:{singleCell:class extends fl{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,i="ui"){let r=super.shouldStop(e,t,i);if(null!==r)return r;let{rowNode:n,column:o}=e||{};return(!this.rowNode||!this.column)&&n&&o?null:this.rowNode!==n||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){let{position:t,startedEdit:i,event:r,ignoreEventKey:n}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:r,ignoreEventKey:n})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){let{colModel:t,editSvc:i}=this.beans,{rowIndex:r,column:n,rowPinned:o}=e,s=a_(this.beans,{rowIndex:r,rowPinned:o}),a=dJ(n),l=t.getCol(a),u=e.previousParams;if(u){let e=dJ(u.column);if(u?.rowIndex===r&&e===a&&u?.rowPinned===o)return}i?.isEditing({rowNode:s,column:l},{withOpenEditor:!0})&&"cellFocused"===e.type||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i,r="ui",n=!1){let o,s=this.beans.focusSvc.getFocusedCell();s&&(e=aA(this.beans,s)??e);let a=e.cellPosition,l="fullRow"===this.beans.gos.get("editType");l&&this.model.suspend(!0),n||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:i}));try{o=this.beans.navigation?.findNextCellToFocusOn(a,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(!1===o)return null;if(null==o)return!1;let u=o.cellPosition,d=e.isCellEditable(),c=o.isCellEditable(),h=u&&a.rowIndex===u.rowIndex&&a.rowPinned===u.rowPinned;d&&!n&&this.setFocusOutOnEditor(e);let p=this.gos.get("suppressStartEditOnTab");if(h||n||(super.cleanupEditors(o,!0),p?o.focusCell(!0,i):this.editSvc.startEditing(o,{startedEdit:!0,event:i,source:r,ignoreEventKey:!0})),c&&!n){if(o.focusCell(!1,i),p)o.focusCell(!0,i);else if(!o.comp?.getCellEditor()){let e=this.editSvc?.isEditing(o,{withOpenEditor:!0});d5(this.beans,o,{event:i,cellStartedEdit:!0,silent:e}),this.setFocusInOnEditor(o),this.cleanupEditors(o)}}else c&&n&&this.setFocusInOnEditor(o),o.focusCell(!0,i);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},fullRow:fu},dependsOn:[h_,pM],css:[".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}"]},fc=class extends tE{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,ru(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){let t=this.columns;if(null!=t){e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree);for(let t of(e.map={},e.list))e.map[t.getId()]=t}}createColumns(e,t){let i=()=>{rn(this.beans,this.columns?.tree),this.columns=null},r=e.treeDepth,n=this.columns?.treeDepth??-1,o=this.generateSelectionCols();if(i4(o,this.columns?.list??[],(e,t)=>e.getColId()===t.getColId())&&n==r)return;i();let{colGroupSvc:s}=this.beans,a=s?.findDepth(e.tree)??0,l=s?.balanceTreeForAutoCols(o,a)??[];this.columns={list:o,tree:l,treeDepth:a,map:{}},t(e=>e?[...o,...e.filter(e=>!rs(e))]:null)}updateColumns(e){let t=ru(e.source),{beans:i}=this;for(let r of this.columns?.list??[]){let n=this.createSelectionColDef(e.currentValue);r.setColDef(n,null,t),rx(i,{state:[function(e,t){let i={...e,sort:void 0,colId:t},r=rc(e);return r&&(i.sort=r.direction,i.sortType=r.type),i}(n,r.colId)]},t)}}getColumn(e){return this.columns?.list.find(t=>rd(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:e,beans:t}=this,i=e.get("rowSelection");if("object"!=typeof i||!ia(e))return!1;let r=(t.autoColSvc?.getColumns()?.length??0)>0;if("autoGroupColumn"===i.checkboxLocation&&r)return!1;let n=!!iS(i),o=ik(i);return n||o}createSelectionColDef(e){let{gos:t}=this,i=e??t.get("selectionColumnDef"),r=t.get("enableRtl"),{rowSpan:n,spanRows:o,...s}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:r?"right":"left",comparator(e,t,i,r){let n=i.isSelected();return n===r.isSelected()?0:n?1:-1},editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,pinned:null,...s,colId:re,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);let i=new iU(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){let r=t&&"string"!=typeof t?iS(t):void 0,n=e&&"string"!=typeof e?iS(e):void 0,o=t&&"string"!=typeof t?ik(t):void 0,s=e&&"string"!=typeof e?ik(e):void 0,a=iR(e),l=iR(t);(r!==n||o!==s||a!==l)&&this.beans.colModel.refreshAll(i)}destroy(){rn(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,i){if(!this.columns?.list.length)return;let r=e.length+t.length+i.length;if(0===r)return;let n=this.columns.list[0];n.isVisible()&&(this.beans.rowNumbersSvc?.getColumn(rt)?2:1)===r&&(()=>{let r;switch(n.pinned){case"left":case!0:r=e;break;case"right":r=i;break;default:r=t}r&&i6(r,n)})()}},fh=class extends lI{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:e}=this;this.mode=iO(e),this.groupSelectsDescendants=iI(e),this.groupSelectsFiltered="filteredDescendants"===iA(e),this.masterSelectsDetail="detail"===iL(e),this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{let t=iI(e),i=iO(e),r="filteredDescendants"===iA(e);this.masterSelectsDetail="detail"===iL(e),(t!==this.groupSelectsDescendants||r!==this.groupSelectsFiltered||i!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=r,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;let r=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);if(null==r)return 0;if(this.selectionCtx.selectAll=!1,"select"in r)return r.reset?this.resetNodes():this.selectRange(r.deselect,!1,i),this.selectRange(r.select,!0,i);{let t=r.checkFilteredNodes?function e(t){let i=!1===t.isSelected(),r=t.childrenAfterFilter?.some(e)??!1;return i||r}(r.node):r.newValue;return this.setNodesSelected({nodes:[r.node],newValue:t,clearSelection:r.clearSelection,keepDescendants:r.keepDescendants,event:e,source:i})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:r,event:n,source:o,keepDescendants:s=!1}){if(0===r.length)return 0;let{gos:a}=this;if(!ia(a)&&e)return t7(132),0;if(r.length>1&&!this.isMultiSelect())return t7(130),0;let l=0;for(let t=0;t<r.length;t++){let i=r[t],s=fp(i);if(s.rowPinned&&!lM(s)){t7(59);continue}if(void 0===s.id){t7(60);continue}(!e||!i.destroyed)&&(!(this.groupSelectsFiltered&&s.group&&!a.get("treeData"))&&this.selectRowNode(s,e,n,o)&&(this.detailSelection.delete(s.id),l++),this.groupSelectsDescendants&&s.childrenAfterGroup?.length&&(l+=this.selectChildren(s,e,o)))}return!i&&(1===r.length&&"api"===o&&this.selectionCtx.setRoot(fp(r[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(fp(r[0]),s,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,i){let r=0;return e.forEach(e=>{let n=fp(e);n.group&&this.groupSelectsDescendants||this.selectRowNode(n,t,void 0,i)&&r++}),r>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),r}selectChildren(e,t,i){let r=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return r?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:r}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((i,r)=>{e(i)&&t.set(r,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;let{gos:i,rowModel:r}=this.beans;if(!ir(i,r))return!1;let n=r.rootNode;if(!n)return!1;t||((t=new l8(!0,n)).active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(t=>{if(t!==n){let i=this.calculateSelectedFromChildren(t);o=this.selectRowNode(t,null!==i&&i,void 0,e)||o}}),o}clearOtherNodes(e,t,i){let r=new Map,n=0;return this.selectedNodes.forEach(o=>{let s=o.id==e.id;if((!t||!function(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}(e,o))&&!s){let e=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[e],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&o.parent&&r.set(o.parent.id,o.parent)}}),r.forEach(e=>{let t=this.calculateSelectedFromChildren(e);this.selectRowNode(e,null!==t&&t,void 0,i)}),n}onRowSelected(e){let t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;let t=new sg(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:e,rowModel:t}=this.beans;if(!ir(e,t))return;let i=t.getTopLevelNodes();if(null===i)return;let r=[];return!function e(t){for(let i=0,n=t.length;i<n;i++){let n=t[i];n.isSelected()?r.push(n):n.group&&n.childrenAfterGroup&&e(n.childrenAfterGroup)}}(i),r}isEmpty(){return 0===this.getSelectionCount()}deselectAllRowNodes({source:e,selectAll:t}){let i=ir(this.gos),r=!1,n=t=>{let i=this.selectRowNode(fp(t),!1,void 0,e);r||(r=i)};if("currentPage"===t||"filtered"===t){if(!i)return void t9(102);this.getNodesToSelect(t).forEach(n)}else this.selectedNodes.forEach(n),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){let t=this.updateGroupsFromChildrenSelections(e);r||(r=t)}r&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(e=>{(!this.groupSelectsDescendants||!e.group)&&(e.isSelected()?t++:e.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){let{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return ff(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(e=>e.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];let t=[],i=e=>t.push(e);if("currentPage"===e)return this.forEachNodeOnPage(e=>{if(!e.group)return void i(e);if(!e.expanded&&!e.footer){let t=e=>{i(e),e.childrenAfterFilter?.forEach(t)};t(e);return}this.groupSelectsDescendants||i(e)}),t;let r=this.beans.rowModel;return"filtered"===e?r.forEachNodeAfterFilter(i):r.forEachNode(i),t}forEachNodeOnPage(e){let{pageBounds:t,rowModel:i}=this.beans,r=t.getFirstRow(),n=t.getLastRow();for(let t=r;t<=n;t++){let r=i.getRow(t);r&&e(r)}}selectAllRowNodes(e){let{gos:t,selectionCtx:i}=this;if(!ia(t))return void t7(132);if("string"!=typeof t.get("rowSelection")&&!i_(t))return void t7(130);if(!this.canSelectAll())return;let{source:r,selectAll:n}=e,o=!1;if(this.getNodesToSelect(n).forEach(e=>{let t=this.selectRowNode(fp(e),!0,void 0,r);o||(o=t)}),i.selectAll=!0,ir(t)&&this.groupSelectsDescendants){let e=this.updateGroupsFromChildrenSelections(r);o||(o=e)}o&&this.dispatchSelectionChanged(r)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e))return void t9(103);let r=new Set(e),n=[];this.beans.rowModel.forEachNode(e=>{r.has(e.id)&&n.push(e)}),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){return ir(this.beans.gos)}updateSelectable(e){let{gos:t,rowModel:i}=this.beans;if(!ia(t))return;let r="selectableChanged",n=void 0!==e,o=ir(t)&&this.groupSelectsDescendants,s=[],a=e=>{if(!n||e.group){if(o&&e.group){let t=e.childrenAfterGroup?.some(e=>e.selectable)??!1;this.setRowSelectable(e,t,!0);return}!this.updateRowSelectable(e,!0)&&e.isSelected()&&s.push(e)}};if(o){if(void 0===e){let t=i.rootNode;e=t?new l8(!1,t):void 0}e?.forEachChangedNodeDepthFirst(a,!n,!n)}else i.forEachNode(a);s.length&&this.setNodesSelected({nodes:s,newValue:!1,source:r}),!n&&o&&this.updateGroupsFromChildrenSelections?.(r)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){let i,r;if(!this.masterSelectsDetail)return;let n=e.detailNode?.detailGridInfo?.api;if(!n)return;let o=(i=0,r=0,n.forEachNode(e=>{e.isSelected()?i++:e.selectable&&r++}),ff(i,r));if(e.isSelected()!==o&&this.selectRowNode(e,o,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!o){let t=this.detailSelection.get(e.id)??new Set;for(let e of n.getSelectedNodes())t.add(e.id);this.detailSelection.set(e.id,t)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail){if(!i_(t))return void t7(269);switch(e.isSelected()){case!0:i.selectAll();break;case!1:i.deselectAll();break;case void 0:{let t=this.detailSelection.get(e.id);if(t){let e=[];for(let r of t){let t=i.getRowNode(r);t&&e.push(t)}i.setNodesSelected({nodes:e,newValue:!0,source:"masterDetail"})}}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function fp(e){return lM(e)?e.pinnedSibling:e.footer?e.sibling:e}function ff(e,t){return(0!==e||0!==t)&&(e>0&&t>0?void 0:e>0)}function fg(e){e.rowModel?.onRowHeightChanged()}function fm(e){e.rowAutoHeight?.active?t7(3):e.rowModel?.resetRowHeights()}var fv=class extends tE{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t="function"==typeof e;return"function"==typeof e&&(e=e()),e.map(e=>{if(!e){t9(18),t||t9(20);return}return this.isGridApi(e)?e:"current"in e?e.current?.api:(e.api||t9(19),e.api)}).filter(e=>!!e&&!e.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:e})=>this.onColumnEvent(e),alignedGridScroll:({event:e})=>this.onScrollEvent(e)})}fireEvent(e){if(!this.consuming)for(let t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let i=[];return e.columns?e.columns.forEach(e=>{i.push(t(e))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,e=>e)}getColumnIds(e){return this.extractDataFromEvent(e,e=>e.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":t7(21)}})}processGroupOpenedEvent(e){let{colGroupSvc:t}=this.beans;if(t)for(let i of e.columnGroups){let e=null;i&&(e=t.getProvidedColGroup(i.getGroupId())),(!i||e)&&t.setColumnGroupOpened(e,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){let t=e.column,i=null,r=this.beans,{colResize:n,ctrlsSvc:o,colModel:s}=r;if(t&&(i=s.getColDefCol(t.getColId())),t&&!i)return;let a=this.getMasterColumns(e);switch(e.type){case"columnMoved":rx(r,{state:e.api.getColumnState().map(e=>({colId:e.colId})),applyOrder:!0},"alignedGridChanged");break;case"columnVisible":rx(r,{state:e.api.getColumnState().map(e=>({colId:e.colId,hide:e.hide}))},"alignedGridChanged");break;case"columnPinned":rx(r,{state:e.api.getColumnState().map(e=>({colId:e.colId,pinned:e.pinned}))},"alignedGridChanged");break;case"columnResized":{let t={};for(let e of a)t[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()};for(let i of e.flexColumns??[])t[i.getId()]&&delete t[i.getId()];n?.setColumnWidths(Object.values(t),!1,e.finished,"alignedGridChanged")}}let l=o.getGridBodyCtrl().isVerticalScrollShowing();for(let e of this.getAlignedGridApis())e.setGridOption("alwaysShowVerticalScroll",l)}},fy=class extends tE{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},fw(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();let t=fw(this.rootNode),i=Array(e.length);t._leafs=i;let r=0,n=this.beans.groupStage?.getNestedDataGetter(),o=n?new Set:null,s=(e,t)=>{let a=e.level+1;for(let l=0,u=t.length;l<u;++l){let u=t[l];if(!u)continue;let d=this.createRowNode(u,a);if(d.sourceRowIndex=r,i[r++]=d,o&&!o.has(u)){o.add(u),d.treeParent=e;let t=n(u);t&&s(d,t)}}};s(t,e),i.length=r}destroyAllNodes(){let{selectionSvc:e,pinnedRowModel:t,groupStage:i}=this.beans;e?.reset("rowDataChanged"),t?.isManual()&&t.reset(),i?.clearNonLeafs();let r=this.rootNode._leafs;if(r)for(let e=0,t=r.length;e<t;++e)r[e]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){let{rootNode:i,gos:r}=this;this.dispatchRowDataUpdateStarted(t);let n=ix(r),o=e.changedRowNodes,{adds:s,updates:a}=o,l=new Set,u=[],d=this.beans.groupStage?.getNestedDataGetter(),c=!!r.get("suppressMaintainUnsortedOrder")&&void 0,h=-1,p=!1,f=(e,t)=>{if(!c&&void 0!==c){let t=e.sourceRowIndex;c=t<=h,h=t}e.data!==t&&(e.updateData(t),s.has(e)||a.add(e),!e.selectable&&e.isSelected()&&u.push(e))},g=(e,t,i)=>{for(let r=0,o=t.length;r<o;++r){let o=t[r];if(!o)continue;let a=this.getRowNode(n({data:o,level:i}));if(a?(f(a,o),p||(p=!!d&&a.treeParent!==e)):(a=this.createRowNode(o,i),s.add(a)),!d||l.has(a)){l.add(a);continue}l.add(a),a.treeParent=e;let u=d(o);u&&g(a,u,i+1)}};g(i,t,0);let m=this.deleteUnusedNodes(l,o,u,!!e.animate)||c||s.size>0;if(m){let e=i._leafs??(i._leafs=[]);void 0===c?fk(e,l,o):fS(e,l)&&(o.reordered=!0)}(m||p||a.size)&&(e.rowDataUpdated=!0,this.deselect(u))}deleteUnusedNodes(e,{removals:t},i,r){let n=this.rootNode._leafs;for(let o=0,s=n.length;o<s;o++){let s=n[o];!e.has(s)&&this.destroyNode(s,r)&&(t.push(s),s.isSelected()&&i.push(s))}return t.length>0}updateRowData(e,t,i){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return t7(268),{remove:[],update:[],add:[]};let r=[],n=ix(this.gos),o=this.executeRemove(n,e,t,r,i),s=this.executeUpdate(n,e,t,r),a=this.executeAdd(e,t);return this.deselect(r),{remove:o,update:s,add:a}}executeRemove(e,{remove:t},{adds:i,updates:r,removals:n},o,s){let a=this.rootNode._leafs,l=a?.length,u=t?.length;if(!u||!l)return[];let d=0,c=l,h=0,p=Array(u);for(let a=0;a<u;++a){let l=this.lookupNode(e,t[a]);if(!l)continue;let u=l.sourceRowIndex;u<c&&(c=u),u>h&&(h=u),p[d++]=l,this.destroyNode(l,s)&&(l.isSelected()&&o.push(l),i.delete(l)||(r.delete(l),n.push(l)))}return p.length=d,d&&fx(a,c,h),p}executeUpdate(e,{update:t},{adds:i,updates:r},n){let o=t?.length;if(!o)return[];let s=Array(o),a=0;for(let l=0;l<o;l++){let o=t[l],u=this.lookupNode(e,o);u&&(u.updateData(o),!u.selectable&&u.isSelected()&&n.push(u),s[a++]=u,i.has(u)||r.add(u))}return s.length=a,s}executeAdd(e,t){var i;let r=(i=this.rootNode)._leafs??(i._leafs=[]),n=r.length,o=e.add,s=o?.length;if(!s)return[];let a=n+s,l=this.sanitizeAddIndex(r,e.addIndex);if(l<n){for(let e=n-1,t=a-1;e>=l;--e){let i=r[e];i.sourceRowIndex=t,r[t--]=i}t.reordered=!0}r.length=a;let u=Array(s),d=t.adds;for(let e=0;e<s;e++){let t=this.createRowNode(o[e],0);d.add(t),t.sourceRowIndex=l,r[l]=t,u[e]=t,l++}return u}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){let t="rowDataChanged",i=this.beans.selectionSvc;e.length&&i?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),i?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:i?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t){let i=new sg(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));let r=i.id,n=this.allNodesMap;return n[r]&&t7(2,{nodeId:r}),n[r]=i,i}destroyNode(e,t){if(!e._destroy(t))return!1;let i=e.id,r=this.allNodesMap;r[i]===e&&delete r[i];let n=e.pinnedSibling;return n&&this.beans.pinnedRowModel?.pinRow(n,null),!0}lookupNode(e,t){if(!e)return fC(this.rootNode._leafs,t);let i=e({data:t,level:0}),r=this.allNodesMap[i];return r||(t9(4,{id:i}),null)}sanitizeAddIndex(e,t){let i=e.length;if("number"!=typeof t||t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);let r=this.gos;return t>0&&r.get("treeData")&&r.get("getDataPath")&&(t=fb(e,t)),t}},fb=(e,t)=>{for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r?.rowIndex==t-1)return i+1}return t},fw=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);let t=[],i=[],r=[],n=[];e.childrenAfterGroup=t,e.childrenAfterSort=i,e.childrenAfterAggFilter=r,e.childrenAfterFilter=n;let o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=i,o.childrenAfterAggFilter=r,o.childrenAfterFilter=n,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},fC=(e,t)=>{if(e)for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data===t)return r}return t9(5,{data:t}),null},fx=(e,t,i)=>{t=Math.max(0,t);for(let r=t,n=e.length;r<n;++r){let n=e[r];r<=i&&n.destroyed||(n.sourceRowIndex=t,e[t++]=n)}e.length=t},fS=(e,t)=>{e.length=t.size;let i=0,r=!1,n=!1;for(let o of t){let t=o.sourceRowIndex;t===i?n||(n=r):(t>=0?n=!0:r=!0,o.sourceRowIndex=i,e[i]=o),++i}return n},fk=(e,t,{adds:i})=>{let r=e.length,n=t.size;n>r&&(e.length=n);let o=0;for(let t=0;t<r;++t){let i=e[t];!i.destroyed&&(o!==t&&(i.sourceRowIndex=o,e[o]=i),++o)}for(let t of i)t.sourceRowIndex<0&&(t.sourceRowIndex=o,e[o++]=t);e.length=o},fR=e=>{let t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),t)for(let e=0,i=t.length-1;e<=i;e++){let r=t[e],n=0===e,o=e===i;r.firstChild!==n&&(r.firstChild=n,r.dispatchRowEvent("firstChildChanged")),r.lastChild!==o&&(r.lastChild=o,r.dispatchRowEvent("lastChildChanged")),r.childIndex!==e&&(r.childIndex=e,r.dispatchRowEvent("childIndexChanged"))}},fE=class extends tE{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){let i,r=this.beans.sortSvc.getSortOptions(),n=r.length>0&&!!t&&this.gos.get("deltaSort"),{gos:o,colModel:s,rowGroupColsSvc:a,rowNodeSorter:l,rowRenderer:u,showRowGroupCols:d}=this.beans,c=o.get("groupMaintainOrder"),h=s.getCols().some(e=>e.isRowGroupActive()),p=a?.columns,f=s.isPivotMode(),g=o.getCallback("postSortRows"),m=!1,v=o=>{let s=f&&o.leafGroup,a=c&&h&&!o.leafGroup;a&&(i??(i=this.shouldSortContainsGroupCols(r)),a&&(a=!i));let u=null;if(a){let e=!1;if(p){let t=o.level+1;t<p.length&&(e=p[t].wasSortExplicitlyRemoved)}e||(u=fD(o))}else!r.length||s||(u=n&&t?fP(l,o,t,e,r):l.doFullSort(o.childrenAfterAggFilter,r));u||(u=o.childrenAfterAggFilter?.slice(0)??[]),m||(m=o.childrenAfterSort?.[0]!==u[0]),o.childrenAfterSort=u,fR(o),g&&g({nodes:o.childrenAfterSort})};if(e?.forEachChangedNodeDepthFirst(v),m&&o.get("groupHideOpenParents")){let e=d?.columns;e?.length&&u.refreshCells({columns:e,force:!0})}}shouldSortContainsGroupCols(e){let t=e.length;if(!t)return!1;if(iv(this.gos)){for(let i=0;i<t;++i){let t=e[i].column;if(t.isPrimary()&&t.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}},fP=(e,t,i,r,n)=>{let o=t.childrenAfterAggFilter,s=t.childrenAfterSort;if(!s)return e.doFullSort(o,n);let a=new Set,l=[],{updates:u,adds:d}=i;for(let e=0,t=o.length;e<t;++e){let t=o[e];u.has(t)||d.has(t)||r&&!r.canSkip(t)?l.push({currentPos:l.length,rowNode:t}):a.add(t)}let c=s.filter(e=>a.has(e)).map((e,t)=>({currentPos:t,rowNode:e}));return l.sort((t,i)=>e.compareRowNodes(n,t,i)),fM(e,n,l,c)},fM=(e,t,i,r)=>{let n=0,o=0,s=i.length,a=r.length,l=Array(s+a),u=0;for(;n<s&&o<a;){let s=i[n],a=r[o];0>e.compareRowNodes(t,s,a)?(l[u++]=s.rowNode,++n):(l[u++]=a.rowNode,++o)}for(;n<s;)l[u++]=i[n++].rowNode;for(;o<a;)l[u++]=r[o++].rowNode;return l},fD=e=>{let t=e.childrenAfterSort,i=e.childrenAfterAggFilter,r=t?.length,n=i?.length;if(!r||!n)return null;let o=Array(n),s=new Set;for(let e=0;e<n;++e)s.add(i[e]);let a=0;for(let e=0;e<r;++e){let i=t[e];s.delete(i)&&(o[a++]=i)}if(0===s.size&&a===r)return t;for(let e of s)o[a++]=e;return o.length=a,o},fT=class extends tE{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=null,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=t_(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){let e=new sg(this.beans);this.rootNode=e,this.nodeManager=this.createBean(new fy(e));let t=()=>{this.beans.groupStage?.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:t,columnRowGroupChanged:t,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){let{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(e=>!!e);this.stages=i;for(let e=i.length-1;e>=0;--e)for(let r of i[e].refreshProps)t.set(r,e);this.addManagedPropertyListeners([...t.keys(),"rowData"],e=>{let t=e.changeSet?.properties;t&&this.onPropChange(t)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,r){let n,o=!1;do{n=!1;let s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,i),u=Math.min(a,r);for(let e=l;e<=u;e++){let t=this.getRow(e);if(t.rowHeightEstimated){let e=iu(this.beans,t);t.setRowHeight(e.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n)return o}onPropChange(e){let t,{nodeManager:i,gos:r,beans:n}=this,o=n.groupStage;if(!i)return;let s=new Set(e),a=o?.onPropChange(s);s.has("rowData")?t=r.get("rowData"):a&&(t=o?.extractData()),t&&!Array.isArray(t)&&(t=null,t7(1));let l={step:"nothing",changedProps:s};t&&(!a&&!this.isEmpty()&&t.length>0&&r.exists("getRowId")&&!r.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!r.get("suppressAnimationFrame"),l.changedRowNodes=new lE,i.setImmutableRowData(l,t)):(l.rowDataUpdated=!0,l.newData=!0,i.setNewRowData(t),this.rowNodesCountReady=!0));let u=l.rowDataUpdated?"group":this.getRefreshedStage(e);u&&(l.step=u,this.refreshModel(l))}getRefreshedStage(e){let{stages:t,stagesRefreshProps:i}=this;if(!t)return null;let r=t.length,n=r;for(let t=0,r=e.length;t<r&&n;++t)n=Math.min(n,i.get(e[t])??n);return n<r?t[n].step:null}setRowTopAndRowIndex(e){let{beans:t,rowsToDisplay:i}=this,r=t.environment.getDefaultRowHeight(),n=0,o=is(this.gos,"normal");for(let s=0,a=i.length;s<a;++s){let a=i[s],l=a.id;if(null!=l&&e?.add(l),null==a.rowHeight){let e=iu(t,a,o,r);a.setRowHeight(e.height,e.estimated)}a.setRowTop(n),a.setRowIndex(s),n+=a.rowHeight}if(this.beans.formula?.active){let e=this.formulaRows;for(let t=0,i=e.length;t<i;++t)e[t].formulaRowIndex=t}}clearRowTopAndRowIndex(e,t){let i=e.active,r=e=>{e?.id==null||t.has(e.id)||e.clearRowTopAndRowIndex()},n=e=>{r(e),r(e.detailNode),r(e.sibling);let t=e.childrenAfterGroup;if(!e.hasChildren()||!t)return;let o=-1==e.level;if(!(i&&!o&&!e.expanded))for(let e=0,i=t.length;e<i;++e)n(t[e])},o=this.rootNode;o&&n(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){let{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;let i=+!!e.sibling?.displayed;return(e.childrenAfterSort?.length??0)+i}getTopLevelRowDisplayedIndex(e){let{beans:t,rootNode:i,rowsToDisplay:r}=this;if(!i||!r.length||r[0]===i)return e;let n=i.childrenAfterSort,o=e=>{let t=n[e];if(this.gos.get("groupHideOpenParents"))for(;t.expanded&&t.childrenAfterSort&&t.childrenAfterSort.length>0;)t=t.childrenAfterSort[0];return t.rowIndex},s=t.footerSvc;return s?s?.getTopDisplayIndex(r,e,n,o):o(e)}getTopLevelIndexFromDisplayedIndex(e){let{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;let r=this.getRow(e);r.footer&&(r=r.sibling);let n=r.parent;for(;n&&n!==t;)n=(r=n).parent;let o=t.childrenAfterSort?.indexOf(r)??-1;return o>=0?o:e}getRowBounds(e){let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:ig(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){let e=0===t.length||t.some(e=>e.isPrimary());this.refreshModel({step:e?"filter":"filter_aggregates",keepRenderedRows:!0,animate:ig(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:ig(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){let t=new l8(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;let{changedRowNodes:t,newData:i,rowDataUpdated:r}=e;return!!t&&!i&&!!r&&!t.removals.length&&!t.adds.size}refreshModel(e){let{nodeManager:t,beans:i,eventSvc:r,started:n,refreshingModel:o}=this;if(!t)return;let s=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&s));if(n&&s&&r.dispatchEvent({type:"rowDataUpdated"}),!n||o||i.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=s);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,i.masterDetailSvc?.refreshModel(e),s&&"group"!==e.step&&i.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(a,e.changedRowNodes);case"map":this.doRowsToDisplay()}let l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,r.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){return this.isEmpty()?"noRows":this.beans.filterManager?.isAnyFilterPresent()&&0===this.getRowCount()?"noMatchingRows":null}getNodesInRangeForSelection(e,t){let i=!1,r=!1,n=[],o=iI(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(!r){if(i&&(s===t||s===e)&&(r=!0,o&&s.group))return void fO(n,s);if(!i){if(s!==t&&s!==e)return;i=!0,t===e&&(r=!0)}s.group&&o||n.push(s)}}),n}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){let t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||0===i)return -1;let r=0,n=i-1;if(e<=0)return 0;if(t[n].rowTop<=e)return n;let o=-1,s=-1;for(;;){let i=Math.floor((r+n)/2),a=t[i];if(this.isRowInPixel(a,e)||(a.rowTop<e?r=i+1:a.rowTop>e&&(n=i-1),o===r&&s===n))return i;o=r,s=n}}isRowInPixel(e,t){let i=e.rowTop,r=i+e.rowHeight;return i<=t&&r>t}forEachLeafNode(e){let t=this.rootNode?._leafs;if(t)for(let i=0,r=t.length;i<r;++i)e(t[i],i)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){let t=this.rowsToDisplay;for(let i=0,r=t.length;i<r;++i)e(t[i],i)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,e=>e.childrenAfterSort)}forEachPivotNode(e,t,i){let{colModel:r,rowGroupColsSvc:n}=this.beans;if(!r.isPivotMode())return;if(!n?.columns.length)return void e(this.rootNode,0);let o=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,e=>e.leafGroup?null:e[o])}depthFirstSearchRowNodes(e,t=!1,i=e=>e.childrenAfterGroup,r=this.rootNode,n=0){let o=n;if(!r)return o;let s=r===this.rootNode;if(s||e(r,o++),r.hasChildren()&&!r.footer){let n=i(r);if(n){let a=this.beans.footerSvc;for(let l of(o=a?.addTotalRows(o,r,e,t,s,"top")??o,n))o=this.depthFirstSearchRowNodes(e,t,i,l,o);return a?.addTotalRows(o,r,e,t,s,"bottom")??o}}return o}doAggregate(e){this.rootNode&&this.beans.aggStage?.execute(e)}doFilterAggregates(e){let t=this.rootNode,i=this.beans.filterAggStage;i?i.execute(e):t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){let i=this.beans.sortStage;i?i.execute(e,t):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterSort=e.childrenAfterAggFilter.slice(0),fR(e)})}doGrouping(e){let t=this.rootNode;if(!t)return;let i=this.beans.groupStage,r=i?.execute(e);if(void 0===r){let e=t._leafs;t.childrenAfterGroup=e,t.updateHasChildren();let i=t.sibling;i&&(i.childrenAfterGroup=e)}(r||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){let t=this.beans.filterStage;t?t.execute(e):e.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,hD(e)},!0)}doPivot(e){this.beans.pivotStage?.execute(e)}getRowNode(e){let t=this.nodeManager?.getRowNode(e);return"object"==typeof t?t:this.beans.groupStage?.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];let e=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),e)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){let e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){let{nodeManager:e,beans:t,eventSvc:i,asyncTransactions:r}=this;if(!e)return;t.valueCache?.onDataChanged();let n=[],o=[],s=new lE,a=!this.gos.get("suppressAnimationFrame");for(let{rowDataTransaction:t,callback:i}of r??[]){this.rowNodesCountReady=!0;let r=e.updateRowData(t,s,a);n.push(r),i&&o.push(i.bind(null,r))}this.commitTransactions(s,a),o.length>0&&setTimeout(()=>{for(let e=0,t=o.length;e<t;e++)o[e]()},0),n.length>0&&i.dispatchEvent({type:"asyncTransactionsFlushed",results:n}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){let t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let i=new lE,r=!this.gos.get("suppressAnimationFrame"),n=t.updateRowData(e,i,r);return this.commitTransactions(i,r),n}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{rootNode:e,beans:t}=this;if(t.formula?.active){let t=e?.childrenAfterSort??[];for(let e of(this.formulaRows=t,this.rowsToDisplay=t.filter(e=>!e.softFiltered),this.rowsToDisplay))e.setUiLevel(0);return}let i=t.flattenStage;if(i){this.rowsToDisplay=i.execute();return}let r=this.rootNode.childrenAfterSort??[];for(let e of r)e.setUiLevel(0);this.rowsToDisplay=r}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let e=this.rootNode;if(!e)return;let t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);let i=e.sibling;i?.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let i=t.detailNode;i?.setRowHeight(i.rowHeight,!0);let r=t.sibling;r?.setRowHeight(r.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},fO=(e,t)=>{let i=t.childrenAfterGroup;if(i)for(let t=0,r=i.length;t<r;++t){let r=i[t];r.data&&e.push(r),r.group&&fO(e,r)}},f_=class extends tE{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){let{allColumns:i,columnKeys:r,skipRowGroups:n,exportRowNumbers:o}=t,s=this.getColumnsToExport({allColumns:i,skipRowGroups:n,columnKeys:r,exportRowNumbers:o});return[this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t)].reduce((e,t)=>t(e),e).parse()}processRow(e,t,i,r){var n;let o,s=t.shouldRowBeSkipped||(()=>!1),a=null!=t.rowPositions||!!t.onlySelected,l=this.gos.get("groupHideOpenParents")&&!a,u=this.colModel.isPivotMode()?r.leafGroup:!r.group,d=!!r.footer,c=1===r.allChildrenCount&&r.childrenAfterGroup?.length===1&&(n=this.gos,!!(!0===(o=n.get("groupHideParentOfSingleChild"))||"leafGroupsOnly"===o&&r.leafGroup||n.get("groupRemoveSingleChildren")||n.get("groupRemoveLowestSingleChildren")&&r.leafGroup));if(!u&&!d&&(t.skipRowGroups||c||l)||t.onlySelected&&!r.isSelected()||t.skipPinnedTop&&"top"===r.rowPinned||t.skipPinnedBottom&&"bottom"===r.rowPinned||r.stub||-1===r.level&&!u&&!d||s(iB(this.gos,{node:r})))return;let h=e.onNewBodyRow(r);if(i.forEach((e,t)=>{h.onColumn(e,t,r)}),t.getCustomContentBelowRow){let i=t.getCustomContentBelowRow(iB(this.gos,{node:r}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{let i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{let i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){let r=new rM,{colGroupSvc:n}=this.beans,o=n?n.createColumnGroups({columns:t,idCreator:r,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){let e=i.onNewHeaderRow();t.forEach((t,i)=>{e.onColumn(t,i,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{let r=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(e=>"top"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>this.pinnedRowModel?.getPinnedTopRow(e.rowIndex)).forEach(r):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",r),i}}processRows(e,t){return i=>{let r=this.rowModel,n=ir(this.gos,r),o=io(this.gos,r),s=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(e=>null==e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>r.getRow(e.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())n?r.forEachPivotNode(a,!0,"filteredAndSorted"===l):o?r.forEachNodeAfterFilterAndSort(a,!0):r.forEachNode(a);else if(e.onlySelectedAllPages||s){let e=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?r.forEachNode(a):n||o?r.forEachNodeAfterFilterAndSort(a,!0):r.forEachNode(a);return i}}replicateSortedOrder(e){let{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;let r=t.getSortOptions(),n=(e,t)=>null!=e.rowIndex&&null!=t.rowIndex?e.rowIndex-t.rowIndex:e.level===t.level?e.parent?.id===t.parent?.id?i.compareRowNodes(r,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:t,currentPos:t.rowIndex??-1}):n(e.parent,t.parent):e.level>t.level?n(e.parent,t):n(e,t.parent);e.sort(n)}processPinnedBottomRows(e,t){return i=>{let r=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(e=>"bottom"===e.rowPinned).sort((e,t)=>e.rowIndex-t.rowIndex).map(e=>this.pinnedRowModel?.getPinnedBottomRow(e.rowIndex)).forEach(r):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",r),i}}getColumnsToExport(e){let{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:r=!1,columnKeys:n}=e,{colModel:o,gos:s,visibleCols:a}=this,l=o.isPivotMode(),u=e=>!rs(e)&&(!ra(e)||r);if(n?.length)return o.getColsForKeys(n).filter(u);let d=s.get("treeData");return(t&&!l?o.getCols():a.allCols).filter(e=>u(e)&&(!i||!!d||!ro(e)))}recursivelyAddHeaderGroups(e,t,i){let r=[];for(let t of e)if(t.getChildren)for(let e of t.getChildren()??[])r.push(e);e.length>0&&sc(e[0])&&this.doAddHeaderHeader(t,e,i),r&&r.length>0&&this.recursivelyAddHeaderGroups(r,t,i)}doAddHeaderHeader(e,t,i){let r=e.onNewHeaderGroupingRow(),n=0;for(let e of t){let t;t=i?i(iB(this.gos,{columnGroup:e})):this.beans.colNames.getDisplayNameForColumnGroup(e,"header");let o=(e.isExpandable()?e.getLeafColumns():[]).reduce((e,t,i,r)=>{let n=i3(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||(n=[i],e.push(n)):n&&null==n[1]&&(n[1]=i-1),i===r.length-1&&n&&null==n[1]&&(n[1]=i),e},[]);r.onColumn(e,t||"",n++,e.getLeafColumns().length-1,o)}}},fA=class extends hm{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(e=>{this.beginNewLine(),e.forEach((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,r){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(r)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);let r=this.extractRowCellValue({column:e,node:i,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(r.valueFormatted??r.value)}putInQuotes(e){let t;return this.suppressQuotes?e:null==e?'""':("string"==typeof e?t=e:"function"==typeof e.toString?t=e.toString():(t7(53),t=""),'"'+t.replace(/"/g,'""')+'"')}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}},fF=class extends hg{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){return Object.assign({},this.gos.get("defaultCsvExportParams"),e)}export(e){if(this.isExportSuppressed())return void t7(51);let t=()=>{let t=this.getMergedParams(e),i=new Blob(["\uFEFF",this.getData(t)],{type:"text/plain"}),r=t.fileName,n="function"==typeof r?r(iB(this.gos,{})):r;!function(e,t){let i=document.defaultView||window;if(!i)return t7(52);let r=document.createElement("a"),n=i.URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),r.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}(this.getFileName(n),i)},{overlays:i}=this.beans;i?i.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{colModel:t,colNames:i,rowGroupColsSvc:r,valueSvc:n,gos:o}=this.beans,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:u,suppressQuotes:d,columnSeparator:c}=e;return new fA({colModel:t,colNames:i,valueSvc:n,gos:o,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:u||void 0,suppressQuotes:d||!1,columnSeparator:c||",",rowGroupColsSvc:r})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},fI=class extends tE{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){let t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];let{params:{blockSize:e,rowHeight:t},startRow:i,beans:r,rowNodes:n}=this;for(let o=0;o<e;o++){let e=i+o,s=new sg(r);s.setRowHeight(t),s.uiLevel=0,s.setRowIndex(e),s.setRowTop(t*e),n.push(s)}}getBlockStateJson(){let{id:e,startRow:t,endRow:i,state:r}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:r}}}setDataAndId(e,t,i){ev(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();ey(this.params.datasource.getRows)?t7(90):window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){let{startRow:e,endRow:t,version:i,params:{sortModel:r,filterModel:n},gos:o}=this;return iB(o,{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:r,filterModel:n})}forEachNode(e,t,i){this.rowNodes.forEach((r,n)=>{this.startRow+n<i&&e(r,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);let i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){let{rowNodes:t,beans:i}=this;t.forEach((r,n)=>{let o=e.rowData?e.rowData[n]:void 0;!r.id&&r.alreadyRendered&&o&&(t[n]=new sg(i),t[n].setRowIndex(r.rowIndex),t[n].setRowTop(r.rowTop),t[n].setRowHeight(r.rowHeight),r._destroy(!0)),this.setDataAndId(t[n],o,this.startRow+n)});let r=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,r)}destroy(){let e=this.rowNodes;for(let t=0,i=e.length;t<i;t++)e[t]._destroy(!1);e.length=0,super.destroy()}},fL=class extends tE{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){let i=Math.floor(e/this.params.blockSize),r=this.blocks[i];if(!r){if(t)return;r=this.createBlock(i)}return r.getRow(e)}createBlock(e){let t=this.params,i=this.createBean(new fI(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(0==this.blockCount)return void this.purgeCache();for(let e of this.getBlocksInOrder())e.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(let e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(tz(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(t=>t!=e);t.sort((e,t)=>t.lastAccessed-e.lastAccessed);let i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null;t.forEach((e,t)=>{if("needsLoading"===e.state&&t>=1||i&&t>=r){if(!(this.isBlockCurrentlyDisplayed(e)||this.isBlockFocused(e)))this.removeBlockFromCache(e)}})}isBlockFocused(e){let t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||null!=t.rowPinned)return!1;let{startRow:i,endRow:r}=e;return t.rowIndex>=i&&t.rowIndex<r}isBlockCurrentlyDisplayed(e){let{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"==typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let{blockSize:t,overflowSize:i}=this.params,r=(e.id+1)*t+i;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,ev(t)&&(this.lastRowIndexKnown=t),!this.lastRowIndexKnown&&this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t={value:0};for(let i of this.getBlocksInOrder())i.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){return Object.values(this.blocks).sort((e,t)=>e.id-t.id)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];for(let t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(let t of e)this.destroyBlock(t)}purgeCache(){for(let e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let i=[],r=-1,n=!1,o={value:0},s=!1;for(let a of this.getBlocksInOrder())if(!s){if(n&&r+1!==a.id){s=!0;continue}r=a.id,a.forEachNode(r=>{let o=r===e||r===t;(n||o)&&i.push(r),o&&(n=!n)},o,this.rowCount)}return s||n?[]:i}},fN=class extends tE{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if("infinite"!==this.gos.get("rowModelType"))return;let e=this.beans,t=new sg(e);this.rootNode=t,t.level=-1,this.rowHeight=id(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=id(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){this.cacheParams&&ew(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[])||this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getOverlayType(){let e=this.infiniteCache;return e?.getRowCount()===0?this.beans.filterManager?.isAnyFilterPresent()?"noMatchingRows":"noRows":null}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){this.datasource&&(null==ix(this.gos)&&this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache())}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();let e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:r,eventSvc:n,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:r,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:id(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new fL(this.cacheParams)),n.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){let t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){let t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}},fB=class extends tE{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){let e;this.maxConcurrentRequests=(e=this.gos.get("maxConcurrentDatasourceRequests"))>0?e:void 0;let t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=t_(this,this.performCheckBlocksToLoad.bind(this),t))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){i6(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void tz(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");let e=null!=this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(e=>"needsLoading"===e.state).slice(0,e);for(let e of(this.activeBlockLoadsCount+=t.length,t))e.load();this.printCacheStatus()}getBlockState(){let e={};return this.blocks.forEach(t=>{let{id:i,state:r}=t.getBlockStateJson();e[i]=r}),e}printCacheStatus(){tz(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},fV={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},fH=class extends rI{constructor(){super(fV),this.eValue=null,this.eDelta=null,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){let i=Math.abs(t),r=e.formatValue(i),n=ev(r)?r:i,o=t>=0,s=this.eDelta;o?s.textContent=""+n:s.textContent=""+n,s.classList.toggle("ag-value-change-delta-up",o),s.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),e3(this.eDelta)}refresh(e,t=!1){let{value:i,valueFormatted:r}=e,{eValue:n,lastValue:o,beans:s}=this;if(i===o||(ev(r)?n.textContent=r:ev(i)?n.textContent=i:e3(n),s.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;let a=i&&"object"==typeof i&&"toNumber"in i?i.toNumber():i,l=o&&"object"==typeof o&&"toNumber"in o?o.toNumber():o;return a!==l&&("number"==typeof a&&"number"==typeof l&&this.showDelta(e,a-l),o&&n.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0)}},fz={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},fj=class extends rI{constructor(){super(fz),this.eCurrent=null,this.refreshCount=0,this.registerCSS(".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious?.remove();let{beans:t,eCurrent:i}=this,r=th({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=r,r.textContent=i.textContent,this.getGui().insertBefore(r,i),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;if(ey(i)&&(i=""),i===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;let r=this.eCurrent;return ev(e.valueFormatted)?r.textContent=e.valueFormatted:ev(e.value)?r.textContent=i:e3(r),!0}},fG=class extends tE{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,i=this.beans.gos.get("cellFlashDuration"),r=this.beans.gos.get("cellFadeDuration")){let n=this.animations[t];n.delete(e);let o=Date.now(),s=o+i;n.set(e,{phase:"flash",flashEndTime:s,fadeEndTime:o+i+r});let a=`ag-cell-${t}`,l=`${a}-animation`,{comp:u,eGui:{style:d}}=e;u.toggleCss(a,!0),u.toggleCss(l,!1),d.removeProperty("transition"),d.removeProperty("transition-delay"),this.nextAnimationTime&&s+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=s)}advanceAnimations(){let e=Date.now(),t=null;for(let i of Object.keys(this.animations)){let r=this.animations[i],n=`ag-cell-${i}`,o=`${n}-animation`;for(let[i,s]of r){if(!i.isAlive()||!i.comp){r.delete(i);continue}let{phase:a,flashEndTime:l,fadeEndTime:u}=s,d="flash"===a?l:u;if(!(e+15>=d)){t=Math.min(d,t??1/0);continue}let{comp:c,eGui:{style:h}}=i;switch(a){case"flash":c.toggleCss(n,!1),c.toggleCss(o,!0),h.transition=`background-color ${u-l}ms`,h.transitionDelay=`${l-e}ms`,t=Math.min(u,t??1/0),s.phase="fade";break;case"fade":c.toggleCss(n,!1),c.toggleCss(o,!1),h.removeProperty("transition"),h.removeProperty("transition-delay"),r.delete(i)}}}null==t?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;let i=function(e){let{rowIndex:t,rowPinned:i,column:r}=e;return`${t}.${null==i?"null":i}.${r.getId()}`}(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(let e of Object.keys(this.animations))this.animations[e].clear()}};function fW(e){var t;return(e={...e}).version||(e.version="32.1.0"),"32.1.0"===e.version&&((t=e).cellSelection=function(e,t){if(e&&"object"==typeof e)return e[t]}(t,"rangeSelection"),e=t),e.version=tZ,e}var fU=class extends tE{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=t_(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=t_(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=t_(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){let{gos:e,ctrlsSvc:t,colDelayRenderSvc:i}=this.beans;this.isClientSideRowModel=ir(e);let r=fW(e.get("initialState")??{}),n=r.partialColumnState;delete r.partialColumnState,this.cachedState=r;let o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(r))),(r.columnOrder||r.columnVisibility||r.columnSizing||r.columnPinning||r.columnGroup)&&i?.hideColumns("columnState");let[s,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:e})=>{"gridInitializing"===e&&(s(),o(()=>{this.setupStateOnColumnsInitialised(r,!!n),i?.revealColumns("columnState")}))},rowCountReady:()=>{a?.(),o(()=>this.setupStateOnRowCountReady(r))},firstDataRendered:()=>{l?.(),o(()=>this.setupStateOnFirstDataRendered(r))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){let i=fW(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();let r=t?new Set(t):void 0;this.setGridReadyState(i,"api",r),this.setColumnsInitialisedState(i,"api",!!r,r),this.setRowCountState(i,"api",r),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(i,"api",r),this.stopSuppressEvents("api")})}setGridReadyState(e,t,i){"api"!==t||i?.has("sideBar")||this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");let t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,r){this.setColumnState(e,t,i,r),this.setColumnGroupState(e,t,r),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);let i=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){let{filter:r,rowGroupExpansion:n,ssrmRowGroupExpansion:o,rowSelection:s,pagination:a,rowPinning:l}=e,u=(e,r)=>!i?.has(e)&&(r||"api"===t);u("filter",r)&&this.setFilterState(r),u("rowGroupExpansion",n)&&this.setRowGroupExpansionState(o,n,t),u("rowSelection",s)&&this.setRowSelectionState(s,t),u("pagination",a)&&this.setPaginationState(a,t),u("rowPinning",l)&&this.setRowPinningState(l);let d=this.updateCachedState.bind(this);d("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(d("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),d("rowGroupExpansion",void 0)):(d("rowGroupExpansion",this.getRowGroupExpansionState()),d("ssrmRowGroupExpansion",void 0)),d("rowSelection",this.getRowSelectionState()),d("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");let t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},r=()=>t("filter",this.getFilterState()),{gos:n,colFilter:o,selectableFilter:s}=this.beans;this.addManagedEventListeners({filterChanged:r,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(0!==n.get("groupDefaultExpanded")||n.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&t("pagination",this.getPaginationState())},pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())}),o&&this.addManagedListeners(o,{filterStateChanged:r}),s&&this.addManagedListeners(s,{selectedFilterChanged:r})}setFirstDataRenderedState(e,t,i){let{scroll:r,cellSelection:n,focusedCell:o,columnOrder:s}=e,a=(e,r)=>!i?.has(e)&&(r||"api"===t);a("focusedCell",o)&&this.setFocusedCellState(o),a("cellSelection",n)&&this.setCellSelectionState(n),a("scroll",r)&&this.setScrollState(r),this.setColumnPivotState(!!s?.orderedColIds,t);let l=this.updateCachedState.bind(this);l("sideBar",this.getSideBarState()),l("focusedCell",this.getFocusedCellState());let u=this.getRangeSelectionState();l("rangeSelection",u),l("cellSelection",u),l("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");let t=this.updateCachedState.bind(this),i=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:e=>{if(e.finished){let e=this.getRangeSelectionState();t("rangeSelection",e),t("cellSelection",e)}},bodyScrollEnd:()=>t("scroll",this.getScrollState())})}getColumnState(){let e=this.beans;return function(e,t=!1){let i=[],r=[],n=[],o=[],s=[],a=[],l=[],u=[],d=[],c=0;for(let t=0;t<e.length;t++){let{colId:h,sort:p,sortType:f,sortIndex:g,rowGroup:m,rowGroupIndex:v,aggFunc:y,pivot:b,pivotIndex:w,pinned:C,hide:x,width:S,flex:k}=e[t];d.push(h),p&&(i[g??c++]={colId:h,sort:p,type:f}),m&&(r[v??0]=h),"string"==typeof y&&n.push({colId:h,aggFunc:y}),b&&(o[w??0]=h),C&&("right"===C?a:s).push(h),x&&l.push(h),(null!=k||S)&&u.push({colId:h,flex:k??void 0,width:null===S?void 0:S})}return{sort:i.length?{sortModel:hh(i)}:void 0,rowGroup:r.length?{groupColIds:hh(r)}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:hh(o)}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:u.length?{columnSizingModel:u}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}(rk(e),e.colModel.isPivotMode())}setColumnState(e,t,i,r){let{sort:n,rowGroup:o,aggregation:s,pivot:a,columnPinning:l,columnVisibility:u,columnSizing:d,columnOrder:c}=e,h=!1,p=(e,i)=>{let n=!r?.has(e)&&!!(i||"api"===t);return h||(h=n),n},f={},g=e=>{let t=f[e];return t||(t={colId:e},f[e]=t),t},m={},v=p("sort",n);v&&n?.sortModel.forEach(({colId:e,sort:t},i)=>{let r=g(e);r.sort=t,r.sortIndex=i}),(v||!i)&&(m.sort=null,m.sortIndex=null);let y=p("rowGroup",o);y&&o?.groupColIds.forEach((e,t)=>{let i=g(e);i.rowGroup=!0,i.rowGroupIndex=t}),(y||!i)&&(m.rowGroup=null,m.rowGroupIndex=null);let b=p("aggregation",s);b&&s?.aggregationModel.forEach(({colId:e,aggFunc:t})=>{g(e).aggFunc=t}),(b||!i)&&(m.aggFunc=null);let w=p("pivot",a);w&&(a?.pivotColIds.forEach((e,t)=>{let i=g(e);i.pivot=!0,i.pivotIndex=t}),this.gos.updateGridOptions({options:{pivotMode:!!a?.pivotMode},source:t})),(w||!i)&&(m.pivot=null,m.pivotIndex=null);let C=p("columnPinning",l);if(C){for(let e of l?.leftColIds??[])g(e).pinned="left";for(let e of l?.rightColIds??[])g(e).pinned="right"}(C||!i)&&(m.pinned=null);let x=p("columnVisibility",u);if(x)for(let e of u?.hiddenColIds??[])g(e).hide=!0;(x||!i)&&(m.hide=null);let S=p("columnSizing",d);if(S)for(let{colId:e,flex:t,width:i}of d?.columnSizingModel??[]){let r=g(e);r.flex=t??null,r.width=i}(S||!i)&&(m.flex=null);let k=c?.orderedColIds,R=!!k?.length&&!r?.has("columnOrder"),E=R?k.map(e=>g(e)):Object.values(f);(E.length||h)&&(this.columnStates=E,rx(this.beans,{state:E,applyOrder:R,defaultState:m},t))}setColumnPivotState(e,t){let i=this.columnStates;this.columnStates=void 0;let r=this.columnGroupStates;this.columnGroupStates=void 0;let n=this.beans,{pivotResultCols:o,colGroupSvc:s}=n;if(o?.isPivotResultColsPresent()){if(i){let r=[];for(let e of i)o.getPivotResultCol(e.colId)&&r.push(e);rx(n,{state:r,applyOrder:e},t)}r&&s?.setColumnGroupState(r,t)}}getColumnGroupState(){let e=this.beans.colGroupSvc;if(!e)return;var t=e.getColumnGroupState();let i=[];for(let{groupId:e,open:r}of t)r&&i.push(e);return i.length?{openColumnGroupIds:i}:void 0}setColumnGroupState(e,t,i){let r=this.beans.colGroupSvc;if(!r||i?.has("columnGroup")||"api"!==t&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let n=new Set(e.columnGroup?.openColumnGroupIds),o=r.getColumnGroupState().map(({groupId:e})=>{let t=n.has(e);return t&&n.delete(e),{groupId:e,open:t}});for(let e of n)o.push({groupId:e,open:!0});o.length&&(this.columnGroupStates=o),r.setColumnGroupState(o,t)}getFilterState(){let{filterManager:e,selectableFilter:t}=this.beans,i=e?.getFilterModel();i&&0===Object.keys(i).length&&(i=void 0);let r=e?.getFilterState(),n=e?.getAdvFilterModel()??void 0,o=t?.getState();return i||n||r||o?{filterModel:i,columnFilterState:r,advancedFilterModel:n,selectableFilters:o}:void 0}setFilterState(e){let{filterManager:t,selectableFilter:i}=this.beans,{filterModel:r,columnFilterState:n,advancedFilterModel:o,selectableFilters:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};void 0!==s&&i?.setState(s??{}),(void 0!==r||void 0!==n)&&t?.setFilterState(r??null,n??null,"columnFilter"),void 0!==o&&t?.setAdvFilterModel(o??null,"advancedFilter")}getRangeSelectionState(){let e=this.beans.rangeSvc?.getCellRanges().map(e=>{let{id:t,type:i,startRow:r,endRow:n,columns:o,startColumn:s}=e;return{id:t,type:i,startRow:r,endRow:n,colIds:o.map(e=>e.getColId()),startColId:s.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeSvc:i,colModel:r,visibleCols:n}=this.beans;if(!iP(t)||!i)return;let o=[];for(let t of e?.cellRanges??[]){let e=[];for(let i of t.colIds){let t=r.getCol(i);t&&e.push(t)}if(!e.length)continue;let i=r.getCol(t.startColId);if(!i){let t=n.allCols,r=new Set(e);i=t.find(e=>r.has(e))}o.push({...t,columns:e,startColumn:i})}i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:i}=e??{top:0,left:0},{frameworkOverrides:r,rowRenderer:n,animationFrameSvc:o,ctrlsSvc:s}=this.beans;r.wrapIncoming(()=>{s.get("center").setCenterViewportScrollLeft(i),s.getScrollFeature()?.setVerticalScrollPosition(t),n.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.beans.focusSvc.getFocusedCell();if(e){let{column:t,rowIndex:i,rowPinned:r}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:r}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{focusSvc:t,colModel:i}=this.beans;if(!e)return void t.clearFocusedCell();let{colId:r,rowIndex:n,rowPinned:o}=e;t.setFocusedCell({column:i.getCol(r),rowIndex:n,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let{pagination:e,gos:t}=this.beans;if(!e)return;let i=e.getCurrentPage(),r=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(i||r)return{page:i,pageSize:r}}setPaginationState(e,t){let{pagination:i,gos:r}=this.beans;if(!i)return;let{pageSize:n,page:o}=e??{page:0,pageSize:r.get("paginationPageSize")},s="gridInitializing"===t;n&&!r.get("paginationAutoPageSize")&&i.setPageSize(n,s?"initialState":"pageSizeSelector"),"number"==typeof o&&(s?i.setPage(o):i.goToPage(o))}getRowSelectionState(){let e=this.beans.selectionSvc;if(!e)return;let t=e.getSelectionState();return t&&(Array.isArray(t)||!1!==t.selectAll&&!1!==t.selectAllChildren||t?.toggledNodes?.length)?t:void 0}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,"api"===t)}getRowGroupExpansionState(){let{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){let t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,i){let r=this.beans.expansionSvc;r&&r.setExpansionState(t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]},i)}updateColumnState(e){let t=this.getColumnState(),i=!1,r=this.cachedState;for(let e of Object.keys(t))ew(t[e],r[e])||(i=!0);this.cachedState={...r,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let i=this.cachedState[e];this.setCachedStateValue(e,t),ew(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){let e=this.staleStateKeys;for(let t of e)"rowSelection"===t&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(let t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){let e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},f$=class extends tE{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){let t=this.beans,i=()=>{let i=Math.floor(e/Math.max(id(t),1));t.pagination.setPageSize(i,"autoCalculated")};this.isBodyRendered?t_(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},fq="paginationPageSizeSelector",fK={tag:"span",cls:"ag-paging-page-size"},fQ={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends rI{constructor(){super(fK),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(fq,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){if(this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),!this.selectPageSizeComp))return}reset(){e3(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(fq)}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){let i=this.gos.exists("paginationPageSize"),r=!0!==this.gos.get(fq);t7(94,{pageSizeSet:i,pageSizesSet:r,pageSizeOptions:e,paginationPageSizeOption:t}),r||t7(95,{paginationPageSizeOption:t,paginationPageSizeSelector:fq}),e.unshift("")}let r=String(i?"":t);this.selectPageSizeComp?(i4(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(r,!0)):this.createPageSizeSelectorComp(e,r),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(e=>({value:String(e)}))}createPageSizeSelectorComp(e,t){let i=this.getLocaleTextFunc(),r=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new oo).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=this.gos.get(fq);return Array.isArray(e)&&e?.length?[...e].sort((e,t)=>e-t):[20,50,100]}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},fX={selector:"AG-PAGINATION",component:class extends lL{constructor(){super(),this.btFirst=null,this.btPrevious=null,this.btNext=null,this.btLast=null,this.lbRecordCount=null,this.lbFirstRowOnPage=null,this.lbLastRowOnPage=null,this.lbCurrent=null,this.lbTotal=null,this.pageSizeComp=null,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}")}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[fQ]);let{btFirst:t,btPrevious:i,btNext:r,btLast:n}=this;this.activateTabIndex([t,i,r,n]),t.insertAdjacentElement("afterbegin",a6(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",a6(e?"next":"previous",this.beans)),r.insertAdjacentElement("afterbegin",a6(e?"previous":"next",this.beans)),n.insertAdjacentElement("afterbegin",a6(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{var t;return this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):(t=this.beans,t.ctrlsSvc.get("gridCtrl").focusInnerElement(e))},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){var e,t;for(let e of(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}])){let{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{(e.key===r7||" "===e.key)&&(e.preventDefault(),i())}})}e=this.beans,t=this.getGui(),this.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&"Tab"===i.key){let r=i.shiftKey;!nM(e,t,!1,r)&&aV(e,r)&&i.preventDefault()}}}),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):function(e,t){if("number"!=typeof e)return"";let i=t(),r=i("thousandSeparator",","),n=i("decimalSeparator",".");return e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${r}`)}(e,this.getLocaleTextFunc.bind(this))}getTemplate(){let e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){let e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let r=this.isZeroPagesToDisplay();this.nextButtonDisabled=e===i-1||r,this.lastButtonDisabled=!t||r||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){e_(e,"disabled",t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&0===t}updateLabels(){let e,t,i,r,n,o=this.rowModel.isLastRowIndexKnown(),s=this.pagination.getTotalPages(),a=this.pagination.getMasterRowCount(),l=o?a:null,u=this.pagination.getCurrentPage(),d=this.pagination.getPageSize();this.isZeroPagesToDisplay()?e=t=0:(t=(e=d*u+1)+d-1,o&&t>l&&(t=l));let c=e+d-1,h=this.formatNumber(e);this.lbFirstRowOnPage.textContent=h;let p=this.getLocaleTextFunc();i=!o&&a<c?p("pageLastRowUnknown","?"):this.formatNumber(t),this.lbLastRowOnPage.textContent=i;let f=s>0,g=this.formatNumber(f?u+1:0);if(this.lbCurrent.textContent=g,o)r=this.formatNumber(s),n=this.formatNumber(l);else{let e=p("more","more");r=e,n=e}this.lbTotal.textContent=r,this.lbRecordCount.textContent=n,this.announceAriaStatus(h,i,n,g,r)}announceAriaStatus(e,t,i,r,n){let o=this.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),u=`${e} ${a} ${t} ${l} ${i}`,d=`${s} ${r} ${l} ${n}`;u!==this.ariaRowStatus&&(this.ariaRowStatus=u,this.ariaAnnounce?.announceValue(u,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}}},fY=class extends tE{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){let e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return fX}isPaginateChildRows(){let e=this.gos;return!!(e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren"))||e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){let t=this.currentPage;if(!this.active||t===e||"number"!=typeof t)return;let{editSvc:i}=this.beans;i?.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return!this.active||e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=Math.floor(this.beans.rowModel.getRowCount()/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ev(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ev(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ev(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ev(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){let e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);let t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){let e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0)return void this.setZeroRows();let i=this.pageSize,r=t-1;this.totalPages=Math.floor(r/i)+1,this.adjustCurrentPageIfInvalid();let n=this.currentPage,o=i*(n+1)-1;if(o>r&&(o=r),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(i*n),o===r)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{let t=e.getTopLevelRowDisplayedIndex(o+1);this.bottomDisplayedRowIndex=t-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){let e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,0===e)return void this.setZeroRows();let{pageSize:t,currentPage:i}=this,r=e-1;this.totalPages=Math.floor(r/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>r&&(this.bottomDisplayedRowIndex=r)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:r=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:r,keepRenderedRows:t})}};function fZ({colAutosize:e,visibleCols:t},i,r){Array.isArray(i)?e?.autoSizeCols({colKeys:i,skipHeader:r,source:"api"}):e?.autoSizeCols({...i,colKeys:i.colIds??t.allCols,source:"api"})}var fJ=class extends tE{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){let{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let i=!1,r=t.type;if("fitGridWidth"===r||"fitProvidedWidth"===r)i=!0;else if("fitCellContents"===r){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});let r=e.get("rowData");i=null!=r&&r.length>0&&ir(e)}i&&this.beans.colDelayRenderSvc?.hideColumns(r)}}autoSizeCols(e){let{eventSvc:t,visibleCols:i,colModel:r}=this.beans;f2(this.beans,!0),this.innerAutoSizeCols(e).then(n=>{let o=e=>rC(t,Array.from(e),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return f2(this.beans,!1),o(n);let s=f0(this.beans),a=e.colKeys.filter(e=>!r.getCol(e)?.getColDef().suppressAutoSize&&!ra(e)&&!i.leftCols.some(t=>rd(t,e))&&!i.rightCols.some(t=>rd(t,e)));this.sizeColumnsToFit(s,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(e=>({...e,key:e.colId})),colKeys:a,onlyScaleUp:!0,animate:!1}),f2(this.beans,!1),o(n)})}innerAutoSizeCols(e){return new Promise((t,i)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,i));let{colKeys:r,skipHeader:n,skipHeaderGroups:o,stopAtGroup:s,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:u=[],source:d="api"}=e,{animationFrameSvc:c,renderStatus:h,colModel:p,autoWidthCalc:f,visibleCols:g}=this.beans;if(c?.flushAllFrames(),this.timesDelayed<5&&h&&(!h.areHeaderCellsRendered()||!h.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,i)});return}this.timesDelayed=0;let m=new Set,v=-1,y=Object.fromEntries(u.map(({colId:e,...t})=>[e,t])),b=n??this.gos.get("skipHeaderOnAutoSize"),w=o??b;for(;0!==v;){v=0;let e=[];for(let t of r){var C;if(!t||rs(C=t)||ra(C))continue;let i=p.getCol(t);if(!i||m.has(i)||i.getColDef().suppressAutoSize)continue;let r=f.getPreferredWidthForColumn(i,b);if(r>0){let e=y[i.colId]??{};e.minWidth??(e.minWidth=l),e.maxWidth??(e.maxWidth=a);let t=function(e,t,i={}){let r=i.minWidth??e.getMinWidth();t<r&&(t=r);let n=i.maxWidth??e.getMaxWidth();return t>n&&(t=n),t}(i,r,e);i.setActualWidth(t,d),m.add(i),v++}e.push(i)}e.length&&g.refresh(d)}w||this.autoSizeColumnGroupsByColumns(r,d,s),t(m)})}autoSizeColumn(e,t,i){this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){let r,{colModel:n,ctrlsSvc:o}=this.beans,s=new Set;for(let t of n.getColsForKeys(e)){let e=t.getParent();for(;e&&e!=i;)e.isPadding()||s.add(e),e=e.getParent()}for(let e of s){for(let t of o.getHeaderRowContainerCtrls())if(r=t.getHeaderCtrlForColumn(e))break;r?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){this.shouldQueueResizeOperations?this.pushResizeOperation(()=>this.autoSizeAllColumns(e)):this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){let i=this.gos.get("skipHeaderOnAutoSize"),r=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",r);let n=new lB(e);return n.addEventListener("doubleTap",r),()=>{e.removeEventListener("dblclick",r),n.destroy()}}addColumnGroupResize(e,t,i){let r=this.gos.get("skipHeaderOnAutoSize"),n=()=>{let e=[];for(let i of t.getDisplayedLeafColumns())i.getColDef().suppressAutoSize||e.push(i.getColId());e.length>0&&this.autoSizeCols({colKeys:e,skipHeader:r,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",n),()=>e.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;let i=f0(this.beans);i>0?this.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):100===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):500===t?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):t7(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,r){if(this.shouldQueueResizeOperations)return void this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,r));let{beans:n}=this,o=r?.animate??!0;o&&f2(n,!0);let s={};for(let{key:e,...t}of r?.columnLimits??[])s["string"==typeof e?e:e.getColId()]=t;let a=n.visibleCols.allCols;if(e<=0||!a.length)return;let l=rr(a);if(r?.onlyScaleUp&&l>e||e===l&&a.every(e=>{if(e.colDef.suppressSizeToFit)return!0;let t=s?.[e.getId()],i=t?.minWidth??r?.defaultMinWidth,n=t?.maxWidth??r?.defaultMaxWidth,o=e.getActualWidth();return(null==i||o>=i)&&(null==n||o<=n)}))return;let u=[],d=[];for(let e of a){let t=r?.colKeys?.some(t=>rd(e,t))??!0;e.getColDef().suppressSizeToFit||!t?d.push(e):u.push(e)}let c=u.slice(0),h=!1,p=e=>{i6(u,e),d.push(e)};for(let e of u){e.resetActualWidth(t);let i=s?.[e.getId()],n=i?.minWidth??r?.defaultMinWidth,o=i?.maxWidth??r?.defaultMaxWidth,a=e.getActualWidth();"number"==typeof n&&a<n?e.setActualWidth(n,t,!0):"number"==typeof o&&a>o&&e.setActualWidth(o,t,!0)}for(;!h;){h=!0;let i=e-rr(d);if(i<=0)for(let e of u){let i=s?.[e.getId()]?.minWidth??r?.defaultMinWidth??e.minWidth;e.setActualWidth(i,t,!0)}else{let e=i/rr(u),n=i;for(let i=u.length-1;i>=0;i--){let o=u[i],a=s?.[o.getId()],l=a?.minWidth??r?.defaultMinWidth,d=a?.maxWidth??r?.defaultMaxWidth,c=o.getMinWidth(),f=o.getMaxWidth(),g="number"==typeof l&&l>c?l:c,m="number"==typeof d&&d<f?d:f,v=Math.round(o.getActualWidth()*e);v<g?(v=g,p(o),h=!1):v>m?(v=m,p(o),h=!1):0===i&&(v=n),o.setActualWidth(v,t,!0),n-=v}}}for(let e of c)e.fireColumnWidthChangedEvent(t);let f=n.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),!i&&(rC(this.eventSvc,c,!0,t),o&&f2(n,!1))}applyAutosizeStrategy(){let{gos:e,colDelayRenderSvc:t}=this.beans,i=e.get("autoSizeStrategy");(i?.type==="fitGridWidth"||i?.type==="fitProvidedWidth")&&setTimeout(()=>{if(!this.isAlive())return;let e=i.type;if("fitGridWidth"===e){let{columnLimits:e,defaultMinWidth:t,defaultMaxWidth:r}=i,n=e?.map(({colId:e,minWidth:t,maxWidth:i})=>({key:e,minWidth:t,maxWidth:i}));this.sizeColumnsToFitGridBody({defaultMinWidth:t,defaultMaxWidth:r,columnLimits:n})}else"fitProvidedWidth"===e&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit");t?.revealColumns(e)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{if(!this.isAlive())return;let i="autosizeColumns";e?this.autoSizeCols({...t,source:i,colKeys:e}):this.autoSizeAllColumns({...t,source:i}),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){for(let e of(this.shouldQueueResizeOperations=!1,this.resizeOperationQueue))e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function f0({ctrlsSvc:e,scrollVisibleSvc:t}){let i=e.getGridBodyCtrl(),r=i.isVerticalScrollShowing()?t.getScrollbarWidth():0;return eZ(i.eGridBody)-r}var f1="ag-animate-autosize";function f2({ctrlsSvc:e,gos:t},i){if(!t.get("animateColumnResizing")||t.get("enableRtl")||!e.isAlive())return;let r=e.getGridBodyCtrl().eGridBody.classList;i?r.add(f1):r.remove(f1)}var f5=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column===this.col&&e.rowPinned==this.firstNode.rowPinned&&this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){let e=this.firstNode.__autoHeights?.[this.col.getColId()];if(null==e)return;let t=0;for(let e of this.spannedNodes)e!==this.lastNode&&(t+=e.rowHeight);return e-t}},f3=class extends tE{constructor(e){super(),this.column=e}buildCache(e){let t,{column:i,beans:{gos:r,pinnedRowModel:n,rowModel:o,valueSvc:s,pagination:a}}=this,{colDef:l}=i,u=this.getNodeMap(e),d=new Map,c=r.getCallback("isFullWidthRow"),h=l.equals,p=l.spanRows,f="function"==typeof p,g=null,m=null,v=(e,i)=>{g=e,m=null,t=i},y=e=>{let n=!e.isExpandable()&&!e.group&&!e.detail&&(!c||!c({rowNode:e}));if(null==e.rowIndex||!n)return void v(null,null);if(null==g||e.level!==g.level||e.footer||m&&e.rowIndex-1!==m?.getLastNode().rowIndex)return void v(e,s.getValue(i,e));let o=s.getValue(i,e);if(f){if(!p(iB(r,{valueA:t,nodeA:g,valueB:o,nodeB:e,column:i,colDef:l})))return void v(e,o)}else if(h?!h(t,o):t!==o)return void v(e,o);if(!m){let e=u?.get(g);e?.firstNode===g?(e.reset(),m=e):m=new f5(i,g),d.set(g,m)}m.addSpannedNode(e),d.set(e,m)};switch(e){case"center":o.forEachDisplayedNode?.(e=>{(!a||a.isRowInPage(e.rowIndex))&&y(e)}),this.centerValueNodeMap=d;break;case"top":n?.forEachPinnedRow("top",y),this.topValueNodeMap=d;break;case"bottom":n?.forEachPinnedRow("bottom",y),this.bottomValueNodeMap=d}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},f4=class extends tE{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=t_(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=t_(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){let e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){let{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;let i=this.createManagedBean(new f3(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){let{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(null!=this.pinnedTimeout)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}null==this.modelTimeout&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){null!=this.modelTimeout&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){null!=this.pinnedTimeout&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){let i=this.spanningColumns.get(e);return!!i&&i.isCellSpanning(t)}getCellSpanByPosition(e){let t,{pinnedRowModel:i,rowModel:r}=this.beans,n=e.column,o=e.rowIndex,s=this.spanningColumns.get(n);if(s){switch(e.rowPinned){case"top":t=i?.getPinnedTopRow(o);break;case"bottom":t=i?.getPinnedBottomRow(o);break;default:t=r.getRow(o)}if(t)return s.getCellSpan(t)}}getCellStart(e){let t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){let t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){let i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(let[i,r]of this.spanningColumns)r.isCellSpanning(e)&&t(i,r.getCellSpan(e))}destroy(){super.destroy(),this.spanningColumns.clear()}},f8=class extends ch{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,r,n,o,s){this.eWrapper=i,super.setComp(e,t,i,r,n,o,s),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){let{eGui:e,rowNode:t}=this;e&&null!=t.rowIndex&&ez(e,t.rowIndex)}setAriaRowSpan(){eA(this.eGui,"rowspan",this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){let e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){let{beans:t}=this;if(aB(t)){this.focusedCellPosition=void 0;return}let i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},f6=class extends cv{onRowIndexChanged(){for(let e of(super.onRowIndexChanged(),this.getAllCellCtrls()))e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){let t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(t&&t.firstNode===this.rowNode)return new f8(t,this,this.beans)}isCorrectCtrlForSpan(e){let t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!!t&&t.firstNode===this.rowNode&&e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},f7=class extends tE{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){let{rowSpanSvc:t}=this.beans,i=this.getCtrlsMap(e),r=i.size,n=this.getAllRelevantRowControls(e),o=new Map,s=!1;for(let e of n)e.isAlive()&&t?.forEachSpannedColumn(e.rowNode,(e,t)=>{if(o.has(t.firstNode))return;let r=i.get(t.firstNode);if(r){o.set(t.firstNode,r),i.delete(t.firstNode);return}s=!0;let n=new f6(t.firstNode,this.beans,!1,!1,!1);o.set(t.firstNode,n)});this.setCtrlsMap(e,o);let a=o.size===r;if(s||!a){for(let e of i.values())e.destroyFirstPass(!0),e.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){let{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){let{rowSpanSvc:t}=this.beans,i=t?.getCellSpanByPosition(e);if(!i)return;let r=this.getCtrlsMap(e.rowPinned).get(i.firstNode);if(r)return r.getAllCellCtrls().find(t=>t.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(let t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},f9=class extends tE{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:e,cellComp:t}=this,i=e.colDef,r=i.cellClassRules,n=this.getCellClassParams(e,i);cp(this.beans.expressionSvc,r===this.cellClassRules?void 0:this.cellClassRules,r,n,e=>t.toggleCss(e,!0),e=>t.toggleCss(e,!1)),this.cellClassRules=r}applyUserStyles(){let e,t=this.column,i=t.colDef,r=i.cellStyle;r&&(e="function"==typeof r?r(this.getCellClassParams(t,i)):r)&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){let{column:e,cellComp:t}=this,i=e.colDef,r=this.getCellClassParams(e,i);for(let e of this.staticClasses)t.toggleCss(e,!1);let n=this.beans.cellStyles.getStaticCellClasses(i,r);for(let e of(this.staticClasses=n,n))t.toggleCss(e,!0)}getCellClassParams(e,t){let{value:i,rowNode:r}=this.cellCtrl;return iB(this.beans.gos,{value:i,data:r.data,node:r,colDef:t,column:e,rowIndex:r.rowIndex})}},ge=class extends tE{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,r){cp(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,r),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){let i,{cellClass:r}=e;return r?("string"==typeof(i="function"==typeof r?r(t):r)&&(i=[i]),i||[]):[]}createCellCustomStyleFeature(e){return new f9(e,this.beans)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(e=>{i(e)})}},gt=class extends tE{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=e=>{let{beans:t,gos:i,element:r,columns:n}=this,o=t.colHover;if(e??!!i.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(r,{mouseover:o.setMouseOver.bind(o,n),mouseout:o.clearMouseOver.bind(o)});else{for(let e of this.destroyManagedListeners)e();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},gi=class extends tE{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;let t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){let r=()=>{let e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:r}),r()}onCellColumnHover(e,t){if(!t)return;let i=this.isHovered(e);t.toggleCss("ag-column-hover",i)}addHeaderFilterColumnHoverListener(e,t,i,r){this.createHoverFeature(e,[i],r);let n=()=>{let e=this.isHovered(i);t.toggleCss("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:n}),n()}createHoverFeature(e,t,i){e.createManagedBean(new gt(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},gr=class extends tE{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){let i=this.wrapSvc?.wrap(e,t)??t,r=!db.has(e),n=r?this.asyncListeners:this.syncListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventSvc.addListener(e,i,r)}removeListener(e,t){let i=this.wrapSvc?.unwrap(e,t)??t,r=this.asyncListeners.get(e),n=!!r?.delete(i);n||this.syncListeners.get(e)?.delete(i),this.eventSvc.removeListener(e,i,n)}addGlobalListener(e){let t=this.wrapSvc?.wrapGlobal(e)??e,i=(e,i)=>{db.has(e)&&t(e,i)},r=(e,i)=>{db.has(e)||t(e,i)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:r});let n=this.eventSvc;n.addGlobalListener(i,!1),n.addGlobalListener(r,!0)}removeGlobalListener(e){let{eventSvc:t,wrapSvc:i,globalListenerPairs:r}=this,n=i?.unwrapGlobal(e)??e;if(r.has(n)){let{syncListener:i,asyncListener:o}=r.get(n);t.removeGlobalListener(i,!1),t.removeGlobalListener(o,!0),r.delete(e)}else this.syncGlobalListeners.delete(n),t.removeGlobalListener(n,!1)}destroyEventListeners(e,t){e.forEach((e,i)=>{e.forEach(e=>this.eventSvc.removeListener(i,e,t)),e.clear()}),e.clear()}destroyGlobalListeners(e,t){for(let i of e)this.eventSvc.removeGlobalListener(i,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);let{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:e,asyncListener:i})=>{t.removeGlobalListener(e,!1),t.removeGlobalListener(i,!0)}),e.clear()}},gn=class extends tE{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=t_(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){let{visibleCols:e,rowModel:t,rowSpanSvc:i,pinnedRowModel:r}=this.beans,n=e.autoHeightCols,o=!1,s=e=>{let t=e.__autoHeights,r=iu(this.beans,e).height;for(let o of n){let n=t?.[o.getColId()],s=i?.getCellSpan(o,e);if(s){if(s.getLastNode()!==e)continue;if(!(n=i?.getCellSpan(o,e)?.getLastNodeAutoHeight()))return}if(null==n){if(this.colSpanSkipCell(o,e))continue;return}r=Math.max(n,r)}r!==e.rowHeight&&(e.setRowHeight(r),o=!0)};r?.forEachPinnedRow?.("top",s),r?.forEachPinnedRow?.("bottom",s),t.forEachDisplayedNode?.(s),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,i){if(e.__autoHeights??(e.__autoHeights={}),void 0==t)return void delete e.__autoHeights[i.getId()];let r=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,r!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){let{colModel:i,colViewport:r,visibleCols:n}=this.beans;if(!i.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=n.getLeftColsForRow(t);break;case"right":o=n.getRightColsForRow(t);break;case null:o=r.getColsWithinViewport(t)}return!o.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;let r=t.parentElement,{rowNode:n,column:o}=e,s=this.beans,a=l=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!i.isAlive())return;let{paddingTop:u,paddingBottom:d,borderBottomWidth:c,borderTopWidth:h}=eX(r),p=t.offsetHeight+(u+d+c+h);if(l<5){let e=eM(s),i=!e?.contains(t),r=0==p;if(i||r)return void window.setTimeout(()=>a(l+1),0)}this.setRowAutoHeight(n,p,o)},l=()=>a(0);l();let u=tl(s,t,l);return i.addDestroyFunc(()=>{u(),this.setRowAutoHeight(n,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(e=>e.isVisible()&&e.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;let e=this.beans.rowRenderer.getAllRowCtrls(),t=null;for(let{rowNode:i}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(i).filter(e=>e.isAutoHeight())),0!==t.length){if(!i.__autoHeights)return!1;for(let e of t){let t=i.__autoHeights[e.getColId()];if(!t||i.rowHeight<t)return!1}}return!0}},go={moduleName:"AllCommunity",version:tZ,dependsOn:[{moduleName:"ClientSideRowModel",version:tZ,rowModels:["clientSide"],beans:[fT,fE],dependsOn:[cX]},{moduleName:"CsvExport",version:tZ,beans:[fF],apiFunctions:{getDataAsCsv:function(e,t){return e.csvCreator?.getDataAsCsv(t)},exportDataAsCsv:function(e,t){e.csvCreator?.exportDataAsCsv(t)}},dependsOn:[{moduleName:"SharedExport",version:tZ,beans:[f_]}]},{moduleName:"InfiniteRowModel",version:tZ,apiFunctions:{refreshInfiniteCache:function(e){hd(e)?.refreshCache()},purgeInfiniteCache:function(e){hd(e)?.purgeCache()},getInfiniteRowCount:function(e){return hd(e)?.getRowCount()}},dependsOn:[{moduleName:"InfiniteRowModelCore",version:tZ,rowModels:["infinite"],beans:[fN,fB]},{moduleName:"SsrmInfiniteSharedApi",version:tZ,apiFunctions:{setRowCount:function(e,t,i){let r,n="serverSide"===(r=e.rowModel).getType()?r:void 0;if(n)return e.rowGroupColsSvc?.columns.length===0?t<0?void t9(238):void n.setRowCount(t,i):void t9(28);hd(e)?.setRowCount(t,i)},getCacheBlockState:function(e){return io(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}}]},{moduleName:"Validation",version:tZ,beans:[hP]},{moduleName:"TextEditor",version:tZ,userComponents:{agCellEditor:pK,agTextCellEditor:pK},dependsOn:[fd]},{moduleName:"NumberEditor",version:tZ,userComponents:{agNumberCellEditor:{classImp:class extends pI{constructor(){super(new pG(()=>this.getLocaleTextFunc()))}}}},dependsOn:[fd]},{moduleName:"DateEditor",version:tZ,userComponents:{agDateCellEditor:class extends pI{constructor(){super(new pN(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},agDateStringCellEditor:class extends pI{constructor(){super(new pV(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}}},dependsOn:[fd]},{moduleName:"CheckboxEditor",version:tZ,userComponents:{agCheckboxCellEditor:pF},dependsOn:[fd]},{moduleName:"SelectEditor",version:tZ,userComponents:{agSelectCellEditor:pU},dependsOn:[fd]},{moduleName:"LargeTextEditor",version:tZ,userComponents:{agLargeTextCellEditor:pz},dependsOn:[fd]},{moduleName:"CustomEditor",version:tZ,dependsOn:[fd]},{moduleName:"UndoRedoEdit",version:tZ,beans:[p_],apiFunctions:{undoCellEditing:function(e){e.undoRedo?.undo("api")},redoCellEditing:function(e){e.undoRedo?.redo("api")},getCurrentUndoSize:function(e){return e.undoRedo?.getCurrentUndoStackSize()??0},getCurrentRedoSize:function(e){return e.undoRedo?.getCurrentRedoStackSize()??0}},dependsOn:[fd]},{moduleName:"TextFilter",version:tZ,dependsOn:[pE],userComponents:{agTextColumnFilter:{classImp:pm,params:{useForm:!0}},agTextColumnFloatingFilter:px},dynamicBeans:{agTextColumnFilterHandler:pC}},{moduleName:"NumberFilter",version:tZ,dependsOn:[pE],userComponents:{agNumberColumnFilter:{classImp:pn,params:{useForm:!0}},agNumberColumnFloatingFilter:pf},dynamicBeans:{agNumberColumnFilterHandler:class extends hJ{constructor(){super(pr,pe),this.filterType="number",this.FilterModelFormatterClass=pa}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}}}},{moduleName:"DateFilter",version:tZ,dependsOn:[pE],userComponents:{agDateColumnFilter:{classImp:hY,params:{useForm:!0}},agDateInput:h9,agDateColumnFloatingFilter:h6},dynamicBeans:{agDateColumnFilterHandler:class extends hJ{constructor(){super(hQ,hK),this.filterType="date",this.FilterModelFormatterClass=h5}comparator(){return this.params.filterParams.comparator??h3}isValid(e){let t=this.params.filterParams.isValidDate;return!t||t(e)}}}},{moduleName:"CustomFilter",version:tZ,userComponents:{agReadOnlyFloatingFilter:hV},dependsOn:[pE]},{moduleName:"QuickFilter",version:tZ,apiFunctions:{isQuickFilterPresent:function(e){return!!e.quickFilter?.isFilterPresent()},getQuickFilter:function(e){return e.quickFilter?.getText()},resetQuickFilter:function(e){e.quickFilter?.resetCache()}},dependsOn:[{moduleName:"QuickFilterCore",version:tZ,rowModels:["clientSide"],beans:[pS],dependsOn:[pk,pR]}]},{moduleName:"ExternalFilter",version:tZ,dependsOn:[pk]},{moduleName:"GridState",version:tZ,beans:[fU],apiFunctions:{getState:function(e){return e.stateSvc?.getState()??{}},setState:function(e,t,i){return e.stateSvc?.setState(t,i)}}},{moduleName:"AlignedGrids",version:tZ,beans:[fv],dependsOn:[uV]},{moduleName:"Pagination",version:tZ,beans:[fY,f$],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){return e.pagination?.getPageSize()??100},paginationGetCurrentPage:function(e){return e.pagination?.getCurrentPage()??0},paginationGetTotalPages:function(e){return e.pagination?.getTotalPages()??1},paginationGetRowCount:function(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){e.pagination?.goToNextPage()},paginationGoToPreviousPage:function(e){e.pagination?.goToPreviousPage()},paginationGoToFirstPage:function(e){e.pagination?.goToFirstPage()},paginationGoToLastPage:function(e){e.pagination?.goToLastPage()},paginationGoToPage:function(e,t){e.pagination?.goToPage(t)}},dependsOn:[h_]},uV,{moduleName:"RowApi",version:tZ,apiFunctions:{redrawRows:function(e,t={}){let i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))},setRowNodeExpanded:function e(t,i,r,n,o){i&&(n&&i.parent&&-1!==i.parent.level&&e(t,i.parent,r,n,o),i.setExpanded(r,void 0,o))},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,r){e.rowRenderer.addRenderedRowListener(t,i,r)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRowIndex:function(e){return e.rowRenderer.firstRenderedRow},getLastDisplayedRowIndex:function(e){return e.rowRenderer.lastRenderedRow},getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()}}},{moduleName:"ScrollApi",version:tZ,apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()},ensureColumnVisible:pQ,ensureIndexVisible:pX,ensureNodeVisible:function(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}}},{moduleName:"RenderApi",version:tZ,apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;let r=e.ctrlsSvc.getGridBodyCtrl().eGridBody,n=`aria-${t}`;null===i?r.removeAttribute(n):r.setAttribute(n,i)},refreshCells:function(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming(()=>{for(let t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})},isAnimationFrameQueueEmpty:function(e){return e.animationFrameSvc?.isQueueEmpty()??!0},flushAllAnimationFrames:function(e){e.animationFrameSvc?.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:id(e),headerHeight:aG(e)}},getCellRendererInstances:function(e,t={}){let i=[];for(let r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){let e=r.getCellRenderer();null!=e&&i.push(r8(e))}if(t.columns?.length)return i;let r=[],n=cz(t.rowNodes);for(let t of e.rowRenderer.getAllRowCtrls()){if(n&&!cj(t.rowNode,n)||!t.isFullWidth())continue;let e=t.getFullWidthCellRenderers();for(let t=0;t<e.length;t++){let i=e[t];null!=i&&r.push(r8(i))}}return[...r,...i]}}},{moduleName:"ColumnAutoSize",version:tZ,beans:[fJ],apiFunctions:{sizeColumnsToFit:function(e,t){"number"==typeof t?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)},autoSizeColumns:fZ,autoSizeAllColumns:function(e,t){t&&"object"==typeof t?fZ(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}},dependsOn:[uv],css:[":where(.ag-ltr) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,left .2s ease-in-out}}:where(.ag-rtl) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,right .2s ease-in-out}}"]},{moduleName:"RowDrag",version:tZ,beans:[un,ur],apiFunctions:{addRowDropZone:function(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)},removeRowDropZone:function(e,t){let i=e.dragAndDrop?.findExternalZone(t.getContainer());i&&e.dragAndDrop?.removeDropTarget(i)},getRowDropZoneParams:function(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)},getRowDropPositionIndicator:function(e){let t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}},setRowDropPositionIndicator:function(e,t){let i=e.rowDropHighlightSvc;if(!i)return;let r=t?.row,n=t?.dropIndicatorPosition;"above"!==n&&"below"!==n&&"inside"!==n&&(n="none"),null==r?.rowIndex||"none"===n?i.clear():i.set(r,n)}},dependsOn:[us]},{moduleName:"PinnedRow",version:tZ,beans:[lk],css:[".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}"],apiFunctions:{getPinnedTopRowCount:function(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0},getPinnedBottomRowCount:function(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0},getPinnedTopRow:function(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)},forEachPinnedRow:function(e,t,i){return e.pinnedRowModel?.forEachPinnedRow(t,i)}},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},{moduleName:"RowSelection",version:tZ,rowModels:["clientSide","infinite","viewport"],beans:[fh],dependsOn:[{moduleName:"SharedRowSelection",version:tZ,beans:[fc],css:[':where(.ag-selection-checkbox) .ag-checkbox-input-wrapper{&:before{content:"";cursor:pointer;inset:-8px;position:absolute}}'],apiFunctions:{setNodesSelected:function(e,t){if(!t.nodes.every(e=>e.rowPinned&&!lM(e)?(t7(59),!1):void 0!==e.id||(t7(60),!1)))return;let{nodes:i,source:r,newValue:n}=t;e.selectionSvc?.setNodesSelected({nodes:i,source:r??"api",newValue:n})},selectAll:function(e,t,i="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:i,selectAll:t})},deselectAll:function(e,t,i="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:i,selectAll:t})},selectAllFiltered:function(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})},deselectAllFiltered:function(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})},selectAllOnCurrentPage:function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})},deselectAllOnCurrentPage:function(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})},getSelectedNodes:function(e){return e.selectionSvc?.getSelectedNodes()??[]},getSelectedRows:function(e){return e.selectionSvc?.getSelectedRows()??[]}}}]},{moduleName:"ValueCache",version:tZ,beans:[c0],apiFunctions:{expireValueCache:function(e){e.valueCache?.expire()}}},{moduleName:"CellStyle",version:tZ,beans:[ge]},{moduleName:"ColumnHover",version:tZ,beans:[gi],apiFunctions:{isColumnHovered:function(e,t){return!!e.colHover?.isHovered(t)}}},{moduleName:"RowStyle",version:tZ,beans:[cg]},{moduleName:"EventApi",version:tZ,apiFunctions:{addEventListener:function(e,t,i){e.apiEventSvc?.addListener(t,i)},addGlobalListener:function(e,t){e.apiEventSvc?.addGlobalListener(t)},removeEventListener:function(e,t,i){e.apiEventSvc?.removeListener(t,i)},removeGlobalListener:function(e,t){e.apiEventSvc?.removeGlobalListener(t)}},beans:[gr]},{moduleName:"CellApi",version:tZ,apiFunctions:{getCellValue:function(e,t){let{colKey:i,rowNode:r,useFormatter:n}=t,o=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if(ey(o))return null;let s=e.valueSvc.getValueForDisplay({column:o,node:r,includeValueFormatted:n});return n?s.valueFormatted??eS(s.value):s.value}}},{moduleName:"HighlightChanges",version:tZ,beans:[fG],userComponents:{agAnimateShowChangeCellRenderer:fH,agAnimateSlideCellRenderer:fj},apiFunctions:{flashCells:function(e,t={}){let{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(let r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(r,t)})}}},pM,{moduleName:"Locale",version:tZ,beans:[hc]},{moduleName:"RowAutoHeight",version:tZ,beans:[gn]},{moduleName:"DragAndDrop",version:tZ,dynamicBeans:{dndSourceComp:l0},icons:{rowDrag:"grip"}},{moduleName:"ClientSideRowModelApi",version:tZ,apiFunctions:{onGroupExpandedOrCollapsed:function(e){e.expansionSvc?.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){let i=hu(e);i&&(t&&"everything"!==t||(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))},isRowDataEmpty:function(e){return hu(e)?.isEmpty()??!0},forEachLeafNode:function(e,t){hu(e)?.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){hu(e)?.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){hu(e)?.forEachNodeAfterFilterAndSort(t)},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming(()=>hu(e)?.updateRowData(t))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming(()=>hu(e)?.batchUpdateRowData(t,i))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming(()=>hu(e)?.flushAsyncTransactions())},getBestCostNodeSelection:function(e){return e.selectionSvc?.getBestCostNodeSelection()},resetRowHeights:fm,onRowHeightChanged:fg},dependsOn:[{moduleName:"CsrmSsrmSharedApi",version:tZ,apiFunctions:{expandAll:function(e){e.expansionSvc?.expandAll(!0)},collapseAll:function(e){e.expansionSvc?.expandAll(!1)}}},{moduleName:"RowModelSharedApi",version:tZ,apiFunctions:{onRowHeightChanged:fg,resetRowHeights:fm}}]},{moduleName:"CellSpan",version:tZ,beans:[f4,f7]}]},gs=P,ga=e.i(316245),gl=gs.default.createContext({}),gu=gs.default.createContext("default"),gd=(e,t,i,r)=>{let n,o;if(!e||e.componentFromFramework||t.isDestroyed())return;let s=e.newAgStackInstance(),a=!1;return s.then(e=>{a?t.destroyBean(e):(o=(n=e).getGui(),i.appendChild(o),gc(r,n))}),()=>{a=!0,n&&(o?.remove(),t.destroyBean(n),r&&gc(r,void 0))}},gc=(e,t)=>{e&&(e instanceof Function?e(t):e.current=t)},gh=(...e)=>e.filter(e=>null!=e&&""!==e).join(" "),gp=class e{constructor(...e){for(const t of(this.classesMap={},e))this.classesMap[t]=!0}setClass(t,i){if(!!this.classesMap[t]==i)return this;let r=new e;return r.classesMap={...this.classesMap},r.classesMap[t]=i,r}toString(){return Object.keys(this.classesMap).filter(e=>this.classesMap[e]).join(" ")}},gf=e=>"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),gg=gs.default.version?.split(".")[0],gm="16"===gg||"17"===gg,gv=!1,gy=(e,t)=>{gm||!e||gv?t():ga.default.flushSync(t)};function gb(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;let r=[],n=[],o=new Map,s=new Map;for(let e=0;e<t.length;e++){let i=t[e];s.set(i.instanceId,i)}for(let t=0;t<e.length;t++){let i=e[t];o.set(i.instanceId,i),s.has(i.instanceId)&&r.push(i)}for(let e=0;e<t.length;e++){let i=t[e],r=i.instanceId;o.has(r)||n.push(i)}return r.length===e.length&&0===n.length?e:0===r.length&&n.length===t.length?t:0===r.length?n:0===n.length?r:[...r,...n]}var gw=(0,gs.forwardRef)((e,t)=>{let{registry:i,context:r}=(0,gs.useContext)(gl),n=(0,gs.useRef)(null),o=(0,gs.useRef)(null),s=(0,gs.useRef)(null),a=(0,gs.useRef)(null),l=(0,gs.useRef)(null),u=(0,gs.useRef)(),[d,c]=(0,gs.useState)(),[h,p]=(0,gs.useState)(),[f,g]=(0,gs.useState)(),[m,v]=(0,gs.useState)(()=>new gp),[y,b]=(0,gs.useState)(()=>new gp("ag-hidden")),[w,C]=(0,gs.useState)(()=>new gp("ag-hidden")),[x,S]=(0,gs.useState)(()=>new gp("ag-invisible"));(0,gs.useImperativeHandle)(t,()=>({refresh:()=>!1})),(0,gs.useLayoutEffect)(()=>gd(d,r,o.current),[d]);let k=(0,gs.useCallback)(t=>{if(n.current=t,!t||r.isDestroyed()){u.current=r.destroyBean(u.current);return}let o=i.createDynamicBean("groupCellRendererCtrl",!0);o&&(u.current=r.createBean(o),u.current.init({setInnerRenderer:(e,t)=>{c(e),g(t)},setChildCount:e=>p(e),toggleCss:(e,t)=>v(i=>i.setClass(e,t)),setContractedDisplayed:e=>C(t=>t.setClass("ag-hidden",!e)),setExpandedDisplayed:e=>b(t=>t.setClass("ag-hidden",!e)),setCheckboxVisible:e=>S(t=>t.setClass("ag-invisible",!e)),setCheckboxSpacing:e=>S(t=>t.setClass("ag-group-checkbox-spacing",e))},t,s.current,a.current,l.current,gw,e))},[]),R=(0,gs.useMemo)(()=>`ag-cell-wrapper ${m.toString()}`,[m]),E=(0,gs.useMemo)(()=>`ag-group-expanded ${y.toString()}`,[y]),P=(0,gs.useMemo)(()=>`ag-group-contracted ${w.toString()}`,[w]),M=(0,gs.useMemo)(()=>`ag-group-checkbox ${x.toString()}`,[x]),D=d?.componentFromFramework,T=D?d.componentClass:void 0,O=null==d&&null!=f,_=eS(f);return gs.default.createElement("span",{className:R,ref:k,...!e.colDef?{role:u.current?.getCellAriaRole()}:{}},gs.default.createElement("span",{className:E,ref:a}),gs.default.createElement("span",{className:P,ref:l}),gs.default.createElement("span",{className:M,ref:s}),gs.default.createElement("span",{className:"ag-group-value",ref:o},O?_:D?gs.default.createElement(T,{...d.params}):null),gs.default.createElement("span",{className:"ag-group-child-count"},h))}),gC=(0,gs.createContext)({setMethods:()=>{}}),gx=(0,gs.memo)(e=>{let{initialProps:t,addUpdateCallback:i,CustomComponentClass:r,setMethods:n}=e,[{key:o,...s},a]=(0,gs.useState)(t);return(0,gs.useEffect)(()=>{i(e=>a(e))},[]),gs.default.createElement(gC.Provider,{value:{setMethods:n}},gs.default.createElement(r,{key:o,...s}))}),gS=0;function gk(){return`agPortalKey_${++gS}`}var gR=class{constructor(e,t,i,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=gk(),this.portalKey=gk(),this.instanceCreated=this.isStatelessComponent()?rN.resolve(!1):new rN(e=>{this.resolveInstanceCreated=e})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();let e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){let t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"==typeof Symbol&&Symbol.for}isStateless(e){return"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){let t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){let i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout(()=>this.callMethod(e,t));let r=i[e];return r?r.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new rN(e=>this.createReactComponent(e))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,ga.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,gs.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){let i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return!this.suppressFallbackMethods&&!!this[`${e}Component`]}};function gE(e,t,i){for(let r of e){let e=t[r];e&&(i[r]=e)}}var gP=class extends gR{constructor(){super(...arguments),this.awaitUpdateCallback=new rN(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=gx}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new rN(e=>{setTimeout(()=>{e()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,gE(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new rN(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},gM=class extends gP{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},gD=class extends gP{refresh(e){this.sourceParams=e,this.refreshProps()}},gT=class extends gP{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){let e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},gO=class extends gP{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){let e=super.getProps(),{label:t,icon:i,shake:r}=this;return e.label=t,e.icon=i,e.shake=r,e}},g_=class extends gP{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new rN(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){let t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){!1===this.expectingNewMethods&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();let t=new rN(e=>{this.resolveFilterPassCallback=e});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){let e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},gA=class extends gP{constructor(){super(...arguments),this.awaitSetMethodsCallback=new rN(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){let t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function gF(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||rN.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var gI=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){gE(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),gF(this.floatingFilterParams,e)}},gL=class extends gP{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),gF(this.sourceParams,e)}getProps(){let e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},gN=class extends gP{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},gB=class extends gP{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},gV=class extends gP{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){let t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){let e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},gH=class extends gP{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},gz=class extends gP{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){let e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function gj(){t7(231)}var gG=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed)return void t(null);if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){gy(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},gW=(0,gs.memo)(({ctrl:e})=>{let t=e.isAlive(),{context:i}=(0,gs.useContext)(gl),[r,n]=(0,gs.useState)(),[o,s]=(0,gs.useState)(),a=(0,gs.useRef)(),l=(0,gs.useRef)(null),u=(0,gs.useRef)(null),d=(0,gs.useRef)(null),c=(0,gs.useRef)(),h=(0,gs.useRef)();t&&!h.current&&(h.current=new r_(()=>l.current));let p=(0,gs.useCallback)(t=>{if(l.current=t,!t||!e.isAlive()||i.isDestroyed()){a.current=i.destroyBean(a.current);return}a.current=i.createBean(new rD);let r=()=>{let t=e.getSelectAllGui();t&&(u.current?.insertAdjacentElement("afterend",t),a.current.addDestroyFunc(()=>t.remove()))};e.setComp({setWidth:e=>{l.current&&(l.current.style.width=e)},toggleCss:(e,t)=>h.current.toggleCss(e,t),setUserStyles:e=>s(e),setAriaSort:e=>{l.current&&(e?eA(l.current,"sort",e):eF(l.current,"sort"))},setUserCompDetails:e=>n(e),getUserCompInstance:()=>c.current||void 0,refreshSelectAllGui:r,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()},t,u.current,d.current,a.current),r()},[]);(0,gs.useLayoutEffect)(()=>gd(r,i,d.current,c),[r]),(0,gs.useEffect)(()=>{e.setDragSource(l.current)},[r]);let f=(0,gs.useMemo)(()=>!!(r?.componentFromFramework&&gf(r.componentClass)),[r]),g=r?.componentFromFramework,m=r?.componentClass;return gs.default.createElement("div",{ref:p,style:o,className:"ag-header-cell",role:"columnheader"},gs.default.createElement("div",{ref:u,className:"ag-header-cell-resize",role:"presentation"}),gs.default.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},g?f?gs.default.createElement(m,{...r.params}):gs.default.createElement(m,{...r.params,ref:c}):null))}),gU=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){gE(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},g$=(0,gs.memo)(({ctrl:e})=>{let{context:t,gos:i}=(0,gs.useContext)(gl),[r,n]=(0,gs.useState)(),[o,s]=(0,gs.useState)(()=>new gp("ag-header-cell","ag-floating-filter")),[a,l]=(0,gs.useState)(()=>new gp),[u,d]=(0,gs.useState)(()=>new gp("ag-floating-filter-button","ag-hidden")),[c,h]=(0,gs.useState)("false"),[p,f]=(0,gs.useState)(),[,g]=(0,gs.useState)(1),m=(0,gs.useRef)(),v=(0,gs.useRef)(null),y=(0,gs.useRef)(null),b=(0,gs.useRef)(null),w=(0,gs.useRef)(null),C=(0,gs.useRef)(),x=(0,gs.useRef)(),S=e=>{null!=e&&C.current&&C.current(e)},k=(0,gs.useCallback)(i=>{if(v.current=i,!i||!e.isAlive()||t.isDestroyed()){m.current=t.destroyBean(m.current);return}m.current=t.createBean(new rD),x.current=new rN(e=>{C.current=e}),e.setComp({toggleCss:(e,t)=>s(i=>i.setClass(e,t)),setUserStyles:e=>n(e),addOrRemoveBodyCssClass:(e,t)=>l(i=>i.setClass(e,t)),setButtonWrapperDisplayed:e=>{d(t=>t.setClass("ag-hidden",!e)),h(e?"false":"true")},setWidth:e=>{v.current&&(v.current.style.width=e)},setCompDetails:e=>f(e),getFloatingFilterComp:()=>x.current?x.current:null,setMenuIcon:e=>w.current?.appendChild(e)},i,w.current,y.current,m.current)},[]);(0,gs.useLayoutEffect)(()=>gd(p,t,y.current,S),[p]);let R=(0,gs.useMemo)(()=>o.toString(),[o]),E=(0,gs.useMemo)(()=>a.toString(),[a]),P=(0,gs.useMemo)(()=>u.toString(),[u]),M=(0,gs.useMemo)(()=>!!(p&&p.componentFromFramework&&gf(p.componentClass)),[p]),D=(0,gs.useMemo)(()=>i.get("reactiveCustomComponents"),[]),T=(0,gs.useMemo)(()=>i.get("enableFilterHandlers"),[]),[O,_]=(0,gs.useState)();(0,gs.useEffect)(()=>{if(p?.componentFromFramework)if(D){let e=new(T?gU:gI)(p.params,()=>g(e=>e+1));S(e),_(e)}else gj()},[p]);let A=O?.getProps(),F=p?.componentFromFramework,I=p?.componentClass;return gs.default.createElement("div",{ref:k,style:r,className:R,role:"gridcell"},gs.default.createElement("div",{ref:y,className:E,role:"presentation"},F?D?A&&gs.default.createElement(gC.Provider,{value:{setMethods:e=>O.setMethods(e)}},gs.default.createElement(I,{...A})):gs.default.createElement(I,{...p.params,ref:M?()=>{}:S}):null),gs.default.createElement("div",{ref:b,"aria-hidden":c,className:P,role:"presentation"},gs.default.createElement("button",{ref:w,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))}),gq=(0,gs.memo)(({ctrl:e})=>{let{context:t}=(0,gs.useContext)(gl),[i,r]=(0,gs.useState)(),[n,o]=(0,gs.useState)(()=>new gp),[s,a]=(0,gs.useState)(()=>new gp),[l,u]=(0,gs.useState)("false"),[d,c]=(0,gs.useState)(),[h,p]=(0,gs.useState)(),f=(0,gs.useRef)(),g=(0,gs.useRef)(null),m=(0,gs.useRef)(null),v=(0,gs.useRef)(null),y=(0,gs.useRef)(),b=(0,gs.useCallback)(i=>{if(g.current=i,!i||!e.isAlive()||t.isDestroyed()){f.current=t.destroyBean(f.current);return}f.current=t.createBean(new rD),e.setComp({setWidth:e=>{g.current&&(g.current.style.width=e)},toggleCss:(e,t)=>o(i=>i.setClass(e,t)),setUserStyles:e=>r(e),setHeaderWrapperHidden:e=>{let t=v.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{let t=v.current;t&&(null!=e?t.style.setProperty("max-height",`${e}px`):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>p(e),setResizableDisplayed:e=>{a(t=>t.setClass("ag-hidden",!e)),u(e?"false":"true")},setAriaExpanded:e=>c(e),getUserCompInstance:()=>y.current||void 0},i,m.current,v.current,f.current)},[]);(0,gs.useLayoutEffect)(()=>gd(h,t,v.current),[h]),(0,gs.useEffect)(()=>{g.current&&e.setDragSource(g.current)},[h]);let w=(0,gs.useMemo)(()=>!!(h?.componentFromFramework&&gf(h.componentClass)),[h]),C=(0,gs.useMemo)(()=>"ag-header-group-cell "+n.toString(),[n]),x=(0,gs.useMemo)(()=>"ag-header-cell-resize "+s.toString(),[s]),S=h?.componentFromFramework,k=h?.componentClass;return gs.default.createElement("div",{ref:b,style:i,className:C,role:"columnheader","aria-expanded":d},gs.default.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},S?w?gs.default.createElement(k,{...h.params}):gs.default.createElement(k,{...h.params,ref:y}):null),gs.default.createElement("div",{ref:m,"aria-hidden":l,className:x}))}),gK=(0,gs.memo)(({ctrl:e})=>{let{gos:t,context:i}=(0,gs.useContext)(gl),{topOffset:r,rowHeight:n}=(0,gs.useMemo)(()=>e.getTopAndHeight(),[]),o=(0,gs.useMemo)(()=>t.get("tabIndex"),[]),[s,a]=(0,gs.useState)(()=>e.getAriaRowIndex()),l=e.headerRowClass,[u,d]=(0,gs.useState)(()=>n+"px"),[c,h]=(0,gs.useState)(()=>r+"px"),p=(0,gs.useRef)(null),[f,g]=(0,gs.useState)(()=>e.getUpdatedHeaderCtrls()),m=(0,gs.useRef)(),v=(0,gs.useRef)(null),y=(0,gs.useCallback)(t=>{if(v.current=t,!t||!e.isAlive()||i.isDestroyed()){m.current=i.destroyBean(m.current);return}m.current=i.createBean(new rD),e.setComp({setHeight:e=>d(e),setTop:e=>h(e),setHeaderCtrls:(e,t,i)=>{let r=p.current,n=gb(r,e,t);n!==r&&(p.current=n,gy(i,()=>g(n)))},setWidth:e=>{v.current&&(v.current.style.width=e)},setRowIndex:e=>{a(e)}},m.current,!1)},[]),b=(0,gs.useMemo)(()=>({height:u,top:c}),[u,c]),w=(0,gs.useCallback)(t=>{switch(e.type){case"group":return gs.default.createElement(gq,{ctrl:t,key:t.instanceId});case"filter":return gs.default.createElement(g$,{ctrl:t,key:t.instanceId});default:return gs.default.createElement(gW,{ctrl:t,key:t.instanceId})}},[]);return gs.default.createElement("div",{ref:y,className:l,role:"row",style:b,tabIndex:o,"aria-rowindex":s},f.map(w))}),gQ=(0,gs.memo)(({pinned:e})=>{let[t,i]=(0,gs.useState)(!0),[r,n]=(0,gs.useState)([]),{context:o}=(0,gs.useContext)(gl),s=(0,gs.useRef)(null),a=(0,gs.useRef)(null),l=(0,gs.useRef)(),u="left"===e,d="right"===e,c=(0,gs.useCallback)(t=>{if(s.current=t,!t||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new a1(e)),l.current.setComp({setDisplayed:i,setCtrls:e=>n(e),setCenterWidth:e=>{a.current&&(a.current.style.width=e)},setViewportScrollLeft:e=>{s.current&&(s.current.scrollLeft=e)},setPinnedContainerWidth:e=>{s.current&&(s.current.style.width=e,s.current.style.minWidth=e,s.current.style.maxWidth=e)}},s.current)},[]),h=t?"":"ag-hidden",p=()=>r.map(e=>gs.default.createElement(gK,{ctrl:e,key:e.instanceId}));return u?gs.default.createElement("div",{ref:c,className:"ag-pinned-left-header "+h,"aria-hidden":!t,role:"rowgroup"},p()):d?gs.default.createElement("div",{ref:c,className:"ag-pinned-right-header "+h,"aria-hidden":!t,role:"rowgroup"},p()):u||d?null:gs.default.createElement("div",{ref:c,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},gs.default.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},p()))}),gX=(0,gs.memo)(()=>{let[e,t]=(0,gs.useState)(()=>new gp),[i,r]=(0,gs.useState)(),{context:n}=(0,gs.useContext)(gl),o=(0,gs.useRef)(null),s=(0,gs.useRef)(),a=(0,gs.useCallback)(e=>{if(o.current=e,!e||n.isDestroyed()){s.current=n.destroyBean(s.current);return}s.current=n.createBean(new a$),s.current.setComp({toggleCss:(e,i)=>t(t=>t.setClass(e,i)),setHeightAndMinHeight:e=>r(e)},e,e)},[]),l=(0,gs.useMemo)(()=>"ag-header "+e.toString(),[e]),u=(0,gs.useMemo)(()=>({height:i,minHeight:i}),[i]);return gs.default.createElement("div",{ref:a,className:l,style:u,role:"presentation"},gs.default.createElement(gQ,{pinned:"left"}),gs.default.createElement(gQ,{pinned:null}),gs.default.createElement(gQ,{pinned:"right"}))}),gY=(e,t)=>{(0,gs.useEffect)(()=>{let i=t.current;if(i){let t=i.parentElement;if(t){let r=document.createComment(e);return t.insertBefore(r,i),()=>{r.remove()}}}},[e])},gZ=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new rN(e=>{this.resolveInstanceCreated=e}),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){gE(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},gJ=(0,gs.memo)(e=>{let[t,i]=(0,gs.useState)(),r=(0,gs.useContext)(gl),{context:n,popupSvc:o,gos:s,editSvc:a}=r,{editDetails:l,cellCtrl:u,eParentCell:d}=e;return(e=>{let t=(0,gs.useRef)(e),i=(0,gs.useRef)(),r=(0,gs.useRef)(!1),n=(0,gs.useRef)(!1),[,o]=(0,gs.useState)(0);r.current&&(n.current=!0),(0,gs.useEffect)(()=>(r.current||(i.current=t.current(),r.current=!0),o(e=>e+1),()=>{n.current&&i.current?.()}),[])})(()=>{let t,r,{compDetails:c}=l,h=s.get("stopEditingWhenCellsLoseFocus");if(!n.isDestroyed()){let s=(t=n.createBean(a.createPopupEditorWrapper(c.params))).getGui();if(e.jsChildComp){let t=e.jsChildComp.getGui();t&&s.appendChild(t)}let{column:p,rowNode:f}=u,g={column:p,rowNode:f,type:"popupCellEditor",eventSource:d,ePopup:s,position:l.popupPosition,keepWithinBounds:!0},m=o?.positionPopupByComponent.bind(o,g),v=o?.addPopup({modal:h,eChild:s,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:d,positionCallback:m,ariaOwns:d});r=v?v.hideFunc:void 0,i(t),e.jsChildComp?.afterGuiAttached?.()}return()=>{r?.(),n.destroyBean(t)}}),(0,gs.useLayoutEffect)(()=>()=>{u.isCellFocused()&&t?.getGui().contains(eP(r))&&d.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?(0,ga.createPortal)(e.wrappedContent,t.getGui()):null}),g0=(e,t,i)=>e.compProxy?((e,t,i)=>{let{compProxy:r}=e;i(r);let n=r.getProps(),o=gf(t);return gs.default.createElement(gC.Provider,{value:{setMethods:e=>r.setMethods(e)}},o?gs.default.createElement(t,{...n}):gs.default.createElement(t,{...n,ref:e=>r.setRef(e)}))})(e,t,i):gs.default.createElement(t,{...e.compDetails.params,ref:i}),g1=(e,t,i,r,n,o,s=!1)=>{let{context:a}=(0,gs.useContext)(gl),l=(0,gs.useCallback)(()=>{let e=n.current;if(!e)return;let t=e.getGui();t&&t.parentElement&&t.remove(),a.destroyBean(e),n.current=void 0},[]);(0,gs.useEffect)(()=>{let r=null!=e&&!s,a=e?.compDetails&&!e.compDetails.componentFromFramework,u=t&&null==i;if(!(r&&a&&!u))return void l();let d=e.compDetails;if(n.current){let t=n.current,i=null!=t.refresh&&!1==e.force&&t.refresh(d.params);if(!0===i||void 0===i)return;l()}d.newAgStackInstance().then(e=>{if(!e)return;let r=e.getGui();r&&((t?i:o.current).appendChild(r),n.current=e)})},[e,t,r,s]),(0,gs.useEffect)(()=>l,[])},g2=({cellCtrl:e,parent:t})=>{let i=(0,gs.useRef)(),r=(0,gs.useMemo)(()=>{let{loadingComp:t}=e.getDeferLoadingCellRenderer();return t?{value:void 0,compDetails:t,force:!1}:void 0},[e]);if(g1(r,!1,void 0,1,i,t),r?.compDetails?.componentFromFramework){let e=r.compDetails.componentClass;return gs.default.createElement(e,{...r.compDetails.params})}return gs.default.createElement(gs.default.Fragment,null)},g5=(0,gs.memo)(({cellCtrl:e,printLayout:t,editingCell:i})=>{let{context:r}=(0,gs.useContext)(gl),{column:{colIdSanitised:n},instanceId:o}=e,s=(0,gs.useRef)(),[a,l]=(0,gs.useState)(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[u,d]=(0,gs.useState)(),[c,h]=(0,gs.useState)(1),[p,f]=(0,gs.useState)(),[g,m]=(0,gs.useState)(!1),[v,y]=(0,gs.useState)(!1),[b,w]=(0,gs.useState)(!1),[C,x]=(0,gs.useState)(),S=(0,gs.useMemo)(()=>e.isForceWrapper(),[e]),k=(0,gs.useMemo)(()=>e.getCellAriaRole(),[e]),R=(0,gs.useRef)(null),E=(0,gs.useRef)(null),P=(0,gs.useRef)(null),M=(0,gs.useRef)(),D=(0,gs.useRef)(),T=(0,gs.useRef)(),O=(0,gs.useRef)([]),_=(0,gs.useRef)(),A=(0,gs.useRef)(),[F,I]=(0,gs.useState)(0),L=(0,gs.useCallback)(e=>{A.current=e,I(e=>e+1)},[]),N=null!=a&&(g||b||v)&&(null==u||!!u.popup),B=S||N,V=(0,gs.useMemo)(()=>e.getCellValueClass(),[e]),H=(0,gs.useCallback)(t=>{if(D.current=t,t){let i=t.isCancelBeforeStart&&t.isCancelBeforeStart();setTimeout(()=>{i?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(t))})}},[e]),z=(0,gs.useRef)();z.current||(z.current=new r_(()=>R.current));let j=!!u&&!u.popup;g1(a,B,A.current,F,M,R,j);let G=(0,gs.useRef)();(0,gs.useLayoutEffect)(()=>{let e=G.current;if(G.current=a,null==e||null==e.compDetails||null==a||null==a.compDetails)return;_.current?.refreshVisibility();let t=e.compDetails,i=a.compDetails;t.componentClass!=i.componentClass||P.current?.refresh==null||!0!=P.current.refresh(i.params)&&h(e=>e+1)},[a]),(0,gs.useLayoutEffect)(()=>{if(!(u&&!u.compDetails.componentFromFramework)||r.isDestroyed())return;let t=u.compDetails,i=!0===u.popup,n=t.newAgStackInstance();return n.then(e=>{if(!e)return;let t=e.getGui();if(H(e),!i){let i=(S?T:R).current;i?.appendChild(t),e.afterGuiAttached?.()}x(e)}),()=>{n.then(t=>{let i=t.getGui();e.disableEditorTooltipFeature(),r.destroyBean(t),H(void 0),x(void 0),i?.remove()})}},[u]);let W=(0,gs.useCallback)(t=>{let i;if(T.current=t,!t||r.isDestroyed()||!e.isAlive()){let e=O.current;for(let t of(O.current=[],e))t();return}let n=e=>{e&&(t.insertAdjacentElement("afterbegin",e.getGui()),O.current.push(()=>{e4(e.getGui()),r.destroyBean(e),_.current===i&&(_.current=void 0)}))};g&&n(e.createSelectionCheckbox()),b&&n(e.createDndSource()),v&&(_.current=i=e.createRowDragComp(),i&&(n(i),i.refreshVisibility()))},[e,r,b,v,g]),U=(0,gs.useCallback)(()=>{let n=!e.isCellSpanning()||E.current,o=R.current;if(!o||!n||!e||!e.isAlive()||r.isDestroyed()){s.current=r.destroyBean(s.current);return}s.current=r.createBean(new rD);let a={toggleCss:(e,t)=>z.current.toggleCss(e,t),setUserStyles:e=>f(e),getFocusableElement:()=>R.current,setIncludeSelection:e=>m(e),setIncludeRowDrag:e=>y(e),setIncludeDndSource:e=>w(e),getCellEditor:()=>D.current??null,getCellRenderer:()=>P.current??M.current,getParentOfValue:()=>A.current??T.current??R.current,setRenderDetails:(t,i,r)=>{let n=()=>{l(e=>e?.compDetails!==t||e?.value!==i||e?.force!==r?{value:i,compDetails:t,force:r}:e)};if(t?.params?.deferRender&&!e.rowNode.group){let{loadingComp:t,onReady:i}=e.getDeferLoadingCellRenderer();if(t){l({value:void 0,compDetails:t,force:!1}),i.then(()=>{gm?n():gs.default.startTransition(n)});return}}n()},setEditDetails:(t,i,r,n)=>{if(t){let e;t.componentFromFramework&&(n?e=new gZ(t.params,()=>h(e=>e+1)):gj()),d({compDetails:t,popup:i,popupPosition:r,compProxy:e}),i||l(void 0)}else e.hasBrowserFocus()&&a.getFocusableElement().focus({preventScroll:!0}),D.current=void 0,d(void 0)},refreshEditStyles:(e,t)=>{if(!R.current)return;let{current:i}=z;i.toggleCss("ag-cell-value",!B),i.toggleCss("ag-cell-inline-editing",!!e&&!t),i.toggleCss("ag-cell-popup-editing",!!e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}},u=T.current||void 0;e.setComp(a,o,E.current??void 0,u,t,i,s.current)},[]),$=(0,gs.useCallback)(e=>{R.current=e,U()},[]),q=(0,gs.useCallback)(e=>{E.current=e,U()},[]),K=(0,gs.useMemo)(()=>!!(a?.compDetails?.componentFromFramework&&gf(a.compDetails.componentClass)),[a]);(0,gs.useLayoutEffect)(()=>{if(!R.current)return;let{current:e}=z;e.toggleCss("ag-cell-value",!B),e.toggleCss("ag-cell-inline-editing",!!u&&!u.popup),e.toggleCss("ag-cell-popup-editing",!!u&&!!u.popup),e.toggleCss("ag-cell-not-inline-editing",!u||!!u.popup)});let Q=()=>{let{compDetails:t,value:i}=a;if(!t)return i?.toString?.()??i;if(t.componentFromFramework){let i=t.componentClass;return gs.default.createElement(gs.Suspense,{fallback:gs.default.createElement(g2,{cellCtrl:e,parent:R})},K?gs.default.createElement(i,{...t.params,key:c}):gs.default.createElement(i,{...t.params,key:c,ref:P}))}},X=()=>{let t=()=>null==a?null:B?gs.default.createElement("span",{role:"presentation",id:`cell-${o}`,className:V,ref:L},Q()):Q(),i=t=>{var i;let r,n,o,s,a;return i=R.current,n=(r=t.compDetails).componentClass,o=r.componentFromFramework&&!t.popup,s=r.componentFromFramework&&t.popup,a=!r.componentFromFramework&&t.popup,o?g0(t,n,H):s?gs.default.createElement(gJ,{editDetails:t,cellCtrl:e,eParentCell:i,wrappedContent:g0(t,n,H)}):a&&C?gs.default.createElement(gJ,{editDetails:t,cellCtrl:e,eParentCell:i,jsChildComp:C}):null};return null!=u?u.popup?gs.default.createElement(gs.default.Fragment,null,t(),i(u)):i(u):t()},Y=()=>gs.default.createElement("div",{ref:$,style:p,role:k,"col-id":n},B?gs.default.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:W},X()):X());return e.isCellSpanning()?gs.default.createElement("div",{ref:q,className:"ag-spanned-cell-wrapper",role:"presentation"},Y()):Y()}),g3=(0,gs.memo)(({rowCtrl:e,containerType:t})=>{var i,r,n;let o,{context:s,gos:a,editSvc:l}=(0,gs.useContext)(gl),u="default"===(0,gs.useContext)(gu),d=(0,gs.useRef)(),c=(0,gs.useRef)(e.getDomOrder()),h=e.isFullWidth(),p=e.rowNode.displayed,[f,g]=(0,gs.useState)(()=>p?e.rowNode.getRowIndexString():null),[m,v]=(0,gs.useState)(()=>e.rowId),[y,b]=(0,gs.useState)(()=>e.businessKey),[w,C]=(0,gs.useState)(()=>e.rowStyles),x=(0,gs.useRef)(null),[S,k]=(0,gs.useState)(()=>null),[R,E]=(0,gs.useState)(),[P,M]=(0,gs.useState)(()=>p?e.getInitialRowTop(t):void 0),[D,T]=(0,gs.useState)(()=>p?e.getInitialTransform(t):void 0),O=(0,gs.useRef)(null),_=(0,gs.useRef)(),A=(0,gs.useRef)(),F=(0,gs.useRef)(!1),[I,L]=(0,gs.useState)(0);(0,gs.useEffect)(()=>{if(F.current||!R||I>10)return;let t=O.current?.firstChild;t?(e.setupDetailRowAutoHeight(t),F.current=!0):L(e=>e+1)},[R,I]);let N=(0,gs.useRef)();N.current||(N.current=new r_(()=>O.current));let B=(0,gs.useRef)(()=>{}),V=(i=(0,gs.useCallback)(e=>(B.current=e,()=>{B.current=()=>{}}),[]),r=()=>x.current,n=[],gs.default.useSyncExternalStore?gs.default.useSyncExternalStore(i,r):n),H=u?V:S,z=(0,gs.useCallback)(i=>{(O.current=i,d.current=i?s.createBean(new rD):s.destroyBean(d.current),i)?!e.isAlive()||s.isDestroyed()||e.setComp({setTop:M,setTransform:T,toggleCss:(e,t)=>N.current.toggleCss(e,t),setDomOrder:e=>c.current=e,setRowIndex:g,setRowId:v,setRowBusinessKey:b,setUserStyles:C,setCellCtrls:(e,t)=>{let i=x.current,r=gb(i,e,c.current);r!==i&&(x.current=r,u?B.current():gy(t,()=>k(r)))},showFullWidth:e=>{A.current=e.params,E(e)},getFullWidthCellRenderer:()=>_.current,getFullWidthCellRendererParams:()=>A.current,refreshFullWidth:e=>{let t=e();return(A.current=t,$.current)?(E(e=>({...e,params:t})),!0):!!_.current&&!!_.current.refresh&&_.current.refresh(t)}},i,t,d.current):e.unsetComp(t)},[]);(0,gs.useLayoutEffect)(()=>gd(R,s,O.current,_),[R]);let j=(0,gs.useMemo)(()=>{let e={top:P,transform:D};return Object.assign(e,w),e},[P,D,w]),G=h&&R?.componentFromFramework,W=!h&&null!=H,U=(0,gs.useMemo)(()=>!!(R?.componentFromFramework&&gf(R.componentClass)),[R]),$=(0,gs.useRef)(!1);return(0,gs.useEffect)(()=>{$.current=U&&!!R&&!!a.get("reactiveCustomComponents")},[U,R]),gs.default.createElement("div",{ref:z,role:"row",style:j,"row-index":f,"row-id":m,"row-business-key":y},W?H?.map(t=>gs.default.createElement(g5,{cellCtrl:t,editingCell:l?.isEditing(t,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:t.instanceId})):G?(o=R.componentClass,U?gs.default.createElement(o,{...R.params}):gs.default.createElement(o,{...R.params,ref:_})):null)}),g4=(0,gs.memo)(({name:e})=>{let{context:t,gos:i}=(0,gs.useContext)(gl),r=(0,gs.useMemo)(()=>ad[e],[e]),n=(0,gs.useRef)(null),o=(0,gs.useRef)(null),s=(0,gs.useRef)(null),a=(0,gs.useRef)([]),l=(0,gs.useRef)([]),[u,d]=(0,gs.useState)(()=>[]),c=!!i.get("enableCellSpan")&&!!r.getSpannedRowCtrls,h=(0,gs.useRef)([]),p=(0,gs.useRef)([]),[f,g]=(0,gs.useState)(()=>[]),m=(0,gs.useRef)(!1),v=(0,gs.useRef)(),y=(0,gs.useMemo)(()=>gh("ag-viewport",ac(e)),[e]),b=(0,gs.useMemo)(()=>gh(ah(e)),[e]),w=(0,gs.useMemo)(()=>{let t;return gh("ag-spanning-container",(t=ad[e],`ag-${t.name}-spanned-cells-container`))},[e]),C="center"===r.type||c;gY(" AG Row Container "+e+" ",C?n:o);let x=(0,gs.useCallback)(()=>{let e=!C||null!=n.current,t=null!=o.current,i=!c||null!=s.current;return e&&t&&i},[]),S=(0,gs.useCallback)(()=>null==n.current&&null==o.current&&null==s.current,[]),k=(0,gs.useCallback)(()=>{if(S()&&(v.current=t.destroyBean(v.current)),!t.isDestroyed()&&x()){let i=e=>{let t=gb(l.current,a.current,m.current);t!==l.current&&(l.current=t,gy(e,()=>d(t)))};v.current=t.createBean(new aC(e)),v.current.setComp({setHorizontalScroll:e=>{n.current&&(n.current.scrollLeft=e)},setViewportHeight:e=>{n.current&&(n.current.style.height=e)},setRowCtrls:({rowCtrls:e,useFlushSync:t})=>{let r=!!t&&a.current.length>0&&e.length>0;a.current=e,i(r)},setSpannedRowCtrls:(e,t)=>{let i,r=!!t&&h.current.length>0&&e.length>0;h.current=e,(i=gb(p.current,h.current,m.current))!==p.current&&(p.current=i,gy(r,()=>g(i)))},setDomOrder:e=>{m.current!=e&&(m.current=e,i(!1))},setContainerWidth:e=>{o.current&&(o.current.style.width=e)},setOffsetTop:e=>{o.current&&(o.current.style.transform=`translateY(${e})`)}},o.current,s.current??void 0,n.current)}},[x,S]),R=(0,gs.useCallback)(e=>{o.current=e,k()},[k]),E=(0,gs.useCallback)(e=>{s.current=e,k()},[k]),P=(0,gs.useCallback)(e=>{n.current=e,k()},[k]),M=()=>gs.default.createElement("div",{className:b,ref:R,role:C?"presentation":"rowgroup"},u.map(e=>gs.default.createElement(g3,{rowCtrl:e,containerType:r.type,key:e.instanceId})));return C?gs.default.createElement("div",{className:y,ref:P,role:"rowgroup"},M(),c?gs.default.createElement("div",{className:w,ref:E,role:"presentation"},f.map(e=>gs.default.createElement(g3,{rowCtrl:e,containerType:r.type,key:e.instanceId}))):null):M()}),g8=(0,gs.memo)(()=>{let e=(0,gs.useContext)(gl),{context:t,overlays:i}=e,[r,n]=(0,gs.useState)(""),[o,s]=(0,gs.useState)(0),[a,l]=(0,gs.useState)(0),[u,d]=(0,gs.useState)("0px"),[c,h]=(0,gs.useState)("0px"),[p,f]=(0,gs.useState)("100%"),[g,m]=(0,gs.useState)("0px"),[v,y]=(0,gs.useState)("0px"),[b,w]=(0,gs.useState)("100%"),[C,x]=(0,gs.useState)(!0),[S,k]=(0,gs.useState)(!0),[R,E]=(0,gs.useState)(null),[P,M]=(0,gs.useState)(""),[D,T]=(0,gs.useState)(null),[O,_]=(0,gs.useState)("ag-layout-normal"),A=(0,gs.useRef)();A.current||(A.current=new r_(()=>F.current));let F=(0,gs.useRef)(null),I=(0,gs.useRef)(null),L=(0,gs.useRef)(null),N=(0,gs.useRef)(null),B=(0,gs.useRef)(null),V=(0,gs.useRef)(null),H=(0,gs.useRef)(null),z=(0,gs.useRef)([]),j=(0,gs.useRef)([]);gY(" AG Grid Body ",F),gY(" AG Pinned Top ",I),gY(" AG Sticky Top ",L),gY(" AG Middle ",V),gY(" AG Pinned Bottom ",H);let G=(0,gs.useCallback)(r=>{if(F.current=r,!r||t.isDestroyed()){for(let e of(z.current=t.destroyBeans(z.current),j.current))e();j.current=[];return}let o=(e,t)=>{e.appendChild(t),j.current.push(()=>t.remove())},a=(e,i,r)=>{let n;o(e,document.createComment(r)),o(e,(n=t.createBean(new i),z.current.push(n),n).getGui())};a(r,aE," AG Fake Horizontal Scroll ");let u=i?.getOverlayWrapperCompClass();u&&a(r,u," AG Overlay Wrapper "),B.current&&a(B.current,aM," AG Fake Vertical Scroll ");let c=t.createBean(new ax);z.current.push(c),c.setComp({setRowAnimationCssOnBodyViewport:n,setColumnCount:e=>{F.current&&eA(F.current,"colcount",e)},setRowCount:e=>{F.current&&eA(F.current,"rowcount",e)},setTopHeight:s,setBottomHeight:l,setStickyTopHeight:d,setStickyTopTop:h,setStickyTopWidth:f,setTopInvisible:x,setBottomInvisible:k,setColumnMovingCss:(e,t)=>A.current.toggleCss(e,t),updateLayoutClasses:_,setAlwaysVerticalScrollClass:E,setPinnedTopBottomOverflowY:M,setCellSelectableCss:(e,t)=>T(t?e:null),setBodyViewportWidth:e=>{V.current&&(V.current.style.width=e)},registerBodyViewportResizeListener:t=>{if(V.current){let i=tl(e,V.current,t);j.current.push(()=>i())}},setStickyBottomHeight:m,setStickyBottomBottom:y,setStickyBottomWidth:w,setGridRootRole:e=>r.setAttribute("role",e)},r,V.current,I.current,H.current,L.current,N.current)},[]),W=(0,gs.useMemo)(()=>gh("ag-root","ag-unselectable",O),[O]),U=(0,gs.useMemo)(()=>gh("ag-body-viewport",r,O,R,D),[r,O,R,D]),$=(0,gs.useMemo)(()=>gh("ag-body",O),[O]),q=(0,gs.useMemo)(()=>gh("ag-floating-top",C?"ag-invisible":null,D),[D,C]),K=(0,gs.useMemo)(()=>gh("ag-sticky-top",D),[D]),Q=(0,gs.useMemo)(()=>gh("ag-sticky-bottom","0px"===g?"ag-invisible":null,D),[D,g]),X=(0,gs.useMemo)(()=>gh("ag-floating-bottom",S?"ag-invisible":null,D),[D,S]),Y=(0,gs.useMemo)(()=>({height:o,minHeight:o,overflowY:P}),[o,P]),Z=(0,gs.useMemo)(()=>({height:u,top:c,width:p}),[u,c,p]),J=(0,gs.useMemo)(()=>({height:g,bottom:v,width:b}),[g,v,b]),ee=(0,gs.useMemo)(()=>({height:a,minHeight:a,overflowY:P}),[a,P]),et=e=>gs.default.createElement(g4,{name:e,key:`${e}-container`}),ei=({section:e,children:t,className:i,style:r})=>gs.default.createElement("div",{ref:e,className:i,role:"presentation",style:r},t.map(et));return gs.default.createElement("div",{ref:G,className:W},gs.default.createElement(gX,null),ei({section:I,className:q,style:Y,children:["topLeft","topCenter","topRight","topFullWidth"]}),gs.default.createElement("div",{className:$,ref:B,role:"presentation"},ei({section:V,className:U,children:["left","center","right","fullWidth"]})),ei({section:L,className:K,style:Z,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ei({section:N,className:Q,style:J,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ei({section:H,className:X,style:ee,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))}),g6=(0,gs.forwardRef)((e,t)=>{let{children:i,eFocusableElement:r,onTabKeyDown:n,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:s,isEmpty:a}=e,{context:l}=(0,gs.useContext)(gl),u=(0,gs.useRef)(null),d=(0,gs.useRef)(null),c=(0,gs.useRef)(),h=e=>{let t=null==e?void 0:parseInt(e,10).toString();for(let e of[u,d])void 0===t?e.current?.removeAttribute("tabindex"):e.current?.setAttribute("tabindex",t)};(0,gs.useImperativeHandle)(t,()=>({forceFocusOutOfContainer(e){c.current?.forceFocusOutOfContainer(e)}}));let p=(0,gs.useCallback)(()=>{let e=u.current,t=d.current;if(!e&&!t||l.isDestroyed()){c.current=l.destroyBean(c.current);return}e&&t&&(c.current=l.createBean(new lN({comp:{setTabIndex:h},eTopGuard:e,eBottomGuard:t,eFocusableElement:r,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:s,focusInnerElement:e=>o.focusInnerElement(e),isEmpty:a})))},[]),f=(0,gs.useCallback)(e=>{u.current=e,p()},[p]),g=(0,gs.useCallback)(e=>{d.current=e,p()},[p]),m=e=>gs.default.createElement("div",{className:`${nO} ${"top"===e?n_:nA}`,role:"presentation",ref:"top"===e?f:g});return gs.default.createElement(gs.default.Fragment,null,m("top"),i,m("bottom"))}),g7=(0,gs.memo)(g6),g9=(0,gs.memo)(({context:e})=>{let[t,i]=(0,gs.useState)(""),[r,n]=(0,gs.useState)(""),[o,s]=(0,gs.useState)(null),[a,l]=(0,gs.useState)(null),[u,d]=(0,gs.useState)(!1),[c,h]=(0,gs.useState)(),p=(0,gs.useRef)(),f=(0,gs.useRef)(null),g=(0,gs.useRef)(),[m,v]=(0,gs.useState)(null),y=(0,gs.useRef)(()=>void 0),b=(0,gs.useRef)(),w=(0,gs.useRef)([]),C=(0,gs.useCallback)(()=>void 0,[]);gY(" AG Grid ",f);let x=(0,gs.useCallback)(t=>{if(f.current=t,p.current=t?e.createBean(new lU):e.destroyBean(p.current),!t||e.isDestroyed())return;let r=p.current;y.current=r.focusInnerElement.bind(r),r.setComp({destroyGridUi:()=>{},setRtlClass:i,forceFocusOutOfContainer:e=>{!e&&b.current?.isDisplayed()?b.current.forceFocusOutOfContainer(e):g.current?.forceFocusOutOfContainer(e)},updateLayoutClasses:n,getFocusableContainers:()=>{let e=[],t=f.current?.querySelector(".ag-root");for(let i of(t&&e.push({getGui:()=>t}),w.current))i.isDisplayed()&&e.push(i);return e},setCursor:s,setUserSelect:l},t,t),d(!0)},[]);(0,gs.useEffect)(()=>{let t=p.current,i=f.current;if(!c||!t||!m||!i||e.isDestroyed())return;let r=[],{watermarkSelector:n,paginationSelector:o,sideBarSelector:s,statusBarSelector:a,gridHeaderDropZonesSelector:l}=t.getOptionalSelectors(),u=[];if(l){let t=e.createBean(new l.component),n=t.getGui();i.insertAdjacentElement("afterbegin",n),u.push(n),r.push(t)}if(s){let t=e.createBean(new s.component),i=t.getGui(),n=m.querySelector(".ag-tab-guard-bottom");n&&(n.insertAdjacentElement("beforebegin",i),u.push(i)),r.push(t),w.current.push(t)}let d=t=>{let n=e.createBean(new t),o=n.getGui();return i.insertAdjacentElement("beforeend",o),u.push(o),r.push(n),n};if(a&&d(a.component),o){let e=d(o.component);b.current=e,w.current.push(e)}return n&&d(n.component),()=>{for(let t of(e.destroyBeans(r),u))t.remove()}},[c,m,e]);let S=(0,gs.useMemo)(()=>gh("ag-root-wrapper",t,r),[t,r]),k=(0,gs.useMemo)(()=>gh("ag-root-wrapper-body","ag-focus-managed",r),[r]),R=(0,gs.useMemo)(()=>({userSelect:null!=a?a:"",WebkitUserSelect:null!=a?a:"",cursor:null!=o?o:""}),[a,o]),E=(0,gs.useCallback)(e=>{g.current=e,h(null!==e)},[]),P=(0,gs.useCallback)(()=>!p.current?.isFocusable(),[]);return gs.default.createElement("div",{ref:x,className:S,style:R,role:"presentation"},gs.default.createElement("div",{className:k,ref:v,role:"presentation"},u&&m&&!e.isDestroyed()&&gs.default.createElement(gl.Provider,{value:e.getBeans()},gs.default.createElement(g7,{ref:E,eFocusableElement:m,onTabKeyDown:C,gridCtrl:p.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:P},gs.default.createElement(g8,null)))))}),me=class extends tE{postConstruct(){if(this.beans.colAutosize){let e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){let e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(e=>e.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(e=>!!e.eGui))}},mt={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},mi=new Set(Object.keys({gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...mt})),mr=new Set(Object.keys(mt)),mn=e=>{let t=(0,gs.useRef)(),i=(0,gs.useRef)(null),r=(0,gs.useRef)(null),n=(0,gs.useRef)([]),o=(0,gs.useRef)([]),s=(0,gs.useRef)(e),a=(0,gs.useRef)(),l=(0,gs.useRef)(),u=(0,gs.useRef)(!1),[d,c]=(0,gs.useState)(void 0),[,h]=(0,gs.useState)(0),p=(0,gs.useRef)(),f=e=>{let t=i.current?.classList,r=(e="")=>e.trim().split(/\s+/g).filter(Boolean);if(p.current!==e){for(let e of r(p.current))t?.contains(e)&&t.remove(e);for(let i of r(e))t?.contains(i)||t?.add(i);p.current=e}};(0,gs.useLayoutEffect)(()=>{f(e.className)},[e.className]);let g=(0,gs.useCallback)(s=>{if(i.current=s,f(e.className),!s){for(let e of n.current)e();n.current.length=0;return}let d=e.modules||[];r.current||(r.current=new gG(()=>h(e=>e+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{r.current?.destroy(),r.current=null}));let p=function(e,t,i){"object"!=typeof e&&(e={});let r={...e};for(let e of i){let i=t[e];void 0!==i&&(r[e]=i)}return r}(e.gridOptions,e,Object.keys(e).filter(e=>!mi.has(e))),g=new ma(()=>{if(u.current){let e=()=>a.current?.shouldQueueUpdates()?void 0:o.current.shift(),t=e();for(;t;)t(),t=e()}});a.current=g;let m=new me,v={providedBeanInstances:{frameworkCompWrapper:new mo(r.current,p),renderStatus:m},modules:d,frameworkOverrides:g,setThemeOnGridDiv:!0},y=new ha;p.gridId??(p.gridId=l.current),t.current=y.create(s,p,i=>{c(i),i.createBean(m),n.current.push(()=>{i.destroy()}),i.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{n.current.push(e)}},()=>{if(i.isDestroyed())return;let r=t.current;r&&e.passGridApi?.(r)})},e=>{e.getBean("ctrlsSvc").whenReady({addDestroyFunc:e=>{n.current.push(e)}},()=>{for(let e of o.current)e();o.current.length=0,u.current=!0})},v),n.current.push(()=>{t.current=void 0}),t.current&&(l.current=t.current.getGridId())},[]),m=(0,gs.useMemo)(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),v=(0,gs.useCallback)(e=>{u.current&&!a.current?.shouldQueueUpdates()?e():o.current.push(e)},[]);(0,gs.useEffect)(()=>{let i=function(e,t){let i={};for(let r of Object.keys(t)){if(mi.has(r)){mr.has(r)&&t7(274,{prop:r});continue}let n=t[r];e[r]!==n&&(i[r]=n)}return i}(s.current,e);s.current=e,v(()=>{t.current&&function(e,t){if(!e)return;let i={},r=!1;for(let t of Object.keys(e))i[t]=e[t],r=!0;if(!r)return;t.dispatchEvent({type:"gridOptionsChanged",options:i});let n={type:"componentStateChanged",...i};t.dispatchEvent(n)}(i,t.current)})},[e]);let y=gs.default.useSyncExternalStore&&"legacy"!==iV(e,"renderingMode")?"default":"legacy";return gs.default.createElement("div",{style:m,ref:g},gs.default.createElement(gu.Provider,{value:y},d&&!d.isDestroyed()?gs.default.createElement(g9,{key:d.instanceId,context:d}):null,r.current?.getPortals()??null))},mo=class extends hp{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){let i=this.gridOptions;if(iV(i,"reactiveCustomComponents")){let r=(e=>{switch(e){case"filter":return iV(i,"enableFilterHandlers")?gA:g_;case"floatingFilterComponent":return iV(i,"enableFilterHandlers")?gN:gL;case"dateComponent":return gT;case"dragAndDropImageComponent":return gO;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return gD;case"statusPanel":return gH;case"toolPanel":return gz;case"menuItem":return gV;case"cellRenderer":return gM;case"innerHeaderComponent":return gB}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":gj()}let r=!t.cellRenderer&&"toolPanel"!==t.name;return new gR(e,this.parent,t,r)}},ms=(0,gs.forwardRef)((e,t)=>{let i=(0,gs.useContext)(gl),{registry:r,context:n,gos:o,rowModel:s}=i,[a,l]=(0,gs.useState)(()=>new gp),[u,d]=(0,gs.useState)(()=>new gp),[c,h]=(0,gs.useState)(),[p,f]=(0,gs.useState)(),g=(0,gs.useRef)(),m=(0,gs.useRef)(null),v=(0,gs.useRef)(),y=(0,gs.useMemo)(()=>{var t,i;let r;return t=e.api.getGridId(),i=c?.rowModelType??"clientSide",[...Object.values((r=t$[t]??{}).all??{}),...Object.values(r[i]??{})]},[e]),b=(0,gs.useMemo)(()=>a.toString()+" ag-details-row",[a]),w=(0,gs.useMemo)(()=>u.toString()+" ag-details-grid",[u]);t&&(0,gs.useImperativeHandle)(t,()=>({refresh:()=>g.current?.refresh()??!1})),e.template&&t7(230);let C=(0,gs.useCallback)(t=>{if(m.current=t,!t||n.isDestroyed()){g.current=n.destroyBean(g.current),v.current?.();return}let a=r.createDynamicBean("detailCellRendererCtrl",!0);if(a&&(n.createBean(a),a.init({toggleCss:(e,t)=>l(i=>i.setClass(e,t)),toggleDetailGridCss:(e,t)=>d(i=>i.setClass(e,t)),setDetailGrid:e=>h(e),setRowData:e=>f(e),getGui:()=>m.current},e),g.current=a,o.get("detailRowAutoHeight"))){let r=()=>{if(null==m.current)return;let t=m.current.clientHeight;null!=t&&t>0&&setTimeout(()=>{e.node.setRowHeight(t),(ir(o,s)||io(o,s))&&s.onRowHeightChanged()},0)};v.current=tl(i,t,r),r()}},[]),x=(0,gs.useCallback)(e=>{g.current?.registerDetailWithMaster(e)},[]);return gs.default.createElement("div",{className:b,ref:C},c&&gs.default.createElement(mn,{className:w,...c,modules:y,rowData:p,passGridApi:x}))}),ma=class extends lH{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:gw,agGroupRowRenderer:gw,agDetailCellRenderer:ms},this.wrapIncoming=(e,t)=>{if("ensureVisible"===t)return gv||setTimeout(()=>gv=!1,0),gv=!0,e();return e()}}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;let t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===gg}},ml=class extends gs.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{for(let t of(this.api=e,this.apiListeners))t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return gs.default.createElement(mn,{...this.props,passGridApi:this.setGridApi})}},mu=e.i(427938);let md='system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',mc=dr.withParams({backgroundColor:"#ffffff",headerBackgroundColor:"#f5f5f5",rowHoverColor:"#ffffff",borderColor:"#e0e0e0",foregroundColor:"#1e1e1e",fontFamily:"monospace",fontSize:13,headerFontFamily:md,headerFontSize:13,headerFontWeight:700,cellHorizontalPadding:8});function mh({emptyMessage:e}){return(0,R.jsx)(E.default,{sx:{display:"flex",height:"35px",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",textAlign:"center",gridColumn:"1/-1"},children:(0,R.jsx)(mu.default,{sx:{fontWeight:600},children:e??"No rows"})})}dr.withParams({backgroundColor:"#1e1e1e",headerBackgroundColor:"#252526",rowHoverColor:"#1e1e1e",borderColor:"#3c3c3c",foregroundColor:"#e0e0e0",fontFamily:"monospace",fontSize:13,headerFontFamily:md,headerFontSize:13,headerFontWeight:700,cellHorizontalPadding:8}),tY.registerModules([go]);let mp=(0,P.forwardRef)(function({style:e,className:t,columnDefs:i,rowData:r,columns:n,rows:o,getRowId:s,rowHeight:a=32,headerHeight:l=36,defaultColDef:u,defaultColumnOptions:d,renderers:c,...h},p){let f=(0,P.useMemo)(()=>mc,[]),g=i??n,m=u??d,v=(0,P.useMemo)(()=>({resizable:!0,suppressMovable:!0,...m}),[m]),y=(0,P.useMemo)(()=>{if(c?.noRowsFallback)return()=>c.noRowsFallback},[c?.noRowsFallback]),b=(0,P.useMemo)(()=>s||(e=>{let t=e.data;return t?.__rowKey!==void 0?String(t.__rowKey):String(e.data?.rowIndex??Math.random())}),[s]),w=(0,P.useMemo)(()=>{if(!g)return"grid";let e=g.filter(e=>"field"in e&&"left"===e.pinned).map(e=>e.field).sort().join(",");return`grid-${e}`},[g]);return(0,R.jsx)(E.default,{className:t?`${t} no-track-pii-safe`:"no-track-pii-safe",sx:{flex:1,minHeight:0,width:"100%",overflow:"hidden","& .ag-root-wrapper":{border:"none",height:"100%"},"& .ag-header":{borderBottom:"1px solid var(--ag-border-color)"},"& .ag-row":{borderBottom:"1px solid var(--ag-border-color)"},"& .ag-cell":{borderRight:"1px solid var(--ag-border-color)"},"& .ag-header-cell":{borderRight:"1px solid var(--ag-border-color)"},"& .diff-cell-added":{backgroundColor:"#cefece !important",color:"black"},"& .diff-cell-removed":{backgroundColor:"#ffc5c5 !important",color:"black"},"& .diff-cell-modified":{backgroundColor:"#ffc5c5 !important",color:"black"},"& .diff-header-added":{backgroundColor:"#15803d !important",color:"white"},"& .diff-header-removed":{backgroundColor:"#f43f5e !important",color:"white"},"& .index-column":{color:"rgb(128, 128, 128)",textAlign:"right"},"& .ag-pinned-left-cols-container .ag-cell":{backgroundColor:"#f5f5f5"}},children:(0,R.jsx)(ml,{theme:f,columnDefs:g,rowData:r??o,getRowId:b,rowHeight:a,headerHeight:l,defaultColDef:v,suppressCellFocus:!0,suppressRowHoverHighlight:!1,animateRows:!1,rowClass:"no-track-pii-safe",noRowsOverlayComponent:y,...h},w)})});e.s(["EmptyRowsRenderer",()=>mh,"ScreenshotDataGrid",0,mp],162234);var mf=e.i(76130);e.i(316575);var mg=e.i(7284),mm=e.i(778024),mv=e.i(578509),my=e.i(446547),mb=e.i(73205),mw=e.i(860223),mC=e.i(519273),mx=e.i(435983),mS=e.i(446519);function mk(e){return(0,mS.default)("MuiButtonGroup",e)}let mR=(0,mx.default)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","horizontal","vertical","colorPrimary","colorSecondary","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]);var mE=e.i(464870),mP=e.i(188556);let mM=(0,my.styled)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[{[`& .${mR.grouped}`]:t.grouped},{[`& .${mR.grouped}`]:t[`grouped${(0,mv.default)(i.orientation)}`]},{[`& .${mR.grouped}`]:t[`grouped${(0,mv.default)(i.variant)}`]},{[`& .${mR.grouped}`]:t[`grouped${(0,mv.default)(i.variant)}${(0,mv.default)(i.orientation)}`]},{[`& .${mR.grouped}`]:t[`grouped${(0,mv.default)(i.variant)}${(0,mv.default)(i.color)}`]},{[`& .${mR.firstButton}`]:t.firstButton},{[`& .${mR.lastButton}`]:t.lastButton},{[`& .${mR.middleButton}`]:t.middleButton},t.root,t[i.variant],!0===i.disableElevation&&t.disableElevation,i.fullWidth&&t.fullWidth,"vertical"===i.orientation&&t.vertical]}})((0,mb.default)(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{variant:"contained"},style:{boxShadow:(e.vars||e).shadows[2]}},{props:{disableElevation:!0},style:{boxShadow:"none"}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${mR.lastButton},& .${mR.middleButton}`]:{borderTopRightRadius:0,borderTopLeftRadius:0},[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}},{props:{orientation:"horizontal"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${mR.lastButton},& .${mR.middleButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},{props:{variant:"text",orientation:"horizontal"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderRight:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${mR.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"text",orientation:"vertical"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderBottom:e.vars?`1px solid ${e.alpha(e.vars.palette.common.onBackground,.23)}`:`1px solid ${"light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${mR.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter((0,mw.default)()).flatMap(([t])=>[{props:{variant:"text",color:t},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderColor:e.alpha((e.vars||e).palette[t].main,.5)}}}]),{props:{variant:"outlined",orientation:"horizontal"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderRightColor:"transparent","&:hover":{borderRightColor:"currentColor"}},[`& .${mR.lastButton},& .${mR.middleButton}`]:{marginLeft:-1}}},{props:{variant:"outlined",orientation:"vertical"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderBottomColor:"transparent","&:hover":{borderBottomColor:"currentColor"}},[`& .${mR.lastButton},& .${mR.middleButton}`]:{marginTop:-1}}},{props:{variant:"contained",orientation:"horizontal"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${mR.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},{props:{variant:"contained",orientation:"vertical"},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${mR.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}}}},...Object.entries(e.palette).filter((0,mw.default)(["dark"])).map(([t])=>({props:{variant:"contained",color:t},style:{[`& .${mR.firstButton},& .${mR.middleButton}`]:{borderColor:(e.vars||e).palette[t].dark}}}))],[`& .${mR.grouped}`]:{minWidth:40,boxShadow:"none",props:{variant:"contained"},style:{"&:hover":{boxShadow:"none"}}}}))),mD=P.forwardRef(function(e,t){let i=(0,mC.useDefaultProps)({props:e,name:"MuiButtonGroup"}),{children:r,className:n,color:o="primary",component:s="div",disabled:a=!1,disableElevation:l=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:c=!1,orientation:h="horizontal",size:p="medium",variant:f="outlined",...g}=i,m={...i,color:o,component:s,disabled:a,disableElevation:l,disableFocusRipple:u,disableRipple:d,fullWidth:c,orientation:h,size:p,variant:f},v=(e=>{let{classes:t,color:i,disabled:r,disableElevation:n,fullWidth:o,orientation:s,variant:a}=e,l={root:["root",a,s,o&&"fullWidth",n&&"disableElevation",`color${(0,mv.default)(i)}`],grouped:["grouped",`grouped${(0,mv.default)(s)}`,`grouped${(0,mv.default)(a)}`,`grouped${(0,mv.default)(a)}${(0,mv.default)(s)}`,`grouped${(0,mv.default)(a)}${(0,mv.default)(i)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,mm.default)(l,mk,t)})(m),y=P.useMemo(()=>({className:v.grouped,color:o,disabled:a,disableElevation:l,disableFocusRipple:u,disableRipple:d,fullWidth:c,size:p,variant:f}),[o,a,l,u,d,c,p,f,v.grouped]),b=P.Children.toArray(r).filter(e=>P.isValidElement(e)),w=b.length;return(0,R.jsx)(mM,{as:s,role:"group",className:(0,mg.default)(v.root,n),ref:t,ownerState:m,...g,children:(0,R.jsx)(mE.default.Provider,{value:y,children:b.map((e,t)=>{let i,r;return(0,R.jsx)(mP.default.Provider,{value:(i=0===t,r=t===w-1,i&&r?"":i?v.firstButton:r?v.lastButton:v.middleButton),children:e},t)})})})});var mT=e.i(285297);let mO=({value:e,onChange:t,textOn:i,textOff:r})=>(0,R.jsxs)(mD,{variant:"outlined",size:"xsmall",sx:{borderRadius:1},children:[(0,R.jsx)(mf.default,{onClick:()=>{t(!1)},sx:{color:e?"grey.400":"black",bgcolor:e?"grey.50":"white"},children:r??"Off"}),(0,R.jsx)(mf.default,{onClick:()=>{t(!0)},sx:{color:e?"black":"grey.400",bgcolor:e?"white":"grey.50"},children:i??"On"})]}),m_=({displayMode:e,onDisplayModeChanged:t})=>(0,R.jsxs)(R.Fragment,{children:["inline"===e&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(mT.DiffText,{value:"Base",colorPalette:"red",grayOut:!1,fontSize:"10pt",noCopy:!0}),(0,R.jsx)(mT.DiffText,{value:"Current",colorPalette:"green",grayOut:!1,fontSize:"10pt",noCopy:!0})]}),(0,R.jsx)(mO,{value:"side_by_side"===e,onChange:e=>{t(e?"side_by_side":"inline")},textOff:"Inline",textOn:"Side by side"})]});e.s(["DiffDisplayModeSwitch",0,m_],543482);var mA=e.i(228337);let mF=({warnings:e,children:t})=>(0,R.jsxs)(E.default,{sx:{display:"flex",borderBottom:"1px solid lightgray",justifyContent:"flex-end",gap:"5px",alignItems:"center",px:"10px",bgcolor:e&&e.length>0?"amber.100":"inherit"},children:[(0,R.jsx)(E.default,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:0},children:e?.map(e=>(0,R.jsxs)(E.default,{children:[(0,R.jsx)(Y.PiWarning,{color:"amber.600"})," ",e]},mA.default.uniqueId(`-${e}`)))}),(0,R.jsx)(E.default,{sx:{flex:1,minHeight:"32px"}}),t]});e.s(["RunToolbar",0,mF],412103);let mI=(0,P.forwardRef)(({run:e,viewOptions:t,onViewOptionsChanged:i},r)=>{if(!(0,M.isProfileDiffRun)(e))throw Error("Only run type profile_diff is supported");let n=(0,P.useMemo)(()=>t?.pinned_columns??[],[t]),o=(0,P.useMemo)(()=>t?.display_mode??"inline",[t]),s=(0,P.useMemo)(()=>({distinct_proportion:"percent",not_null_proportion:"percent",...t?.columnsRenderMode}),[t]),a=(0,P.useMemo)(()=>ep(e,{pinnedColumns:n,onPinnedColumnsChange:e=>{i&&i({...t,pinned_columns:e})},displayMode:o,columnsRenderMode:s,onColumnsRenderModeChanged:e=>{let r={...t?.columnsRenderMode??{},...e};i&&i({...t,columnsRenderMode:r})}})??{columns:[],rows:[]},[e,n,o,t,i,s]);return 0===a.columns.length?(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No data"}):(0,R.jsxs)(E.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,R.jsx)(mF,{run:e,children:(0,R.jsx)(m_,{displayMode:o,onDisplayModeChanged:e=>{i&&i({...t,display_mode:e})}})}),(0,R.jsx)(mp,{ref:r,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:a.columns,rows:a.rows,defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})]})}),mL=(0,P.forwardRef)(({run:e,viewOptions:t,onViewOptionsChanged:i},r)=>{if(!(0,M.isProfileRun)(e))throw Error("Only run type profile_diff is supported");let n=(0,P.useMemo)(()=>t?.pinned_columns??[],[t]),o=(0,P.useMemo)(()=>({distinct_proportion:"percent",not_null_proportion:"percent",...t?.columnsRenderMode}),[t]),s=(0,P.useMemo)(()=>ep(e,{pinnedColumns:n,onPinnedColumnsChange:e=>{i&&i({...t,pinned_columns:e})},columnsRenderMode:o,onColumnsRenderModeChanged:e=>{let r={...t?.columnsRenderMode??{},...e};i&&i({...t,columnsRenderMode:r})}})??{columns:[],rows:[]},[e,n,t,i,o]);return 0===s.columns.length?(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No data"}):(0,R.jsx)(E.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:(0,R.jsx)(mp,{ref:r,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:s.columns,rows:s.rows,defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})})});e.s(["QueryDiffResultView",()=>mj],64485);var mN=e.i(562903),mB=e.i(233799);let mV=({changedOnly:e,onChange:t})=>(0,R.jsx)(mB.default,{control:(0,R.jsx)(mN.default,{checked:e??!1,onChange:()=>{t()},size:"small"}),label:"Changed only",slotProps:{typography:{variant:"body2"}}});e.s(["ChangedOnlyCheckbox",0,mV],51297);let mH=(0,P.forwardRef)(({run:e,onAddToChecklist:t,viewOptions:i,onViewOptionsChanged:r,baseTitle:n,currentTitle:o},s)=>{let a=(0,P.useMemo)(()=>i?.primary_keys??[],[i]),l=(0,P.useMemo)(()=>i?.changed_only??!1,[i]),u=(0,P.useMemo)(()=>i?.pinned_columns??[],[i]),d=(0,P.useMemo)(()=>i?.display_mode??"inline",[i]),c=(0,P.useMemo)(()=>i?.columnsRenderMode??{},[i]);if("query_diff"!==e.type)throw Error("QueryDiffResult view should be rendered as query_diff");let h=(0,P.useMemo)(()=>ep(e,{changedOnly:l,onPrimaryKeyChange:e=>{r&&r({...i,primary_keys:e})},pinnedColumns:u,onPinnedColumnsChange:e=>{r&&r({...i,pinned_columns:e})},columnsRenderMode:c,onColumnsRenderModeChanged:e=>{let t={...i?.columnsRenderMode??{},...e};r&&r({...i,columnsRenderMode:t})},baseTitle:n,currentTitle:o,displayMode:d})??{columns:[],rows:[]},[e,i,l,u,d,r,n,o,c]),p=(0,P.useMemo)(()=>{let e=a.join(", ");return h.invalidPKeyBase&&h.invalidPKeyCurrent?`Warning: The primary key '${e}' is not unique in the base and current environments`:h.invalidPKeyBase?`Warning: The primary key '${e}' is not unique in the base environment`:h.invalidPKeyCurrent?`Warning: The primary key '${e}' is not unique in the current environment`:void 0},[h.invalidPKeyBase,h.invalidPKeyCurrent,a]),f=e.result?.current?.limit??0,g=f>0&&(e.result?.current?.more||e.result?.base?.more)?`Warning: Displayed results are limited to ${f.toLocaleString()} records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set.`:null,m=[];return(p&&m.push(p),g&&m.push(g),0===h.columns.length)?(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No data"}):(0,R.jsxs)(E.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,R.jsxs)(mF,{run:e,viewOptions:i,onViewOptionsChanged:r,warnings:m,children:[(0,R.jsx)(m_,{displayMode:d,onDisplayModeChanged:e=>{r&&r({...i,display_mode:e})}}),(0,R.jsx)(mV,{changedOnly:i?.changed_only,onChange:()=>{let e=!i?.changed_only;r&&r({...i,changed_only:e})}})]}),(0,R.jsx)(mp,{ref:s,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:h.columns,rows:h.rows,renderers:{noRowsFallback:(0,R.jsx)(mh,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})]})}),mz=(0,P.forwardRef)(({run:e,viewOptions:t,onViewOptionsChanged:i,baseTitle:r,currentTitle:n},o)=>{if("query_diff"!==e.type)throw Error("QueryDiffResult view should be rendered as query_diff");let s=(0,P.useMemo)(()=>t?.changed_only??!1,[t]),a=(0,P.useMemo)(()=>t?.pinned_columns??[],[t]),l=(0,P.useMemo)(()=>t?.display_mode??"inline",[t]),u=(0,P.useMemo)(()=>t?.columnsRenderMode??{},[t]),d=(0,P.useMemo)(()=>ep(e,{changedOnly:s,pinnedColumns:a,onPinnedColumnsChange:e=>{i&&i({...t,pinned_columns:e})},baseTitle:r,currentTitle:n,displayMode:l,columnsRenderMode:u,onColumnsRenderModeChanged:e=>{let r={...t?.columnsRenderMode??{},...e};i&&i({...t,columnsRenderMode:r})}})??{columns:[],rows:[]},[e,t,s,a,l,i,r,n,u]),c=e.result?.diff?.limit??0,h=c>0&&e.result?.diff?.more?`Warning: Displayed results are limited to ${c.toLocaleString()} records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set.`:null,p=[];return(h&&p.push(h),0===d.columns.length)?(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No data"}):s&&0===d.rows.length?(0,R.jsxs)(E.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,R.jsx)(mF,{run:e,viewOptions:t,onViewOptionsChanged:i,warnings:p}),(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No change"})]}):(0,R.jsxs)(E.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,R.jsxs)(mF,{run:e,viewOptions:t,onViewOptionsChanged:i,warnings:p,children:[(0,R.jsx)(m_,{displayMode:l,onDisplayModeChanged:e=>{i&&i({...t,display_mode:e})}}),(0,R.jsx)(mV,{changedOnly:t?.changed_only,onChange:()=>{let e=!t?.changed_only;i&&i({...t,changed_only:e})}})]}),(0,R.jsx)(mp,{ref:o,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:d.columns,rows:d.rows,renderers:{noRowsFallback:(0,R.jsx)(mh,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})]})}),mj=(0,P.forwardRef)((e,t)=>{let i,r;return(e.run.params&&e.run.params.current_model&&(i="Original",r="Editor"),e.run.result&&"diff"in e.run.result&&null!=e.run.result.diff)?(0,R.jsx)(mz,{...e,ref:t,baseTitle:i,currentTitle:r}):(0,R.jsx)(mH,{...e,ref:t,baseTitle:i,currentTitle:r})});e.s(["QueryResultView",()=>mW],862031);var mG=e.i(336277);let mW=(0,P.forwardRef)(({run:e,viewOptions:t,onViewOptionsChanged:i,onAddToChecklist:r},n)=>{if(!((0,M.isQueryRun)(e)||(0,M.isQueryBaseRun)(e)))throw Error("run type must be query");let o=(0,P.useMemo)(()=>t?.pinned_columns??[],[t]),s=(0,P.useMemo)(()=>t?.columnsRenderMode??{},[t]),a=e.result,l=(0,P.useMemo)(()=>ep(e,{pinnedColumns:o,onPinnedColumnsChange:e=>{i&&i({...t,pinned_columns:e})},columnsRenderMode:s,onColumnsRenderModeChanged:e=>{let r={...t?.columnsRenderMode??{},...e};i&&i({...t,columnsRenderMode:r})}})??{columns:[],rows:[]},[e,o,t,i,s]);if(0===l.columns.length)return(0,R.jsx)(E.default,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:"No data"});let u=a?a.limit??0:0,d=u>0&&a?.more?`Warning: Displayed results are limited to ${u.toLocaleString()} records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set.`:null,c=r??d;return(0,R.jsxs)(mG.default,{sx:{bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[c&&(0,R.jsxs)(mG.default,{direction:"row",sx:{borderBottom:"1px solid lightgray",alignItems:"center",gap:"5px",px:"10px",bgcolor:d?"amber.100":"inherit"},children:[d&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(E.default,{component:Y.PiWarning,sx:{color:"amber.600",alignSelf:"center"}})," ",(0,R.jsx)(E.default,{children:d})]}),(0,R.jsx)(E.default,{sx:{flexGrow:1,minHeight:"32px"}}),r&&(0,R.jsx)(mf.default,{sx:{my:"5px"},size:"small",color:"iochmara",variant:"contained",onClick:()=>{r(e)},children:"Add to Checklist"})]}),(0,R.jsx)(mp,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:l.columns,rows:l.rows,renderers:{noRowsFallback:(0,R.jsx)(mh,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})]})});e.s(["RowCountDiffResultView",()=>m$,"RowCountResultView",()=>mq],522430);let mU=(0,P.forwardRef)(function({run:e,typeGuard:t,expectedType:i},r){if(!t(e))throw Error(`Run type must be ${i}`);let n=(0,P.useMemo)(()=>ep(e)??{columns:[],rows:[]},[e]);return 0===n.rows.length?(0,R.jsx)(E.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgb(249,249,249)",height:"100%"},children:"No nodes matched"}):(0,R.jsx)(E.default,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:(0,R.jsx)(mp,{ref:r,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",fontSize:"0.875rem",borderWidth:1},columns:n.columns,rows:n.rows,renderers:{noRowsFallback:(0,R.jsx)(mh,{})},className:"rdg-light"})})}),m$=(0,P.forwardRef)(function({run:e},t){return(0,R.jsx)(mU,{ref:t,run:e,typeGuard:M.isRowCountDiffRun,expectedType:"row_count_diff"})}),mq=(0,P.forwardRef)(function({run:e},t){return(0,R.jsx)(mU,{ref:t,run:e,typeGuard:M.isRowCountRun,expectedType:"row_count"})});var mK=e.i(992089),mQ=e.i(384339),mX=e.i(320182),mY=e.i(400905);function mZ({params:e,onParamsChanged:t,setIsReadyToExecute:i}){let{columns:r,isLoading:n,error:o}=(0,mY.default)(e.model),s=r.map(e=>e.name);return((0,P.useEffect)(()=>{i(!!e.column_name)},[e,i]),n)?(0,R.jsx)(E.default,{children:"Loading..."}):0===s.length||o?(0,R.jsx)(E.default,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,R.jsx)(E.default,{sx:{m:"16px"},children:(0,R.jsxs)(mK.default,{fullWidth:!0,children:[(0,R.jsx)(mQ.default,{sx:{mb:1},children:"Pick a column to show top-k"}),(0,R.jsxs)(mX.default,{value:e.column_name,onChange:i=>{let r=i.target.value;t({...e,column_name:r})},children:[(0,R.jsx)("option",{value:"",children:"Select column"}),s.map(e=>(0,R.jsx)("option",{value:e,className:"no-track-pii-safe",children:e},e))]})]})})}e.s(["TopKDiffForm",()=>mZ],940159)},610985,e=>{"use strict";var t=e.i(187725),i=e.i(7284),r=e.i(778024),n=e.i(446547),o=e.i(73205),s=e.i(519273),a=e.i(332397),l=e.i(19483);let u=(0,n.styled)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.absolute&&t.absolute,t[i.variant],i.light&&t.light,"vertical"===i.orientation&&t.vertical,i.flexItem&&t.flexItem,i.children&&t.withChildren,i.children&&"vertical"===i.orientation&&t.withChildrenVertical,"right"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignRight,"left"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignLeft]}})((0,o.default)(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.alpha((e.vars||e).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&"vertical"!==e.orientation,style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>"vertical"===e.orientation&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>"right"===e.textAlign&&"vertical"!==e.orientation,style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>"left"===e.textAlign&&"vertical"!==e.orientation,style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),d=(0,n.styled)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.wrapper,"vertical"===i.orientation&&t.wrapperVertical]}})((0,o.default)(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),c=t.forwardRef(function(e,t){let n=(0,s.useDefaultProps)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:c,className:h,orientation:p="horizontal",component:f=c||"vertical"===p?"div":"hr",flexItem:g=!1,light:m=!1,role:v="hr"!==f?"separator":void 0,textAlign:y="center",variant:b="fullWidth",...w}=n,C={...n,absolute:o,component:f,flexItem:g,light:m,orientation:p,role:v,textAlign:y,variant:b},x=(e=>{let{absolute:t,children:i,classes:n,flexItem:o,light:s,orientation:l,textAlign:u,variant:d}=e;return(0,r.default)({root:["root",t&&"absolute",d,s&&"light","vertical"===l&&"vertical",o&&"flexItem",i&&"withChildren",i&&"vertical"===l&&"withChildrenVertical","right"===u&&"vertical"!==l&&"textAlignRight","left"===u&&"vertical"!==l&&"textAlignLeft"],wrapper:["wrapper","vertical"===l&&"wrapperVertical"]},a.getDividerUtilityClass,n)})(C);return(0,l.jsx)(u,{as:f,className:(0,i.default)(x.root,h),role:v,ref:t,ownerState:C,"aria-orientation":"separator"===v&&("hr"!==f||"vertical"===p)?p:void 0,...w,children:c?(0,l.jsx)(d,{className:x.wrapper,ownerState:C,children:c}):null})});c&&(c.muiSkipListHighlight=!0),e.s(["default",0,c])},372230,49931,e=>{"use strict";e.s(["findByRunType",()=>q,"runTypeHasRef",()=>U],372230);var t=e.i(901407),i=e.i(897716),r=e.i(21292),n=e.i(645364),o=e.i(353406),s=e.i(909411),a=e.i(757980),l=e.i(64485),u=e.i(862031),d=e.i(522430),c=e.i(940159),h=e.i(19483),p=e.i(324066),f=e.i(939338),g=e.i(336277),m=e.i(427938),v=e.i(187725),y=e.i(610985),b=e.i(197068),w=e.i(573478),C=e.i(520584),x=e.i(122429),S=e.i(665521);let k="#63B3ED";function R(e,t){let i=t?10:e.counts.length,r=e.counts.slice(0,i),n=e.valids-r.reduce((e,t)=>e+t,0);return e.values.slice(0,i).concat([n]).map((t,i)=>{let o,s=i===r.length,a=s?n:r[i],l=!1;return s?(o="(others)",l=!0):null==t?(o="(null)",l=!0):"string"==typeof t&&0===t.length?(o="(empty)",l=!0):o=String(t),{isLastItemOthers:s,isSpecialLabel:l,label:o,count:a,displayCount:(0,x.formatAsAbbreviatedNumber)(a),displayRatio:(0,x.formatIntervalMinMax)(a/e.valids)??"N/A"}})}function E({base:e,current:t,children:i}){return(0,h.jsx)(b.default,{title:(0,h.jsxs)(p.default,{children:[(0,h.jsxs)(m.default,{children:[(0,h.jsx)(S.SquareIcon,{color:S.CURRENT_BAR_COLOR}),"Current: ",t.count," (",t.displayRatio,")"]}),(0,h.jsxs)(m.default,{children:[(0,h.jsx)(S.SquareIcon,{color:S.BASE_BAR_COLOR}),"Base: ",e.count," (",e.displayRatio,")"]})]}),arrow:!0,children:(0,h.jsx)("span",{children:i})})}function P({topKDiff:e,isDisplayTopTen:t}){let i=R(e.current,t),r=R(e.base,t);return(0,h.jsxs)(p.default,{sx:{width:"100%",px:20,py:2},children:[(0,h.jsxs)(p.default,{sx:{display:"flex",alignItems:"center",flexDirection:"row"},children:[(0,h.jsx)(p.default,{sx:{flex:1}}),(0,h.jsxs)(m.default,{component:"h3",sx:{fontSize:"0.875rem",p:1,color:"gray"},children:[(0,h.jsx)(S.SquareIcon,{color:S.BASE_BAR_COLOR})," Base"]}),(0,h.jsxs)(m.default,{component:"h3",sx:{fontSize:"0.875rem",p:1,color:"gray"},children:[(0,h.jsx)(S.SquareIcon,{color:S.CURRENT_BAR_COLOR})," Current"]}),(0,h.jsx)(p.default,{sx:{flex:1}})]}),i.map((t,i)=>{let n=r[i];return t.isLastItemOthers&&0===t.count&&0===n.count?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)(v.Fragment,{children:[(0,h.jsx)(E,{base:n,current:t,children:(0,h.jsxs)(p.default,{sx:{display:"flex",alignItems:"center",width:"100%","&:hover":{bgcolor:"action.hover"},px:2},children:[(0,h.jsx)(m.default,{sx:{width:"10em",fontSize:"0.875rem",color:t.isSpecialLabel?"grey.400":"inherit",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.label}),(0,h.jsxs)(p.default,{sx:{display:"flex",width:"70%",flexDirection:"column"},children:[(0,h.jsxs)(p.default,{sx:{display:"flex",height:"1em"},children:[(0,h.jsx)(M,{topkCount:t.count,topkLabel:t.label,valids:e.current.valids,color:S.CURRENT_BAR_COLOR}),(0,h.jsx)(m.default,{sx:{ml:2.5,mr:1,fontSize:"0.875rem",width:"6em"},children:t.displayCount}),(0,h.jsx)(m.default,{sx:{color:"grey.400",fontSize:"0.875rem",width:"4em"},children:t.displayRatio})]}),(0,h.jsxs)(p.default,{sx:{display:"flex",height:"1em"},children:[(0,h.jsx)(M,{topkCount:n.count,topkLabel:n.label,valids:e.base.valids,color:S.BASE_BAR_COLOR}),(0,h.jsx)(m.default,{sx:{ml:2.5,mr:1,fontSize:"0.875rem",width:"6em"},children:n.displayCount}),(0,h.jsx)(m.default,{sx:{color:"grey.400",fontSize:"0.875rem",width:"4em"},children:n.displayRatio})]})]})]})}),(0,h.jsx)(y.default,{})]},t.label)})]})}function M({topkCount:e,topkLabel:t,valids:i,animation:r=!1,color:n=k}){w.Chart.register(w.CategoryScale,w.BarElement,w.LinearScale);let o=function(e,t,{...i}={}){return{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{display:!1,max:t,grid:{display:!1}},y:{display:!1}},plugins:{tooltip:{enabled:!1}},...i}}(0,i,{animation:r}),s=function({topkLabel:e,topkCount:t,color:i=k}){return{labels:[e],datasets:[{indexAxis:"y",data:[t],backgroundColor:i,hoverBackgroundColor:i,borderWidth:0,borderColor:i,barPercentage:1,categoryPercentage:.6}]}}({topkCount:e,topkLabel:t,color:n});return(0,h.jsx)(C.Bar,{data:s,options:o,plugins:[]})}var D=e.i(660844);let T=(0,v.forwardRef)(({run:e},t)=>{let[i,r]=(0,v.useState)(!0),n=e.result,o=e.params,s=n.base,a=n.current;return(0,h.jsxs)(p.default,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,h.jsxs)(D.ScreenshotBox,{ref:t,blockSize:"auto",children:[(0,h.jsxs)(m.default,{variant:"h5",sx:{pt:4,textAlign:"center",color:"grey.600"},children:["Model ",o.model,".",o.column_name]}),(0,h.jsxs)(g.default,{direction:"row",alignItems:"center",children:[(0,h.jsx)(p.default,{sx:{flex:1}}),(0,h.jsx)(P,{topKDiff:n,valids:a.valids||0,isDisplayTopTen:i}),(0,h.jsx)(p.default,{sx:{flex:1}})]})]}),(0,h.jsx)(p.default,{sx:{flex:1}}),(s.values.length>10||a.values.length>10)&&(0,h.jsx)(p.default,{sx:{display:"flex",p:5,justifyContent:"start"},children:(0,h.jsx)(f.default,{component:"button",onClick:()=>{r(e=>!e)},sx:{color:"iochmara.main",cursor:"pointer"},children:i?"View More Items":"View Only Top-10"})})]})});var O=e.i(862754),_=e.i(716396),A=e.i(162234),F=e.i(51297),I=e.i(543482),L=e.i(412103);let N=(0,v.forwardRef)(({run:e,onAddToChecklist:t,viewOptions:i,onViewOptionsChanged:r},n)=>{if(!(0,O.isValueDiffDetailRun)(e))throw Error("run type must be value_diff_detail");let o=(0,v.useMemo)(()=>i?.changed_only??!1,[i]),s=(0,v.useMemo)(()=>i?.pinned_columns??[],[i]),a=(0,v.useMemo)(()=>i?.display_mode??"inline",[i]),l=(0,v.useMemo)(()=>i?.columnsRenderMode??{},[i]),u=(0,v.useMemo)(()=>(0,_.createDataGrid)(e,{changedOnly:o,pinnedColumns:s,onPinnedColumnsChange:e=>{r&&r({...i,pinned_columns:e})},columnsRenderMode:l,onColumnsRenderModeChanged:e=>{let t={...i?.columnsRenderMode??{},...e};r&&r({...i,columnsRenderMode:t})},displayMode:a})??{columns:[],rows:[]},[e,i,o,s,a,r,l]),d=e.result?.limit??0,c=d>0&&e.result?.more?`Warning: Displayed results are limited to ${d.toLocaleString()} records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set.`:null,f=[];return(c&&f.push(c),0===u.columns.length)?(0,h.jsx)(p.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No data"}):o&&0===u.rows.length?(0,h.jsxs)(p.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,h.jsx)(L.RunToolbar,{run:e,viewOptions:i,onViewOptionsChanged:r,warnings:f}),(0,h.jsx)(p.default,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:"No change"})]}):(0,h.jsxs)(p.default,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgb(249, 249, 249)",height:"100%"},children:[(0,h.jsxs)(L.RunToolbar,{run:e,viewOptions:i,onViewOptionsChanged:r,warnings:f,children:[(0,h.jsx)(I.DiffDisplayModeSwitch,{displayMode:a,onDisplayModeChanged:e=>{r&&r({...i,display_mode:e})}}),(0,h.jsx)(F.ChangedOnlyCheckbox,{changedOnly:i?.changed_only,onChange:()=>{let e=!i?.changed_only;r&&r({...i,changed_only:e})}})]}),(0,h.jsx)(A.ScreenshotDataGrid,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:u.columns,rows:u.rows,renderers:{noRowsFallback:(0,h.jsx)(A.EmptyRowsRenderer,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light"})]})});var B=e.i(562903),V=e.i(233799),H=e.i(664766),z=e.i(497647),j=e.i(400905);function G({params:e,onParamsChanged:t,setIsReadyToExecute:i}){let[r,n]=(0,v.useState)(!e.columns||0===e.columns.length),o=e.model,s=e.primary_key,{columns:a,primaryKey:l,isLoading:u,error:d}=(0,j.default)(e.model);(0,v.useEffect)(()=>{!s&&l&&t({...e,primary_key:l})},[s,l,e,t]),(0,v.useEffect)(()=>{i(!!(s&&o))},[s,o,i]);let c=a.map(e=>e.name),f=Array.isArray(s)?s:s?[s]:void 0;return u?(0,h.jsx)(p.default,{children:"Loading..."}):0===c.length||d?(0,h.jsx)(p.default,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,h.jsxs)(g.default,{spacing:5,sx:{m:"8px 24px",pb:"200px"},children:[(0,h.jsxs)(p.default,{children:[(0,h.jsx)(m.default,{variant:"body2",sx:{mb:1},children:"Model"}),(0,h.jsx)(H.default,{fullWidth:!0,size:"small",value:e.model,slotProps:{input:{readOnly:!0}}})]}),(0,h.jsxs)(p.default,{children:[(0,h.jsx)(m.default,{variant:"body2",sx:{mb:1},children:"Primary key"}),(0,h.jsx)(z.default,{placeholder:"Select primary key",className:"no-track-pii-safe",isMulti:!0,closeMenuOnSelect:!1,options:c.map(e=>({label:e,value:e})),value:(f??[]).filter(e=>void 0!==e).map(e=>({label:e,value:e})),onChange:i=>{let r=Array.isArray(i)?i:[];t({...e,primary_key:1==r.length?r[0].value:r.map(e=>e.value)})},styles:{container:e=>({...e,width:"100%"}),control:e=>({...e,minHeight:"40px"})}})]}),(0,h.jsxs)(p.default,{children:[(0,h.jsx)(m.default,{variant:"body2",sx:{mb:1},children:"Columns"}),(0,h.jsx)(V.default,{control:(0,h.jsx)(B.default,{checked:r,onChange:i=>{n(i.target.checked),t({...e,columns:void 0})},size:"small"}),label:"All columns",sx:{mb:"10px"}}),!r&&(0,h.jsx)(z.default,{isMulti:!0,className:"no-track-pii-safe",closeMenuOnSelect:!1,options:c.map(e=>({label:e,value:e})),value:(e.columns??[]).map(e=>({label:e,value:e})),onChange:i=>{let r,n=Array.isArray(i)?i.map(e=>e.value):[];r=0===n.length?void 0:n,t({...e,columns:r})},styles:{container:e=>({...e,width:"100%"}),control:e=>({...e,minHeight:"40px"})}})]})]})}e.s([],49931),e.i(913599),e.i(830055),e.i(490395),e.i(603634);let W=(0,v.forwardRef)(function({run:e},t){if(!(0,O.isValueDiffRun)(e))throw Error("Run type must be value_diff");let i=e.result,r=e.params,n=(0,_.createDataGrid)(e);if(!n)return null;let{columns:o,rows:s}=n;return(0,h.jsxs)(p.default,{sx:{display:"flex",flexDirection:"column",gap:"5px",pt:"5px",height:"100%"},children:[(0,h.jsxs)(p.default,{sx:{px:"16px"},children:["Model: ",r.model,", ",i.summary.total," total (",i.summary.total-i.summary.added-i.summary.removed," ","common, ",i.summary.added," added, ",i.summary.removed," removed)"]}),(0,h.jsx)(A.ScreenshotDataGrid,{ref:t,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",borderBlock:"1px solid lightgray"},columns:o,rows:s,renderers:{noRowsFallback:(0,h.jsx)(A.EmptyRowsRenderer,{})},defaultColumnOptions:{resizable:!0},className:"rdg-light"})]})});function U(e){return["query","query_base","query_diff","row_count","row_count_diff","profile","profile_diff","value_diff","value_diff_detail","top_k_diff","histogram_diff"].includes(e)}let $={lineage_diff:{title:"Lineage Diff",icon:r.TbBrandStackshare},schema_diff:{title:"Schema Diff",icon:i.MdSchema},query:{title:"Query",icon:r.TbSql,RunResultView:u.QueryResultView},query_base:{title:"Query Base",icon:r.TbSql,RunResultView:u.QueryResultView},query_diff:{title:"Query Diff",icon:r.TbSql,RunResultView:l.QueryDiffResultView},row_count:{title:"Row Count",icon:i.MdFormatListNumberedRtl,RunResultView:d.RowCountResultView},row_count_diff:{title:"Row Count Diff",icon:i.MdFormatListNumberedRtl,RunResultView:d.RowCountDiffResultView},profile:{title:"Profile",icon:r.TbEyeSearch,RunResultView:a.ProfileResultView,RunForm:s.ProfileDiffForm},profile_diff:{title:"Profile Diff",icon:r.TbEyeSearch,RunResultView:a.ProfileDiffResultView,RunForm:s.ProfileDiffForm},value_diff:{title:"Value Diff",icon:r.TbAlignBoxLeftStretch,RunResultView:W,RunForm:G},value_diff_detail:{title:"Value Diff Detail",icon:r.TbAlignBoxLeftStretch,RunResultView:N,RunForm:G},top_k_diff:{title:"Top-K Diff",icon:t.LuChartBarBig,RunResultView:T,RunForm:c.TopKDiffForm},histogram_diff:{title:"Histogram Diff",icon:r.TbChartHistogram,RunResultView:o.HistogramDiffResultView,RunForm:n.HistogramDiffForm},sandbox:{title:"Sandbox",icon:r.TbEyeEdit},simple:{title:"Simple",icon:r.TbEyeEdit}},q=e=>$[e]},505251,e=>{"use strict";var t=e.i(659004),i=e.i(187725);function r(){let e=(0,t.useRouter)();return[(0,t.usePathname)(),(0,i.useCallback)((t,i)=>{i?.replace?e.replace(t,{scroll:i?.scroll??!0}):e.push(t,{scroll:i?.scroll??!0})},[e])]}e.s(["useAppLocation",()=>r])},29134,e=>{"use strict";e.s(["RecceActionContextProvider",()=>h,"useRecceActionContext",()=>p]);var t=e.i(19483),i=e.i(63257),r=e.i(659004),n=e.i(187725),o=e.i(976452),s=e.i(372230),a=e.i(377855),l=e.i(505251),u=e.i(407101),d=e.i(461566);let c=(0,n.createContext)({runAction:()=>{},showRunId:e=>{},isRunResultOpen:!1,closeRunResult:()=>{},isHistoryOpen:!1,closeHistory:()=>{},showHistory:()=>{},setHistoryOpen:e=>{},clearRunResult:()=>{}});function h({children:e}){let h,[p,f]=(0,n.useState)(),[g,m]=(0,n.useState)(!1),v=(0,n.useCallback)(()=>m(!0),[]),y=(0,n.useCallback)(()=>m(!1),[]),[b,w]=(0,n.useState)(!1),C=(0,n.useCallback)(()=>w(!0),[]),x=(0,n.useCallback)(()=>w(!1),[]),[S,k]=(0,n.useState)(!1),R=(0,n.useCallback)(()=>k(!0),[]),E=(0,n.useCallback)(()=>k(!1),[]),[P,M]=(0,n.useState)(),[D,T]=(0,l.useAppLocation)(),O=(0,i.useQueryClient)(),_=(0,n.useCallback)(async(e,t)=>{M(e),C(),!1!==t&&await O.invalidateQueries({queryKey:u.cacheKeys.runs()})},[C,O]),A=(0,n.useCallback)(()=>{M(void 0),x()},[x]),F=(0,n.useCallback)(async(e,t,i)=>{try{let r,n=new Date().getTime().toString();if(i?.showLast){let i=await (0,d.searchRuns)(e,t,1);1===i.length&&(r=i[0])}let o=(0,s.findByRunType)(e),a=o.RunResultView,{title:l,RunForm:c}=o;if(void 0===a)throw Error(`Run type ${e} does not have a result view`);if(void 0!=c&&i?.showForm)f({session:n,title:l,type:e,params:t,lastRun:r,options:i,RunForm:c}),v();else{let{run_id:r}=await (0,d.submitRun)(e,t,{nowait:!0,trackProps:i?.trackProps});await _(r),await O.invalidateQueries({queryKey:u.cacheKeys.runs()}),D.startsWith("/lineage")&&T("/lineage")}}catch(e){a.toaster.create({title:"Failed to submit a run",description:e instanceof Error?e.message:void 0,type:"error",duration:5e3,closable:!0})}},[v,_,D,T,O]);h=(0,r.usePathname)(),(0,n.useEffect)(()=>{y()},[y,h]);let I=async(e,t)=>{try{y();let{run_id:i}=await (0,d.submitRun)(e,t,{nowait:!0,trackProps:p?.options?.trackProps});await _(i)}catch(e){a.toaster.create({title:"Failed to submit a run",description:e instanceof Error?e.message:void 0,type:"error",duration:5e3,closable:!0})}};return(0,t.jsxs)(c.Provider,{value:{runAction:F,runId:P,showRunId:_,isRunResultOpen:b,closeRunResult:x,isHistoryOpen:S,closeHistory:E,showHistory:R,setHistoryOpen:k,clearRunResult:A},children:[p&&(0,t.jsx)(o.RunModal,{isOpen:g,onClose:y,onExecute:I,title:p.title,type:p.type,params:p.params,initialRun:p.lastRun,RunForm:p.options?.showForm&&p.RunForm?p.RunForm:void 0},p.session),e]})}let p=()=>(0,n.useContext)(c)},475119,e=>{"use strict";var t=e.i(19483),i=e.i(187725);let r='select * from {{ ref("mymodel") }}',n=(0,i.createContext)({sqlQuery:r,setSqlQuery:()=>{},primaryKeys:void 0,setPrimaryKeys:()=>{},isCustomQueries:!1,setCustomQueries:()=>{},baseSqlQuery:r,setBaseSqlQuery:()=>{}});function o({children:e}){let[o,s]=i.default.useState(r),[a,l]=i.default.useState(r),[u,d]=i.default.useState(!1),[c,h]=i.default.useState();return(0,t.jsx)(n.Provider,{value:{setSqlQuery:s,sqlQuery:o,setPrimaryKeys:h,primaryKeys:c,isCustomQueries:u,setCustomQueries:d,baseSqlQuery:a,setBaseSqlQuery:l},children:e})}let s=(0,i.createContext)({isNodesFetching:[],setIsNodesFetching:()=>{}});function a({children:e}){let[r,n]=i.default.useState([]);return(0,t.jsx)(s.Provider,{value:{isNodesFetching:r,setIsNodesFetching:n},children:e})}e.s(["RecceQueryContextProvider",()=>o,"RowCountStateContextProvider",()=>a,"defaultSqlQuery",0,r,"useRecceQueryContext",0,()=>(0,i.useContext)(n)])},909139,750060,113145,e=>{"use strict";let t,i,r;var n,o,s,a,l,u,d,c,h=e.i(19483);let p=0;class f{constructor(e,t){this.from=e,this.to=t}}class g{constructor(e={}){this.id=p++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=y.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}g.closedBy=new g({deserialize:e=>e.split(" ")}),g.openedBy=new g({deserialize:e=>e.split(" ")}),g.group=new g({deserialize:e=>e.split(" ")}),g.isolate=new g({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw RangeError("Invalid value for isolate: "+e);return e||"auto"}}),g.contextHash=new g({perNode:!0}),g.lookAhead=new g({perNode:!0}),g.mounted=new g({perNode:!0});class m{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[g.mounted.id]}}let v=Object.create(null);class y{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):v,i=!!e.top|2*!!e.skipped|4*!!e.error|8*(null==e.name),r=new y(e.name||"",t,e.id,i);if(e.props){for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(g.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return e=>{for(let i=e.prop(g.group),r=-1;r<(i?i.length:0);r++){let n=t[r<0?e.name:i[r]];if(n)return n}}}}y.none=new y("",Object.create(null),0,8);class b{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let t of e){let e=t(i);if(e){r||(r=Object.assign({},i.props));let t=e[1],n=e[0];n.combine&&n.id in r&&(t=n.combine(r[n.id],t)),r[n.id]=t}}t.push(r?new y(i.name,r,i.id,i.flags):i)}return new b(t)}}let w=new WeakMap,C=new WeakMap;(n=d||(d={}))[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays";class x{constructor(e,t,i,r,n){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,n&&n.length)for(let[e,t]of(this.props=Object.create(null),n))this.props["number"==typeof e?e:e.id]=t}toString(){let e=m.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let i=e.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new I(this.topNode,e)}cursorAt(e,t=0,i=0){let r=new I(w.get(this)||this.topNode);return r.moveTo(e,t),w.set(this,r._tree),r}get topNode(){return new M(this,0,0,null)}resolve(e,t=0){let i=E(w.get(this)||this.topNode,e,t,!1);return w.set(this,i),i}resolveInner(e,t=0){let i=E(C.get(this)||this.topNode,e,t,!0);return C.set(this,i),i}resolveStack(e,t=0){return function(e,t,i){let r=e.resolveInner(t,i),n=null;for(let e=r instanceof M?r:r.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(n||(n=[r])).push(o.resolve(t,i)),e=o}else{let o=m.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let s=new M(o.tree,o.overlay[0].from+e.from,-1,e);(n||(n=[r])).push(E(s,t,i,!1))}}return n?A(n):r}(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:n=this.length}=e,o=e.mode||0,s=(o&d.IncludeAnonymous)>0;for(let e=this.cursor(o|d.IncludeAnonymous);;){let o=!1;if(e.from<=n&&e.to>=r&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;o=!0}for(;o&&i&&(s||!e.type.isAnonymous)&&i(e),!e.nextSibling();){if(!e.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:V(y.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,i)=>new x(this.type,e,t,i,this.propValues),e.makeTree||((e,t,i)=>new x(y.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:r,maxBufferLength:n=1024,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(i)?new S(i,i.length):i,l=r.types,u=0,d=0;function c(e,t,i,n,o,s,a,l,u){let d=[],c=[];for(;e.length>n;)d.push(e.pop()),c.push(t.pop()+i-o);e.push(h(r.types[a],d,c,s-o,l-s,u)),t.push(o-i)}function h(e,t,i,r,n,o,s){if(o){let e=[g.contextHash,o];s=s?[e].concat(s):[e]}if(n>25){let e=[g.lookAhead,n];s=s?[e].concat(s):[e]}return new x(e,t,i,r,s)}let p=[],f=[];for(;a.pos>0;)!function e(t,i,p,f,m,v){let{id:y,start:b,end:w,size:C}=a,S=d,R=u;if(C<0){if(a.next(),-1==C){let e=o[y];p.push(e),f.push(b-t);return}if(-3==C){u=y;return}if(-4==C){d=y;return}else throw RangeError(`Unrecognized record size: ${C}`)}let E=l[y],P,M,D=b-t;if(w-b<=n&&(M=function(e,t){let i=a.fork(),r=0,o=0,l=0,u=i.end-n,d={size:0,start:0,skip:0};t:for(let n=i.pos-e;i.pos>n;){let e=i.size;if(i.id==t&&e>=0){d.size=r,d.start=o,d.skip=l,l+=4,r+=4,i.next();continue}let a=i.pos-e;if(e<0||a<n||i.start<u)break;let c=4*(i.id>=s),h=i.start;for(i.next();i.pos>a;){if(i.size<0)if(-3==i.size||-4==i.size)c+=4;else break t;else i.id>=s&&(c+=4);i.next()}o=h,r+=e,l+=c}return(t<0||r==e)&&(d.size=r,d.start=o,d.skip=l),d.size>4?d:void 0}(a.pos-i,m))){let e=new Uint16Array(M.size-M.skip),i=a.pos-M.size,n=e.length;for(;a.pos>i;)n=function e(t,i,r){let{id:n,start:o,end:l,size:c}=a;if(a.next(),c>=0&&n<s){let s=r;if(c>4){let n=a.pos-(c-4);for(;a.pos>n;)r=e(t,i,r)}i[--r]=s,i[--r]=l-t,i[--r]=o-t,i[--r]=n}else -3==c?u=n:-4==c&&(d=n);return r}(M.start,e,n);P=new k(e,w-M.start,r),D=M.start-t}else{let t=a.pos-C;a.next();let i=[],o=[],l=y>=s?y:-1,u=0,d=w;for(;a.pos>t;)l>=0&&a.id==l&&a.size>=0?(a.end<=d-n&&(c(i,o,b,u,a.end,d,l,S,R),u=i.length,d=a.end),a.next()):v>2500?function(e,t,i,o){let s=[],l=0,u=-1;for(;a.pos>t;){let{id:e,start:t,end:i,size:r}=a;if(r>4)a.next();else if(u>-1&&t<u)break;else u<0&&(u=i-n),s.push(e,t,i),l++,a.next()}if(l){let t=new Uint16Array(4*l),n=s[s.length-2];for(let e=s.length-3,i=0;e>=0;e-=3)t[i++]=s[e],t[i++]=s[e+1]-n,t[i++]=s[e+2]-n,t[i++]=i;i.push(new k(t,s[2]-n,r)),o.push(n-e)}}(b,t,i,o):e(b,t,i,o,l,v+1);if(l>=0&&u>0&&u<i.length&&c(i,o,b,u,b,d,l,S,R),i.reverse(),o.reverse(),l>-1&&u>0){let e=function(e,t){return(i,r,n)=>{let o=0,s=i.length-1,a,l;if(s>=0&&(a=i[s])instanceof x){if(!s&&a.type==e&&a.length==n)return a;(l=a.prop(g.lookAhead))&&(o=r[s]+a.length+l)}return h(e,i,r,n,o,t)}}(E,R);P=V(E,i,o,0,i.length,0,w-b,e,e)}else P=h(E,i,o,w-b,S-w,R)}p.push(P),f.push(D)}(e.start||0,e.bufferStart||0,p,f,-1,0);let m=null!=(t=e.length)?t:p.length?f[0]+p[0].length:0;return new x(l[e.topID],p.reverse(),f.reverse(),m)}(e)}}x.empty=new x(y.none,[],[],0);class S{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new S(this.buffer,this.index)}}class k{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return y.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),i==(e+=4))return n;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,i,r,n){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&(!R(n,r,o[a+1],o[a+2])||(s=a,!(i>0)));a=o[a+3]);return s}slice(e,t,i){let r=this.buffer,n=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){n[a++]=r[s++],n[a++]=r[s++]-i;let t=n[a++]=r[s++]-i;n[a++]=r[s++]-e,o=Math.max(o,t)}return new k(n,o,this.set)}}function R(e,t,i,r){switch(e){case -2:return i<t;case -1:return r>=t&&i<t;case 0:return i<t&&r>t;case 1:return i<=t&&r>t;case 2:return r>t;case 4:return!0}}function E(e,t,i,r){for(var n;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof M&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:d.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;s=(r=s).parent)r instanceof M&&r.index<0&&(null==(n=s.enter(t,i,o))?void 0:n.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,i,o);if(!r)return e;e=r}}class P{cursor(e=0){return new I(this,e)}getChild(e,t=null,i=null){let r=D(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return D(this,e,t,i)}resolve(e,t=0){return E(this,e,t,!1)}resolveInner(e,t=0){return E(this,e,t,!0)}matchContext(e){return T(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(i=t,t=e.prevSibling):t=e}return i}get node(){return this}get next(){return this.parent}}class M extends P{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,n=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],u=a[e]+o.from;if(R(r,i,u,u+l.length)){if(l instanceof k){if(n&d.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,i-u,r);if(s>-1)return new _(new O(o,l,e,u),null,s)}else if(n&d.IncludeAnonymous||!l.type.isAnonymous||L(l)){let s;if(!(n&d.IgnoreMounts)&&(s=m.get(l))&&!s.overlay)return new M(s.tree,u,e,o);let a=new M(l,u,e,o);return n&d.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,r)}}}if(n&d.IncludeAnonymous||!o.type.isAnonymous||(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,!(o=o._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,i=0){let r;if(!(i&d.IgnoreOverlays)&&(r=m.get(this._tree))&&r.overlay){let i=e-this.from;for(let{from:e,to:n}of r.overlay)if((t>0?e<=i:e<i)&&(t<0?n>=i:n>i))return new M(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function D(e,t,i,r){let n=e.cursor(),o=[];if(!n.firstChild())return o;if(null!=i){for(let e=!1;!e;)if(e=n.type.is(i),!n.nextSibling())return o}for(;;){if(null!=r&&n.type.is(r))return o;if(n.type.is(t)&&o.push(n.node),!n.nextSibling())return null==r?o:[]}}function T(e,t,i=t.length-1){for(let r=e;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[i]&&t[i]!=r.name)return!1;i--}}return!0}class O{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class _ extends P{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new _(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,i=0){if(i&d.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new _(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new _(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new _(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,n=i.buffer[this.index+3];if(n>r){let o=i.buffer[this.index+1];e.push(i.slice(r,n,o)),t.push(0)}return new x(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function A(e){if(!e.length)return null;let t=0,i=e[0];for(let r=1;r<e.length;r++){let n=e[r];(n.from>i.from||n.to<i.to)&&(i=n,t=r)}let r=i instanceof M&&i.index<0?null:i.parent,n=e.slice();return r?n[t]=r:n.splice(t,1),new F(n,i)}class F{constructor(e,t){this.heads=e,this.node=t}get next(){return A(this.heads)}}class I{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof M)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof M?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&d.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&d.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&d.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,n=e<0?-1:i._tree.children.length;r!=n;r+=e){let e=i._tree.children[r];if(this.mode&d.IncludeAnonymous||e instanceof k||!e.type.isAnonymous||L(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)t:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=n+1;break t}r=this.stack[--n]}for(let e=i;e<this.stack.length;e++)t=new _(this.buffer,t,this.stack[e]);return this.bufferNode=new _(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return T(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return T(this._tree,e,r);let o=i[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function L(e){return e.children.some(e=>e instanceof k||!e.type.isAnonymous||L(e))}let N=new WeakMap;function B(e,t){if(!e.isAnonymous||t instanceof k||t.type!=e)return 1;let i=N.get(t);if(null==i){for(let r of(i=1,t.children)){if(r.type!=e||!(r instanceof x)){i=1;break}i+=B(e,r)}N.set(t,i)}return i}function V(e,t,i,r,n,o,s,a,l){let u=0;for(let i=r;i<n;i++)u+=B(e,t[i]);let d=Math.ceil(1.5*u/8),c=[],h=[];return!function t(i,r,n,s,a){for(let u=n;u<s;){let n=u,p=r[u],f=B(e,i[u]);for(u++;u<s;u++){let t=B(e,i[u]);if(f+t>=d)break;f+=t}if(u==n+1){if(f>d){let e=i[n];t(e.children,e.positions,0,e.children.length,r[n]+a);continue}c.push(i[n])}else{let t=r[u-1]+i[u-1].length-p;c.push(V(e,i,r,n,u,p,t,null,l))}h.push(p+a-o)}}(t,i,r,n,0),(a||l)(c,h,s)}class H{constructor(e,t,i,r,n=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=!!n|2*!!o}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let r=[new H(0,e.length,e,0,!1,i)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],n=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let u=s<t.length?t[s]:null,d=u?u.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let t=o;if(a>=t.from||d<=t.to||l){let e=Math.max(t.from,a)-l,i=Math.min(t.to,d)-l;t=e>=i?null:new H(e,i,t.tree,t.offset+l,s>0,!!u)}if(t&&r.push(t),o.to>d)break;o=n<e.length?e[n++]:null}if(!u)break;a=u.toA,l=u.toA-u.toB}return r}}class z{startParse(e,t,i){return"string"==typeof e&&(e=new j(e)),i=i?i.length?i.map(e=>new f(e.from,e.to)):[new f(0,0)]:[new f(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let e=r.advance();if(e)return e}}}class j{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new g({perNode:!0});let G=[],W=[],U="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<U.length;e++)(e%2?W:G).push(t+=U[e]);function $(e){return e>=127462&&e<=127487}function q(e,t,i){if(t==e.length)return t;t&&Q(e.charCodeAt(t))&&X(e.charCodeAt(t-1))&&t--;let r=K(e,t);for(t+=Y(r);t<e.length;){let n=K(e,t);if(8205==r||8205==n||i&&function(e){if(e<768)return!1;for(let t=0,i=G.length;;){let r=t+i>>1;if(e<G[r])i=r;else{if(!(e>=W[r]))return!0;t=r+1}if(t==i)return!1}}(n))t+=Y(n),r=n;else if($(n)){let i=0,r=t-2;for(;r>=0&&$(K(e,r));)i++,r-=2;if(i%2==0)break;t+=2}else break}return t}function K(e,t){let i=e.charCodeAt(t);if(!X(i)||t+1==e.length)return i;let r=e.charCodeAt(t+1);return Q(r)?(i-55296<<10)+(r-56320)+65536:i}function Q(e){return e>=56320&&e<57344}function X(e){return e>=55296&&e<56320}function Y(e){return e<65536?1:2}class Z{lineAt(e){if(e<0||e>this.length)throw RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=es(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),ee.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=es(this,e,t);let i=[];return this.decompose(e,t,i,0),ee.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new ei(this),n=new ei(e);for(let e=t,o=t;;){if(r.next(e),n.next(e),e=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(o+=r.value.length,r.done||o>=i)return!0}}iter(e=1){return new ei(this,e)}iterRange(e,t=this.length){return new er(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new en(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new J(e):ee.from(J.split(e,[])):Z.empty}}class J extends Z{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.text[n],s=r+o.length;if((t?i:s)>=e)return new eo(r,s,i,o);r=s+1,i++}}decompose(e,t,i,r){var n;let o=e<=0&&t>=this.length?this:new J((n=this.text,et(n,[""],e,t)),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=i.pop(),t=et(o.text,e.text.slice(),0,o.length);if(t.length<=32)i.push(new J(t,e.length+o.length));else{let e=t.length>>1;i.push(new J(t.slice(0,e)),new J(t.slice(e)))}}else i.push(o)}replace(e,t,i){var r;if(!(i instanceof J))return super.replace(e,t,i);[e,t]=es(this,e,t);let n=et(this.text,et(i.text,(r=this.text,et(r,[""],0,e))),t),o=this.length+i.length-(t-e);return n.length<=32?new J(n,o):ee.from(J.split(n,[]),o)}sliceString(e,t=this.length,i="\n"){[e,t]=es(this,e,t);let r="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let s=this.text[o],a=n+s.length;n>e&&o&&(r+=i),e<a&&t>n&&(r+=s.slice(Math.max(0,e-n),t-n)),n=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let n of e)i.push(n),r+=n.length+1,32==i.length&&(t.push(new J(i,r)),i=[],r=-1);return r>-1&&t.push(new J(i,r)),t}}class ee extends Z{constructor(e,t){for(let i of(super(),this.children=e,this.length=t,this.lines=0,e))this.lines+=i.lines}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.children[n],s=r+o.length,a=i+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,i,r);r=s+1,i=a+1}}decompose(e,t,i,r){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let s=this.children[n],a=o+s.length;if(e<=a&&t>=o){let n=r&(o<=e|2*(a>=t));o>=e&&a<=t&&!n?i.push(s):s.decompose(e-o,t-o,i,n)}o=a+1}}replace(e,t,i){if([e,t]=es(this,e,t),i.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],s=n+o.length;if(e>=n&&t<=s){let a=o.replace(e-n,t-n,i),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let n=this.children.slice();return n[r]=a,new ee(n,this.length-(t-e)+i.length)}return super.replace(n,s,a)}n=s+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){[e,t]=es(this,e,t);let r="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let s=this.children[n],a=o+s.length;o>e&&n&&(r+=i),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,i)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ee))return 0;let i=0,[r,n,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,n+=t){if(r==o||n==s)return i;let a=this.children[r],l=e.children[n];if(a!=l)return i+a.scanIdentical(l,t);i+=a.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new J(i,t)}let r=Math.max(32,i>>5),n=r<<1,o=r>>1,s=[],a=0,l=-1,u=[];function d(){0!=a&&(s.push(1==u.length?u[0]:ee.from(u,l)),l=-1,a=u.length=0)}for(let t of e)!function e(t){let i;if(t.lines>n&&t instanceof ee)for(let i of t.children)e(i);else t.lines>o&&(a>o||!a)?(d(),s.push(t)):t instanceof J&&a&&(i=u[u.length-1])instanceof J&&t.lines+i.lines<=32?(a+=t.lines,l+=t.length+1,u[u.length-1]=new J(i.text.concat(t.text),i.length+1+t.length)):(a+t.lines>r&&d(),a+=t.lines,l+=t.length+1,u.push(t))}(t);return d(),1==s.length?s[0]:new ee(s,t)}}function et(e,t,i=0,r=1e9){for(let n=0,o=0,s=!0;o<e.length&&n<=r;o++){let a=e[o],l=n+a.length;l>=i&&(l>r&&(a=a.slice(0,r-n)),n<i&&(a=a.slice(i-n)),s?(t[t.length-1]+=a,s=!1):t.push(a)),n=l+1}return t}Z.empty=new J([""],0);class ei{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof J?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],n=this.offsets[i],o=n>>1,s=r instanceof J?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&n)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof J){let n=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,n.length>Math.max(0,e))return this.value=0==e?n:t>0?n.slice(e):n.slice(0,n.length-e),this;e-=n.length}else{let n=r.children[o+(t<0?-1:0)];e>n.length?(e-=n.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(n),this.offsets.push(t>0?1:(n instanceof J?n.text.length:n.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class er{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new ei(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class en{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Z.prototype[Symbol.iterator]=function(){return this.iter()},ei.prototype[Symbol.iterator]=er.prototype[Symbol.iterator]=en.prototype[Symbol.iterator]=function(){return this});class eo{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function es(e,t,i){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,i))]}function ea(e,t,i=!0,r=!0){return function(e,t,i=!0,r=!0){return(i?q:function(e,t,i){for(;t>0;){let r=q(e,t-2,i);if(r<t)return r;t--}return 0})(e,t,r)}(e,t,i,r)}function el(e,t){let i=e.charCodeAt(t);if(!(i>=55296&&i<56320)||t+1==e.length)return i;let r=e.charCodeAt(t+1);return r>=56320&&r<57344?(i-55296<<10)+(r-56320)+65536:i}function eu(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10)+55296,(1023&e)+56320)}function ed(e){return e<65536?1:2}let ec=/\r\n?|\n/;var eh=((o=eh||(eh={}))[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o);class ep{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,n),r+=n):r+=o,i+=n}}iterChangedRanges(e,t=!1){ev(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new ep(e)}composeDesc(e){return this.empty?e:e.empty?this:eb(this,e)}mapDesc(e,t=!1){return e.empty?this:ey(this,e,t)}mapPos(e,t=-1,i=eh.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return n+(e-r);n+=s}else{if(i!=eh.Simple&&l>=e&&(i==eh.TrackDel&&r<e&&l>e||i==eh.TrackBefore&&r<e||i==eh.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?n:n+a;n+=a}r=l}if(e>r)throw RangeError(`Position ${e} is out of range for changeset of length ${r}`);return n}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let n=this.sections[i++],o=this.sections[i++],s=r+n;if(o>=0&&r<=t&&s>=e)return!(r<e)||!(s>t)||"cover";r=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw RangeError("Invalid JSON representation of ChangeDesc");return new ep(e)}static create(e){return new ep(e)}}class ef extends ep{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw RangeError("Applying change set to a document with the wrong length");return ev(this,(t,i,r,n,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return ey(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,n=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(Z.empty);i.push(o?e.slice(n,n+o):Z.empty)}n+=o}return new ef(t,i)}compose(e){return this.empty?e:e.empty?this:eb(this,e,!0)}map(e,t=!1){return e.empty?this:ey(this,e,t,!0)}iterChanges(e,t=!1){ev(this,e,t)}get desc(){return ep.create(this.sections)}filter(e){let t=[],i=[],r=[],n=new ew(this);i:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==n.len;){if(n.done)break i;let e=Math.min(n.len,a-s);eg(r,e,-1);let o=-1==n.ins?-1:0==n.off?n.ins:0;eg(t,e,o),o>0&&em(i,t,n.text),n.forward(e),s+=e}let l=e[o++];for(;s<l;){if(n.done)break i;let e=Math.min(n.len,l-s);eg(t,e,-1),eg(r,e,-1==n.ins?-1:0==n.off?n.ins:0),n.forward(e),s+=e}}return{changes:new ef(t,i),filtered:ep.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):0==r?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],n=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&eg(r,t-o,-1);let i=new ef(r,n);s=s?s.compose(i.map(s)):i,r=[],n=[],o=0}return!function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ef){if(l.length!=t)throw RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:u}=l;if(e>s||e<0||s>t)throw RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let d=u?"string"==typeof u?Z.of(u.split(i||ec)):u:Z.empty,c=d.length;if(e==s&&0==c)return;e<o&&a(),e>o&&eg(r,e-o,-1),eg(r,s-e,c),em(n,r,d),o=s}}(e),a(!s),s}static empty(e){return new ef(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let n=e[r];if("number"==typeof n)t.push(n,-1);else if(!Array.isArray(n)||"number"!=typeof n[0]||n.some((e,t)=>t&&"string"!=typeof e))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==n.length)t.push(n[0],0);else{for(;i.length<r;)i.push(Z.empty);i[r]=Z.of(n.slice(1)),t.push(n[0],i[r].length)}}return new ef(t,i)}static createSet(e,t){return new ef(e,t)}}function eg(e,t,i,r=!1){if(0==t&&i<=0)return;let n=e.length-2;n>=0&&i<=0&&i==e[n+1]?e[n]+=t:n>=0&&0==t&&0==e[n]?e[n+1]+=i:r?(e[n]+=t,e[n+1]+=i):e.push(t,i)}function em(e,t,i){if(0==i.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<r;)e.push(Z.empty);e.push(i)}}function ev(e,t,i){let r=e.inserted;for(let n=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)n+=a,o+=a;else{let u=n,d=o,c=Z.empty;for(;u+=a,d+=l,l&&r&&(c=c.append(r[s-2>>1])),!i&&s!=e.sections.length&&!(e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(n,u,o,d,c),n=u,o=d}}}function ey(e,t,i,r=!1){let n=[],o=r?[]:null,s=new ew(e),a=new ew(t);for(let e=-1;;)if(s.done&&a.len||a.done&&s.len)throw Error("Mismatched change set lengths");else if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);eg(n,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!i))){let t=a.len;for(eg(n,a.ins,-1);t;){let i=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=i&&(eg(n,0,s.ins),o&&em(o,n,s.text),e=s.i),s.forward(i),t-=i}a.next()}else if(s.ins>=0){let t=0,i=s.len;for(;i;)if(-1==a.ins){let e=Math.min(i,a.len);t+=e,i-=e,a.forward(e)}else if(0==a.ins&&a.len<i)i-=a.len,a.next();else break;eg(n,t,e<s.i?s.ins:0),o&&e<s.i&&em(o,n,s.text),e=s.i,s.forward(s.len-i)}else if(s.done&&a.done)return o?ef.createSet(n,o):ep.create(n);else throw Error("Mismatched change set lengths")}function eb(e,t,i=!1){let r=[],n=i?[]:null,o=new ew(e),s=new ew(t);for(let e=!1;;)if(o.done&&s.done)return n?ef.createSet(r,n):ep.create(r);else if(0==o.ins)eg(r,o.len,0,e),o.next();else if(0!=s.len||s.done)if(o.done||s.done)throw Error("Mismatched change set lengths");else{let t=Math.min(o.len2,s.len),i=r.length;if(-1==o.ins){let i=-1==s.ins?-1:s.off?0:s.ins;eg(r,t,i,e),n&&i&&em(n,r,s.text)}else -1==s.ins?(eg(r,o.off?0:o.len,t,e),n&&em(n,r,o.textBit(t))):(eg(r,o.off?0:o.len,s.off?0:s.ins,e),n&&!s.off&&em(n,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>i),o.forward2(t),s.forward(t)}else eg(r,0,s.ins,e),n&&em(n,r,s.text),s.next()}class ew{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Z.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Z.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class eC{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 0xffffff==e?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new eC(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ex.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ex.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw RangeError("Invalid JSON representation for SelectionRange");return ex.range(e.anchor,e.head)}static create(e,t,i){return new eC(e,t,i)}}class ex{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ex.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new ex([this.main],0)}addRange(e,t=!0){return ex.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ex.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new ex(e.ranges.map(e=>eC.fromJSON(e)),e.main)}static single(e,t=e){return new ex([ex.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let n=e[r];if(n.empty?n.from<=i:n.from<i)return ex.normalized(e.slice(),t);i=n.to}return new ex(e,t)}static cursor(e,t=0,i,r){return eC.create(e,e,(0==t?0:t<0?8:16)|(null==i?7:Math.min(6,i))|(null!=r?r:0xffffff)<<6)}static range(e,t,i,r){let n=(null!=i?i:0xffffff)<<6|(null==r?7:Math.min(6,r));return t<e?eC.create(t,e,48|n):eC.create(e,t,8*(t>e)|n)}static normalized(e,t=0){let i=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(i);for(let i=1;i<e.length;i++){let r=e[i],n=e[i-1];if(r.empty?r.from<=n.to:r.from<n.to){let o=n.from,s=Math.max(r.to,n.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?ex.range(s,o):ex.range(o,s))}}return new ex(e,t)}}function eS(e,t){for(let i of e.ranges)if(i.to>t)throw RangeError("Selection points outside of document")}let ek=0;class eR{constructor(e,t,i,r,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=ek++,this.default=e([]),this.extensions="function"==typeof n?n(this):n}get reader(){return this}static define(e={}){return new eR(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(!e.combine?eE:(e,t)=>e===t),!!e.static,e.enables)}of(e){return new eP([],this,0,e)}compute(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eP(e,this,1,t)}computeN(e,t){if(this.isStatic)throw Error("Can't compute a static facet");return new eP(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],i=>t(i.field(e)))}}function eE(e,t){return e==t||e.length==t.length&&e.every((e,i)=>e===t[i])}class eP{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=ek++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,n=this.id,o=e[n]>>1,s=2==this.type,a=!1,l=!1,u=[];for(let i of this.dependencies)"doc"==i?a=!0:"selection"==i?l=!0:((null!=(t=e[i.id])?t:1)&1)==0&&u.push(e[i.id]);return{create:e=>(e.values[o]=i(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||eD(e,u)){let t=i(e);if(s?!eM(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[n];if(null!=l){let n=eV(t,l);if(this.dependencies.every(i=>i instanceof eR?t.facet(i)===e.facet(i):!(i instanceof eO)||t.field(i,!1)==e.field(i,!1))||(s?eM(a=i(e),n,r):r(a=i(e),n)))return e.values[o]=n,0}else a=i(e);return e.values[o]=a,1}}}}function eM(e,t,i){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}function eD(e,t){let i=!1;for(let r of t)1&eB(e,r)&&(i=!0);return i}let eT=eR.define({static:!0});class eO{constructor(e,t,i,r,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=n,this.provides=void 0}static define(e){let t=new eO(ek++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(eT).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let r=e.values[t],n=this.updateF(r,i);return this.compareF(r,n)?0:(e.values[t]=n,1)},reconfigure:(e,i)=>{let r=e.facet(eT),n=i.facet(eT),o;return(o=r.find(e=>e.field==this))&&o!=n.find(e=>e.field==this)?(e.values[t]=o.create(e),1):null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,eT.of({field:this,create:e})]}get extension(){return this}}function e_(e){return t=>new eF(t,e)}let eA={highest:e_(0),high:e_(1),default:e_(2),low:e_(3),lowest:e_(4)};class eF{constructor(e,t){this.inner=e,this.prec=t}}class eI{of(e){return new eL(this,e)}reconfigure(e){return eI.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class eL{constructor(e,t){this.compartment=e,this.inner=t}}class eN{constructor(e,t,i,r,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){var r,n,o;let s,a,l=[],u=Object.create(null),d=new Map;for(let i of(r=e,n=t,o=d,s=[[],[],[],[],[]],a=new Map,!function e(t,i){let r=a.get(t);if(null!=r){if(r<=i)return;let e=s[r].indexOf(t);e>-1&&s[r].splice(e,1),t instanceof eL&&o.delete(t.compartment)}if(a.set(t,i),Array.isArray(t))for(let r of t)e(r,i);else if(t instanceof eL){if(o.has(t.compartment))throw RangeError("Duplicate use of compartment in extensions");let r=n.get(t.compartment)||t.inner;o.set(t.compartment,r),e(r,i)}else if(t instanceof eF)e(t.inner,t.prec);else if(t instanceof eO)s[i].push(t),t.provides&&e(t.provides,i);else if(t instanceof eP)s[i].push(t),t.facet.extensions&&e(t.facet.extensions,2);else{let r=t.extension;if(!r)throw Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(r,i)}}(r,2),s.reduce((e,t)=>e.concat(t))))i instanceof eO?l.push(i):(u[i.facet.id]||(u[i.facet.id]=[])).push(i);let c=Object.create(null),h=[],p=[];for(let e of l)c[e.id]=p.length<<1,p.push(t=>e.slot(t));let f=null==i?void 0:i.config.facets;for(let e in u){let t=u[e],r=t[0].facet,n=f&&f[e]||[];if(t.every(e=>0==e.type))if(c[r.id]=h.length<<1|1,eE(n,t))h.push(i.facet(r));else{let e=r.combine(t.map(e=>e.value));h.push(i&&r.compare(e,i.facet(r))?i.facet(r):e)}else{for(let e of t)0==e.type?(c[e.id]=h.length<<1|1,h.push(e.value)):(c[e.id]=p.length<<1,p.push(t=>e.dynamicSlot(t)));c[r.id]=p.length<<1,p.push(e=>(function(e,t,i){let r=i.map(t=>e[t.id]),n=i.map(e=>e.type),o=r.filter(e=>!(1&e)),s=e[t.id]>>1;function a(e){let i=[];for(let t=0;t<r.length;t++){let o=eV(e,r[t]);if(2==n[t])for(let e of o)i.push(e);else i.push(o)}return t.combine(i)}return{create(e){for(let t of r)eB(e,t);return e.values[s]=a(e),1},update(e,i){if(!eD(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,n){let o=eD(e,r),l=n.config.facets[t.id],u=n.facet(t);if(l&&!o&&eE(i,l))return e.values[s]=u,0;let d=a(e);return t.compare(d,u)?(e.values[s]=u,0):(e.values[s]=d,1)}}})(e,r,t))}}return new eN(e,d,p.map(e=>e(c)),c,h,u)}}function eB(e,t){if(1&t)return 2;let i=t>>1,r=e.status[i];if(4==r)throw Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[i]=4;let n=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|n}function eV(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}let eH=eR.define(),ez=eR.define({combine:e=>e.some(e=>e),static:!0}),ej=eR.define({combine:e=>e.length?e[0]:void 0,static:!0}),eG=eR.define(),eW=eR.define(),eU=eR.define(),e$=eR.define({combine:e=>!!e.length&&e[0]});class eq{constructor(e,t){this.type=e,this.value=t}static define(){return new eK}}class eK{of(e){return new eq(this,e)}}class eQ{constructor(e){this.map=e}of(e){return new eX(this,e)}}class eX{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new eX(this.type,t)}is(e){return this.type==e}static define(e={}){return new eQ(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let e=r.map(t);e&&i.push(e)}return i}}eX.reconfigure=eX.define(),eX.appendConfig=eX.define();class eY{constructor(e,t,i,r,n,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,i&&eS(i,t.newLength),n.some(e=>e.type==eY.time)||(this.annotations=n.concat(eY.time.of(Date.now())))}static create(e,t,i,r,n,o){return new eY(e,t,i,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(eY.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function eZ(e,t,i){var r;let n,o,s;return i?(n=t.changes,o=ef.empty(t.changes.length),s=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(n)),{changes:s,selection:t.selection?t.selection.map(o):null==(r=e.selection)?void 0:r.map(n),effects:eX.mapEffects(e.effects,n).concat(eX.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function eJ(e,t,i){let r=t.selection,n=e1(t.annotations);return t.userEvent&&(n=n.concat(eY.userEvent.of(t.userEvent))),{changes:t.changes instanceof ef?t.changes:ef.of(t.changes||[],i,e.facet(ej)),selection:r&&(r instanceof ex?r:ex.single(r.anchor,r.head)),effects:e1(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}eY.time=eq.define(),eY.userEvent=eq.define(),eY.addToHistory=eq.define(),eY.remote=eq.define();let e0=[];function e1(e){return null==e?e0:Array.isArray(e)?e:[e]}var e2=((s=e2||(e2={}))[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s);let e5=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{t=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class e3{constructor(e,t,i,r,n,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)eB(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null==i){if(t)throw RangeError("Field is not present in this state");return}return eB(this,i),eV(this,i)}update(...e){return function e(t,i,r){let n=eJ(t,i.length?i[0]:{},t.doc.length);i.length&&!1===i[0].filter&&(r=!1);for(let e=1;e<i.length;e++){!1===i[e].filter&&(r=!1);let o=!!i[e].sequential;n=eZ(n,eJ(t,i[e],o?n.changes.newLength:t.doc.length),o)}let o=eY.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return function(e){let t=e.startState,i=t.facet(eU),r=e;for(let n=i.length-1;n>=0;n--){let o=i[n](e);o&&Object.keys(o).length&&(r=eZ(r,eJ(t,o,e.changes.newLength),!0))}return r==e?e:eY.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(r?function(t){let i=t.startState,r=!0;for(let e of i.facet(eG)){let i=e(t);if(!1===i){r=!1;break}Array.isArray(i)&&(r=!0===r?i:function(e,t){let i=[];for(let r=0,n=0;;){let o,s;if(r<e.length&&(n==t.length||t[n]>=e[r]))o=e[r++],s=e[r++];else{if(!(n<t.length))return i;o=t[n++],s=t[n++]}!i.length||i[i.length-1]<o?i.push(o,s):i[i.length-1]<s&&(i[i.length-1]=s)}}(r,i))}if(!0!==r){let e,n;if(!1===r)n=t.changes.invertedDesc,e=ef.empty(i.doc.length);else{let i=t.changes.filter(r);e=i.changes,n=i.filtered.mapDesc(i.changes).invertedDesc}t=eY.create(i,e,t.selection&&t.selection.map(n),eX.mapEffects(t.effects,n),t.annotations,t.scrollIntoView)}let n=i.facet(eW);for(let r=n.length-1;r>=0;r--){let o=n[r](t);t=o instanceof eY?o:Array.isArray(o)&&1==o.length&&o[0]instanceof eY?o[0]:e(i,e1(o),!1)}return t}(o):o)}(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:r,compartments:n}=i;for(let t of e.effects)t.is(eI.reconfigure)?(i&&(n=new Map,i.compartments.forEach((e,t)=>n.set(t,e)),i=null),n.set(t.value.compartment,t.value.extension)):t.is(eX.reconfigure)?(i=null,r=t.value):t.is(eX.appendConfig)&&(i=null,r=e1(r).concat(t.value));t=i?e.startState.values.slice():new e3(i=eN.resolve(r,n,this),this.doc,this.selection,i.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values;let o=e.startState.facet(ez)?e.newSelection:e.newSelection.asSingle();new e3(i,e.newDoc,o,t,(t,i)=>i.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ex.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),n=[i.range],o=e1(i.effects);for(let i=1;i<t.ranges.length;i++){let s=e(t.ranges[i]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<i;e++)n[e]=n[e].map(l);let u=r.mapDesc(a,!0);n.push(s.range.map(u)),r=r.compose(l),o=eX.mapEffects(o,l).concat(eX.mapEffects(e1(s.effects),u))}return{changes:r,selection:ex.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ef?e:ef.of(e,this.doc.length,this.facet(e3.lineSeparator))}toText(e){return Z.of(e.split(this.facet(e3.lineSeparator)||ec))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(eB(this,t),eV(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof eO&&null!=this.config.address[r.id]&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let n=i[t],o=e[t];r.push(n.init(e=>n.spec.fromJSON(o,e)))}}return e3.create({doc:e.doc,selection:ex.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=eN.resolve(e.extensions||[],new Map),i=e.doc instanceof Z?e.doc:Z.of((e.doc||"").split(t.staticFacet(e3.lineSeparator)||ec)),r=e.selection?e.selection instanceof ex?e.selection:ex.single(e.selection.anchor,e.selection.head):ex.single(0);return eS(r,i.length),t.staticFacet(ez)||(r=r.asSingle()),new e3(t,i,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(e3.tabSize)}get lineBreak(){return this.facet(e3.lineSeparator)||"\n"}get readOnly(){return this.facet(e$)}phrase(e,...t){for(let t of this.facet(e3.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,i)=>{if("$"==i)return"$";let r=+(i||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let n of this.facet(eH))for(let o of n(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){var i;return i=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return e2.Space;if(function(e){if(t)return t.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||e5.test(i)))return!0}return!1}(e))return e2.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return e2.Word;return e2.Other}}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-i,s=e-i;for(;o>0;){let e=ea(t,o,!1);if(n(t.slice(e,o))!=e2.Word)break;o=e}for(;s<r;){let e=ea(t,s);if(n(t.slice(s,e))!=e2.Word)break;s=e}return o==s?null:ex.range(o+i,s+i)}}function e4(e,t,i={}){let r={};for(let t of e)for(let e of Object.keys(t)){let n=t[e],o=r[e];if(void 0===o)r[e]=n;else if(o===n||void 0===n);else if(Object.hasOwnProperty.call(i,e))r[e]=i[e](o,n);else throw Error("Config merge conflict for field "+e)}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}e3.allowMultipleSelections=ez,e3.tabSize=eR.define({combine:e=>e.length?e[0]:4}),e3.lineSeparator=ej,e3.readOnly=e$,e3.phrases=eR.define({compare(e,t){let i=Object.keys(e),r=Object.keys(t);return i.length==r.length&&i.every(i=>e[i]==t[i])}}),e3.languageData=eH,e3.changeFilter=eG,e3.transactionFilter=eW,e3.transactionExtender=eU,eI.reconfigure=eX.define();class e8{eq(e){return this==e}range(e,t=e){return e6.create(e,t,this)}}e8.prototype.startSide=e8.prototype.endSide=0,e8.prototype.point=!1,e8.prototype.mapMode=eh.TrackDel;class e6{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new e6(e,t,i)}}function e7(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class e9{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let n=i?this.to:this.from;for(let o=r,s=n.length;;){if(o==s)return o;let r=o+s>>1,a=n[r]-e||(i?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,i,r){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,n);n<o;n++)if(!1===r(this.from[n]+e,this.to[n]+e,this.value[n]))return!1}map(e,t){let i=[],r=[],n=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l=this.value[a],u=this.from[a]+e,d=this.to[a]+e,c,h;if(u==d){let e=t.mapPos(u,l.startSide,l.mapMode);if(null==e||(c=h=e,l.startSide!=l.endSide&&(h=t.mapPos(u,l.endSide))<c))continue}else if((c=t.mapPos(u,l.startSide))>(h=t.mapPos(d,l.endSide))||c==h&&l.startSide>0&&l.endSide<=0)continue;0>(h-c||l.endSide-l.startSide)||(o<0&&(o=c),l.point&&(s=Math.max(s,h-c)),i.push(l),r.push(c-o),n.push(h-o))}return{mapped:i.length?new e9(r,n,i,s):null,pos:o}}}class te{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new te(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:n=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(i&&(t=t.slice().sort(e7)),this.isEmpty)return t.length?te.of(t):this;let s=new tr(this,null,-1).goto(0),a=0,l=[],u=new tt;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];u.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||n<this.chunkPos[s.chunkIndex])&&u.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||n<s.from||o(s.from,s.to,s.value))&&!u.addInner(s.from,s.to,s.value)&&l.push(e6.create(s.from,s.to,s.value)),s.next());return u.finishInner(this.nextLayer.isEmpty&&!l.length?te.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],s=this.chunk[n],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),i.push(e.mapPos(o));else if(!0===a){let{mapped:n,pos:a}=s.map(o,e);n&&(r=Math.max(r,n.maxPoint),t.push(n),i.push(a))}}let n=this.nextLayer.map(e);return 0==t.length?n:new te(i,t,n||te.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(t>=n&&e<=n+o.length&&!1===o.between(n,e-n,t-n,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return tn.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return tn.from(e).goto(t)}static compare(e,t,i,r,n=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n),a=ti(o,s,i),l=new ts(o,a,n),u=new ts(s,a,n);i.iterGaps((e,t,i)=>ta(l,e,u,t,i,r)),i.empty&&0==i.length&&ta(l,0,u,0,0,r)}static eq(e,t,i=0,r){null==r&&(r=0x3b9ac9ff);let n=e.filter(e=>!e.isEmpty&&0>t.indexOf(e)),o=t.filter(t=>!t.isEmpty&&0>e.indexOf(t));if(n.length!=o.length)return!1;if(!n.length)return!0;let s=ti(n,o),a=new ts(n,s,0).goto(i),l=new ts(o,s,0).goto(i);for(;;){if(a.to!=l.to||!tl(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,i,r,n=-1){let o=new ts(e,null,n).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,i);if(o.point){let i=o.activeForPoint(o.to),n=o.pointFrom<t?i.length+1:o.point.startSide<0?i.length:Math.min(i.length,a);r.point(s,e,o.point,i,n,o.pointRank),a=Math.min(o.openEnd(e),i.length)}else e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>i)return a+(o.point&&o.to>i?1:0);s=o.to,o.next()}}static of(e,t=!1){let i=new tt;for(let r of e instanceof e6?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let r=e[i];if(e7(t,r)>0)return e.slice().sort(e7);t=r}return e}(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return te.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=te.empty;r=r.nextLayer)t=new te(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}te.empty=new te([],[],null,-1),te.empty.nextLayer=te.empty;class tt{finishChunk(e){this.chunks.push(new e9(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new tt)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&0>(e-this.lastFrom||i.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if(0>(e-this.lastTo||t.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(te.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=te.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ti(e,t,i){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(i?i.mapPos(o):o)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(o,o+e.chunk[t].length))||n.add(e.chunk[t])}return n}class tr{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){0>(this.to-e||this.endSide-t)&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class tn{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new tr(o,t,i,n));return 1==r.length?r[0]:new tn(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)to(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)to(this.heap,e);0>(this.to-e||this.value.endSide-t)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),to(this.heap,0)}}}function to(e,t){for(let i=e[t];;){let r=(t<<1)+1;if(r>=e.length)break;let n=e[r];if(r+1<e.length&&n.compare(e[r+1])>=0&&(n=e[r+1],r++),0>i.compare(n))break;e[r]=i,e[t]=n,t=r}}class ts{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tn.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t);)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){tu(this.active,e),tu(this.activeTo,e),tu(this.activeRank,e),this.minActive=tc(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||r-this.activeTo[t])>0;)t++;td(this.active,t,i),td(this.activeTo,t,r),td(this.activeRank,t,n),e&&td(e,t,this.cursor.from),this.minActive=tc(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&0>(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&tu(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let e=this.cursor.value;if(e.point)if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}else this.addActive(i),this.cursor.next()}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function ta(e,t,i,r,n,o){e.goto(t),i.goto(r);let s=r+n,a=r,l=r-t;for(;;){let t=e.to+l-i.to,r=t||e.endSide-i.endSide,n=r<0?e.to+l:i.to,u=Math.min(n,s);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&tl(e.activeForPoint(e.to),i.activeForPoint(i.to))||o.comparePoint(a,u,e.point,i.point):u>a&&!tl(e.active,i.active)&&o.compareRange(a,u,e.active,i.active),n>s)break;(t||e.openEnd!=i.openEnd)&&o.boundChange&&o.boundChange(n),a=n,r<=0&&e.next(),r>=0&&i.next()}}function tl(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function tu(e,t){for(let i=t,r=e.length-1;i<r;i++)e[i]=e[i+1];e.pop()}function td(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function tc(e,t){let i=-1,r=1e9;for(let n=0;n<t.length;n++)0>(t[n]-r||e[n].endSide-e[i].endSide)&&(i=n,r=t[n]);return i}function th(e,t,i=e.length){let r=0;for(let n=0;n<i&&n<e.length;)9==e.charCodeAt(n)?(r+=t-r%t,n++):(r++,n=ea(e,n));return r}function tp(e,t,i,r){for(let r=0,n=0;;){if(n>=t)return r;if(r==e.length)break;n+=9==e.charCodeAt(r)?i-n%i:1,r=ea(e,r)}return!0===r?-1:e.length}let tf="undefined"==typeof Symbol?"__":Symbol.for(""),tg="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),tm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class tv{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}for(let t in e)!function e(t,n,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),u=l&&"keyframes"==l[1];if(l&&null==n)return o.push(t[0]+";");for(let i in n){let s=n[i];if(/&/.test(i))e(i.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((e,t)=>e.concat(t)),s,o);else if(s&&"object"==typeof s){if(!l)throw RangeError("The value of a property ("+i+") should be a primitive value.");e(r(i),s,a,u)}else null!=s&&a.push(i.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(a.length||u)&&o.push((i&&!l&&!s?t.map(i):t).join(", ")+" {"+a.join(" ")+"}")}(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=tm[tf]||1;return tm[tf]=e+1,""+e.toString(36)}static mount(e,t,i){let r=e[tg],n=i&&i.nonce;r?n&&r.setNonce(n):r=new tb(e,n),r.mount(Array.isArray(t)?t:[t],e)}}let ty=new Map;class tb{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=ty.get(i);if(t)return e[tg]=t;this.sheet=new r.CSSStyleSheet,ty.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[tg]=this}mount(e,t){let i=this.sheet,r=0,n=0;for(let t=0;t<e.length;t++){let o=e[t],s=this.modules.indexOf(o);if(s<n&&s>-1&&(this.modules.splice(s,1),n--,s=-1),-1==s){if(this.modules.splice(n++,0,o),i)for(let e=0;e<o.rules.length;e++)i.insertRule(o.rules[e],r++)}else{for(;n<s;)r+=this.modules[n++].rules.length;r+=o.rules.length,n++}}if(i)0>t.adoptedStyleSheets.indexOf(this.sheet)&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let i=t.head||t;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var tw={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tC={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tx="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),tS="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tk=0;tk<10;tk++)tw[48+tk]=tw[96+tk]=String(tk);for(var tk=1;tk<=24;tk++)tw[tk+111]="F"+tk;for(var tk=65;tk<=90;tk++)tw[tk]=String.fromCharCode(tk+32),tC[tk]=String.fromCharCode(tk);for(var tR in tw)tC.hasOwnProperty(tR)||(tC[tR]=tw[tR]);function tE(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];"string"==typeof n?e.setAttribute(r,n):null!=n&&(e[r]=n)}t++}for(;t<arguments.length;t++)!function e(t,i){if("string"==typeof i)t.appendChild(document.createTextNode(i));else if(null==i);else if(null!=i.nodeType)t.appendChild(i);else if(Array.isArray(i))for(var r=0;r<i.length;r++)e(t,i[r]);else throw RangeError("Unsupported child node: "+i)}(e,arguments[t]);return e}let tP="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},tM="undefined"!=typeof document?document:{documentElement:{style:{}}},tD=/Edge\/(\d+)/.exec(tP.userAgent),tT=/MSIE \d/.test(tP.userAgent),tO=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tP.userAgent),t_=!!(tT||tO||tD),tA=!t_&&/gecko\/(\d+)/i.test(tP.userAgent),tF=!t_&&/Chrome\/(\d+)/.exec(tP.userAgent),tI="webkitFontSmoothing"in tM.documentElement.style,tL=!t_&&/Apple Computer/.test(tP.vendor),tN=tL&&(/Mobile\/\w+/.test(tP.userAgent)||tP.maxTouchPoints>2);var tB={mac:tN||/Mac/.test(tP.platform),windows:/Win/.test(tP.platform),linux:/Linux|X11/.test(tP.platform),ie:t_,ie_version:tT?tM.documentMode||6:tO?+tO[1]:tD?+tD[1]:0,gecko:tA,gecko_version:tA?+(/Firefox\/(\d+)/.exec(tP.userAgent)||[0,0])[1]:0,chrome:!!tF,chrome_version:tF?+tF[1]:0,ios:tN,android:/Android\b/.test(tP.userAgent),webkit:tI,webkit_version:tI?+(/\bAppleWebKit\/(\d+)/.exec(tP.userAgent)||[0,0])[1]:0,safari:tL,safari_version:tL?+(/\bVersion\/(\d+(\.\d+)?)/.exec(tP.userAgent)||[0,0])[1]:0,tabSize:null!=tM.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function tV(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}let tH=Object.create(null);function tz(e,t,i){if(e==t)return!0;e||(e=tH),t||(t=tH);let r=Object.keys(e),n=Object.keys(t);if(r.length-(i&&r.indexOf(i)>-1?1:0)!=n.length-(i&&n.indexOf(i)>-1?1:0))return!1;for(let o of r)if(o!=i&&(-1==n.indexOf(o)||e[o]!==t[o]))return!1;return!0}function tj(e,t,i){let r=!1;if(t)for(let n in t)i&&n in i||(r=!0,"style"==n?e.style.cssText="":e.removeAttribute(n));if(i)for(let n in i)t&&t[n]==i[n]||(r=!0,"style"==n?e.style.cssText=i[n]:e.setAttribute(n,i[n]));return r}class tG{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var tW=((a=tW||(tW={}))[a.Text=0]="Text",a[a.WidgetBefore=1]="WidgetBefore",a[a.WidgetAfter=2]="WidgetAfter",a[a.WidgetRange=3]="WidgetRange",a);class tU extends e8{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new t$(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new tK(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:n,end:o}=tQ(e,t);i=(n?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new tK(e,i,r,t,e.widget||null,!0)}static line(e){return new tq(e)}static set(e,t=!1){return te.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}tU.none=te.empty;class t$ extends tU{constructor(e){let{start:t,end:i}=tQ(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?tV(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||tH}eq(e){return this==e||e instanceof t$&&this.tagName==e.tagName&&tz(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw RangeError("Mark decorations may not be empty");return super.range(e,t)}}t$.prototype.point=!1;class tq extends tU{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof tq&&this.spec.class==e.spec.class&&tz(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}tq.prototype.mapMode=eh.TrackBefore,tq.prototype.point=!0;class tK extends tU{constructor(e,t,i,r,n,o){super(t,i,n,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?eh.TrackBefore:eh.TrackAfter:eh.TrackDel}get type(){return this.startSide!=this.endSide?tW.WidgetRange:this.startSide<=0?tW.WidgetBefore:tW.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var t,i;return e instanceof tK&&(t=this.widget,t==(i=e.widget)||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function tQ(e,t=!1){let{inclusiveStart:i,inclusiveEnd:r}=e;return null==i&&(i=e.inclusive),null==r&&(r=e.inclusive),{start:null!=i?i:t,end:null!=r?r:t}}function tX(e,t,i,r=0){let n=i.length-1;n>=0&&i[n]+r>=e?i[n]=Math.max(i[n],t):i.push(e,t)}tK.prototype.point=!0;class tY extends e8{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof tY&&this.tagName==e.tagName&&tz(this.attributes,e.attributes)}static create(e){return new tY(e.tagName,e.attributes||tH)}static set(e,t=!1){return te.of(e,t)}}function tZ(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function tJ(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function t0(e,t){if(!t.anchorNode)return!1;try{return tJ(e,t.anchorNode)}catch(e){return!1}}function t1(e){return 3==e.nodeType?ii(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function t2(e,t,i,r){return!!i&&(t4(e,t,i,r,-1)||t4(e,t,i,r,1))}function t5(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function t3(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function t4(e,t,i,r,n){for(;;){if(e==i&&t==r)return!0;if(t==(n<0?0:t8(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=t5(e)+(n<0?0:1),e=i}else{if(1!=e.nodeType||1==(e=e.childNodes[t+(n<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=n<0?t8(e):0}}}function t8(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function t6(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function t7(e,t){let i=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||1>Math.abs(t.width-e.offsetWidth))&&(i=1),(r>.995&&r<1.005||!isFinite(r)||1>Math.abs(t.height-e.offsetHeight))&&(r=1),{scaleX:i,scaleY:r}}tY.prototype.startSide=tY.prototype.endSide=-1;class t9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?t8(t):0),i,Math.min(e.focusOffset,i?t8(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let ie=null;function it(e){if(e.setActive)return e.setActive();if(ie)return e.focus(ie);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==ie?{get preventScroll(){return ie={preventScroll:!0},!0}}:void 0),!ie){ie=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],n=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=n&&(i.scrollLeft=n)}}}function ii(e,t,r=t){let n=i||(i=document.createRange());return n.setEnd(e,r),n.setStart(e,t),n}function ir(e,t,i,r){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0};r&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=r);let o=new KeyboardEvent("keydown",n);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",n);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function io(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function is(e,t){for(let i=e,r=t;;)if(3==i.nodeType&&r>0)return{node:i,offset:r};else if(1==i.nodeType&&r>0){if("false"==i.contentEditable)return null;r=t8(i=i.childNodes[r-1])}else{if(!i.parentNode||t3(i))return null;r=t5(i),i=i.parentNode}}function ia(e,t){for(let i=e,r=t;;)if(3==i.nodeType&&r<i.nodeValue.length)return{node:i,offset:r};else if(1==i.nodeType&&r<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[r],r=0}else{if(!i.parentNode||t3(i))return null;r=t5(i)+1,i=i.parentNode}}tB.safari&&tB.safari_version>=26&&(ie=!1);class il{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new il(e.parentNode,t5(e),t)}static after(e,t){return new il(e.parentNode,t5(e)+1,t)}}var iu=((l=iu||(iu={}))[l.LTR=0]="LTR",l[l.RTL=1]="RTL",l);let id=iu.LTR,ic=iu.RTL;function ih(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<e[i]);return t}let ip=ih("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ig=ih("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),im=Object.create(null),iv=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);im[t]=i,im[i]=-t}function iy(e){return e<=247?ip[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ig[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let ib=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class iw{get dir(){return this.level%2?ic:id}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let n=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==i)return o;(n<0||(0!=r?r<0?s.from<t:s.to>t:e[n].level>s.level))&&(n=o)}}if(n<0)throw RangeError("Index out of range");return n}}let iC=[];function ix(e){return[new iw(0,e,0)]}let iS="",ik=eR.define(),iR=eR.define(),iE=eR.define(),iP=eR.define(),iM=eR.define(),iD=eR.define(),iT=eR.define(),iO=eR.define(),i_=eR.define(),iA=eR.define({combine:e=>e.some(e=>e)}),iF=eR.define({combine:e=>e.some(e=>e)}),iI=eR.define();class iL{constructor(e,t="nearest",i="nearest",r=5,n=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=n,this.isSnapshot=o}map(e){return e.empty?this:new iL(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new iL(ex.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let iN=eX.define({map:(e,t)=>e.map(t)}),iB=eX.define();function iV(e,t,i){let r=e.facet(iP);r.length?r[0](t):window.onerror&&window.onerror(String(t),i,void 0,void 0,t)||(i?console.error(i+":",t):console.error(t))}let iH=eR.define({combine:e=>!e.length||e[0]}),iz=0,ij=eR.define({combine:e=>e.filter((t,i)=>{for(let r=0;r<i;r++)if(e[r].plugin==t.plugin)return!1;return!0})});class iG{constructor(e,t,i,r,n){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(ij.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ij.of({plugin:this,arg:e}))}static define(e,t){let{eventHandlers:i,eventObservers:r,provide:n,decorations:o}=t||{};return new iG(iz++,e,i,r,e=>{let t=[];return o&&t.push(iq.of(t=>{let i=t.plugin(e);return i?o(i):tU.none})),n&&t.push(n(e)),t})}static fromClass(e,t){return iG.define((t,i)=>new e(t,i),t)}}class iW{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(iV(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){iV(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null==(t=this.value)?void 0:t.destroy)try{this.value.destroy()}catch(t){iV(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let iU=eR.define(),i$=eR.define(),iq=eR.define(),iK=eR.define(),iQ=eR.define(),iX=eR.define(),iY=eR.define();function iZ(e,t){let i=e.state.facet(iY);if(!i.length)return i;let r=i.map(t=>t instanceof Function?t(e):t),n=[];return te.spans(r,t.from,t.to,{point(){},span(e,i,r,o){let s=e-t.from,a=i-t.from,l=n;for(let e=r.length-1;e>=0;e--,o--){let i=r[e].spec.bidiIsolate,n;if(null==i&&(i=function(e,t,i){for(let r=t;r<i;r++){let t=iy(e.charCodeAt(r));if(1==t)break;if(2==t||4==t)return ic}return id}(t.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==i)n.to=a,l=n.inner;else{let e={from:s,to:a,direction:i,inner:[]};l.push(e),l=e.inner}}}}),n}let iJ=eR.define();function i0(e){let t=0,i=0,r=0,n=0;for(let o of e.state.facet(iJ)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(i=Math.max(i,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(n=Math.max(n,s.bottom)))}return{left:t,right:i,top:r,bottom:n}}let i1=eR.define();class i2{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new i2(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let r=0,n=0,o=0;;){let s=Math.min(r<e.length?e[r].fromB:1e9,n<t.length?t[n]:1e9);if(1e9==s)break;let a=s+o,l=s,u=a;for(;;)if(n<t.length&&t[n]<=l){let i=t[n+1];n+=2,l=Math.max(l,i);for(let t=r;t<e.length&&e[t].fromB<=l;t++)o=e[t].toA-e[t].toB;u=Math.max(u,i+o)}else if(r<e.length&&e[r].fromB<=l){let t=e[r++];l=Math.max(l,t.toB),u=Math.max(u,t.toA),o=t.toA-t.toB}else break;i.push(new i2(a,u,s,l))}return i}}class i5{constructor(e,t,i){for(let r of(this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ef.empty(this.startState.doc.length),i))this.changes=this.changes.compose(r.changes);let r=[];this.changes.iterChangedRanges((e,t,i,n)=>r.push(new i2(e,t,i,n))),this.changedRanges=r}static create(e,t,i){return new i5(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}let i3=[];class i4{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return 1&this.flags}get children(){return i3}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,4&this.flags){this.flags&=-5;let e=this.domAttrs;e&&function(e,t){for(let i=e.attributes.length-1;i>=0;i--){let r=e.attributes[i].name;null==t[r]&&e.removeAttribute(r)}for(let i in t){let r=t[i];"style"==i?e.style.cssText=r:e.getAttribute(i)!=r&&e.setAttribute(i,r)}}(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let t of this.children){if(t==e)return i;i+=t.length+t.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=t5(this.dom),r=this.length?e>0:t>0;return new il(this.parent.dom,i+ +!!r,0==e||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&2&this.parent.flags&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof i7)return e;return null}static get(e){return e.cmTile}}class i8 extends i4{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(2&this.flags)return;super.sync(e);let t=this.dom,i=null,r,n=(null==e?void 0:e.node)==t?e:null,o=0;for(let s of this.children){if(s.sync(e),o+=s.length+s.breakAfter,r=i?i.nextSibling:t.firstChild,n&&r!=s.dom&&(n.written=!0),s.dom.parentNode==t)for(;r&&r!=s.dom;)r=i6(r);else t.insertBefore(s.dom,r);i=s.dom}for(r=i?i.nextSibling:t.firstChild,n&&r&&(n.written=!0);r;)r=i6(r);this.length=o}}function i6(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class i7 extends i8{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=i4.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,r=0,n=0;;)if(r==i.children.length){if(!t.length)return;(i=i.parent).breakAfter&&n++,r=t.pop()}else{let o=i.children[r++];if(o instanceof i9)t.push(r),i=o,r=0;else{let t=n+o.length,i=e(o,n);if(void 0!==i)return i;n=t+o.breakAfter}}}resolveBlock(e,t){let i,r=-1,n,o=-1;if(this.blockTiles((s,a)=>{let l=a+s.length;if(e>=a&&e<=l){if(s.isWidget()&&t>=-1&&t<=1){if(32&s.flags)return!0;16&s.flags&&(i=void 0)}(a<e||e==l&&(t<-1?s.length:s.covers(1)))&&(!i||!s.isWidget()&&i.isWidget())&&(i=s,r=e-a),(l>e||e==a&&(t>1?s.length:s.covers(-1)))&&(!n||!s.isWidget()&&n.isWidget())&&(n=s,o=e-a)}}),!i&&!n)throw Error("No tile at position "+e);return i&&t<0||!n?{tile:i,offset:r}:{tile:n,offset:o}}}class i9 extends i8{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return!!this.children.length&&(e<0?this.children[0].covers(-1):this.lastChild.covers(1))}get domAttrs(){return this.wrapper.attributes}static of(e,t){let i=new i9(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class re extends i8{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,i){let r=new re(t||document.createElement("div"),e);return t&&i||(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,i){let r=null,n=-1,o=null,s=-1;!function e(a,l){for(let u=0,d=0;u<a.children.length&&d<=l;u++){let c=a.children[u],h=d+c.length;h>=l&&(c.isComposite()?e(c,l-d):(!o||o.isHidden&&(t>0||i&&function(e,t){let i=e.coordsIn(0,1),r=t.coordsIn(0,1);return i&&r&&r.top<i.bottom}(o,c)))&&(h>l||32&c.flags)?(o=c,s=l-d):(d<l||16&c.flags&&!c.isHidden)&&(r=c,n=l-d)),d=h}}(this,e);let a=(t<0?r:o)||r||o;return a?{tile:a,offset:a==r?n:s}:null}coordsIn(e,t){let i=this.resolveInline(e,t,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),t):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=t1(t);return i[i.length-1]||null}(this)}domIn(e,t){let i=this.resolveInline(e,t);if(i){let{tile:e,offset:r}=i;if(this.dom.contains(e.dom))return e.isText()?new il(e.dom,Math.min(e.dom.nodeValue.length,r)):e.domPosFor(r,t);let n=i.tile.parent,o=!1;for(let e of n.children){if(o)return new il(e.dom,0);e==i.tile&&(o=!0)}}return new il(this.dom,0)}}class rt extends i8{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let i=new rt(t||document.createElement(e.tagName),e);return t||(i.flags|=4),i}}class ri extends i4{constructor(e,t){super(e,t.length),this.text=t}sync(e){2&this.flags||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let i=this.dom.nodeValue.length;e>i&&(e=i);let r=e,n=e,o=0;0==e&&t<0||e==i&&t>=0?!(tB.chrome||tB.gecko)&&(e?(r--,o=1):n<i&&(n++,o=-1)):t<0?r--:n<i&&n++;let s=ii(this.dom,r,n).getClientRects();if(!s.length)return null;let a=s[(o?o<0:t>=0)?0:s.length-1];return tB.safari&&!o&&0==a.width&&(a=Array.prototype.find.call(s,e=>e.width)||a),o?t6(a,o<0):a||null}static of(e,t){let i=new ri(t||document.createTextNode(e),e);return t||(i.flags|=2),i}}class rr extends i4{constructor(e,t,i,r){super(e,t,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return!(48&this.flags)&&(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,i){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(i)return t6(this.dom.getBoundingClientRect(),this.length?0==e:t<=0);{let t=this.dom.getClientRects(),i=null;if(!t.length)return null;let r=!!(16&this.flags)||!(32&this.flags)&&e>0;for(let n=r?t.length-1:0;i=t[n],e>0?0!=n:n!=t.length-1&&!(i.top<i.bottom);n+=r?-1:1);return t6(i,!r)}}get overrideDOMText(){if(!this.length)return Z.empty;let{root:e}=this;if(!e)return Z.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,i,r,n){return!n&&(n=e.toDOM(t),e.editable||(n.contentEditable="false")),new rr(n,i,e,r)}}class rn extends i4{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!1}get overrideDOMText(){return Z.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class ro{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:r,index:n,beforeBreak:o,parents:s}=this;for(;e||t>0;)if(r.isComposite())if(o){if(!e)break;i&&i.break(),e--,o=!1}else if(n==r.children.length){if(!e&&!s.length)break;i&&i.leave(r),o=!!r.breakAfter,({tile:r,index:n}=s.pop()),n++}else{let a=r.children[n],l=a.breakAfter;(t>0?a.length<=e:a.length<e)&&(!i||!1!==i.skip(a,0,a.length)||!a.isComposite)?(o=!!l,n++,e-=a.length):(s.push({tile:r,index:n}),r=a,n=0,i&&a.isComposite()&&i.enter(a))}else if(n==r.length)o=!!r.breakAfter,({tile:r,index:n}=s.pop()),n++;else if(e){let t=Math.min(e,r.length-n);i&&i.skip(r,n,n+t),e-=t,n+=t}else break;return this.tile=r,this.index=n,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class rs{constructor(e,t,i,r){this.from=e,this.to=t,this.wrapper=i,this.rank=r}}class ra{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,r){var n;this.flushBuffer();let o=this.ensureMarks(t,i),s=o.lastChild;s&&s.isText()&&!(8&s.flags)?(this.cache.reused.set(s,2),(o.children[o.children.length-1]=new ri(s.dom,s.text+e)).parent=o):o.append(r||ri.of(e,null==(n=this.cache.find(ri))?void 0:n.dom)),this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?rf(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=i;for(let e=t.marks.length-1;e>=0;e--){let i=t.marks[e],n=r.lastChild;if(n instanceof rt&&n.mark.eq(i.mark))n.dom!=i.dom&&n.setDOM(rf(i.dom)),r=n;else{if(this.cache.reused.get(i)){let e=i4.get(i.dom);e&&e.setDOM(rf(i.dom))}let e=rt.of(i.mark,i.dom);r.append(e),r=e}this.cache.reused.set(i,2)}let n=new ri(e.text,e.text.nodeValue);n.flags|=8,r.append(n)}addInlineWidget(e,t,i){let r=this.afterWidget&&48&e.flags&&(48&this.afterWidget.flags)==(48&e.flags);r||this.flushBuffer();let n=this.ensureMarks(t,i);r||16&e.flags||n.append(this.getBuffer(1)),n.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=rp);let r=re.start(e,t||(null==(i=this.cache.find(re))?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let r=this.curLine;for(let n=e.length-1;n>=0;n--){let o=e[n],s;if(t>0&&(s=r.lastChild)&&s instanceof rt&&s.mark.eq(o))r=s,t--;else{let e=rt.of(o,null==(i=this.cache.find(rt,e=>e.mark.eq(o)))?void 0:i.dom);r.append(e),r=e,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!rh(this.curLine,!1)||"BR"!=e.dom.nodeName&&e.isWidget()&&!(tB.ios&&rh(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(rm,0,32)||new rr(rm.toDOM(),0,rm,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new rs(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&0>(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to);)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let r=t.lastChild;if(i.from<this.pos&&r instanceof i9&&r.wrapper.eq(i.wrapper))t=r;else{let r=i9.of(i.wrapper,null==(e=this.cache.find(i9,e=>e.wrapper.eq(i.wrapper)))?void 0:e.dom);t.append(r),t=r}}return t}blockPosCovered(){let e=this.lastBlock;return null!=e&&!e.breakAfter&&(!e.isWidget()||(160&e.flags)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(rn,void 0,1);return i&&(i.flags=t),i||new rn(t)}flushBuffer(){this.afterWidget&&!(32&this.afterWidget.flags)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class rl{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:r}=this.cursor.next(this.skipCount);if(this.skipCount=0,r)throw Error("Ran out of text content when drawing inline views");this.text=t;let n=this.textOff=Math.min(e,t.length);return i?null:t.slice(0,n)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}}let ru=[rr,re,ri,rt,rn,i9,i7];for(let e=0;e<ru.length;e++)ru[e].bucket=e;class rd{constructor(e){this.view=e,this.buckets=ru.map(()=>[]),this.index=ru.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let r=e.bucket,n=this.buckets[r],o=this.index[r];for(let e=n.length-1;e>=0;e--){let s=(e+o)%n.length,a=n[s];if((!t||t(a))&&!this.reused.has(a))return n.splice(s,1),s<o&&this.index[r]--,this.reused.set(a,i),a}return null}findWidget(e,t,i){let r=this.buckets[0];if(r.length)for(let n=0,o=0;;n++){if(n==r.length){if(o)return null;o=1,n=0}let s=r[n];if(!this.reused.has(s)&&(0==o?s.widget.compare(e):s.widget.constructor==e.constructor&&e.updateDOM(s.dom,this.view)))return r.splice(n,1),n<this.index[0]&&this.index[0]--,this.reused.set(s,1),s.length=t,s.flags=-498&s.flags|i,s}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}}class rc{constructor(e,t,i,r,n){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=n,this.openWidget=!1,this.openMarks=0,this.cache=new rd(e),this.text=new rl(e.state.doc),this.builder=new ra(this.cache,new i7(e,e.contentDOM),te.iter(i)),this.cache.reused.set(t,2),this.old=new ro(t)}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let r=0,n=0,o=0;;){let s=o<e.length?e[o++]:null,a=s?s.fromA:this.old.root.length;if(a>r){let e=a-r;this.preserve(e,!o,!s),r=a,n+=e}if(!s)break;this.forward(s.fromA,s.toA),t&&s.fromA<=t.range.fromA&&s.toA>=t.range.toA?(this.emit(n,t.range.fromB),this.builder.addComposition(t,i),this.emit(t.range.toB,s.toB)):this.emit(n,s.toB),n=s.toB,r=s.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let r=function(e){let t=[];for(let i=e.parents.length;i>1;i--){let r=i==e.parents.length?e.tile:e.parents[i].tile;r instanceof rt&&t.push(r.mark)}return t}(this.old),n=this.openMarks;this.old.advance(e,i?1:-1,{skip:(e,t,i)=>{if(e.isWidget())if(this.openWidget)this.builder.continueWidget(i-t);else{let o=i>0||t<e.length?rr.of(e.widget,this.view,i-t,496&e.flags,this.cache.maybeReuse(e)):this.cache.reuse(e);256&o.flags?(o.flags&=-2,this.builder.addBlockWidget(o)):(this.builder.addInlineWidget(o,r,n),n=r.length)}else if(e.isText())t||i!=e.length?(this.cache.add(e),this.builder.addText(e.text.slice(t,i),r,n)):this.builder.addText(e.text,r,n,this.cache.reuse(e)),n=r.length;else if(e.isLine())e.flags&=-2,this.cache.reused.set(e,1),this.builder.addLine(e);else if(e instanceof rn)this.cache.add(e);else{if(!(e instanceof rt))return!1;this.builder.addMark(e,r,n),this.cache.reused.set(e,1),n=r.length}this.openWidget=!1},enter:e=>{e.isLine()?this.builder.addLineStart(e.attrs,this.cache.maybeReuse(e)):(this.cache.add(e),e instanceof rt&&r.unshift(e.mark)),this.openWidget=!1},leave:e=>{e.isLine()?r.length&&(r.length=n=0):e instanceof rt&&(r.shift(),n=Math.min(n,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,r=this.builder,n=0,o=te.spans(this.decorations,e,t,{point:(e,t,o,s,a,l)=>{var u,d,c;if(o instanceof tK){if(this.disallowBlockEffectsFor[l]){if(o.block)throw RangeError("Block decorations may not be specified via plugins");if(t>this.view.state.doc.lineAt(e).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}if(n=s.length,a>s.length)r.continueWidget(t-e);else{let n,l=o.widget||(o.block?rg.block:rg.inline),d=(n=(u=o).isReplace?64*(u.startSide<0)|128*(u.endSide>0):u.startSide>0?32:16,u.block&&(n|=256),n),c=this.cache.findWidget(l,t-e,d)||rr.of(l,this.view,t-e,d);o.block?(o.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(c)):(r.ensureLine(i),r.addInlineWidget(c,s,a))}i=null}else{let e,t;d=i,e=(c=o).spec.attributes,t=c.spec.class,(e||t)&&(d||(d={class:"cm-line"}),e&&tV(e,d),t&&(d.class+=" "+t)),i=d}t>e&&this.text.skip(t-e)},span:(e,t,n,o)=>{for(let s=e;s<t;){let e=this.text.next(Math.min(512,t-s));null==e?(r.addLineStartIfNotCovered(i),r.addBreak(),s++):(r.ensureLine(i),r.addText(e,n,o),s+=e.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=o>n,this.openMarks=o}forward(e,t){this.old.advance(t-e,1,{skip:(e,t,i)=>{(e.isText()||i==e.length)&&this.cache.add(e)},enter:e=>this.cache.add(e),leave:()=>{},break:()=>{}})}getCompositionContext(e){let t=[],i=null;for(let r=e.parentNode;;r=r.parentNode){let e=i4.get(r);if(r==this.view.contentDOM)break;e instanceof rt?t.push(e):(null==e?void 0:e.isLine())?i=e:"DIV"!=r.nodeName||i||r==this.view.contentDOM?t.push(rt.of(new t$({tagName:r.nodeName.toLowerCase(),attributes:function(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i];t[r.name]=r.value}return t}(r)}),r)):i=new re(r,rp)}return{line:i,marks:t}}}function rh(e,t){let i=e=>{for(let r of e.children)if((t?r.isText():r.length)||i(r))return!0;return!1};return i(e)}let rp={class:"cm-line"};function rf(e){let t=i4.get(e);return t&&t.setDOM(e.cloneNode()),e}class rg extends tG{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}rg.inline=new rg("span"),rg.block=new rg("div");let rm=new class extends tG{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class rv{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=tU.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new i7(e,e.contentDOM),this.updateInner([new i2(0,0,0,e.state.doc.length)],null)}update(e){var t,i,r,n,o,s,a,l,u;let d,c,h,p=e.changedRanges;this.minWidth>0&&p.length&&(p.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let f=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null==(t=this.domChanged)?void 0:t.newSel)?f=this.domChanged.newSel.head:(i=e.changes,r=this.hasComposition,d=!1,r&&i.iterChangedRanges((e,t)=>{e<r.to&&t>r.from&&(d=!0)}),d||e.selectionSet||(f=e.state.selection.main.head)));let g=f>-1?function(e,t,i){let r=rb(e,i);if(!r)return null;let{node:n,from:o,to:s}=r,a=n.nodeValue;if(/[\n\r]/.test(a)||e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc;return{range:new i2(l.mapPos(o),l.mapPos(s),o,s),text:n}}(this.view,e.changes,f):null;if(this.domChanged=null,this.hasComposition){let{from:t,to:i}=this.hasComposition;p=new i2(t,i,e.changes.mapPos(t,-1),e.changes.mapPos(i,1)).addToSet(p.slice())}this.hasComposition=g?{from:g.range.fromB,to:g.range.toB}:null,(tB.ie||tB.chrome)&&!g&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let m=this.decorations,v=this.blockWrappers;this.updateDeco();let y=(n=m,o=this.decorations,s=e.changes,c=new rw,te.compare(n,o,s,c),c.changes);y.length&&(p=i2.extendWithRanges(p,y));let b=(a=v,l=this.blockWrappers,u=e.changes,h=new rC,te.compare(a,l,u,h),h.changes);return b.length&&(p=i2.extendWithRanges(p,b)),g&&!p.some(e=>e.fromA<=g.range.fromA&&e.toA>=g.range.toA)&&(p=g.range.addToSet(p.slice())),(!(2&this.tile.flags)||0!=p.length)&&(this.updateInner(p,g),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let i=this.tile,r=new rc(this.view,i,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=r.run(e,t),ry(i,r.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=tB.chrome||tB.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(r),r&&(r.written||i.selectionRange.focusNode!=r.node||!this.tile.dom.contains(r.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.tile.children)e.isWidget()&&e.widget instanceof rx&&r.push(e.dom);i.updateGaps(r)}updateEditContextFormatting(e){for(let t of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of t.effects)e.is(iB)&&(this.editContextFormatting=e.value)}updateSelection(e=!1,t=!1){var i;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,n=this.view.root.activeElement,o=n==r,s=!o&&!(this.view.state.facet(iH)||r.tabIndex>-1)&&t0(r,this.view.observer.selectionRange)&&!(n&&r.contains(n));if(!(o||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,u,d;if(l.empty?d=u=this.inlineDOMNearPos(l.anchor,l.assoc||1):(d=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),u=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),tB.gecko&&l.empty&&!this.hasComposition&&1==(i=u).node.nodeType&&i.node.firstChild&&(0==i.offset||"false"==i.node.childNodes[i.offset-1].contentEditable)&&(i.offset==i.node.childNodes.length||"false"==i.node.childNodes[i.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(e,u.node.childNodes[u.offset]||null)),u=d=new il(e,0),a=!0}let c=this.view.observer.selectionRange;!a&&c.focusNode&&(t2(u.node,u.offset,c.anchorNode,c.anchorOffset)&&t2(d.node,d.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,l))||(this.view.observer.ignore(()=>{tB.android&&tB.chrome&&r.contains(c.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(c.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let e=tZ(this.view.root);if(e)if(l.empty){if(tB.gecko){var t,i;let e=(t=u.node,i=u.offset,1!=t.nodeType?0:(i&&"false"==t.childNodes[i-1].contentEditable?1:0)|2*(i<t.childNodes.length&&"false"==t.childNodes[i].contentEditable));if(e&&3!=e){let t=(1==e?is:ia)(u.node,u.offset);t&&(u=new il(t.node,t.offset))}}e.collapse(u.node,u.offset),null!=l.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=l.bidiLevel)}else if(e.extend){e.collapse(u.node,u.offset);try{e.extend(d.node,d.offset)}catch(e){}}else{let t=document.createRange();l.anchor>l.head&&([u,d]=[d,u]),t.setEnd(d.node,d.offset),t.setStart(u.node,u.offset),e.removeAllRanges(),e.addRange(t)}s&&this.view.root.activeElement==r&&(r.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(u,d)),this.impreciseAnchor=u.precise?null:new il(c.anchorNode,c.anchorOffset),this.impreciseHead=d.precise?null:new il(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&t2(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=tZ(e.root),{anchorNode:r,anchorOffset:n}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=this.lineAt(t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let u=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(r,n)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return 2&this.tile.dom.compareDocumentPosition(e)?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let n;if(e==i.dom)n=i.dom.childNodes[t];else{let r=0==t8(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==i.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==i.dom.firstChild)return r;for(;n&&!i4.get(n);)n=n.nextSibling;if(!n)return r+i.length;for(let e=0,t=r;;e++){let r=i.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}else if(i.isText())return e==i.dom?r+t:r+(t?i.length:0);else return r}domAtPos(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(r,t)}inlineDOMNearPos(e,t){let i,r=-1,n=!1,o,s=-1,a=!1;return(this.tile.blockTiles((t,l)=>{if(t.isWidget()){if(32&t.flags&&i)return!0;16&t.flags&&(n=!0)}else{let u=l+t.length;if(l<=e&&(i=t,r=e-l,n=u<e),u>=e&&!o&&(o=t,s=e-l,a=l>e),l>e&&o)return!0}}),i||o)?(n&&o?i=null:a&&i&&(o=null),i&&t<0||!o?i.domIn(r,t):o.domIn(s,t)):this.domAtPos(e,t)}coordsAt(e,t){let{tile:i,offset:r}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof rx?null:i.coordsInWidget(r,t,!0):i.coordsIn(r,t)}lineAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return t.isLine()?t:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);return t.isLine()?function e(t,i){if(t.isComposite())for(let r of t.children){if(r.length>=i){let t=e(r,i);if(t)return t}if((i-=r.length)<0)break}else if(t.isText()&&i<t.length){let e=ea(t.text,i);if(e==i)return null;let r=ii(t.dom,i,e).getClientRects();for(let e=0;e<r.length;e++){let t=r[e];if(e==r.length-1||t.top<t.bottom&&t.left<t.right)return t}}return null}(t,i):null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==iu.LTR,l=0,u=(e,d,c)=>{for(let h=0;h<e.children.length&&!(d>r);h++){let r=e.children[h],p=d+r.length,f=r.dom.getBoundingClientRect(),{height:g}=f;if(c&&!h&&(l+=f.top-c.top),r instanceof i9)p>i&&u(r,d,f);else if(d>=i&&(l>0&&t.push(-l),t.push(g+l),l=0,o)){let e=r.dom.lastChild,t=e?t1(e):[];if(t.length){let e=t[t.length-1],i=a?e.right-f.left:f.right-e.left;i>s&&(s=i,this.minWidth=n,this.minWidthFrom=d,this.minWidthTo=p)}}c&&h==e.children.length-1&&(l+=c.bottom-f.bottom),d=p+r.breakAfter}};return u(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return"rtl"==getComputedStyle(t.dom).direction?iu.RTL:iu.LTR}measureTextSize(){let e=this.tile.blockTiles(e=>{if(e.isLine()&&e.children.length&&e.length<=20){let t=0,i;for(let r of e.children){if(!r.isText()||/[^ -~]/.test(r.text))return;let e=t1(r.dom);if(1!=e.length)return;t+=e[0].width,i=e[0].height}if(t)return{lineHeight:e.dom.getBoundingClientRect().height,charWidth:t/e.length,textHeight:i}}});if(e)return e;let t=document.createElement("div"),i,r,n;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let e=t1(t.firstChild)[0];i=t.getBoundingClientRect().height,r=e&&e.width?e.width/27:7,n=e&&e.height?e.height:i,t.remove()}),{lineHeight:i,charWidth:r,textHeight:n}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let n=r==t.viewports.length?null:t.viewports[r],o=n?n.from-1:this.view.state.doc.length;if(o>i){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(tU.replace({widget:new rx(r),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!n)break;i=n.to+1}return tU.set(e)}updateDeco(){let e=1,t=this.view.state.facet(iq).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),i=!1,r=this.view.state.facet(iQ).map((e,t)=>{let r="function"==typeof e;return r&&(i=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(te.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(iK).map(e=>"function"==typeof e?e(this.view):e)}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=t.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let t of this.view.state.facet(iI))try{if(t(this.view,e.range,e))return!0}catch(e){iV(this.view.state,e,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let n=i0(this.view),o={left:i.left-n.left,top:i.top-n.top,right:i.right+n.right,bottom:i.bottom+n.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(e,t,i,r,n,o,s,a){let l=e.ownerDocument,u=l.defaultView||window;for(let d=e,c=!1;d&&!c;)if(1==d.nodeType){let e,h=d==l.body,p=1,f=1;if(h)e=function(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(c=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let t=d.getBoundingClientRect();({scaleX:p,scaleY:f}=t7(d,t)),e={left:t.left,right:t.left+d.clientWidth*p,top:t.top,bottom:t.top+d.clientHeight*f}}let g=0,m=0;if("nearest"==n)t.top<e.top?(m=t.top-(e.top+s),i>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+s)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+s,i<0&&t.top-m<e.top&&(m=t.top-(e.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;m=("center"==n&&r<=o?t.top+r/2-o/2:"start"==n||"center"==n&&i<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(g=t.left-(e.left+o),i>0&&t.right>e.right+g&&(g=t.right-e.right+o)):t.right>e.right&&(g=t.right-e.right+o,i<0&&t.left<e.left+g&&(g=t.left-(e.left+o))):g=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,g||m)if(h)u.scrollBy(g,m);else{let e=0,i=0;if(m){let e=d.scrollTop;d.scrollTop+=m/f,i=(d.scrollTop-e)*f}if(g){let t=d.scrollLeft;d.scrollLeft+=g/p,e=(d.scrollLeft-t)*p}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&1>Math.abs(e-g)&&(r="nearest"),i&&1>Math.abs(i-m)&&(n="nearest")}if(h)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),d=d.assignedSlot||d.parentNode}else if(11==d.nodeType)d=d.host;else break}(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==iu.LTR)}lineHasWidget(e){let t=e=>e.isWidget()||e.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){ry(this.tile)}}function ry(e,t){let i=null==t?void 0:t.get(e);if(1!=i)for(let r of(null==i&&e.destroy(),e.children))ry(r,t)}function rb(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let r=is(i.focusNode,i.focusOffset),n=ia(i.focusNode,i.focusOffset),o=r||n;if(n&&r&&n.node!=r.node){let t=i4.get(n.node);if(!t||t.isText()&&t.text!=n.node.nodeValue)o=n;else if(e.docView.lastCompositionAfterCursor){let e=i4.get(r.node);!e||e.isText()&&e.text!=r.node.nodeValue||(o=n)}}if(e.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let rw=class{constructor(){this.changes=[]}compareRange(e,t){tX(e,t,this.changes)}comparePoint(e,t){tX(e,t,this.changes)}boundChange(e){tX(e,e,this.changes)}};class rC{constructor(){this.changes=[]}compareRange(e,t){tX(e,t,this.changes)}comparePoint(){}boundChange(e){tX(e,e,this.changes)}}class rx extends tG{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function rS(e,t,i){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){let e;for(let n of r.type){if(n.from>t)break;if(!(n.to<t)){if(n.from<t&&n.to>t)return n;(!e||n.type==tW.Text&&(e.type!=n.type||(i<0?n.from<t:n.to>t)))&&(e=n)}}return e||r}return r}function rk(e,t,i,r){let n=e.state.doc.lineAt(t.head),o=e.bidiSpans(n),s=e.textDirectionAt(n.from);for(let a=t,l=null;;){let t=function(e,t,i,r,n){var o;let s=r.head-e.from,a=iw.find(t,s,null!=(o=r.bidiLevel)?o:-1,r.assoc),l=t[a],u=l.side(n,i);if(s==u){let e=a+=n?1:-1;if(e<0||e>=t.length)return null;s=(l=t[a=e]).side(!n,i),u=l.side(n,i)}let d=ea(e.text,s,l.forward(n,i));(d<l.from||d>l.to)&&(d=u),iS=e.text.slice(Math.min(s,d),Math.max(s,d));let c=a==(n?t.length-1:0)?null:t[a+(n?1:-1)];return c&&d==u&&c.level+ +!n<l.level?ex.cursor(c.side(!n,i)+e.from,c.forward(n,i)?1:-1,c.level):ex.cursor(d+e.from,l.forward(n,i)?-1:1,l.level)}(n,o,s,a,i),u=iS;if(!t){if(n.number==(i?e.state.doc.lines:1))return a;u="\n",n=e.state.doc.line(n.number+(i?1:-1)),o=e.bidiSpans(n),t=e.visualLineSide(n,!i)}if(l){if(!l(u))return a}else{if(!r)return t;l=r(u)}a=t}}function rR(e,t,i){for(;;){let r=0;for(let n of e)n.between(t-1,t+1,(e,n,o)=>{if(t>e&&t<n){let o=r||i||(t-e<n-t?-1:1);t=o<0?e:n,r=o}});if(!r)return t}}function rE(e,t){let i=null;for(let r=0;r<t.ranges.length;r++){let n=t.ranges[r],o=null;if(n.empty){let t=rR(e,n.from,0);t!=n.from&&(o=ex.cursor(t,-1))}else{let t=rR(e,n.from,-1),i=rR(e,n.to,1);(t!=n.from||i!=n.to)&&(o=ex.range(n.from==n.anchor?t:i,n.from==n.head?t:i))}o&&(i||(i=t.ranges.slice()),i[r]=o)}return i?ex.create(i,t.mainIndex):t}function rP(e,t,i){let r=rR(e.state.facet(iX).map(t=>t(e)),i.from,t.head>i.from?-1:1);return r==i.from?i:ex.cursor(r,r<i.from?1:-1)}class rM{constructor(e,t){this.pos=e,this.assoc=t}}function rD(e,t,i,r){let n=e.contentDOM.getBoundingClientRect(),o=n.top+e.viewState.paddingTop,{x:s,y:a}=t,l=a-o,u;for(;;){if(l<0)return new rM(0,1);if(l>e.viewState.docHeight)return new rM(e.state.doc.length,-1);if(u=e.elementAtHeight(l),null==r)break;if(u.type==tW.Text){let t=e.docView.coordsAt(r<0?u.from:u.to,r);if(t&&(r<0?t.top<=l+o:t.bottom>=l+o))break}let t=e.viewState.heightOracle.textHeight/2;l=r>0?u.bottom+t:u.top-t}if(e.viewport.from>=u.to||e.viewport.to<=u.from){if(i)return null;if(u.type==tW.Text){let t=function(e,t,i,r,n){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((n-i.top-(e.defaultLineHeight-t)*.5)/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(i.from,i.to);return i.from+tp(s,o,e.state.tabSize)}(e,n,u,s,a);return new rM(t,t==u.from?1:-1)}}return u.type!=tW.Text?l<(u.top+u.bottom)/2?new rM(u.from,1):new rM(u.to,-1):function e(t,i,r,n,o){let s=-1,a=null,l=1e9,u=1e9,d=o,c=o,h=(e,t)=>{for(let i=0;i<e.length;i++){let r=e[i];if(r.top==r.bottom)continue;let h=r.left>n?r.left-n:r.right<n?n-r.right:0,p=r.top>o?r.top-o:r.bottom<o?o-r.bottom:0;r.top<=c&&r.bottom>=d&&(d=Math.min(r.top,d),c=Math.max(r.bottom,c),p=0),(s<0||0>(p-u||h-l))&&(s>=0&&u&&l<h&&a.top<=c-2&&a.bottom>=d+2?u=0:(s=t,l=h,u=p,a=r))}};if(i.isText()){for(let e=0;e<i.length;){let t=ea(i.text,e);if(h(ii(i.dom,e,t).getClientRects(),e),!l&&!u)break;e=t}return n>(a.left+a.right)/2==(rT(t,s+r)==iu.LTR)?new rM(r+ea(i.text,s),-1):new rM(r+s,1)}{if(!i.length)return new rM(r,1);for(let e=0;e<i.children.length;e++){let t=i.children[e];if(!(48&t.flags)&&(h((1==t.dom.nodeType?t.dom:ii(t.dom,0,t.length)).getClientRects(),e),!l&&!u))break}let d=i.children[s],c=i.posBefore(d,r);return d.isComposite()||d.isText()?e(t,d,c,Math.max(a.left,Math.min(a.right,n)),o):n>(a.left+a.right)/2==(rT(t,s+r)==iu.LTR)?new rM(c+d.length,-1):new rM(c,1)}}(e,e.docView.lineAt(u.from),u.from,s,a)}function rT(e,t){let i=e.state.doc.lineAt(t);return e.bidiSpans(i)[iw.find(e.bidiSpans(i),t-i.from,-1,1)].dir}class rO{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(e3.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=""}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let e=this.text.length;this.readNode(r);let n=i4.get(r),o=r.nextSibling;if(o==t){(null==n?void 0:n.breakAfter)&&!o&&this.lineBreak();break}let s=i4.get(o);(n&&s?n.breakAfter:(n?n.breakAfter:t3(r))||t3(o)&&("BR"!=r.nodeName||(null==n?void 0:n.isWidget()))&&this.text.length>e)&&!function(e,t){let i;for(;e!=t&&e;e=e.nextSibling){let t=i4.get(e);if(!(null==t?void 0:t.isWidget()))return!1;t&&(i||(i=[])).push(t)}if(i)for(let e of i){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}(o,t)&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,o=1,s;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(s=r.exec(t))&&(n=s.index,o=s[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);i=n+o}}readNode(e){let t=i4.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(!function(e,t,i){for(;;){if(!t||i<t8(t))return!1;if(t==e)return!0;i=t5(t)+1,t=t.parentNode}}(e,i.node,i.offset)?0:t))}}class r_{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class rA{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=function e(t,i,r,n){if(t.isComposite()){let o=-1,s=-1,a=-1,l=-1;for(let u=0,d=n,c=n;u<t.children.length;u++){let n=t.children[u],h=d+n.length;if(d<i&&h>r)return e(n,i,r,d);if(h>=i&&-1==o&&(o=u,s=d),d>r&&n.dom.parentNode==t.dom){a=u,l=c;break}c=h,d=h+n.breakAfter}return{from:s,to:l<0?n+t.length:l,startDOM:(o?t.children[o-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:a<t.children.length&&a>=0?t.children[a].dom:null}}return t.isText()?{from:n,to:n+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}(e.docView.tile,t,i,0))){let t=n||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:o}=e.observer.selectionRange;return i&&(t.push(new r_(i,r)),(n!=i||o!=r)&&t.push(new r_(n,o))),t}(e),i=new rO(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,r=2==e.length?e[1].pos:i;return i>-1&&r>-1?ex.single(i+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!tJ(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!tJ(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((tB.ios||tB.chrome)&&e.state.selection.main.empty&&i!=r&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(i,r),n=Math.max(i,r),o=s.from-t,a=s.to-n;(0==o||1==o||0==t)&&(0==a||-1==a||n==e.state.doc.length)&&(i=0,r=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ex.range(r,i)):this.newSel=ex.single(r,i)}}}function rF(e,t){let i,{newSel:r}=t,n=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=n.from,l=null;(8===o||tB.android&&t.text.length<s-r)&&(a=n.to,l="end");let u=rL(e.state.doc.sliceString(r,s,""),t.text,a-r,l);u&&(tB.chrome&&13==o&&u.toB==u.from+2&&""==t.text.slice(u.from,u.toB)&&u.toB--,i={from:r+u.from,to:r+u.toA,insert:Z.of(t.text.slice(u.from,u.toB).split(""))})}else r&&(!e.hasFocus&&e.state.facet(iH)||r.main.eq(n))&&(r=null);if(!i&&!r)return!1;if(!i&&t.typeOver&&!n.empty&&r&&r.main.empty?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,n.to)}:(tB.mac||tB.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==i.insert.length&&(r=ex.single(r.main.anchor-1,r.main.head-1)),i={from:i.from,to:i.to,insert:Z.of([i.insert.toString().replace("."," ")])}):i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,n.to))}:e.state.doc.lineAt(n.from).to<n.to&&e.docView.lineHasWidget(n.to)&&e.inputState.insertingTextAt>Date.now()-50?i={from:n.from,to:n.to,insert:e.state.toText(e.inputState.insertingText)}:tB.chrome&&i&&i.from==i.to&&i.from==n.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(r&&(r=ex.single(r.main.anchor-1,r.main.head-1)),i={from:n.from,to:n.to,insert:Z.of([" "])}),i)return rI(e,i,r,o);if(!r||r.main.eq(n))return!1;{let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),"select.pointer"==(i=e.inputState.lastSelectionOrigin)&&(r=rE(e.state.facet(iX).map(t=>t(e)),r))),e.dispatch({selection:r,scrollIntoView:t,userEvent:i}),!0}}function rI(e,t,i,r=-1){let n;if(tB.ios&&e.inputState.flushIOSKey(t))return!0;let o=e.state.selection.main;if(tB.android&&(t.to==o.to&&(t.from==o.from||t.from==o.from-1&&" "==e.state.sliceDoc(t.from,o.from))&&1==t.insert.length&&2==t.insert.lines&&ir(e.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>o.head)&&ir(e.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&0==t.insert.length&&ir(e.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>n||(n=function(e,t,i){let r,n=e.state,o=n.selection.main,s=-1;if(t.from==t.to&&t.from<o.from||t.from>o.to){let i=t.from<o.from?-1:1,r=i<0?o.from:o.to,a=rR(n.facet(iX).map(t=>t(e)),r,i);t.from==a&&(s=a)}if(s>-1)r={changes:t,selection:ex.cursor(t.from+t.insert.length,-1)};else if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let i=o.from<t.from?n.sliceDoc(o.from,t.from):"",s=o.to>t.to?n.sliceDoc(t.to,o.to):"";r=n.replaceSelection(e.state.toText(i+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=n.changes(t),a=i&&i.main.to<=s.newLength?i.main:void 0;if(n.selection.ranges.length>1&&(e.inputState.composing>=0||e.inputState.compositionPendingChange)&&t.to<=o.to+10&&t.to>=o.to-10){let l=e.state.sliceDoc(t.from,t.to),u,d=i&&rb(e,i.main.head);if(d){let e=t.insert.length-(t.to-t.from);u={from:d.from,to:d.to-e}}else u=e.state.doc.lineAt(o.head);let c=o.to-t.to;r=n.changeByRange(i=>{if(i.from==o.from&&i.to==o.to)return{changes:s,range:a||i.map(s)};let r=i.to-c,d=r-l.length;if(e.state.sliceDoc(d,r)!=l||r>=u.from&&d<=u.to)return{range:i};let h=n.changes({from:d,to:r,insert:t.insert}),p=i.to-o.to;return{changes:h,range:a?ex.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):i.map(h)}})}else r={changes:s,selection:a&&n.selection.replaceRange(a)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),n.update(r,{userEvent:a,scrollIntoView:!0})}(e,t,i));return e.state.facet(iD).some(i=>i(e,t.from,t.to,s,a))||e.dispatch(a()),!0}function rL(e,t,i,r){let n=Math.min(e.length,t.length),o=0;for(;o<n&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==n&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){let e=Math.max(0,o-Math.min(s,a));i-=s+e-o}if(s<o&&e.length<t.length){let e=i<=o&&i>=s?o-i:0;o-=e,a=o+(a-s),s=o}else if(a<o){let e=i<=o&&i>=a?o-i:0;o-=e,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}class rN{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,tB.safari&&e.contentDOM.addEventListener("input",()=>null),tB.gecko&&function(e){r7.has(e)||(r7.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i=t.target,r;i!=e.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(r=i4.get(i))&&r.isWidget()&&r.widget.ignoreEvent(t))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e)||"keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let e of i.observers)e(this.view,t);for(let e of i.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=function(e){let t=Object.create(null);function i(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,r=e&&e.plugin.domEventHandlers,n=e&&e.plugin.domEventObservers;if(r)for(let e in r){let n=r[e];n&&i(e).handlers.push(rB(t.value,n))}if(n)for(let e in n){let r=n[e];r&&i(e).observers.push(rB(t.value,r))}}for(let e in rW)i(e).handlers.push(rW[e]);for(let e in rU)i(e).observers.push(rU[e]);return t}(e),i=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let n=!t[e].handlers.length,o=i[e];o&&!o.handlers.length!=n&&(r.removeEventListener(e,this.handleEvent),o=null),o||r.addEventListener(e,this.handleEvent,{passive:n})}for(let e in i)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){let t;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>rz.indexOf(e.keyCode)&&(this.tabFocusMode=-1),tB.android&&tB.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):tB.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=rV.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||rH.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let t=this.pendingIOSKey;return!(!t||"Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,ir(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&!e.synthetic&&(this.composing>0||!!(tB.safari&&!tB.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function rB(e,t){return(i,r)=>{try{return t.call(e,r,i)}catch(e){iV(i.state,e)}}}let rV=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rH="dthko",rz=[16,17,18,20,91,92,224,225];function rj(e){return .7*Math.max(0,e)+8}class rG{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t=e.ownerDocument,i,r;for(let n=e.parentNode;n;)if(n==t.body||i&&r)break;else if(1==n.nodeType)!r&&n.scrollHeight>n.clientHeight&&(r=n),!i&&n.scrollWidth>n.clientWidth&&(i=n),n=n.assignedSlot||n.parentNode;else if(11==n.nodeType)n=n.host;else break;return{x:i,y:r}}(e.contentDOM),this.atoms=e.state.facet(iX).map(t=>t(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(e3.allowMultipleSelections)&&function(e,t){let i=e.state.facet(ik);return i.length?i[0](t):tB.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let r=tZ(e.root);if(!r||0==r.rangeCount)return!0;let n=r.getRangeAt(0).getClientRects();for(let e=0;e<n.length;e++){let i=n[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)&&1==r2(t)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>(t=this.startEvent,Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))))return;this.select(this.lastEvent=e);let i=0,r=0,n=0,o=0,s=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=i0(this.view);e.clientX-l.left<=n+6?i=-rj(n-e.clientX):e.clientX+l.right>=s-6&&(i=rj(e.clientX-s)),e.clientY-l.top<=o+6?r=-rj(o-e.clientY):e.clientY+l.bottom>=a-6&&(r=rj(e.clientY-a)),this.setScrollSpeed(i,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=rE(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,!1===this.dragging))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let rW=Object.create(null),rU=Object.create(null),r$=tB.ie&&tB.ie_version<15||tB.ios&&tB.webkit_version<604;function rq(e,t,i){for(let r of e.facet(t))i=r(i,e);return i}function rK(e,t){t=rq(e.state,iO,t);let{state:i}=e,r,n=1,o=i.toText(t),s=o.lines==i.selection.ranges.length;if(null!=r3&&i.selection.ranges.every(e=>e.empty)&&r3==o.toString()){let e=-1;r=i.changeByRange(r=>{let a=i.doc.lineAt(r.from);if(a.from==e)return{range:r};e=a.from;let l=i.toText((s?o.line(n++).text:t)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ex.cursor(r.from+l.length)}})}else r=s?i.changeByRange(e=>{let t=o.line(n++);return{changes:{from:e.from,to:e.to,insert:t.text},range:ex.cursor(e.from+t.length)}}):i.replaceSelection(o);e.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function rQ(e,t,i,r){if(1==r)return ex.cursor(t,i);{if(2==r)return function(e,t,i=1){let r=e.charCategorizer(t),n=e.doc.lineAt(t),o=t-n.from;if(0==n.length)return ex.cursor(t);0==o?i=1:o==n.length&&(i=-1);let s=o,a=o;i<0?s=ea(n.text,o,!1):a=ea(n.text,o);let l=r(n.text.slice(s,a));for(;s>0;){let e=ea(n.text,s,!1);if(r(n.text.slice(e,s))!=l)break;s=e}for(;a<n.length;){let e=ea(n.text,a);if(r(n.text.slice(a,e))!=l)break;a=e}return ex.range(s+n.from,a+n.from)}(e.state,t,i);let n=e.docView.lineAt(t),o=e.state.doc.lineAt(n?n.posAtEnd:t),s=n?n.posAtStart:o.from,a=n?n.posAtEnd:o.to;return a<e.state.doc.length&&a==o.to&&a++,ex.range(s,a)}}rU.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},rW.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),rU.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},rU.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},rW.mousedown=(e,t)=>{var i,r;let n,o,s;if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let a=null;for(let i of e.state.facet(iE))if(a=i(e,t))break;if(a||0!=t.button||(n=rY(i=e,r=t),o=r2(r),s=i.state.selection,a={update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),s=s.map(e.changes))},get(e,t,r){let a=rY(i,e),l,u=rQ(i,a.pos,a.bias,o);if(n.pos!=a.pos&&!t){let e=rQ(i,n.pos,n.bias,o),t=Math.min(e.from,u.from),r=Math.max(e.to,u.to);u=t<u.from?ex.range(t,r):ex.range(r,t)}return t?s.replaceRange(s.main.extend(u.from,u.to)):r&&1==o&&s.ranges.length>1&&(l=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:r,to:n}=e.ranges[i];if(r<=t&&n>=t)return ex.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i))}return null}(s,a.pos))?l:r?s.addRange(u):ex.create([u])}}),a){let i=!e.hasFocus;e.inputState.startMouseSelection(new rG(e,t,a,i)),i&&e.observer.ignore(()=>{it(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let rX=(e,t,i)=>t>=i.top&&t<=i.bottom&&e>=i.left&&e<=i.right;function rY(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:function(e,t,i,r){let n=e.docView.lineAt(t);if(!n)return 1;let o=t-n.posAtStart;if(0==o)return 1;if(o==n.length)return -1;let s=n.coordsIn(o,-1);if(s&&rX(i,r,s))return -1;let a=n.coordsIn(o,1);return a&&rX(i,r,a)?1:s&&s.bottom>=r?-1:1}(e,i,t.clientX,t.clientY)}}let rZ=tB.ie&&tB.ie_version<=11,rJ=null,r0=0,r1=0;function r2(e){if(!rZ)return e.detail;let t=rJ,i=r1;return rJ=e,r1=Date.now(),r0=!t||i>Date.now()-400&&2>Math.abs(t.clientX-e.clientX)&&2>Math.abs(t.clientY-e.clientY)?(r0+1)%3:1}function r5(e,t,i,r){let n;if(!(i=rq(e.state,iO,i)))return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,a=r&&s&&((n=e.state.facet(iR)).length?n[0](t):tB.mac?!t.altKey:!t.ctrlKey)?{from:s.from,to:s.to}:null,l={from:o,insert:i},u=e.state.changes(a?[a,l]:l);e.focus(),e.dispatch({changes:u,selection:{anchor:u.mapPos(o,-1),head:u.mapPos(o,1)},userEvent:a?"move.drop":"input.drop"}),e.inputState.draggedContent=null}rW.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let r=e.docView.tile.nearest(t.target);if(r&&r.isWidget()){let e=r.posAtStart,t=e+r.length;(e>=i.to||t<=i.from)&&(i=ex.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",rq(e.state,i_,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},rW.dragend=e=>(e.inputState.draggedContent=null,!1),rW.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let r=Array(i.length),n=0,o=()=>{++n==i.length&&r5(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(i[e])}return!0}{let i=t.dataTransfer.getData("Text");if(i)return r5(e,t,i,!0),!0}return!1},rW.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=r$?null:t.clipboardData;return i?(rK(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(!function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),rK(e,i.value)},50)}(e),!1)};let r3=null;rW.copy=rW.cut=(e,t)=>{let{text:i,ranges:r,linewise:n}=function(e){let t=[],i=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),i.push(r));if(!t.length){let n=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>n&&(t.push(o.text),i.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),n=o.number}r=!0}return{text:rq(e,i_,t.join(e.lineBreak)),ranges:i,linewise:r}}(e.state);if(!i&&!n)return!1;r3=n?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=r$?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",i),!0):(!function(e,t){let i=e.dom.parentNode;if(!i)return;let r=i.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,i),!1)};let r4=eq.define();function r8(e,t){let i=[];for(let r of e.facet(iT)){let n=r(e,t);n&&i.push(n)}return i.length?e.update({effects:i,annotations:r4.of(!0)}):null}function r6(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=r8(e.state,t);i?e.dispatch(i):e.update([])}},10)}rU.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),r6(e)},rU.blur=e=>{e.observer.clearSelectionRange(),r6(e)},rU.compositionstart=rU.compositionupdate=e=>{!e.observer.editContext&&(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},rU.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,tB.chrome&&tB.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},rU.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},rW.beforeinput=(e,t)=>{var i,r;let n;if(("insertText"==t.inputType||"insertCompositionText"==t.inputType)&&(e.inputState.insertingText=t.data,e.inputState.insertingTextAt=Date.now()),"insertReplacementText"==t.inputType&&e.observer.editContext){let r=null==(i=t.dataTransfer)?void 0:i.getData("text/plain"),n=t.getTargetRanges();if(r&&n.length){let t=n[0],i=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return rI(e,{from:i,to:o,insert:e.state.toText(r)},null),!0}}if(tB.chrome&&tB.android&&(n=rV.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(n.key,n.keyCode),"Backspace"==n.key||"Delete"==n.key)){let t=(null==(r=window.visualViewport)?void 0:r.height)||0;setTimeout(()=>{var i;((null==(i=window.visualViewport)?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return tB.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),tB.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>rU.compositionend(e,t),20),!1};let r7=new Set,r9=["pre-wrap","normal","pre-line","break-spaces"],ne=!1;class nt{constructor(e){this.lineWrapping=e,this.doc=Z.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return r9.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,i,r,n,o){let s=r9.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=n,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class ni{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class nr{constructor(e,t,i,r,n){this.from=e,this.length=t,this.top=i,this.height=r,this._content=n}get type(){return"number"==typeof this._content?tW.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof tK?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new nr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var nn=((u=nn||(nn={}))[u.ByPos=0]="ByPos",u[u.ByHeight=1]="ByHeight",u[u.ByPosNoHeight=2]="ByPosNoHeight",u);class no{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=2*!!e|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(ne=!0),this.height=e)}replace(e,t,i){return no.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let n=this,o=i.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:u,toB:d}=r[s],c=n.lineAt(a,nn.ByPosNoHeight,i.setDoc(t),0,0),h=c.to>=l?c:n.lineAt(l,nn.ByPosNoHeight,i,0,0);for(d+=h.to-l,l=h.to;s>0&&c.from<=r[s-1].toA;)a=r[s-1].fromA,u=r[s-1].fromB,s--,a<c.from&&(c=n.lineAt(a,nn.ByPosNoHeight,i,0,0));u+=c.from-a,a=c.from;let p=np.build(i.setDoc(o),e,u,d);n=ns(n,n.replace(a,l,p))}return n.updateHeight(i,0)}static empty(){return new nu(0,0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,r=0,n=0;for(;;)if(t==i)if(r>2*n){let n=e[t-1];n.break?e.splice(--t,1,n.left,null,n.right):e.splice(--t,1,n.left,n.right),i+=1+n.break,r-=n.size}else if(n>2*r){let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,n-=t.size}else break;else if(r<n){let i=e[t++];i&&(r+=i.size)}else{let t=e[--i];t&&(n+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,i++),new nc(no.of(e.slice(0,t)),o,no.of(e.slice(i)))}}function ns(e,t){return e==t?e:(e.constructor!=t.constructor&&(ne=!0),t)}no.prototype.size=1;let na=tU.replace({});class nl extends no{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new nr(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,r){return this.spaceAbove&&e<i+this.spaceAbove?new nr(r,0,i,this.spaceAbove,na):this.mainBlock(i,r)}lineAt(e,t,i,r,n){let o=this.mainBlock(r,n);return this.spaceAbove?this.blockAt(0,i,r,n).join(o):o}forEachLine(e,t,i,r,n,o){e<=n+this.length&&t>=n&&o(this.lineAt(0,nn.ByPos,i,r,n))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class nu extends nl{constructor(e,t,i){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,t){return new nr(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,i){let r=i[0];return 1==i.length&&(r instanceof nu||r instanceof nd&&4&r.flags)&&10>Math.abs(this.length-r.length)?(r instanceof nd?r=new nu(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):no.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class nd extends no{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,n=r-i+1,o,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*n);o=t/n,this.length>n+1&&(s=(this.height-t)/(this.length-n-1))}else o=this.height/n;return{firstLine:i,lastLine:r,perLine:o,perChar:s}}blockAt(e,t,i,r){let{firstLine:n,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let n=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),o=t.doc.lineAt(n),l=s+o.length*a,u=Math.max(i,e-l/2);return new nr(o.from,o.length,u,l,0)}{let r=Math.max(0,Math.min(o-n,Math.floor((e-i)/s))),{from:a,length:l}=t.doc.line(n+r);return new nr(a,l,i+s*r,s,0)}}lineAt(e,t,i,r,n){if(t==nn.ByHeight)return this.blockAt(e,i,r,n);if(t==nn.ByPosNoHeight){let{from:t,to:r}=i.doc.lineAt(e);return new nr(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(i,n),l=i.doc.lineAt(e),u=s+l.length*a,d=l.number-o,c=r+s*d+a*(l.from-n-d);return new nr(l.from,l.length,Math.max(r,Math.min(c,r+this.height-u)),u,0)}forEachLine(e,t,i,r,n,o){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(i,n);for(let u=e,d=r;u<=t;){let t=i.doc.lineAt(u);if(u==e){let i=t.number-s;d+=a*i+l*(e-n-i)}let r=a+l*t.length;o(new nr(t.from,t.length,d,r,0)),d+=r,u=t.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let e=i[i.length-1];e instanceof nd?i[i.length-1]=new nd(e.length+r):i.push(null,new nd(r-1))}if(e>0){let t=i[0];t instanceof nd?i[0]=new nd(e+t.length):i.unshift(new nd(e-1),null)}return no.of(i)}decomposeLeft(e,t){t.push(new nd(e-1),null)}decomposeRight(e,t){t.push(null,new nd(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let n=t+this.length;if(r&&r.from<=t+this.length&&r.more){let i=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&i.push(new nd(r.from-t-1).updateHeight(e,t));o<=n&&r.more;){let t=e.doc.lineAt(o).length;i.length&&i.push(null);let n=r.heights[r.index++],a=0;n<0&&(a=-n,n=r.heights[r.index++]),-1==s?s=n:Math.abs(n-s)>=.001&&(s=-2);let l=new nu(t,n,a);l.outdated=!1,i.push(l),o+=t+1}o<=n&&i.push(null,new nd(n-o).updateHeight(e,o));let a=no.of(i);return(s<0||Math.abs(a.height-this.height)>=.001||Math.abs(s-this.heightMetrics(e,t).perLine)>=.001)&&(ne=!0),ns(this,a)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class nc extends no{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,r){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,n,r+this.left.length+this.break)}lineAt(e,t,i,r,n){let o=r+this.left.height,s=n+this.left.length+this.break,a=t==nn.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,i,r,n):this.right.lineAt(e,t,i,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let u=t==nn.ByPosNoHeight?nn.ByPosNoHeight:nn.ByPos;return a?l.join(this.right.lineAt(s,u,i,o,s)):this.left.lineAt(s,u,i,r,n).join(l)}forEachLine(e,t,i,r,n,o){let s=r+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,n,o),t>=a&&this.right.forEachLine(e,t,i,s,a,o);else{let l=this.lineAt(a,nn.ByPos,i,r,n);e<l.from&&this.left.forEachLine(e,l.from-1,i,r,n,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,s,a,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let e of i)n.push(e);if(e>0&&nh(n,o-1),t<this.length){let e=n.length;this.decomposeRight(t,n),nh(n,e)}return no.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++i&&t.push(null),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?no.of(this.break?[e,null,t]:[e,t]):(this.left=ns(this.left,e),this.right=ns(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:n,right:o}=this,s=t+n.length+this.break,a=null;return(r&&r.from<=t+n.length&&r.more?a=n=n.updateHeight(e,t,i,r):n.updateHeight(e,t,i),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,i,r):o.updateHeight(e,s,i),a)?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function nh(e,t){let i,r;null==e[t]&&(i=e[t-1])instanceof nd&&(r=e[t+1])instanceof nd&&e.splice(t-1,3,new nd(i.length+1+r.length))}class np{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof nu?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new nu(e-this.pos,-1,0)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,n=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new nl(o,r,i)):(o||n||r>=5)&&this.addLineDeco(r,n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new nu(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let i=new nd(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof nu)return e;let t=new nu(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof nu||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new nu(0,-1,0));let i=e;for(let e of this.nodes)e instanceof nu&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,r){let n=new np(i,e);return te.spans(t,i,r,n,0),n.finish(i)}}class nf{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&tX(e,t,this.changes,5)}}class ng{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],n=t[i];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(e,t){return tU.replace({widget:new nm(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class nm extends tG{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nv{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=nC,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=iu.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(i$).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new nt(t),this.stateDeco=e.facet(iq).filter(e=>"function"!=typeof e),this.heightMap=no.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle.setDoc(e.doc),[new i2(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=tU.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:i}=this.lineBlockAt(r);e.push(new ny(t,i))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?nC:new nx(this.heightOracle,this.heightMap,this.viewports),2*!e.eq(this.scaler)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(nS(e,this.scaler))})}update(e,t=null){var i,r;let n;this.state=e.state;let o=this.stateDeco;this.stateDeco=this.state.facet(iq).filter(e=>"function"!=typeof e);let s=e.changedRanges,a=i2.extendWithRanges(s,(i=this.stateDeco,r=e?e.changes:ef.empty(this.state.doc.length),n=new nf,te.compare(o,i,r,n,0),n.changes)),l=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);ne=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=l||ne)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let d=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<d.from||t.range.head>d.to)||!this.viewportIsAppropriate(d))&&(d=this.getViewport(0,t));let c=d.from!=this.viewport.from||d.to!=this.viewport.to;this.viewport=d,e.flags|=this.updateForViewport(),(c||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(iF)&&(this.mustEnforceCursorAssoc=!0)}measure(e){var t;let i,r,n=e.contentDOM,o=window.getComputedStyle(n),s=this.heightOracle,a=o.whiteSpace;this.defaultTextDirection="rtl"==o.direction?iu.RTL:iu.LTR;let l=this.heightOracle.mustRefreshForWrapping(a),u=n.getBoundingClientRect(),d=l||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let c=0,h=0;if(u.width&&u.height){let{scaleX:e,scaleY:t}=t7(n,u);(e>.005&&Math.abs(this.scaleX-e)>.005||t>.005&&Math.abs(this.scaleY-t)>.005)&&(this.scaleX=e,this.scaleY=t,c|=16,l=d=!0)}let p=(parseInt(o.paddingTop)||0)*this.scaleY,f=(parseInt(o.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=f)&&(this.paddingTop=p,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(d=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=io(e.scrollDOM);let m=(this.printing?function(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}:function(e,t){let i=e.getBoundingClientRect(),r=e.ownerDocument,n=r.defaultView||window,o=Math.max(0,i.left),s=Math.min(n.innerWidth,i.right),a=Math.max(0,i.top),l=Math.min(n.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let i=t,r=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=r.overflow){let r=i.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=Math.min(t==e.parentNode?n.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?i.offsetParent:i.parentNode}else if(11==t.nodeType)t=t.host;else break;return{left:o-i.left,right:Math.max(o,s)-i.left,top:a-(i.top+t),bottom:Math.max(a,l)-(i.top+t)}})(n,this.paddingTop),v=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(d=!0)),!this.inView&&!this.scrollTarget&&(i=(t=e.dom).getBoundingClientRect(),r=t.ownerDocument.defaultView||window,!(i.left<r.innerWidth)||!(i.right>0)||!(i.top<r.innerHeight)||!(i.bottom>0)))return 0;let w=u.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),d){let t=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(t)&&(l=!0),l||s.lineWrapping&&Math.abs(w-this.contentDOMWidth)>s.charWidth){let{lineHeight:i,charWidth:r,textHeight:n}=e.docView.measureTextSize();(l=i>0&&s.refresh(a,i,r,n,Math.max(5,w/r),t))&&(e.docView.minWidth=0,c|=16)}for(let i of(v>0&&y>0?h=Math.max(v,y):v<0&&y<0&&(h=Math.min(v,y)),ne=!1,this.viewports)){let r=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(l?no.empty().applyChanges(this.stateDeco,Z.empty,this.heightOracle,[new i2(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new ni(i.from,r))}ne&&(c|=2)}let C=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return C&&(2&c&&(c|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),c|=this.updateForViewport()),(2&c||C)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,n=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new ny(r.lineAt(o-1e3*i,nn.ByHeight,n,0,0).from,r.lineAt(s+(1-i)*1e3,nn.ByHeight,n,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let i=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=r.lineAt(e,nn.ByPos,n,0,0),s;s="center"==t.y?(o.top+o.bottom)/2-i/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-i,a=new ny(r.lineAt(s-500,nn.ByHeight,n,0,0).from,r.lineAt(s+i+500,nn.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ny(this.heightMap.lineAt(i,nn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,nn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,nn.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,nn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=s+Math.max(10,Math.min(i,250)))&&r>o-2e3&&n<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new ng(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=iu.LTR&&!i)return[];let s=[],a=(r,o,l,u)=>{if(o-r<n)return;let d=this.state.selection.main,c=[d.from];for(let e of(d.empty||c.push(d.to),c))if(e>r&&e<o){a(r,e-10,l,u),a(e+10,o,l,u);return}let h=function(e,t){for(let i of e)if(t(i))return i}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<n&&Math.abs(e.to-o)<n&&!c.some(t=>e.from<t&&e.to>t));if(!h){if(o<l.to&&t&&i&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(ex.cursor(o),!1,!0).head;e>r&&(o=e)}let e=this.gapSize(l,r,o,u),n=i||e<2e6?e:2e6;h=new ng(r,o,e,n)}s.push(h)},l=t=>{var n,s,l;let u,d,c,h,p;if(t.length<o||t.type!=tW.Text)return;let f=(n=t.from,s=t.to,l=this.stateDeco,c=[],h=n,p=0,te.spans(l,n,s,{span(){},point(e,t){e>h&&(c.push({from:h,to:e}),p+=e-h),h=t}},20),h<s&&(c.push({from:h,to:s}),p+=s-h),{total:p,ranges:c});if(f.total<o)return;let g=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let e,i,n=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=g){let r=nw(f,g),o=((this.visibleBottom-this.visibleTop)/2+n)/t.height;e=r-o,i=r+o}else e=(this.visibleTop-t.top-n)/t.height,i=(this.visibleBottom-t.top+n)/t.height;u=nb(f,e),d=nb(f,i)}else{let i,n,o=f.total*this.heightOracle.charWidth,s=r*this.heightOracle.charWidth,a=0;if(o>2e6)for(let i of e)i.from>=t.from&&i.from<t.to&&i.size!=i.displaySize&&i.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=i.size-i.displaySize);let l=this.pixelViewport.left+a,c=this.pixelViewport.right+a;if(null!=g){let e=nw(f,g),t=((c-l)/2+s)/o;i=e-t,n=e+t}else i=(l-s)/o,n=(c+s)/o;u=nb(f,i),d=nb(f,n)}u>t.from&&a(t.from,u,t,f),d<t.to&&a(d,t.to,t,f)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return s}gapSize(e,t,i,r){let n=nw(r,i)-nw(r,t);return this.heightOracle.lineWrapping?e.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(e){ng.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=tU.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];te.spans(t,this.viewport.from,this.viewport.to,{span(e,t){i.push({from:e,to:t})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let t=0;t<i.length&&!(8&r);t++){let n=this.visibleRanges[t],o=i[t];(n.from!=o.from||n.to!=o.to)&&(r|=4,e&&e.mapPos(n.from,-1)==o.from&&e.mapPos(n.to,1)==o.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||nS(this.heightMap.lineAt(e,nn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||nS(this.heightMap.lineAt(this.scaler.fromDOM(e),nn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return nS(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ny{constructor(e,t){this.from=e,this.to=t}}function nb({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let r=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:n}=t[e],o=n-i;if(r<=o)return i+r;r-=o}}function nw(e,t){let i=0;for(let{from:r,to:n}of e.ranges){if(t<=n){i+=t-r;break}i+=n-r}return i/e.total}let nC={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class nx{constructor(e,t,i){let r=0,n=0,o=0;for(let s of(this.viewports=i.map(({from:i,to:n})=>{let o=t.lineAt(i,nn.ByPos,e,0,0).top,s=t.lineAt(n,nn.ByPos,e,0,0).bottom;return r+=s-o,{from:i,to:n,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r),this.viewports))s.domTop=o+(s.top-n)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),n=s.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return r+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,r=n.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-r)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,r=n.domBottom}}eq(e){return e instanceof nx&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to)}}function nS(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),r=t.toDOM(e.bottom);return new nr(e.from,e.length,i,r-i,Array.isArray(e._content)?e._content.map(e=>nS(e,t)):e._content)}let nk=eR.define({combine:e=>e.join(" ")}),nR=eR.define({combine:e=>e.indexOf(!0)>-1}),nE=tv.newName(),nP=tv.newName(),nM=tv.newName(),nD={"&light":"."+nP,"&dark":"."+nM};function nT(e,t,i){return new tv(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!i||!i[t])throw RangeError(`Unsupported selector: ${t}`);return i[t]}):e+" "+t})}let nO=nT("."+nE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},nD),n_={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nA=tB.ie&&tB.ie_version<=11;class nF{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new t9,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(tB.ie&&tB.ie_version<=11||tB.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&tB.android&&!1!==e.constructor.EDIT_CONTEXT&&!(tB.chrome&&tB.chrome_version<126)&&(this.editContext=new nN(e),e.state.facet(iH)&&(e.contentDOM.editContext=this.editContext.editContext)),nA&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null==(e=this.view.docView)?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){for(let t of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(iH)?i.root.activeElement!=this.dom:!t0(this.dom,r))return;let n=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(n&&n.isWidget()&&n.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(tB.ie&&tB.ie_version<=11||tB.android&&tB.chrome)&&!i.state.selection.main.empty&&r.focusNode&&t2(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=tZ(e.root);if(!t)return!1;let i=tB.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return nL(e,i)}let i=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),i?nL(e,i):null}(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=t0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,r=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=r)return!1;for(r=Math.min(r,t8(i));;)if(r){if(1!=i.nodeType)return!1;let e=i.childNodes[r-1];"false"==e.contentEditable?r--:r=t8(i=e)}else{if(i==e)return!0;r=t5(i),i=i.parentNode}}(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(11==i.nodeType)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,n_),nA&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nA&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&ir(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null==(i=this.delayedAndroidKey)?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let n of e){let e=this.readMutation(n);e&&(e.typeOver&&(r=!0),-1==t?{from:t,to:i}=e:(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&t0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new rA(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=rF(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty("attributes"==e.type),"childList"==e.type){let i=nI(t,e.previousSibling||e.target.previousSibling,-1),r=nI(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(iH)!=e.state.facet(iH)&&(e.view.contentDOM.editContext=e.state.facet(iH)?this.editContext.editContext:null))}destroy(){var e,t,i;for(let r of(this.stop(),null==(e=this.intersection)||e.disconnect(),null==(t=this.gapIntersection)||t.disconnect(),null==(i=this.resizeScroll)||i.disconnect(),this.scrollTargets))r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function nI(e,t,i){for(;t;){let r=i4.get(t);if(r&&r.parent==e)return r;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}function nL(e,t){let i=t.startContainer,r=t.startOffset,n=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor,1);return t2(s.node,s.offset,n,o)&&([i,r,n,o]=[n,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:o}}class nN{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let i in this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:n,head:o}=r,s=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let l=a-s>i.text.length;s==this.from&&n<this.from?s=n:a==this.to&&n>this.to&&(a=n);let u=rL(e.state.sliceDoc(s,a),i.text,(l?r.from:r.to)-s,l?"end":null);if(!u){let t=ex.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));t.main.eq(r)||e.dispatch({selection:t,userEvent:"select"});return}let d={from:u.from+s,to:u.toA+s,insert:Z.of(i.text.slice(u.from,u.toB).split("\n"))};if((tB.mac||tB.android)&&d.from==o-1&&/^\. ?$/.test(i.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(d={from:s,to:a,insert:Z.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let t=this.to-this.from+(d.to-d.from+d.insert.length);rI(e,d,ex.single(this.toEditorPos(i.selectionStart,t),this.toEditorPos(i.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],n=null;for(let t=this.toEditorPos(i.rangeStart),o=this.toEditorPos(i.rangeEnd);t<o;t++){let i=e.coordsForChar(t);n=i&&new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)||n||new DOMRect,r.push(n)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=t=>{let i=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(r)){let n=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(n<o){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(r)?1:2}px`;i.push(tU.mark({attributes:{style:e}}).range(n,o))}}}e.dispatch({effects:iB.of(tU.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}},this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=tZ(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((n,o,s,a,l)=>{if(i)return;let u=l.length-(o-n);if(r&&o>=r.to)if(r.from==n&&r.to==o&&r.insert.eq(l)){r=this.pendingContextChange=null,t+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(n+=t,(o+=t)<=this.from)this.from+=u,this.to+=u;else if(n<this.to){if(n<this.from||o>this.to||this.to-this.from+l.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(o),l.toString()),this.to+=u}t+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class nB{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;for(let t of(this.dispatchTransactions=e.dispatchTransactions||i&&(e=>e.forEach(e=>i(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new nv(e.state||e3.create(e)),e.scrollTo&&e.scrollTo.is(iN)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ij).map(e=>new iW(e)),this.plugins))t.update(this);this.observer=new nF(this),this.inputState=new rN(this),this.inputState.ensureHandlers(this.plugins),this.docView=new rv(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null==(t=document.fonts)?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof eY?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,n=this.state;for(let t of e){if(t.startState!=n)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}if(this.destroyed){this.viewState.state=n;return}let o=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(r4))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,(a=r8(n,o))||(s=1));let l=this.observer.delayedAndroidKey,u=null;if(l?(this.observer.clearDelayedAndroidKey(),((u=this.observer.readChange())&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(u=null)):this.observer.clear(),n.facet(e3.phrases)!=this.state.facet(e3.phrases))return this.setState(n);r=i5.create(this,n,e),r.flags|=s;let d=this.viewState.scrollTarget;try{for(let t of(this.updateState=2,e)){if(d&&(d=d.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;d=new iL(e.empty?e:ex.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(iN)&&(d=e.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=nz.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(i1)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(nk)!=r.state.facet(nk)&&(this.viewState.mustMeasureContent=!0),(t||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let e of this.state.facet(iM))try{e(r)}catch(e){iV(this.state,e,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!rF(this,u)&&l.force&&ir(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let t of(this.viewState=new nv(e),this.plugins=e.facet(ij).map(e=>new iW(e)),this.pluginMap.clear(),this.plugins))t.update(this);this.docView.destroy(),this.docView=new rv(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ij),i=e.state.facet(ij);if(t!=i){let r=[];for(let n of i){let i=t.indexOf(n);if(i<0)r.push(new iW(n));else{let t=this.plugins[i];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){iV(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(io(i))n=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);n=e.from,o=e.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(e=>{try{return e.read(this)}catch(e){return iV(this.state,e),nH}}),u=i5.create(this,this.state,[]),d=!1;u.flags|=s,t?t.flags|=s:t=u,this.updateState=2,!u.empty&&(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),(d=this.docView.update(u))&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=nH)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){iV(this.state,e)}if(d&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let e=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-o;if(e>1||e<-1){i.scrollTop=(r+=e)/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(iM))e(t)}get themeClasses(){return nE+" "+(this.state.facet(nR)?nM:nP)+" "+this.state.facet(nk)}updateAttrs(){let e=nj(this,iU,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(iH)?"true":"false",class:"cm-content",style:`${tB.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),nj(this,i$,t);let i=this.observer.ignore(()=>{let i=tj(this.contentDOM,this.contentAttrs,t),r=tj(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)e.is(nB.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(i1);let e=this.state.facet(nB.cspNonce);tv.mount(this.root,this.styleModules.concat(nO).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if((this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e)&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return rP(this,e,rk(this,e,t,i))}moveByGroup(e,t){return rP(this,e,rk(this,e,t,t=>{var i;let r,n;return i=e.head,n=(r=this.state.charCategorizer(i))(t),e=>{let t=r(e);return n==e2.Space&&(n=t),n==t}}))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),n=i[t?i.length-1:0];return ex.cursor(n.side(t,r)+e.from,n.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return function(e,t,i,r){let n=rS(e,t.head,t.assoc||-1),o=r&&n.type==tW.Text&&(e.lineWrapping||n.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(n.from),s=e.posAtCoords({x:i==(r==iu.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ex.cursor(s,i?-1:1)}return ex.cursor(i?n.to:n.from,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return rP(this,e,function(e,t,i,r){let n=t.head,o=i?1:-1;if(n==(i?e.state.doc.length:0))return ex.cursor(n,t.assoc);let s=t.goalColumn,a,l=e.contentDOM.getBoundingClientRect(),u=e.coordsAtPos(n,t.assoc||-1),d=e.documentTop;if(u)null==s&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let t=e.viewState.lineBlockAt(n);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(n-t.from))),a=(o<0?t.top:t.bottom)+d}let c=l.left+s,h=null!=r?r:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let i=rD(e,{x:c,y:a+(h+t)*o},!1,o);return ex.cursor(i.pos,i.assoc,void 0,s)}}(this,e,t,i))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let i=rD(this,e,t);return i&&i.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),rD(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),n=this.bidiSpans(r);return t6(i,n[iw.find(n,e-r.from,-1,t)].dir==iu.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(iA)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>nV)return ix(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||function e(t,i){if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],o=i[r];if(n.from!=o.from||n.to!=o.to||n.direction!=o.direction||!e(n.inner,o.inner))return!1}return!0}(r.isolates,i=iZ(this,e))))return r.order;i||(i=iZ(this,e));let r=function(e,t,i){if(!e)return[new iw(0,0,+(t==ic))];if(t==id&&!i.length&&!ib.test(e))return ix(e.length);if(i.length)for(;e.length>iC.length;)iC[iC.length]=256;let r=[],n=+(t!=id);return function e(t,i,r,n,o,s,a){let l=i%2?2:1;!function(e,t,i,r,n){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:t,a=o<r.length?r[o].from:i,l=o?256:n;for(let t=s,i=l,r=l;t<a;t++){let n=iy(e.charCodeAt(t));512==n?n=i:8==n&&4==r&&(n=16),iC[t]=4==n?2:n,7&n&&(r=n),i=n}for(let e=s,t=l,r=l;e<a;e++){let n=iC[e];if(128==n)e<a-1&&t==iC[e+1]&&24&t?n=iC[e]=t:iC[e]=256;else if(64==n){let n=e+1;for(;n<a&&64==iC[n];)n++;let o=e&&8==t||n<i&&8==iC[n]?1==r?1:8:256;for(let t=e;t<n;t++)iC[t]=o;e=n-1}else 8==n&&1==r&&(iC[e]=1);t=n,7&n&&(r=n)}}}(t,o,s,n,l),function(e,t,i,r,n){let o=1==n?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let u=s?r[s-1].to:t,d=s<r.length?r[s].from:i;for(let t=u,i,r,s;t<d;t++)if(r=im[i=e.charCodeAt(t)])if(r<0){for(let e=a-3;e>=0;e-=3)if(iv[e+1]==-r){let i=iv[e+2],r=2&i?n:4&i?1&i?o:n:0;r&&(iC[t]=iC[iv[e]]=r),a=e;break}}else if(189==iv.length)break;else iv[a++]=t,iv[a++]=i,iv[a++]=l;else if(2==(s=iC[t])||1==s){let e=s==n;l=+!e;for(let t=a-3;t>=0;t-=3){let i=iv[t+2];if(2&i)break;if(e)iv[t+2]|=2;else{if(4&i)break;iv[t+2]|=4}}}}}(t,o,s,n,l),function(e,t,i,r){for(let n=0,o=r;n<=i.length;n++){let s=n?i[n-1].to:e,a=n<i.length?i[n].from:t;for(let l=s;l<a;){let s=iC[l];if(256==s){let s=l+1;for(;;)if(s==a){if(n==i.length)break;s=i[n++].to,a=n<i.length?i[n].from:t}else if(256==iC[s])s++;else break;let u=1==o,d=u==((s<t?iC[s]:r)==1)?u?1:2:r;for(let t=s,r=n,o=r?i[r-1].to:e;t>l;)t==o&&(t=i[--r].from,o=r?i[r-1].to:e),iC[--t]=d;l=s}else o=s,l++}}}(o,s,n,l),function t(i,r,n,o,s,a,l){let u=o%2?2:1;if(o%2==s%2)for(let d=r,c=0;d<n;){let r=!0,h=!1;if(c==a.length||d<a[c].from){let e=iC[d];e!=u&&(r=!1,h=16==e)}let p=r||1!=u?null:[],f=r?o:o+1,g=d;r:for(;;)if(c<a.length&&g==a[c].from){if(h)break;let t=a[c];if(!r)for(let e=t.to,i=c+1;;){if(e==n)break r;if(i<a.length&&a[i].from==e)e=a[i++].to;else if(iC[e]==u)break r;else break}c++,p?p.push(t):(t.from>d&&l.push(new iw(d,t.from,f)),e(i,t.direction==id!=!(f%2)?o+1:o,s,t.inner,t.from,t.to,l),d=t.to),g=t.to}else if(g==n||(r?iC[g]!=u:iC[g]==u))break;else g++;p?t(i,d,g,o+1,s,p,l):d<g&&l.push(new iw(d,g,f)),d=g}else for(let d=n,c=a.length;d>r;){let n=!0,h=!1;if(!c||d>a[c-1].to){let e=iC[d-1];e!=u&&(n=!1,h=16==e)}let p=n||1!=u?null:[],f=n?o:o+1,g=d;r:for(;;)if(c&&g==a[c-1].to){if(h)break;let t=a[--c];if(!n)for(let e=t.from,i=c;;){if(e==r)break r;if(i&&a[i-1].to==e)e=a[--i].from;else if(iC[e-1]==u)break r;else break}p?p.push(t):(t.to<d&&l.push(new iw(t.to,d,f)),e(i,t.direction==id!=!(f%2)?o+1:o,s,t.inner,t.from,t.to,l),d=t.from),g=t.from}else if(g==r||(n?iC[g-1]!=u:iC[g-1]==u))break;else g--;p?t(i,g,d,o+1,s,p,l):g<d&&l.push(new iw(g,d,f)),d=g}}(t,o,s,i,r,n,a)}(e,n,n,i,0,e.length,r),r}(e.text,t,i);return this.bidiCache.push(new nz(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||tB.safari&&(null==(e=this.inputState)?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{it(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return iN.of(new iL("number"==typeof e?ex.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return iN.of(new iL(ex.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return iG.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return iG.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=tv.newName(),r=[nk.of(i),i1.of(nT(`.${i}`,e))];return t&&t.dark&&r.push(nR.of(!0)),r}static baseTheme(e){return eA.lowest(i1.of(nT("."+nE,e,nD)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&i4.get(i)||i4.get(e);return(null==(t=null==r?void 0:r.root)?void 0:t.view)||null}}nB.styleModule=i1,nB.inputHandler=iD,nB.clipboardInputFilter=iO,nB.clipboardOutputFilter=i_,nB.scrollHandler=iI,nB.focusChangeEffect=iT,nB.perLineTextDirection=iA,nB.exceptionSink=iP,nB.updateListener=iM,nB.editable=iH,nB.mouseSelectionStyle=iE,nB.dragMovesSelection=iR,nB.clickAddsSelectionRange=ik,nB.decorations=iq,nB.blockWrappers=iK,nB.outerDecorations=iQ,nB.atomicRanges=iX,nB.bidiIsolatedRanges=iY,nB.scrollMargins=iJ,nB.darkTheme=nR,nB.cspNonce=eR.define({combine:e=>e.length?e[0]:""}),nB.contentAttributes=i$,nB.editorAttributes=iU,nB.lineWrapping=nB.contentAttributes.of({class:"cm-lineWrapping"}),nB.announce=eX.define();let nV=4096,nH={};class nz{constructor(e,t,i,r,n,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=n,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:iu.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir!=r||t.touchesRange(o.from,o.to)||i.push(new nz(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function nj(e,t,i){for(let r=e.state.facet(t),n=r.length-1;n>=0;n--){let t=r[n],o="function"==typeof t?t(e):t;o&&tV(o,i)}return i}let nG=tB.mac?"mac":tB.windows?"win":tB.linux?"linux":"key";function nW(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}let nU=eA.default(nB.domEventHandlers({keydown:(e,t)=>nY(nK(t.state),e,t,"editor")})),n$=eR.define({enables:nU}),nq=new WeakMap;function nK(e){let t=e.facet(n$),i=nq.get(t);return i||nq.set(t,i=function(e,t=nG){let i=Object.create(null),r=Object.create(null),n=(e,t)=>{let i=r[e];if(null==i)r[e]=t;else if(i!=t)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s,a)=>{var l,u;let d=i[e]||(i[e]=Object.create(null)),c=r.split(/ (?!$)/).map(e=>(function(e,t){let i,r,n,o,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(let e=0;e<s.length-1;++e){let a=s[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))n=!0;else if(/^mod$/i.test(a))"mac"==t?o=!0:r=!0;else throw Error("Unrecognized modifier name: "+a)}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),n&&(a="Shift-"+a),a})(e,t));for(let t=1;t<c.length;t++){let i=c.slice(0,t).join(" ");n(i,!0),d[i]||(d[i]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=nQ={view:t,prefix:i,scope:e};return setTimeout(()=>{nQ==r&&(nQ=null)},4e3),!0}]})}let h=c.join(" ");n(h,!1);let p=d[h]||(d[h]={preventDefault:!1,stopPropagation:!1,run:(null==(u=null==(l=d._any)?void 0:l.run)?void 0:u.slice())||[]});o&&p.run.push(o),s&&(p.preventDefault=!0),a&&(p.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:n}=r;for(let t in e)e[t].run.push(e=>n(e,nX))}let n=r[t]||r.key;if(n)for(let t of e)o(t,n,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(t,"Shift-"+n,r.shift,r.preventDefault,r.stopPropagation)}return i}(t.reduce((e,t)=>e.concat(t),[]))),i}let nQ=null,nX=null;function nY(e,t,i,r){var n;nX=t;let o=("Esc"==(n=!(tx&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||tS&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?tC:tw)[t.keyCode]||t.key||"Unidentified")&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n),s=ed(el(o,0))==o.length&&" "!=o,a="",l=!1,u=!1,d=!1;nQ&&nQ.view==i&&nQ.scope==r&&(a=nQ.prefix+" ",0>rz.indexOf(t.keyCode)&&(u=!0,nQ=null));let c=new Set,h=e=>{if(e){for(let t of e.run)if(!c.has(t)&&(c.add(t),t(i)))return e.stopPropagation&&(d=!0),!0;e.preventDefault&&(e.stopPropagation&&(d=!0),u=!0)}return!1},p=e[r],f,g;return p&&(h(p[a+nW(o,t,!s)])?l=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(tB.windows&&t.ctrlKey&&t.altKey)&&!(tB.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(f=tw[t.keyCode])&&f!=o?h(p[a+nW(f,t,!0)])?l=!0:t.shiftKey&&(g=tC[t.keyCode])!=o&&g!=f&&h(p[a+nW(g,t,!1)])&&(l=!0):s&&t.shiftKey&&h(p[a+nW(o,t,!0)])&&(l=!0),!l&&h(p._any)&&(l=!0)),u&&(l=!0),l&&d&&t.stopPropagation(),nX=null,l}class nZ{constructor(e,t,i,r,n){this.className=e,this.left=t,this.top=i,this.width=r,this.height=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(!i.empty)return function(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let r=Math.max(i.from,e.viewport.from),n=Math.min(i.to,e.viewport.to),o=e.textDirection==iu.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=nJ(e),u=s.querySelector(".cm-line"),d=u&&window.getComputedStyle(u),c=a.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),h=a.right-(d?parseInt(d.paddingRight):0),p=rS(e,r,1),f=rS(e,n,-1),g=p.type==tW.Text?p:null,m=f.type==tW.Text?f:null;if(g&&(e.lineWrapping||p.widgetLineBreaks)&&(g=n0(e,r,1,g)),m&&(e.lineWrapping||f.widgetLineBreaks)&&(m=n0(e,n,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return y(b(i.from,i.to,g));{let t=g?b(i.from,null,g):w(p,!1),r=m?b(null,i.to,m):w(f,!0),n=[];return(g||p).to<(m||f).from-(g&&m?1:0)||p.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?n.push(v(c,t.bottom,h,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==tW.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(n).concat(y(r))}function v(e,i,r,n){return new nZ(t,e-l.left,i-l.top,r-e,n-i)}function y({top:e,bottom:t,horizontal:i}){let r=[];for(let n=0;n<i.length;n+=2)r.push(v(i[n],e,i[n+1],t));return r}function b(t,i,r){let n=1e9,s=-1e9,a=[];function l(t,i,l,u,d){let p=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(l,l==r.from?2:-2);p&&f&&(n=Math.min(p.top,f.top,n),s=Math.max(p.bottom,f.bottom,s),d==iu.LTR?a.push(o&&i?c:p.left,o&&u?h:f.right):a.push(!o&&u?c:f.left,!o&&i?h:p.right))}let u=null!=t?t:r.from,d=null!=i?i:r.to;for(let r of e.visibleRanges)if(r.to>u&&r.from<d)for(let n=Math.max(r.from,u),o=Math.min(r.to,d);;){let r=e.state.doc.lineAt(n);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>n&&l(Math.max(e,n),null==t&&e<=u,Math.min(a,o),null==i&&a>=d,s.dir)}if((n=r.to+1)>=o)break}return 0==a.length&&l(u,null==t,d,null==i,e.textDirection),{top:n,bottom:s,horizontal:a}}function w(e,t){let i=a.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t,i);{let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let n=nJ(e);return[new nZ(t,r.left-n.left,r.top-n.top,null,r.bottom-r.top)]}}}function nJ(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==iu.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function n0(e,t,i,r){let n=e.coordsAtPos(t,2*i);if(!n)return r;let o=e.dom.getBoundingClientRect(),s=(n.top+n.bottom)/2,a=e.posAtCoords({x:o.left+1,y:s}),l=e.posAtCoords({x:o.right-1,y:s});return null==a||null==l?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}class n1{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(n2)!=e.state.facet(n2)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(n2);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{var i;return i=this.drawn[t],!(e.constructor==i.constructor&&e.eq(i))})){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e,tB.safari&&tB.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let n2=eR.define();function n5(e){return[iG.define(t=>new n1(t,e)),n2.of(e)]}let n3=eR.define({combine:e=>e4(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function n4(e){return e.startState.facet(n3)!=e.state.facet(n3)}let n8=n5({above:!0,markers(e){let{state:t}=e,i=t.facet(n3),r=[];for(let n of t.selection.ranges){let o=n==t.selection.main;if(n.empty||i.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=n.empty?n:ex.cursor(n.head,n.head>n.anchor?-1:1);for(let n of nZ.forRange(e,t,i))r.push(n)}}return r},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=n4(e);return i&&n6(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){n6(t.state,e)},class:"cm-cursorLayer"});function n6(e,t){t.style.animationDuration=e.facet(n3).cursorBlinkRate+"ms"}let n7=n5({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:nZ.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||n4(e),class:"cm-selectionLayer"}),n9=eA.highest(nB.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),oe=eX.define({map:(e,t)=>null==e?null:t.mapPos(e)}),ot=eO.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(oe)?t.value:e,e))}),oi=iG.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(ot);null==i?null!=this.cursor&&(null==(t=this.cursor)||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(ot)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(ot),i=null!=t&&e.coordsAtPos(t);if(!i)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:i.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:i.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:i.bottom-i.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:i}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/i+"px",this.cursor.style.height=e.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(ot)!=e&&this.view.dispatch({effects:oe.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function or(e,t,i,r,n){t.lastIndex=0;for(let o=e.iterRange(i,r),s=i,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=t.exec(o.value);)n(s+a.index,a)}class on{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:n,maxLength:o=1e3}=e;if(!t.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,i,n)=>r(n,i,i+e[0].length,e,t);else if("function"==typeof i)this.addMatch=(e,t,r,n)=>{let o=i(e,t,r);o&&n(r,r+e[0].length,o)};else if(i)this.addMatch=(e,t,r,n)=>n(r,r+e[0].length,i);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=n,this.maxLength=o}createDeco(e){let t=new tt,i=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let i=e.visibleRanges;if(1==i.length&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let r=[];for(let{from:n,to:o}of i)n=Math.max(e.state.doc.lineAt(n).from,n-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=n?r[r.length-1].to=o:r.push({from:n,to:o});return r}(e,this.maxLength))or(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return(e.docChanged&&e.changes.iterChanges((t,n,o,s)=>{s>=e.view.viewport.from&&o<=e.view.viewport.to&&(i=Math.min(o,i),r=Math.max(s,r))}),e.viewportMoved||r-i>1e3)?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let n of e.visibleRanges){let o=Math.max(n.from,i),s=Math.min(n.to,r);if(s>=o){let i=e.state.doc.lineAt(o),r=i.to<s?e.state.doc.lineAt(s):i,a=Math.max(n.from,i.from),l=Math.min(n.to,r.to);if(this.boundary){for(;o>i.from;o--)if(this.boundary.test(i.text[o-1-i.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let u=[],d,c=(e,t,i)=>u.push(i.range(e,t));if(i==r)for(this.regexp.lastIndex=a-i.from;(d=this.regexp.exec(i.text))&&d.index<l-i.from;)this.addMatch(d,e,d.index+i.from,c);else or(e.state.doc,this.regexp,a,l,(t,i)=>this.addMatch(i,e,t,c));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}let oo=null!=/x/.unicode?"gu":"g",os=RegExp("[\0-\b\n-\x1f-\u2028\u2029\uFEFF-]",oo),oa={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},ol=null,ou=eR.define({combine(e){let t=e4(e,{render:null,specialChars:os,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==ol&&"undefined"!=typeof document&&document.body){let t=document.body.style;ol=(null!=(e=t.tabSize)?e:t.MozTabSize)!=null}return ol||!1}())&&(t.specialChars=RegExp("	|"+t.specialChars.source,oo)),t.addSpecialChars&&(t.specialChars=RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,oo)),t}}),od=null;class oc extends tG{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){var t;let i=(t=this.code)>=32?"":10==t?"":String.fromCharCode(9216+t),r=e.state.phrase("Control character")+" "+(oa[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,r,i);if(n)return n;let o=document.createElement("span");return o.textContent=i,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class oh extends tG{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}let op=tU.line({class:"cm-activeLine"}),of=iG.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let r of e.state.selection.ranges){let n=e.lineBlockAt(r.head);n.from>t&&(i.push(op.range(n.from)),t=n.from)}return tU.set(i)}},{decorations:e=>e.decorations});class og extends tG{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?t1(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),r=t6(t[0],"rtl"!=i.direction),n=parseInt(i.lineHeight);return r.bottom-r.top>1.5*n?{left:r.left,right:r.right,top:r.top,bottom:r.top+n}:r}ignoreEvent(){return!1}}function om(e,t){var i;let r,n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.state.doc.lineAt(n),s=n-o.from,a=s>2e3?-1:s==o.length?(i=t.clientX,(r=e.coordsAtPos(e.viewport.from))?Math.round(Math.abs((r.left-i)/e.defaultCharacterWidth)):-1):th(o.text,e.state.tabSize,n-o.from);return{line:o.number,col:a,off:s}}let ov={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},oy={style:"cursor: crosshair"},ob="-10000px";class ow{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let n=null;this.tooltipViews=this.tooltips.map(e=>n=i(e,n))}update(e,t){var i;let r=e.state.facet(this.facet),n=r.filter(e=>e);if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let i=0;i<n.length;i++){let r=n[i],a=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(a=e)}if(a<0)o[i]=this.createTooltipView(r,i?o[i-1]:null),s&&(s[i]=!!r.above);else{let r=o[i]=this.tooltipViews[a];s&&(s[i]=t[a]),r.update&&r.update(e)}}}for(let e of this.tooltipViews)0>o.indexOf(e)&&(this.removeTooltipView(e),null==(i=e.destroy)||i.call(e));return t&&(s.forEach((e,i)=>t[i]=e),t.length=s.length),this.input=r,this.tooltips=n,this.tooltipViews=o,!0}}function oC(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}let ox=eR.define({combine:e=>{var t,i,r;return{position:tB.ios?"absolute":(null==(t=e.find(e=>e.position))?void 0:t.position)||"fixed",parent:(null==(i=e.find(e=>e.parent))?void 0:i.parent)||null,tooltipSpace:(null==(r=e.find(e=>e.tooltipSpace))?void 0:r.tooltipSpace)||oC}}}),oS=new WeakMap,ok=iG.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(ox);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ow(e,oM,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,r=e.state.facet(ox);if(r.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=r.position,this.manager.tooltipViews))e.dom.style.position=this.position;i=!0}if(r.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),r=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",i.dom.appendChild(e)}return i.dom.style.position=this.position,i.dom.style.top=ob,i.dom.style.left="0px",this.container.insertBefore(i.dom,r),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;for(let t of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))t.dom.remove(),null==(e=t.destroy)||e.call(t);this.parent&&this.container.remove(),null==(t=this.resizeObserver)||t.disconnect(),null==(i=this.intersectionObserver)||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(tB.safari){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}else i=!!e.offsetParent&&e.offsetParent!=this.container.ownerDocument.body}if(i||"absolute"==this.position)if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),n=i0(this.view);return{visible:{left:r.left+n.left,top:r.top+n.top,right:r.right-n.right,bottom:r.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(ox).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{visible:i,space:r,scaleX:n,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:d}=u,c=e.pos[a],h=e.size[a];if(!c||!1!==l.clip&&(c.bottom<=Math.max(i.top,r.top)||c.top>=Math.min(i.bottom,r.bottom)||c.right<Math.max(i.left,r.left)-.1||c.left>Math.min(i.right,r.right)+.1)){d.style.top=ob;continue}let p=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,f=7*!!p,g=h.right-h.left,m=null!=(t=oS.get(u))?t:h.bottom-h.top,v=u.offset||oP,y=this.view.textDirection==iu.LTR,b=h.width>r.right-r.left?y?r.left:r.right-h.width:y?Math.max(r.left,Math.min(c.left-14*!!p+v.x,r.right-g)):Math.min(Math.max(r.left,c.left-g+14*!!p-v.x),r.right-g),w=this.above[a];!l.strictSide&&(w?c.top-m-f-v.y<r.top:c.bottom+m+f+v.y>r.bottom)&&w==r.bottom-c.bottom>c.top-r.top&&(w=this.above[a]=!w);let C=(w?c.top-r.top:r.bottom-c.bottom)-f;if(C<m&&!1!==u.resize){if(C<this.view.defaultLineHeight){d.style.top=ob;continue}oS.set(u,m),d.style.height=(m=C)/o+"px"}else d.style.height&&(d.style.height="");let x=w?c.top-m-f-v.y:c.bottom+f+v.y,S=b+g;if(!0!==u.overlap)for(let e of s)e.left<S&&e.right>b&&e.top<x+m&&e.bottom>x&&(x=w?e.top-m-2-f:e.bottom+f+2);if("absolute"==this.position?(d.style.top=(x-e.parent.top)/o+"px",oR(d,(b-e.parent.left)/n)):(d.style.top=x/o+"px",oR(d,b/n)),p){let e=c.left+(y?v.x:-v.x)-(b+14-7);p.style.left=e/n+"px"}!0!==u.overlap&&s.push({left:b,top:x,right:S,bottom:x+m}),d.classList.toggle("cm-tooltip-above",w),d.classList.toggle("cm-tooltip-below",!w),u.positioned&&u.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView)&&(this.inView=this.view.inView,!this.inView))for(let e of this.manager.tooltipViews)e.dom.style.top=ob}},{eventObservers:{scroll(){this.maybeMeasure()}}});function oR(e,t){let i=parseInt(e.style.left,10);(isNaN(i)||Math.abs(t-i)>1)&&(e.style.left=t+"px")}let oE=nB.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),oP={x:0,y:0},oM=eR.define({enables:[ok,oE]}),oD=eR.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class oT{static create(e){return new oT(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ow(e,oD,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null==(e=t.destroy)||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(void 0!==r){if(void 0===t)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}let oO=oM.compute([oD],e=>{let t=e.facet(oD);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!=(t=e.end)?t:e.pos})),create:oT.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class o_{constructor(e,t,i,r,n){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let r,n=1;if(i.isWidget())r=i.posAtStart;else{if(null==(r=e.posAtCoords(t)))return;let i=e.coordsAtPos(r);if(!i||t.y<i.top||t.y>i.bottom||t.x<i.left-e.defaultCharacterWidth||t.x>i.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find(e=>e.from<=r&&e.to>=r),s=o&&o.dir==iu.RTL?-1:1;n=t.x<i.left?-s:s}let o=this.source(e,r,n);if(null==o?void 0:o.then){let t=this.pending={pos:r};o.then(i=>{this.pending==t&&(this.pending=null,i&&!(Array.isArray(i)&&!i.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(i)?i:[i])}))},t=>iV(e.state,t,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(ok),t=e?e.manager.tooltips.findIndex(e=>e.create==oT.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:n}=this;if(r.length&&n&&!function(e,t){let{left:i,right:r,top:n,bottom:o}=e.getBoundingClientRect(),s;if(s=e.querySelector(".cm-tooltip-arrow")){let e=s.getBoundingClientRect();n=Math.min(e.top,n),o=Math.max(e.bottom,o)}return t.clientX>=i-4&&t.clientX<=r+4&&t.clientY>=n-4&&t.clientY<=o+4}(n.dom,e)||this.pending){let{pos:n}=r[0]||this.pending,o=null!=(i=null==(t=r[0])?void 0:t.end)?i:n;(n==o?this.view.posAtCoords(this.lastMove)!=n:!function(e,t,i,r,n,o){let s=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>r||s.right<r||s.top>n||Math.min(s.bottom,a)<n)return!1;let l=e.posAtCoords({x:r,y:n},!1);return l>=t&&l<=i}(this.view,n,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function oA(e,t){let i=e.plugin(ok);if(!i)return null;let r=i.manager.tooltips.indexOf(t);return r<0?null:i.manager.tooltipViews[r]}let oF=eX.define(),oI=eR.define({combine(e){let t,i;for(let r of e)t=t||r.topContainer,i=i||r.bottomContainer;return{topContainer:t,bottomContainer:i}}});function oL(e,t){let i=e.plugin(oN),r=i?i.specs.indexOf(t):-1;return r>-1?i.panels[r]:null}let oN=iG.fromClass(class{constructor(e){this.input=e.state.facet(oH),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(oI);for(let i of(this.top=new oB(e,!0,t.topContainer),this.bottom=new oB(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(oI);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new oB(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new oB(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(oH);if(i!=this.input){let t=i.filter(e=>e),r=[],n=[],o=[],s=[];for(let i of t){let t=this.specs.indexOf(i),a;t<0?(a=i(e.view),s.push(a)):(a=this.panels[t]).update&&a.update(e),r.push(a),(a.top?n:o).push(a)}for(let e of(this.specs=t,this.panels=r,this.top.sync(n),this.bottom.sync(o),s))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>nB.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class oB{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&0>e.indexOf(t)&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=oV(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=oV(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function oV(e){let t=e.nextSibling;return e.remove(),t}let oH=eR.define({enables:oN});class oz extends e8{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}oz.prototype.elementClass="",oz.prototype.toDOM=void 0,oz.prototype.mapMode=eh.TrackBefore,oz.prototype.startSide=oz.prototype.endSide=-1,oz.prototype.point=!0;let oj=eR.define(),oG=eR.define(),oW={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>te.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},oU=eR.define();function o$(e){return[oK(),oU.of({...oW,...e})]}let oq=eR.define({combine:e=>e.some(e=>e)});function oK(e){let t=[oQ];return e&&!1===e.fixed&&t.push(oq.of(!0)),t}let oQ=iG.fromClass(class{constructor(e){for(let t of(this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(oU).map(t=>new oJ(e,t)),this.fixed=!e.state.facet(oq),this.gutters))"after"==t.config.side?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,r=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(r<(i.to-i.from)*.8)}if(e.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(oq)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let i=te.iter(this.view.state.facet(oj),this.view.viewport.from),r=[],n=this.gutters.map(e=>new oZ(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(e.type)){let t=!0;for(let o of e.type)if(o.type==tW.Text&&t){for(let e of(oY(i,r,o.from),n))e.line(this.view,o,r);t=!1}else if(o.widget)for(let e of n)e.widget(this.view,o)}else if(e.type==tW.Text)for(let t of(oY(i,r,e.from),n))t.line(this.view,e,r);else if(e.widget)for(let t of n)t.widget(this.view,e);for(let e of n)e.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(oU),i=e.state.facet(oU),r=e.docChanged||e.heightChanged||e.viewportChanged||!te.eq(e.startState.facet(oj),e.state.facet(oj),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let n=[];for(let r of i){let i=t.indexOf(r);i<0?n.push(new oJ(this.view,r)):(this.gutters[i].update(e),n.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),0>n.indexOf(e)&&e.destroy();for(let e of n)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.gutters=n}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>nB.scrollMargins.of(t=>{let i=t.plugin(e);if(!i||0==i.gutters.length||!i.fixed)return null;let r=i.dom.offsetWidth*t.scaleX,n=i.domAfter?i.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==iu.LTR?{left:r,right:n}:{right:r,left:n}})});function oX(e){return Array.isArray(e)?e:[e]}function oY(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class oZ{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=te.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,n=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new o0(e,o,n,i);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,n,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];oY(this.cursor,r,t.from),i.length&&(r=r.concat(i));let n=this.gutter.config.lineMarker(e,t,r);n&&r.unshift(n);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let i of e.state.facet(oG)){let n=i(e,t.widget,t);n&&(r||(r=[])).push(n)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class oJ{constructor(e,t){for(let i in this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(i,r=>{let n=r.target,o;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let e=n.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=r.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,s,r)&&r.preventDefault()});this.markers=oX(t.markers(e)),t.initialSpacer&&(this.spacer=new o0(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=oX(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!te.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class o0{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let s=o,a=n<t.length?t[n++]:null,l=!1;if(a){let e=a.elementClass;e&&(i+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}let o1=eR.define(),o2=eR.define(),o5=eR.define({combine:e=>e4(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let r=i[e],n=t[e];i[e]=r?(e,t,i)=>r(e,t,i)||n(e,t,i):n}return i}})});class o3 extends oz{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function o4(e,t){return e.state.facet(o5).formatNumber(t,e.state)}let o8=oU.compute([o5],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(o1),lineMarker:(e,t,i)=>i.some(e=>e.toDOM)?null:new o3(o4(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,i)=>{for(let r of e.state.facet(o2)){let n=r(e,t,i);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(o5)!=e.state.facet(o5),initialSpacer:e=>new o3(o4(e,o7(e.state.doc.lines))),updateSpacer(e,t){let i=o4(t.view,o7(t.view.state.doc.lines));return i==e.number?e:new o3(i)},domEventHandlers:e.facet(o5).domEventHandlers,side:"before"}));function o6(e={}){return[o5.of(e),oK(),o8]}function o7(e){let t=9;for(;t<e;)t=10*t+9;return t}let o9=new class extends oz{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},se=oj.compute(["selection"],e=>{let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.head).from;n>i&&(i=n,t.push(o9.range(n)))}return te.of(t)}),st=0;class si{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=st++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){if(e instanceof si&&(t=e),null==t?void 0:t.base)throw Error("Can not derive from a modified tag");let i=new si("string"==typeof e?e:"?",[],null,[]);if(i.set.push(i),t)for(let e of t.set)i.set.push(e);return i}static defineModifier(e){let t=new sn(e);return e=>e.modified.indexOf(t)>-1?e:sn.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let sr=0;class sn{constructor(e){this.name=e,this.instances=[],this.id=sr++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(i=>{var r,n;return i.base==e&&(r=t,n=i.modified,r.length==n.length&&r.every((e,t)=>e==n[t]))});if(i)return i;let r=[],n=new si(e.name,r,e,t);for(let e of t)e.instances.push(n);let o=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let r=0,n=t.length;r<n;r++)t.push(t[r].concat(e[i]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)r.push(sn.get(t,e));return n}}function so(e){let t=Object.create(null);for(let i in e){let r=e[i];for(let e of(Array.isArray(r)||(r=[r]),i.split(" ")))if(e){let i=[],n=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){n=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw RangeError("Invalid path: "+e);if(i.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),(t+=r[0].length)==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){n=0;break}if("/"!=s)throw RangeError("Invalid path: "+e);o=e.slice(t)}let s=i.length-1,a=i[s];if(!a)throw RangeError("Invalid path: "+e);let l=new sa(r,n,s>0?i.slice(0,s):null);t[a]=l.sort(t[a])}}return ss.add(t)}let ss=new g({combine(e,t){let i,r,n;for(;e||t;){if(!e||t&&e.depth>=t.depth?(n=t,t=t.next):(n=e,e=e.next),i&&i.mode==n.mode&&!n.context&&!i.context)continue;let o=new sa(n.tags,n.mode,n.context);i?i.next=o:r=o,i=o}return r}});class sa{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function sl(e,t){let i=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)i[e.id]=t.class;else i[t.tag.id]=t.class;let{scope:r,all:n=null}=t||{};return{style:e=>{let t=n;for(let r of e)for(let e of r.set){let r=i[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function su(e,t,i,r=0,n=e.length){let o=new sd(r,Array.isArray(t)?t:[t],i);o.highlightRange(e.cursor(),r,n,"",o.highlighters),o.flush(n)}sa.empty=new sa([],2,null);class sd{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,n){let{type:o,from:s,to:a}=e;if(s>=i||a<=t)return;o.isTop&&(n=this.highlighters.filter(e=>!e.scope||e.scope(o)));let l=r,u=function(e){let t=e.type.prop(ss);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||sa.empty,d=function(e,t){let i=null;for(let r of e){let e=r.style(t);e&&(i=i?i+" "+e:e)}return i}(n,u.tags);if(d&&(l&&(l+=" "),l+=d,1==u.mode&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(t,s),l),u.opaque)return;let c=e.tree&&e.tree.prop(g.mounted);if(c&&c.overlay){let o=e.node.enter(c.overlay[0].from+s,1),u=this.highlighters.filter(e=>!e.scope||e.scope(c.tree.type)),d=e.firstChild();for(let h=0,p=s;;h++){let f=h<c.overlay.length?c.overlay[h]:null,g=f?f.from+s:a,m=Math.max(t,p),v=Math.min(i,g);if(m<v&&d)for(;e.from<v&&(this.highlightRange(e,m,v,r,n),this.startSpan(Math.min(v,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!f||g>i)break;(p=f.to+s)>t&&(this.highlightRange(o.cursor(),Math.max(t,f.from+s),Math.min(i,p),"",u),this.startSpan(Math.min(i,p),l))}d&&e.parent()}else if(e.firstChild()){c&&(r="");do{if(e.to<=t)continue;if(e.from>=i)break;this.highlightRange(e,t,i,r,n),this.startSpan(Math.min(i,e.to),l)}while(e.nextSibling())e.parent()}}}let sc=si.define,sh=sc(),sp=sc(),sf=sc(sp),sg=sc(sp),sm=sc(),sv=sc(sm),sy=sc(sm),sb=sc(),sw=sc(sb),sC=sc(),sx=sc(),sS=sc(),sk=sc(sS),sR=sc(),sE={comment:sh,lineComment:sc(sh),blockComment:sc(sh),docComment:sc(sh),name:sp,variableName:sc(sp),typeName:sf,tagName:sc(sf),propertyName:sg,attributeName:sc(sg),className:sc(sp),labelName:sc(sp),namespace:sc(sp),macroName:sc(sp),literal:sm,string:sv,docString:sc(sv),character:sc(sv),attributeValue:sc(sv),number:sy,integer:sc(sy),float:sc(sy),bool:sc(sm),regexp:sc(sm),escape:sc(sm),color:sc(sm),url:sc(sm),keyword:sC,self:sc(sC),null:sc(sC),atom:sc(sC),unit:sc(sC),modifier:sc(sC),operatorKeyword:sc(sC),controlKeyword:sc(sC),definitionKeyword:sc(sC),moduleKeyword:sc(sC),operator:sx,derefOperator:sc(sx),arithmeticOperator:sc(sx),logicOperator:sc(sx),bitwiseOperator:sc(sx),compareOperator:sc(sx),updateOperator:sc(sx),definitionOperator:sc(sx),typeOperator:sc(sx),controlOperator:sc(sx),punctuation:sS,separator:sc(sS),bracket:sk,angleBracket:sc(sk),squareBracket:sc(sk),paren:sc(sk),brace:sc(sk),content:sb,heading:sw,heading1:sc(sw),heading2:sc(sw),heading3:sc(sw),heading4:sc(sw),heading5:sc(sw),heading6:sc(sw),contentSeparator:sc(sb),list:sc(sb),quote:sc(sb),emphasis:sc(sb),strong:sc(sb),link:sc(sb),monospace:sc(sb),strikethrough:sc(sb),inserted:sc(),deleted:sc(),changed:sc(),invalid:sc(),meta:sR,documentMeta:sc(sR),annotation:sc(sR),processingInstruction:sc(sR),definition:si.defineModifier("definition"),constant:si.defineModifier("constant"),function:si.defineModifier("function"),standard:si.defineModifier("standard"),local:si.defineModifier("local"),special:si.defineModifier("special")};for(let e in sE){let t=sE[e];t instanceof si&&(t.name=e)}sl([{tag:sE.link,class:"tok-link"},{tag:sE.heading,class:"tok-heading"},{tag:sE.emphasis,class:"tok-emphasis"},{tag:sE.strong,class:"tok-strong"},{tag:sE.keyword,class:"tok-keyword"},{tag:sE.atom,class:"tok-atom"},{tag:sE.bool,class:"tok-bool"},{tag:sE.url,class:"tok-url"},{tag:sE.labelName,class:"tok-labelName"},{tag:sE.inserted,class:"tok-inserted"},{tag:sE.deleted,class:"tok-deleted"},{tag:sE.literal,class:"tok-literal"},{tag:sE.string,class:"tok-string"},{tag:sE.number,class:"tok-number"},{tag:[sE.regexp,sE.escape,sE.special(sE.string)],class:"tok-string2"},{tag:sE.variableName,class:"tok-variableName"},{tag:sE.local(sE.variableName),class:"tok-variableName tok-local"},{tag:sE.definition(sE.variableName),class:"tok-variableName tok-definition"},{tag:sE.special(sE.variableName),class:"tok-variableName2"},{tag:sE.definition(sE.propertyName),class:"tok-propertyName tok-definition"},{tag:sE.typeName,class:"tok-typeName"},{tag:sE.namespace,class:"tok-namespace"},{tag:sE.className,class:"tok-className"},{tag:sE.macroName,class:"tok-macroName"},{tag:sE.propertyName,class:"tok-propertyName"},{tag:sE.operator,class:"tok-operator"},{tag:sE.comment,class:"tok-comment"},{tag:sE.meta,class:"tok-meta"},{tag:sE.invalid,class:"tok-invalid"},{tag:sE.punctuation,class:"tok-punctuation"}]);let sP=new g,sM=new g;class sD{constructor(e,t,i=[],r=""){this.data=e,this.name=r,e3.prototype.hasOwnProperty("tree")||Object.defineProperty(e3.prototype,"tree",{get(){return s_(this)}}),this.parser=t,this.extension=[sz.of(this),e3.languageData.of((e,t,i)=>{let r=sT(e,t,i),n=r.type.prop(sP);if(!n)return[];let o=e.facet(n),s=r.type.prop(sM);if(s){let n=r.resolve(t-r.from,i);for(let t of s)if(t.test(n,e)){let i=e.facet(t.facet);return"replace"==t.type?i:i.concat(o)}}return o})].concat(i)}isActiveAt(e,t,i=-1){return sT(e,t,i).type.prop(sP)==this.data}findRegions(e){let t=e.facet(sz);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(e,t)=>{if(e.prop(sP)==this.data)return void i.push({from:t,to:t+e.length});let n=e.prop(g.mounted);if(n){if(n.tree.prop(sP)==this.data){if(n.overlay)for(let e of n.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}else if(n.overlay){let e=i.length;if(r(n.tree,n.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let n=e.children[i];n instanceof x&&r(n,e.positions[i]+t)}};return r(s_(e),0),i}get allowsNesting(){return!0}}function sT(e,t,i){let r=e.facet(sz),n=s_(e).topNode;if(!r||r.allowsNesting)for(let e=n;e;e=e.enter(t,i,d.ExcludeBuffers))e.type.isTop&&(n=e);return n}sD.setState=eX.define();class sO extends sD{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){var t;let i=(t=e.languageData,eR.define({combine:t?e=>e.concat(t):void 0}));return new sO(i,e.parser.configure({props:[sP.add(e=>e.isTop?i:void 0)]}),e.name)}configure(e,t){return new sO(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function s_(e){let t=e.field(sD.state,!1);return t?t.tree:x.empty}class sA{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let sF=null;class sI{constructor(e,t,i=[],r,n,o,s,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new sI(e,t,[],x.empty,0,i,[],null)}startParse(){return this.parser.startParse(new sA(this.state.doc),this.fragments)}work(e,t){return(null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=x.empty&&this.isDone(null!=t?t:this.state.doc.length))?(this.takeTree(),!0):this.withContext(()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(H.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!=(i=this.parse.stoppedAt)?i:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(H.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=sF;sF=this;try{return e()}finally{sF=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=sL(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:n,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,i,r,n)=>t.push({fromA:e,toA:i,fromB:r,toB:n})),i=H.applyChanges(i,t),r=x.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length)for(let t of(s=[],this.skipped)){let i=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);i<r&&s.push({from:i,to:r})}}return new sI(this.parser,t,i,r,n,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:r}=this.skipped[t];i<e.to&&r>e.from&&(this.fragments=sL(this.fragments,i,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends z{createParse(t,i,r){let n=r[0].from,o=r[r.length-1].to;return{parsedPos:n,advance(){let t=sF;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new x(y.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return sF}}function sL(e,t,i){return H.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class sN{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new sN(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=sI.create(e.facet(sz).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new sN(i)}}sD.state=eO.define({create:sN.init,update(e,t){for(let e of t.effects)if(e.is(sD.setState))return e.value;return t.startState.facet(sz)!=t.state.facet(sz)?sN.init(t.state):e.apply(t)}});let sB=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(sB=e=>{let t=-1,i=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});let sV="undefined"!=typeof navigator&&(null==(c=navigator.scheduling)?void 0:c.isInputPending)?()=>navigator.scheduling.isInputPending():null,sH=iG.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(sD.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(sD.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=sB(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,n=i.field(sD.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!sV?Math.max(25,e.timeRemaining()-5):1e9),s=n.context.treeLen<r&&i.doc.length>r+1e3,a=n.context.work(()=>sV&&sV()||Date.now()>o,r+1e5*!s);this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:sD.setState.of(new sN(n.context))})),this.chunkBudget>0&&!(a&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>iV(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),sz=eR.define({combine:e=>e.length?e[0]:null,enables:e=>[sD.state,sH,nB.contentAttributes.compute([e],t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}})]});class sj{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}let sG=eR.define(),sW=eR.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function sU(e){let t=e.facet(sW);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function s$(e,t){let i="",r=e.tabSize,n=e.facet(sW)[0];if("	"==n){for(;t>=r;)i+="	",t-=r;n=" "}for(let e=0;e<t;e++)i+=n;return i}function sq(e,t){for(let i of(e instanceof e3&&(e=new sK(e)),e.state.facet(sG))){let r=i(e,t);if(void 0!==r)return r}let i=s_(e.state);return i.length>=t?function(e,t,i){let r=t.resolveStack(i),n=t.resolveInner(i,-1).resolve(i,0).enterUnfinishedNodesBefore(i);if(n!=r.node){let e=[];for(let t=n;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return sX(r,e,i)}(e,i,t):null}class sK{constructor(e,t={}){this.state=e,this.options=t,this.unit=sU(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:n}=this.options;if(null!=r&&r>=i.from&&r<=i.to)if(n&&r==e)return{text:"",from:e};else if(t<0?r<e:r<=e)return{text:i.text.slice(r-i.from),from:r};else return{text:i.text.slice(0,r-i.from),from:i.from};return i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return th(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let e=n(r);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}let sQ=new g;function sX(e,t,i){for(let r=e;r;r=r.next){let e=function(e){let t=e.type.prop(sQ);if(t)return t;let i=e.firstChild,r;if(i&&(r=i.type.prop(g.closedBy))){let t=e.lastChild,i=t&&r.indexOf(t.name)>-1;return e=>s0(e,!0,1,void 0,i&&!(e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak)?t.from:void 0)}return null==e.parent?sY:null}(r.node);if(e)return e(sZ.create(t,i,r))}return 0}function sY(){return 0}class sZ extends sK{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new sZ(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(function(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return sX(this.context.next,this.base,this.pos)}}function sJ({closing:e,align:t=!0,units:i=1}){return r=>s0(r,t,i,e)}function s0(e,t,i,r,n){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||n==e.pos+s,l=t?function(e){let t=e.node,i=t.childAfter(t.from),r=t.lastChild;if(!i)return null;let n=e.options.simulateBreak,o=e.state.doc.lineAt(i.from),s=null==n||n<=o.from?o.to:Math.min(o.to,n);for(let e=i.to;;){let n=t.childAfter(e);if(!n||n==r)return null;if(!n.type.isSkipped){if(n.from>=s)return null;let e=/^ */.exec(o.text.slice(i.to-o.from))[0].length;return{from:i.from,to:i.to+e}}e=n.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*i)}let s1=eR.define(),s2=new g;function s5(e,t,i){for(let r of e.facet(s1)){let n=r(e,t,i);if(n)return n}return function(e,t,i){let r=s_(e);if(r.length<i)return null;let n=r.resolveStack(i,1),o=null;for(let s=n;s;s=s.next){let n=s.node;if(n.to<=i||n.from>i)continue;if(o&&n.from<t)break;let a=n.type.prop(s2);if(a&&(n.to<r.length-50||r.length==e.doc.length||!function(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}(n))){let r=a(n,e);r&&r.from<=i&&r.from>=t&&r.to>i&&(o=r)}}return o}(e,t,i)}function s3(e,t){let i=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return i>=r?void 0:{from:i,to:r}}let s4=eX.define({map:s3}),s8=eX.define({map:s3});function s6(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some(e=>e.from<=i&&e.to>=i)||t.push(e.lineBlockAt(i));return t}let s7=eO.define({create:()=>tU.none,update(e,t){for(let i of(t.isUserEvent("delete")&&t.changes.iterChangedRanges((t,i)=>e=s9(e,t,i)),e=e.map(t.changes),t.effects))if(i.is(s4)&&!function(e,t,i){let r=!1;return e.between(t,t,(e,n)=>{e==t&&n==i&&(r=!0)}),r}(e,i.value.from,i.value.to)){let{preparePlaceholder:r}=t.state.facet(ao),n=r?tU.replace({widget:new au(r(t.state,i.value))}):al;e=e.update({add:[n.range(i.value.from,i.value.to)]})}else i.is(s8)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));return t.selection&&(e=s9(e,t.selection.main.head)),e},provide:e=>nB.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,(e,t)=>{i.push(e,t)}),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let r=e[i++],n=e[i++];if("number"!=typeof r||"number"!=typeof n)throw RangeError("Invalid JSON for fold state");t.push(al.range(r,n))}return tU.set(t,!0)}});function s9(e,t,i=t){let r=!1;return e.between(t,i,(e,n)=>{e<i&&n>t&&(r=!0)}),r?e.update({filterFrom:t,filterTo:i,filter:(e,r)=>e>=i||r<=t}):e}function ae(e,t,i){var r;let n=null;return null==(r=e.field(s7,!1))||r.between(t,i,(e,t)=>{(!n||n.from>e)&&(n={from:e,to:t})}),n}function at(e,t){return e.field(s7,!1)?t:t.concat(eX.appendConfig.of(as()))}function ai(e,t,i=!0){let r=e.state.doc.lineAt(t.from).number,n=e.state.doc.lineAt(t.to).number;return nB.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${n}.`)}let ar=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of s6(e)){let i=s5(e.state,t.from,t.to);if(i)return e.dispatch({effects:at(e.state,[s4.of(i),ai(e,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(s7,!1))return!1;let t=[];for(let i of s6(e)){let r=ae(e.state,i.from,i.to);r&&t.push(s8.of(r),ai(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let r=0;r<t.doc.length;){let n=e.lineBlockAt(r),o=s5(t,n.from,n.to);o&&i.push(s4.of(o)),r=(o?e.lineBlockAt(o.to):n).to+1}return i.length&&e.dispatch({effects:at(e.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(s7,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,(e,t)=>{i.push(s8.of({from:e,to:t}))}),e.dispatch({effects:i}),!0}}],an={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},ao=eR.define({combine:e=>e4(e,an)});function as(e){let t=[s7,ah];return e&&t.push(ao.of(e)),t}function aa(e,t){let{state:i}=e,r=i.facet(ao),n=t=>{let i=e.lineBlockAt(e.posAtDOM(t.target)),r=ae(e.state,i.from,i.to);r&&e.dispatch({effects:s8.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,n,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",i.phrase("folded code")),o.title=i.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=n,o}let al=tU.replace({widget:new class extends tG{toDOM(e){return aa(e,null)}}});class au extends tG{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return aa(e,this.value)}}let ad={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ac extends oz{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}let ah=nB.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ap{constructor(e,t){let i;function r(e){let t=tv.newName();return(i||(i=Object.create(null)))["."+t]=e,t}this.specs=e;const n="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof sD?e=>e.prop(sP)==o.data:o?e=>e==o:void 0,this.style=sl(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:n}).style,this.module=i?new tv(i):null,this.themeType=t.themeType}static define(e,t){return new ap(e,t||{})}}let af=eR.define(),ag=eR.define({combine:e=>e.length?[e[0]]:null});function am(e){let t=e.facet(af);return t.length?t:e.facet(ag)}function av(e,t){let i=[ay],r;return e instanceof ap&&(e.module&&i.push(nB.styleModule.of(e.module)),r=e.themeType),(null==t?void 0:t.fallback)?i.push(ag.of(e)):r?i.push(af.computeN([nB.darkTheme],t=>t.facet(nB.darkTheme)==("dark"==r)?[e]:[])):i.push(af.of(e)),i}let ay=eA.high(iG.fromClass(class{constructor(e){this.markCache=Object.create(null),this.tree=s_(e.state),this.decorations=this.buildDeco(e,am(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=s_(e.state),i=am(e.state),r=i!=am(e.startState),{viewport:n}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!r&&t.type==this.tree.type&&o>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return tU.none;let i=new tt;for(let{from:r,to:n}of e.visibleRanges)su(this.tree,t,(e,t,r)=>{i.add(e,t,this.markCache[r]||(this.markCache[r]=tU.mark({class:r})))},r,n);return i.finish()}},{decorations:e=>e.decorations})),ab=ap.define([{tag:sE.meta,color:"#404740"},{tag:sE.link,textDecoration:"underline"},{tag:sE.heading,textDecoration:"underline",fontWeight:"bold"},{tag:sE.emphasis,fontStyle:"italic"},{tag:sE.strong,fontWeight:"bold"},{tag:sE.strikethrough,textDecoration:"line-through"},{tag:sE.keyword,color:"#708"},{tag:[sE.atom,sE.bool,sE.url,sE.contentSeparator,sE.labelName],color:"#219"},{tag:[sE.literal,sE.inserted],color:"#164"},{tag:[sE.string,sE.deleted],color:"#a11"},{tag:[sE.regexp,sE.escape,sE.special(sE.string)],color:"#e40"},{tag:sE.definition(sE.variableName),color:"#00f"},{tag:sE.local(sE.variableName),color:"#30a"},{tag:[sE.typeName,sE.namespace],color:"#085"},{tag:sE.className,color:"#167"},{tag:[sE.special(sE.variableName),sE.macroName],color:"#256"},{tag:sE.definition(sE.propertyName),color:"#00c"},{tag:sE.comment,color:"#940"},{tag:sE.invalid,color:"#f00"}]),aw=nB.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),aC="()[]{}",ax=eR.define({combine:e=>e4(e,{afterCursor:!0,brackets:aC,maxScanDistance:1e4,renderMatch:aR})}),aS=tU.mark({class:"cm-matchingBracket"}),ak=tU.mark({class:"cm-nonmatchingBracket"});function aR(e){let t=[],i=e.matched?aS:ak;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}let aE=[eO.define({create:()=>tU.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],r=t.state.facet(ax);for(let e of t.state.selection.ranges){if(!e.empty)continue;let n=aT(t.state,e.head,-1,r)||e.head>0&&aT(t.state,e.head-1,1,r)||r.afterCursor&&(aT(t.state,e.head,1,r)||e.head<t.state.doc.length&&aT(t.state,e.head+1,-1,r));n&&(i=i.concat(r.renderMatch(n,t.state)))}return tU.set(i,!0)},provide:e=>nB.decorations.from(e)}),aw],aP=new g;function aM(e,t,i){let r=e.prop(t<0?g.openedBy:g.closedBy);if(r)return r;if(1==e.name.length){let r=i.indexOf(e.name);if(r>-1&&r%2==+(t<0))return[i[r+t]]}return null}function aD(e){let t=e.type.prop(aP);return t?t(e.node):e}function aT(e,t,i,r={}){let n=r.maxScanDistance||1e4,o=r.brackets||aC,s=s_(e),a=s.resolveInner(t,i);for(let e=a;e;e=e.parent){let r=aM(e.type,i,o);if(r&&e.from<e.to){let n=aD(e);if(n&&(i>0?t>=n.from&&t<n.to:t>n.from&&t<=n.to))return function(e,t,i,r,n,o,s){let a=r.parent,l={from:n.from,to:n.to},u=0,d=null==a?void 0:a.cursor();if(d&&(i<0?d.childBefore(r.from):d.childAfter(r.to)))do if(i<0?d.to<=r.from:d.from>=r.to){if(0==u&&o.indexOf(d.type.name)>-1&&d.from<d.to){let e=aD(d);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}else if(aM(d.type,i,s))u++;else if(aM(d.type,-i,s)){if(0==u){let e=aD(d);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}u--}}while(i<0?d.prevSibling():d.nextSibling())return{start:l,matched:!1}}(0,0,i,e,n,r,o)}}return function(e,t,i,r,n,o,s){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=i>0)return null;let u={from:i<0?t-1:t,to:i>0?t+1:t},d=e.doc.iterRange(t,i>0?e.doc.length:0),c=0;for(let e=0;!d.next().done&&e<=o;){let o=d.value;i<0&&(e+=o.length);let a=t+e*i;for(let e=i>0?0:o.length-1,t=i>0?o.length:-1;e!=t;e+=i){let t=s.indexOf(o[e]);if(!(t<0)&&r.resolveInner(a+e,1).type==n)if(t%2==0==i>0)c++;else{if(1==c)return{start:u,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};c--}}i>0&&(e+=o.length)}return d.done?{start:u,matched:!1}:null}(e,t,i,s,a.type,n,o)}let aO=Object.create(null),a_=[y.none],aA=[],aF=Object.create(null),aI=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])aI[e]=function(e,t){let i=[];for(let r of t.split(" ")){let t=[];for(let i of r.split(".")){let r=e[i]||sE[i];r?"function"==typeof r?t.length?t=t.map(r):aL(i,`Modifier ${i} used at start of tag`):t.length?aL(i,`Tag ${i} used as modifier`):t=Array.isArray(r)?r:[r]:aL(i,`Unknown highlighting tag ${i}`)}for(let e of t)i.push(e)}if(!i.length)return 0;let r=t.replace(/ /g,"_"),n=r+" "+i.map(e=>e.id),o=aF[n];if(o)return o.id;let s=aF[n]=y.define({id:a_.length,name:r,props:[so({[r]:i})]});return a_.push(s),s.id}(aO,t);function aL(e,t){aA.indexOf(e)>-1||(aA.push(e),console.warn(t))}iu.RTL,iu.LTR;var aN=e.i(316575);class aB{constructor(e,t,i,r,n,o,s,a,l,u=0,d){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=n,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new aB(e,[],t,i,i,0,[],0,r?new aV(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=65535&e,{parser:n}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),s=n.dynamicPrecedence(r);if(s&&(this.score+=s),0==i){this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(i-1)*3-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(null==(t=this.p.parser.nodeSet.types[r])?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let d=a?this.stack[a-1]:0,c=this.bufferBase+this.buffer.length-d;if(r<n.minRepeatTerm||131072&e){let e=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,c+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=n.getGoto(e,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,i,r=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==i)return;if(e.buffer[r-2]>=t){e.buffer[r-2]=i;return}}}if(n&&this.pos!=i){let n=this.buffer.length;if(n>0&&(0!=this.buffer[n-4]||this.buffer[n-1]<0)){let e=!1;for(let t=n;t>0&&this.buffer[t-2]>i;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;n>0&&this.buffer[n-2]>i;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,r>4&&(r-=4)}this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=i,this.buffer[n+3]=r}else this.buffer.push(e,t,i,r)}shift(e,t,i,r){if(131072&e)this.pushState(65535&e,this.pos);else if((262144&e)==0){let{parser:n}=this.p;(r>this.pos||t<=n.maxNode)&&(this.pos=r,n.stateFlag(e,1)||(this.reducePos=r)),this.pushState(e,i),this.shiftContext(t,i),t<=n.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,i,r){65536&e?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new aB(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new aH(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if((65536&i)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let r=0,n;r<t.length;r+=2)(n=t[r+1])!=this.state&&this.p.parser.hasAction(n,e)&&i.push(t[r],n);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let r=t[e+1];i.some((e,t)=>1&t&&e==r)||i.push(t[e],r)}t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let n=this.split();n.pushState(r,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.reducePos=this.pos,n.score-=200,i.push(n)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((65536&t)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=65535&t,n=this.stack.length-3*i;if(n<0||0>e.getGoto(this.stack[n],r,!1)){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,n)=>{if(!t.includes(r))return t.push(r),e.allActions(r,t=>{if(393216&t);else if(65536&t){let i=(t>>19)-n;if(i>1){let r=65535&t,n=this.stack.length-3*i;if(n>=0&&e.getGoto(this.stack[n],r,!1)>=0)return i<<19|65536|r}}else{let e=i(t,n+1);if(null!=e)return e}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new aV(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return!(e<=this.lookAhead)&&(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class aV{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class aH{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e>>19;0==t?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(t-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],65535&e,!0);this.state=i}}class az{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new az(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new az(this.stack,this.pos,this.index)}}function aj(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let r=0,n=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),i=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,i=!0),o+=n,i)break;o*=46}i?i[n++]=o:i=new t(o)}return i}class aG{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}let aW=new aG;class aU{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=aW,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!r)return null;let e=this.ranges[--r];n-=i.from-e.to,i=e}for(;t<0?n>i.to:n>=i.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];n+=e.from-i.to,i=e}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let t=this.resolveOffset(e,1);if(null==t)return -1;if((i=t)>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let e=this.rangeIndex,t=this.range;for(;t.to<=i;)t=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>t.to&&(this.chunk2=this.chunk2.slice(0,t.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=aW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class a${constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;aK(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}a$.prototype.contextual=a$.prototype.fallback=a$.prototype.extend=!1,(class{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data="string"==typeof e?aj(e):e}token(e,t){let i=e.pos,r=0;for(;;){let i=e.next<0,n=e.resolveOffset(1,1);if(aK(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(!i&&r++,null==n)break;e.reset(n,e.token)}r&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r))}}).prototype.contextual=a$.prototype.fallback=a$.prototype.extend=!1;class aq{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function aK(e,t,i,r,n,o){let s=0,a=1<<r,{dialect:l}=i.p.parser;t:for(;(a&e[s])!=0;){let i=e[s+1];for(let r=s+3;r<i;r+=2)if((e[r+1]&a)>0){let i=e[r];if(l.allows(i)&&(-1==t.token.value||t.token.value==i||function(e,t,i,r){let n=aQ(i,r,t);return n<0||aQ(i,r,e)<n}(i,t.token.value,n,o))){t.acceptToken(i);break}}let r=t.next,u=0,d=e[s+2];if(t.next<0&&d>u&&65535==e[i+3*d-3]){s=e[i+3*d-1];continue}for(;u<d;){let n=u+d>>1,o=i+n+(n<<1),a=e[o],l=e[o+1]||65536;if(r<a)d=n;else if(r>=l)u=n+1;else{s=e[o+2],t.advance();continue t}}break}}function aQ(e,t,i){for(let r=t,n;65535!=(n=e[r]);r++)if(n==i)return r-t;return -1}let aX=void 0!==aN.default&&aN.default.env&&/\bparse\b/.test(aN.default.env.LOG),aY=null;function aZ(e,t,i){let r=e.cursor(d.IncludeAnonymous);for(r.moveTo(t);;)if(!(i<0?r.childBefore(t):r.childAfter(t)))for(;;){if((i<0?r.to<t:r.from>t)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:e.length}}class aJ{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?aZ(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?aZ(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(n instanceof x){if(o==e){if(o<this.safeFrom)return null;let e=o+n.length;if(e<=this.safeTo){let t=n.prop(g.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class a0{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new aG)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:n}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<n.length;r++){if((1<<r&o)==0)continue;let l=n[r],u=this.tokens[r];if((!i||l.fallback)&&((l.contextual||u.start!=e.pos||u.mask!=o||u.context!=s)&&(this.updateCachedToken(u,l,e),u.mask=o,u.context=s),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),0!=u.value)){let r=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!l.extend&&(i=u,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||((i=new aG).value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new aG,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:t}=i.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let n=t.specializers[r](this.stream.read(e.start,e.end),i);if(n>=0&&i.p.parser.dialect.allows(n>>1)){(1&n)==0?e.value=n>>1:e.extended=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:n}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(n,e?2:1);;a+=3){if(65535==s[a])if(1==s[a+1])a=a8(s,a+2);else{0==r&&2==s[a+1]&&(r=this.putAction(a8(s,a+2),t,i,r));break}s[a]==t&&(r=this.putAction(a8(s,a+1),t,i,r))}return r}}class a1{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new aU(t,r),this.tokens=new a0(e,this.stream),this.topTerm=e.top[1];let{from:n}=r[0];this.stacks=[aB.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>4*e.bufferLength?new aJ(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,r=this.minStackPos,n=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<i.length;o++){let s=i[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)n.push(s);else{if(this.advanceStack(s,n,i))continue;e||(e=[],t=[]),e.push(s);let r=this.tokens.getMainToken(s);t.push(r.value,r.end)}break}}if(!n.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return aX&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw aX&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(i)return aX&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort((e,t)=>t.score-e.score);n.length>e;)n.pop();n.some(e=>e.reducePos>r)&&this.recovering--}else if(n.length>1){e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let i=e+1;i<n.length;i++){let r=n[i];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500)if((t.score-r.score||t.buffer.length-r.buffer.length)>0)n.splice(i--,1);else{n.splice(e--,1);continue e}}}n.length>12&&(n.sort((e,t)=>t.score-e.score),n.splice(12,n.length-12))}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:n}=this,o=aX?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?n.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(g.contextHash)||0)==i))return e.useNode(s,r),aX&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(s.type.id)})`),!0;if(!(s instanceof x)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(a instanceof x&&0==s.positions[0])s=a;else break}}let s=n.stateSlot(e.state,4);if(s>0)return e.reduce(s),aX&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(65535&s)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],u=a[s++],d=a[s++],c=s==a.length||!i,h=c?e:e.split(),p=this.tokens.mainToken;if(h.apply(l,u,p?p.start:h.pos,d),aX&&console.log(o+this.stackID(h)+` (via ${(65536&l)==0?"shift":`reduce of ${n.getName(65535&l)}`} for ${n.getName(u)} @ ${r}${h==e?"":", split"})`),c)return!0;h.pos>r?t.push(h):i.push(h)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return a2(e,t),!0}}runRecovery(e,t,i){let r=null,n=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[(o<<1)+1],u=aX?this.stackID(s)+" -> ":"";if(s.deadEnd&&(n||(n=!0,s.restart(),aX&&console.log(u+this.stackID(s)+" (restarted)"),this.advanceFully(s,i))))continue;let d=s.split(),c=u;for(let e=0;e<10&&d.forceReduce()&&(aX&&console.log(c+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,i));e++)aX&&(c=this.stackID(d)+" -> ");for(let e of s.recoverByInsert(a))aX&&console.log(u+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),aX&&console.log(u+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),a2(s,i)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),x.build({buffer:az.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(aY||(aY=new WeakMap)).get(e);return t||aY.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function a2(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(r.pos==e.pos&&r.sameState(e)){t[i].score<e.score&&(t[i]=e);return}}t.push(e)}class a5{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}let a3=e=>e;class a4 extends z{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let i=0;i<e.repeatNodeCount;i++)t.push("");let i=Object.keys(e.topRules).map(t=>e.topRules[t][1]),r=[];for(let e=0;e<t.length;e++)r.push([]);function n(e,t,i){r[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=g[e]);for(let i=1;i<t.length;){let r=t[i++];if(r>=0)n(r,e,t[i++]);else{let o=t[i+-r];for(let s=-r;s>0;s--)n(t[i++],e,o);i++}}}this.nodeSet=new b(t.map((t,n)=>y.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:r[n],top:i.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=aj(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(a6),this.states=aj(e.states,Uint32Array),this.data=aj(e.stateData),this.goto=aj(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new a$(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new a1(this,e,t,i);for(let n of this.wrappers)r=n(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return -1;for(let n=r[t+1];;){let t=r[n++],o=1&t,s=r[n++];if(o&&i)return s;for(let i=n+(t>>1);n<i;n++)if(r[n]==e)return s;if(o)return -1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let n=this.stateSlot(e,r?2:1),o;;n+=3){if(65535==(o=i[n]))if(1==i[n+1])o=i[n=a8(i,n+2)];else if(2==i[n+1])return a8(i,n+2);else break;if(o==t||0==o)return a8(i,n+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let i=this.stateSlot(e,1);null==r;i+=3){if(65535==this.data[i])if(1==this.data[i+1])i=a8(this.data,i+2);else break;r=t(a8(this.data,i+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i])if(1==this.data[i+1])i=a8(this.data,i+2);else break;if((1&this.data[i+2])==0){let e=this.data[i+1];t.some((t,i)=>1&i&&t==e)||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(a4.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let i=e.tokenizers.find(e=>e.from==t);return i?i.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let n=e.specializers.find(e=>e.from==i.external);if(!n)return i;let o=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[r]=a6(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(i[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i=this.dialects[t[e]],n;65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new a5(e,i,r)}static deserialize(e){return new a4(e)}}function a8(e,t){return e[t]|e[t+1]<<16}function a6(e){if(e.external){let t=+!!e.extend;return(i,r)=>e.external(i,r)<<1|t}return e.get}class a7{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=s_(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),n=r.search(lr(e,!1));return n<0?null:{from:i+n,to:this.pos,text:r.slice(n)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,i){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function a9(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function le(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[i,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)i[r[e]]=!0}let r=a9(t)+a9(i)+"*$";return[RegExp("^"+r),new RegExp(r)]}(t);return e=>{let n=e.matchBefore(r);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}class lt{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function li(e){return e.selection.main.from}function lr(e,t){var i;let{source:r}=e,n=t&&"^"!=r[0],o="$"!=r[r.length-1];return n||o?RegExp(`${n?"^":""}(?:${r})${o?"$":""}`,null!=(i=e.flags)?i:e.ignoreCase?"i":""):e}let ln=eq.define(),lo=new WeakMap;function ls(e){if(!Array.isArray(e))return e;let t=lo.get(e);return t||lo.set(e,t=le(e)),t}let la=eX.define(),ll=eX.define();class lu{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=el(e,t),r=ed(i);this.chars.push(i);let n=e.slice(t,t+r),o=n.toUpperCase();this.folded.push(el(o==n?n.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:n,byWord:o}=this;if(1==t.length){let r=el(e,0),n=ed(r),o=n==e.length?0:-100;if(r==t[0]);else{if(r!=i[0])return null;o+=-200}return this.ret(o,[0,n])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let n=0,o=Math.min(e.length,200);n<o&&l<a;){let o=el(e,n);(o==t[l]||o==i[l])&&(r[l++]=n),n+=ed(o)}if(l<a)return null}let u=0,d=0,c=!1,h=0,p=-1,f=-1,g=/[a-z]/.test(e),m=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&d<a;){let l=el(e,r);s<0&&(u<a&&l==t[u]&&(n[u++]=r),h<a&&(l==t[h]||l==i[h]?(0==h&&(p=r),f=r+1,h++):h=0));let y,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:+(l>=65&&l<=90):(y=eu(l))!=y.toLowerCase()?1:2*(y!=y.toUpperCase());(!r||1==b&&g||0==v&&0!=b)&&(t[d]==l||i[d]==l&&(c=!0)?o[d++]=r:o.length&&(m=!1)),v=b,r+=ed(l)}return d==a&&0==o[0]&&m?this.result(-100+(c?-200:0),o,e):h==a&&0==p?this.ret(-200-e.length+(f==e.length?0:-100),[0,f]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):h==a?this.ret(-900-e.length,[p,f]):d==a?this.result(-100+(c?-200:0)+-700+(m?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],n=0;for(let e of t){let t=e+(this.astral?ed(el(i,e)):1);n&&r[n-1]==e?r[n-1]=t:(r[n++]=e,r[n++]=t)}return this.ret(e-i.length,r)}}class ld{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==i?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}let lc=eR.define({combine:e=>e4(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:lp,filterStrict:!1,compareCompletions:(e,t)=>(e.sortText||e.label).localeCompare(t.sortText||t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>lh(e(i),t(i)),optionClass:(e,t)=>i=>lh(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function lh(e,t){return e?t?e+" "+t:e:t}function lp(e,t,i,r,n,o){let s=e.textDirection==iu.RTL,a=s,l=!1,u="top",d,c,h=t.left-n.left,p=n.right-t.right,f=r.right-r.left,g=r.bottom-r.top;if(a&&h<Math.min(f,p)?a=!1:!a&&p<Math.min(f,h)&&(a=!0),f<=(a?h:p))d=Math.max(n.top,Math.min(i.top,n.bottom-g))-t.top,c=Math.min(400,a?h:p);else{l=!0,c=Math.min(400,(s?t.right:n.right-t.left)-30);let e=n.bottom-t.bottom;e>=g||e>t.top?d=i.bottom-t.top:(u="bottom",d=t.bottom-i.top)}let m=(t.bottom-t.top)/o.offsetHeight,v=(t.right-t.left)/o.offsetWidth;return{style:`${u}: ${d/m}px; max-width: ${c/v}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":a?"left":"right")}}function lf(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let r=Math.floor((e-t)/i);return{from:e-(r+1)*i,to:e-r*i}}class lg{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:n,selected:o}=r.open,s=e.state.facet(lc);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i,r){let n=document.createElement("span");n.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let e=0;e<r.length;){let t=r[e++],i=r[e++];t>s&&n.appendChild(document.createTextNode(o.slice(s,t)));let a=n.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(o.slice(t,i))),a.className="cm-completionMatchedText",s=i}return s<o.length&&n.appendChild(document.createTextNode(o.slice(s))),n},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=lf(n.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",i=>{let{options:r}=e.state.field(t).open;for(let t=i.target,n;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(n=/-(\d+)$/.exec(t.id))&&+n[1]<r.length){this.applyCompletion(e,r[+n[1]]),i.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let i=e.state.field(this.stateField,!1);i&&i.tooltip&&e.state.facet(lc).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:ll.of(null)})}),this.showOptions(n,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:n,selected:o,disabled:s}=i.open;r.open&&r.open.options==n||(this.range=lf(n.length,o,e.state.facet(lc).maxRenderedOptions),this.showOptions(n,i.id)),this.updateSel(),s!=(null==(t=r.open)?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=lf(t.options.length,t.selected,this.view.state.facet(lc).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:n}=r;if(!n)return;let o="string"==typeof n?document.createTextNode(n):n(r);if(!o)return;"then"in o?o.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,r)}).catch(e=>iV(this.view.state,e,"completion info")):(this.addInfoPane(o,r),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(65535*Math.random()).toString(16),null!=e.nodeType)i.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;i.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,i;let r,n,o,s=null;for(let t=this.list.firstChild,i=this.range.from;t;t=t.nextSibling,i++)"LI"==t.nodeName&&t.id?i==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),s=t):t.hasAttribute("aria-selected")&&(t.removeAttribute("aria-selected"),t.removeAttribute("aria-describedby")):i--;return s&&(t=this.list,i=s,r=t.getBoundingClientRect(),n=i.getBoundingClientRect(),o=r.height/t.offsetHeight,n.top<r.top?t.scrollTop-=(r.top-n.top)/o:n.bottom>r.bottom&&(t.scrollTop+=(n.bottom-r.bottom)/o)),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),n=this.space;if(!n){let e=this.dom.ownerDocument.documentElement;n={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(n.bottom,t.bottom)-10||r.bottom<Math.max(n.top,t.top)+10?null:this.view.state.facet(lc).positionInfo(this.view,t,r,i,n,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){let r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let n=null;for(let o=i.from;o<i.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;e!=n&&(o>i.from||0==i.from)&&(n=e,"string"!=typeof l&&l.header?r.appendChild(l.header(l)):r.appendChild(document.createElement("completion-section")).textContent=e)}let u=r.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(s);for(let e of(d&&(u.className=d),this.optionContent)){let t=e(s,this.view.state,this.view,a);t&&u.appendChild(t)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function lm(e){return 100*(e.boost||0)+10*!!e.apply+5*!!e.info+ +!!e.type}class lv{constructor(e,t,i,r,n,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=n,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new lv(this.options,lC(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,n,o){if(r&&!o&&e.some(e=>e.isPending))return r.setDisabled();let s=function(e,t){let i=[],r=null,n=null,o=e=>{i.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},s=t.facet(lc);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)o(new lt(t,r.source,e?e(t):[],1e9-i.length));else{let i=t.sliceDoc(r.from,r.to),a,l=s.filterStrict?new ld(i):new lu(i);for(let t of r.result.options)if(a=l.match(t.label)){let i=t.displayLabel?e?e(t,a.matched):[]:a.matched,s=a.score+(t.boost||0);if(o(new lt(t,r.source,i,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;n||(n=Object.create(null)),n[e]=Math.max(s,n[e]||-1e9)}}}}if(r){let e=Object.create(null),t=0;for(let i of r.sort((e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?n[t.name]-n[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1)))t-=1e5,e[i.name]=t;for(let t of i){let{section:i}=t.completion;i&&(t.score+=e["string"==typeof i?i:i.name])}}let a=[],l=null,u=s.compareCompletions;for(let e of i.sort((e,t)=>t.score-e.score||u(e.completion,t.completion))){let t=e.completion;l&&l.label==t.label&&l.detail==t.detail&&(null==l.type||null==t.type||l.type==t.type)&&l.apply==t.apply&&l.boost==t.boost?lm(e.completion)>lm(l)&&(a[a.length-1]=e):a.push(e),l=e.completion}return a}(e,t);if(!s.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let a=t.facet(lc).selectOnOpen?0:-1;if(r&&r.selected!=a&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){a=t;break}}return new lv(s,lC(i,a),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:lT,above:n.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new lv(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new lv(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ly{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new ly(lx,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(lc),r=(i.override||t.languageDataAt("autocomplete",li(t)).map(ls)).map(t=>(this.active.find(e=>e.source==t)||new lk(t,+!!this.active.some(e=>0!=e.state))).update(e,i));r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let n=this.open,o=e.effects.some(e=>e.is(lE));for(let s of(n&&e.docChanged&&(n=n.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let i=0,r=0;;){for(;i<e.length&&!e[i].hasResult();)i++;for(;r<t.length&&!t[r].hasResult();)r++;let n=i==e.length,o=r==t.length;if(n||o)return n==o;if(e[i++].result!=t[r++].result)return!1}}(r,this.active)||o?n=lv.build(r,t,this.id,n,i,o):n&&n.disabled&&!r.some(e=>e.isPending)&&(n=null),!n&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new lk(e.source,0):e)),e.effects))s.is(lP)&&(n=n&&n.setSelected(s.value,this.id));return r==this.active&&n==this.open?this:new ly(r,this.id,n)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?lb:lw}}let lb={"aria-autocomplete":"list"},lw={};function lC(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}let lx=[];function lS(e,t){if(e.isUserEvent("input.complete")){let i=e.annotation(ln);if(i&&t.activateOnCompletion(i))return 12}let i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:16*!!e.docChanged}class lk{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let i=lS(e,t),r=this;for(let t of((8&i||16&i&&this.touches(e))&&(r=new lk(r.source,0)),4&i&&0==r.state&&(r=new lk(this.source,1)),r=r.updateFor(e,i),e.effects))if(t.is(la))r=new lk(r.source,1,t.value);else if(t.is(ll))r=new lk(r.source,0);else if(t.is(lE))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(li(e.state))}}class lR extends lk{constructor(e,t,i,r,n,o){super(e,3,t),this.limit=i,this.result=r,this.from=n,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let n=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=li(e.state);if(s>o||!r||2&t&&(li(e.startState)==this.from||s<this.limit))return new lk(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return!function(e,t,i,r){if(!e)return!1;let n=t.sliceDoc(i,r);return"function"==typeof e?e(n,i,r,t):lr(e,!0).test(n)}(r.validFor,e.state,n,o)?r.update&&(r=r.update(r,n,o,new a7(e.state,s,!1)))?new lR(this.source,this.explicit,a,r,r.from,null!=(i=r.to)?i:li(e.state)):new lk(this.source,1,this.explicit):new lR(this.source,this.explicit,a,r,n,o)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new lR(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new lk(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let lE=eX.define({map:(e,t)=>e.map(e=>e.map(t))}),lP=eX.define(),lM=eO.define({create:()=>ly.start(),update:(e,t)=>e.update(t),provide:e=>[oM.from(e,e=>e.tooltip),nB.contentAttributes.from(e,e=>e.attrs)]});function lD(e,t){let i=t.completion.apply||t.completion.label,r=e.state.field(lM).active.find(e=>e.source==t.source);return r instanceof lR&&("string"==typeof i?e.dispatch({...function(e,t,i,r){let{main:n}=e.selection,o=i-n.from,s=r-n.from;return{...e.changeByRange(a=>{if(a!=n&&i!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(i,r))return{range:a};let l=e.toText(t);return{changes:{from:a.from+o,to:r==n.from?a.to:a.from+s,insert:l},range:ex.cursor(a.from+o+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}(e.state,i,r.from,r.to),annotations:ln.of(t.completion)}):i(e,t.completion,r.from,r.to),!0)}let lT=e=>new lg(e,lM,lD);function lO(e,t="option"){return i=>{let r=i.state.field(lM,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<i.state.facet(lc).interactionDelay)return!1;let n=1,o;"page"==t&&(o=oA(i,r.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+n*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),i.dispatch({effects:lP.of(a)}),!0}}let l_=e=>!!e.state.field(lM,!1)&&(e.dispatch({effects:la.of(!0)}),!0);class lA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}let lF=iG.fromClass(class{constructor(e){for(let t of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(lM).active))t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(lM),i=e.state.facet(lc);if(!e.selectionSet&&!e.docChanged&&e.startState.field(lM)==t)return;let r=e.transactions.some(e=>{let t=lS(e,i);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let i=this.running[t];if(r||i.context.abortOnDocChange&&e.docChanged||i.updates.length+e.transactions.length>50&&Date.now()-i.time>1e3){for(let e of i.context.abortListeners)try{e()}catch(e){iV(this.view.state,e)}i.context.abortListeners=null,this.running.splice(t--,1)}else i.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(la)))&&(this.pendingStart=!0);let n=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),n):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(lM);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(lc).updateSyncTime))}startQuery(e){let{state:t}=this.view,i=li(t),r=new a7(t,i,e.explicit,this.view),n=new lA(e,r);this.running.push(n),Promise.resolve(e.source(r)).then(e=>{n.context.aborted||(n.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:ll.of(null)}),iV(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(lc).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(lc),r=this.view.state.field(lM);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(void 0===o.done)continue;if(this.running.splice(n--,1),o.done){let r=li(o.updates.length?o.updates[0].startState:this.view.state),n=Math.min(r,o.done.from+ +!o.active.explicit),s=new lR(o.active.source,o.active.explicit,n,o.done,o.done.from,null!=(e=o.done.to)?e:r);for(let e of o.updates)s=s.update(e,i);if(s.hasResult()){t.push(s);continue}}let s=r.active.find(e=>e.source==o.active.source);if(s&&s.isPending)if(null==o.done){let e=new lk(o.active.source,0);for(let t of o.updates)e=e.update(t,i);e.isPending||t.push(e)}else this.startQuery(s)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:lE.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(lM,!1);if(t&&t.tooltip&&this.view.state.facet(lc).closeOnBlur){let i=t.open&&oA(this.view,t.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:ll.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:la.of(!1)}),20),this.composing=0}}}),lI="object"==typeof navigator&&/Win/.test(navigator.platform),lL=eA.highest(nB.domEventHandlers({keydown(e,t){let i=t.state.field(lM,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||e.key.length>1||e.ctrlKey&&!(lI&&e.altKey)||e.metaKey)return!1;let r=i.open.options[i.open.selected],n=i.active.find(e=>e.source==r.source),o=r.completion.commitCharacters||n.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&lD(t,r),!1}})),lN=nB.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),lB=tU.widget({widget:new class extends tG{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),lV=tU.mark({class:"cm-snippetField"});class lH{constructor(e,t){this.ranges=e,this.active=t,this.deco=tU.set(e.map(e=>(e.from==e.to?lB:lV).range(e.from,e.to)),!0)}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new lH(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let lz=eX.define({map:(e,t)=>e&&e.map(t)}),lj=eX.define(),lG=eO.define({create:()=>null,update(e,t){for(let i of t.effects){if(i.is(lz))return i.value;if(i.is(lj)&&e)return new lH(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>nB.decorations.from(e,e=>e?e.deco:tU.none)});function lW(e){return({state:t,dispatch:i})=>{var r;let n=t.field(lG,!1);if(!n||e<0&&0==n.active)return!1;let o=n.active+e,s=e>0&&!n.ranges.some(t=>t.field==o+e);return i(t.update({selection:(r=n.ranges,ex.create(r.filter(e=>e.field==o).map(e=>ex.range(e.from,e.to)))),effects:lz.of(s?null:new lH(n.ranges,o)),scrollIntoView:!0})),!0}}let lU=[{key:"Tab",run:lW(1),shift:lW(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(lG,!1)&&(t(e.update({effects:lz.of(null)})),!0)}],l$={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},lq=eX.define({map(e,t){let i=t.mapPos(e,-1,eh.TrackAfter);return null==i?void 0:i}}),lK=new class extends e8{};lK.startSide=1,lK.endSide=-1;let lQ=eO.define({create:()=>te.empty,update(e,t){if(e=e.map(t.changes),t.selection){let i=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=i.from&&e<=i.to})}for(let i of t.effects)i.is(lq)&&(e=e.update({add:[lK.range(i.value,i.value+1)]}));return e}}),lX="()[]{}<>";function lY(e){for(let t=0;t<lX.length;t+=2)if(lX.charCodeAt(t)==e)return lX.charAt(t+1);return eu(e<128?e:e+1)}function lZ(e,t){return e.languageDataAt("closeBrackets",t)[0]||l$}let lJ="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),l0=nB.inputHandler.of((e,t,i,r)=>{if((lJ?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let n=e.state.selection.main;if(r.length>2||2==r.length&&1==ed(el(r,0))||t!=n.from||i!=n.to)return!1;let o=function(e,t){let i=lZ(e,e.selection.main.head),r=i.brackets||l$.brackets;for(let n of r){let o=lY(el(n,0));if(t==n)return o==n?function(e,t,i,r){let n=r.stringPrefixes||l$.stringPrefixes,o=null,s=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:lq.of(r.to+t.length),range:ex.range(r.anchor+t.length,r.head+t.length)};let s=r.head,a=l5(e.doc,s),l;if(a==t){if(l3(e,s))return{changes:{insert:t+t,from:s},effects:lq.of(s+t.length),range:ex.cursor(s+t.length)};else if(l2(e,s)){let r=i&&e.sliceDoc(s,s+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:s,to:s+r.length,insert:r},range:ex.cursor(s+r.length)}}}else if(i&&e.sliceDoc(s-2*t.length,s)==t+t&&(l=l4(e,s-2*t.length,n))>-1&&l3(e,l))return{changes:{insert:t+t+t+t,from:s},effects:lq.of(s+t.length),range:ex.cursor(s+t.length)};else if(e.charCategorizer(s)(a)!=e2.Word&&l4(e,s,n)>-1&&!function(e,t,i,r){let n=s_(e).resolveInner(t,-1),o=r.reduce((e,t)=>Math.max(e,t.length),0);for(let s=0;s<5;s++){let s=e.sliceDoc(n.from,Math.min(n.to,n.from+i.length+o)),a=s.indexOf(i);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=n.firstChild;for(;t&&t.from==n.from&&t.to-t.from>i.length+a;){if(e.sliceDoc(t.to-i.length,t.to)==i)return!1;t=t.firstChild}return!0}let l=n.to==t&&n.parent;if(!l)break;n=l}return!1}(e,s,t,n))return{changes:{insert:t+t,from:s},effects:lq.of(s+t.length),range:ex.cursor(s+t.length)};return{range:o=r}});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,n,r.indexOf(n+n+n)>-1,i):function(e,t,i,r){let n=null,o=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:i,from:o.to}],effects:lq.of(o.to+t.length),range:ex.range(o.anchor+t.length,o.head+t.length)};let s=l5(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+i,from:o.head},effects:lq.of(o.head+t.length),range:ex.cursor(o.head+t.length)}:{range:n=o}});return n?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,n,o,i.before||l$.before);if(t==o&&l2(e,e.selection.main.from))return function(e,t,i){let r=null,n=e.changeByRange(t=>t.empty&&l5(e.doc,t.head)==i?{changes:{from:t.head,to:t.head+i.length,insert:i},range:ex.cursor(t.head+i.length)}:r={range:t});return r?null:e.update(n,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)}),l1=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=lZ(e,e.selection.main.head).brackets||l$.brackets,r=null,n=e.changeByRange(t=>{if(t.empty){var n,o;let r,s=(n=e.doc,o=t.head,ed(el(r=n.sliceString(o-2,o),0))==r.length?r:r.slice(1));for(let r of i)if(r==s&&l5(e.doc,t.head)==lY(el(r,0)))return{changes:{from:t.head-r.length,to:t.head+r.length},range:ex.cursor(t.head-r.length)}}return{range:r=t}});return r||t(e.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function l2(e,t){let i=!1;return e.field(lQ).between(0,e.doc.length,e=>{e==t&&(i=!0)}),i}function l5(e,t){let i=e.sliceString(t,t+2);return i.slice(0,ed(el(i,0)))}function l3(e,t){let i=s_(e).resolveInner(t+1);return i.parent&&i.from==t}function l4(e,t,i){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=e2.Word)return t;for(let n of i){let i=t-n.length;if(e.sliceDoc(i,t)==n&&r(e.sliceDoc(i-1,i))!=e2.Word)return i}return -1}let l8=[{key:"Ctrl-Space",run:l_},{mac:"Alt-`",run:l_},{mac:"Alt-i",run:l_},{key:"Escape",run:e=>{let t=e.state.field(lM,!1);return!!t&&!!t.active.some(e=>0!=e.state)&&(e.dispatch({effects:ll.of(null)}),!0)}},{key:"ArrowDown",run:lO(!0)},{key:"ArrowUp",run:lO(!1)},{key:"PageDown",run:lO(!0,"page")},{key:"PageUp",run:lO(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(lM,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(lc).interactionDelay)&&lD(e,t.open.options[t.open.selected])}}],l6=eA.highest(n$.computeN([lc],e=>e.facet(lc).defaultKeymap?[l8]:[]));function l7(e){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function l9(e,t,i){for(let r=!1;;){if(e.next<0)return;if(e.next==t&&!r)return void e.advance();r=i&&!r&&92==e.next,e.advance()}}function ue(e,t){for(;95==e.next||l7(e.next);)null!=t&&(t+=String.fromCharCode(e.next)),e.advance();return t}function ut(e,t){for(;48==e.next||49==e.next;)e.advance();t&&e.next==t&&e.advance()}function ui(e,t){for(;;){if(46==e.next){if(t)break;t=!0}else if(e.next<48||e.next>57)break;e.advance()}if(69==e.next||101==e.next)for(e.advance(),(43==e.next||45==e.next)&&e.advance();e.next>=48&&e.next<=57;)e.advance()}function ur(e){for(;!(e.next<0||10==e.next);)e.advance()}function un(e,t){for(let i=0;i<t.length;i++)if(t.charCodeAt(i)==e)return!0;return!1}let uo=" 	\r\n";function us(e,t,i){let r=Object.create(null);for(let t of(r.true=r.false=5,r.null=r.unknown=6,e.split(" ")))t&&(r[t]=20);for(let e of t.split(" "))e&&(r[e]=21);for(let e of(i||"").split(" "))e&&(r[e]=24);return r}let ua="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",ul="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",uu={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:us(ul,ua)};function ud(e){return new aq(t=>{let{next:i}=t;if(t.advance(),un(i,uo)){for(;un(t.next,uo);)t.advance();t.acceptToken(36)}else if(36==i&&e.doubleDollarQuotedStrings){let e=ue(t,"");36==t.next&&(t.advance(),function(e,t){t:for(;;){if(e.next<0)return;if(36==e.next){e.advance();for(let i=0;i<t.length;i++){if(e.next!=t.charCodeAt(i))continue t;e.advance()}if(36==e.next)return void e.advance()}else e.advance()}}(t,e),t.acceptToken(3))}else if(39==i||34==i&&e.doubleQuotedStrings)l9(t,i,e.backslashEscapes),t.acceptToken(3);else if(35==i&&e.hashComments||47==i&&47==t.next&&e.slashComments)ur(t),t.acceptToken(1);else if(45!=i||45!=t.next||e.spaceAfterDashes&&32!=t.peek(1)){if(47==i&&42==t.next){t.advance();for(let e=1;;){let i=t.next;if(t.next<0)break;if(t.advance(),42==i&&47==t.next){if(e--,t.advance(),!e)break}else 47==i&&42==t.next&&(e++,t.advance())}t.acceptToken(2)}else if((101==i||69==i)&&39==t.next)t.advance(),l9(t,39,!0),t.acceptToken(3);else if((110==i||78==i)&&39==t.next&&e.charSetCasts)t.advance(),l9(t,39,e.backslashEscapes),t.acceptToken(3);else if(95==i&&e.charSetCasts)for(let i=0;;i++){if(39==t.next&&i>1){t.advance(),l9(t,39,e.backslashEscapes),t.acceptToken(3);break}if(!l7(t.next))break;t.advance()}else if(e.plsqlQuotingMechanism&&(113==i||81==i)&&39==t.next&&t.peek(1)>0&&!un(t.peek(1),uo)){let e=t.peek(1);t.advance(2),function(e,t){let i="[{<(".indexOf(String.fromCharCode(t)),r=i<0?t:"]}>)".charCodeAt(i);for(;;){if(e.next<0)return;if(e.next==r&&39==e.peek(1))return void e.advance(2);e.advance()}}(t,e),t.acceptToken(3)}else if(un(i,e.identifierQuotes))l9(t,91==i?93:i,!1),t.acceptToken(19);else if(40==i)t.acceptToken(7);else if(41==i)t.acceptToken(8);else if(123==i)t.acceptToken(9);else if(125==i)t.acceptToken(10);else if(91==i)t.acceptToken(11);else if(93==i)t.acceptToken(12);else if(59==i)t.acceptToken(13);else if(e.unquotedBitLiterals&&48==i&&98==t.next)t.advance(),ut(t),t.acceptToken(22);else if((98==i||66==i)&&(39==t.next||34==t.next)){let i=t.next;t.advance(),e.treatBitsAsBytes?(l9(t,i,e.backslashEscapes),t.acceptToken(23)):(ut(t,i),t.acceptToken(22))}else if(48==i&&(120==t.next||88==t.next)||(120==i||88==i)&&39==t.next){let e=39==t.next;for(t.advance();(n=t.next)>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70;)t.advance();e&&39==t.next&&t.advance(),t.acceptToken(4)}else if(46==i&&t.next>=48&&t.next<=57)ui(t,!0),t.acceptToken(4);else if(46==i)t.acceptToken(14);else if(i>=48&&i<=57)ui(t,!1),t.acceptToken(4);else if(un(i,e.operatorChars)){for(;un(t.next,e.operatorChars);)t.advance();t.acceptToken(15)}else if(un(i,e.specialVar)){var r,n;if(t.next==i&&t.advance(),39==t.next||34==t.next||96==t.next){let e=t.next;t.advance(),l9(t,e,!1)}else ue(t);t.acceptToken(17)}else if(58==i||44==i)t.acceptToken(16);else if(l7(i)){let n=ue(t,String.fromCharCode(i));t.acceptToken(46==t.next||46==t.peek(-n.length-1)?18:null!=(r=e.words[n.toLowerCase()])?r:18)}}else ur(t),t.acceptToken(1)})}let uc=ud(uu),uh=a4.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,uc],topRules:{Script:[0,25]},tokenPrec:0});function up(e){let t=e.cursor().moveTo(e.from,-1);for(;/Comment/.test(t.name);)t.moveTo(t.from,-1);return t.node}function uf(e,t){let i=e.sliceString(t.from,t.to),r=/^([`'"\[])(.*)([`'"\]])$/.exec(i);return r?r[2]:i}function ug(e){return e&&("Identifier"==e.name||"QuotedIdentifier"==e.name)}function um(e,t){for(let i=[];;){if(!t||"."!=t.name)return i;let r=up(t);if(!ug(r))return i;i.unshift(uf(e,r)),t=up(r)}}let uv=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" ")),uy=/^\w*$/,ub=/^[`'"\[]?\w*[`'"\]]?$/;function uw(e){return e.self&&"string"==typeof e.self.label}class uC{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(t=>t.label==e)&&this.list.push(ux(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new uC(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(t=>t.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion("string"==typeof t?ux(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):uw(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],r=null,n=t.replace(/\\?\./g,e=>"."==e?"\0":e).split("\0"),o=this;uw(i)&&(r=i.self,i=i.children);for(let e=0;e<n.length;e++)r&&e==n.length-1&&o.addCompletion(r),o=o.child(n[e].replace(/\\\./g,"."));o.addNamespace(i)}}}function ux(e,t,i,r){return RegExp("^[a-z_][a-z_\\d]*$",r?"i":"").test(e)?{label:e,type:t}:{label:e,type:t,apply:i+e+uS(i)}}function uS(e){return"["===e?"]":e}let uk=uh.configure({props:[sQ.add({Statement:function({except:e,units:t=1}={}){return i=>{let r=e&&e.test(i.textAfter);return i.baseIndent+(r?0:t*i.unit)}}()}),s2.add({Statement:(e,t)=>({from:Math.min(e.from+100,t.doc.lineAt(e.from).to),to:e.to}),BlockComment:e=>({from:e.from+2,to:e.to-2})}),so({Keyword:sE.keyword,Type:sE.typeName,Builtin:sE.standard(sE.name),Bits:sE.number,Bytes:sE.string,Bool:sE.bool,Null:sE.null,Number:sE.number,String:sE.string,Identifier:sE.name,QuotedIdentifier:sE.special(sE.string),SpecialVar:sE.special(sE.name),LineComment:sE.lineComment,BlockComment:sE.blockComment,Operator:sE.operator,"Semi Punctuation":sE.punctuation,"( )":sE.paren,"{ }":sE.brace,"[ ]":sE.squareBracket})]});class uR{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}configureLanguage(e,t){return new uR(this.dialect,this.language.configure(e,t),this.spec)}static define(e){let t=function(e,t,i,r){let n={};for(let t in uu)n[t]=(e.hasOwnProperty(t)?e:uu)[t];return t&&(n.words=us(t,i||"",r)),n}(e,e.keywords,e.types,e.builtin),i=sO.define({name:"sql",parser:uk.configure({tokenizers:[{from:uc,to:ud(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new uR(t,i,e)}}function uE(e,t){return{label:e,type:t,boost:-1}}function uP(e={}){var t,i,r,n,o,s,a;let l,u,d=e.dialect||uM;return new sj(d.language,[e.schema?(e.dialect||uM).language.data.of({autocomplete:e.schema?(t=e.schema,i=e.tables,r=e.schemas,n=e.defaultTable,o=e.defaultSchema,l=new uC((null==(a=null==(s=e.dialect||uM)?void 0:s.spec.identifierQuotes)?void 0:a[0])||'"',!!(null==s?void 0:s.spec.caseInsensitiveIdentifiers)),u=o?l.child(o):null,l.addNamespace(t),i&&(u||l).addCompletions(i),r&&l.addCompletions(r),u&&l.addCompletions(u.list),n&&l.addCompletions((u||l).child(n).list),e=>{var t,i;let r,o,{parents:s,from:a,quoted:d,empty:c,aliases:h}=(t=e.state,i=e.pos,r=s_(t).resolveInner(i,-1),o=function(e,t){let i;for(let e=t;!i;e=e.parent){if(!e)return null;"Statement"==e.name&&(i=e)}let r=null;for(let t=i.firstChild,n=!1,o=null;t;t=t.nextSibling){let i="Keyword"==t.name?e.sliceString(t.from,t.to).toLowerCase():null,s=null;if(n)if("as"==i&&o&&ug(t.nextSibling))s=uf(e,t.nextSibling);else if(i&&uv.has(i))break;else o&&ug(t)&&(s=uf(e,t));else n="from"==i;s&&(r||(r=Object.create(null)),r[s]=function(e,t){if("CompositeIdentifier"==t.name){let i=[];for(let r=t.firstChild;r;r=r.nextSibling)ug(r)&&i.push(uf(e,r));return i}return[uf(e,t)]}(e,o)),o=/Identifier$/.test(t.name)?t:null}return r}(t.doc,r),"Identifier"==r.name||"QuotedIdentifier"==r.name||"Keyword"==r.name?{from:r.from,quoted:"QuotedIdentifier"==r.name?t.doc.sliceString(r.from,r.from+1):null,parents:um(t.doc,up(r)),aliases:o}:"."==r.name?{from:i,quoted:null,parents:um(t.doc,r),aliases:o}:{from:i,quoted:null,parents:[],empty:!0,aliases:o});if(c&&!e.explicit)return null;h&&1==s.length&&(s=h[s[0]]||s);let p=l;for(let e of s){for(;!p.children||!p.children[e];)if(p==l&&u)p=u;else{if(p!=u||!n)return null;p=p.child(n)}let t=p.maybeChild(e);if(!t)return null;p=t}let f=p.list;if(p==l&&h&&(f=f.concat(Object.keys(h).map(e=>({label:e,type:"constant"})))),!d)return{from:a,options:f,validFor:uy};{let t=d[0],i=uS(t);return{from:a,to:e.state.sliceDoc(e.pos,e.pos+1)==i?e.pos+1:void 0,options:f.map(e=>({...e,label:e.label[0]==t?e.label:t+e.label+i,apply:void 0})),validFor:ub}}}):()=>null}):[],d.language.data.of({autocomplete:function(e,t=!1,i){var r,n,o,s;return r=e.dialect.words,n=i||uE,o=["QuotedIdentifier","String","LineComment","BlockComment","."],s=le(Object.keys(r).map(e=>{var i;return n(t?e.toUpperCase():e,21==(i=r[e])?"type":20==i?"keyword":"variable")})),e=>{for(let t=s_(e.state).resolveInner(e.pos,-1);t;t=t.parent){if(o.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return s(e)}}(d,e.upperCaseKeywords,e.keywordCompletion)})])}let uM=uR.define({}),uD=uR.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:ul+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:ua+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"});class uT{constructor(e,t,i){this.parent=e,this.depth=t,this.type=i,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+i}}function uO(e,t){for(let i=0,r=t-e.pos-1;;r--,i++){let t=e.peek(r);if(uA(t)||-1==t)return i}}function u_(e){return 32==e||9==e}function uA(e){return 10==e||13==e}function uF(e){var t;return e<0||u_(t=e)||uA(t)}uT.top=new uT(null,-1,0);let uI=new class{constructor(e){this.start=e.start,this.shift=e.shift||a3,this.reduce=e.reduce||a3,this.reuse=e.reuse||a3,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:uT.top,reduce:(e,t)=>3==e.type&&(20==t||34==t)?e.parent:e,shift(e,t,i,r){if(3==t)return new uT(e,uO(r,r.pos),1);if(65==t||5==t)return new uT(e,uO(r,r.pos),2);if(63==t)return e.parent;if(19==t||33==t)return new uT(e,0,3);if(13==t&&4==e.type)return e.parent;if(47==t){let t=/[1-9]/.exec(r.read(r.pos,i.pos));if(t)return new uT(e,e.depth+ +t[0],4)}return e},hash:e=>e.hash});function uL(e,t,i=0){return e.peek(i)==t&&e.peek(i+1)==t&&e.peek(i+2)==t&&uF(e.peek(i+3))}let uN=new aq((e,t)=>{if(-1==e.next&&t.canShift(64))return e.acceptToken(64);let i=e.peek(-1);if((uA(i)||i<0)&&3!=t.context.type){if(uL(e,45))if(!t.canShift(63))return e.acceptToken(1,3);else e.acceptToken(63);if(uL(e,46))if(!t.canShift(63))return e.acceptToken(2,3);else e.acceptToken(63);let i=0;for(;32==e.next;)i++,e.advance();!(i<t.context.depth)&&(i!=t.context.depth||1!=t.context.type||45==e.next&&uF(e.peek(1)))||-1==e.next||uA(e.next)||35==e.next||e.acceptToken(63,-i)}},{contextual:!0}),uB=new aq((e,t)=>{if(3==t.context.type){63==e.next&&(e.advance(),uF(e.next)&&e.acceptToken(7));return}if(45==e.next)e.advance(),uF(e.next)&&e.acceptToken(1==t.context.type&&t.context.depth==uO(e,e.pos-1)?4:3);else if(63==e.next)e.advance(),uF(e.next)&&e.acceptToken(2==t.context.type&&t.context.depth==uO(e,e.pos-1)?6:5);else{let i=e.pos;for(;;)if(u_(e.next)){if(e.pos==i)return;e.advance()}else if(33==e.next)uz(e);else if(38==e.next)uj(e);else if(42==e.next){uj(e);break}else if(39==e.next||34==e.next){if(uG(e,!0))break;return}else if(91==e.next||123==e.next){if(!function(e){for(let t=[],i=e.pos+1024;;)if(91==e.next||123==e.next)t.push(e.next),e.advance();else if(39==e.next||34==e.next){if(!uG(e,!0))return!1}else if(93==e.next||125==e.next){if(t[t.length-1]!=e.next-2)return!1;if(t.pop(),e.advance(),!t.length)return!0}else{if(e.next<0||e.pos>i||uA(e.next))return!1;e.advance()}}(e))return;break}else{u$(e,!0,!1,0);break}for(;u_(e.next);)e.advance();if(58==e.next){if(e.pos==i&&t.canShift(29))return;uF(e.peek(1))&&e.acceptTokenTo(2==t.context.type&&t.context.depth==uO(e,i)?66:65,i)}}},{contextual:!0});function uV(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function uH(e,t){var i;return 37==e.next?(e.advance(),uV(e.next)&&e.advance(),uV(e.next)&&e.advance(),!0):(!!((i=e.next)>32)&&!!(i<127)&&34!=i&&37!=i&&44!=i&&60!=i&&62!=i&&92!=i&&94!=i&&96!=i&&123!=i&&124!=i&&125!=i||!!t&&44==e.next)&&(e.advance(),!0)}function uz(e){if(e.advance(),60==e.next){for(e.advance();;)if(!uH(e,!0)){62==e.next&&e.advance();break}}else for(;uH(e,!1););}function uj(e){for(e.advance();!uF(e.next)&&"f"!=uW(e.tag);)e.advance()}function uG(e,t){let i=e.next,r=!1,n=e.pos;for(e.advance();;){let o=e.next;if(o<0)break;if(e.advance(),o==i)if(39==o)if(39==e.next)e.advance();else break;else break;else if(92==o&&34==i)e.next>=0&&e.advance();else if(uA(o)){if(t)return!1;r=!0}else if(t&&e.pos>=n+1024)return!1}return!r}function uW(e){return e<33?"u":e>125?"s":"iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif"[e-33]}function uU(e,t){let i=uW(e);return"u"!=i&&!(t&&"f"==i)}function u$(e,t,i,r){if(!("s"==uW(e.next)||(63==e.next||58==e.next||45==e.next)&&uU(e.peek(1),i)))return!1;e.advance();let n=e.pos;for(;;){var o;let s=e.next,a=0,l=r+1;for(;u_(o=s)||uA(o);){if(uA(s)){if(t)return!1;l=0}else l++;s=e.peek(++a)}if(!(s>=0&&(58==s?uU(e.peek(a+1),i):35==s?32!=e.peek(a-1):uU(s,i)))||!i&&l<=r||0==l&&!i&&(uL(e,45,a)||uL(e,46,a)))break;if(t&&"f"==uW(s))return!1;for(let t=a;t>=0;t--)e.advance();if(t&&e.pos>n+1024)return!1}return!0}let uq=new aq((e,t)=>{if(33==e.next)uz(e),e.acceptToken(12);else if(38==e.next||42==e.next){let t=38==e.next?10:11;uj(e),e.acceptToken(t)}else 39==e.next||34==e.next?(uG(e,!1),e.acceptToken(9)):u$(e,!1,3==t.context.type,t.context.depth)&&e.acceptToken(8)}),uK=new aq((e,t)=>{let i=4==t.context.type?t.context.depth:-1,r=e.pos;t:for(;;){let n=0,o=e.next;for(;32==o;)o=e.peek(++n);if(!n&&(uL(e,45,n)||uL(e,46,n))||!uA(o)&&(i<0&&(i=Math.max(t.context.depth+1,n)),n<i))break;for(;;){if(e.next<0)break t;let t=uA(e.next);if(e.advance(),t)continue t;r=e.pos}}e.acceptTokenTo(13,r)}),uQ=so({DirectiveName:sE.keyword,DirectiveContent:sE.attributeValue,"DirectiveEnd DocEnd":sE.meta,QuotedLiteral:sE.string,BlockLiteralHeader:sE.special(sE.string),BlockLiteralContent:sE.content,Literal:sE.content,"Key/Literal Key/QuotedLiteral":sE.definition(sE.propertyName),"Anchor Alias":sE.labelName,Tag:sE.typeName,Comment:sE.lineComment,": , -":sE.separator,"?":sE.punctuation,"[ ]":sE.squareBracket,"{ }":sE.brace}),uX=a4.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:uI,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[uQ],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[uN,uB,uq,uK,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),uY=sO.define({name:"yaml",parser:uX.configure({props:[sQ.add({Stream:e=>{for(let t=e.node.resolve(e.pos,-1);t&&t.to>=e.pos;t=t.parent){if("BlockLiteralContent"==t.name&&t.from<t.to)return e.baseIndentFor(t);if("BlockLiteral"==t.name)return e.baseIndentFor(t)+e.unit;if("BlockSequence"==t.name||"BlockMapping"==t.name)return e.column(t.from,1);if("QuotedLiteral"==t.name)break;if("Literal"==t.name){let i=e.column(t.from,1);if(i==e.lineIndent(t.from,1))return i;if(t.to>e.pos)break}}return null},FlowMapping:sJ({closing:"}"}),FlowSequence:sJ({closing:"]"})}),s2.add({"FlowMapping FlowSequence":function(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null},"Item Pair BlockLiteral":(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});sE.meta;var uZ=e.i(230330),uJ=e=>{var{theme:t,settings:i={},styles:r=[]}=e,n={".cm-gutters":{}},o={};i.background&&(o.backgroundColor=i.background),i.backgroundImage&&(o.backgroundImage=i.backgroundImage),i.foreground&&(o.color=i.foreground),i.fontSize&&(o.fontSize=i.fontSize),(i.background||i.foreground)&&(n["&"]=o),i.fontFamily&&(n["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(n[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(n[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(n[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(n[".cm-content"]={caretColor:i.caret},n[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var s={};return i.gutterActiveForeground&&(s.color=i.gutterActiveForeground),i.lineHighlight&&(n[".cm-activeLine"]={backgroundColor:i.lineHighlight},s.backgroundColor=i.lineHighlight),n[".cm-activeLineGutter"]=s,i.selection&&(n["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:i.selection+" !important"}),i.selectionMatch&&(n["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch}),[nB.theme(n,{dark:"dark"===t}),av(ap.define(r))]},u0={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},u1=[{tag:[sE.standard(sE.tagName),sE.tagName],color:"#116329"},{tag:[sE.comment,sE.bracket],color:"#6a737d"},{tag:[sE.className,sE.propertyName],color:"#6f42c1"},{tag:[sE.variableName,sE.attributeName,sE.number,sE.operator],color:"#005cc5"},{tag:[sE.keyword,sE.typeName,sE.typeOperator,sE.typeName],color:"#d73a49"},{tag:[sE.string,sE.meta,sE.regexp],color:"#032f62"},{tag:[sE.name,sE.quote],color:"#22863a"},{tag:[sE.heading,sE.strong],color:"#24292e",fontWeight:"bold"},{tag:[sE.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[sE.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[sE.atom,sE.bool,sE.special(sE.variableName)],color:"#e36209"},{tag:[sE.url,sE.escape,sE.regexp,sE.link],color:"#032f62"},{tag:sE.link,textDecoration:"underline"},{tag:sE.strikethrough,textDecoration:"line-through"},{tag:sE.invalid,color:"#cb2431"}],u2=(e=>{var{theme:t="light",settings:i={},styles:r=[]}=e||{};return uJ({theme:t,settings:(0,uZ.default)({},u0,i),styles:[...u1,...r]})})(),u5={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},u3=[{tag:[sE.standard(sE.tagName),sE.tagName],color:"#7ee787"},{tag:[sE.comment,sE.bracket],color:"#8b949e"},{tag:[sE.className,sE.propertyName],color:"#d2a8ff"},{tag:[sE.variableName,sE.attributeName,sE.number,sE.operator],color:"#79c0ff"},{tag:[sE.keyword,sE.typeName,sE.typeOperator,sE.typeName],color:"#ff7b72"},{tag:[sE.string,sE.meta,sE.regexp],color:"#a5d6ff"},{tag:[sE.name,sE.quote],color:"#7ee787"},{tag:[sE.heading,sE.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[sE.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[sE.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[sE.atom,sE.bool,sE.special(sE.variableName)],color:"#ffab70"},{tag:sE.link,textDecoration:"underline"},{tag:sE.strikethrough,textDecoration:"line-through"},{tag:sE.invalid,color:"#f97583"}],u4=(e=>{var{theme:t="dark",settings:i={},styles:r=[]}=e||{};return uJ({theme:t,settings:(0,uZ.default)({},u5,i),styles:[...u3,...r]})})(),u8=e.i(382034),u6=e.i(187725);function u7(e,t){return({state:i,dispatch:r})=>{if(i.readOnly)return!1;let n=e(t,i);return!!n&&(r(i.update(n)),!0)}}let u9=u7(function(e,t,i=t.selection.ranges){let r=[],n=-1;for(let{from:e,to:o}of i){let i=r.length,s=1e9,a=di(t,e).line;if(a){for(let i=e;i<=o;){let l=t.doc.lineAt(i);if(l.from>n&&(e==o||o>l.from)){n=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,i=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<s&&(s=e),r.push({line:l,comment:i,token:a,indent:e,empty:t,single:!1})}i=l.to+1}if(s<1e9)for(let e=i;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==i+1&&(r[i].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:i,indent:n,empty:o,single:s}of r)(s||!o)&&e.push({from:t.from+n,insert:i+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:i,token:n}of r)if(i>=0){let r=t.from+i,o=r+n.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null},0),de=u7(dr,0),dt=u7((e,t)=>dr(e,t,function(e){let t=[];for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),n=i.to<=r.to?r:e.doc.lineAt(i.to);n.from>r.from&&n.from==i.to&&(n=i.to==r.to+1?r:e.doc.lineAt(i.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=n.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:n.to})}return t}(t)),0);function di(e,t){let i=e.languageDataAt("commentTokens",t,1);return i.length?i[0]:{}}function dr(e,t,i=t.selection.ranges){let r=i.map(e=>di(t,e.from).block);if(!r.every(e=>e))return null;let n=i.map((e,i)=>(function(e,{open:t,close:i},r,n){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(n,n+50),u=/\s*$/.exec(a)[0].length,d=/^\s*/.exec(l)[0].length,c=a.length-u;if(a.slice(c-t.length,c)==t&&l.slice(d,d+i.length)==i)return{open:{pos:r-u,margin:u&&1},close:{pos:n+d,margin:d&&1}};n-r<=100?o=s=e.sliceDoc(r,n):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(n-50,n));let h=/^\s*/.exec(o)[0].length,p=/\s*$/.exec(s)[0].length,f=s.length-p-i.length;return o.slice(h,h+t.length)==t&&s.slice(f,f+i.length)==i?{open:{pos:r+h+t.length,margin:+!!/\s/.test(o.charAt(h+t.length))},close:{pos:n-p-i.length,margin:+!!/\s/.test(s.charAt(f-1))}}:null})(t,r[i],e.from,e.to));if(2!=e&&!n.every(e=>e))return{changes:t.changes(i.map((e,t)=>n[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&n.some(e=>e)){let e=[];for(let t=0,i;t<n.length;t++)if(i=n[t]){let n=r[t],{open:o,close:s}=i;e.push({from:o.pos-n.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+n.close.length})}return{changes:e}}return null}let dn=eq.define(),ds=eq.define(),da=eR.define(),dl=eR.define({combine:e=>e4(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}),du=eO.define({create:()=>dx.empty,update(e,t){let i=t.state.facet(dl),r=t.annotation(dn);if(r){let n=dg.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=n?dm(s,s.length,i.minDepth,n):db(s,t.startState.selection),new dx(0==o?r.rest:s,0==o?s:r.rest)}let n=t.annotation(ds);if(("full"==n||"before"==n)&&(e=e.isolate()),!1===t.annotation(eY.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=dg.fromTransaction(t),s=t.annotation(eY.time),a=t.annotation(eY.userEvent);return o?e=e.addChanges(o,s,a,i,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,i.newGroupDelay)),("full"==n||"after"==n)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new dx(e.done.map(dg.fromJSON),e.undone.map(dg.fromJSON))});function dd(e,t){return function({state:i,dispatch:r}){if(!t&&i.readOnly)return!1;let n=i.field(du,!1);if(!n)return!1;let o=n.pop(e,i,t);return!!o&&(r(o),!0)}}let dc=dd(0,!1),dh=dd(1,!1),dp=dd(0,!0),df=dd(1,!0);class dg{constructor(e,t,i,r,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=n}setSelAfter(e){return new dg(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null==(e=this.changes)?void 0:e.toJSON(),mapped:null==(t=this.mapped)?void 0:t.toJSON(),startSelection:null==(i=this.startSelection)?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new dg(e.changes&&ef.fromJSON(e.changes),[],e.mapped&&ep.fromJSON(e.mapped),e.startSelection&&ex.fromJSON(e.startSelection),e.selectionsAfter.map(ex.fromJSON))}static fromTransaction(e,t){let i=dy;for(let t of e.startState.facet(da)){let r=t(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new dg(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,dy)}static selection(e){return new dg(void 0,dy,void 0,void 0,e)}}function dm(e,t,i,r){let n=e.slice(t+1>i+20?t-i-1:0,t);return n.push(r),n}function dv(e,t){return e.length?t.length?e.concat(t):e:t}let dy=[];function db(e,t){if(!e.length)return[dg.selection([t])];{let i=e[e.length-1],r=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),dm(e,e.length-1,1e9,i.setSelAfter(r)))}}function dw(e,t){if(!e.length)return e;let i=e.length,r=dy;for(;i;){let n=function(e,t,i){let r=dv(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):dy,i);if(!e.changes)return dg.selection(r);let n=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new dg(n,eX.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}(e[i-1],t,r);if(n.changes&&!n.changes.empty||n.effects.length){let t=e.slice(0,i);return t[i-1]=n,t}t=n.mapped,i--,r=n.selectionsAfter}return r.length?[dg.selection(r)]:dy}let dC=/^(input\.type|delete)($|\.)/;class dx{constructor(e,t,i=0,r){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new dx(this.done,this.undone):this}addChanges(e,t,i,r,n){var o,s;let a,l,u=this.done,d=u[u.length-1];return new dx(u=d&&d.changes&&!d.changes.empty&&e.changes&&(!i||dC.test(i))&&(!d.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(n,(o=d.changes,s=e.changes,a=[],l=!1,o.iterChangedRanges((e,t)=>a.push(e,t)),s.iterChangedRanges((e,t,i,r)=>{for(let e=0;e<a.length;){let t=a[e++],n=a[e++];r>=t&&i<=n&&(l=!0)}}),l))||"input.type.compose"==i)?dm(u,u.length-1,r.minDepth,new dg(e.changes.compose(d.changes),dv(eX.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,dy)):dm(u,u.length,r.minDepth,e),dy,t,i)}addSelection(e,t,i,r){var n;let o=this.done.length?this.done[this.done.length-1].selectionsAfter:dy;return o.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(n=o[o.length-1],n.ranges.length==e.ranges.length&&0===n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length)?this:new dx(db(this.done,e),this.undone,t,i)}addMapping(e){return new dx(dw(this.done,e),dw(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=0==e?this.done:this.undone;if(0==r.length)return null;let n=r[r.length-1],o=n.selectionsAfter[0]||t.selection;if(i&&n.selectionsAfter.length){let i,s;return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:dn.of({side:e,rest:(i=r[r.length-1],(s=r.slice())[r.length-1]=i.setSelAfter(i.selectionsAfter.slice(0,i.selectionsAfter.length-1)),s),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}{if(!n.changes)return null;let i=1==r.length?dy:r.slice(0,r.length-1);return n.mapped&&(i=dw(i,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:dn.of({side:e,rest:i,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}}dx.empty=new dx(dy,dy);let dS=[{key:"Mod-z",run:dc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:dh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:dh,preventDefault:!0},{key:"Mod-u",run:dp,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:df,preventDefault:!0}];function dk(e,t){return ex.create(e.ranges.map(t),e.mainIndex)}function dR(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function dE({state:e,dispatch:t},i){let r=dk(e.selection,i);return!r.eq(e.selection,!0)&&(t(dR(e,r)),!0)}function dP(e,t){return ex.cursor(t?e.to:e.from)}function dM(e,t){return dE(e,i=>i.empty?e.moveByChar(i,t):dP(i,t))}function dD(e){return e.textDirectionAt(e.state.selection.main.head)==iu.LTR}let dT=e=>dM(e,!dD(e)),dO=e=>dM(e,dD(e));function d_(e,t){return dE(e,i=>i.empty?e.moveByGroup(i,t):dP(i,t))}function dA(e,t,i){let r,n,o=s_(e).resolveInner(t.head),s=i?g.closedBy:g.openedBy;for(let r=t.head;;){let t=i?o.childAfter(r):o.childBefore(r);if(!t)break;!function(e,t,i){if(t.type.prop(i))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}(e,t,s)?r=i?t.to:t.from:o=t}return n=o.type.prop(s)&&(r=i?aT(e,o.from,1):aT(e,o.to,-1))&&r.matched?i?r.end.to:r.end.from:i?o.to:o.from,ex.cursor(n,i?-1:1)}function dF(e,t){return dE(e,i=>{if(!i.empty)return dP(i,t);let r=e.moveVertically(i,t);return r.head!=i.head?r:e.moveToLineBoundary(i,t)})}"undefined"!=typeof Intl&&Intl.Segmenter;let dI=e=>dF(e,!1),dL=e=>dF(e,!0);function dN(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,i=0,r=0,n;if(t){for(let t of e.state.facet(nB.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(i=Math.max(null==n?void 0:n.top,i)),(null==n?void 0:n.bottom)&&(r=Math.max(null==n?void 0:n.bottom,r))}n=e.scrollDOM.clientHeight-i-r}else n=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,n-5)}}function dB(e,t){let i,r=dN(e),{state:n}=e,o=dk(n.selection,i=>i.empty?e.moveVertically(i,t,r.height):dP(i,t));if(o.eq(n.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(n.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(i=nB.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(dR(n,o),{effects:i}),!0}let dV=e=>dB(e,!1),dH=e=>dB(e,!0);function dz(e,t,i){let r=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,i);if(n.head==t.head&&n.head!=(i?r.to:r.from)&&(n=e.moveToLineBoundary(t,i,!1)),!i&&n.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head!=r.from+i&&(n=ex.cursor(r.from+i))}return n}function dj(e,t){let i=dk(e.state.selection,e=>{let i=t(e);return ex.range(e.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return!i.eq(e.state.selection)&&(e.dispatch(dR(e.state,i)),!0)}function dG(e,t){return dj(e,i=>e.moveByChar(i,t))}let dW=e=>dG(e,!dD(e)),dU=e=>dG(e,dD(e));function d$(e,t){return dj(e,i=>e.moveByGroup(i,t))}function dq(e,t){return dj(e,i=>e.moveVertically(i,t))}let dK=e=>dq(e,!1),dQ=e=>dq(e,!0);function dX(e,t){return dj(e,i=>e.moveVertically(i,t,dN(e).height))}let dY=e=>dX(e,!1),dZ=e=>dX(e,!0),dJ=({state:e,dispatch:t})=>(t(dR(e,{anchor:0})),!0),d0=({state:e,dispatch:t})=>(t(dR(e,{anchor:e.doc.length})),!0),d1=({state:e,dispatch:t})=>(t(dR(e,{anchor:e.selection.main.anchor,head:0})),!0),d2=({state:e,dispatch:t})=>(t(dR(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function d5(e,t){let{state:i}=e,r=i.selection,n=i.selection.ranges.slice();for(let r of i.selection.ranges){let o=i.doc.lineAt(r.head);if(t?o.to<e.state.doc.length:o.from>0)for(let i=r;;){let r=e.moveVertically(i,t);if(r.head<o.from||r.head>o.to){n.some(e=>e.head==r.head)||n.push(r);break}if(r.head==i.head)break;i=r}}return n.length!=r.ranges.length&&(e.dispatch(dR(i,ex.create(n,n.length-1))),!0)}function d3(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:r}=e,n=r.changeByRange(r=>{let{from:n,to:o}=r;if(n==o){let s=t(r);s<n?(i="delete.backward",s=d4(e,s,!1)):s>n&&(i="delete.forward",s=d4(e,s,!0)),n=Math.min(n,s),o=Math.max(o,s)}else n=d4(e,n,!1),o=d4(e,o,!0);return n==o?{range:r}:{changes:{from:n,to:o},range:ex.cursor(n,n<r.head?-1:1)}});return!n.changes.empty&&(e.dispatch(r.update(n,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?nB.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function d4(e,t,i){if(e instanceof nB)for(let r of e.state.facet(nB.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=i?r:e)});return t}let d8=(e,t,i)=>d3(e,r=>{let n=r.from,{state:o}=e,s=o.doc.lineAt(n),a,l;if(i&&!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(a=s.text.slice(0,n-s.from))){if("	"==a[a.length-1])return n-1;let e=th(a,o.tabSize)%sU(o)||sU(o);for(let t=0;t<e&&" "==a[a.length-1-t];t++)n--;l=n}else(l=ea(s.text,n-s.from,t,t)+s.from)==n&&s.number!=(t?o.doc.lines:1)?l+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(s.text.slice(l-s.from,n-s.from))&&(l=ea(s.text,l-s.from,!1,!1)+s.from);return l}),d6=e=>d8(e,!1,!0),d7=e=>d8(e,!0,!1),d9=(e,t)=>d3(e,i=>{let r=i.head,{state:n}=e,o=n.doc.lineAt(r),s=n.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==i.head&&o.number!=(t?n.doc.lines:1)&&(r+=t?1:-1);break}let a=ea(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),u=s(l);if(null!=e&&u!=e)break;(" "!=l||r!=i.head)&&(e=u),r=a}return r}),ce=e=>d9(e,!1);function ct(e){let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),i>=n.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:n.from,to:o.to,ranges:[r]});i=o.number+1}return t}function ci(e,t,i){if(e.readOnly)return!1;let r=[],n=[];for(let t of ct(e)){if(i?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(i?t.to+1:t.from-1),s=o.length+1;if(i)for(let i of(r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak}),t.ranges))n.push(ex.range(Math.min(e.doc.length,i.anchor+s),Math.min(e.doc.length,i.head+s)));else for(let i of(r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text}),t.ranges))n.push(ex.range(i.anchor-s,i.head-s))}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:ex.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0)}function cr(e,t,i){if(e.readOnly)return!1;let r=[];for(let t of ct(e))i?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let cn=cs(!1),co=cs(!0);function cs(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=t.changeByRange(i=>{let{from:r,to:n}=i,o=t.doc.lineAt(r),s=!e&&r==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i=s_(e).resolveInner(t),r=i.childBefore(t),n=i.childAfter(t),o;return r&&n&&r.to<=t&&n.from>=t&&(o=r.type.prop(g.closedBy))&&o.indexOf(n.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(n.from).from&&!/\S/.test(e.sliceDoc(r.to,n.from))?{from:r.to,to:n.from}:null}(t,r);e&&(r=n=(n<=o.to?o:t.doc.lineAt(n)).to);let a=new sK(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=sq(a,r);for(null==l&&(l=th(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));n<o.to&&/\s/.test(o.text[n-o.from]);)n++;s?{from:r,to:n}=s:r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let u=["",s$(t,l)];return s&&u.push(s$(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:n,insert:Z.of(u)},range:ex.cursor(r+1+u[1].length)}});return i(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function ca(e,t){let i=-1;return e.changeByRange(r=>{let n=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>i&&(r.empty||r.to>s.from)&&(t(s,n,r),i=s.number),o=s.to+1}let o=e.changes(n);return{changes:n,range:ex.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}let cl=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ca(e,(t,i)=>{i.push({from:t.from,insert:e.facet(sW)})}),{userEvent:"input.indent"})),!0),cu=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(ca(e,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let n=th(r,e.tabSize),o=0,s=s$(e,Math.max(0,n-sU(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),cd=[{key:"Ctrl-b",run:dT,shift:dW,preventDefault:!0},{key:"Ctrl-f",run:dO,shift:dU},{key:"Ctrl-p",run:dI,shift:dK},{key:"Ctrl-n",run:dL,shift:dQ},{key:"Ctrl-a",run:e=>dE(e,t=>ex.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>dj(e,t=>ex.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>dE(e,t=>ex.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>dj(e,t=>ex.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:d7},{key:"Ctrl-h",run:d6},{key:"Ctrl-k",run:e=>d3(e,t=>{let i=e.lineBlockAt(t.head).to;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:ce},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:Z.of(["",""])},range:ex.cursor(e.from)}));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,r=e.doc.lineAt(i),n=i==r.from?i-1:ea(r.text,i-r.from,!1)+r.from,o=i==r.to?i+1:ea(r.text,i-r.from,!0)+r.from;return{changes:{from:n,to:o,insert:e.doc.slice(i,o).append(e.doc.slice(n,i))},range:ex.cursor(o)}});return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:dH}],cc=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>dE(e,t=>dA(e.state,t,!dD(e))),shift:e=>dj(e,t=>dA(e.state,t,!dD(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>dE(e,t=>dA(e.state,t,dD(e))),shift:e=>dj(e,t=>dA(e.state,t,dD(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>ci(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>cr(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>ci(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>cr(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>d5(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>d5(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,r=null;return i.ranges.length>1?r=ex.create([i.main]):i.main.empty||(r=ex.create([ex.cursor(i.main.head)])),!!r&&(t(dR(e,r)),!0)}},{key:"Mod-Enter",run:co},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=ct(e).map(({from:t,to:i})=>ex.range(t,Math.min(i+1,e.doc.length)));return t(e.update({selection:ex.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=dk(e.selection,t=>{let i=s_(e),r=i.resolveStack(t.from,1);if(t.empty){let e=i.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:i}=e;if((i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&e.next)return ex.range(i.to,i.from)}return t});return!i.eq(e.selection)&&(t(dR(e,i)),!0)},preventDefault:!0},{key:"Mod-[",run:cu},{key:"Mod-]",run:cl},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),r=new sK(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),n=ca(e,(t,n,o)=>{let s=sq(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=s$(e,s);(a!=l||o.from<t.from+a.length)&&(i[t.from]=s,n.push({from:t.from,to:t.from+a.length,insert:l}))});return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(ct(t).map(({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i}))),r=dk(t.selection,t=>{let i;if(e.lineWrapping){let r=e.lineBlockAt(t.head),n=e.coordsAtPos(t.head,t.assoc||1);n&&(i=r.bottom+e.documentTop-n.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,i)}).map(i);return e.dispatch({changes:i,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>{let i,r;return i=!1,r=dk(e.selection,t=>{let r=aT(e,t.head,-1)||aT(e,t.head,1)||t.head>0&&aT(e,t.head-1,1)||t.head<e.doc.length&&aT(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;let n=r.start.from==t.head?r.end.to:r.end.from;return ex.cursor(n)}),!!i&&(t(dR(e,r)),!0)}},{key:"Mod-/",run:e=>{let{state:t}=e,i=t.doc.lineAt(t.selection.main.from),r=di(e.state,i.from);return r.line?u9(e):!!r.block&&dt(e)}},{key:"Alt-A",run:de},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:dT,shift:dW,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>d_(e,!dD(e)),shift:e=>d$(e,!dD(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>dE(e,t=>dz(e,t,!dD(e))),shift:e=>dj(e,t=>dz(e,t,!dD(e))),preventDefault:!0},{key:"ArrowRight",run:dO,shift:dU,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>d_(e,dD(e)),shift:e=>d$(e,dD(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>dE(e,t=>dz(e,t,dD(e))),shift:e=>dj(e,t=>dz(e,t,dD(e))),preventDefault:!0},{key:"ArrowUp",run:dI,shift:dK,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dJ,shift:d1},{mac:"Ctrl-ArrowUp",run:dV,shift:dY},{key:"ArrowDown",run:dL,shift:dQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:d0,shift:d2},{mac:"Ctrl-ArrowDown",run:dH,shift:dZ},{key:"PageUp",run:dV,shift:dY},{key:"PageDown",run:dH,shift:dZ},{key:"Home",run:e=>dE(e,t=>dz(e,t,!1)),shift:e=>dj(e,t=>dz(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:dJ,shift:d1},{key:"End",run:e=>dE(e,t=>dz(e,t,!0)),shift:e=>dj(e,t=>dz(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:d0,shift:d2},{key:"Enter",run:cn,shift:cn},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:d6,shift:d6,preventDefault:!0},{key:"Delete",run:d7,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ce,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>d9(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>d3(e,t=>{let i=e.moveToLineBoundary(t,!1).head;return t.head>i?i:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>d3(e,t=>{let i=e.moveToLineBoundary(t,!0).head;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(cd.map(e=>({mac:e.key,run:e.run,shift:e.shift})))),ch={key:"Tab",run:cl,shift:cu},cp="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class cf{constructor(e,t,i=0,r=e.length,n,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=n?e=>n(cp(e)):cp,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return el(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=eu(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ed(e);let r=this.normalize(t);if(r.length)for(let e=0,n=i;;e++){let o=r.charCodeAt(e),s=this.match(o,n,this.bufferPos+this.bufferStart);if(e==r.length-1){if(s)return this.value=s,this;break}n==i&&e<t.length&&t.charCodeAt(e)==o&&n++}}}match(e,t,i){let r=null;for(let t=0;t<this.matches.length;t+=2){let n=this.matches[t],o=!1;this.query.charCodeAt(n)==e&&(n==this.query.length-1?r={from:this.matches[t+1],to:i}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"undefined"!=typeof Symbol&&(cf.prototype[Symbol.iterator]=function(){return this});let cg={from:-1,to:-1,match:/.*/.exec("")},cm="gm"+(null==/x/.unicode?"":"u");class cv{constructor(e,t,i,r=0,n=e.length){if(this.text=e,this.to=n,this.curLine="",this.done=!1,this.value=cg,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new cw(e,t,i,r,n);this.re=new RegExp(t,cm+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=cC(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=cC(this.text,r+ +(i==r)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}let cy=new WeakMap;class cb{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=cy.get(e);if(!r||r.from>=i||r.to<=t){let r=new cb(t,e.sliceString(t,i));return cy.set(e,r),r}if(r.from==t&&r.to==i)return r;let{text:n,from:o}=r;return o>t&&(n=e.sliceString(t,o)+n,o=t),r.to<i&&(n+=e.sliceString(r.to,i)),cy.set(e,new cb(o,n)),new cb(t,n.slice(t-o,i-o))}}class cw{constructor(e,t,i,r,n){this.text=e,this.to=n,this.done=!1,this.value=cg,this.matchPos=cC(e,r),this.re=new RegExp(t,cm+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.flat=cb.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,i=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,i,t)))return this.value={from:e,to:i,match:t},this.matchPos=cC(this.text,i+ +(e==i)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=cb.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function cC(e,t){if(t>=e.length)return t;let i=e.lineAt(t),r;for(;t<i.to&&(r=i.text.charCodeAt(t-i.from))>=56320&&r<57344;)t++;return t}function cx(e){let t=tE("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function i(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!i)return;let{state:r}=e,n=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=i,u=a?+a.slice(1):0,d=s?+s:n.number;if(s&&l){let e=d/100;o&&(e=e*("-"==o?-1:1)+n.number/r.doc.lines),d=Math.round(r.doc.lines*e)}else s&&o&&(d=d*("-"==o?-1:1)+n.number);let c=r.doc.line(Math.max(1,Math.min(r.doc.lines,d))),h=ex.cursor(c.from+Math.max(0,Math.min(u,c.length)));e.dispatch({effects:[cS.of(!1),nB.scrollIntoView(h.from,{y:"center"})],selection:h}),e.focus()}return{dom:tE("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:cS.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),i())},onsubmit:e=>{e.preventDefault(),i()}},tE("label",e.state.phrase("Go to line"),": ",t)," ",tE("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),tE("button",{name:"close",onclick:()=>{e.dispatch({effects:cS.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},[""]))}}"undefined"!=typeof Symbol&&(cv.prototype[Symbol.iterator]=cw.prototype[Symbol.iterator]=function(){return this});let cS=eX.define(),ck=eO.define({create:()=>!0,update(e,t){for(let i of t.effects)i.is(cS)&&(e=i.value);return e},provide:e=>oH.from(e,e=>e?cx:null)}),cR=nB.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),cE={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},cP=eR.define({combine:e=>e4(e,cE,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}),cM=tU.mark({class:"cm-selectionMatch"}),cD=tU.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function cT(e,t,i,r){return(0==i||e(t.sliceDoc(i-1,i))!=e2.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=e2.Word)}let cO=iG.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(cP),{state:i}=e,r=i.selection;if(r.ranges.length>1)return tU.none;let n=r.main,o,s=null;if(n.empty){if(!t.highlightWordAroundCursor)return tU.none;let e=i.wordAt(n.head);if(!e)return tU.none;s=i.charCategorizer(n.head),o=i.sliceDoc(e.from,e.to)}else{let e=n.to-n.from;if(e<t.minSelectionLength||e>200)return tU.none;if(t.wholeWords){var a,l,u;if(o=i.sliceDoc(n.from,n.to),!(cT(s=i.charCategorizer(n.head),i,n.from,n.to)&&(a=s,l=n.from,u=n.to,a(i.sliceDoc(l,l+1))==e2.Word&&a(i.sliceDoc(u-1,u))==e2.Word)))return tU.none}else if(!(o=i.sliceDoc(n.from,n.to)))return tU.none}let d=[];for(let r of e.visibleRanges){let e=new cf(i.doc,o,r.from,r.to);for(;!e.next().done;){let{from:r,to:o}=e.value;if((!s||cT(s,i,r,o))&&(n.empty&&r<=n.from&&o>=n.to?d.push(cD.range(r,o)):(r>=n.to||o<=n.from)&&d.push(cM.range(r,o)),d.length>t.maxMatches))return tU.none}}return tU.set(d)}},{decorations:e=>e.decorations}),c_=nB.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),cA=eR.define({combine:e=>e4(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new c7(e),scrollToMatch:e=>nB.scrollIntoView(e)})});class cF{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,cm),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new cz(this):new cN(this)}getCursor(e,t=0,i){let r=e.doc?e:e3.create({doc:e});return null==i&&(i=r.doc.length),this.regexp?cB(this,r,t,i):cL(this,r,t,i)}}class cI{constructor(e){this.spec=e}}function cL(e,t,i,r){var n,o;return new cf(t.doc,e.unquoted,i,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(n=t.doc,o=t.charCategorizer(t.selection.main.head),(e,t,i,r)=>((r>e||r+i.length<t)&&(r=Math.max(0,e-2),i=n.sliceString(r,Math.min(n.length,t+2))),(o(cV(i,e-r))!=e2.Word||o(cH(i,e-r))!=e2.Word)&&(o(cH(i,t-r))!=e2.Word||o(cV(i,t-r))!=e2.Word))):void 0)}class cN extends cI{constructor(e){super(e)}nextMatch(e,t,i){let r=cL(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let i=Math.min(e.doc.length,t+this.spec.unquoted.length);r=cL(this.spec,e,0,i).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let i=Math.max(t,r-1e4-this.spec.unquoted.length),n=cL(this.spec,e,i,r),o=null;for(;!n.nextOverlapping().done;)o=n.value;if(o)return o;if(i==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=t||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=cL(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let n=cL(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}function cB(e,t,i,r){var n;return new cv(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(n=t.charCategorizer(t.selection.main.head),(e,t,i)=>!i[0].length||(n(cV(i.input,i.index))!=e2.Word||n(cH(i.input,i.index))!=e2.Word)&&(n(cH(i.input,i.index+i[0].length))!=e2.Word||n(cV(i.input,i.index+i[0].length))!=e2.Word)):void 0},i,r)}function cV(e,t){return e.slice(ea(e,t,!1),t)}function cH(e,t){return e.slice(t,ea(e,t))}class cz extends cI{nextMatch(e,t,i){let r=cB(this.spec,e,i,e.doc.length).next();return r.done&&(r=cB(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let n=Math.max(t,i-1e4*r),o=cB(this.spec,e,n,i),s=null;for(;!o.next().done;)s=o.value;if(s&&(n==t||s.from>n+10))return s;if(n==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if("&"==i)return e.match[0];if("$"==i)return"$";for(let t=i.length;t>0;t--){let r=+i.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+i.slice(t)}return t})}matchAll(e,t){let i=cB(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let n=cB(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}let cj=eX.define(),cG=eX.define(),cW=eO.define({create:e=>new cU(c2(e).create(),null),update(e,t){for(let i of t.effects)i.is(cj)?e=new cU(i.value.create(),e.panel):i.is(cG)&&(e=new cU(e.query,i.value?c1:null));return e},provide:e=>oH.from(e,e=>e.panel)});class cU{constructor(e,t){this.query=e,this.panel=t}}let c$=tU.mark({class:"cm-searchMatch"}),cq=tU.mark({class:"cm-searchMatch cm-searchMatch-selected"}),cK=iG.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(cW))}update(e){let t=e.state.field(cW);(t!=e.startState.field(cW)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return tU.none;let{view:i}=this,r=new tt;for(let t=0,n=i.visibleRanges,o=n.length;t<o;t++){let{from:s,to:a}=n[t];for(;t<o-1&&a>n[t+1].from-500;)a=n[++t].to;e.highlight(i.state,s,a,(e,t)=>{let n=i.state.selection.ranges.some(i=>i.from==e&&i.to==t);r.add(e,t,n?cq:c$)})}return r.finish()}},{decorations:e=>e.decorations});function cQ(e){return t=>{let i=t.state.field(cW,!1);return i&&i.query.spec.valid?e(t,i):c4(t)}}let cX=cQ((e,{query:t})=>{let{to:i}=e.state.selection.main,r=t.nextMatch(e.state,i,i);if(!r)return!1;let n=ex.single(r.from,r.to),o=e.state.facet(cA);return e.dispatch({selection:n,effects:[ht(e,r),o.scrollToMatch(n.main,e)],userEvent:"select.search"}),c3(e),!0}),cY=cQ((e,{query:t})=>{let{state:i}=e,{from:r}=i.selection.main,n=t.prevMatch(i,r,r);if(!n)return!1;let o=ex.single(n.from,n.to),s=e.state.facet(cA);return e.dispatch({selection:o,effects:[ht(e,n),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),c3(e),!0}),cZ=cQ((e,{query:t})=>{let i=t.matchAll(e.state,1e3);return!!i&&!!i.length&&(e.dispatch({selection:ex.create(i.map(e=>ex.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),cJ=cQ((e,{query:t})=>{let{state:i}=e,{from:r,to:n}=i.selection.main;if(i.readOnly)return!1;let o=t.nextMatch(i,r,r);if(!o)return!1;let s=o,a=[],l,u,d=[];s.from==r&&s.to==n&&(u=i.toText(t.getReplacement(s)),a.push({from:s.from,to:s.to,insert:u}),s=t.nextMatch(i,s.from,s.to),d.push(nB.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+".")));let c=e.state.changes(a);return s&&(l=ex.single(s.from,s.to).map(c),d.push(ht(e,s)),d.push(i.facet(cA).scrollToMatch(l.main,e))),e.dispatch({changes:c,selection:l,effects:d,userEvent:"input.replace"}),!0}),c0=cQ((e,{query:t})=>{if(e.state.readOnly)return!1;let i=t.matchAll(e.state,1e9).map(e=>{let{from:i,to:r}=e;return{from:i,to:r,insert:t.getReplacement(e)}});if(!i.length)return!1;let r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:nB.announce.of(r),userEvent:"input.replace.all"}),!0});function c1(e){return e.state.facet(cA).createPanel(e)}function c2(e,t){var i,r,n,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let u=e.facet(cA);return new cF({search:(null!=(i=null==t?void 0:t.literal)?i:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!=(r=null==t?void 0:t.caseSensitive)?r:u.caseSensitive,literal:null!=(n=null==t?void 0:t.literal)?n:u.literal,regexp:null!=(o=null==t?void 0:t.regexp)?o:u.regexp,wholeWord:null!=(s=null==t?void 0:t.wholeWord)?s:u.wholeWord})}function c5(e){let t=oL(e,c1);return t&&t.dom.querySelector("[main-field]")}function c3(e){let t=c5(e);t&&t==e.root.activeElement&&t.select()}let c4=e=>{let t=e.state.field(cW,!1);if(t&&t.panel){let i=c5(e);if(i&&i!=e.root.activeElement){let r=c2(e.state,t.query.spec);r.valid&&e.dispatch({effects:cj.of(r)}),i.focus(),i.select()}}else e.dispatch({effects:[cG.of(!0),t?cj.of(c2(e.state,t.query.spec)):eX.appendConfig.of(hr)]});return!0},c8=e=>{let t=e.state.field(cW,!1);if(!t||!t.panel)return!1;let i=oL(e,c1);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:cG.of(!1)}),!0},c6=[{key:"Mod-f",run:c4,scope:"editor search-panel"},{key:"F3",run:cX,shift:cY,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:cX,shift:cY,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:c8,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:n}=i.main,o=[],s=0;for(let t=new cf(e.doc,e.sliceDoc(r,n));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(ex.range(t.value.from,t.value.to))}return t(e.update({selection:ex.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=oL(e,cx);if(!t){let i=[cS.of(!0)];null==e.state.field(ck,!1)&&i.push(eX.appendConfig.of([ck,cR])),e.dispatch({effects:i}),t=oL(e,cx)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:i}=e.selection;if(i.some(e=>e.from===e.to))return(({state:e,dispatch:t})=>{let{selection:i}=e,r=ex.create(i.ranges.map(t=>e.wordAt(t.head)||ex.cursor(t.head)),i.mainIndex);return!r.eq(i)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let n=function(e,t){let{main:i,ranges:r}=e.selection,n=e.wordAt(i.head),o=n&&n.from==i.from&&n.to==i.to;for(let i=!1,n=new cf(e.doc,t,r[r.length-1].to);;)if(n.next(),n.done){if(i)return null;n=new cf(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),i=!0}else{if(i&&r.some(e=>e.from==n.value.from))continue;if(o){let t=e.wordAt(n.value.from);if(!t||t.from!=n.value.from||t.to!=n.value.to)continue}return n.value}}(e,r);return!!n&&(t(e.update({selection:e.selection.addRange(ex.range(n.from,n.to),!1),effects:nB.scrollIntoView(n.to)})),!0)},preventDefault:!0}];class c7{constructor(e){this.view=e;let t=this.query=e.state.field(cW).query.spec;function i(e,t,i){return tE("button",{class:"cm-button",name:e,onclick:t,type:"button"},i)}this.commit=this.commit.bind(this),this.searchField=tE("input",{value:t.search,placeholder:c9(e,"Find"),"aria-label":c9(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=tE("input",{value:t.replace,placeholder:c9(e,"Replace"),"aria-label":c9(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=tE("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=tE("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=tE("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=tE("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,i("next",()=>cX(e),[c9(e,"next")]),i("prev",()=>cY(e),[c9(e,"previous")]),i("select",()=>cZ(e),[c9(e,"all")]),tE("label",null,[this.caseField,c9(e,"match case")]),tE("label",null,[this.reField,c9(e,"regexp")]),tE("label",null,[this.wordField,c9(e,"by word")]),...e.state.readOnly?[]:[tE("br"),this.replaceField,i("replace",()=>cJ(e),[c9(e,"replace")]),i("replaceAll",()=>c0(e),[c9(e,"replace all")])],tE("button",{name:"close",onclick:()=>c8(e),"aria-label":c9(e,"close"),type:"button"},[""])])}commit(){let e=new cF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:cj.of(e)}))}keydown(e){var t;(t=this.view,nY(nK(t.state),e,t,"search-panel"))?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?cY:cX)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),cJ(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(cj)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(cA).top}}function c9(e,t){return e.state.phrase(t)}let he=/[\s\.,:;?!]/;function ht(e,{from:t,to:i}){let r=e.state.doc.lineAt(t),n=e.state.doc.lineAt(i).to,o=Math.max(r.from,t-30),s=Math.min(n,i+30),a=e.state.sliceDoc(o,s);if(o!=r.from){for(let e=0;e<30;e++)if(!he.test(a[e+1])&&he.test(a[e])){a=a.slice(e);break}}if(s!=n){for(let e=a.length-1;e>a.length-30;e--)if(!he.test(a[e-1])&&he.test(a[e])){a=a.slice(0,e);break}}return nB.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}let hi=nB.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),hr=[cW,eA.low(cK),hi];class hn{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ho{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(hm).markerFilter;r&&(e=r(e,i));let n=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),o=new tt,s=[],a=0,l=i.doc.iter(),u=0,d=i.doc.length;for(let e=0;;){let t,i,r=e==n.length?null:n[e];if(!r&&!s.length)break;if(s.length)t=a,i=s.reduce((e,t)=>Math.min(e,t.to),r&&r.from>t?r.from:1e8);else{if((t=r.from)>d)break;i=r.to,s.push(r),e++}for(;e<n.length;){let r=n[e];if(r.from==t&&(r.to>r.from||r.to==t))s.push(r),e++,i=Math.min(r.to,i);else{i=Math.min(r.from,i);break}}i=Math.min(i,d);let c=!1;if(s.some(e=>e.from==t&&(e.to==i||i==d))&&!(c=t==i)&&i-t<10){let e=t-(u+l.value.length);e>0&&(l.next(e),u=t);for(let e=t;;){if(e>=i){c=!0;break}if(!l.lineBreak&&u+l.value.length>e)break;e=u+l.value.length,u+=l.value.length,l.next()}}let h=hR(s);if(c)o.add(t,t,tU.widget({widget:new hw(h),diagnostics:s.slice()}));else{let e=s.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");o.add(t,i,tU.mark({class:"cm-lintRange cm-lintRange-"+h+e,diagnostics:s.slice(),inclusiveEnd:s.some(e=>e.to>i)}))}if((a=i)==d)break;for(let e=0;e<s.length;e++)s[e].to<=a&&s.splice(e--,1)}let c=o.finish();return new ho(c,t,hs(c))}}function hs(e,t=null,i=0){let r=null;return e.between(i,1e9,(e,i,{spec:n})=>{if(!(t&&0>n.diagnostics.indexOf(t)))if(r){if(0>n.diagnostics.indexOf(r.diagnostic))return!1;r=new hn(r.from,i,r.diagnostic)}else r=new hn(e,i,t||n.diagnostics[0])}),r}function ha(e,t){let i=t.pos,r=t.end||i,n=e.state.facet(hm).hideOn(e,i,r);if(null!=n)return n;let o=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(e=>e.is(hl))||e.changes.touchesRange(o.from,Math.max(o.to,r)))}let hl=eX.define(),hu=eX.define(),hd=eX.define(),hc=eO.define({create:()=>new ho(tU.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let i=e.diagnostics.map(t.changes),r=null,n=e.panel;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);r=hs(i,e.selected.diagnostic,n)||hs(i,null,n)}!i.size&&n&&t.state.facet(hm).autoPanel&&(n=null),e=new ho(i,n,r)}for(let i of t.effects)if(i.is(hl)){let r=t.state.facet(hm).autoPanel?i.value.length?hx.open:null:e.panel;e=ho.init(i.value,r,t.state)}else i.is(hu)?e=new ho(e.diagnostics,i.value?hx.open:null,e.selected):i.is(hd)&&(e=new ho(e.diagnostics,e.panel,i.value));return e},provide:e=>[oH.from(e,e=>e.panel),nB.decorations.from(e,e=>e.diagnostics)]}),hh=tU.mark({class:"cm-lintRange cm-lintRange-active"});function hp(e,t){return tE("ul",{class:"cm-tooltip-lint"},t.map(t=>hb(e,t,!1)))}let hf=e=>{let t=e.state.field(hc,!1);return!!t&&!!t.panel&&(e.dispatch({effects:hu.of(!1)}),!0)},hg=[{key:"Mod-Shift-m",run:e=>{var t,i;let r=e.state.field(hc,!1);r&&r.panel||e.dispatch({effects:(t=e.state,i=[hu.of(!0)],t.field(hc,!1)?i:i.concat(eX.appendConfig.of(hM)))});let n=oL(e,hx.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(hc,!1);if(!t)return!1;let i=e.state.selection.main,r=t.diagnostics.iter(i.to+1);return(!!r.value||!!(r=t.diagnostics.iter(0)).value&&(r.from!=i.from||r.to!=i.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],hm=eR.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...e4(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:hv,tooltipFilter:hv,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,n)=>e(i,r,n)||t(i,r,n):e:t,autoPanel:(e,t)=>e||t})})});function hv(e,t){return e?t?(i,r)=>t(e(i,r),r):e:t}function hy(e){let t=[];if(e)n:for(let{name:i}of e){for(let e=0;e<i.length;e++){let r=i[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue n}}t.push("")}return t}function hb(e,t,i){var r;let n=i?hy(t.actions):[];return tE("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},tE("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null==(r=t.actions)?void 0:r.map((i,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let n=hs(e.state.field(hc).diagnostics,t);n&&i.apply(e,n.from,n.to)},{name:a}=i,l=n[r]?a.indexOf(n[r]):-1,u=l<0?a:[a.slice(0,l),tE("u",a.slice(l,l+1)),a.slice(l+1)];return tE("button",{type:"button",class:"cm-diagnosticAction"+(i.markClass?" "+i.markClass:""),onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${n[r]})"`}.`},u)}),t.source&&tE("div",{class:"cm-diagnosticSource"},t.source))}class hw extends tG{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return tE("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class hC{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(0xffffffff*Math.random()).toString(16),this.dom=hb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class hx{constructor(e){this.view=e,this.items=[];let t=t=>{if(27==t.keyCode)hf(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65)||!(t.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:i}=this.items[this.selectedIndex],r=hy(i.actions);for(let n=0;n<r.length;n++)if(r[n].toUpperCase().charCodeAt(0)==t.keyCode){let t=hs(this.view.state.field(hc).diagnostics,i);t&&i.actions[n].apply(e,t.from,t.to)}}t.preventDefault()},i=e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)};this.list=tE("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=tE("div",{class:"cm-panel-lint"},this.list,tE("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hf(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(hc).selected;if(!e)return -1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return -1}update(){let{diagnostics:e,selected:t}=this.view.state.field(hc),i=0,r=!1,n=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,s,{spec:a})=>{for(let e of a.diagnostics){if(o.has(e))continue;o.add(e);let s=-1,a;for(let t=i;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(a=new hC(this.view,e),this.items.splice(i,0,a),r=!0):(a=this.items[s],s>i&&(this.items.splice(i,s-i),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),n=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new hC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let i=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/i:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/i)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=hs(this.view.state.field(hc).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:hd.of(t)})}static open(e){return new hx(e)}}function hS(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}let hk=nB.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:hS("#d11")},".cm-lintRange-warning":{backgroundImage:hS("orange")},".cm-lintRange-info":{backgroundImage:hS("#999")},".cm-lintRange-hint":{backgroundImage:hS("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function hR(e){let t="hint",i=1;for(let n of e){var r;let e="error"==(r=n.severity)?4:"warning"==r?3:"info"==r?2:1;e>i&&(i=e,t=n.severity)}return t}let hE=eX.define(),hP=eO.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=ha(t,e)?null:{...e,pos:t.changes.mapPos(e.pos)}),t.effects.reduce((e,t)=>t.is(hE)?t.value:e,e)),provide:e=>oM.from(e)}),hM=[hc,nB.decorations.compute([hc],e=>{let{selected:t,panel:i}=e.field(hc);return t&&i&&t.from!=t.to?tU.set([hh.range(t.from,t.to)]):tU.none}),function(e,t={}){let i=eX.define(),r=eO.define({create:()=>[],update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(r,e))),r.docChanged)){let t=[];for(let i of e){let e=r.changes.mapPos(i.pos,-1,eh.TrackDel);if(null!=e){let n=Object.assign(Object.create(null),i);n.pos=e,null!=n.end&&(n.end=r.changes.mapPos(n.end)),t.push(n)}}e=t}for(let t of r.effects)t.is(i)&&(e=t.value),t.is(oF)&&(e=[]);return e},provide:e=>oD.from(e)});return{active:r,extension:[r,iG.define(n=>new o_(n,e,r,i,t.hoverTime||300)),oO]}}(function(e,t,i){let{diagnostics:r}=e.state.field(hc),n,o=-1,s=-1;r.between(t-(i<0),t+ +(i>0),(e,r,{spec:a})=>{if(t>=e&&t<=r&&(e==r||(t>e||i>0)&&(t<r||i<0)))return n=a.diagnostics,o=e,s=r,!1});let a=e.state.facet(hm).tooltipFilter;return(n&&a&&(n=a(n,e.state)),n)?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:hp(e,n)})}:null},{hideOn:ha}),hk],hD=eR.define({combine:e=>e4(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});var hT=function(e){let t;void 0===e&&(e={});var{crosshairCursor:i=!1}=e,r=[];!1!==e.closeBracketsKeymap&&(r=r.concat(l1)),!1!==e.defaultKeymap&&(r=r.concat(cc)),!1!==e.searchKeymap&&(r=r.concat(c6)),!1!==e.historyKeymap&&(r=r.concat(dS)),!1!==e.foldKeymap&&(r=r.concat(ar)),!1!==e.completionKeymap&&(r=r.concat(l8)),!1!==e.lintKeymap&&(r=r.concat(hg));var n=[];return!1!==e.lineNumbers&&n.push(o6()),!1!==e.highlightActiveLineGutter&&n.push(se),!1!==e.highlightSpecialChars&&n.push(function(e={}){return[ou.of(e),od||(od=iG.fromClass(class{constructor(e){this.view=e,this.decorations=tU.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(ou)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new on({regexp:e.specialChars,decoration:(t,i,r)=>{let{doc:n}=i.state,o=el(t[0],0);if(9==o){let e=n.lineAt(r),t=i.state.tabSize,o=th(e.text,t,r-e.from);return tU.replace({widget:new oh((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=tU.replace({widget:new oc(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(ou);e.startState.facet(ou)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&n.push(function(e={}){return[du,dl.of(e),nB.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?dc:"historyRedo"==e.inputType?dh:null;return!!i&&(e.preventDefault(),i(t))}})]}()),!1!==e.foldGutter&&n.push(function(e={}){let t={...ad,...e},i=new ac(t,!0),r=new ac(t,!1),n=iG.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(sz)!=e.state.facet(sz)||e.startState.field(s7,!1)!=e.state.field(s7,!1)||s_(e.startState)!=s_(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new tt;for(let n of e.viewportLineBlocks){let o=ae(e.state,n.from,n.to)?r:s5(e.state,n.from,n.to)?i:null;o&&t.add(n.from,n.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[n,o$({class:"cm-foldGutter",markers(e){var t;return(null==(t=e.plugin(n))?void 0:t.markers)||te.empty},initialSpacer:()=>new ac(t,!1),domEventHandlers:{...o,click:(e,t,i)=>{if(o.click&&o.click(e,t,i))return!0;let r=ae(e.state,t.from,t.to);if(r)return e.dispatch({effects:s8.of(r)}),!0;let n=s5(e.state,t.from,t.to);return!!n&&(e.dispatch({effects:s4.of(n)}),!0)}}}),as()]}()),!1!==e.drawSelection&&n.push(function(e={}){return[n3.of(e),n8,n7,n9,iF.of(!0)]}()),!1!==e.dropCursor&&n.push([ot,oi]),!1!==e.allowMultipleSelections&&n.push(e3.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&n.push(e3.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:r}=e.newSelection.main,n=i.lineAt(r);if(r>n.from+200)return e;let o=i.sliceString(n.from,r);if(!t.some(e=>e.test(o)))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let i=sq(s,t.from);if(null==i)continue;let r=/^\s*/.exec(t.text)[0],n=s$(s,i);r!=n&&l.push({from:t.from,to:t.from+r.length,insert:n})}return l.length?[e,{changes:l,sequential:!0}]:e})),!1!==e.syntaxHighlighting&&n.push(av(ab,{fallback:!0})),!1!==e.bracketMatching&&n.push(function(e={}){return[ax.of(e),aE]}()),!1!==e.closeBrackets&&n.push([l0,lQ]),!1!==e.autocompletion&&n.push(function(e={}){return[lL,lM,lc.of(e),lF,l6,lN]}()),!1!==e.rectangularSelection&&n.push((t=e=>e.altKey&&0==e.button,nB.mouseSelectionStyle.of((e,i)=>{let r,n;return t(i)?(r=om(e,i),n=e.state.selection,{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(r.line).from),i=e.state.doc.lineAt(t);r={line:i.number,col:r.col,off:Math.min(r.off,i.length)},n=n.map(e.changes)}},get(t,i,o){let s=om(e,t),a=function(e,t,i){let r=Math.min(t.line,i.line),n=Math.max(t.line,i.line),o=[];if(t.off>2e3||i.off>2e3||t.col<0||i.col<0){let s=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let t=r;t<=n;t++){let i=e.doc.line(t);i.length<=a&&o.push(ex.range(i.from+s,i.to+a))}}else{let s=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let t=r;t<=n;t++){let i=e.doc.line(t),r=tp(i.text,s,e.tabSize,!0);if(r<0)o.push(ex.cursor(i.to));else{let t=tp(i.text,a,e.tabSize);o.push(ex.range(i.from+r,i.from+t))}}}return o}(e.state,r,s);return a.length?o?ex.create(a.concat(n.ranges)):ex.create(a):n}}):null}))),!1!==i&&n.push(function(e={}){let[t,i]=ov[e.key||"Alt"],r=iG.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||i(e))},keyup(e){e.keyCode!=t&&i(e)||this.set(!1)},mousemove(e){this.set(i(e))}}});return[r,nB.contentAttributes.of(e=>{var t;return(null==(t=e.plugin(r))?void 0:t.isDown)?oy:null})]}()),!1!==e.highlightActiveLine&&n.push(of),!1!==e.highlightSelectionMatches&&n.push([c_,cO]),e.tabSize&&"number"==typeof e.tabSize&&n.push(sW.of(" ".repeat(e.tabSize))),n.concat([n$.of(r.flat())]).filter(Boolean)};let hO="#e06c75",h_="#abb2bf",hA="#7d8799",hF="#d19a66",hI="#2c313a",hL="#282c34",hN="#353a42",hB="#528bff",hV=[nB.theme({"&":{color:h_,backgroundColor:hL},".cm-content":{caretColor:hB},".cm-cursor, .cm-dropCursor":{borderLeftColor:hB},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:h_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:hL,color:hA,border:"none"},".cm-activeLineGutter":{backgroundColor:hI},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:hN},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:hN,borderBottomColor:hN},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hI,color:h_}}},{dark:!0}),av(ap.define([{tag:sE.keyword,color:"#c678dd"},{tag:[sE.name,sE.deleted,sE.character,sE.propertyName,sE.macroName],color:hO},{tag:[sE.function(sE.variableName),sE.labelName],color:"#61afef"},{tag:[sE.color,sE.constant(sE.name),sE.standard(sE.name)],color:hF},{tag:[sE.definition(sE.name),sE.separator],color:h_},{tag:[sE.typeName,sE.className,sE.number,sE.changed,sE.annotation,sE.modifier,sE.self,sE.namespace],color:"#e5c07b"},{tag:[sE.operator,sE.operatorKeyword,sE.url,sE.escape,sE.regexp,sE.link,sE.special(sE.string)],color:"#56b6c2"},{tag:[sE.meta,sE.comment],color:hA},{tag:sE.strong,fontWeight:"bold"},{tag:sE.emphasis,fontStyle:"italic"},{tag:sE.strikethrough,textDecoration:"line-through"},{tag:sE.link,color:hA,textDecoration:"underline"},{tag:sE.heading,fontWeight:"bold",color:hO},{tag:[sE.atom,sE.bool,sE.special(sE.variableName)],color:hF},{tag:[sE.processingInstruction,sE.string,sE.inserted],color:"#98c379"},{tag:sE.invalid,color:"#ffffff"}]))];var hH=nB.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),hz=function(e){let t;void 0===e&&(e={});var{indentWithTab:i=!0,editable:r=!0,readOnly:n=!1,theme:o="light",placeholder:s="",basicSetup:a=!0}=e,l=[];switch(i&&l.unshift(n$.of([ch])),a&&("boolean"==typeof a?l.unshift(hT()):l.unshift(hT(a))),s&&l.unshift((t=iG.fromClass(class{constructor(e){this.view=e,this.placeholder=s?tU.set([tU.widget({widget:new og(s),side:1}).range(0)]):tU.none}get decorations(){return this.view.state.doc.length?tU.none:this.placeholder}},{decorations:e=>e.decorations}),"string"==typeof s?[t,nB.contentAttributes.of({"aria-placeholder":s})]:t)),o){case"light":l.push(hH);break;case"dark":l.push(hV);break;case"none":break;default:l.push(o)}return!1===r&&l.push(nB.editable.of(!1)),n&&l.push(e3.readOnly.of(!0)),[...l]};class hj{constructor(e,t){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=t,this.timeoutMS=t,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(e=>{try{e()}catch(e){console.error("TimeoutLatch callback error:",e)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class hG{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),0===this.latches.size&&this.stop()}start(){null===this.interval&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)}}var hW=null,hU=eq.define(),h$=[],hq=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],hK=(0,u6.forwardRef)((e,t)=>{var{className:i,value:r="",selection:n,extensions:o=[],onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:u,autoFocus:d,theme:c="light",height:p,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:b,placeholder:w,indentWithTab:C,editable:x,readOnly:S,root:k,initialState:R}=e,E=(0,u8.default)(e,hq),P=(0,u6.useRef)(null),{state:M,view:D,container:T,setContainer:O}=function(e){var{value:t,selection:i,onChange:r,onStatistics:n,onCreateEditor:o,onUpdate:s,extensions:a=h$,autoFocus:l,theme:u="light",height:d=null,minHeight:c=null,maxHeight:h=null,width:p=null,minWidth:f=null,maxWidth:g=null,placeholder:m="",editable:v=!0,readOnly:y=!1,indentWithTab:b=!0,basicSetup:w=!0,root:C,initialState:x}=e,[S,k]=(0,u6.useState)(),[R,E]=(0,u6.useState)(),[P,M]=(0,u6.useState)(),D=(0,u6.useState)(()=>({current:null}))[0],T=(0,u6.useState)(()=>({current:null}))[0],O=nB.theme({"&":{height:d,minHeight:c,maxHeight:h,width:p,minWidth:f,maxWidth:g},"& .cm-scroller":{height:"100% !important"}}),_=[nB.updateListener.of(e=>{e.docChanged&&"function"==typeof r&&!e.transactions.some(e=>e.annotation(hU))&&(D.current?D.current.reset():(D.current=new hj(()=>{if(T.current){var e=T.current;T.current=null,e()}D.current=null},200),("undefined"==typeof window?new hG:(!hW&&(hW=new hG),hW)).add(D.current)),r(e.state.doc.toString(),e)),n&&n({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map(t=>e.state.sliceDoc(t.from,t.to)),selectedText:e.state.selection.ranges.some(e=>!e.empty)})}),O,...hz({theme:u,editable:v,readOnly:y,placeholder:m,indentWithTab:b,basicSetup:w})];return s&&"function"==typeof s&&_.push(nB.updateListener.of(s)),_=_.concat(a),(0,u6.useLayoutEffect)(()=>{if(S&&!P){var e={doc:t,selection:i,extensions:_},r=x?e3.fromJSON(x.json,e,x.fields):e3.create(e);if(M(r),!R){var n=new nB({state:r,parent:S,root:C});E(n),o&&o(n,r)}}return()=>{R&&(M(void 0),E(void 0))}},[S,P]),(0,u6.useEffect)(()=>{e.container&&k(e.container)},[e.container]),(0,u6.useEffect)(()=>()=>{R&&(R.destroy(),E(void 0)),D.current&&(D.current.cancel(),D.current=null)},[R]),(0,u6.useEffect)(()=>{l&&R&&R.focus()},[l,R]),(0,u6.useEffect)(()=>{R&&R.dispatch({effects:eX.reconfigure.of(_)})},[u,a,d,c,h,p,f,g,m,v,y,b,w,r,s]),(0,u6.useEffect)(()=>{if(void 0!==t){var e=R?R.state.doc.toString():"";if(R&&t!==e){var i=D.current&&!D.current.isDone,r=()=>{R&&t!==R.state.doc.toString()&&R.dispatch({changes:{from:0,to:R.state.doc.toString().length,insert:t||""},annotations:[hU.of(!0)]})};i?T.current=r:r()}}},[t,R]),{state:P,setState:M,view:R,setView:E,container:S,setContainer:k}}({root:k,value:r,autoFocus:d,theme:c,height:p,minHeight:f,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:b,placeholder:w,indentWithTab:C,editable:x,readOnly:S,selection:n,onChange:s,onStatistics:a,onCreateEditor:l,onUpdate:u,extensions:o,initialState:R});(0,u6.useImperativeHandle)(t,()=>({editor:P.current,state:M,view:D}),[P,T,M,D]);var _=(0,u6.useCallback)(e=>{P.current=e,O(e)},[O]);if("string"!=typeof r)throw Error("value must be typeof string but got "+typeof r);var A="string"==typeof c?"cm-theme-"+c:"cm-theme";return(0,h.jsx)("div",(0,uZ.default)({ref:_,className:""+A+(i?" "+i:"")},E))});function hQ({value:e,onChange:t,language:i="sql",readOnly:r=!1,lineNumbers:n=!0,wordWrap:o=!0,fontSize:s=14,height:a="100%",className:l="",theme:u="light",keyBindings:d=[]}){let c=(0,u6.useMemo)(()=>{let e=[(e=>{switch(e){case"sql":default:return uP({dialect:uD});case"yaml":return new sj(uY)}})(i),nB.theme({"&":{fontSize:`${s}px`},".cm-content":{fontFamily:"monospace"},".cm-gutters":{fontFamily:"monospace"}})];return o&&e.push(nB.lineWrapping),d.length>0&&e.push(eA.highest(n$.of(d))),e},[i,s,o,d]),p=(0,u6.useMemo)(()=>"dark"===u?u4:u2,[u]);return(0,h.jsx)(hK,{value:e,onChange:e=>{t&&t(e)},extensions:c,readOnly:r,basicSetup:{lineNumbers:n,foldGutter:!0,highlightActiveLineGutter:!r,highlightActiveLine:!r,tabSize:2},height:a,className:`${l} no-track-pii-safe`,theme:p})}hK.displayName="CodeMirror",e.s(["CodeEditor",()=>hQ],750060);class hX{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}offset(e,t=e){return new hX(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}}function hY(e,t,i,r,n,o){if(e==r)return[];let s=h4(e,t,i,r,n,o),a=h8(e,t+s,i,r,n+s,o);t+=s,i-=a,n+=s;let l=i-t,u=(o-=a)-n;if(!l||!u)return[new hX(t,i,n,o)];if(l>u){let s=e.slice(t,i).indexOf(r.slice(n,o));if(s>-1)return[new hX(t,t+s,n,n),new hX(t+s+u,i,o,o)]}else if(u>l){let s=r.slice(n,o).indexOf(e.slice(t,i));if(s>-1)return[new hX(t,t,n,n+s),new hX(i,i,n+s+l,o)]}if(1==l||1==u)return[new hX(t,i,n,o)];let d=function e(t,i,r,n,o,s){let a=r-i,l=s-o;if(a<l){let a=e(n,o,s,t,i,r);return a&&[a[1],a[0],a[2]]}return a<4||2*l<a?null:h6(t,i,r,n,o,s,Math.floor(a/4),-1)}(e,t,i,r,n,o);if(d){let[s,a,l]=d;return hY(e,t,s,r,n,a).concat(hY(e,s+l,i,r,a+l,o))}return function(e,t,i,r,n,o){let s=i-t,a=o-n;if(hZ<1e9&&Math.min(s,a)>16*hZ||hJ>0&&Date.now()>hJ)return Math.min(s,a)>64*hZ?[new hX(t,i,n,o)]:h7(e,t,i,r,n,o);let l=Math.ceil((s+a)/2);h2.reset(l),h5.reset(l);let u=(i,o)=>e.charCodeAt(t+i)==r.charCodeAt(n+o),d=(t,n)=>e.charCodeAt(i-t-1)==r.charCodeAt(o-n-1),c=(s-a)%2!=0?h5:null,h=c?null:h2;for(let p=0;p<l;p++){if(p>hZ||hJ>0&&!(63&p)&&Date.now()>hJ)return h7(e,t,i,r,n,o);let f=h2.advance(p,s,a,l,c,!1,u)||h5.advance(p,s,a,l,h,!0,d);if(f)return function(e,t,i,r,n,o,s,a){let l=!1;return(pu(e,r)||++r!=i||(l=!0),pu(n,a)||++a!=s||(l=!0),l)?[new hX(t,i,o,s)]:hY(e,t,r,n,o,a).concat(hY(e,r,i,n,a,s))}(e,t,i,t+f[0],r,n,o,n+f[1])}return[new hX(t,i,n,o)]}(e,t,i,r,n,o)}let hZ=1e9,hJ=0,h0=!1;class h1{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let e=0;e<this.len;e++)this.vec[e]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,i,r,n,o,s){for(let a=-e+this.start;a<=e-this.end;a+=2){let l=r+a,u=a==-e||a!=e&&this.vec[l-1]<this.vec[l+1]?this.vec[l+1]:this.vec[l-1]+1,d=u-a;for(;u<t&&d<i&&s(u,d);)u++,d++;if(this.vec[l]=u,u>t)this.end+=2;else if(d>i)this.start+=2;else if(n){let e=r+(t-i)-a;if(e>=0&&e<this.len&&-1!=n.vec[e]){if(o){let i=n.vec[e];if(i>=t-u)return[i,r+i-e]}else if(u>=t-n.vec[e])return[u,d]}}}return null}}let h2=new h1,h5=new h1;function h3(e,t){let i=1,r=Math.min(e,t);for(;i<r;)i<<=1;return i}function h4(e,t,i,r,n,o){if(t==i||t==o||e.charCodeAt(t)!=r.charCodeAt(n))return 0;let s=h3(i-t,o-n);for(let a=t,l=n;;){let n=a+s,u=l+s;if(n>i||u>o||e.slice(a,n)!=r.slice(l,u)){if(1==s)return a-t-!pu(e,a);s>>=1}else{if(n==i||u==o)return n-t;a=n,l=u}}}function h8(e,t,i,r,n,o){if(t==i||n==o||e.charCodeAt(i-1)!=r.charCodeAt(o-1))return 0;let s=h3(i-t,o-n);for(let a=i,l=o;;){let o=a-s,u=l-s;if(o<t||u<n||e.slice(o,a)!=r.slice(u,l)){if(1==s)return i-a-!pu(e,a);s>>=1}else{if(o==t||u==n)return i-o;a=o,l=u}}}function h6(e,t,i,r,n,o,s,a){let l=r.slice(n,o),u=null;for(;;){if(u||s<a)return u;for(let a=t+s;;){!pu(e,a)&&a++;let d=a+s;if(pu(e,d)||(d+=d==a+1?1:-1),d>=i)break;let c=e.slice(a,d),h=-1;for(;-1!=(h=l.indexOf(c,h+1));){let s=h4(e,d,i,r,n+h+c.length,o),l=h8(e,t,a,r,n,n+h),p=c.length+s+l;(!u||u[2]<p)&&(u=[a-l,n+h-l,p])}a=d}if(a<0)return u;s>>=1}}function h7(e,t,i,r,n,o){let s;h0=!0;let a=i-t,l=o-n;if(a<l){let l=h6(r,n,o,e,t,i,Math.floor(a/6),50);s=l&&[l[1],l[0],l[2]]}else s=h6(e,t,i,r,n,o,Math.floor(l/6),50);if(!s)return[new hX(t,i,n,o)];let[u,d,c]=s;return hY(e,t,u,r,n,d).concat(hY(e,u+c,i,r,d+c,o))}function h9(e,t){for(let i=1;i<e.length;i++){let r=e[i-1],n=e[i];r.toA>n.fromA-t&&r.toB>n.fromB-t&&(e[i-1]=new hX(r.fromA,n.toA,r.fromB,n.toB),e.splice(i--,1))}}try{r=RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(e){}function pe(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function pt(e,t){if(t==e.length)return 0;let i=e.charCodeAt(t);return i<192?+!!pe(i):r?pa(i)&&t!=e.length-1?2*!!r.test(e.slice(t,t+2)):+!!r.test(String.fromCharCode(i)):0}function pi(e,t){if(!t)return 0;let i=e.charCodeAt(t-1);return i<192?+!!pe(i):r?pl(i)&&1!=t?2*!!r.test(e.slice(t-2,t)):+!!r.test(String.fromCharCode(i)):0}function pr(e,t,i){if(t==e.length||!pi(e,t))return t;for(let r=t,n=t+i,o=0;o<8;o++){let t=pt(e,r);if(!t||r+t>n)return r;r+=t}return t}function pn(e,t,i){if(!t||!pt(e,t))return t;for(let r=t,n=t-i,o=0;o<8;o++){let t=pi(e,r);if(!t||r-t<n)return r;r-=t}return t}function po(e,t,i){for(;t!=i;t--)if(10==e.charCodeAt(t-1))return t;return -1}function ps(e,t,i){for(;t!=i;t++)if(10==e.charCodeAt(t))return t;return -1}let pa=e=>e>=55296&&e<=56319,pl=e=>e>=56320&&e<=57343;function pu(e,t){return!t||t==e.length||!pa(e.charCodeAt(t-1))||!pl(e.charCodeAt(t))}function pd(e,t,i){var r;return function(e,t,i){for(let r=0,n=0;n<e.length;n++){let o=e[n],s=o.toA-o.fromA,a=o.toB-o.fromB;if(s&&a||s>3||a>3){let l=n==e.length-1?t.length:e[n+1].fromA,u=o.fromA-r,d=l-o.toA,c=pn(t,o.fromA,u),h=pr(t,o.toA,d),p=o.fromA-c,f=h-o.toA;if((!s||!a)&&p&&f){let u=Math.max(s,a),[d,g,m]=s?[t,o.fromA,o.toA]:[i,o.fromB,o.toB];u>p&&t.slice(c,o.fromA)==d.slice(m-p,m)?(c=(o=e[n]=new hX(c,c+s,o.fromB-p,o.toB-p)).fromA,h=pr(t,o.toA,l-o.toA)):u>f&&t.slice(o.toA,h)==d.slice(g,g+f)&&(h=(o=e[n]=new hX(h-s,h,o.fromB+f,o.toB+f)).toA,c=pn(t,o.fromA,o.fromA-r)),p=o.fromA-c,f=h-o.toA}if(p||f)o=e[n]=new hX(o.fromA-p,o.toA+f,o.fromB-p,o.toB+f);else if(s){if(!a){let i=ps(t,o.fromA,o.toA),r,s=i<0?-1:po(t,o.toA,o.fromA);i>-1&&(r=i-o.fromA)<=d&&t.slice(o.fromA,i)==t.slice(o.toA,o.toA+r)?o=e[n]=o.offset(r):s>-1&&(r=o.toA-s)<=u&&t.slice(o.fromA-r,o.fromA)==t.slice(s,o.toA)&&(o=e[n]=o.offset(-r))}}else{let t=ps(i,o.fromB,o.toB),r,s=t<0?-1:po(i,o.toB,o.fromB);t>-1&&(r=t-o.fromB)<=d&&i.slice(o.fromB,t)==i.slice(o.toB,o.toB+r)?o=e[n]=o.offset(r):s>-1&&(r=o.toB-s)<=u&&i.slice(o.fromB-r,o.fromB)==i.slice(s,o.toB)&&(o=e[n]=o.offset(-r))}}r=o.toA}return h9(e,3),e}((hZ=(null!=(r=null==i?void 0:i.scanLimit)?r:1e9)>>1,hJ=(null==i?void 0:i.timeout)?Date.now()+i.timeout:0,h0=!1,function(e,t,i){for(;;){h9(i,1);let r=!1;for(let n=0;n<i.length;n++){let o=i[n],s,a;(s=h4(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=i[n]=new hX(o.fromA+s,o.toA,o.fromB+s,o.toB)),(a=h8(e,o.fromA,o.toA,t,o.fromB,o.toB))&&(o=i[n]=new hX(o.fromA,o.toA-a,o.fromB,o.toB-a));let l=o.toA-o.fromA,u=o.toB-o.fromB;if(l&&u)continue;let d=o.fromA-(n?i[n-1].toA:0),c=(n<i.length-1?i[n+1].fromA:e.length)-o.toA;if(!d||!c)continue;let h=l?e.slice(o.fromA,o.toA):t.slice(o.fromB,o.toB);d<=h.length&&e.slice(o.fromA-d,o.fromA)==h.slice(h.length-d)?(i[n]=new hX(o.fromA-d,o.toA-d,o.fromB-d,o.toB-d),r=!0):c<=h.length&&e.slice(o.toA,o.toA+c)==h.slice(0,c)&&(i[n]=new hX(o.fromA+c,o.toA+c,o.fromB+c,o.toB+c),r=!0)}if(!r)break}return i}(e,t,hY(e,0,e.length,t,0,t.length))),e,t)}let pc=eR.define({combine:e=>e[0]}),ph=eX.define(),pp=eR.define(),pf=eO.define({create:e=>null,update(e,t){for(let i of t.effects)i.is(ph)&&(e=i.value);for(let i of t.state.facet(pp))e=i(e,t);return e}});class pg{constructor(e,t,i,r,n,o=!0){this.changes=e,this.fromA=t,this.toA=i,this.fromB=r,this.toB=n,this.precise=o}offset(e,t){return e||t?new pg(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t,i){return py(pd(e.toString(),t.toString(),i),e,t,0,0,!h0)}static updateA(e,t,i,r,n){return pC(pw(e,r,!0,i.length),e,t,i,n)}static updateB(e,t,i,r,n){return pC(pw(e,r,!1,t.length),e,t,i,n)}}function pm(e,t,i,r){let n=i.lineAt(e),o=r.lineAt(t);return n.to==e&&o.to==t&&e<i.length&&t<r.length?[e+1,t+1]:[n.from,o.from]}function pv(e,t,i,r){let n=i.lineAt(e),o=r.lineAt(t);return n.from==e&&o.from==t?[e,t]:[n.to+1,o.to+1]}function py(e,t,i,r,n,o){let s=[];for(let a=0;a<e.length;a++){let l=e[a],[u,d]=pm(l.fromA+r,l.fromB+n,t,i),[c,h]=pv(l.toA+r,l.toB+n,t,i),p=[l.offset(-u+r,-d+n)];for(;a<e.length-1;){let o=e[a+1],[s,l]=pm(o.fromA+r,o.fromB+n,t,i);if(s>c+1&&l>h+1)break;p.push(o.offset(-u+r,-d+n)),[c,h]=pv(o.toA+r,o.toB+n,t,i),a++}s.push(new pg(p,u,Math.max(u,c),d,Math.max(d,h),o))}return s}function pb(e,t,i,r){let n=0,o=e.length;for(;;){if(n==o){let r=0,o=0;n&&({toA:r,toB:o}=e[n-1]);let s=t-(i?r:o);return[r+s,o+s]}let s=n+o>>1,a=e[s],[l,u]=i?[a.fromA,a.toA]:[a.fromB,a.toB];if(l>t)o=s;else{if(!(u<=t))return r?[a.fromA,a.fromB]:[a.toA,a.toB];n=s+1}}}function pw(e,t,i,r){let n=[];return t.iterChangedRanges((o,s,a,l)=>{let u=0,d=i?t.length:r,c=0,h=i?r:t.length;o>1e3&&([u,c]=pb(e,o-1e3,i,!0)),s<t.length-1e3&&([d,h]=pb(e,s+1e3,i,!1));let p=l-a-(s-o),f,[g,m]=i?[p,0]:[0,p];n.length&&(f=n[n.length-1]).toA>=u?n[n.length-1]={fromA:f.fromA,fromB:f.fromB,toA:d,toB:h,diffA:f.diffA+g,diffB:f.diffB+m}:n.push({fromA:u,toA:d,fromB:c,toB:h,diffA:g,diffB:m})}),n}function pC(e,t,i,r,n){if(!e.length)return t;let o=[];for(let s=0,a=0,l=0,u=0;;s++){let d=s==e.length?null:e[s],c=d?d.fromA+a:i.length,h=d?d.fromB+l:r.length;for(;u<t.length;){let e=t[u];if(Math.min(i.length,e.toA+a)>c||Math.min(r.length,e.toB+l)>h)break;o.push(e.offset(a,l)),u++}if(!d)break;let p=d.toA+a+d.diffA,f=d.toB+l+d.diffB;for(let e of py(pd(i.sliceString(c,p),r.sliceString(h,f),n),i,r,c,h,!h0))o.push(e);for(a+=d.diffA,l+=d.diffB;u<t.length;){let e=t[u];if(e.fromA+a>p&&e.fromB+l>f)break;u++}}return o}let px={scanLimit:500},pS=iG.fromClass(class{constructor(e){({deco:this.deco,gutter:this.gutter}=pT(e))}update(e){var t,i,r,n;(e.docChanged||e.viewportChanged||(t=e.startState,i=e.state,t.field(pf,!1)!=i.field(pf,!1))||(r=e.startState,n=e.state,r.facet(pc)!=n.facet(pc)))&&({deco:this.deco,gutter:this.gutter}=pT(e.view))}},{decorations:e=>e.deco}),pk=eA.low(o$({class:"cm-changeGutter",markers:e=>{var t;return(null==(t=e.plugin(pS))?void 0:t.gutter)||te.empty}})),pR=tU.line({class:"cm-changedLine"}),pE=tU.mark({class:"cm-changedText"}),pP=tU.mark({tagName:"ins",class:"cm-insertedLine"}),pM=tU.mark({tagName:"del",class:"cm-deletedLine"}),pD=new class extends oz{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function pT(e){let t=e.state.field(pf),{side:i,highlightChanges:r,markGutter:n,overrideChunk:o}=e.state.facet(pc),s="a"==i,a=new tt,l=n?new tt:null,{from:u,to:d}=e.viewport;for(let i of t){if((s?i.fromA:i.fromB)>=d)break;!((s?i.toA:i.toB)>u)||o&&o(e.state,i,a,l)||function(e,t,i,r,n,o){let s=i?e.fromA:e.fromB,a=i?e.toA:e.toB,l=0;if(s!=a){n.add(s,s,pR),n.add(s,a,i?pM:pP),o&&o.add(s,s,pD);for(let u=t.iterRange(s,a-1),d=s;!u.next().done;){if(u.lineBreak){d++,n.add(d,d,pR),o&&o.add(d,d,pD);continue}let t=d+u.value.length;if(r)for(;l<e.changes.length;){let r=e.changes[l],o=s+(i?r.fromA:r.fromB),a=s+(i?r.toA:r.toB),u=Math.max(d,o),c=Math.min(t,a);if(u<c&&n.add(u,c,pE),a<t)l++;else break}d=t}}}(i,e.state.doc,s,r,a,l)}return{deco:a.finish(),gutter:l&&l.finish()}}class pO extends tG{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}let p_=eX.define({map:(e,t)=>e.map(t)}),pA=eO.define({create:()=>tU.none,update:(e,t)=>{for(let e of t.effects)if(e.is(p_))return e.value;return e.map(t.changes)},provide:e=>nB.decorations.from(e)});function pF(e,t){if(e.size!=t.size)return!1;let i=e.iter(),r=t.iter();for(;i.value;){if(i.from!=r.from||Math.abs(i.value.spec.widget.height-r.value.spec.widget.height)>1)return!1;i.next(),r.next()}return!0}let pI=eX.define({map:(e,t)=>t.mapPos(e)});class pL extends tG{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent=e.state.phrase("$ unchanged lines",this.lines),t.addEventListener("click",t=>{let i=e.posAtDOM(t.target);e.dispatch({effects:pI.of(i)});let{side:r,sibling:n}=e.state.facet(pc);n&&n().dispatch({effects:pI.of(function(e,t,i){let r=0,n=0;for(let o=0;;o++){let s=o<t.length?t[o]:null;if(!s||(i?s.fromA:s.fromB)>=e)return n+(e-r);[r,n]=i?[s.toA,s.toB]:[s.toB,s.toA]}}(i,e.state.field(pf),"a"==r))})}),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}}let pN=eO.define({create:e=>tU.none,update(e,t){for(let i of(e=e.map(t.changes),t.effects))i.is(pI)&&(e=e.update({filter:e=>e!=i.value}));return e},provide:e=>nB.decorations.from(e)});function pB({margin:e=3,minSize:t=4}){return pN.init(i=>(function(e,t,i){let r=new tt,n="a"==e.facet(pc).side,o=e.field(pf),s=1;for(let a=0;;a++){let l=a<o.length?o[a]:null,u=a?s+t:1,d=l?e.doc.lineAt(n?l.fromA:l.fromB).number-1-t:e.doc.lines,c=d-u+1;if(c>=i&&r.add(e.doc.line(u).from,e.doc.line(d).to,tU.replace({widget:new pL(c),block:!0})),!l)break;s=e.doc.lineAt(Math.min(e.doc.length,n?l.toA:l.toB)).number}return r.finish()})(i,e,t))}let pV=nB.styleModule.of(new tv({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),pH=nB.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'""',marginInlineEnd:"7px"},"&:after":{content:'""',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),pz=new eI,pj=new eI;class pG{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||px;let t=[eA.low(pS),pH,pV,pA,nB.updateListener.of(e=>{this.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some(e=>e.effects.some(e=>e.is(p_)))&&this.measure()})],i=[pc.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&i.push(pk);let r=e3.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],nB.editorAttributes.of({class:"cm-merge-a"}),pj.of(i),t]}),n=[pc.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&n.push(pk);let o=e3.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],nB.editorAttributes.of({class:"cm-merge-b"}),pj.of(n),t]});this.chunks=pg.build(r.doc,o.doc,this.diffConf);let s=[pf.init(()=>this.chunks),pz.of(e.collapseUnchanged?pB(e.collapseUnchanged):[])];r=r.update({effects:eX.appendConfig.of(s)}).state,o=o.update({effects:eX.appendConfig.of(s)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let a=e.orientation||"a-b",l=document.createElement("div");l.className="cm-mergeViewEditor";let u=document.createElement("div");u.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==a?l:u),this.editorDOM.appendChild("a-b"==a?u:l),this.a=new nB({state:r,parent:l,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.a)}),this.b=new nB({state:o,parent:u,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.b)}),this.setupRevertControls(!!e.revertControls,"b-to-a"==e.revertControls,e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.some(e=>e.docChanged)){let i=e[e.length-1],r=e.reduce((e,t)=>e.compose(t.changes),ef.empty(e[0].startState.doc.length));this.chunks=t==this.a?pg.updateA(this.chunks,i.newDoc,this.b.state.doc,r,this.diffConf):pg.updateB(this.chunks,this.a.state.doc,i.newDoc,r,this.diffConf),t.update([...e,i.state.update({effects:ph.of(this.chunks)})]);let n=t==this.a?this.b:this.a;n.update([n.state.update({effects:ph.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let t="b-a"!=e.orientation;if(t!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let e=this.a.dom.parentNode,i=this.b.dom.parentNode;e.remove(),i.remove(),this.editorDOM.insertBefore(t?e:i,this.editorDOM.firstChild),this.editorDOM.appendChild(t?i:e),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let t=!!this.revertDOM,i=this.revertToA,r=this.renderRevert;"revertControls"in e&&(t=!!e.revertControls,i="b-to-a"==e.revertControls),"renderRevertControl"in e&&(r=e.renderRevertControl),this.setupRevertControls(t,i,r)}let t="highlightChanges"in e,i="gutter"in e,r="collapseUnchanged"in e;if(t||i||r){let n=[],o=[];if(t||i){let r=this.a.state.facet(pc),s=i?!1!==e.gutter:r.markGutter,a=t?!1!==e.highlightChanges:r.highlightChanges;n.push(pj.reconfigure([pc.of({side:"a",sibling:()=>this.b,highlightChanges:a,markGutter:s}),s?pk:[]])),o.push(pj.reconfigure([pc.of({side:"b",sibling:()=>this.a,highlightChanges:a,markGutter:s}),s?pk:[]]))}if(r){let t=pz.reconfigure(e.collapseUnchanged?pB(e.collapseUnchanged):[]);n.push(t),o.push(t)}this.a.dispatch({effects:n}),this.b.dispatch({effects:o})}this.scheduleMeasure()}setupRevertControls(e,t,i){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=i,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",e=>this.revertClicked(e)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){!function(e,t,i){let r=new tt,n=new tt,o=e.state.field(pA).iter(),s=t.state.field(pA).iter(),a=0,l=0,u=0,d=0,c=e.viewport,h=t.viewport;for(let p=0;;p++){let f=p<i.length?i[p]:null,g=f?f.fromA:e.state.doc.length,m=f?f.fromB:t.state.doc.length;if(a<g){let i=e.lineBlockAt(a).top+u-(t.lineBlockAt(l).top+d);i<-.01?(u-=i,r.add(a,a,tU.widget({widget:new pO(-i),block:!0,side:-1}))):i>.01&&(d+=i,n.add(l,l,tU.widget({widget:new pO(i),block:!0,side:-1})))}if(g>a+1e3&&a<c.from&&g>c.from&&l<h.from&&m>h.from){let e=Math.min(c.from-a,h.from-l);a+=e,l+=e,p--}else if(f)a=f.toA,l=f.toB;else break;for(;o.value&&o.from<a;)u-=o.value.spec.widget.height,o.next();for(;s.value&&s.from<l;)d-=s.value.spec.widget.height,s.next()}for(;o.value;)u-=o.value.spec.widget.height,o.next();for(;s.value;)d-=s.value.spec.widget.height,s.next();let p=e.contentHeight+u-(t.contentHeight+d);p<.01?r.add(e.state.doc.length,e.state.doc.length,tU.widget({widget:new pO(-p),block:!0,side:1})):p>.01&&n.add(t.state.doc.length,t.state.doc.length,tU.widget({widget:new pO(p),block:!0,side:1}));let f=r.finish(),g=n.finish();pF(f,e.state.field(pA))||e.dispatch({effects:p_.of(f)}),pF(g,t.state.field(pA))||t.dispatch({effects:p_.of(g)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,i=this.a.viewport,r=this.b.viewport;for(let n=0;n<this.chunks.length;n++){let o=this.chunks[n];if(o.fromA>i.to||o.fromB>r.to)break;if(o.fromA<i.from||o.fromB<r.from)continue;let s=this.a.lineBlockAt(o.fromA).top+"px";for(;t&&+t.dataset.chunk<n;)t=pW(t);t&&t.dataset.chunk==String(n)?(t.style.top!=s&&(t.style.top=s),t=t.nextSibling):e.insertBefore(this.renderRevertButton(s,n),t)}for(;t;)t=pW(t)}renderRevertButton(e,t){let i;if(this.renderRevert)i=this.renderRevert();else{i=document.createElement("button");let e=this.a.state.phrase("Revert this chunk");i.setAttribute("aria-label",e),i.setAttribute("title",e),i.textContent=this.revertToLeft?"":""}return i.style.top=e,i.setAttribute("data-chunk",String(t)),i}revertClicked(e){let t=e.target,i;for(;t&&t.parentNode!=this.revertDOM;)t=t.parentNode;if(t&&(i=this.chunks[t.dataset.chunk])){let[t,r,n,o,s,a]=this.revertToA?[this.b,this.a,i.fromB,i.toB,i.fromA,i.toA]:[this.a,this.b,i.fromA,i.toA,i.fromB,i.toB],l=t.state.sliceDoc(n,Math.max(n,o-1));n!=o&&a<=r.state.doc.length&&(l+=t.state.lineBreak),r.dispatch({changes:{from:s,to:Math.min(r.state.doc.length,a),insert:l},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function pW(e){let t=e.nextSibling;return e.remove(),t}let pU=new class extends oz{constructor(){super(...arguments),this.elementClass="cm-deletedLineGutter"}},p$=eA.low(o$({class:"cm-changeGutter",markers:e=>{var t;return(null==(t=e.plugin(pS))?void 0:t.gutter)||te.empty},widgetMarker:(e,t)=>t instanceof pX?pU:null})),pq=eX.define(),pK=eO.define({create:()=>Z.empty,update(e,t){for(let i of t.effects)i.is(pq)&&(e=i.value.doc);return e}}),pQ=new WeakMap;class pX extends tG{constructor(e){super(),this.buildDOM=e,this.dom=null}eq(e){return this.dom==e.dom}toDOM(e){return this.dom||(this.dom=this.buildDOM(e))}}function pY(e){let t=new tt;for(let i of e.field(pf)){let r=e.facet(pc).overrideChunk&&p0(e,i);t.add(i.fromB,i.fromB,function(e,t,i){let r=pQ.get(t.changes);if(r)return r;let n=tU.widget({block:!0,side:-1,widget:new pX(r=>{let{highlightChanges:n,syntaxHighlightDeletions:o,syntaxHighlightDeletionsMaxLength:s,mergeControls:a}=e.facet(pc),l=document.createElement("div");if(l.className="cm-deletedChunk",a){let t=l.appendChild(document.createElement("div"));t.className="cm-chunkButtons";let i=e=>{e.preventDefault(),function(e,t){let{state:i}=e,r=null!=t?t:i.selection.main.head,n=e.state.field(pf).find(e=>e.fromB<=r&&e.endB>=r);if(!n)return;let o=e.state.sliceDoc(n.fromB,Math.max(n.fromB,n.toB-1)),s=e.state.field(pK);n.fromB!=n.toB&&n.toA<=s.length&&(o+=e.state.lineBreak);let a=ef.of({from:n.fromA,to:Math.min(s.length,n.toA),insert:o},s.length);e.dispatch({effects:pq.of({doc:a.apply(s),changes:a}),userEvent:"accept"})}(r,r.posAtDOM(l))},n=e=>{e.preventDefault(),function(e,t){let{state:i}=e,r=null!=t?t:i.selection.main.head,n=i.field(pf).find(e=>e.fromB<=r&&e.endB>=r);if(!n)return;let o=i.field(pK).sliceString(n.fromA,Math.max(n.fromA,n.toA-1));n.fromA!=n.toA&&n.toB<=i.doc.length&&(o+=i.lineBreak),e.dispatch({changes:{from:n.fromB,to:Math.min(i.doc.length,n.toB),insert:o},userEvent:"revert"})}(r,r.posAtDOM(l))};if("function"==typeof a)t.appendChild(a("accept",i)),t.appendChild(a("reject",n));else{let r=t.appendChild(document.createElement("button"));r.name="accept",r.textContent=e.phrase("Accept"),r.onmousedown=i;let o=t.appendChild(document.createElement("button"));o.name="reject",o.textContent=e.phrase("Reject"),o.onmousedown=n}}if(i||t.fromA>=t.toA)return l;let u=r.state.field(pK).sliceString(t.fromA,t.endA),d=o&&e.facet(sz),c=g(),h=t.changes,p=0,f=!1;function g(){let e=l.appendChild(document.createElement("div"));return e.className="cm-deletedLine",e.appendChild(document.createElement("del"))}function m(e,t,i){for(let r=e;r<t;){if("\n"==u.charAt(r)){c.firstChild||c.appendChild(document.createElement("br")),c=g(),r++;continue}let e=t,o=i+(f?" cm-deletedText":""),s=!1,a=u.indexOf("\n",r);if(a>-1&&a<t&&(e=a),n&&p<h.length){let t=Math.max(0,f?h[p].toA:h[p].fromA);t<=e&&(e=t,f&&p++,s=!0)}if(e>r){let t=document.createTextNode(u.slice(r,e));if(o){let e=c.appendChild(document.createElement("span"));e.className=o,e.appendChild(t)}else c.appendChild(t);r=e}s&&(f=!f)}}if(d&&t.toA-t.fromA<=s){let t=d.parser.parse(u),i=0;su(t,{style:t=>(function(e,t,i){let r=am(e),n=null;if(r){for(let e of r)if(!e.scope){let i=e.style(t);i&&(n=n?n+" "+i:i)}}return n})(e,t)},(e,t,r)=>{e>i&&m(i,e,""),m(e,t,r),i=t}),m(i,u.length,"")}else m(0,u.length,"");return c.firstChild||c.appendChild(document.createElement("br")),l})});return pQ.set(t.changes,n),n}(e,i,!!r))}return t.finish()}let pZ=eO.define({create:e=>pY(e),update:(e,t)=>t.state.field(pf,!1)!=t.startState.field(pf,!1)?pY(t.state):e,provide:e=>nB.decorations.from(e)}),pJ=new WeakMap;function p0(e,t){let i=pJ.get(t);if(void 0!==i)return i;i=null;let r=e.field(pK),n=e.doc,o=r.lineAt(t.endA).number-r.lineAt(t.fromA).number+1,s=n.lineAt(t.endB).number-n.lineAt(t.fromB).number+1;o:if(o==s&&o<10){let e=[],n=0,s=t.fromA,a=t.fromB;for(let i of t.changes){if(i.fromA<i.toA){n+=i.toA-i.fromA;let t=r.sliceString(s+i.fromA,s+i.toA);if(/\n/.test(t))break o;e.push(tU.widget({widget:new p1(t),side:-1}).range(a+i.fromB))}i.fromB<i.toB&&e.push(pE.range(a+i.fromB,a+i.toB))}n<t.endA-t.fromA-2*o&&(i=e)}return pJ.set(t,i),i}class p1 extends tG{constructor(e){super(),this.text=e}eq(e){return this.text==e.text}toDOM(e){let t=document.createElement("del");return t.className="cm-deletedText",t.textContent=this.text,t}}let p2=new class extends oz{constructor(){super(...arguments),this.elementClass="cm-inlineChangedLineGutter"}},p5=tU.line({class:"cm-inlineChangedLine"});function p3(e,t,i,r){let n=p0(e,t),o=0;if(!n)return!1;for(let s=e.doc.lineAt(t.fromB);;){for(r&&r.add(s.from,s.from,p2),i.add(s.from,s.from,p5);o<n.length&&n[o].to<=s.to;){let e=n[o++];i.add(e.from,e.to,e.value)}if(s.to>=t.endB)break;s=e.doc.lineAt(s.to+1)}return!0}function p4({original:e,modified:t,language:i="sql",readOnly:r=!0,lineNumbers:n=!0,sideBySide:o=!0,height:s="100%",className:a="",theme:l="light",onModifiedChange:u}){let d=(0,u6.useRef)(null),c=(0,u6.useRef)(null),p=(0,u6.useMemo)(()=>{let e=[(e=>{switch(e){case"sql":default:return uP({dialect:uD});case"yaml":return new sj(uY)}})(i),"dark"===l?u4:u2];return n&&e.push(o6()),e},[i,l,n]);return(0,u6.useEffect)(()=>{if(d.current){if(c.current&&c.current.destroy(),o)c.current=new pG({a:{doc:e,extensions:[...p,nB.editable.of(!1),e3.readOnly.of(!0)]},b:{doc:t,extensions:[...p,nB.editable.of(!r),e3.readOnly.of(r),nB.updateListener.of(e=>{e.docChanged&&u&&u(e.state.doc.toString())})]},parent:d.current,revertControls:r?void 0:"a-to-b",highlightChanges:!0,gutter:n});else{var i,s;let o,a;c.current=new nB({doc:t,extensions:[...p,(o="string"==typeof(i={original:Z.of(e.split("\n")),allowInlineDiffs:!0,highlightChanges:!0,gutter:n,mergeControls:!1}).original?Z.of(i.original.split(/\r?\n/)):i.original,a=i.diffConfig||px,[eA.low(pS),pZ,pH,nB.editorAttributes.of({class:"cm-merge-b"}),pp.of((e,t)=>{let i=t.effects.find(e=>e.is(pq));return i&&(e=pg.updateA(e,i.value.doc,t.startState.doc,i.value.changes,a)),t.docChanged&&(e=pg.updateB(e,t.state.field(pK),t.newDoc,t.changes,a)),e}),pc.of({highlightChanges:!1!==i.highlightChanges,markGutter:!1!==i.gutter,syntaxHighlightDeletions:!1!==i.syntaxHighlightDeletions,syntaxHighlightDeletionsMaxLength:3e3,mergeControls:null==(s=i.mergeControls)||s,overrideChunk:i.allowInlineDiffs?p3:void 0,side:"b"}),pK.init(()=>o),!1!==i.gutter?p$:[],i.collapseUnchanged?pB(i.collapseUnchanged):[],pf.init(e=>pg.build(o,e.doc,a))]),nB.editable.of(!r),e3.readOnly.of(r),nB.updateListener.of(e=>{e.docChanged&&u&&u(e.state.doc.toString())})],parent:d.current})}return()=>{c.current&&c.current.destroy()}}},[e,t,p,r,n,o,u]),(0,h.jsx)("div",{ref:d,className:`${a} no-track-pii-safe`,style:{height:s,overflow:"auto"}})}e.s(["DiffEditor",()=>p4],113145),e.s([],909139)},65086,e=>{"use strict";var t=e.i(955343);function i(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"},child:[]}]})(e)}function r(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M160 80c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-352zM0 272c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 160c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48L0 272zM368 96l32 0c26.5 0 48 21.5 48 48l0 288c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48z"},child:[]}]})(e)}function n(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M418.4 157.9c35.3-8.3 61.6-40 61.6-77.9c0-44.2-35.8-80-80-80c-43.4 0-78.7 34.5-80 77.5L136.2 151.1C121.7 136.8 101.9 128 80 128c-44.2 0-80 35.8-80 80s35.8 80 80 80c12.2 0 23.8-2.7 34.1-7.6L259.7 407.8c-2.4 7.6-3.7 15.8-3.7 24.2c0 44.2 35.8 80 80 80s80-35.8 80-80c0-27.7-14-52.1-35.4-66.4l37.8-207.7zM156.3 232.2c2.2-6.9 3.5-14.2 3.7-21.7l183.8-73.5c3.6 3.5 7.4 6.7 11.6 9.5L317.6 354.1c-5.5 1.3-10.8 3.1-15.8 5.5L156.3 232.2z"},child:[]}]})(e)}function o(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm320 96c0-26.9-16.5-49.9-40-59.3L280 88c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 204.7c-23.5 9.5-40 32.5-40 59.3c0 35.3 28.7 64 64 64s64-28.7 64-64zM144 176a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm-16 80a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM400 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"},child:[]}]})(e)}function s(e){return(0,t.GenIcon)({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},child:[]}]})(e)}e.s(["FaBookmark",()=>i,"FaChartSimple",()=>r,"FaCircleNodes",()=>n,"FaGauge",()=>o,"FaPlay",()=>s])},324557,328028,718292,315830,210721,621671,e=>{"use strict";e.i(316575);var t=e.i(187725),i=e.i(7284),r=e.i(778024);let n=t.createContext();var o=e.i(446547),s=e.i(73205),a=e.i(519273),l=e.i(435983),u=e.i(446519);function d(e){return(0,u.default)("MuiTable",e)}(0,l.default)("MuiTable",["root","stickyHeader"]);var c=e.i(19483);let h=(0,o.styled)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.stickyHeader&&t.stickyHeader]}})((0,s.default)(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),p="table",f=t.forwardRef(function(e,o){let s=(0,a.useDefaultProps)({props:e,name:"MuiTable"}),{className:l,component:u=p,padding:f="normal",size:g="medium",stickyHeader:m=!1,...v}=s,y={...s,component:u,padding:f,size:g,stickyHeader:m},b=(e=>{let{classes:t,stickyHeader:i}=e;return(0,r.default)({root:["root",i&&"stickyHeader"]},d,t)})(y),w=t.useMemo(()=>({padding:f,size:g,stickyHeader:m}),[f,g,m]);return(0,c.jsx)(n.Provider,{value:w,children:(0,c.jsx)(h,{as:u,role:u===p?null:"table",ref:o,className:(0,i.default)(b.root,l),ownerState:y,...v})})});e.s(["default",0,f],324557);let g=t.createContext();function m(e){return(0,u.default)("MuiTableBody",e)}(0,l.default)("MuiTableBody",["root"]);let v=(0,o.styled)("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),y={variant:"body"},b="tbody",w=t.forwardRef(function(e,t){let n=(0,a.useDefaultProps)({props:e,name:"MuiTableBody"}),{className:o,component:s=b,...l}=n,u={...n,component:s},d=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},m,t)})(u);return(0,c.jsx)(g.Provider,{value:y,children:(0,c.jsx)(v,{className:(0,i.default)(d.root,o),as:s,ref:t,role:s===b?null:"rowgroup",ownerState:u,...l})})});e.s(["default",0,w],328028);var C=e.i(578509);function x(e){return(0,u.default)("MuiTableCell",e)}let S=(0,l.default)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),k=(0,o.styled)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,t[i.variant],t[`size${(0,C.default)(i.size)}`],"normal"!==i.padding&&t[`padding${(0,C.default)(i.padding)}`],"inherit"!==i.align&&t[`align${(0,C.default)(i.align)}`],i.stickyHeader&&t.stickyHeader]}})((0,s.default)(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${"light"===e.palette.mode?e.lighten(e.alpha(e.palette.divider,1),.88):e.darken(e.alpha(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${S.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),R=t.forwardRef(function(e,o){let s,l=(0,a.useDefaultProps)({props:e,name:"MuiTableCell"}),{align:u="inherit",className:d,component:h,padding:p,scope:f,size:m,sortDirection:v,variant:y,...b}=l,w=t.useContext(n),S=t.useContext(g),R=S&&"head"===S.variant,E=f;"td"===(s=h||(R?"th":"td"))?E=void 0:!E&&R&&(E="col");let P=y||S&&S.variant,M={...l,align:u,component:s,padding:p||(w&&w.padding?w.padding:"normal"),size:m||(w&&w.size?w.size:"medium"),sortDirection:v,stickyHeader:"head"===P&&w&&w.stickyHeader,variant:P},D=(e=>{let{classes:t,variant:i,align:n,padding:o,size:s,stickyHeader:a}=e,l={root:["root",i,a&&"stickyHeader","inherit"!==n&&`align${(0,C.default)(n)}`,"normal"!==o&&`padding${(0,C.default)(o)}`,`size${(0,C.default)(s)}`]};return(0,r.default)(l,x,t)})(M),T=null;return v&&(T="asc"===v?"ascending":"descending"),(0,c.jsx)(k,{as:s,ref:o,className:(0,i.default)(D.root,d),"aria-sort":T,scope:E,ownerState:M,...b})});function E(e){return(0,u.default)("MuiTableContainer",e)}e.s(["default",0,R],718292),(0,l.default)("MuiTableContainer",["root"]);let P=(0,o.styled)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),M=t.forwardRef(function(e,t){let n=(0,a.useDefaultProps)({props:e,name:"MuiTableContainer"}),{className:o,component:s="div",...l}=n,u={...n,component:s},d=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},E,t)})(u);return(0,c.jsx)(P,{ref:t,as:s,className:(0,i.default)(d.root,o),ownerState:u,...l})});function D(e){return(0,u.default)("MuiTableHead",e)}e.s(["default",0,M],315830),(0,l.default)("MuiTableHead",["root"]);let T=(0,o.styled)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),O={variant:"head"},_="thead",A=t.forwardRef(function(e,t){let n=(0,a.useDefaultProps)({props:e,name:"MuiTableHead"}),{className:o,component:s=_,...l}=n,u={...n,component:s},d=(e=>{let{classes:t}=e;return(0,r.default)({root:["root"]},D,t)})(u);return(0,c.jsx)(g.Provider,{value:O,children:(0,c.jsx)(T,{as:s,className:(0,i.default)(d.root,o),ref:t,role:s===_?null:"rowgroup",ownerState:u,...l})})});function F(e){return(0,u.default)("MuiTableRow",e)}e.s(["default",0,A],210721);let I=(0,l.default)("MuiTableRow",["root","selected","hover","head","footer"]),L=(0,o.styled)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.head&&t.head,i.footer&&t.footer]}})((0,s.default)(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${I.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${I.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`)}}}))),N=t.forwardRef(function(e,n){let o=(0,a.useDefaultProps)({props:e,name:"MuiTableRow"}),{className:s,component:l="tr",hover:u=!1,selected:d=!1,...h}=o,p=t.useContext(g),f={...o,component:l,hover:u,selected:d,head:p&&"head"===p.variant,footer:p&&"footer"===p.variant},m=(e=>{let{classes:t,selected:i,hover:n,head:o,footer:s}=e;return(0,r.default)({root:["root",i&&"selected",n&&"hover",o&&"head",s&&"footer"]},F,t)})(f);return(0,c.jsx)(L,{as:l,ref:n,className:(0,i.default)(m.root,s),role:"tr"===l?null:"row",ownerState:f,...h})});e.s(["default",0,N],621671)},868422,e=>{"use strict";var t=e.i(238153),i=e.i(492421),r=e.i(632713),n=e.i(539392),o=e.i(516467);function s(e,t){let i=(0,o.toDate)(e)-(0,o.toDate)(t);return i<0?-1:i>0?1:i}var a=e.i(511518);function l(e,l,u){var d;let c,h=(0,i.getDefaultOptions)(),p=u?.locale??h.locale??t.defaultLocale,f=s(e,l);if(isNaN(f))throw RangeError("Invalid time value");let g=Object.assign({},u,{addSuffix:u?.addSuffix,comparison:f}),[m,v]=(0,n.normalizeDates)(u?.in,...f>0?[l,e]:[e,l]),y=(d=void 0,e=>{let t=(d?Math[d]:Math.trunc)(e);return 0===t?0:t})(((0,o.toDate)(v)-(0,o.toDate)(m))/1e3),b=Math.round((y-((0,r.getTimezoneOffsetInMilliseconds)(v)-(0,r.getTimezoneOffsetInMilliseconds)(m))/1e3)/60);if(b<2)if(u?.includeSeconds)if(y<5)return p.formatDistance("lessThanXSeconds",5,g);else if(y<10)return p.formatDistance("lessThanXSeconds",10,g);else if(y<20)return p.formatDistance("lessThanXSeconds",20,g);else if(y<40)return p.formatDistance("halfAMinute",0,g);else if(y<60)return p.formatDistance("lessThanXMinutes",1,g);else return p.formatDistance("xMinutes",1,g);else if(0===b)return p.formatDistance("lessThanXMinutes",1,g);else return p.formatDistance("xMinutes",b,g);if(b<45)return p.formatDistance("xMinutes",b,g);if(b<90)return p.formatDistance("aboutXHours",1,g);if(b<a.minutesInDay){let e=Math.round(b/60);return p.formatDistance("aboutXHours",e,g)}if(b<2520)return p.formatDistance("xDays",1,g);else if(b<a.minutesInMonth){let e=Math.round(b/a.minutesInDay);return p.formatDistance("xDays",e,g)}else if(b<2*a.minutesInMonth)return c=Math.round(b/a.minutesInMonth),p.formatDistance("aboutXMonths",c,g);if((c=function(e,t,i){var r,a;let l,u,d,c,[h,p,f]=(0,n.normalizeDates)(void 0,e,e,t),g=s(p,f),m=Math.abs(function(e,t,i){let[r,o]=(0,n.normalizeDates)(void 0,e,t);return 12*(r.getFullYear()-o.getFullYear())+(r.getMonth()-o.getMonth())}(p,f));if(m<1)return 0;1===p.getMonth()&&p.getDate()>27&&p.setDate(30),p.setMonth(p.getMonth()-g*m);let v=s(p,f)===-g;+(l=(0,o.toDate)(h,void 0),r=void 0,(u=(0,o.toDate)(l,r?.in)).setHours(23,59,59,999),u)==+(a=void 0,c=(d=(0,o.toDate)(l,a?.in)).getMonth(),d.setFullYear(d.getFullYear(),c+1,0),d.setHours(23,59,59,999),d)&&1===m&&1===s(h,f)&&(v=!1);let y=g*(m-v);return 0===y?0:y}(v,m))<12){let e=Math.round(b/a.minutesInMonth);return p.formatDistance("xMonths",e,g)}{let e=c%12,t=Math.trunc(c/12);return e<3?p.formatDistance("aboutXYears",t,g):e<9?p.formatDistance("overXYears",t,g):p.formatDistance("almostXYears",t+1,g)}}e.s(["formatDistance",()=>l],868422)},570795,(e,t,i)=>{var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},991915,(e,t,i)=>{t.exports=function(e,t){return function(i){return e(t(i))}}},642918,(e,t,i)=>{t.exports=e.r(991915)(Object.keys,Object)},603114,(e,t,i)=>{var r=e.r(570795),n=e.r(642918),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return n(e);var t=[];for(var i in Object(e))o.call(e,i)&&"constructor"!=i&&t.push(i);return t}},363883,(e,t,i)=>{var r=e.r(423748),n=e.r(791606);t.exports=function(e){if(!n(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},656921,(e,t,i)=>{t.exports=e.r(818408)["__core-js_shared__"]},763803,(e,t,i)=>{var r,n=e.r(656921),o=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!o&&o in e}},395331,(e,t,i)=>{var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},732150,(e,t,i)=>{var r=e.r(363883),n=e.r(763803),o=e.r(791606),s=e.r(395331),a=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,d=l.hasOwnProperty,c=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!o(e)||n(e))&&(r(e)?c:a).test(s(e))}},861686,(e,t,i)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},622280,(e,t,i)=>{var r=e.r(732150),n=e.r(861686);t.exports=function(e,t){var i=n(e,t);return r(i)?i:void 0}},531751,(e,t,i)=>{t.exports=e.r(622280)(e.r(818408),"DataView")},74136,(e,t,i)=>{t.exports=e.r(622280)(e.r(818408),"Map")},31337,(e,t,i)=>{t.exports=e.r(622280)(e.r(818408),"Promise")},511524,(e,t,i)=>{t.exports=e.r(622280)(e.r(818408),"Set")},115942,(e,t,i)=>{t.exports=e.r(622280)(e.r(818408),"WeakMap")},626568,(e,t,i)=>{var r=e.r(531751),n=e.r(74136),o=e.r(31337),s=e.r(511524),a=e.r(115942),l=e.r(423748),u=e.r(395331),d="[object Map]",c="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",g=u(r),m=u(n),v=u(o),y=u(s),b=u(a),w=l;(r&&w(new r(new ArrayBuffer(1)))!=f||n&&w(new n)!=d||o&&w(o.resolve())!=c||s&&w(new s)!=h||a&&w(new a)!=p)&&(w=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,r=i?u(i):"";if(r)switch(r){case g:return f;case m:return d;case v:return c;case y:return h;case b:return p}return t}),t.exports=w},648313,(e,t,i)=>{var r=e.r(423748),n=e.r(819674);t.exports=function(e){return n(e)&&"[object Arguments]"==r(e)}},417288,(e,t,i)=>{var r=e.r(648313),n=e.r(819674),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable;t.exports=r(function(){return arguments}())?r:function(e){return n(e)&&s.call(e,"callee")&&!a.call(e,"callee")}},272098,(e,t,i)=>{t.exports=Array.isArray},145373,(e,t,i)=>{t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},707850,(e,t,i)=>{var r=e.r(363883),n=e.r(145373);t.exports=function(e){return null!=e&&n(e.length)&&!r(e)}},124019,(e,t,i)=>{t.exports=function(){return!1}},385370,(e,t,i)=>{var r=e.r(818408),n=e.r(124019),o=i&&!i.nodeType&&i,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||n},719575,(e,t,i)=>{var r=e.r(423748),n=e.r(145373),o=e.r(819674),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(e){return o(e)&&n(e.length)&&!!s[r(e)]}},632900,(e,t,i)=>{t.exports=function(e){return function(t){return e(t)}}},845361,(e,t,i)=>{var r=e.r(472668),n=i&&!i.nodeType&&i,o=n&&t&&!t.nodeType&&t,s=o&&o.exports===n&&r.process;t.exports=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return s&&s.binding&&s.binding("util")}catch(e){}}()},713376,(e,t,i)=>{var r=e.r(719575),n=e.r(632900),o=e.r(845361),s=o&&o.isTypedArray;t.exports=s?n(s):r},820686,(e,t,i)=>{var r=e.r(603114),n=e.r(626568),o=e.r(417288),s=e.r(272098),a=e.r(707850),l=e.r(385370),u=e.r(570795),d=e.r(713376),c=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||o(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var i in e)if(c.call(e,i))return!1;return!0}},65089,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(76130),n=e.i(468836),o=e.i(11321),s=e.i(772510),a=e.i(845209),l=e.i(610985),u=e.i(73371),d=e.i(939338),c=e.i(336277),h=e.i(324557),p=e.i(328028),f=e.i(718292),g=e.i(315830),m=e.i(210721),v=e.i(621671),y=e.i(197068),b=e.i(427938),w=e.i(230902),C=e.i(868422),x=e.i(511518),S=e.i(487122),k=e.i(516467);function R(e,t){let i,r,n=()=>(0,S.constructFrom)(t?.in,NaN),o=t?.additionalDigits??2,s=function(e){let t,i={},r=e.split(E);if(r.length>2)return i;if(/:/.test(r[0])?t=r[0]:(i.date=r[0],t=r[1],P.test(i.date)&&(i.date=e.split(P)[0],t=e.substr(i.date.length,e.length))),t){let e=M.exec(t);e?(i.time=t.replace(e[1],""),i.timezone=e[1]):i.time=t}return i}(e);if(s.date){let e=function(e,t){let i=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(i);if(!r)return{year:NaN,restDateString:""};let n=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?n:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(s.date,o);i=function(e,t){var i,r,n,o,s,a,l,u,d,c;if(null===t)return new Date(NaN);let h=e.match(D);if(!h)return new Date(NaN);let p=!!h[4],f=_(h[1]),g=_(h[2])-1,m=_(h[3]),v=_(h[4]),y=_(h[5])-1;if(p){let e,a;return(i=v,r=y,i>=1&&i<=53&&r>=0&&r<=6)?(n=t,o=v,s=y,(e=new Date(0)).setUTCFullYear(n,0,4),a=e.getUTCDay()||7,e.setUTCDate(e.getUTCDate()+((o-1)*7+s+1-a)),e):new Date(NaN)}{let e=new Date(0);return(a=t,l=g,u=m,l>=0&&l<=11&&u>=1&&u<=(F[l]||(I(a)?29:28))&&(d=t,(c=f)>=1&&c<=(I(d)?366:365)))?(e.setUTCFullYear(t,g,Math.max(f,m)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!i||isNaN(+i))return n();let a=+i,l=0;if(s.time&&isNaN(l=function(e){var t,i,r;let n=e.match(T);if(!n)return NaN;let o=A(n[1]),s=A(n[2]),a=A(n[3]);return(t=o,i=s,r=a,24===t?0===i&&0===r:r>=0&&r<60&&i>=0&&i<60&&t>=0&&t<25)?o*x.millisecondsInHour+s*x.millisecondsInMinute+1e3*a:NaN}(s.time)))return n();if(s.timezone){if(isNaN(r=function(e){var t;if("Z"===e)return 0;let i=e.match(O);if(!i)return 0;let r="+"===i[1]?-1:1,n=parseInt(i[2]),o=i[3]&&parseInt(i[3])||0;return(t=o)>=0&&t<=59?r*(n*x.millisecondsInHour+o*x.millisecondsInMinute):NaN}(s.timezone)))return n()}else{let e=new Date(a+l),i=(0,k.toDate)(0,t?.in);return i.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),i.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),i}return(0,k.toDate)(a+l+r,t?.in)}let E=/[T ]/,P=/[Z ]/i,M=/([Z+-].*)$/,D=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,T=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,O=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _(e){return e?parseInt(e):1}function A(e){return e&&parseFloat(e.replace(",","."))||0}let F=[31,null,31,30,31,30,31,31,30,31,30,31];function I(e){return e%400==0||e%4==0&&e%100!=0}var L=e.i(820686),N=e.i(187725),B=e.i(603338),V=e.i(901407),H=e.i(203158),z=e.i(916955),j=e.i(272064);function G(e){let t=R(e);return(0,w.format)(t,"yyyy-MM-dd'T'HH:mm:ss")}function W(e){let t=R(e);return(0,C.formatDistance)(t,new Date,{addSuffix:!0})}function U(e){let t=new Set,i=new Set;if(e?.nodes)for(let r of Object.values(e.nodes))r.data.data.base?.schema&&t.add(r.data.data.base.schema),r.data.data.current?.schema&&i.add(r.data.data.current.schema);return[t,i]}function $(e){return Object.values(e).every(e=>null===e)?[(0,t.jsx)(i.default,{sx:{ml:"10px"},children:"No information"},"no info")]:Object.entries(e).filter(([e,t])=>"url"!==e&&null!=t).map(([e,i])=>(0,t.jsxs)("li",{style:{marginLeft:"10px"},children:[e,": ",i]},e))}function q(){let{envInfo:e,reviewMode:w,lineageGraph:C}=(0,z.useLineageGraphContext)(),[x,S]=(0,N.useState)(!1),k=e?.git,R=e?.pullRequest,E={...k,...R},P=e?.dbt?.base,M=e?.dbt?.current,D=P?.generated_at?G(P.generated_at):"",T=M?.generated_at?G(M.generated_at):"",O="",_="";P&&(O=P.generated_at?W(P.generated_at):""),M&&(_=M.generated_at?W(M.generated_at):"");let[A,F]=U(C),I=(0,N.useRef)(!1);(0,N.useEffect)(()=>{if(!I.current&&e){let t,i,r,n,o;I.current=!0;let s=(t=e?.git,i=e?.pullRequest,r=e?.dbt?.base,n=e?.dbt?.current,o={review_mode:w||!1,adapter_type:e?.adapterType||null,has_git_info:!(0,L.default)(t),has_pr_info:!(0,L.default)(i)},e?.adapterType==="dbt"&&(o.base={schema_count:A.size,dbt_version:r?.dbt_version||null,timestamp:r?.generated_at||null},o.current={schema_count:F.size,dbt_version:n?.dbt_version||null,timestamp:n?.generated_at||null},o.schemas_match=A.size===F.size&&Array.from(A).every(e=>F.has(e))),e?.adapterType==="sqlmesh"&&(o.base={has_env:!!e.sqlmesh?.base_env},o.current={has_env:!!e.sqlmesh?.current_env}),o);(0,H.trackEnvironmentConfig)(s)}},[e,w,A,F]);let q=()=>S(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.default,{title:"Environment Info",placement:"bottom-end",children:(0,t.jsxs)("div",{className:"flex items-center hover:cursor-pointer hover:text-black",onClick:()=>S(!0),children:[(0,t.jsxs)("div",{className:"hidden text-sm lg:flex lg:flex-col",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(b.default,{component:"span",sx:{color:"warning.main"},className:"no-track-pii-safe max-w-32 truncate",children:Array.from(A).join(", ")})," ","(",O,")"]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(b.default,{component:"span",sx:{color:"primary.main"},className:"no-track-pii-safe max-w-32 truncate",children:Array.from(F).join(", ")})," ","(",_,")"]})]}),(0,t.jsx)(u.default,{size:"small","aria-label":"Environment Info",children:(0,t.jsx)(i.default,{component:j.IconInfo,sx:{fontSize:16,verticalAlign:"middle"}})})]})}),(0,t.jsxs)(n.default,{open:x,onClose:q,maxWidth:"sm",fullWidth:!0,children:[(0,t.jsxs)(a.default,{sx:{display:"flex",alignItems:"center"},children:["Environment Information",(0,t.jsx)(i.default,{sx:{flexGrow:1}}),(0,t.jsx)(u.default,{size:"small",onClick:q,children:(0,t.jsx)(B.IoClose,{})})]}),(0,t.jsx)(s.default,{children:(0,t.jsxs)(c.default,{direction:"column",spacing:1,children:[w?(0,t.jsxs)(c.default,{direction:"column",spacing:.5,children:[(0,t.jsx)(b.default,{variant:"h6",sx:{fontSize:"1rem"},children:"Review Information"}),(0,t.jsxs)("ul",{style:{margin:0,paddingLeft:"20px"},children:[E.url&&(0,t.jsxs)("li",{style:{marginLeft:"10px"},children:["url:"," ",(0,t.jsxs)(d.default,{href:E.url,target:"_blank",sx:{color:"primary.main"},children:[E.url," ",(0,t.jsx)(V.LuExternalLink,{})]})]}),!(0,L.default)(E)&&$(E)]})]}):(0,t.jsxs)(c.default,{direction:"column",spacing:.5,children:[(0,t.jsx)(b.default,{variant:"h6",sx:{fontSize:"1rem"},children:"Dev Information"}),(0,t.jsx)("ul",{style:{margin:0,paddingLeft:"20px"},children:k&&$(k)})]}),(0,t.jsx)(l.default,{}),e?.adapterType==="dbt"&&(0,t.jsxs)(c.default,{direction:"column",spacing:.5,children:[(0,t.jsx)(b.default,{variant:"h6",sx:{fontSize:"1rem"},children:"DBT"}),(0,t.jsx)(g.default,{sx:{border:1,borderColor:"divider",maxHeight:"30rem"},children:(0,t.jsxs)(h.default,{size:"small",stickyHeader:!0,children:[(0,t.jsx)(m.default,{children:(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{}),(0,t.jsx)(f.default,{children:"base"}),(0,t.jsx)(f.default,{children:"current"})]})}),(0,t.jsxs)(p.default,{children:[(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{children:"schema"}),(0,t.jsx)(f.default,{className:"no-track-pii-safe",children:Array.from(A).map(e=>(0,t.jsx)(y.default,{title:e,placement:"bottom",children:(0,t.jsx)("div",{className:"max-w-72 truncate",children:e})},e))}),(0,t.jsx)(f.default,{className:"no-track-pii-safe",children:Array.from(F).map(e=>(0,t.jsx)(y.default,{title:e,placement:"bottom",children:(0,t.jsx)("div",{className:"max-w-72 truncate",children:e})},e))})]}),(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{children:"version"}),(0,t.jsx)(f.default,{children:P?.dbt_version}),(0,t.jsx)(f.default,{children:M?.dbt_version})]}),(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{children:"timestamp"}),(0,t.jsx)(f.default,{children:D}),(0,t.jsx)(f.default,{children:T})]})]})]})})]}),e?.adapterType==="sqlmesh"&&(0,t.jsxs)(c.default,{direction:"column",spacing:.5,children:[(0,t.jsx)(b.default,{variant:"h6",sx:{fontSize:"1rem"},children:"SQLMesh"}),(0,t.jsx)(g.default,{sx:{border:1,borderColor:"divider",maxHeight:"30rem"},children:(0,t.jsxs)(h.default,{stickyHeader:!0,children:[(0,t.jsx)(m.default,{children:(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{}),(0,t.jsx)(f.default,{children:"base"}),(0,t.jsx)(f.default,{children:"current"})]})}),(0,t.jsx)(p.default,{children:(0,t.jsxs)(v.default,{children:[(0,t.jsx)(f.default,{children:"Environment"}),(0,t.jsx)(f.default,{className:"no-track-pii-safe",children:e.sqlmesh?.base_env}),(0,t.jsx)(f.default,{className:"no-track-pii-safe",children:e.sqlmesh?.current_env})]})})]})})]})]})}),(0,t.jsx)(o.default,{children:(0,t.jsx)(r.default,{color:"iochmara",onClick:q,children:"Close"})})]})]})}e.s(["EnvInfo",()=>q,"extractSchemas",()=>U,"formatTimeToNow",()=>W,"formatTimestamp",()=>G],65089)},138848,e=>{"use strict";var t=e.i(19483),i=e.i(324066),r=e.i(76130),n=e.i(336277),o=e.i(427938),s=e.i(187725),a=e.i(65086),l=e.i(65089);e.i(909139);var u=e.i(750060),d=e.i(916955),c=e.i(912007);function h({value:e,onChange:d,onRun:h,onRunBase:p,onRunDiff:f,label:g,CustomEditor:m,options:v={},manifestData:y,schemas:b,...w}){let{featureToggles:C}=(0,c.useRecceInstanceContext)(),x="";y&&(x=y.generated_at?(0,l.formatTimeToNow)(y.generated_at):"");let S=(0,s.useMemo)(()=>{let e=[];return h&&e.push({key:"Mod-Enter",run:()=>(h(),!0)}),p&&e.push({key:"Alt-Enter",run:()=>(p(),!0)}),f&&e.push({key:"Mod-Shift-Enter",run:()=>(f(),!0)}),e},[h,p,f]);return(0,t.jsxs)(t.Fragment,{children:[(g??h??p)&&(0,t.jsxs)(n.default,{direction:"row",sx:{bgcolor:"#EDF2F880",height:"40px",minHeight:"40px",fontSize:"14px",alignItems:"center",m:0,p:"0px 16px",flex:"0 0 40px"},children:[(0,t.jsx)(o.default,{component:"strong",sx:{fontWeight:"bold"},className:"no-track-pii-safe",children:g?g.toUpperCase():""}),y&&(0,t.jsxs)("span",{className:"ml-1",children:["(",b&&(0,t.jsxs)("span",{className:"no-track-pii-safe",children:[b,", "]}),(0,t.jsx)("span",{children:x}),")"]}),(0,t.jsx)(i.default,{sx:{flexGrow:1}}),(h??p)&&(0,t.jsx)(r.default,{size:"xsmall",variant:"outlined",onClick:h??p,sx:{bgcolor:"white",p:"6px 12px"},disabled:C.disableDatabaseQuery,startIcon:(0,t.jsx)(a.FaPlay,{}),children:"Run Query"})]}),m??(0,t.jsx)(u.CodeEditor,{value:e,onChange:e=>{d&&d(e)},language:"sql",readOnly:v.readOnly??!1,lineNumbers:"off"!==v.lineNumbers,wordWrap:"off"!==v.wordWrap,fontSize:v.fontSize??16,keyBindings:S,className:"no-track-pii-safe max-h-dvh h-full"})]})}function p({value:e,baseValue:i,onChange:r,onChangeBase:o,onRun:s,onRunBase:a,onRunDiff:u,options:c={},labels:p,SetupGuide:f,...g}){let m,v,y=p?p[0]:"Base",b=p?p[1]:"Current",{envInfo:w,lineageGraph:C}=(0,d.useLineageGraphContext)();w?.dbt?.base&&w.dbt.current&&(m=w.dbt.base,v=w.dbt.current);let[x,S]=(0,l.extractSchemas)(C);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.default,{direction:"row",sx:{height:"100%",gap:0},children:[(0,t.jsx)(n.default,{sx:{height:"100%",width:"50%",gap:0,borderRight:"1px solid #D4DBE4"},children:(0,t.jsx)(h,{label:y,value:i??"",onChange:o,onRunBase:a,options:c,CustomEditor:f,manifestData:m??void 0,schemas:Array.from(x).join(", "),...g})}),(0,t.jsx)(n.default,{sx:{height:"100%",width:"50%",gap:0},children:(0,t.jsx)(h,{label:b,value:e,onChange:r,onRun:s,options:c,manifestData:v??void 0,schemas:Array.from(S).join(", "),...g})})]})})}e.s(["DualSqlEditor",()=>p,"default",0,h])}]);