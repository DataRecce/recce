(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{85658:function(e,n,t){"use strict";t.d(n,{W:function(){return u},o:function(){return s}});var r=t(26415);t(50758);var l=t(21645),i=t(54844),o=t(17451),a=t(89533);let s=(0,i.G)((e,n)=>{let{...t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.ZP,{ref:n,className:t.className?t.className+"no-track-pii-safe":"no-track-pii-safe",rowClass:()=>"no-track-pii-safe",...t})})});function u(e){let{emptyMessage:n}=e;return(0,r.jsx)(o.k,{h:"35px",alignItems:"center",justifyContent:"center",bg:"gray.100",style:{textAlign:"center",gridColumn:"1/-1"},children:(0,r.jsxs)(a.x,{fontWeight:"600",children:[" ",null!=n?n:"No rows"]})})}},31294:function(e,n,t){"use strict";t.d(n,{d:function(){return m},r:function(){return h}});var r=t(26415),l=t(61737),i=t(33843),o=t(26747),a=t(40782),s=t(78933);function u(e){let n=e.trim().toUpperCase();return!!["CHAR","VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT","NCHAR","NVARCHAR","VARCHAR2","NVARCHAR2","CLOB","NCLOB","VARCHAR(MAX)","XML","JSON"].includes(n)||/^(VARCHAR|NVARCHAR|VARCHAR2|NVARCHAR2|CHAR|NCHAR)\(\d+\)$/.test(n)}function d(e){return["BOOLEAN","TINYINT(1)","BIT","NUMBER(1)","BOOL"].includes(e.toUpperCase())}function c(e){return["DATE","DATETIME","TIMESTAMP","TIME","YEAR","DATETIME2","SMALLDATETIME","DATETIMEOFFSET","INTERVAL","TIMESTAMPTZ","TIMETZ","TIMESTAMP WITH TIME ZONE","TIMESTAMP WITH LOCAL TIME ZONE","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP_TZ"].includes(e.toUpperCase())}function m(e){return!u(e)&&!d(e)&&!c(e)}function h(e){let{params:n,onParamsChanged:t,setIsReadyToExecute:m}=e,{columns:h,isLoading:f,error:p}=(0,s.ZP)(n.model),v=h.filter(e=>!u(e.type)&&!d(e.type)&&!c(e.type));return f?(0,r.jsx)(l.x,{children:"Loading..."}):0===h.length||p?(0,r.jsx)(l.x,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,r.jsx)(l.x,{m:"16px",children:(0,r.jsxs)(i.NI,{children:[(0,r.jsx)(o.l,{children:"Pick a column to show Histogram Diff"}),(0,r.jsx)(a.P,{placeholder:0!==v.length?"Select column":"No numeric column is available",isDisabled:0===v.length,value:n.column_name,onChange:e=>{var r,l;let i=e.target.value;m(!!i);let o=null!==(l=null===(r=v.find(e=>e.name===i))||void 0===r?void 0:r.type)&&void 0!==l?l:"";t({...n,column_name:i,column_type:o})},children:v.map(e=>(0,r.jsxs)("option",{value:e.name,children:[e.name," : ",e.type]},e.name))})]})})}},64315:function(e,n,t){"use strict";t.d(n,{JK:function(){return l},Vs:function(){return o},aU:function(){return u},b8:function(){return i},kx:function(){return a},yl:function(){return s}});var r=t(26415);let l=e=>(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1479_25070)",children:(0,r.jsx)("path",{d:"M15.625 0.25H14.759C14.5484 0.25 14.3791 0.423375 14.3841 0.633937L14.4575 3.71441C13.0691 1.62634 10.6955 0.25 8 0.25C4.21291 0.25 1.06041 2.96638 0.38425 6.557C0.340875 6.78728 0.518875 7 0.753219 7H1.64622C1.82353 7 1.97566 6.87556 2.013 6.70222C2.60753 3.9415 5.05991 1.875 8 1.875C10.4858 1.875 12.6232 3.35256 13.5836 5.47819L9.63394 5.38416C9.42341 5.37916 9.25 5.54844 9.25 5.75906V6.625C9.25 6.83209 9.41791 7 9.625 7H15.625C15.8321 7 16 6.83209 16 6.625V0.625C16 0.417906 15.8321 0.25 15.625 0.25ZM15.2468 9H14.3538C14.1765 9 14.0243 9.12444 13.987 9.29778C13.3925 12.0585 10.9401 14.125 8 14.125C5.51419 14.125 3.37681 12.6474 2.41637 10.5218L6.36606 10.6158C6.57659 10.6208 6.75 10.4516 6.75 10.2409V9.375C6.75 9.16791 6.58209 9 6.375 9H0.375C0.167906 9 0 9.16791 0 9.375V15.375C0 15.5821 0.167906 15.75 0.375 15.75H1.24097C1.45156 15.75 1.62088 15.5766 1.61588 15.3661L1.54253 12.2856C2.93087 14.3737 5.3045 15.75 8 15.75C11.7871 15.75 14.9396 13.0336 15.6158 9.443C15.6591 9.21272 15.4811 9 15.2468 9Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1479_25070",children:(0,r.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}),i=e=>(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1479_25102)",children:(0,r.jsx)("path",{d:"M-1.88399 8.72062L0.358816 6.46094C0.594752 6.22344 1.00006 6.39031 1.00006 6.725V8.2525H4.00005V4.12438C4.00005 3.7275 4.16161 3.34313 4.44286 3.06219L7.06441 0.440625C7.34566 0.159375 7.72691 0 8.12347 0H14.5003C15.3281 0.003125 16 0.675 16 1.50281V14.5003C16 15.3281 15.3281 16 14.5003 16H5.50223C4.67411 16 4.00005 15.3281 4.00005 14.5003V11.2522H5.50005V14.5003H14.5003V1.50281H9.50128V4.75219C9.50128 5.16781 9.1669 5.50187 8.75128 5.50187H5.50005V8.25219H10.625C10.8322 8.25219 11 8.42 11 8.62719V9.37719C11 9.58438 10.8322 9.75219 10.625 9.75219H1.00006V11.2797C1.00006 11.6144 0.594752 11.7813 0.358816 11.5438L-1.88399 9.28406C-2.03867 9.12813 -2.03867 8.87656 -1.88399 8.72062ZM8.0016 4.00219V1.62469L5.62379 4.00219H8.0016Z",fill:"currentColor"})}),(0,r.jsx)("g",{clipPath:"url(#clip1_1479_25102)",children:(0,r.jsx)("path",{d:"M0.103056 8.72062L2.09667 6.46094C2.30639 6.22344 2.66667 6.39031 2.66667 6.725V8.2525H5.33333V4.12438C5.33333 3.7275 5.47694 3.34313 5.72694 3.06219L8.05722 0.440625C8.30722 0.159375 8.64611 0 8.99861 0H14.6669C15.4028 0.003125 16 0.675 16 1.50281V14.5003C16 15.3281 15.4028 16 14.6669 16H6.66861C5.9325 16 5.33333 15.3281 5.33333 14.5003V11.2522H6.66667V14.5003H14.6669V1.50281H10.2233V4.75219C10.2233 5.16781 9.92611 5.50187 9.55667 5.50187H6.66667V8.25219H11.2222C11.4064 8.25219 11.5556 8.42 11.5556 8.62719V9.37719C11.5556 9.58438 11.4064 9.75219 11.2222 9.75219H2.66667V11.2797C2.66667 11.6144 2.30639 11.7813 2.09667 11.5438L0.103056 9.28406C-0.0344448 9.12813 -0.0344448 8.87656 0.103056 8.72062ZM8.89028 4.00219V1.62469L6.77666 4.00219H8.89028Z",fill:"currentColor"})}),(0,r.jsxs)("defs",{children:[(0,r.jsx)("clipPath",{id:"clip0_1479_25102",children:(0,r.jsx)("rect",{width:"13",height:"16",fill:"white",transform:"matrix(-1 0 0 1 16 0)"})}),(0,r.jsx)("clipPath",{id:"clip1_1479_25102",children:(0,r.jsx)("rect",{width:"3",height:"16",fill:"white"})})]})]}),o=e=>(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("g",{clipPath:"url(#clip0_1426_8619)",children:(0,r.jsx)("path",{d:"M15.5572 3.06188L12.9356 0.440625C12.6544 0.159375 12.2731 0 11.8766 0H5.49969C4.67188 0.003125 4 0.675 4 1.50281V8.25219H0.375C0.167812 8.25219 0 8.42 0 8.62719V9.37719C0 9.58438 0.167812 9.75219 0.375 9.75219H9V11.2797C9 11.6144 9.40531 11.7812 9.64125 11.5437L11.8841 9.28406C12.0388 9.12813 12.0388 8.87656 11.8841 8.72062L9.64125 6.46094C9.40531 6.22344 9 6.39031 9 6.725V8.2525H5.49969V1.50281H10.4987V4.75219C10.4987 5.16781 10.8331 5.50187 11.2487 5.50187H14.5V14.5003H5.49969V11.2522H4V14.5003C4 15.3281 4.67188 16 5.49969 16H14.4978C15.3259 16 16 15.3281 16 14.5003V4.12406C16 3.7275 15.8384 3.34313 15.5572 3.06188ZM11.9984 4.00219V1.62469L14.3763 4.00219H11.9984Z",fill:"black"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1426_8619",children:(0,r.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}),a=e=>(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M14.5607 4.06066L11.9393 1.43934C11.658 1.15804 11.2765 1 10.8787 1H2.5C1.67156 1 1 1.67156 1 2.5V13.5C1 14.3284 1.67156 15 2.5 15H13.5C14.3284 15 15 14.3284 15 13.5V5.12131C15 4.72349 14.842 4.34196 14.5607 4.06066ZM9.5 2.5V5H5.5V2.5H9.5ZM13.3125 13.5H2.6875C2.63777 13.5 2.59008 13.4802 2.55492 13.4451C2.51975 13.4099 2.5 13.3622 2.5 13.3125V2.6875C2.5 2.63777 2.51975 2.59008 2.55492 2.55492C2.59008 2.51975 2.63777 2.5 2.6875 2.5H4V5.75C4 6.16422 4.33578 6.5 4.75 6.5H10.25C10.6642 6.5 11 6.16422 11 5.75V2.62131L13.4451 5.06641C13.4625 5.08382 13.4763 5.10449 13.4857 5.12724C13.4952 5.14999 13.5 5.17438 13.5 5.199V13.3125C13.5 13.3622 13.4802 13.4099 13.4451 13.4451C13.4099 13.4802 13.3622 13.5 13.3125 13.5ZM8 7.25C6.48366 7.25 5.25 8.48366 5.25 10C5.25 11.5163 6.48366 12.75 8 12.75C9.51634 12.75 10.75 11.5163 10.75 10C10.75 8.48366 9.51634 7.25 8 7.25ZM8 11.25C7.31075 11.25 6.75 10.6892 6.75 10C6.75 9.31075 7.31075 8.75 8 8.75C8.68925 8.75 9.25 9.31075 9.25 10C9.25 10.6892 8.68925 11.25 8 11.25Z",fill:"currentColor"})}),s=e=>(0,r.jsx)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M15.9143 1.75812L14.7422 0.585938C14.3515 0.195312 13.8397 0 13.3278 0C12.8159 0 12.304 0.195312 11.9137 0.585625L9.58593 2.91344L8.5 3.99938L0.901592 11.5975L0.504719 15.1669C0.454719 15.6163 0.80878 16 1.24847 16C1.27628 16 1.3044 15.9984 1.33253 15.9953L4.89939 15.6012L12.5006 8L13.5862 6.91437L15.914 4.58656C16.6953 3.80531 16.6953 2.53906 15.9143 1.75812ZM4.21095 14.1684L2.09909 14.4016L2.3344 12.2863L9.56062 5.06L10.53 4.09062L12.4094 5.97L11.44 6.93937L4.21095 14.1684ZM14.8534 3.52562L13.4697 4.90938L11.5906 3.03L12.9744 1.64625C13.1019 1.51875 13.2506 1.49969 13.3278 1.49969C13.405 1.49969 13.554 1.51875 13.6812 1.64625L14.8534 2.81844C15.0484 3.01375 15.0484 3.33094 14.8534 3.52562Z",fill:"currentColor"})}),u=e=>(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M7.26326 6.5462H8.71794V12.3642H7.26326V6.5462ZM7.9906 3.1102C7.43278 3.1102 6.97888 3.5641 6.97888 4.12192C6.97888 4.67974 7.43278 5.13364 7.9906 5.13364C8.54842 5.13364 9.00232 4.67974 9.00232 4.12192C9.00232 3.5641 8.54842 3.1102 7.9906 3.1102ZM16 8C16 12.411 12.411 16 8 16C3.589 16 0 12.411 0 8C0 3.589 3.589 0 8 0C12.411 0 16 3.589 16 8ZM14.5453 8C14.5453 4.3906 11.6093 1.4546 7.99992 1.4546C4.39052 1.4546 1.45452 4.3914 1.45452 8.0006C1.45452 11.6098 4.39052 14.546 7.99992 14.546C11.6093 14.546 14.5453 11.6092 14.5453 8.0006V8Z",fill:"currentColor"})})},54651:function(e,n,t){"use strict";function r(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=new Set,l={},i=(e,t)=>{if(!(t<0)&&(null==l[e]||!(l[e]>=t))){for(let r of(l[e]=t,n(e)))i(r,t-1);r.add(e)}};for(let n of e)i(n,t);return r}function l(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let r=new Set;return n.forEach(e=>{e.forEach(e=>{r.add(e)})}),r}t.d(n,{E$:function(){return r},G0:function(){return l}})},61655:function(e,n,t){"use strict";t.d(n,{O$:function(){return a},WU:function(){return s},_e:function(){return d},bK:function(){return m},cr:function(){return u},mF:function(){return c}});var r=t(32889),l=t(54651),i=t(55234),o=t.n(i);let a=20;function s(e,n,t){var r,l,i,o,a,s,u,d;let c={},m={},h=(e,n)=>({id:e,name:e,data:{},from:n,parents:{},children:{}});for(let[n,t]of Object.entries(e.nodes))c[n]=h(n,"base"),t&&(c[n].data.base=t,c[n].name=t.name,c[n].resourceType=t.resource_type,c[n].packageName=t.package_name);for(let[e,t]of Object.entries(n.nodes))c[e]?c[e].from="both":c[e]=h(e,"current"),t&&(c[e].data.current=n.nodes[e],c[e].name=t.name,c[e].resourceType=t.resource_type,c[e].packageName=t.package_name);for(let[n,t]of Object.entries(e.parent_map))for(let e of t){let t=c[n],r=c[e],l="".concat(e,"_").concat(n);if(!t||!r)continue;m[l]={id:l,from:"base",parent:r,child:t};let i=m[l];t.parents[e]=i,r.children[n]=i}for(let[e,t]of Object.entries(n.parent_map))for(let n of t){let t=c[e],r=c[n],l="".concat(n,"_").concat(e);if(!t||!r)continue;m[l]?m[l].from="both":m[l]={id:l,from:"current",parent:r,child:t};let i=m[l];t.parents[n]=i,r.children[e]=i}let f=[];for(let[e,n]of Object.entries(c)){let a=null==t?void 0:t[e];if(a)n.changeStatus=a.change_status,a.change&&(n.change={category:a.change.category,columns:a.change.columns}),f.push(e);else if("base"===n.from)n.changeStatus="removed",f.push(n.id);else if("current"===n.from)n.changeStatus="added",f.push(n.id);else{let e=null===(l=n.data.base)||void 0===l?void 0:null===(r=l.checksum)||void 0===r?void 0:r.checksum,t=null===(o=n.data.current)||void 0===o?void 0:null===(i=o.checksum)||void 0===i?void 0:i.checksum;e&&t&&e!==t&&(n.changeStatus="modified",f.push(n.id))}}for(let[e,n]of Object.entries(m))"base"===n.from?n.changeStatus="removed":"current"===n.from&&(n.changeStatus="added");return{nodes:c,edges:m,modifiedSet:f,manifestMetadata:{base:null!==(a=e.manifest_metadata)&&void 0!==a?a:void 0,current:null!==(s=n.manifest_metadata)&&void 0!==s?s:void 0},catalogMetadata:{base:null!==(u=e.catalog_metadata)&&void 0!==u?u:void 0,current:null!==(d=n.catalog_metadata)&&void 0!==d?d:void 0}}}function u(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,l.E$)(n,n=>void 0===e.nodes[n]?[]:Object.keys(e.nodes[n].parents),t)}function d(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,l.E$)(n,n=>void 0===e.nodes[n]?[]:Object.keys(e.nodes[n].children),t)}function c(e,n){let t=[],l=[],{selectedNodes:i,cll:o}=null!=n?n:{},s={};function u(e){return"base"===e?0:"current"===e?2:1}function d(e,n){let t=u(e.from),r=u(n.from);return t<r?-1:t>r?1:0}let c=void 0!==i?new Set(i):void 0;for(let n of Object.values(e.nodes).sort(d)){if(c&&!c.has(n.id))continue;let e=new Set,i=0;if(o){var h,f,p,v,x,g,y;for(let e of null!==(p=null==o?void 0:null===(h=o.current)||void 0===h?void 0:h.parent_map[n.id])&&void 0!==p?p:new Set){let t=n.id;l.push({id:"m2c_".concat(e,"_").concat(t),source:e,target:t,style:{zIndex:9999}})}for(let s of Object.keys(null!==(v=null===(f=n.data.current)||void 0===f?void 0:f.columns)&&void 0!==v?v:{})){let u="".concat(n.id,"_").concat(s),d=null==o?void 0:null===(x=o.current)||void 0===x?void 0:x.columns[u],c=null!==(y=null==o?void 0:null===(g=o.current)||void 0===g?void 0:g.parent_map[u])&&void 0!==y?y:new Set;if(null!=d){for(let e of(t.push({id:u,position:{x:10,y:70+i*a},parentId:n.id,extent:"parent",draggable:!1,className:"no-track-pii-safe",data:{node:n,column:d.name,type:d.type,transformationType:d.transformation_type,changeStatus:d.change_status},style:{zIndex:9999},type:"customColumnNode",targetPosition:r.Ly.Left,sourcePosition:r.Ly.Right}),c))l.push({id:"".concat(e,"_").concat(u),source:e,target:u,style:{zIndex:9999}});i++,e.add(d.name)}}}s[n.id]=e;let u=60;i>0&&(u+=20+i*a),t.push({id:n.id,position:{x:0,y:0},width:300,height:u,className:"no-track-pii-safe",data:{...n},type:"customNode",targetPosition:r.Ly.Left,sourcePosition:r.Ly.Right})}for(let n of Object.values(e.edges).sort(d))(!c||c.has(n.parent.id)&&c.has(n.child.id))&&l.push({id:n.id,type:"customEdge",source:n.parent.id,target:n.child.id,data:n});return m(t,l),[t,l,s]}let m=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LR",r=new(o()).graphlib.Graph;r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:t,ranksep:50,nodesep:30}),e.forEach(e=>{"customNode"===e.type&&r.setNode(e.id,{width:e.width,height:e.height})}),n.forEach(e=>{r.setEdge(e.source,e.target)}),o().layout(r),e.forEach(e=>{var n,t;if("customNode"!==e.type)return;let l=null!==(n=e.width)&&void 0!==n?n:300,i=null!==(t=e.height)&&void 0!==t?t:60,o=r.node(e.id);return e.position={x:o.x-l/2,y:o.y-i/2},e})}},55120:function(e,n,t){"use strict";function r(e,n){if(e<n){let t=(n-e)/e*100;return"+".concat(t>=.1?t.toFixed(1):" <0.1 ","%")}if(!(e>n))return"0 %";{let t=(e-n)/e*100;return"-".concat(t>=.1?t.toFixed(1):" <0.1 ","%")}}t.d(n,{T:function(){return r}})},72752:function(e,n,t){"use strict";t.d(n,{N:function(){return eG}});var r=t(86532),l=t(31294),i=t(26415),o=t(17451),a=t(84434),s=t(40904),u=t(61737),d=t(54844),c=t(48006),m=t(97804);function h(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",t=arguments.length>2?arguments[2]:void 0;return"number"!=typeof e?e:new Intl.NumberFormat(n,t).format(e)}function f(e){let n=e>0&&e<=.001,t=e<1&&e>=.999,r=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return h(n,"en-US",{style:"percent",minimumFractionDigits:1})};if(n){let e=r(.001);return"<".concat(e)}if(t){let e=r(.999);return">".concat(e)}return r()}function p(e){if("number"!=typeof e)return e;{let n=Math.abs(e),t=n>=.01,r=n>=1e6,l=n>=1e9,i=n>=1e15;if(i||n>=1e12)return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:i?0:2}).format(e/1e12).replace("L","T");if(l||r||n>=1e3){let n={base:l?1e9:r?1e6:1e3,unit:l?"B":r?"M":"K"};return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:1}).format(e/n.base).replace("L",n.unit)}return n>=1?new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e):new Intl.NumberFormat("en-US",{maximumFractionDigits:t?3:2,notation:t||0===n?"standard":"scientific"}).format(e)}}let v="#63B3ED",x="#F6AD55",g="".concat(v,"A5"),y="".concat(x,"A5");function j(e){let{color:n}=e;return(0,i.jsx)(u.x,{display:"inline-block",w:"10px",h:"10px",bgColor:n,mr:"2",borderRadius:"sm"})}function C(e){let{data:n,hideAxis:t=!1,animation:r=!1}=e;c.kL.register(c.ZL,c.RM,c.f$,c.uw,c.Dx,c.De,c.u);let l=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{...t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{title:r,datasets:l,type:i,samples:o=0,binEdges:a}=e,[s,u]=l,d="datetime"===i;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{reverse:!0},title:{display:!0,text:r,font:{size:20}},tooltip:{mode:"index",intersect:!1,callbacks:{title(e){let[{dataIndex:n,datasetIndex:t}]=e,r=_(a,n);return"".concat(d?"Date Range":"string"===i?"Text Length":"Value Range","\n").concat(r)},label(e){let{datasetIndex:n,dataIndex:t,dataset:{label:r}}=e,l=0===n?u.counts:s.counts,i=f(l[t]/o),a=l[t];return"".concat(r,": ").concat(a," (").concat(i,")")}}}},scales:function(e){let{datasets:n,min:t=0,max:r=0,type:l,binEdges:i}=e,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a,s]=n,u=Math.max(...s.counts,...a.counts),d=i.map((e,n)=>_(i,n)).slice(0,-1);return{x:"datetime"===l?{display:!o,type:"timeseries",min:t,max:r,adapters:{date:{}},time:{minUnit:"day"},grid:{display:!1},ticks:{minRotation:30,maxRotation:30,maxTicksLimit:8}}:{display:!o,type:"category",grid:{display:!1},ticks:{callback:(e,n)=>d[n]},stacked:!0},y:{display:!o,type:"linear",max:u,border:{dash:[2,2]},grid:{color:"lightgray"},ticks:{maxTicksLimit:8,callback:function(e,n){return p(e)}},beginAtZero:!0}}}(e,n),...t}}(n,t,{animation:r}),o=function(e){let{datasets:n,type:t,binEdges:r}=e,[l,i]=n,o=b(t,r,"Current",g,i),a=b(t,r,"Base",y,l);return{labels:r.map((e,n)=>_(r,n)).slice(0,-1),datasets:[o,a]}}(n);return(0,i.jsx)(m.kL,{type:"bar",options:l,data:o,plugins:[]})}function b(e,n,t,r,l){let{counts:i=[]}=l;return{label:t,data:"datetime"===e?i.map((e,t)=>({x:n[t],y:e})):i,backgroundColor:r,borderColor:r,hoverBackgroundColor:r,borderWidth:0,categoryPercentage:1,barPercentage:1,xAxisID:"x"}}function _(e,n){let t=e[n],r=e[n+1],l=p(t),i=p(r);return"".concat(l," - ").concat(i)}let w=(0,d.G)((e,n)=>{let{backgroundColor:t="white",blockSize:r,children:l,...o}=e;return(0,i.jsx)(u.x,{ref:n,...o,overflowY:"auto",overflowX:"hidden",children:(0,i.jsx)(u.x,{backgroundColor:t,height:"100%",blockSize:r,children:l})})}),k=(0,d.G)(function(e,n){var t,r,l,d,c,m,h;let{run:f}=e,p=f.params,v=null===(t=f.result)||void 0===t?void 0:t.base,x=null===(r=f.result)||void 0===r?void 0:r.current,g=null===(l=f.result)||void 0===l?void 0:l.min,y=null===(d=f.result)||void 0===d?void 0:d.max,j=null===(c=f.result)||void 0===c?void 0:c.bin_edges;return v&&x?(0,i.jsx)(o.k,{direction:"column",height:"100%",children:(0,i.jsx)(w,{ref:n,height:"100%",children:(0,i.jsxs)(a.U,{children:[(0,i.jsx)(s.L,{}),(0,i.jsx)(u.x,{w:"80%",h:"35vh",m:"4",children:(0,i.jsx)(C,{data:{title:"Model ".concat(p.model,".").concat(p.column_name),type:null!==(h=null===(m=f.params)||void 0===m?void 0:m.column_type)&&void 0!==h?h:"",datasets:[v,x],min:g,max:y,samples:v.total,binEdges:j}})}),(0,i.jsx)(s.L,{})]})})}):(0,i.jsx)("div",{children:"Loading..."})});var S=t(40048),M=t(85658),R=t(97129),E=t(21645),O=t(66908),L=t.n(O);t(10499);var N=t(89438),T=t(73222),A=t(7610),I=t(218),V=t(5206),P=t(8005),H=t(94505),F=t(89533),D=t(39274),z=t(56199),U=t(35786),W=t(94082);let B=e=>{let{value:n,colorScheme:t,grayOut:r,noCopy:l,fontSize:a}=e,{onCopy:s,hasCopied:d}=(0,W.V)(n),[c,m]=(0,R.useState)(!1);return(0,i.jsxs)(o.k,{p:"2px 5px",minWidth:"30px",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",color:"".concat(t,".800"),backgroundColor:"".concat(t,".100"),alignItems:"center",gap:"2px",rounded:"md",fontSize:a,flexShrink:l?"0":"inherit",onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:[(0,i.jsx)(u.x,{overflow:"hidden",textOverflow:"ellipsis",color:r?"gray":"inherit",children:n}),(0,i.jsx)(()=>l||r?(0,i.jsx)(i.Fragment,{}):d?(0,i.jsx)(i.Fragment,{children:"Copied"}):c?(0,i.jsx)(I.h,{"aria-label":"Copy",icon:(0,i.jsx)(U.T,{boxSize:"10px"}),size:"xs",minW:"10px",h:"10px",variant:"unstyled",onClick:s,display:"flex",alignItems:"center",justifyContent:"center"}):(0,i.jsx)(i.Fragment,{}),{})]})};function q(e,n){return[{value:"Show raw value",onClick:()=>{n({[e]:"raw"})}},{value:"Show 2 decimal points",onClick:()=>{n({[e]:2})}},{value:"Show 4 decimal points",onClick:()=>{n({[e]:4})}},{value:"Show 6 decimal points",onClick:()=>{n({[e]:6})}},{value:"Show as percentage",onClick:()=>{n({[e]:"percent"})}}]}function Z(e,n){let t=[];for(let r of n){let n=e.findIndex(e=>e.name===r);if(n<0)throw Error("Column ".concat(r," not found"));t.push(n)}return t}function K(e,n,t){let r={};if(0===n.length)return JSON.stringify({_index:t._index});for(let l of n)r[e[l].name]=t[l];return JSON.stringify(r)}function Q(e){var n,t;let{name:r,columnStatus:l,onPrimaryKeyChange:a,onPinnedColumnsChange:s,columnType:d,onColumnsRenderModeChanged:c,...m}=e,h=null!==(n=m.primaryKeys)&&void 0!==n?n:[],f=null!==(t=m.pinnedColumns)&&void 0!==t?t:[],p=h.includes(r),v=f.includes(r),x=[];return(c&&(x=q(r,c)),"index"===r)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(o.k,{alignItems:"center",gap:"10px",className:"grid-header",children:[p&&(0,i.jsx)(N.J,{as:D.MhP}),(0,i.jsx)(u.x,{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:r}),"added"!==l&&"removed"!==l&&a&&(0,i.jsx)(N.J,{className:p?"close-icon":"key-icon",display:p?"block":"none",cursor:"pointer",as:p?D.ven:D.MhP,onClick:p?()=>{let e=h.filter(e=>e!==r);a&&a(e)}:()=>{let e=[...h.filter(e=>"index"!==e),r];a&&a(e)}}),!p&&s&&(0,i.jsx)(N.J,{className:v?"unpin-icon":"pin-icon",display:v?"block":"none",cursor:"pointer",as:v?D.$kI:D.oJP,onClick:v?()=>{let e=f.filter(e=>e!==r);s&&s(e)}:()=>{let e=[...f,r];s&&s(e)}}),!p&&"number"===d&&(0,i.jsxs)(T.v,{children:[(0,i.jsx)(A.j,{as:I.h,"aria-label":"Options",icon:(0,i.jsx)(D.D_A,{}),variant:"unstyled",className:"!size-4 !min-w-4"}),(0,i.jsx)(V.h,{children:(0,i.jsx)(P.q,{children:x.map(e=>(0,i.jsx)(H.s,{onClick:e.onClick,children:e.value},e.value))})})]})]})}let J=function(e,n,t){let r,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raw";if(!Object.hasOwn(e,n))return["-",!0];let i=e[n],o=!1;return"boolean"==typeof i?r=i.toString():""===i?(r="(empty)",o=!0):null==i?(r="(null)",o=!0):r="number"==typeof i?String(i):t&&"number"===t?function(e,n){let t;let r="en-US";return null!=(t="number"==typeof n?h(e,r,{maximumFractionDigits:n,minimumFractionDigits:n}):"percent"===n?h(e,r,{style:"percent",maximumFractionDigits:2}):String(e))?t:""}(parseFloat(i),l):String(i),[r,o]},G=e=>{let{row:n,column:t}=e,{columnType:r,columnRenderMode:l}=t,[o,a]=J(n,t.key,r,l);return(0,i.jsx)(F.x,{style:{color:a?"gray":"inherit"},children:o})},$=e=>{let{row:n,column:t}=e,{columnType:r,columnRenderMode:l}=t,a="base__".concat(t.key),s="current__".concat(t.key);if(!Object.hasOwn(n,a)&&!Object.hasOwn(n,s))return"-";let u=Object.hasOwn(n,a),d=Object.hasOwn(n,s),[c,m]=J(n,"base__".concat(t.key),r,l),[h,f]=J(n,"current__".concat(t.key),r,l);return n[a]===n[s]?(0,i.jsx)(F.x,{style:{color:f?"gray":"inherit"},children:h}):(0,i.jsxs)(o.k,{gap:"5px",alignItems:"center",lineHeight:"normal",height:"100%",children:[u&&(0,i.jsx)(B,{value:c,colorScheme:"red",grayOut:m}),d&&(0,i.jsx)(B,{value:h,colorScheme:"green",grayOut:f})]})};function X(e,n,t){var r,l,o,a,s;let u=null!=e?e:{columns:[],data:[]},d=null!=n?n:{columns:[],data:[]},c=null!==(r=null==t?void 0:t.primaryKeys)&&void 0!==r?r:[],m=null!==(l=null==t?void 0:t.pinnedColumns)&&void 0!==l?l:[],h=null!==(o=null==t?void 0:t.changedOnly)&&void 0!==o&&o,f=null!==(a=null==t?void 0:t.displayMode)&&void 0!==a?a:"side_by_side",p=null!==(s=null==t?void 0:t.columnsRenderMode)&&void 0!==s?s:{},v=[],x=function(e,n){let t={};return Object.entries((0,z.Z)(e.columns.map(e=>e.name),n.columns.map(e=>e.name))).map(r=>{var l,i;let[o,a]=r;t[o]={status:a,baseColumnIndex:e.columns.findIndex(e=>e.name===o),currentColumnIndex:n.columns.findIndex(e=>e.name===o),colType:null!==(i=null===(l=e.columns.find(e=>e.name===o))||void 0===l?void 0:l.type)&&void 0!==i?i:"unknown"}}),t}(u,d),g={},y={},j=!1,C=!1;if(0===c.length)u.data.forEach((e,n)=>{e._index=n+1,g[JSON.stringify({_index:n+1})]=e}),d.data.forEach((e,n)=>{e._index=n+1,y[JSON.stringify({_index:n+1})]=e});else{let e=Z(u.columns,c);u.data.forEach((n,t)=>{let r=K(u.columns,e,n);r in g&&(j=!0),g[r]=n}),e=Z(d.columns,c),d.data.forEach((n,t)=>{let r=K(d.columns,e,n);r in y&&(C=!0),y[r]=n})}let b=(0,z.Z)(Object.keys(g),Object.keys(y)),_={added:0,removed:0,modified:0},w=Object.entries(b).map(e=>{let[n,t]=e,r=g[n],l=y[n],i=JSON.parse(n);if(r&&u.columns.forEach((e,n)=>{c.includes(e.name)||(i["base__".concat(e.name)]=r[n])}),l&&d.columns.forEach((e,n)=>{c.includes(e.name)||(i["current__".concat(e.name)]=l[n])}),r){if(l){for(let[e,n]of Object.entries(x))"index"===e||c.includes(e)||n.baseColumnIndex<0||n.currentColumnIndex<0||L().isEqual(r[n.baseColumnIndex],l[n.currentColumnIndex])||(i.__status="modified",n.status="modified");"modified"===i.__status&&_.modified++}else i.__status="removed",_.removed++}else i.__status="added",_.added++;return i});h&&(w=w.filter(e=>"added"===e.__status||"removed"===e.__status||"modified"===e.__status));let k=function(e,n,r){var l,o;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raw",s="added"===n?"diff-header-added":"removed"===n?"diff-header-removed":void 0;return"inline"===f?{headerCellClass:s,name:(0,i.jsx)(Q,{name:e,columnStatus:n,columnType:r,...t}),key:e,renderCell:$,columnType:r,columnRenderMode:a}:{headerCellClass:s,name:(0,i.jsx)(Q,{name:e,columnStatus:n,columnType:r,...t}),children:[{key:"base__".concat(e),name:null!==(l=null==t?void 0:t.baseTitle)&&void 0!==l?l:"Base",renderEditCell:E.Ug,headerCellClass:s,cellClass:t=>{let r=t.__status;if("removed"===r)return"diff-cell-removed";if("added"===r)return"diff-cell-added";if("added"===n);else if("removed"===n);else if(!L().isEqual(t["base__".concat(e)],t["current__".concat(e)]))return"diff-cell-removed"},renderCell:G,columnType:r,columnRenderMode:a},{key:"current__".concat(e),name:null!==(o=null==t?void 0:t.currentTitle)&&void 0!==o?o:"Current",renderEditCell:E.Ug,headerCellClass:s,cellClass:t=>{let r=t.__status;if("removed"===r)return"diff-cell-removed";if("added"===r)return"diff-cell-added";if("added"===n);else if("removed"===n);else if(!L().isEqual(t["base__".concat(e)],t["current__".concat(e)]))return"diff-cell-added"},renderCell:G,columnType:r,columnRenderMode:a}]}};return 0===c.length?v.push({key:"_index",width:50,maxWidth:100,name:"",cellClass:"index-column"}):c.forEach(e=>{var n;let r=null!==(n=x[e].status)&&void 0!==n?n:"",l=x[e].colType;v.push({key:e,name:(0,i.jsx)(Q,{name:e,columnStatus:r,columnType:l,...t}),frozen:!0,cellClass:e=>{if(e.__status)return"diff-header-".concat(e.__status)},renderCell:G,columnType:l,columnRenderMode:p[e]})}),m.forEach(e=>{var n;let t=null!==(n=x[e].status)&&void 0!==n?n:"",r=x[e].colType;"index"===e||c.includes(e)||v.push(k(e,t,r,p[e]))}),Object.entries(x).forEach(e=>{var n;let[t,r]=e,l=null!==(n=r.status)&&void 0!==n?n:"",i=x[t].colType;"index"===t||c.includes(t)||m.includes(t)||h&&_.modified>0&&"added"!==l&&"removed"!==l&&"modified"!==l||v.push(k(t,l,i,p[t]))}),{columns:v,rows:w,invalidPKeyBase:j,invalidPKeyCurrent:C}}var Y=t(53158),ee=t(40359);let en=e=>{let{warnings:n,children:t}=e;return(0,i.jsxs)(o.k,{borderBottom:"1px solid lightgray",justifyContent:"flex-end",gap:"5px",alignItems:"center",px:"10px",bg:n&&n.length>0?"orange.100":"inherit",children:[(0,i.jsx)(ee.g,{alignItems:"flex-start",spacing:0,children:null==n?void 0:n.map((e,n)=>(0,i.jsxs)(u.x,{children:[(0,i.jsx)(Y.a,{color:"orange.600"})," ",e]},n))}),(0,i.jsx)(s.L,{minHeight:"32px"}),t]})};var et=t(32119),er=t(67089);let el=e=>{let{value:n,onChange:t,textOn:r,textOff:l}=e;return(0,i.jsxs)(et.h,{isAttached:!0,variant:"outline",borderRadius:"full",size:"xs",children:[(0,i.jsx)(er.z,{onClick:()=>{t(!1)},color:n?"gray.400":"black",bg:n?"gray.50":"white",children:null!=l?l:"Off"}),(0,i.jsx)(er.z,{onClick:()=>{t(!0)},color:n?"black":"gray.400",bg:n?"white":"gray.50",children:null!=r?r:"On"})]})},ei=e=>{let{displayMode:n,onDisplayModeChanged:t}=e;return(0,i.jsxs)(i.Fragment,{children:["inline"===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B,{value:"Base",colorScheme:"red",grayOut:!1,fontSize:"10pt",noCopy:!0}),(0,i.jsx)(B,{value:"Current",colorScheme:"green",grayOut:!1,fontSize:"10pt",noCopy:!0})]}),(0,i.jsx)(el,{value:"side_by_side"===n,onChange:e=>{t(e?"side_by_side":"inline")},textOff:"Inline",textOn:"Side by side"})]})};function eo(e){let{name:n,pinnedColumns:t=[],onPinnedColumnsChange:r=()=>{},columnType:l,onColumnsRenderModeChanged:a}=e,s=[];a&&(s=q(n,a));let d=t.includes(n);return(0,i.jsxs)(o.k,{className:"grid-header",alignItems:"center",children:[(0,i.jsx)(u.x,{flex:1,children:n}),(0,i.jsx)(N.J,{className:d?"unpin-icon":"pin-icon",display:d?"block":"none",cursor:"pointer",as:d?D.$kI:D.oJP,onClick:d?()=>{r(t.filter(e=>e!==n))}:()=>{r([...t,n])}}),"number"===l&&(0,i.jsxs)(T.v,{children:[(0,i.jsx)(A.j,{as:I.h,"aria-label":"Options",icon:(0,i.jsx)(D.D_A,{}),variant:"unstyled",className:"!size-4 !min-w-4"}),(0,i.jsx)(V.h,{children:(0,i.jsx)(P.q,{children:s.map(e=>(0,i.jsx)(H.s,{onClick:e.onClick,children:e.value},e.value))})})]})]})}function ea(e,n){var t,r,l;let o=[],a=null!==(t=n.primaryKeys)&&void 0!==t?t:[],s=null!==(r=n.pinnedColumns)&&void 0!==r?r:[],u=null!==(l=n.columnsRenderMode)&&void 0!==l?l:{},d={};e.columns.forEach(e=>{d[e.name]={colType:e.type}});let c=function(e,t,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raw";return{key:String(e),name:(0,i.jsx)(eo,{name:t,...n,columnType:r}),width:"auto",renderCell:G,columnType:r,columnRenderMode:l}},m=function(e,t,r){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raw";return{key:String(e),name:(0,i.jsx)(Q,{name:t,columnStatus:"",columnType:r,...n}),width:"auto",frozen:!0,renderCell:G,columnType:r,columnRenderMode:l}};return a.length>0?a.forEach(n=>{let t=L().findIndex(e.columns,e=>e.name===n),r=d[n].colType;o.push(m(t,n,r,u[n]))}):o.push({key:"_index",name:"",width:50,cellClass:"index-column"}),s.forEach(n=>{let t=d[n].colType,r=L().findIndex(e.columns,e=>e.name===n);r<0||o.push(c(r,n,t,u[n]))}),e.columns.forEach((e,n)=>{let{name:t}=e;if(a.includes(t)||s.includes(t))return;let r=d[t].colType;o.push(c(n,t,r,u[t]))}),e.data.forEach((e,n)=>{e._index=n+1}),{columns:o,rows:e.data}}t(50758);let es=(0,d.G)((e,n)=>{var t;let{run:r,viewOptions:l,onViewOptionsChanged:a,onAddToChecklist:d}=e,c=(0,R.useMemo)(()=>{var e;return null!==(e=null==l?void 0:l.pinned_columns)&&void 0!==e?e:[]},[l]),m=(0,R.useMemo)(()=>{var e;return null!==(e=null==l?void 0:l.columnsRenderMode)&&void 0!==e?e:{}},[l]),h=r.result,f=(0,R.useMemo)(()=>h?ea(h,{pinnedColumns:c,onPinnedColumnsChange:e=>{a&&a({...l,pinned_columns:e})},columnsRenderMode:m,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==l?void 0:l.columnsRenderMode)&&void 0!==n?n:{},...e};a&&a({...l,columnsRenderMode:t})}}):{rows:[],columns:[]},[h,c,l,a,m]);if(0===f.columns.length)return(0,i.jsx)(S.M,{height:"100%",children:"No data"});let p=h&&null!==(t=h.limit)&&void 0!==t?t:0,v=p>0&&(null==h?void 0:h.more)?"Warning: Displayed results are limited to ".concat(p.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,x=null!=d?d:v;return(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[x&&(0,i.jsxs)(o.k,{borderBottom:"1px solid lightgray",alignItems:"center",gap:"5px",px:"10px",bg:v?"orange.100":"inherit",children:[v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.a,{color:"orange.600",alignSelf:"center"})," ",(0,i.jsx)(u.x,{children:v})]}),(0,i.jsx)(s.L,{minHeight:"32px"}),d&&(0,i.jsx)(er.z,{marginBlock:"5px",size:"sm",colorScheme:"blue",onClick:()=>{d(r)},children:"Add to Checklist"})]}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:f.columns,rows:f.rows,renderers:{noRowsFallback:(0,i.jsx)(M.W,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})}),eu=(0,d.G)((e,n)=>{var t,r,l;let{run:a,viewOptions:s,onViewOptionsChanged:u}=e,d=a.result,c=(0,R.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.pinned_columns)&&void 0!==e?e:[]},[s]),m=(0,R.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.display_mode)&&void 0!==e?e:"inline"},[s]),h=(0,R.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.columnsRenderMode)&&void 0!==e?e:{}},[s]),f=(null!==(r=null==d?void 0:null===(t=d.current)||void 0===t?void 0:t.columns)&&void 0!==r?r:[]).find(e=>"column_name"===e.name.toLowerCase()),p=null!==(l=null==f?void 0:f.name)&&void 0!==l?l:"column_name",v=(0,R.useMemo)(()=>X(null==d?void 0:d.base,null==d?void 0:d.current,{primaryKeys:[p],pinnedColumns:c,onPinnedColumnsChange:e=>{u&&u({...s,pinned_columns:e})},displayMode:m,columnsRenderMode:h,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==s?void 0:s.columnsRenderMode)&&void 0!==n?n:{},...e};u&&u({...s,columnsRenderMode:t})}}),[d,p,c,m,s,u,h]);return 0===v.columns.length?(0,i.jsx)(S.M,{height:"100%",children:"No data"}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(en,{run:a,children:(0,i.jsx)(ei,{displayMode:m,onDisplayModeChanged:e=>{u&&u({...s,display_mode:e})}})}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:v.columns,rows:v.rows,defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})}),ed=(0,d.G)((e,n)=>{var t,r,l;let{run:a,viewOptions:s,onViewOptionsChanged:u}=e,d=a.result,c=null==d?void 0:d.current,m=(0,R.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.pinned_columns)&&void 0!==e?e:[]},[s]),h=(0,R.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.columnsRenderMode)&&void 0!==e?e:{}},[s]),f=(null!==(r=null==d?void 0:null===(t=d.current)||void 0===t?void 0:t.columns)&&void 0!==r?r:[]).find(e=>"column_name"===e.name.toLowerCase()),p=null!==(l=null==f?void 0:f.name)&&void 0!==l?l:"column_name",v=(0,R.useMemo)(()=>c?ea(c,{primaryKeys:[p],pinnedColumns:m,onPinnedColumnsChange:e=>{u&&u({...s,pinned_columns:e})},columnsRenderMode:h,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==s?void 0:s.columnsRenderMode)&&void 0!==n?n:{},...e};u&&u({...s,columnsRenderMode:t})}}):{columns:[],rows:[]},[c,m,p,s,u,h]);return 0===v.columns.length?(0,i.jsx)(S.M,{height:"100%",children:"No data"}):(0,i.jsx)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:v.columns,rows:v.rows,defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})})});function ec(e){var n,t;let{name:r,columnStatus:l,onPrimaryKeyChange:a,onPinnedColumnsChange:s,columnType:d,onColumnsRenderModeChanged:c,...m}=e,h=null!==(n=m.primaryKeys)&&void 0!==n?n:[],f=null!==(t=m.pinnedColumns)&&void 0!==t?t:[],p=h.includes(r),v=f.includes(r),x=[];return(c&&(x=q(r,c)),"index"===r)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(o.k,{alignItems:"center",gap:"10px",className:"grid-header",children:[p&&(0,i.jsx)(N.J,{as:D.MhP}),(0,i.jsx)(u.x,{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:r}),!p&&s&&(0,i.jsx)(N.J,{className:v?"unpin-icon":"pin-icon",display:v?"block":"none",cursor:"pointer",as:v?D.$kI:D.oJP,onClick:v?()=>{let e=f.filter(e=>e!==r);s&&s(e)}:()=>{let e=[...f,r];s&&s(e)}}),!p&&"number"===d&&(0,i.jsxs)(T.v,{children:[(0,i.jsx)(A.j,{as:I.h,"aria-label":"Options",icon:(0,i.jsx)(D.D_A,{}),variant:"unstyled",className:"!size-4 !min-w-4"}),(0,i.jsx)(V.h,{children:(0,i.jsx)(P.q,{children:x.map(e=>(0,i.jsx)(H.s,{onClick:e.onClick,children:e.value},e.value))})})]})]})}function em(e,n,t){var r,l,o,a;let s=null!==(r=null==t?void 0:t.pinnedColumns)&&void 0!==r?r:[],u=null!==(l=null==t?void 0:t.changedOnly)&&void 0!==l&&l,d=null!==(o=null==t?void 0:t.displayMode)&&void 0!==o?o:"inline",c=null!==(a=null==t?void 0:t.columnsRenderMode)&&void 0!==a?a:{},m=[],h=function(e){let n={};return e.columns.map((e,t)=>{n[e.name]={index:t,colType:e.type}}),n}(e),f={},p={};if(0===n.length)throw Error("Primary keys are required");let v=function(e,n){let t=[];for(let r of n){let n=e.findIndex(e=>e.name===r);if(n<0)throw Error("Column ".concat(r," not found"));t.push(n)}return t}(e.columns,n),x=(h.in_a||h.IN_A).index,g=(h.in_b||h.IN_B).index;e.data.forEach((n,t)=>{let r=function(e,n,t){let r={};if(0===n.length)return JSON.stringify({_index:t._index});for(let l of n)r[e[l].name]=t[l];return JSON.stringify(r)}(e.columns,v,n);n[x]&&(f[r]=n),n[g]&&(p[r]=n)});let y=(0,z.Z)(Object.keys(f),Object.keys(p)),j={added:0,removed:0,modified:0},C=Object.entries(y).map(t=>{let[r,l]=t,i=f[r],o=p[r],a=JSON.parse(r);if(i&&e.columns.forEach((e,t)=>{n.includes(e.name)||(a["base__".concat(e.name)]=i[t])}),o&&e.columns.forEach((e,t)=>{n.includes(e.name)||(a["current__".concat(e.name)]=o[t])}),i){if(o)for(let[e,t]of Object.entries(h))!("index"===e||n.includes(e))&&(L().isEqual(i[t.index],o[t.index])||(a.__status="modified",t.status="modified"));else a.__status="removed",j.removed++}else a.__status="added",j.added++;return"modified"===a.__status&&j.modified++,a});u&&(C=C.filter(e=>"added"===e.__status||"removed"===e.__status||"modified"===e.__status));let b=function(e,r,l){var o,a;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"raw",u="added"===r?"diff-header-added":"removed"===r?"diff-header-removed":void 0;return"inline"===d?{headerCellClass:u,name:(0,i.jsx)(ec,{name:e,columnStatus:r,primaryKeys:n,columnType:l,...t}),key:e,renderCell:$,columnType:l,columnRenderMode:s}:{headerCellClass:u,name:(0,i.jsx)(ec,{name:e,columnStatus:r,primaryKeys:n,columnType:l,...t}),children:[{key:"base__".concat(e),name:null!==(o=null==t?void 0:t.baseTitle)&&void 0!==o?o:"Base",renderEditCell:E.Ug,headerCellClass:u,cellClass:n=>{let t=n.__status;if("removed"===t)return"diff-cell-removed";if("added"===t)return"diff-cell-added";if("added"===r);else if("removed"===r);else if(!L().isEqual(n["base__".concat(e)],n["current__".concat(e)]))return"diff-cell-removed"},renderCell:G,columnType:l,columnRenderMode:s},{key:"current__".concat(e),name:null!==(a=null==t?void 0:t.currentTitle)&&void 0!==a?a:"Current",renderEditCell:E.Ug,headerCellClass:u,cellClass:n=>{let t=n.__status;if("removed"===t)return"diff-cell-removed";if("added"===t)return"diff-cell-added";if("added"===r);else if("removed"===r);else if(!L().isEqual(n["base__".concat(e)],n["current__".concat(e)]))return"diff-cell-added"},renderCell:G,columnType:l,columnRenderMode:s}]}};return n.forEach(e=>{var r;let l=null!==(r=h[e].status)&&void 0!==r?r:"",o=h[e].colType;m.push({key:e,name:(0,i.jsx)(ec,{name:e,columnStatus:l,primaryKeys:n,columnType:"unknown",...t}),frozen:!0,cellClass:e=>{if(e.__status)return"diff-header-".concat(e.__status)},renderCell:G,columnType:o,columnRenderMode:c[e]})}),s.forEach(e=>{var t;let r=null!==(t=h[e].status)&&void 0!==t?t:"",l=h[e].colType;n.includes(e)||m.push(b(e,r,l,c[e]))}),Object.entries(h).forEach(e=>{var t;let[r,l]=e,i=null!==(t=l.status)&&void 0!==t?t:"";"in_a"===r||"in_b"===r||n.includes(r)||s.includes(r)||u&&j.modified>0&&"added"!==i&&"removed"!==i&&"modified"!==i||m.push(b(r,i,l.colType,c[r]))}),{columns:m,rows:C}}var eh=t(26728);let ef=e=>{let{changedOnly:n,onChange:t}=e;return(0,i.jsx)(eh.X,{size:"xs",isChecked:n,onChange:()=>{t()},children:"Changed only"})},ep=(e,n)=>{var t,r,l,a,s,u,d;let{run:c,onAddToChecklist:m,viewOptions:h,onViewOptionsChanged:f,baseTitle:p,currentTitle:v}=e,x=(0,R.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.primary_keys)&&void 0!==e?e:[]},[h]),g=(0,R.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.changed_only)&&void 0!==e&&e},[h]),y=(0,R.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.pinned_columns)&&void 0!==e?e:[]},[h]),j=(0,R.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.display_mode)&&void 0!==e?e:"inline"},[h]),C=(0,R.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.columnsRenderMode)&&void 0!==e?e:{}},[h]),b=(0,R.useMemo)(()=>{var e,n;return X(null===(e=c.result)||void 0===e?void 0:e.base,null===(n=c.result)||void 0===n?void 0:n.current,{changedOnly:g,primaryKeys:x,onPrimaryKeyChange:e=>{f&&f({...h,primary_keys:e})},pinnedColumns:y,onPinnedColumnsChange:e=>{f&&f({...h,pinned_columns:e})},columnsRenderMode:C,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==h?void 0:h.columnsRenderMode)&&void 0!==n?n:{},...e};f&&f({...h,columnsRenderMode:t})},baseTitle:p,currentTitle:v,displayMode:j})},[c,h,g,x,y,j,f,p,v,C]),_=(0,R.useMemo)(()=>{let e=x.join(", ");return b.invalidPKeyBase&&b.invalidPKeyCurrent?"Warning: The primary key '".concat(e,"' is not unique in the base and current environments"):b.invalidPKeyBase?"Warning: The primary key '".concat(e,"' is not unique in the base environment"):b.invalidPKeyCurrent?"Warning: The primary key '".concat(e,"' is not unique in the current environment"):void 0},[b.invalidPKeyBase,b.invalidPKeyCurrent,x]),w=null!==(d=null===(r=c.result)||void 0===r?void 0:null===(t=r.current)||void 0===t?void 0:t.limit)&&void 0!==d?d:0,k=w>0&&((null===(a=c.result)||void 0===a?void 0:null===(l=a.current)||void 0===l?void 0:l.more)||(null===(u=c.result)||void 0===u?void 0:null===(s=u.base)||void 0===s?void 0:s.more))?"Warning: Displayed results are limited to ".concat(w.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,E=[];return(_&&E.push(_),k&&E.push(k),0===b.columns.length)?(0,i.jsx)(S.M,{height:"100%",children:"No data"}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsxs)(en,{run:c,viewOptions:h,onViewOptionsChanged:f,warnings:E,children:[(0,i.jsx)(ei,{displayMode:j,onDisplayModeChanged:e=>{f&&f({...h,display_mode:e})}}),(0,i.jsx)(ef,{changedOnly:null==h?void 0:h.changed_only,onChange:()=>{let e=!(null==h?void 0:h.changed_only);f&&f({...h,changed_only:e})}})]}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:b.columns,rows:b.rows,renderers:{noRowsFallback:(0,i.jsx)(M.W,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})},ev=(e,n)=>{var t,r,l,a,s;let{run:u,viewOptions:d,onViewOptionsChanged:c,baseTitle:m,currentTitle:h}=e,f=(0,R.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.changed_only)&&void 0!==e&&e},[d]),p=(0,R.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.pinned_columns)&&void 0!==e?e:[]},[d]),v=(0,R.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.display_mode)&&void 0!==e?e:"inline"},[d]),x=(0,R.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.columnsRenderMode)&&void 0!==e?e:{}},[d]),g=(0,R.useMemo)(()=>{var e,n;if(!(null===(e=u.result)||void 0===e?void 0:e.diff)||!(null===(n=u.params)||void 0===n?void 0:n.primary_keys))return{columns:[],rows:[]};let t=u.params.primary_keys;return em(u.result.diff,t,{changedOnly:f,pinnedColumns:p,onPinnedColumnsChange:e=>{c&&c({...d,pinned_columns:e})},baseTitle:m,currentTitle:h,displayMode:v,columnsRenderMode:x,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==d?void 0:d.columnsRenderMode)&&void 0!==n?n:{},...e};c&&c({...d,columnsRenderMode:t})}})},[u,d,f,p,v,c,m,h,x]),y=null!==(s=null===(r=u.result)||void 0===r?void 0:null===(t=r.diff)||void 0===t?void 0:t.limit)&&void 0!==s?s:0,j=y>0&&(null===(a=u.result)||void 0===a?void 0:null===(l=a.diff)||void 0===l?void 0:l.more)?"Warning: Displayed results are limited to ".concat(y.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,C=[];return(j&&C.push(j),0===g.columns.length)?(0,i.jsx)(S.M,{height:"100%",children:"No data"}):f&&0===g.rows.length?(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(en,{run:u,viewOptions:d,onViewOptionsChanged:c,warnings:C}),(0,i.jsx)(S.M,{height:"100%",children:"No change"})]}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsxs)(en,{run:u,viewOptions:d,onViewOptionsChanged:c,warnings:C,children:[(0,i.jsx)(ei,{displayMode:v,onDisplayModeChanged:e=>{c&&c({...d,display_mode:e})}}),(0,i.jsx)(ef,{changedOnly:null==d?void 0:d.changed_only,onChange:()=>{let e=!(null==d?void 0:d.changed_only);c&&c({...d,changed_only:e})}})]}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:g.columns,rows:g.rows,renderers:{noRowsFallback:(0,i.jsx)(M.W,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})},ex=(0,d.G)((e,n)=>{var t;let r,l;if(e.run.params&&e.run.params.current_model&&(r="Original",l="Editor"),(null===(t=e.run.result)||void 0===t?void 0:t.diff)!=null){let t=(0,d.G)(ev);return(0,i.jsx)(t,{...e,ref:n,baseTitle:r,currentTitle:l})}{let t=(0,d.G)(ep);return(0,i.jsx)(t,{...e,ref:n,baseTitle:r,currentTitle:l})}});var eg=t(55120),ey=t(52657),ej=t.n(ey);let eC=(0,d.G)(function(e,n){var t,r;let{run:l}=e;function a(e){if(e.base===e.current);else if(e.base<e.current||"N/A"===e.base)return"column-body-added";else if(e.base>e.current||"N/A"===e.current)return"column-body-removed";return"column-body-normal"}let s=null!==(t=l.result)&&void 0!==t?t:{},u=Object.keys(null!==(r=l.result)&&void 0!==r?r:{}).map(e=>{let n=s[e],t=ej()(n.base)?n.base:null,r=ej()(n.curr)?n.curr:null,l="=";return null!==t&&null!==r?l=t!==r?(0,eg.T)(t,r):"=":t===r?l="N/A":null===t?l="Added":null===r&&(l="Removed"),{name:e,base:null===t?"N/A":Number(t),current:null===r?"N/A":Number(r),delta:l}});return 0===u.length?(0,i.jsx)(S.M,{bg:"rgb(249,249,249)",height:"100%",children:"No nodes matched"}):(0,i.jsx)(o.k,{direction:"column",children:Object.keys(s).length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",fontSize:"10pt",borderWidth:1},columns:[{key:"name",name:"Name",cellClass:a},{key:"base",name:"Base Rows",cellClass:a},{key:"current",name:"Current Rows",cellClass:a},{key:"delta",name:"Delta",cellClass:a}],rows:u,renderers:{noRowsFallback:(0,i.jsx)(M.W,{})},className:"rdg-light",enableScreenshot:!0})})})}),eb=(0,d.G)(function(e,n){var t,r;let{run:l}=e,a=null!==(t=l.result)&&void 0!==t?t:{},s=Object.keys(null!==(r=l.result)&&void 0!==r?r:{}).map(e=>{let n=a[e],t=ej()(n.curr)?n.curr:null;return{name:e,current:null===t?"N/A":Number(t)}});return 0===s.length?(0,i.jsx)(S.M,{bg:"rgb(249,249,249)",height:"100%",children:"No nodes matched"}):(0,i.jsx)(o.k,{direction:"column",children:Object.keys(a).length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",fontSize:"10pt",borderWidth:1},columns:[{key:"name",name:"Name"},{key:"current",name:"Row Count"}],rows:s,renderers:{noRowsFallback:(0,i.jsx)(M.W,{})},className:"rdg-light",enableScreenshot:!0})})})});var e_=t(33843),ew=t(26747),ek=t(40782),eS=t(78933),eM=t(43906),eR=t(62392),eE=t(92343),eO=t(8326);let eL="#63B3ED";function eN(e,n){let t=n?10:e.counts.length,r=e.counts.slice(0,t),l=e.valids-r.reduce((e,n)=>e+n,0);return e.values.slice(0,t).concat([l]).map((n,t)=>{var i;let o;let a=t===r.length,s=a?l:r[t],u=!1;return a?(o="(others)",u=!0):null==n?(o="(null)",u=!0):"string"==typeof n&&0===n.length?(o="(empty)",u=!0):o=String(n),{isLastItemOthers:a,isSpecialLabel:u,label:o,count:s,displayCount:p(s),displayRatio:null!==(i=f(s/e.valids))&&void 0!==i?i:"N/A"}})}function eT(e){let{base:n,current:t,children:r}=e;return(0,i.jsx)(eE.u,{label:(0,i.jsxs)(u.x,{children:[(0,i.jsxs)(F.x,{children:[(0,i.jsx)(j,{color:v}),"Current: ",t.count," (",t.displayRatio,")"]}),(0,i.jsxs)(F.x,{children:[(0,i.jsx)(j,{color:x}),"Base: ",n.count," (",n.displayRatio,")"]})]}),placement:"auto",hasArrow:!0,children:r})}function eA(e){let{topKDiff:n,isDisplayTopTen:t}=e,r=eN(n.current,t),l=eN(n.base,t);return(0,i.jsxs)(u.x,{w:"100%",px:20,py:4,children:[(0,i.jsxs)(o.k,{alignItems:"center",direction:"row",children:[(0,i.jsx)(s.L,{}),(0,i.jsxs)(F.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(j,{color:x})," Base"]}),(0,i.jsxs)(F.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(j,{color:v})," Current"]}),(0,i.jsx)(s.L,{})]}),r.map((e,t)=>{let r=l[t];return e.isLastItemOthers&&0===e.count&&0===r.count?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(R.Fragment,{children:[(0,i.jsx)(eT,{base:r,current:e,children:(0,i.jsxs)(o.k,{alignItems:"center",width:"100%",_hover:{bg:"blackAlpha.300"},px:4,children:[(0,i.jsx)(F.x,{noOfLines:1,width:"10em",fontSize:"sm",color:e.isSpecialLabel?"gray.400":"inherit",children:e.label}),(0,i.jsxs)(o.k,{width:"70%",direction:"column",children:[(0,i.jsxs)(o.k,{height:"1em",children:[(0,i.jsx)(eI,{topkCount:e.count,topkLabel:e.label,valids:n.current.valids,color:v}),(0,i.jsx)(F.x,{ml:5,mr:2,fontSize:"sm",width:"6em",children:e.displayCount}),(0,i.jsx)(F.x,{color:"gray.400",fontSize:"sm",width:"4em",children:e.displayRatio})]}),(0,i.jsxs)(o.k,{height:"1em",children:[(0,i.jsx)(eI,{topkCount:r.count,topkLabel:r.label,valids:n.base.valids,color:x}),(0,i.jsx)(F.x,{ml:5,mr:2,fontSize:"sm",width:"6em",children:r.displayCount}),(0,i.jsx)(F.x,{color:"gray.400",fontSize:"sm",width:"4em",children:r.displayRatio})]})]})]})}),(0,i.jsx)(eO.i,{})]},t)})]})}function eI(e){let{topkCount:n,topkLabel:t,valids:r,animation:l=!1,color:o=eL}=e;c.kL.register(c.uw,c.ZL,c.f$);let a=function(e,n){let{...t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{display:!1,max:n,grid:{display:!1}},y:{display:!1}},plugins:{tooltip:{enabled:!1}},...t}}(n,r,{animation:l}),s=function(e){let{topkLabel:n,topkCount:t,color:r=eL}=e;return{labels:[n],datasets:[{indexAxis:"y",data:[t],backgroundColor:r,hoverBackgroundColor:r,borderWidth:0,borderColor:r,barPercentage:1,categoryPercentage:.6}]}}({topkCount:n,topkLabel:t,color:o});return(0,i.jsx)(m.$Q,{data:s,options:a,plugins:[]})}let eV=(0,d.G)((e,n)=>{let{run:t}=e,[r,l]=(0,R.useState)(!0),u=t.result,d=t.params,c=u.base,m=u.current;return(0,i.jsxs)(o.k,{direction:"column",height:"100%",children:[(0,i.jsxs)(w,{ref:n,blockSize:"auto",children:[(0,i.jsxs)(eM.X,{as:"h1",size:"md",paddingTop:4,textAlign:"center",color:"gray.600",children:["Model ",d.model,".",d.column_name]}),(0,i.jsxs)(a.U,{children:[(0,i.jsx)(s.L,{}),(0,i.jsx)(eA,{topKDiff:u,valids:m.valids||0,isDisplayTopTen:r}),(0,i.jsx)(s.L,{})]})]}),(0,i.jsx)(s.L,{}),(c.values.length>10||m.values.length>10)&&(0,i.jsx)(o.k,{p:5,justify:"start",children:(0,i.jsx)(eR.r,{onClick:()=>{l(e=>!e)},textColor:"blue.500",children:r?"View More Items":"View Only Top-10"})})]})}),eP=(0,d.G)((e,n)=>{var t,r,l;let{run:a,onAddToChecklist:s,viewOptions:u,onViewOptionsChanged:d}=e,c=(0,R.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.changed_only)&&void 0!==e&&e},[u]),m=(0,R.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.pinned_columns)&&void 0!==e?e:[]},[u]),h=(0,R.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.display_mode)&&void 0!==e?e:"inline"},[u]),f=(0,R.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.columnsRenderMode)&&void 0!==e?e:{}},[u]),p=(0,R.useMemo)(()=>{var e;if(!a.result||!(null===(e=a.params)||void 0===e?void 0:e.primary_key))return{columns:[],rows:[]};let n=a.params.primary_key,t=Array.isArray(n)?n:[n];return em(a.result,t,{changedOnly:c,pinnedColumns:m,onPinnedColumnsChange:e=>{d&&d({...u,pinned_columns:e})},columnsRenderMode:f,onColumnsRenderModeChanged:e=>{var n;let t={...null!==(n=null==u?void 0:u.columnsRenderMode)&&void 0!==n?n:{},...e};d&&d({...u,columnsRenderMode:t})},displayMode:h})},[a,u,c,m,h,d,f]),v=null!==(l=null===(t=a.result)||void 0===t?void 0:t.limit)&&void 0!==l?l:0,x=v>0&&(null===(r=a.result)||void 0===r?void 0:r.more)?"Warning: Displayed results are limited to ".concat(v.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,g=[];return(x&&g.push(x),0===p.columns.length)?(0,i.jsx)(S.M,{height:"100%",children:"No data"}):c&&0===p.rows.length?(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(en,{run:a,viewOptions:u,onViewOptionsChanged:d,warnings:g}),(0,i.jsx)(S.M,{height:"100%",children:"No change"}),";"]}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsxs)(en,{run:a,viewOptions:u,onViewOptionsChanged:d,warnings:g,children:[(0,i.jsx)(ei,{displayMode:h,onDisplayModeChanged:e=>{d&&d({...u,display_mode:e})}}),(0,i.jsx)(ef,{changedOnly:null==u?void 0:u.changed_only,onChange:()=>{let e=!(null==u?void 0:u.changed_only);d&&d({...u,changed_only:e})}})]}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:p.columns,rows:p.rows,renderers:{noRowsFallback:(0,i.jsx)(M.W,{emptyMessage:"No mismatched rows"})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})});var eH=t(4084),eF=t(59940);function eD(e){var n;let{params:t,onParamsChanged:r,setIsReadyToExecute:l}=e,[o,a]=(0,R.useState)(!t.columns||0===t.columns.length),s=t.model,d=t.primary_key,{columns:c,primaryKey:m,isLoading:h,error:f}=(0,eS.ZP)(t.model);(0,R.useEffect)(()=>{!d&&m&&r({...t,primary_key:m})},[d,m,t,r]),(0,R.useEffect)(()=>{l(!!d&&!!s)},[d,s,l]);let p=c.map(e=>e.name),v=Array.isArray(d)?d:d?[d]:void 0;return h?(0,i.jsx)(u.x,{children:"Loading..."}):0===p.length||f?(0,i.jsx)(u.x,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsxs)(ee.g,{gap:5,m:"8px 24px",paddingBottom:"200px",children:[(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Model"}),(0,i.jsx)(eH.I,{isReadOnly:!0,value:t.model})]}),(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Primary key"}),(0,i.jsx)(eF.Ph,{placeholder:"Select primary key",isMulti:!0,closeMenuOnSelect:!1,options:p.map(e=>({label:e,value:e})),value:(null!=v?v:[]).map(e=>({label:e,value:e})),onChange:e=>{r({...t,primary_key:1==e.length?e[0].value:e.map(e=>e.value)})}})]}),(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Columns"}),(0,i.jsx)(eh.X,{marginBottom:"10px",isChecked:o,onChange:e=>{a(e.target.checked),r({...t,columns:void 0})},children:"All columns"}),!o&&(0,i.jsx)(eF.Ph,{isMulti:!0,closeMenuOnSelect:!1,options:p.map(e=>({label:e,value:e})),value:(null!==(n=t.columns)&&void 0!==n?n:[]).map(e=>({label:e,value:e})),onChange:e=>{let n;let l=e.map(e=>e.value);n=0===l.length?void 0:l,r({...t,columns:n})}})]})]})}var ez=t(83443),eU=t(22363),eW=t(65374);function eB(e){let{params:n,column:t}=e,{runAction:r}=(0,eU.$q)(),{featureToggles:l}=(0,eW.$)(),a=(e,t)=>{r("value_diff_detail",{...n,...e},t)};return(0,i.jsxs)(o.k,{children:[(0,i.jsx)(u.x,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:t}),(0,i.jsx)(s.L,{}),(0,i.jsx)(T.v,{isLazy:!0,children:e=>{let{isOpen:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.j,{className:"row-context-menu",visibility:n?"visible":"hidden",width:n?"auto":"0px",minWidth:n?"auto":"0px",as:I.h,icon:(0,i.jsx)(N.J,{as:D.D_A}),variant:"unstyled",size:"sm",isDisabled:l.disableDatabaseQuery}),(0,i.jsx)(V.h,{children:(0,i.jsx)(P.q,{lineHeight:"20px",children:(0,i.jsxs)(ez.k,{title:"Action",as:u.x,fontSize:"8pt",children:[(0,i.jsx)(H.s,{fontSize:"10pt",onClick:()=>{a({},{showForm:!0})},children:"Show mismatched values..."}),(0,i.jsxs)(H.s,{fontSize:"10pt",onClick:()=>{a({columns:[t]},{showForm:!1})},children:["Show mismatched values for '",t,"'"]})]})})})]})}})]})}let eq=(0,d.G)(function(e,n){let{run:t}=e,r=t.result,l=t.params,a=e=>{let n=e[2];return null!=n&&n<1?"diff-cell-modified":""},s=Array.isArray(l.primary_key)?l.primary_key:[l.primary_key],d=[{key:"__is_pk__",name:"",width:30,maxWidth:30,renderCell:e=>{let{row:n}=e;return(0,i.jsx)(S.M,{height:"100%",children:s.includes(String(n[0]))&&(0,i.jsx)(N.J,{as:D.MhP})})}},{key:"0",name:"Column",resizable:!0,renderCell:e=>{let{row:n,column:t}=e;return(0,i.jsx)(eB,{column:String(n[t.key]),params:l})},cellClass:"cell-show-context-menu"},{key:"1",name:"Matched",resizable:!0,cellClass:a},{key:"2",name:"Matched %",resizable:!0,renderCell:e=>{let{column:n,row:t}=e,r=t[n.key];return(0,i.jsx)(u.x,{textAlign:"end",children:null!=r?"".concat((100*r).toFixed(2)," %"):"N/A"})},cellClass:a}];return(0,i.jsxs)(o.k,{direction:"column",gap:"5px",pt:"5px",height:"100%",children:[(0,i.jsxs)(u.x,{px:"16px",children:["Model: ",l.model,", ",r.summary.total," total (",r.summary.total-r.summary.added-r.summary.removed," common,"," ",r.summary.added," added, ",r.summary.removed," removed)"]}),(0,i.jsx)(M.o,{ref:n,style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",borderBlock:"1px solid lightgray"},columns:d,rows:r.data.data,renderers:{noRowsFallback:(0,i.jsx)(M.W,{})},defaultColumnOptions:{resizable:!0},className:"rdg-light",enableScreenshot:!0})]})});var eZ=t(77145),eK=t(47875);function eQ(e){var n;let{params:t,onParamsChanged:r,setIsReadyToExecute:l}=e,[o,a]=(0,R.useState)(!t.columns||0===t.columns.length),s=t.model,{columns:d,isLoading:c,error:m}=(0,eS.ZP)(t.model);(0,R.useEffect)(()=>{l(!!s)},[s,l]);let h=d.map(e=>e.name);return c?(0,i.jsx)(u.x,{children:"Loading..."}):0===h.length||m?(0,i.jsx)(u.x,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsxs)(ee.g,{gap:5,m:"8px 24px",paddingBottom:"200px",children:[(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Model"}),(0,i.jsx)(eH.I,{isReadOnly:!0,value:t.model})]}),(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Columns"}),(0,i.jsx)(eh.X,{marginBottom:"10px",isChecked:o,onChange:e=>{a(e.target.checked),r({...t,columns:void 0})},children:"All columns"}),!o&&(0,i.jsx)(eF.Ph,{isMulti:!0,closeMenuOnSelect:!1,options:h.map(e=>({label:e,value:e})),value:(null!==(n=t.columns)&&void 0!==n?n:[]).map(e=>({label:e,value:e})),onChange:e=>{let n;let l=e.map(e=>e.value);n=0===l.length?void 0:l,r({...t,columns:n})}})]})]})}let eJ={lineage_diff:{title:"Lineage Diff",icon:r.Ks7},schema_diff:{title:"Schema Diff",icon:eK.C8A},query:{title:"Query",icon:r.r2i,RunResultView:es},query_base:{title:"Query Base",icon:r.r2i,RunResultView:es},query_diff:{title:"Query Diff",icon:r.r2i,RunResultView:ex},row_count:{title:"Row Count",icon:eK.QUK,RunResultView:eb},row_count_diff:{title:"Row Count Diff",icon:eK.QUK,RunResultView:eC},profile:{title:"Profile",icon:r.KA6,RunResultView:ed,RunForm:eQ},profile_diff:{title:"Profile Diff",icon:r.KA6,RunResultView:eu,RunForm:eQ},value_diff:{title:"Value Diff",icon:r.pRi,RunResultView:eq,RunForm:eD},value_diff_detail:{title:"Value Diff Detail",icon:r.pRi,RunResultView:eP,RunForm:eD},top_k_diff:{title:"Top-K Diff",icon:eZ.ruf,RunResultView:eV,RunForm:function(e){let{params:n,onParamsChanged:t,setIsReadyToExecute:r}=e,{columns:l,isLoading:o,error:a}=(0,eS.ZP)(n.model),s=l.map(e=>e.name);return((0,R.useEffect)(()=>{r(!!n.column_name)},[n,r]),o)?(0,i.jsx)(u.x,{children:"Loading..."}):0===s.length||a?(0,i.jsx)(u.x,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsx)(u.x,{m:"16px",children:(0,i.jsxs)(e_.NI,{children:[(0,i.jsx)(ew.l,{children:"Pick a column to show top-k"}),(0,i.jsx)(ek.P,{placeholder:"Select column",value:n.column_name,onChange:e=>{let r=e.target.value;t({...n,column_name:r})},children:s.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})})}},histogram_diff:{title:"Histogram Diff",icon:r.dku,RunResultView:k,RunForm:l.r},sandbox:{title:"Sandbox",icon:r.iQd}},eG=e=>eJ[e]},63003:function(e,n,t){"use strict";t.d(n,{U:function(){return o},f:function(){return a}});var r=t(26828),l=t(93482),i=t(83147);let o=r.default.create({baseURL:l.U}),a=new i.S},94725:function(e,n,t){"use strict";t.d(n,{V:function(){return r}});let r={rowCount:e=>["row_count",e],lineage:()=>["lineage"],checks:()=>["checks","list"],check:e=>["checks",e],runs:()=>["runs"],run:e=>["runs",e],runsAggregated:()=>["runs_aggregated"],flag:()=>["flag"],instanceInfo:()=>["instance_info"]}},76803:function(e,n,t){"use strict";t.d(n,{bV:function(){return i},yG:function(){return l}});var r=t(63003);async function l(){return(await r.U.get("/api/flag")).data}async function i(){try{await r.U.post("/api/relaunch-hint/completed")}catch(e){}}},21454:function(e,n,t){"use strict";t.d(n,{L6:function(){return l},xx:function(){return i}});var r=t(63003);async function l(){return(await r.U.get("/api/info")).data}async function i(e){return(await r.U.get("/api/model/".concat(e))).data}},64625:function(e,n,t){"use strict";t.d(n,{Eg:function(){return a},Qp:function(){return o},g9:function(){return i},i7:function(){return c},rf:function(){return s},sw:function(){return d},v1:function(){return u}});var r=t(63003),l=t(88894);async function i(e,n,t){let i=(null==t?void 0:t.trackProps)?{...t.trackProps}:{};return(0,l.rM)()&&(i.breaking_change_analysis=!0),(await r.U.post("/api/runs",{type:e,params:n,nowait:null==t?void 0:t.nowait,track_props:i})).data}async function o(e,n){return(await r.U.get("/api/runs/".concat(e,"/wait"),{params:{timeout:n}})).data}async function a(e){return await r.U.post("/api/runs/".concat(e,"/cancel"))}async function s(e,n){return(await r.U.post("/api/checks/".concat(e,"/run"),{nowait:null==n?void 0:n.nowait})).data}async function u(e,n,t){return(await r.U.post("/api/runs/search",{type:e,params:n,limit:t})).data}async function d(){return(await r.U.get("/api/runs")).data}async function c(){return(await r.U.post("/api/runs/aggregate",{})).data}},69069:function(e,n,t){"use strict";t.d(n,{PQ:function(){return o},V5:function(){return s},gr:function(){return c},mB:function(){return d},po:function(){return i},tw:function(){return u},xq:function(){return a}});var r=t(86891),l=t(63003);async function i(e){return(await l.U.post("/api/save-as",e)).data}async function o(e){return(await l.U.post("/api/rename",e)).data}async function a(){return(await l.U.post("/api/export")).data}async function s(e,n){let t=new FormData;return t.append("file",e),t.append("checks_only",(!!n).toString()),(await l.U.post("/api/import",t)).data}async function u(){return 208===(await l.U.get("/api/sync")).status}async function d(e){try{let n=await l.U.post("/api/sync",e);if(202===n.status)return{status:"accepted"};if(208===n.status)return{status:"syncing"}}catch(e){if((0,r.IZ)(e)&&e.response&&409===e.response.status)return{status:"conflict"}}throw Error("Failed to sync state")}async function c(){return(await l.U.post("/api/share")).data}},88894:function(e,n,t){"use strict";t.d(n,{B2:function(){return s},BA:function(){return d},FF:function(){return u},JY:function(){return i},KB:function(){return h},P6:function(){return c},U8:function(){return a},lH:function(){return p},nO:function(){return v},oq:function(){return o},rM:function(){return m},v4:function(){return f}});var r=t(6481),l=t(85555);function i(){let e=function(e){let n=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return n?n.pop():""}("recce_user_id"),n=l.env.AMPLITUDE_API_KEY;if(e&&n)try{(0,r.Pn)(n,{analytics:{userId:e,autocapture:!0},sr:{sampleRate:1}})}catch(e){console.error(e)}}function o(e){(0,r.j)("[Web] multi_nodes_action",e)}function a(e){(0,r.j)("[Web] history_action",e)}function s(e){(0,r.j)("[Experiment] preview_change",e)}function u(e){(0,r.j)("[Experiment] preview_change",e)}function d(e){(0,r.j)("[Experiment] single_environment",e)}function c(e){(0,r.j)("[Experiment] recommend_preset_check",e)}function m(){return!1}function h(e){(0,r.j)("Column level lineage",e)}function f(e){(0,r.j)("share_state",e)}function p(e){(0,r.j)("state_action",e)}function v(e){(0,r.j)("[Click] copy_to_clipboard",e)}},93482:function(e,n,t){"use strict";t.d(n,{U:function(){return i}});var r=t(85555);let l=r.env.NEXT_PUBLIC_API_URL;null!=l||(l=window.location.origin);let i=l,o=r.env.NEXT_PUBLIC_CLOUD_WEB_URL;null!=o||(o="https://cloud.datarecce.io")},19692:function(e,n,t){"use strict";t.d(n,{cP:function(){return N},kJ:function(){return T},P:function(){return A}});var r=t(26415),l=t(61655),i=t(81687),o=t(89981),a=t(97129),s=t(94725),u=t(21454),d=t(26553),c=t(77622),m=t(16594),h=t(90519),f=t(56682),p=t(8543),v=t(71888),x=t(89533),g=t(56462),y=t(67089),j=t(93482),C=t(62461),b=t.n(C),_=t(64625),w=t(76803),k=t(43172),S=t(88894),M=t(94002),R=t(58687);function E(e){let{connect:n}=e;return(0,r.jsxs)(f.h,{children:[(0,r.jsx)(p.x,{children:"Server Disconnected"}),(0,r.jsx)(v.f,{children:(0,r.jsx)(x.x,{children:"The server connection has been lost. Please restart the Recce server and try again."})}),(0,r.jsx)(g.m,{children:(0,r.jsx)(y.z,{colorScheme:"blue",onClick:()=>{n()},children:"Retry"})})]})}function O(e){let{shareUrl:n}=e;return(0,r.jsxs)(f.h,{children:[(0,r.jsx)(p.x,{children:"Share Instance Expired"}),(0,r.jsx)(v.f,{children:(0,r.jsx)(x.x,{children:"This Share Instance has expired. Please restart the share instance."})}),(0,r.jsx)(g.m,{children:(0,r.jsx)(R.default,{href:n,passHref:!0,children:(0,r.jsx)(y.z,{colorScheme:"blue",children:"Restart"})})})]})}let L=(0,a.createContext)({isActionAvailable:()=>!0});function N(e){var n,t;let{children:C}=e,R=(0,o.a)({queryKey:s.V.lineage(),queryFn:u.L6}),N=(0,o.a)({queryKey:s.V.runsAggregated(),queryFn:_.i7}),T=(0,a.useMemo)(()=>{var e;let n=null===(e=R.data)||void 0===e?void 0:e.lineage;if((null==n?void 0:n.base)&&n.current)return(0,l.WU)(n.base,n.current,n.diff)},[R.data]),A=null===(n=R.error)||void 0===n?void 0:n.message,{state_metadata:I,lineage:V,sqlmesh:P,demo:H,review_mode:F,cloud_mode:D,file_mode:z,filename:U,adapter_type:W,git:B,pull_request:q,support_tasks:Z}=null!==(t=R.data)&&void 0!==t?t:{},K=null==V?void 0:V.base.manifest_metadata,Q=null==V?void 0:V.current.manifest_metadata,{connectionStatus:J,connect:G,envStatus:$}=function(){let e=(0,d.p)(),n=(0,a.useRef)({ws:void 0,status:"pending"}),[t,r]=(0,a.useState)("pending"),[l,o]=(0,a.useState)(void 0);n.current.status=t;let u=(0,i.NL)(),c=()=>{u.invalidateQueries({queryKey:s.V.lineage()}),u.invalidateQueries({queryKey:s.V.checks()}),u.invalidateQueries({queryKey:s.V.runs()})},m=()=>{let t=new WebSocket("".concat(j.U.replace(/(http)(s)?:\/\//,"ws$2://"),"/api/ws"));n.current.ws=t,t.onopen=()=>{t.send("ping")},t.onmessage=t=>{if("pong"===t.data){"disconnected"===n.current.status&&c(),r("connected");return}try{let n=JSON.parse(t.data);if("refresh"===n.command){let{eventType:t,srcPath:r}=n.event,[l,i]=r.split("/").slice(-2),o=b().parse(i).name,a="".concat(l,"-").concat(o,"-").concat(t);e.isActive(a)||e({id:a,description:"Detected ".concat(l," ").concat(o," ").concat(t),status:"info",variant:"left-accent",position:"bottom-right",duration:5e3,isClosable:!0}),c()}else if("relaunch"===n.command)o("relaunch");else{let{id:t,title:r,description:l,status:i,position:o,duration:a}=n.event;e({id:t||"broadcast",title:r,description:l,status:null!=i?i:"info",variant:"left-accent",position:null!=o?o:"bottom-right",duration:null!=a?a:5e3,isClosable:!0})}}catch(e){console.error(e)}},t.onerror=e=>{console.error(e)},t.onclose=()=>{r(e=>"connected"===e?"disconnected":e),n.current.ws=void 0}};return(0,a.useEffect)(()=>{let e=n.current;return m(),()=>{e.ws&&e.ws.close()}},[]),{connectionStatus:t,connect:m,envStatus:l}}(),{data:X,isLoading:Y}=(0,k.P)(),{data:ee}=(0,M.e)(),{onClose:en}=(0,c.q)(),[et,er]=(0,a.useState)(!1),el=(0,i.NL)(),ei=(0,a.useCallback)(e=>{if(Z){var n;return null===(n=Z[e])||void 0===n||n}return!0},[Z]);(0,a.useEffect)(()=>{Y||("relaunch"===$&&(null==X?void 0:X.single_env_onboarding)&&X.show_relaunch_hint?(er(!0),(0,S.BA)({action:"target_base_added"})):er(!1))},[X,$,Y]);let{share_url:eo}=null!=ee?ee:{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.Provider,{value:{lineageGraph:T,retchLineageGraph:()=>{N.refetch()},envInfo:{stateMetadata:I,adapterType:W,git:B,pullRequest:q,dbt:{base:K,current:Q},sqlmesh:P},reviewMode:F,cloudMode:D,fileMode:z,fileName:U,isDemoSite:H,error:A,supportTasks:Z,isActionAvailable:ei,isLoading:R.isLoading,runsAggregated:N.data,refetchRunsAggregated:()=>{N.refetch()}},children:C}),(0,r.jsxs)(m.u_,{isOpen:"disconnected"===J,onClose:()=>{},isCentered:!0,children:[(0,r.jsx)(h.Z,{}),eo?(0,r.jsx)(O,{shareUrl:eo}):(0,r.jsx)(E,{connect:G})]}),(null==X?void 0:X.single_env_onboarding)&&(0,r.jsxs)(m.u_,{isOpen:et,onClose:()=>{en(),(0,w.bV)(),el.invalidateQueries({queryKey:s.V.flag()})},isCentered:!0,children:[(0,r.jsx)(h.Z,{}),(0,r.jsxs)(f.h,{children:[(0,r.jsx)(p.x,{children:"Target-base Added"}),(0,r.jsx)(v.f,{children:(0,r.jsx)(x.x,{children:"Please restart the Recce server."})}),(0,r.jsx)(g.m,{children:(0,r.jsx)(y.z,{colorScheme:"blue",onClick:()=>{en(),(0,w.bV)(),el.invalidateQueries({queryKey:s.V.flag()})},children:"Got it!"})})]})]})]})}let T=()=>(0,a.useContext)(L),A=()=>{let{runsAggregated:e,refetchRunsAggregated:n}=T();return[e,n]}},22363:function(e,n,t){"use strict";t.d(n,{Q2:function(){return A},$q:function(){return I}});var r=t(26415),l=t(97129),i=t(16594),o=t(90519),a=t(56682),s=t(8543),u=t(71941),d=t(86888),c=t(218),m=t(89438),h=t(61930),f=t(22728),p=t(62392),v=t(2703),x=t(71888),g=t(61737),y=t(56462),j=t(17451),C=t(67089),b=t(64315);let _=e=>({value_diff:"https://docs.datarecce.io/features/lineage/#value-diff",profile_diff:"https://docs.datarecce.io/features/lineage/#profile-diff",histogram_diff:"https://docs.datarecce.io/features/lineage/#histogram-diff",top_k_diff:"https://docs.datarecce.io/features/lineage/#top-k-diff"})[e]||null,w=e=>{let{isOpen:n,onClose:t,onExecute:w,type:k,title:S,params:M,RunForm:R}=e,[E,O]=(0,l.useState)(M),[L,N]=(0,l.useState)(!1),T=_(k);return(0,r.jsxs)(i.u_,{isOpen:n,onClose:t,size:"6xl",scrollBehavior:"inside",children:[(0,r.jsx)(o.Z,{}),(0,r.jsxs)(a.h,{overflowY:"auto",height:"75%",minHeight:"400px",children:[(0,r.jsxs)(s.x,{className:"flex items-center",children:[S," ",T&&(0,r.jsxs)(u.J,{trigger:"hover",placement:"bottom-end",children:[(0,r.jsx)(d.x,{children:(0,r.jsx)(c.h,{display:"flex",size:"sm",variant:"unstyled","aria-label":"Click this button to learn more about the SQL behind",icon:(0,r.jsx)(m.J,{verticalAlign:"middle",as:b.aU,boxSize:"16px"}),onClick:()=>window.open(T,"_blank"),onFocus:e=>{e.preventDefault()}})}),(0,r.jsx)(h.y,{bg:"black",color:"white",children:(0,r.jsxs)(f.b,{fontSize:"sm",p:2,children:["Click"," ",(0,r.jsx)(p.r,{href:T,target:"_blank",textDecoration:"underline",color:"white",_hover:{color:"blue.300"},children:"here"})," ","to learn more about the SQL behind"]})})]})]}),(0,r.jsx)(v.o,{}),(0,r.jsx)(x.f,{p:"0px",h:"100%",overflow:"auto",borderY:"1px solid lightgray",children:(0,r.jsx)(g.x,{style:{contain:"layout"},children:R&&(0,r.jsx)(R,{params:E,onParamsChanged:O,setIsReadyToExecute:N})})}),(0,r.jsx)(y.m,{children:(0,r.jsx)(j.k,{gap:"10px",children:(0,r.jsx)(C.z,{isDisabled:!L,colorScheme:"blue",onClick:()=>{w(k,E)},children:"Execute"})})})]})]})};var k=t(77622),S=t(26553),M=t(54284),R=t(64625),E=t(72752),O=t(81687),L=t(94725);let N=(0,l.createContext)({runAction:()=>{},showRunId:e=>{},isRunResultOpen:!1,closeRunResult:()=>{},isHistoryOpen:!1,closeHistory:()=>{},showHistory:()=>{},clearRunResult:()=>{}}),T=e=>{let[n]=(0,M.TH)();(0,l.useEffect)(()=>{e()},[e,n])};function A(e){var n;let{children:t}=e,[i,o]=(0,l.useState)(),{isOpen:a,onOpen:s,onClose:u}=(0,k.q)(),{isOpen:d,onOpen:c,onClose:m}=(0,k.q)(),{isOpen:h,onOpen:f,onClose:p}=(0,k.q)(),v=(0,S.p)(),[x,g]=(0,l.useState)(),[y,j]=(0,M.TH)(),C=(0,O.NL)(),b=(0,l.useCallback)(async(e,n)=>{g(e),c(),!1!==n&&await C.invalidateQueries({queryKey:L.V.runs()})},[g,c,C]),_=(0,l.useCallback)(()=>{g(void 0),m()},[m,g]),A=(0,l.useCallback)(async(e,n,t)=>{try{let r;let l=new Date().getTime().toString();if(null==t?void 0:t.showLast){let t=await (0,R.v1)(e,n,1);1===t.length&&(r=t[0])}let i=(0,E.N)(e);if(void 0===i)throw Error("Unknown run type: ".concat(e));let{title:a,RunResultView:u,RunForm:d}=i;if(void 0===u)throw Error("Run type ".concat(e," does not have a result view"));if(void 0!=d&&(null==t?void 0:t.showForm))o({session:l,title:a,type:e,params:n,lastRun:r,options:t,RunForm:d}),s();else{let{run_id:r}=await (0,R.g9)(e,n,{nowait:!0,trackProps:null==t?void 0:t.trackProps});await b(r),await C.invalidateQueries({queryKey:L.V.runs()}),y.startsWith("/lineage")&&j("/lineage")}}catch(e){v({title:"Failed to submit a run",description:e instanceof Error?e.message:void 0,position:"bottom-right",status:"error",duration:5e3,isClosable:!0})}},[o,s,b,v,y,j,C]);T(u);let I=async(e,n)=>{try{var t;u();let{run_id:r}=await (0,R.g9)(e,n,{nowait:!0,trackProps:null==i?void 0:null===(t=i.options)||void 0===t?void 0:t.trackProps});await b(r)}catch(e){v({title:"Failed to submit a run",description:e instanceof Error?e.message:void 0,position:"bottom-right",status:"error",duration:5e3,isClosable:!0})}};return(0,r.jsxs)(N.Provider,{value:{runAction:A,runId:x,showRunId:b,isRunResultOpen:d,closeRunResult:m,isHistoryOpen:h,closeHistory:p,showHistory:f,clearRunResult:_},children:[i&&(0,r.jsx)(w,{isOpen:a,onClose:u,onExecute:I,title:i.title,type:i.type,params:i.params,initialRun:i.lastRun,RunForm:(null===(n=i.options)||void 0===n?void 0:n.showForm)&&i.RunForm?i.RunForm:void 0},i.session),t]})}let I=()=>(0,l.useContext)(N)},22301:function(e,n,t){"use strict";t.d(n,{L:function(){return o},p:function(){return a}});var r=t(26415),l=t(97129);let i=(0,l.createContext)({latestSelectedCheckId:"",setLatestSelectedCheckId:()=>{}});function o(e){let{children:n}=e,[t,o]=l.useState("");return(0,r.jsx)(i.Provider,{value:{setLatestSelectedCheckId:o,latestSelectedCheckId:t},children:n})}let a=()=>(0,l.useContext)(i)},65374:function(e,n,t){"use strict";t.d(n,{$:function(){return u},o:function(){return s}});var r=t(26415),l=t(97129),i=t(94002);let o={mode:null,disableSaveToFile:!1,disableExportStateFile:!1,disableImportStateFile:!1,disableUpdateChecklist:!1,disableDatabaseQuery:!1,disableViewActionDropdown:!1,disableNodeActionDropdown:!1,disableShare:!1},a=(0,l.createContext)({singleEnv:!1,authed:!1,lifetimeExpiredAt:void 0,featureToggles:o});function s(e){let{children:n}=e,{data:t,isLoading:s}=(0,i.e)(),[u,d]=(0,l.useState)(o),[c,m]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),[p,v]=(0,l.useState)();return(0,l.useEffect)(()=>{!s&&t&&(m(t.single_env),f(t.authed),t.lifetime_expired_at&&(v(new Date(t.lifetime_expired_at)),console.log("lifetime expired at",t.lifetime_expired_at)),"read-only"===t.server_mode?(o.mode="read only",o.disableSaveToFile=!0,o.disableExportStateFile=!0,o.disableImportStateFile=!0,o.disableUpdateChecklist=!0,o.disableDatabaseQuery=!0,o.disableViewActionDropdown=!0,o.disableNodeActionDropdown=!0,o.disableShare=!0):"preview"===t.server_mode&&(o.mode="preview mode",o.disableSaveToFile=!0,o.disableExportStateFile=!0,o.disableImportStateFile=!0,o.disableUpdateChecklist=!1,o.disableDatabaseQuery=!0,o.disableViewActionDropdown=!1,o.disableNodeActionDropdown=!1,o.disableShare=!0),t.single_env&&(o.disableUpdateChecklist=!0,o.disableShare=!0),d(o))},[t,s]),(0,r.jsx)(a.Provider,{value:{featureToggles:u,singleEnv:c,authed:h,lifetimeExpiredAt:p},children:n})}let u=()=>(0,l.useContext)(a)},89884:function(e,n,t){"use strict";t.d(n,{Z8:function(){return a},nw:function(){return i},rV:function(){return s},y3:function(){return d}});var r=t(26415),l=t(97129);let i='select * from {{ ref("mymodel") }}',o=(0,l.createContext)({sqlQuery:i,setSqlQuery:()=>{},primaryKeys:void 0,setPrimaryKeys:()=>{},isCustomQueries:!1,setCustomQueries:()=>{},baseSqlQuery:i,setBaseSqlQuery:()=>{}});function a(e){let{children:n}=e,[t,a]=l.useState(i),[s,u]=l.useState(i),[d,c]=l.useState(!1),[m,h]=l.useState();return(0,r.jsx)(o.Provider,{value:{setSqlQuery:a,sqlQuery:t,setPrimaryKeys:h,primaryKeys:m,isCustomQueries:d,setCustomQueries:c,baseSqlQuery:s,setBaseSqlQuery:u},children:n})}let s=()=>(0,l.useContext)(o),u=(0,l.createContext)({isNodesFetching:[],setIsNodesFetching:()=>{}});function d(e){let{children:n}=e,[t,i]=l.useState([]);return(0,r.jsx)(u.Provider,{value:{isNodesFetching:t,setIsNodesFetching:i},children:n})}},34101:function(e,n,t){"use strict";t.d(n,{k:function(){return a},z:function(){return s}});var r=t(26415),l=t(97129),i=t(69069);let o=(0,l.createContext)(void 0);function a(e){let{children:n}=e,[t,a]=(0,l.useState)(),[s,u]=(0,l.useState)(!1),[d,c]=(0,l.useState)(),m=async()=>{u(!0),c(void 0),a(void 0);try{let e=await (0,i.gr)();if("success"!==e.status){c(e.message);return}a(e.share_url)}catch(e){c(e.message)}finally{u(!1)}};return(0,r.jsx)(o.Provider,{value:{shareUrl:t,isLoading:s,error:d,handleShareClick:m},children:n})}let s=()=>{let e=(0,l.useContext)(o);if(!e)throw Error("useRecceShareStateContext must be used within a RecceShareStateContextProvider");return e}},78933:function(e,n,t){"use strict";var r=t(97129),l=t(21454),i=t(19692),o=t(66908),a=t.n(o);function s(e,n){let t=[];return e.forEach(e=>{t.some(n=>n.name===e.name)||t.push(e)}),n.forEach(e=>{t.some(n=>n.name===e.name)||t.push(e)}),t}n.ZP=e=>{var n;let{lineageGraph:t}=(0,i.kJ)(),[o,u]=(0,r.useState)([]),[d,c]=(0,r.useState)(),[m,h]=(0,r.useState)(!0),[f,p]=(0,r.useState)(null),v=a().find(null==t?void 0:t.nodes,{name:e}),x=(0,r.useMemo)(()=>v?function(e){function n(e){return(null==e?void 0:e.columns)?Object.values(e.columns):[]}return s(n(e.data.base),n(e.data.current))}(v):[],[v]),g=v?null===(n=v.data.current)||void 0===n?void 0:n.primary_key:void 0,y=(0,r.useCallback)(async()=>{try{let e=(await (0,l.xx)(null==v?void 0:v.id)).model;if(!e.base.columns||!e.current.columns){u([]);return}c(e.current.primary_key);let n=Object.values(e.base.columns),t=Object.values(e.current.columns);u(s(n,t))}catch(e){p(e)}},[null==v?void 0:v.id]);return(0,r.useEffect)(()=>{x.length>0?(u(x),c(g)):(null==v?void 0:v.id)===void 0?u([]):y().catch(e=>{}),h(!1)},[y,null==v?void 0:v.id,x,g]),{columns:o,primaryKey:d,isLoading:m,error:f}}},94002:function(e,n,t){"use strict";t.d(n,{e:function(){return a}});var r=t(89981),l=t(94725),i=t(63003);async function o(){return(await i.U.get("/api/instance-info")).data}let a=()=>(0,r.a)({queryKey:l.V.instanceInfo(),queryFn:o})},43172:function(e,n,t){"use strict";t.d(n,{P:function(){return o}});var r=t(89981),l=t(76803),i=t(94725);let o=()=>(0,r.a)({queryKey:i.V.flag(),queryFn:l.yG})},56199:function(e,n,t){"use strict";function r(e,n){let t=[...e],r=[...n],l=[];for(;t.length>0&&r.length>0;)if(l.includes(t[0]))t.shift();else if(l.includes(r[0]))r.shift();else if(t[0]===r[0])l.push(t[0]),t.shift(),r.shift();else if(r.includes(t[0])){let e=r.indexOf(t[0]);for(let n=0;n<e;n++)l.includes(r[n])||l.push(r[n]);l.push(t[0]),t.shift(),r.splice(0,e+1)}else l.push(t[0]),t.shift();return t.forEach(e=>{l.includes(e)||l.push(e)}),r.forEach(e=>{l.includes(e)||l.push(e)}),l}function l(e,n){let t=r(e,n),l={};for(let r of t)e.includes(r)?n.includes(r)?l[r]=void 0:l[r]="removed":l[r]="added";let i={};e.forEach((e,n)=>{i[e]=n});let o=-1;for(let e of t){let n=i[e];null!=n&&(n>o?o=n:l[e]="reordered")}return l}t.d(n,{Z:function(){return l},_:function(){return r}})},10499:function(){}}]);