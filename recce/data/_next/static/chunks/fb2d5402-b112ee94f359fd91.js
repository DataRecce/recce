"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{48510:function(e,t,n){n.d(t,{AC:function(){return A},HH:function(){return eU},Ly:function(){return p},OQ:function(){return ev},RX:function(){return eP},Rr:function(){return nL},VP:function(){return eI},_K:function(){return ty},ll:function(){return nH},oI:function(){return V},oR:function(){return k},s_:function(){return P},tV:function(){return nA},u5:function(){return et},x$:function(){return nz}});var o,l,r,a,i,d,s,c,u,g,h,p,m=n(66518),f=n(33261),v=n(18781),y=n(67414),x=n(5654),b=n(93082),S=n(10228),E=n(99702);n(62);let w=(0,m.createContext)(null),M=w.Provider,N={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>"The old edge with id=".concat(e," does not exist."),error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,t)=>"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?t.targetHandle:t.sourceHandle,'", edge id: ').concat(t.id,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')},C=N.error001();function k(e,t){let n=(0,m.useContext)(w);if(null===n)throw Error(C);return(0,v.s)(n,e,t)}let A=()=>{let e=(0,m.useContext)(w);if(null===e)throw Error(C);return(0,m.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},I=e=>e.userSelectionActive?"none":"all";function P(e){let{position:t,children:n,className:o,style:l,...r}=e,a=k(I),i="".concat(t).split("-");return m.createElement("div",{className:(0,f.Z)(["react-flow__panel",o,...i]),style:{...l,pointerEvents:a},...r},n)}function _(e){let{proOptions:t,position:n="bottom-right"}=e;return(null==t?void 0:t.hideAttribution)?null:m.createElement(P,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},m.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var R=(0,m.memo)(e=>{let{x:t,y:n,label:o,labelStyle:l={},labelShowBg:r=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:d=2,children:s,className:c,...u}=e,g=(0,m.useRef)(null),[h,p]=(0,m.useState)({x:0,y:0,width:0,height:0}),v=(0,f.Z)(["react-flow__edge-textwrapper",c]);return((0,m.useEffect)(()=>{if(g.current){let e=g.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}},[o]),void 0!==o&&o)?m.createElement("g",{transform:"translate(".concat(t-h.width/2," ").concat(n-h.height/2,")"),className:v,visibility:h.width?"visible":"hidden",...u},r&&m.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:d,ry:d}),m.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:g,style:l},o),s):null});let O=e=>({width:e.offsetWidth,height:e.offsetHeight}),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:D(e.x,t[0][0],t[1][0]),y:D(e.y,t[0][1],t[1][1])}},z=(e,t,n)=>e<t?D(Math.abs(e-t),1,50)/50:e>n?-D(Math.abs(e-n),1,50)/50:0,T=(e,t)=>[20*z(e.x,35,t.width-35),20*z(e.y,35,t.height-35)],L=e=>{var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},H=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),F=e=>{let{x:t,y:n,width:o,height:l}=e;return{x:t,y:n,x2:t+o,y2:n+l}},Z=e=>{let{x:t,y:n,x2:o,y2:l}=e;return{x:t,y:n,width:o-t,height:l-n}},X=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),V=(e,t)=>Z(H(F(e),F(t))),Y=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),K=e=>U(e.width)&&U(e.height)&&U(e.x)&&U(e.y),U=e=>!isNaN(e)&&isFinite(e),W=Symbol.for("internals"),j=["Enter"," ","Escape"],q=(e,t)=>{},G=e=>"nativeEvent"in e;function Q(e){var t,n;let o=G(e)?e.nativeEvent:e,l=(null===(n=o.composedPath)||void 0===n?void 0:null===(t=n.call(o))||void 0===t?void 0:t[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==l?void 0:l.nodeName)||(null==l?void 0:l.hasAttribute("contenteditable"))||!!(null==l?void 0:l.closest(".nokey"))}let $=e=>"clientX"in e,J=(e,t)=>{var n,o,l,r;let a=$(e),i=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,d=a?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:i-(null!==(l=null==t?void 0:t.left)&&void 0!==l?l:0),y:d-(null!==(r=null==t?void 0:t.top)&&void 0!==r?r:0)}},ee=()=>{var e,t;return"undefined"!=typeof navigator&&(null===(t=navigator)||void 0===t?void 0:null===(e=t.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0},et=e=>{let{id:t,path:n,labelX:o,labelY:l,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c,style:u,markerEnd:g,markerStart:h,interactionWidth:p=20}=e;return m.createElement(m.Fragment,null,m.createElement("path",{id:t,style:u,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:h}),p&&m.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),r&&U(o)&&U(l)?m.createElement(R,{x:o,y:l,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c}):null)};function en(e,t,n){return void 0===n?n:o=>{let l=t().edges.find(t=>t.id===e);l&&n(o,{...l})}}function eo(e){let{sourceX:t,sourceY:n,targetX:o,targetY:l}=e,r=Math.abs(o-t)/2,a=Math.abs(l-n)/2;return[o<t?o+r:o-r,l<n?l+a:l-a,r,a]}function el(e){let{sourceX:t,sourceY:n,targetX:o,targetY:l,sourceControlX:r,sourceControlY:a,targetControlX:i,targetControlY:d}=e,s=.125*t+.375*r+.375*i+.125*o,c=.125*n+.375*a+.375*d+.125*l;return[s,c,Math.abs(s-t),Math.abs(c-n)]}function er(e){let{pos:t,x1:n,y1:o,x2:l,y2:r}=e;return t===p.Left||t===p.Right?[.5*(n+l),o]:[n,.5*(o+r)]}function ea(e){let{sourceX:t,sourceY:n,sourcePosition:o=p.Bottom,targetX:l,targetY:r,targetPosition:a=p.Top}=e,[i,d]=er({pos:o,x1:t,y1:n,x2:l,y2:r}),[s,c]=er({pos:a,x1:l,y1:r,x2:t,y2:n}),[u,g,h,m]=el({sourceX:t,sourceY:n,targetX:l,targetY:r,sourceControlX:i,sourceControlY:d,targetControlX:s,targetControlY:c});return["M".concat(t,",").concat(n," C").concat(i,",").concat(d," ").concat(s,",").concat(c," ").concat(l,",").concat(r),u,g,h,m]}et.displayName="BaseEdge",(o=s||(s={})).Strict="strict",o.Loose="loose",(l=c||(c={})).Free="free",l.Vertical="vertical",l.Horizontal="horizontal",(r=u||(u={})).Partial="partial",r.Full="full",(a=g||(g={})).Bezier="default",a.Straight="straight",a.Step="step",a.SmoothStep="smoothstep",a.SimpleBezier="simplebezier",(i=h||(h={})).Arrow="arrow",i.ArrowClosed="arrowclosed",(d=p||(p={})).Left="left",d.Top="top",d.Right="right",d.Bottom="bottom";let ei=(0,m.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:l,sourcePosition:r=p.Bottom,targetPosition:a=p.Top,label:i,labelStyle:d,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:f,markerStart:v,interactionWidth:y}=e,[x,b,S]=ea({sourceX:t,sourceY:n,sourcePosition:r,targetX:o,targetY:l,targetPosition:a});return m.createElement(et,{path:x,labelX:b,labelY:S,label:i,labelStyle:d,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:f,markerStart:v,interactionWidth:y})});ei.displayName="SimpleBezierEdge";let ed={[p.Left]:{x:-1,y:0},[p.Right]:{x:1,y:0},[p.Top]:{x:0,y:-1},[p.Bottom]:{x:0,y:1}},es=e=>{let{source:t,sourcePosition:n=p.Bottom,target:o}=e;return n===p.Left||n===p.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}},ec=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eu(e){let{sourceX:t,sourceY:n,sourcePosition:o=p.Bottom,targetX:l,targetY:r,targetPosition:a=p.Top,borderRadius:i=5,centerX:d,centerY:s,offset:c=20}=e,[u,g,h,m,f]=function(e){let t,n,{source:o,sourcePosition:l=p.Bottom,target:r,targetPosition:a=p.Top,center:i,offset:d}=e,s=ed[l],c=ed[a],u={x:o.x+s.x*d,y:o.y+s.y*d},g={x:r.x+c.x*d,y:r.y+c.y*d},h=es({source:u,sourcePosition:l,target:g}),m=0!==h.x?"x":"y",f=h[m],v=[],y={x:0,y:0},x={x:0,y:0},[b,S,E,w]=eo({sourceX:o.x,sourceY:o.y,targetX:r.x,targetY:r.y});if(s[m]*c[m]==-1){t=i.x||b,n=i.y||S;let e=[{x:t,y:u.y},{x:t,y:g.y}],o=[{x:u.x,y:n},{x:g.x,y:n}];v=s[m]===f?"x"===m?e:o:"x"===m?o:e}else{let e=[{x:u.x,y:g.y}],i=[{x:g.x,y:u.y}];if(v="x"===m?s.x===f?i:e:s.y===f?e:i,l===a){let e=Math.abs(o[m]-r[m]);if(e<=d){let t=Math.min(d-1,d-e);s[m]===f?y[m]=(u[m]>o[m]?-1:1)*t:x[m]=(g[m]>r[m]?-1:1)*t}}if(l!==a){let t="x"===m?"y":"x",n=s[m]===c[t],o=u[t]>g[t],l=u[t]<g[t];(1===s[m]&&(!n&&o||n&&l)||1!==s[m]&&(!n&&l||n&&o))&&(v="x"===m?e:i)}let h={x:u.x+y.x,y:u.y+y.y},p={x:g.x+x.x,y:g.y+x.y};Math.max(Math.abs(h.x-v[0].x),Math.abs(p.x-v[0].x))>=Math.max(Math.abs(h.y-v[0].y),Math.abs(p.y-v[0].y))?(t=(h.x+p.x)/2,n=v[0].y):(t=v[0].x,n=(h.y+p.y)/2)}return[[o,{x:u.x+y.x,y:u.y+y.y},...v,{x:g.x+x.x,y:g.y+x.y},r],t,n,E,w]}({source:{x:t,y:n},sourcePosition:o,target:{x:l,y:r},targetPosition:a,center:{x:d,y:s},offset:c});return[u.reduce((e,t,n)=>e+(n>0&&n<u.length-1?function(e,t,n,o){let l=Math.min(ec(e,t)/2,ec(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return"L".concat(r," ").concat(a);if(e.y===a){let t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return"L ".concat(r+l*t,",").concat(a,"Q ").concat(r,",").concat(a," ").concat(r,",").concat(a+l*o)}let i=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return"L ".concat(r,",").concat(a+l*d,"Q ").concat(r,",").concat(a," ").concat(r+l*i,",").concat(a)}(u[n-1],t,u[n+1],i):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y)),""),g,h,m,f]}let eg=(0,m.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:l,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c,style:u,sourcePosition:g=p.Bottom,targetPosition:h=p.Top,markerEnd:f,markerStart:v,pathOptions:y,interactionWidth:x}=e,[b,S,E]=eu({sourceX:t,sourceY:n,sourcePosition:g,targetX:o,targetY:l,targetPosition:h,borderRadius:null==y?void 0:y.borderRadius,offset:null==y?void 0:y.offset});return m.createElement(et,{path:b,labelX:S,labelY:E,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c,style:u,markerEnd:f,markerStart:v,interactionWidth:x})});eg.displayName="SmoothStepEdge";let eh=(0,m.memo)(e=>{var t;return m.createElement(eg,{...e,pathOptions:(0,m.useMemo)(()=>{var t;return{borderRadius:0,offset:null===(t=e.pathOptions)||void 0===t?void 0:t.offset}},[null===(t=e.pathOptions)||void 0===t?void 0:t.offset])})});eh.displayName="StepEdge";let ep=(0,m.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:l,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c,style:u,markerEnd:g,markerStart:h,interactionWidth:p}=e,[f,v,y]=function(e){let{sourceX:t,sourceY:n,targetX:o,targetY:l}=e,[r,a,i,d]=eo({sourceX:t,sourceY:n,targetX:o,targetY:l});return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(l),r,a,i,d]}({sourceX:t,sourceY:n,targetX:o,targetY:l});return m.createElement(et,{path:f,labelX:v,labelY:y,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:d,labelBgPadding:s,labelBgBorderRadius:c,style:u,markerEnd:g,markerStart:h,interactionWidth:p})});function em(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ef(e){let{pos:t,x1:n,y1:o,x2:l,y2:r,c:a}=e;switch(t){case p.Left:return[n-em(n-l,a),o];case p.Right:return[n+em(l-n,a),o];case p.Top:return[n,o-em(o-r,a)];case p.Bottom:return[n,o+em(r-o,a)]}}function ev(e){let{sourceX:t,sourceY:n,sourcePosition:o=p.Bottom,targetX:l,targetY:r,targetPosition:a=p.Top,curvature:i=.25}=e,[d,s]=ef({pos:o,x1:t,y1:n,x2:l,y2:r,c:i}),[c,u]=ef({pos:a,x1:l,y1:r,x2:t,y2:n,c:i}),[g,h,m,f]=el({sourceX:t,sourceY:n,targetX:l,targetY:r,sourceControlX:d,sourceControlY:s,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(d,",").concat(s," ").concat(c,",").concat(u," ").concat(l,",").concat(r),g,h,m,f]}ep.displayName="StraightEdge";let ey=(0,m.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:l,sourcePosition:r=p.Bottom,targetPosition:a=p.Top,label:i,labelStyle:d,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:f,markerStart:v,pathOptions:y,interactionWidth:x}=e,[b,S,E]=ev({sourceX:t,sourceY:n,sourcePosition:r,targetX:o,targetY:l,targetPosition:a,curvature:null==y?void 0:y.curvature});return m.createElement(et,{path:b,labelX:S,labelY:E,label:i,labelStyle:d,labelShowBg:s,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:g,style:h,markerEnd:f,markerStart:v,interactionWidth:x})});ey.displayName="BezierEdge";let ex=(0,m.createContext)(null),eb=ex.Provider;ex.Consumer;let eS=()=>(0,m.useContext)(ex),eE=e=>"id"in e&&"source"in e&&"target"in e,ew=e=>{let{source:t,sourceHandle:n,target:o,targetHandle:l}=e;return"reactflow__edge-".concat(t).concat(n||"","-").concat(o).concat(l||"")},eM=(e,t)=>void 0===e?"":"string"==typeof e?e:"".concat(t?"".concat(t,"__"):"").concat(Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&")),eN=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),eC=(e,t)=>{let n;return e.source&&e.target?eN(n=eE(e)?{...e}:{...e,id:ew(e)},t)?t:t.concat(n):(q("006",N.error006()),t)},ek=(e,t,n,o)=>{let{x:l,y:r}=e,[a,i,d]=t,[s,c]=o,u={x:(l-a)/d,y:(r-i)/d};return n?{x:s*Math.round(u.x/s),y:c*Math.round(u.y/c)}:u},eA=(e,t)=>{let{x:n,y:o}=e,[l,r,a]=t;return{x:n*a+l,y:o*a+r}},eI=function(e){var t,n;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let l=(null!==(t=e.width)&&void 0!==t?t:0)*o[0],r=(null!==(n=e.height)&&void 0!==n?n:0)*o[1],a={x:e.position.x-l,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-l,y:e.positionAbsolute.y-r}:a}},eP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return 0===e.length?{x:0,y:0,width:0,height:0}:Z(e.reduce((e,n)=>{let{x:o,y:l}=eI(n,t).positionAbsolute;return H(e,F({x:o,y:l,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},e_=function(e,t){let[n,o,l]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],d={x:(t.x-n)/l,y:(t.y-o)/l,width:t.width/l,height:t.height/l},s=[];return e.forEach(e=>{let{width:t,height:n,selectable:o=!0,hidden:l=!1}=e;if(a&&!o||l)return!1;let{positionAbsolute:c}=eI(e,i),u=Y(d,{x:c.x,y:c.y,width:t||0,height:n||0}),g=void 0===t||void 0===n||null===t||null===n,h=(t||0)*(n||0);(g||r&&u>0||u>=h||e.dragging)&&s.push(e)}),s},eR=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},eO=function(e,t,n,o,l){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,a=D(Math.min(t/(e.width*(1+r)),n/(e.height*(1+r))),o,l);return{x:t/2-(e.x+e.width/2)*a,y:n/2-(e.y+e.height/2)*a,zoom:a}},eD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function eB(e,t,n,o){return(t[n]||[]).reduce((t,l)=>{if("".concat(e.id,"-").concat(l.id,"-").concat(n)!==o){var r,a,i,d;t.push({id:l.id||null,type:n,nodeId:e.id,x:(null!==(i=null===(r=e.positionAbsolute)||void 0===r?void 0:r.x)&&void 0!==i?i:0)+l.x+l.width/2,y:(null!==(d=null===(a=e.positionAbsolute)||void 0===a?void 0:a.y)&&void 0!==d?d:0)+l.y+l.height/2})}return t},[])}let ez={source:null,target:null,sourceHandle:null,targetHandle:null},eT=()=>({handleDomNode:null,isValid:!1,connection:ez,endHandle:null});function eL(e,t,n,o,l,r,a){let i="target"===l,d=a.querySelector('.react-flow__handle[data-id="'.concat(null==e?void 0:e.nodeId,"-").concat(null==e?void 0:e.id,"-").concat(null==e?void 0:e.type,'"]')),c={...eT(),handleDomNode:d};if(d){let e=eH(void 0,d),l=d.getAttribute("data-nodeid"),a=d.getAttribute("data-handleid"),u=d.classList.contains("connectable"),g=d.classList.contains("connectableend"),h={source:i?l:n,sourceHandle:i?a:o,target:i?n:l,targetHandle:i?o:a};c.connection=h,u&&g&&(t===s.Strict?i&&"source"===e||!i&&"target"===e:l!==n||a!==o)&&(c.endHandle={nodeId:l,handleId:a,type:e},c.isValid=r(h))}return c}function eH(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function eF(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function eZ(e){let t,n,{event:o,handleId:l,nodeId:r,onConnect:a,isTarget:i,getState:d,setState:s,isValidConnection:c,edgeUpdaterType:u,onEdgeUpdateEnd:g}=e,h=L(o.target),{connectionMode:p,domNode:m,autoPanOnConnect:f,connectionRadius:v,onConnectStart:y,panBy:x,getNodes:b,cancelConnection:S}=d(),E=0,{x:w,y:M}=J(o),N=eH(u,null==h?void 0:h.elementFromPoint(w,M)),C=null==m?void 0:m.getBoundingClientRect();if(!C||!N)return;let k=J(o,C),A=!1,I=null,P=!1,_=null,R=function(e){let{nodes:t,nodeId:n,handleId:o,handleType:l}=e;return t.reduce((e,t)=>{if(t[W]){let{handleBounds:r}=t[W],a=[],i=[];r&&(a=eB(t,r,"source","".concat(n,"-").concat(o,"-").concat(l)),i=eB(t,r,"target","".concat(n,"-").concat(o,"-").concat(l))),e.push(...a,...i)}return e},[])}({nodes:b(),nodeId:r,handleId:l,handleType:N}),O=()=>{if(!f)return;let[e,t]=T(k,C);x({x:e,y:t}),E=requestAnimationFrame(O)};function D(e){var o,a;let u;let{transform:g}=d();k=J(e,C);let{handle:m,validHandleResult:f}=function(e,t,n,o,l,r){let{x:a,y:i}=J(e),d=t.elementsFromPoint(a,i).find(e=>e.classList.contains("react-flow__handle"));if(d){let e=d.getAttribute("data-nodeid");if(e){let t=eH(void 0,d),o=d.getAttribute("data-handleid"),a=r({nodeId:e,id:o,type:t});if(a){let r=l.find(n=>n.nodeId===e&&n.type===t&&n.id===o);return{handle:{id:o,type:t,nodeId:e,x:(null==r?void 0:r.x)||n.x,y:(null==r?void 0:r.y)||n.y},validHandleResult:a}}}}let s=[],c=1/0;if(l.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=o){let n=r(e);t<=c&&(t<c?s=[{handle:e,validHandleResult:n}]:t===c&&s.push({handle:e,validHandleResult:n}),c=t)}}),!s.length)return{handle:null,validHandleResult:eT()};if(1===s.length)return s[0];let u=s.some(e=>{let{validHandleResult:t}=e;return t.isValid}),g=s.some(e=>{let{handle:t}=e;return"target"===t.type});return s.find(e=>{let{handle:t,validHandleResult:n}=e;return g?"target"===t.type:!u||n.isValid})||s[0]}(e,h,ek(k,g,!1,[1,1]),v,R,e=>eL(e,p,r,l,i?"target":"source",c,h));if(t=m,A||(O(),A=!0),_=f.handleDomNode,I=f.connection,P=f.isValid,s({connectionPosition:t&&P?eA({x:t.x,y:t.y},g):k,connectionStatus:(o=!!t,u=null,(a=P)?u="valid":o&&!a&&(u="invalid"),u),connectionEndHandle:f.endHandle}),!t&&!P&&!_)return eF(n);I.source!==I.target&&_&&(eF(n),n=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",P),_.classList.toggle("react-flow__handle-valid",P))}function B(e){var o,l;(t||_)&&I&&P&&(null==a||a(I)),null===(o=(l=d()).onConnectEnd)||void 0===o||o.call(l,e),u&&(null==g||g(e)),eF(n),S(),cancelAnimationFrame(E),A=!1,P=!1,I=null,_=null,h.removeEventListener("mousemove",D),h.removeEventListener("mouseup",B),h.removeEventListener("touchmove",D),h.removeEventListener("touchend",B)}s({connectionPosition:k,connectionStatus:null,connectionNodeId:r,connectionHandleId:l,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:l,type:N},connectionEndHandle:null}),null==y||y(o,{nodeId:r,handleId:l,handleType:N}),h.addEventListener("mousemove",D),h.addEventListener("mouseup",B),h.addEventListener("touchmove",D),h.addEventListener("touchend",B)}let eX=()=>!0,eV=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),eY=(e,t,n)=>o=>{let{connectionStartHandle:l,connectionEndHandle:r,connectionClickStartHandle:a}=o;return{connecting:(null==l?void 0:l.nodeId)===e&&(null==l?void 0:l.handleId)===t&&(null==l?void 0:l.type)===n||(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.handleId)===t&&(null==r?void 0:r.type)===n,clickConnecting:(null==a?void 0:a.nodeId)===e&&(null==a?void 0:a.handleId)===t&&(null==a?void 0:a.type)===n}},eK=(0,m.forwardRef)((e,t)=>{let{type:n="source",position:o=p.Top,isValidConnection:l,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:i=!0,id:d,onConnect:s,children:c,className:u,onMouseDown:g,onTouchStart:h,...v}=e,x=d||null,b="target"===n,S=A(),E=eS(),{connectOnClick:w,noPanClassName:M}=k(eV,y.X),{connecting:C,clickConnecting:I}=k(eY(E,x,n),y.X);if(!E){var P,_;null===(P=(_=S.getState()).onError)||void 0===P||P.call(_,"010",N.error010())}let R=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=S.getState(),l={...t,...e};if(o){let{edges:e,setEdges:t}=S.getState();t(eC(l,e))}null==n||n(l),null==s||s(l)},O=e=>{if(!E)return;let t=$(e);a&&(t&&0===e.button||!t)&&eZ({event:e,handleId:x,nodeId:E,onConnect:R,isTarget:b,getState:S.getState,setState:S.setState,isValidConnection:l||S.getState().isValidConnection||eX}),t?null==g||g(e):null==h||h(e)};return m.createElement("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":o,"data-id":"".concat(E,"-").concat(x,"-").concat(n),className:(0,f.Z)(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",M,u,{source:!b,target:b,connectable:r,connectablestart:a,connectableend:i,connecting:I,connectionindicator:r&&(a&&!C||i&&C)}]),onMouseDown:O,onTouchStart:O,onClick:w?e=>{let{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:r,connectionMode:i,isValidConnection:d}=S.getState();if(!E||!r&&!a)return;if(!r){null==t||t(e,{nodeId:E,handleId:x,handleType:n}),S.setState({connectionClickStartHandle:{nodeId:E,type:n,handleId:x}});return}let s=L(e.target),c=l||d||eX,{connection:u,isValid:g}=eL({nodeId:E,id:x,type:n},i,r.nodeId,r.handleId||null,r.type,c,s);g&&R(u),null==o||o(e),S.setState({connectionClickStartHandle:null})}:void 0,ref:t,...v},c)});eK.displayName="Handle";var eU=(0,m.memo)(eK);let eW=e=>{let{data:t,isConnectable:n,targetPosition:o=p.Top,sourcePosition:l=p.Bottom}=e;return m.createElement(m.Fragment,null,m.createElement(eU,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label,m.createElement(eU,{type:"source",position:l,isConnectable:n}))};eW.displayName="DefaultNode";var ej=(0,m.memo)(eW);let eq=e=>{let{data:t,isConnectable:n,sourcePosition:o=p.Bottom}=e;return m.createElement(m.Fragment,null,null==t?void 0:t.label,m.createElement(eU,{type:"source",position:o,isConnectable:n}))};eq.displayName="InputNode";var eG=(0,m.memo)(eq);let eQ=e=>{let{data:t,isConnectable:n,targetPosition:o=p.Top}=e;return m.createElement(m.Fragment,null,m.createElement(eU,{type:"target",position:o,isConnectable:n}),null==t?void 0:t.label)};eQ.displayName="OutputNode";var e$=(0,m.memo)(eQ);let eJ=()=>null;eJ.displayName="GroupNode";let e0=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected)}),e1=e=>e.id;function e2(e,t){return(0,y.X)(e.selectedNodes.map(e1),t.selectedNodes.map(e1))&&(0,y.X)(e.selectedEdges.map(e1),t.selectedEdges.map(e1))}let e5=(0,m.memo)(e=>{let{onSelectionChange:t}=e,n=A(),{selectedNodes:o,selectedEdges:l}=k(e0,e2);return(0,m.useEffect)(()=>{let e={nodes:o,edges:l};null==t||t(e),n.getState().onSelectionChange.forEach(t=>t(e))},[o,l,t]),null});e5.displayName="SelectionListener";let e3=e=>!!e.onSelectionChange;function e4(e){let{onSelectionChange:t}=e,n=k(e3);return t||n?m.createElement(e5,{onSelectionChange:t}):null}let e6=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function e7(e,t){(0,m.useEffect)(()=>{void 0!==e&&t(e)},[e])}function e8(e,t,n){(0,m.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}let e9=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:l,onConnect:r,onConnectStart:a,onConnectEnd:i,onClickConnectStart:d,onClickConnectEnd:s,nodesDraggable:c,nodesConnectable:u,nodesFocusable:g,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:f,minZoom:v,maxZoom:x,nodeExtent:b,onNodesChange:S,onEdgesChange:E,elementsSelectable:w,connectionMode:M,snapGrid:N,snapToGrid:C,translateExtent:I,connectOnClick:P,defaultEdgeOptions:_,fitView:R,fitViewOptions:O,onNodesDelete:D,onEdgesDelete:B,onNodeDrag:z,onNodeDragStart:T,onNodeDragStop:L,onSelectionDrag:H,onSelectionDragStart:F,onSelectionDragStop:Z,noPanClassName:X,nodeOrigin:V,rfId:Y,autoPanOnConnect:K,autoPanOnNodeDrag:U,onError:W,connectionRadius:j,isValidConnection:q,nodeDragThreshold:G}=e,{setNodes:Q,setEdges:$,setDefaultNodesAndEdges:J,setMinZoom:ee,setMaxZoom:et,setTranslateExtent:en,setNodeExtent:eo,reset:el}=k(e6,y.X),er=A();return(0,m.useEffect)(()=>(J(o,null==l?void 0:l.map(e=>({...e,..._}))),()=>{el()}),[]),e8("defaultEdgeOptions",_,er.setState),e8("connectionMode",M,er.setState),e8("onConnect",r,er.setState),e8("onConnectStart",a,er.setState),e8("onConnectEnd",i,er.setState),e8("onClickConnectStart",d,er.setState),e8("onClickConnectEnd",s,er.setState),e8("nodesDraggable",c,er.setState),e8("nodesConnectable",u,er.setState),e8("nodesFocusable",g,er.setState),e8("edgesFocusable",h,er.setState),e8("edgesUpdatable",p,er.setState),e8("elementsSelectable",w,er.setState),e8("elevateNodesOnSelect",f,er.setState),e8("snapToGrid",C,er.setState),e8("snapGrid",N,er.setState),e8("onNodesChange",S,er.setState),e8("onEdgesChange",E,er.setState),e8("connectOnClick",P,er.setState),e8("fitViewOnInit",R,er.setState),e8("fitViewOnInitOptions",O,er.setState),e8("onNodesDelete",D,er.setState),e8("onEdgesDelete",B,er.setState),e8("onNodeDrag",z,er.setState),e8("onNodeDragStart",T,er.setState),e8("onNodeDragStop",L,er.setState),e8("onSelectionDrag",H,er.setState),e8("onSelectionDragStart",F,er.setState),e8("onSelectionDragStop",Z,er.setState),e8("noPanClassName",X,er.setState),e8("nodeOrigin",V,er.setState),e8("rfId",Y,er.setState),e8("autoPanOnConnect",K,er.setState),e8("autoPanOnNodeDrag",U,er.setState),e8("onError",W,er.setState),e8("connectionRadius",j,er.setState),e8("isValidConnection",q,er.setState),e8("nodeDragThreshold",G,er.setState),e7(t,Q),e7(n,$),e7(v,ee),e7(x,et),e7(I,en),e7(b,eo),null},te={display:"none"},tt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tn="react-flow__node-desc",to="react-flow__edge-desc",tl=e=>e.ariaLiveMessage;function tr(e){let{rfId:t}=e,n=k(tl);return m.createElement("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:tt},n)}function ta(e){let{rfId:t,disableKeyboardA11y:n}=e;return m.createElement(m.Fragment,null,m.createElement("div",{id:"".concat(tn,"-").concat(t),style:te},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),m.createElement("div",{id:"".concat(to,"-").concat(t),style:te},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&m.createElement(tr,{rfId:t}))}var ti=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0},[n,o]=(0,m.useState)(!1),l=(0,m.useRef)(!1),r=(0,m.useRef)(new Set([])),[a,i]=(0,m.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,m.useEffect)(()=>{let n=(null==t?void 0:t.target)||("undefined"!=typeof document?document:null);if(null!==e){let e=e=>{if(l.current=e.ctrlKey||e.metaKey||e.shiftKey,(!l.current||l.current&&!t.actInsideInputWithModifier)&&Q(e))return!1;let n=ts(e.code,i);r.current.add(e[n]),td(a,r.current,!1)&&(e.preventDefault(),o(!0))},d=e=>{if((!l.current||l.current&&!t.actInsideInputWithModifier)&&Q(e))return!1;let n=ts(e.code,i);td(a,r.current,!0)?(o(!1),r.current.clear()):r.current.delete(e[n]),"Meta"===e.key&&r.current.clear(),l.current=!1},s=()=>{r.current.clear(),o(!1)};return null==n||n.addEventListener("keydown",e),null==n||n.addEventListener("keyup",d),window.addEventListener("blur",s),()=>{null==n||n.removeEventListener("keydown",e),null==n||n.removeEventListener("keyup",d),window.removeEventListener("blur",s)}}},[e,o]),n};function td(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function ts(e,t){return t.includes(e)?"code":"key"}function tc(e,t,n){e.forEach(o=>{if(o.parentNode&&!e.has(o.parentNode))throw Error("Parent node ".concat(o.parentNode," not found"));if(o.parentNode||(null==n?void 0:n[o.id])){var l,r;let{x:a,y:i,z:d}=function e(t,n,o,l){var r,a,i,d,s,c,u,g;if(!t.parentNode)return o;let h=n.get(t.parentNode),p=eI(h,l);return e(h,n,{x:(null!==(i=o.x)&&void 0!==i?i:0)+p.x,y:(null!==(d=o.y)&&void 0!==d?d:0)+p.y,z:(null!==(s=null===(r=h[W])||void 0===r?void 0:r.z)&&void 0!==s?s:0)>(null!==(c=o.z)&&void 0!==c?c:0)?null!==(u=null===(a=h[W])||void 0===a?void 0:a.z)&&void 0!==u?u:0:null!==(g=o.z)&&void 0!==g?g:0},l)}(o,e,{...o.position,z:null!==(r=null===(l=o[W])||void 0===l?void 0:l.z)&&void 0!==r?r:0},t);o.positionAbsolute={x:a,y:i},o[W].z=d,(null==n?void 0:n[o.id])&&(o[W].isParent=!0)}})}function tu(e,t,n,o){let l=new Map,r={},a=o?1e3:0;return e.forEach(e=>{var n;let o=(U(e.zIndex)?e.zIndex:0)+(e.selected?a:0),i=t.get(e.id),d={width:null==i?void 0:i.width,height:null==i?void 0:i.height,...e,positionAbsolute:{x:e.position.x,y:e.position.y}};e.parentNode&&(d.parentNode=e.parentNode,r[e.parentNode]=!0),Object.defineProperty(d,W,{enumerable:!1,value:{handleBounds:null==i?void 0:null===(n=i[W])||void 0===n?void 0:n.handleBounds,z:o}}),l.set(e.id,d)}),tc(l,n,r),l}function tg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{getNodes:n,width:o,height:l,minZoom:r,maxZoom:a,d3Zoom:i,d3Selection:d,fitViewOnInitDone:s,fitViewOnInit:c,nodeOrigin:u}=e(),g=t.initial&&!s&&c;if(i&&d&&(g||!t.initial)){let e=n().filter(e=>{var n;let o=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return(null===(n=t.nodes)||void 0===n?void 0:n.length)?o&&t.nodes.some(t=>t.id===e.id):o}),s=e.every(e=>e.width&&e.height);if(e.length>0&&s){var h,p,m;let{x:n,y:s,zoom:c}=eO(eP(e,u),o,l,null!==(h=t.minZoom)&&void 0!==h?h:r,null!==(p=t.maxZoom)&&void 0!==p?p:a,null!==(m=t.padding)&&void 0!==m?m:.1),g=x.CR.translate(n,s).scale(c);return"number"==typeof t.duration&&t.duration>0?i.transform(eD(d,t.duration),g):i.transform(d,g),!0}}return!1}function th(e){let{changedNodes:t,changedEdges:n,get:o,set:l}=e,{nodeInternals:r,edges:a,onNodesChange:i,onEdgesChange:d,hasDefaultNodes:s,hasDefaultEdges:c}=o();(null==t?void 0:t.length)&&(s&&l({nodeInternals:(t.forEach(e=>{let t=r.get(e.id);t&&r.set(t.id,{...t,[W]:t[W],selected:e.selected})}),new Map(r))}),null==i||i(t)),(null==n?void 0:n.length)&&(c&&l({edges:a.map(e=>{let t=n.find(t=>t.id===e.id);return t&&(e.selected=t.selected),e})}),null==d||d(n))}let tp=()=>{},tm={zoomIn:tp,zoomOut:tp,zoomTo:tp,getZoom:()=>1,setViewport:tp,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:tp,fitBounds:tp,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},tf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),tv=()=>{let e=A(),{d3Zoom:t,d3Selection:n}=k(tf,y.X);return(0,m.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(eD(n,null==e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(eD(n,null==e?void 0:e.duration),1/1.2),zoomTo:(e,o)=>t.scaleTo(eD(n,null==o?void 0:o.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(o,l)=>{var r,a,i;let[d,s,c]=e.getState().transform,u=x.CR.translate(null!==(r=o.x)&&void 0!==r?r:d,null!==(a=o.y)&&void 0!==a?a:s).scale(null!==(i=o.zoom)&&void 0!==i?i:c);t.transform(eD(n,null==l?void 0:l.duration),u)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>tg(e.getState,t),setCenter:(o,l,r)=>{let{width:a,height:i,maxZoom:d}=e.getState(),s=void 0!==(null==r?void 0:r.zoom)?r.zoom:d,c=a/2-o*s,u=i/2-l*s,g=x.CR.translate(c,u).scale(s);t.transform(eD(n,null==r?void 0:r.duration),g)},fitBounds:(o,l)=>{var r;let{width:a,height:i,minZoom:d,maxZoom:s}=e.getState(),{x:c,y:u,zoom:g}=eO(o,a,i,d,s,null!==(r=null==l?void 0:l.padding)&&void 0!==r?r:.1),h=x.CR.translate(c,u).scale(g);t.transform(eD(n,null==l?void 0:l.duration),h)},project:t=>{let{transform:n,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ek(t,n,o,l)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:o,snapGrid:l,domNode:r}=e.getState();if(!r)return t;let{x:a,y:i}=r.getBoundingClientRect();return ek({x:t.x-a,y:t.y-i},n,o,l)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:l,y:r}=o.getBoundingClientRect(),a=eA(t,n);return{x:a.x+l,y:a.y+r}},viewportInitialized:!0}:tm,[t,n])};function ty(){let e=tv(),t=A(),n=(0,m.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),o=(0,m.useCallback)(e=>t.getState().nodeInternals.get(e),[]),l=(0,m.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),r=(0,m.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),a=(0,m.useCallback)(e=>{let{getNodes:n,setNodes:o,hasDefaultNodes:l,onNodesChange:r}=t.getState(),a=n(),i="function"==typeof e?e(a):e;l?o(i):r&&r(0===i.length?a.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))},[]),i=(0,m.useCallback)(e=>{let{edges:n=[],setEdges:o,hasDefaultEdges:l,onEdgesChange:r}=t.getState(),a="function"==typeof e?e(n):e;l?o(a):r&&r(0===a.length?n.map(e=>({type:"remove",id:e.id})):a.map(e=>({item:e,type:"reset"})))},[]),d=(0,m.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:o,setNodes:l,hasDefaultNodes:r,onNodesChange:a}=t.getState();r?l([...o(),...n]):a&&a(n.map(e=>({item:e,type:"add"})))},[]),s=(0,m.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:o=[],setEdges:l,hasDefaultEdges:r,onEdgesChange:a}=t.getState();r?l([...o,...n]):a&&a(n.map(e=>({item:e,type:"add"})))},[]),c=(0,m.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:o}=t.getState(),[l,r,a]=o;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:l,y:r,zoom:a}}},[]),u=(0,m.useCallback)(e=>{let{nodes:n,edges:o}=e,{nodeInternals:l,getNodes:r,edges:a,hasDefaultNodes:i,hasDefaultEdges:d,onNodesDelete:s,onEdgesDelete:c,onNodesChange:u,onEdgesChange:g}=t.getState(),h=(n||[]).map(e=>e.id),p=(o||[]).map(e=>e.id),m=r().reduce((e,t)=>{let n=!h.includes(t.id)&&t.parentNode&&e.find(e=>e.id===t.parentNode);return("boolean"!=typeof t.deletable||t.deletable)&&(h.includes(t.id)||n)&&e.push(t),e},[]),f=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),v=f.filter(e=>p.includes(e.id));if(m||v){let e=[...v,...eR(m,f)],n=e.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(d||i)&&(d&&t.setState({edges:a.filter(e=>!n.includes(e.id))}),i&&(m.forEach(e=>{l.delete(e.id)}),t.setState({nodeInternals:new Map(l)}))),n.length>0&&(null==c||c(e),g&&g(n.map(e=>({id:e,type:"remove"})))),m.length>0&&(null==s||s(m),u&&u(m.map(e=>({id:e.id,type:"remove"}))))}},[]),g=(0,m.useCallback)(e=>{let n=K(e),o=n?null:t.getState().nodeInternals.get(e.id);return[n?e:X(o),o,n]},[]),h=(0,m.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,[l,r,a]=g(e);return l?(o||t.getState().getNodes()).filter(e=>{if(!a&&(e.id===r.id||!e.positionAbsolute))return!1;let t=Y(X(e),l);return n&&t>0||t>=l.width*l.height}):[]},[]),p=(0,m.useCallback)(function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[o]=g(e);if(!o)return!1;let l=Y(o,t);return n&&l>0||l>=o.width*o.height},[]);return(0,m.useMemo)(()=>({...e,getNodes:n,getNode:o,getEdges:l,getEdge:r,setNodes:a,setEdges:i,addNodes:d,addEdges:s,toObject:c,deleteElements:u,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,o,l,r,a,i,d,s,c,u,h,p])}let tx={actInsideInputWithModifier:!1};var tb=e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e,o=A(),{deleteElements:l}=ty(),r=ti(t,tx),a=ti(n);(0,m.useEffect)(()=>{if(r){let{edges:e,getNodes:t}=o.getState();l({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),o.setState({nodesSelectionActive:!1})}},[r]),(0,m.useEffect)(()=>{o.setState({multiSelectionActive:a})},[a])};let tS={position:"absolute",width:"100%",height:"100%",top:0,left:0},tE=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,tw=e=>({x:e.x,y:e.y,zoom:e.k}),tM=(e,t)=>e.target.closest(".".concat(t)),tN=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),tC=e=>{let t=e.ctrlKey&&ee()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},tk=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),tA=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:o,onPaneContextMenu:l,zoomOnScroll:r=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:d=.5,panOnScrollMode:s=c.Free,zoomOnDoubleClick:u=!0,elementsSelectable:g,panOnDrag:h=!0,defaultViewport:p,translateExtent:f,minZoom:v,maxZoom:E,zoomActivationKeyCode:w,preventScrolling:M=!0,children:C,noWheelClassName:I,noPanClassName:P}=e,_=(0,m.useRef)(),R=A(),B=(0,m.useRef)(!1),z=(0,m.useRef)(!1),T=(0,m.useRef)(null),L=(0,m.useRef)({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:F,d3ZoomHandler:Z,userSelectionActive:X}=k(tk,y.X),V=ti(w),Y=(0,m.useRef)(0),K=(0,m.useRef)(!1),U=(0,m.useRef)();return!function(e){let t=A();(0,m.useEffect)(()=>{let n;let o=()=>{if(!e.current)return;let n=O(e.current);if(0===n.height||0===n.width){var o,l;null===(o=(l=t.getState()).onError)||void 0===o||o.call(l,"004",N.error004())}t.setState({width:n.width||500,height:n.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o())).observe(e.current),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}(T),(0,m.useEffect)(()=>{if(T.current){let e=T.current.getBoundingClientRect(),t=(0,x.sP)().scaleExtent([v,E]).translateExtent(f),n=(0,b.Z)(T.current).call(t),o=x.CR.translate(p.x,p.y).scale(D(p.zoom,v,E)),l=[[0,0],[e.width,e.height]],r=t.constrain()(o,l,f);t.transform(n,r),t.wheelDelta(tC),R.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[r.x,r.y,r.k],domNode:T.current.closest(".react-flow")})}},[]),(0,m.useEffect)(()=>{F&&H&&(!i||V||X?void 0!==Z&&F.on("wheel.zoom",function(e,t){if(!M||tM(e,I))return null;e.preventDefault(),Z.call(this,e,t)},{passive:!1}):F.on("wheel.zoom",e=>{if(tM(e,I))return!1;e.preventDefault(),e.stopImmediatePropagation();let l=F.property("__zoom").k||1,r=ee();if(e.ctrlKey&&a&&r){let t=(0,S.Z)(e),n=tC(e);H.scaleTo(F,l*Math.pow(2,n),t,e);return}let i=1===e.deltaMode?20:1,u=s===c.Vertical?0:e.deltaX*i,g=s===c.Horizontal?0:e.deltaY*i;!r&&e.shiftKey&&s!==c.Vertical&&(u=e.deltaY*i,g=0),H.translateBy(F,-(u/l)*d,-(g/l)*d,{internal:!0});let h=tw(F.property("__zoom")),{onViewportChangeStart:p,onViewportChange:m,onViewportChangeEnd:f}=R.getState();clearTimeout(U.current),K.current||(K.current=!0,null==n||n(e,h),null==p||p(h)),K.current&&(null==t||t(e,h),null==m||m(h),U.current=setTimeout(()=>{null==o||o(e,h),null==f||f(h),K.current=!1},150))},{passive:!1}))},[X,i,s,F,H,Z,V,a,M,I,n,t,o]),(0,m.useEffect)(()=>{H&&H.on("start",e=>{var t,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;Y.current=null===(t=e.sourceEvent)||void 0===t?void 0:t.button;let{onViewportChangeStart:l}=R.getState(),r=tw(e.transform);B.current=!0,L.current=r,(null===(o=e.sourceEvent)||void 0===o?void 0:o.type)==="mousedown"&&R.setState({paneDragging:!0}),null==l||l(r),null==n||n(e.sourceEvent,r)})},[H,n]),(0,m.useEffect)(()=>{H&&(X&&!B.current?H.on("zoom",null):X||H.on("zoom",e=>{var n,o;let{onViewportChange:r}=R.getState();if(R.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),z.current=!!(l&&tN(h,null!==(o=Y.current)&&void 0!==o?o:0)),(t||r)&&!(null===(n=e.sourceEvent)||void 0===n?void 0:n.internal)){let n=tw(e.transform);null==r||r(n),null==t||t(e.sourceEvent,n)}}))},[X,H,t,h,l]),(0,m.useEffect)(()=>{H&&H.on("end",e=>{var t;if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:n}=R.getState();if(B.current=!1,R.setState({paneDragging:!1}),l&&tN(h,null!==(t=Y.current)&&void 0!==t?t:0)&&!z.current&&l(e.sourceEvent),z.current=!1,(o||n)&&tE(L.current,e.transform)){let t=tw(e.transform);L.current=t,clearTimeout(_.current),_.current=setTimeout(()=>{null==n||n(t),null==o||o(e.sourceEvent,t)},i?150:0)}})},[H,i,h,o,l]),(0,m.useEffect)(()=>{H&&H.filter(e=>{let t=V||r,n=a&&e.ctrlKey;if((!0===h||Array.isArray(h)&&h.includes(1))&&1===e.button&&"mousedown"===e.type&&(tM(e,"react-flow__node")||tM(e,"react-flow__edge")))return!0;if(!h&&!t&&!i&&!u&&!a||X||!u&&"dblclick"===e.type||tM(e,I)&&"wheel"===e.type||tM(e,P)&&("wheel"!==e.type||i&&"wheel"===e.type&&!V)||!a&&e.ctrlKey&&"wheel"===e.type||!t&&!i&&!n&&"wheel"===e.type||!h&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(h)&&!h.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;let o=Array.isArray(h)&&h.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o})},[X,H,r,a,i,u,h,g,V]),m.createElement("div",{className:"react-flow__renderer",ref:T,style:tS},C)},tI=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function tP(){let{userSelectionActive:e,userSelectionRect:t}=k(tI,y.X);return e&&t?m.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}function t_(e,t){let n=e.find(e=>e.id===t.parentNode);if(n){let e=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(e>0||r>0||t.position.x<0||t.position.y<0){var o,l;if(n.style={...n.style},n.style.width=null!==(o=n.style.width)&&void 0!==o?o:n.width,n.style.height=null!==(l=n.style.height)&&void 0!==l?l:n.height,e>0&&(n.style.width+=e),r>0&&(n.style.height+=r),t.position.x<0){let e=Math.abs(t.position.x);n.position.x=n.position.x-e,n.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);n.position.y=n.position.y-e,n.style.height+=e,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function tR(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);let n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{let o=e.filter(e=>e.id===n.id);if(0===o.length)return t.push(n),t;let l={...n};for(let e of o)if(e)switch(e.type){case"select":l.selected=e.selected;break;case"position":void 0!==e.position&&(l.position=e.position),void 0!==e.positionAbsolute&&(l.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(l.dragging=e.dragging),l.expandParent&&t_(t,l);break;case"dimensions":void 0!==e.dimensions&&(l.width=e.dimensions.width,l.height=e.dimensions.height),void 0!==e.updateStyle&&(l.style={...l.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(l.resizing=e.resizing),l.expandParent&&t_(t,l);break;case"remove":return t}return t.push(l),t},n)}function tO(e,t){return tR(e,t)}let tD=(e,t)=>({id:e,type:"select",selected:t});function tB(e,t){return e.reduce((e,n)=>{let o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(tD(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(tD(n.id,!1))),e},[])}let tz=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},tT=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),tL=(0,m.memo)(e=>{let{isSelecting:t,selectionMode:n=u.Full,panOnDrag:o,onSelectionStart:l,onSelectionEnd:r,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:d,onPaneMouseEnter:s,onPaneMouseMove:c,onPaneMouseLeave:g,children:h}=e,p=(0,m.useRef)(null),v=A(),x=(0,m.useRef)(0),b=(0,m.useRef)(0),S=(0,m.useRef)(),{userSelectionActive:E,elementsSelectable:w,dragging:M}=k(tT,y.X),N=()=>{v.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,b.current=0},C=e=>{null==a||a(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},I=w&&(t||E);return m.createElement("div",{className:(0,f.Z)(["react-flow__pane",{dragging:M,selection:t}]),onClick:I?void 0:tz(C,p),onContextMenu:tz(e=>{if(Array.isArray(o)&&(null==o?void 0:o.includes(2))){e.preventDefault();return}null==i||i(e)},p),onWheel:tz(d?e=>d(e):void 0,p),onMouseEnter:I?void 0:s,onMouseDown:I?e=>{let{resetSelectedElements:n,domNode:o}=v.getState();if(S.current=null==o?void 0:o.getBoundingClientRect(),!w||!t||0!==e.button||e.target!==p.current||!S.current)return;let{x:r,y:a}=J(e,S.current);n(),v.setState({userSelectionRect:{width:0,height:0,startX:r,startY:a,x:r,y:a}}),null==l||l(e)}:void 0,onMouseMove:I?e=>{var o,l;let{userSelectionRect:r,nodeInternals:a,edges:i,transform:d,onNodesChange:s,onEdgesChange:c,nodeOrigin:g,getNodes:h}=v.getState();if(!t||!S.current||!r)return;v.setState({userSelectionActive:!0,nodesSelectionActive:!1});let p=J(e,S.current),m=null!==(o=r.startX)&&void 0!==o?o:0,f=null!==(l=r.startY)&&void 0!==l?l:0,y={...r,x:p.x<m?p.x:m,y:p.y<f?p.y:f,width:Math.abs(p.x-m),height:Math.abs(p.y-f)},E=h(),w=e_(a,y,d,n===u.Partial,!0,g),M=eR(w,i).map(e=>e.id),N=w.map(e=>e.id);if(x.current!==N.length){x.current=N.length;let e=tB(E,N);e.length&&(null==s||s(e))}if(b.current!==M.length){b.current=M.length;let e=tB(i,M);e.length&&(null==c||c(e))}v.setState({userSelectionRect:y})}:c,onMouseUp:I?e=>{if(0!==e.button)return;let{userSelectionRect:t}=v.getState();!E&&t&&e.target===p.current&&(null==C||C(e)),v.setState({nodesSelectionActive:x.current>0}),N(),null==r||r(e)}:void 0,onMouseLeave:I?e=>{E&&(v.setState({nodesSelectionActive:x.current>0}),null==r||r(e)),N()}:g,ref:p,style:tS},h,m.createElement(tP,null))});function tH(e,t,n){let o=e;do{if(null==o?void 0:o.matches(t))return!0;if(o===n.current)break;o=o.parentElement}while(o);return!1}function tF(e,t,n,o){var l;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5?arguments[5]:void 0,i=(l=e.extent||o)&&"parent"!==l?[l[0],[l[1][0]-(e.width||0),l[1][1]-(e.height||0)]]:l,d=i;if("parent"!==e.extent||e.expandParent){if(e.extent&&e.parentNode&&"parent"!==e.extent){let{x:t,y:o}=eI(n.get(e.parentNode),r).positionAbsolute;d=[[e.extent[0][0]+t,e.extent[0][1]+o],[e.extent[1][0]+t,e.extent[1][1]+o]]}}else if(e.parentNode&&e.width&&e.height){let t=n.get(e.parentNode),{x:o,y:l}=eI(t,r).positionAbsolute;d=t&&U(o)&&U(l)&&U(t.width)&&U(t.height)?[[o+e.width*r[0],l+e.height*r[1]],[o+t.width-e.width+e.width*r[0],l+t.height-e.height+e.height*r[1]]]:d}else null==a||a("005",N.error005()),d=i;let s={x:0,y:0};e.parentNode&&(s=eI(n.get(e.parentNode),r).positionAbsolute);let c=d&&"parent"!==d?B(t,d):t;return{position:{x:c.x-s.x,y:c.y-s.y},positionAbsolute:c}}function tZ(e){let{nodeId:t,dragItems:n,nodeInternals:o}=e,l=n.map(e=>({...o.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[t?l.find(e=>e.id===t):l[0],l]}tL.displayName="Pane";let tX=(e,t,n,o)=>{let l=t.querySelectorAll(e);if(!l||!l.length)return null;let r=Array.from(l),a=t.getBoundingClientRect(),i={x:a.width*o[0],y:a.height*o[1]};return r.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-i.x)/n,y:(t.top-a.top-i.y)/n,...O(e)}})};function tV(e,t,n){return void 0===n?n:o=>{let l=t().nodeInternals.get(e);l&&n(o,{...l})}}function tY(e){let{id:t,store:n,unselect:o=!1,nodeRef:l}=e,{addSelectedNodes:r,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:d,onError:s}=n.getState(),c=d.get(t);if(!c){null==s||s("012",N.error012(t));return}n.setState({nodesSelectionActive:!1}),c.selected?(o||c.selected&&i)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var e;return null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.blur()})):r([t])}function tK(e){return(t,n,o)=>null==e?void 0:e(t,o)}function tU(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:l,nodeId:r,isSelectable:a,selectNodesOnDrag:i}=e,d=A(),[s,c]=(0,m.useState)(!1),u=(0,m.useRef)([]),g=(0,m.useRef)({x:null,y:null}),h=(0,m.useRef)(0),p=(0,m.useRef)(null),f=(0,m.useRef)({x:0,y:0}),v=(0,m.useRef)(null),y=(0,m.useRef)(!1),x=(0,m.useRef)(!1),S=function(){let e=A();return(0,m.useCallback)(t=>{let{sourceEvent:n}=t,{transform:o,snapGrid:l,snapToGrid:r}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,i=n.touches?n.touches[0].clientY:n.clientY,d={x:(a-o[0])/o[2],y:(i-o[1])/o[2]};return{xSnapped:r?l[0]*Math.round(d.x/l[0]):d.x,ySnapped:r?l[1]*Math.round(d.y/l[1]):d.y,...d}},[])}();return(0,m.useEffect)(()=>{if(null==t?void 0:t.current){let e=(0,b.Z)(t.current),s=e=>{let{x:t,y:n}=e,{nodeInternals:o,onNodeDrag:l,onSelectionDrag:a,updateNodePositions:i,nodeExtent:s,snapGrid:h,snapToGrid:p,nodeOrigin:m,onError:f}=d.getState();g.current={x:t,y:n};let y=!1,x={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&s&&(x=F(eP(u.current,m))),u.current=u.current.map(e=>{let l={x:t-e.distance.x,y:n-e.distance.y};p&&(l.x=h[0]*Math.round(l.x/h[0]),l.y=h[1]*Math.round(l.y/h[1]));let r=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]];if(u.current.length>1&&s&&!e.extent){var a,i;r[0][0]=e.positionAbsolute.x-x.x+s[0][0],r[1][0]=e.positionAbsolute.x+(null!==(a=e.width)&&void 0!==a?a:0)-x.x2+s[1][0],r[0][1]=e.positionAbsolute.y-x.y+s[0][1],r[1][1]=e.positionAbsolute.y+(null!==(i=e.height)&&void 0!==i?i:0)-x.y2+s[1][1]}let d=tF(e,l,o,r,m,f);return y=y||e.position.x!==d.position.x||e.position.y!==d.position.y,e.position=d.position,e.positionAbsolute=d.positionAbsolute,e}),!y)return;i(u.current,!0,!0),c(!0);let b=r?l:tK(a);if(b&&v.current){let[e,t]=tZ({nodeId:r,dragItems:u.current,nodeInternals:o});b(v.current,e,t)}},m=()=>{if(!p.current)return;let[e,t]=T(f.current,p.current);if(0!==e||0!==t){var n,o;let{transform:l,panBy:r}=d.getState();g.current.x=(null!==(n=g.current.x)&&void 0!==n?n:0)-e/l[2],g.current.y=(null!==(o=g.current.y)&&void 0!==o?o:0)-t/l[2],r({x:e,y:t})&&s(g.current)}h.current=requestAnimationFrame(m)},w=e=>{var n;let{nodeInternals:o,multiSelectionActive:l,nodesDraggable:s,unselectNodesAndEdges:c,onNodeDragStart:h,onSelectionDragStart:p}=d.getState();x.current=!0;let m=r?h:tK(p);(!i||!a)&&!l&&r&&((null===(n=o.get(r))||void 0===n?void 0:n.selected)||c()),r&&a&&i&&tY({id:r,store:d,nodeRef:t});let f=S(e);if(g.current=f,u.current=Array.from(o.values()).filter(e=>(e.selected||e.id===r)&&(!e.parentNode||!function e(t,n){if(!t.parentNode)return!1;let o=n.get(t.parentNode);return!!o&&(!!o.selected||e(o,n))}(e,o))&&(e.draggable||s&&void 0===e.draggable)).map(e=>{var t,n,o,l;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:f.x-(null!==(o=null===(t=e.positionAbsolute)||void 0===t?void 0:t.x)&&void 0!==o?o:0),y:f.y-(null!==(l=null===(n=e.positionAbsolute)||void 0===n?void 0:n.y)&&void 0!==l?l:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode,width:e.width,height:e.height,expandParent:e.expandParent}}),m&&u.current){let[t,n]=tZ({nodeId:r,dragItems:u.current,nodeInternals:o});m(e.sourceEvent,t,n)}};if(n)e.on(".drag",null);else{let n=(0,E.Z)().on("start",e=>{let{domNode:t,nodeDragThreshold:n}=d.getState();0===n&&w(e);let o=S(e);g.current=o,p.current=(null==t?void 0:t.getBoundingClientRect())||null,f.current=J(e.sourceEvent,p.current)}).on("drag",e=>{let t=S(e),{autoPanOnNodeDrag:n,nodeDragThreshold:o}=d.getState();if(!y.current&&x.current&&n&&(y.current=!0,m()),!x.current){var l,r,a,i;let n=t.xSnapped-(null!==(a=null==g?void 0:null===(l=g.current)||void 0===l?void 0:l.x)&&void 0!==a?a:0),d=t.ySnapped-(null!==(i=null==g?void 0:null===(r=g.current)||void 0===r?void 0:r.y)&&void 0!==i?i:0);Math.sqrt(n*n+d*d)>o&&w(e)}(g.current.x!==t.xSnapped||g.current.y!==t.ySnapped)&&u.current&&x.current&&(v.current=e.sourceEvent,f.current=J(e.sourceEvent,p.current),s(t))}).on("end",e=>{if(x.current&&(c(!1),y.current=!1,x.current=!1,cancelAnimationFrame(h.current),u.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:o,onSelectionDragStop:l}=d.getState(),a=r?o:tK(l);if(t(u.current,!1,!1),a){let[t,o]=tZ({nodeId:r,dragItems:u.current,nodeInternals:n});a(e.sourceEvent,t,o)}}}).filter(e=>{let n=e.target;return!e.button&&(!o||!tH(n,".".concat(o),t))&&(!l||tH(n,l,t))});return e.call(n),()=>{e.on(".drag",null)}}}},[t,n,o,l,a,d,r,i,S]),s}function tW(){let e=A();return(0,m.useCallback)(t=>{let{nodeInternals:n,nodeExtent:o,updateNodePositions:l,getNodes:r,snapToGrid:a,snapGrid:i,onError:d,nodesDraggable:s}=e.getState(),c=r().filter(e=>e.selected&&(e.draggable||s&&void 0===e.draggable)),u=a?i[0]:5,g=a?i[1]:5,h=t.isShiftPressed?4:1,p=t.x*u*h,m=t.y*g*h;l(c.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};a&&(t.x=i[0]*Math.round(t.x/i[0]),t.y=i[1]*Math.round(t.y/i[1]));let{positionAbsolute:l,position:r}=tF(e,t,n,o,void 0,d);e.position=r,e.positionAbsolute=l}return e}),!0,!1)},[])}let tj={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var tq=e=>{let t=t=>{let{id:n,type:o,data:l,xPos:r,yPos:a,xPosOrigin:i,yPosOrigin:d,selected:s,onClick:c,onMouseEnter:u,onMouseMove:g,onMouseLeave:h,onContextMenu:p,onDoubleClick:v,style:y,className:x,isDraggable:b,isSelectable:S,isConnectable:E,isFocusable:w,selectNodesOnDrag:M,sourcePosition:N,targetPosition:C,hidden:k,resizeObserver:I,dragHandle:P,zIndex:_,isParent:R,noDragClassName:O,noPanClassName:D,initialized:B,disableKeyboardA11y:z,ariaLabel:T,rfId:L}=t,H=A(),F=(0,m.useRef)(null),Z=(0,m.useRef)(N),X=(0,m.useRef)(C),V=(0,m.useRef)(o),Y=S||b||c||u||g||h,K=tW(),U=tV(n,H.getState,u),W=tV(n,H.getState,g),q=tV(n,H.getState,h),G=tV(n,H.getState,p),$=tV(n,H.getState,v);(0,m.useEffect)(()=>{if(F.current&&!k){let e=F.current;return null==I||I.observe(e),()=>null==I?void 0:I.unobserve(e)}},[k]),(0,m.useEffect)(()=>{let e=V.current!==o,t=Z.current!==N,l=X.current!==C;F.current&&(e||t||l)&&(e&&(V.current=o),t&&(Z.current=N),l&&(X.current=C),H.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,o,N,C]);let J=tU({nodeRef:F,disabled:k||!b,noDragClassName:O,handleSelector:P,nodeId:n,isSelectable:S,selectNodesOnDrag:M});return k?null:m.createElement("div",{className:(0,f.Z)(["react-flow__node","react-flow__node-".concat(o),{[D]:b},x,{selected:s,selectable:S,parent:R,dragging:J}]),ref:F,style:{zIndex:_,transform:"translate(".concat(i,"px,").concat(d,"px)"),pointerEvents:Y?"all":"none",visibility:B?"visible":"hidden",...y},"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:U,onMouseMove:W,onMouseLeave:q,onContextMenu:G,onClick:e=>{let{nodeDragThreshold:t}=H.getState();if(S&&(!M||!b||t>0)&&tY({id:n,store:H,nodeRef:F}),c){let t=H.getState().nodeInternals.get(n);t&&c(e,{...t})}},onDoubleClick:$,onKeyDown:w?e=>{!Q(e)&&(j.includes(e.key)&&S?tY({id:n,store:H,unselect:"Escape"===e.key,nodeRef:F}):!z&&b&&s&&Object.prototype.hasOwnProperty.call(tj,e.key)&&(H.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~r,", y: ").concat(~~a)}),K({x:tj[e.key].x,y:tj[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":z?void 0:"".concat(tn,"-").concat(L),"aria-label":T},m.createElement(eb,{value:n},m.createElement(e,{id:n,data:l,type:o,xPos:r,yPos:a,selected:s,isConnectable:E,sourcePosition:N,targetPosition:C,dragging:J,dragHandle:P,zIndex:_})))};return t.displayName="NodeWrapper",(0,m.memo)(t)};let tG=e=>({...eP(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive});var tQ=(0,m.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e,l=A(),{width:r,height:a,x:i,y:d,transformString:s,userSelectionActive:c}=k(tG,y.X),u=tW(),g=(0,m.useRef)(null);return((0,m.useEffect)(()=>{if(!o){var e;null===(e=g.current)||void 0===e||e.focus({preventScroll:!0})}},[o]),tU({nodeRef:g}),!c&&r&&a)?m.createElement("div",{className:(0,f.Z)(["react-flow__nodesselection","react-flow__container",n]),style:{transform:s}},m.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:t?e=>{t(e,l.getState().getNodes().filter(e=>e.selected))}:void 0,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(tj,e.key)&&u({x:tj[e.key].x,y:tj[e.key].y,isShiftPressed:e.shiftKey})},style:{width:r,height:a,top:d,left:i}})):null});let t$=e=>e.nodesSelectionActive,tJ=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:l,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:d,onMove:s,onMoveStart:c,onMoveEnd:u,selectionKeyCode:g,selectionOnDrag:h,selectionMode:p,onSelectionStart:f,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:M,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:A,panOnDrag:I,defaultViewport:P,translateExtent:_,minZoom:R,maxZoom:O,preventScrolling:D,onSelectionContextMenu:B,noWheelClassName:z,noPanClassName:T,disableKeyboardA11y:L}=e,H=k(t$),F=ti(g),Z=ti(x),X=Z||I,V=Z||M,Y=F||h&&!0!==X;return tb({deleteKeyCode:d,multiSelectionKeyCode:y}),m.createElement(tA,{onMove:s,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:a,elementsSelectable:S,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:V,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:A,panOnDrag:!F&&X,defaultViewport:P,translateExtent:_,minZoom:R,maxZoom:O,zoomActivationKeyCode:b,preventScrolling:D,noWheelClassName:z,noPanClassName:T},m.createElement(tL,{onSelectionStart:f,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:l,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:X,isSelecting:!!Y,selectionMode:p},t,H&&m.createElement(tQ,{onSelectionContextMenu:B,noPanClassName:T,disableKeyboardA11y:L})))};tJ.displayName="FlowRenderer";var t0=(0,m.memo)(tJ);function t1(e){let t={input:tq(e.input||eG),default:tq(e.default||ej),output:tq(e.output||e$),group:tq(e.group||eJ)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=tq(e[n]||ej),t),{});return{...t,...n}}let t2=e=>{let{x:t,y:n,width:o,height:l,origin:r}=e;return!o||!l||r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:n}:{x:t-o*r[0],y:n-l*r[1]}},t5=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),t3=e=>{var t;let{nodesDraggable:n,nodesConnectable:o,nodesFocusable:l,elementsSelectable:r,updateNodeDimensions:a,onError:i}=k(t5,y.X),d=(t=e.onlyRenderVisibleElements,k((0,m.useCallback)(e=>t?e_(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[t]))),s=(0,m.useRef)(),c=(0,m.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let e=new ResizeObserver(e=>{a(e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})))});return s.current=e,e},[]);return(0,m.useEffect)(()=>()=>{var e;null==s||null===(e=s.current)||void 0===e||e.disconnect()},[]),m.createElement("div",{className:"react-flow__nodes",style:tS},d.map(t=>{var a,d,s,u,g,h,f;let v=t.type||"default";e.nodeTypes[v]||(null==i||i("003",N.error003(v)),v="default");let y=e.nodeTypes[v]||e.nodeTypes.default,x=!!(t.draggable||n&&void 0===t.draggable),b=!!(t.selectable||r&&void 0===t.selectable),S=!!(t.connectable||o&&void 0===t.connectable),E=!!(t.focusable||l&&void 0===t.focusable),w=e.nodeExtent?B(t.positionAbsolute,e.nodeExtent):t.positionAbsolute,M=null!==(s=null==w?void 0:w.x)&&void 0!==s?s:0,C=null!==(u=null==w?void 0:w.y)&&void 0!==u?u:0,k=t2({x:M,y:C,width:null!==(g=t.width)&&void 0!==g?g:0,height:null!==(h=t.height)&&void 0!==h?h:0,origin:e.nodeOrigin});return m.createElement(y,{key:t.id,id:t.id,className:t.className,style:t.style,type:v,data:t.data,sourcePosition:t.sourcePosition||p.Bottom,targetPosition:t.targetPosition||p.Top,hidden:t.hidden,xPos:M,yPos:C,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!t.selected,isDraggable:x,isSelectable:b,isConnectable:S,isFocusable:E,resizeObserver:c,dragHandle:t.dragHandle,zIndex:null!==(f=null===(a=t[W])||void 0===a?void 0:a.z)&&void 0!==f?f:0,isParent:!!(null===(d=t[W])||void 0===d?void 0:d.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!t.width&&!!t.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:t.ariaLabel})}))};t3.displayName="NodeRenderer";var t4=(0,m.memo)(t3);let t6=(e,t,n)=>n===p.Left?e-t:n===p.Right?e+t:e,t7=(e,t,n)=>n===p.Top?e-t:n===p.Bottom?e+t:e,t8="react-flow__edgeupdater",t9=e=>{let{position:t,centerX:n,centerY:o,radius:l=10,onMouseDown:r,onMouseEnter:a,onMouseOut:i,type:d}=e;return m.createElement("circle",{onMouseDown:r,onMouseEnter:a,onMouseOut:i,className:(0,f.Z)([t8,"".concat(t8,"-").concat(d)]),cx:t6(n,l,t),cy:t7(o,l,t),r:l,stroke:"transparent",fill:"transparent"})},ne=()=>!0;var nt=e=>{let t=t=>{let{id:n,className:o,type:l,data:r,onClick:a,onEdgeDoubleClick:i,selected:d,animated:s,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,source:x,target:b,sourceX:S,sourceY:E,targetX:w,targetY:M,sourcePosition:N,targetPosition:C,elementsSelectable:k,hidden:I,sourceHandleId:P,targetHandleId:_,onContextMenu:R,onMouseEnter:O,onMouseMove:D,onMouseLeave:B,edgeUpdaterRadius:z,onEdgeUpdate:T,onEdgeUpdateStart:L,onEdgeUpdateEnd:H,markerEnd:F,markerStart:Z,rfId:X,ariaLabel:V,isFocusable:Y,isUpdatable:K,pathOptions:U,interactionWidth:W}=t,q=(0,m.useRef)(null),[G,Q]=(0,m.useState)(!1),[$,J]=(0,m.useState)(!1),ee=A(),et=(0,m.useMemo)(()=>"url(#".concat(eM(Z,X),")"),[Z,X]),eo=(0,m.useMemo)(()=>"url(#".concat(eM(F,X),")"),[F,X]);if(I)return null;let el=en(n,ee.getState,i),er=en(n,ee.getState,R),ea=en(n,ee.getState,O),ei=en(n,ee.getState,D),ed=en(n,ee.getState,B),es=(e,t)=>{if(0!==e.button)return;let{edges:o,isValidConnection:l}=ee.getState(),r=t?b:x,a=(t?_:P)||null,i=t?"target":"source",d=l||ne,s=o.find(e=>e.id===n);J(!0),null==L||L(e,s,i),eZ({event:e,handleId:a,nodeId:r,onConnect:e=>null==T?void 0:T(s,e),isTarget:t,getState:ee.getState,setState:ee.setState,isValidConnection:d,edgeUpdaterType:i,onEdgeUpdateEnd:e=>{J(!1),null==H||H(e,s,i)}})},ec=()=>Q(!0),eu=()=>Q(!1);return m.createElement("g",{className:(0,f.Z)(["react-flow__edge","react-flow__edge-".concat(l),o,{selected:d,animated:s,inactive:!k&&!a,updating:G}]),onClick:e=>{let{edges:t,addSelectedEdges:o,unselectNodesAndEdges:l,multiSelectionActive:r}=ee.getState(),i=t.find(e=>e.id===n);if(i){if(k){if(ee.setState({nodesSelectionActive:!1}),i.selected&&r){var d;l({nodes:[],edges:[i]}),null===(d=q.current)||void 0===d||d.blur()}else o([n])}a&&a(e,i)}},onDoubleClick:el,onContextMenu:er,onMouseEnter:ea,onMouseMove:ei,onMouseLeave:ed,onKeyDown:Y?e=>{if(j.includes(e.key)&&k){let{unselectNodesAndEdges:o,addSelectedEdges:l,edges:r}=ee.getState();if("Escape"===e.key){var t;null===(t=q.current)||void 0===t||t.blur(),o({edges:[r.find(e=>e.id===n)]})}else l([n])}}:void 0,tabIndex:Y?0:void 0,role:Y?"button":"img","data-testid":"rf__edge-".concat(n),"aria-label":null===V?void 0:V||"Edge from ".concat(x," to ").concat(b),"aria-describedby":Y?"".concat(to,"-").concat(X):void 0,ref:q},!$&&m.createElement(e,{id:n,source:x,target:b,selected:d,animated:s,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,data:r,style:y,sourceX:S,sourceY:E,targetX:w,targetY:M,sourcePosition:N,targetPosition:C,sourceHandleId:P,targetHandleId:_,markerStart:et,markerEnd:eo,pathOptions:U,interactionWidth:W}),K&&m.createElement(m.Fragment,null,("source"===K||!0===K)&&m.createElement(t9,{position:N,centerX:S,centerY:E,radius:z,onMouseDown:e=>es(e,!0),onMouseEnter:ec,onMouseOut:eu,type:"source"}),("target"===K||!0===K)&&m.createElement(t9,{position:C,centerX:w,centerY:M,radius:z,onMouseDown:e=>es(e,!1),onMouseEnter:ec,onMouseOut:eu,type:"target"})))};return t.displayName="EdgeWrapper",(0,m.memo)(t)};function nn(e){let t={default:nt(e.default||ey),straight:nt(e.bezier||ep),step:nt(e.step||eh),smoothstep:nt(e.step||eg),simplebezier:nt(e.simplebezier||ei)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=nt(e[n]||ey),t),{});return{...t,...n}}function no(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=((null==n?void 0:n.x)||0)+t.x,l=((null==n?void 0:n.y)||0)+t.y,r=(null==n?void 0:n.width)||t.width,a=(null==n?void 0:n.height)||t.height;switch(e){case p.Top:return{x:o+r/2,y:l};case p.Right:return{x:o+r,y:l+a/2};case p.Bottom:return{x:o+r/2,y:l+a};case p.Left:return{x:o,y:l+a/2}}}function nl(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}let nr=(e,t,n,o,l,r)=>{let a=no(n,e,t),i=no(r,o,l);return{sourceX:a.x,sourceY:a.y,targetX:i.x,targetY:i.y}};function na(e){var t,n,o,l,r;let a=(null==e?void 0:null===(t=e[W])||void 0===t?void 0:t.handleBounds)||null,i=a&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==e?void 0:null===(n=e.positionAbsolute)||void 0===n?void 0:n.x)&&void 0!==(null==e?void 0:null===(o=e.positionAbsolute)||void 0===o?void 0:o.y);return[{x:(null==e?void 0:null===(l=e.positionAbsolute)||void 0===l?void 0:l.x)||0,y:(null==e?void 0:null===(r=e.positionAbsolute)||void 0===r?void 0:r.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},a,!!i]}let ni=[{level:0,isMaxLevel:!0,edges:[]}],nd={[h.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return m.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[h.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return m.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},ns=e=>{let{id:t,type:n,color:o,width:l=12.5,height:r=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:d="auto-start-reverse"}=e,s=function(e){let t=A();return(0,m.useMemo)(()=>{if(!Object.prototype.hasOwnProperty.call(nd,e)){var n,o;return null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",N.error009(e)),null}return nd[e]},[e])}(n);return s?m.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(l),markerHeight:"".concat(r),viewBox:"-10 -10 20 20",markerUnits:a,orient:d,refX:"0",refY:"0"},m.createElement(s,{color:o,strokeWidth:i})):null},nc=e=>{let{defaultColor:t,rfId:n}=e;return e=>{let o=[];return e.edges.reduce((e,l)=>([l.markerStart,l.markerEnd].forEach(l=>{if(l&&"object"==typeof l){let r=eM(l,n);o.includes(r)||(e.push({id:r,color:l.color||t,...l}),o.push(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}},nu=e=>{let{defaultColor:t,rfId:n}=e,o=k((0,m.useCallback)(nc({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return m.createElement("defs",null,o.map(e=>m.createElement(ns,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};nu.displayName="MarkerDefinitions";var ng=(0,m.memo)(nu);let nh=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),np=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:o,rfId:l,edgeTypes:r,noPanClassName:a,onEdgeUpdate:i,onEdgeContextMenu:d,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:g,onEdgeClick:h,edgeUpdaterRadius:v,onEdgeDoubleClick:x,onEdgeUpdateStart:b,onEdgeUpdateEnd:S,children:E}=e,{edgesFocusable:w,edgesUpdatable:M,elementsSelectable:C,width:A,height:I,connectionMode:P,nodeInternals:_,onError:R}=k(nh,y.X),O=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1,l=Object.entries(e.reduce((e,l)=>{let r=U(l.zIndex),a=r?l.zIndex:0;if(n){var i,d;let e=t.get(l.target),n=t.get(l.source),o=l.selected||(null==e?void 0:e.selected)||(null==n?void 0:n.selected),s=Math.max((null==n?void 0:null===(i=n[W])||void 0===i?void 0:i.z)||0,(null==e?void 0:null===(d=e[W])||void 0===d?void 0:d.z)||0,1e3);a=(r?l.zIndex:0)+(o?s:0)}return e[a]?e[a].push(l):e[a]=[l],o=a>o?a:o,e},{})).map(e=>{let[t,n]=e,l=+t;return{edges:n,level:l,isMaxLevel:l===o}});return 0===l.length?ni:l}(k((0,m.useCallback)(e=>n?e.edges.filter(t=>{let n=_.get(t.source),o=_.get(t.target);return(null==n?void 0:n.width)&&(null==n?void 0:n.height)&&(null==o?void 0:o.width)&&(null==o?void 0:o.height)&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:o,sourceHeight:l,targetWidth:r,targetHeight:a,width:i,height:d,transform:s}=e,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+r),y2:Math.max(t.y+l,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);let u=F({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:i/s[2],height:d/s[2]});return Math.ceil(Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x))*Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y)))>0}({sourcePos:n.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:n.width,sourceHeight:n.height,targetWidth:o.width,targetHeight:o.height,width:e.width,height:e.height,transform:e.transform})}):e.edges,[n,_])),_,o);return A?m.createElement(m.Fragment,null,O.map(e=>{let{level:n,edges:o,isMaxLevel:y}=e;return m.createElement("svg",{key:n,style:{zIndex:n},width:A,height:I,className:"react-flow__edges react-flow__container"},y&&m.createElement(ng,{defaultColor:t,rfId:l}),m.createElement("g",null,o.map(e=>{var t,n;let[o,y,E]=na(_.get(e.source)),[k,A,I]=na(_.get(e.target));if(!E||!I)return null;let O=e.type||"default";r[O]||(null==R||R("011",N.error011(O)),O="default");let D=r[O]||r.default,B=P===s.Strict?A.target:(null!==(t=A.target)&&void 0!==t?t:[]).concat(null!==(n=A.source)&&void 0!==n?n:[]),z=nl(y.source,e.sourceHandle),T=nl(B,e.targetHandle),L=(null==z?void 0:z.position)||p.Bottom,H=(null==T?void 0:T.position)||p.Top,F=!!(e.focusable||w&&void 0===e.focusable),Z=void 0!==i&&(e.updatable||M&&void 0===e.updatable);if(!z||!T)return null==R||R("008",N.error008(z,e)),null;let{sourceX:X,sourceY:V,targetX:Y,targetY:K}=nr(o,z,L,k,T,H);return m.createElement(D,{key:e.id,id:e.id,className:(0,f.Z)([e.className,a]),type:O,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:X,sourceY:V,targetX:Y,targetY:K,sourcePosition:L,targetPosition:H,elementsSelectable:C,onEdgeUpdate:i,onContextMenu:d,onMouseEnter:c,onMouseMove:u,onMouseLeave:g,onClick:h,edgeUpdaterRadius:v,onEdgeDoubleClick:x,onEdgeUpdateStart:b,onEdgeUpdateEnd:S,rfId:l,ariaLabel:e.ariaLabel,isFocusable:F,isUpdatable:Z,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth})})))}),E):null};np.displayName="EdgeRenderer";var nm=(0,m.memo)(np);let nf=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function nv(e){let{children:t}=e,n=k(nf);return m.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}let ny={[p.Left]:p.Right,[p.Right]:p.Left,[p.Top]:p.Bottom,[p.Bottom]:p.Top},nx=e=>{var t,n,o,l,r,a,i;let{nodeId:d,handleType:c,style:u,type:h=g.Bezier,CustomComponent:p,connectionStatus:f}=e,{fromNode:v,handleId:x,toX:b,toY:S,connectionMode:E}=k((0,m.useCallback)(e=>({fromNode:e.nodeInternals.get(d),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[d]),y.X),w=null==v?void 0:null===(t=v[W])||void 0===t?void 0:t.handleBounds,M=null==w?void 0:w[c];if(E===s.Loose&&(M=M||(null==w?void 0:w["source"===c?"target":"source"])),!v||!M)return null;let N=x?M.find(e=>e.id===x):M[0],C=N?N.x+N.width/2:(null!==(l=v.width)&&void 0!==l?l:0)/2,A=N?N.y+N.height/2:null!==(r=v.height)&&void 0!==r?r:0,I=(null!==(a=null===(n=v.positionAbsolute)||void 0===n?void 0:n.x)&&void 0!==a?a:0)+C,P=(null!==(i=null===(o=v.positionAbsolute)||void 0===o?void 0:o.y)&&void 0!==i?i:0)+A,_=null==N?void 0:N.position,R=_?ny[_]:null;if(!_||!R)return null;if(p)return m.createElement(p,{connectionLineType:h,connectionLineStyle:u,fromNode:v,fromHandle:N,fromX:I,fromY:P,toX:b,toY:S,fromPosition:_,toPosition:R,connectionStatus:f});let O="",D={sourceX:I,sourceY:P,sourcePosition:_,targetX:b,targetY:S,targetPosition:R};return h===g.Bezier?[O]=ev(D):h===g.Step?[O]=eu({...D,borderRadius:0}):h===g.SmoothStep?[O]=eu(D):h===g.SimpleBezier?[O]=ea(D):O="M".concat(I,",").concat(P," ").concat(b,",").concat(S),m.createElement("path",{d:O,fill:"none",className:"react-flow__connection-path",style:u})};nx.displayName="ConnectionLine";let nb=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function nS(e){let{containerStyle:t,style:n,type:o,component:l}=e,{nodeId:r,handleType:a,nodesConnectable:i,width:d,height:s,connectionStatus:c}=k(nb,y.X);return r&&a&&d&&i?m.createElement("svg",{style:t,width:d,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container"},m.createElement("g",{className:(0,f.Z)(["react-flow__connection",c])},m.createElement(nx,{nodeId:r,handleType:a,style:n,type:o,CustomComponent:l,connectionStatus:c}))):null}function nE(e,t){return(0,m.useRef)(null),A(),(0,m.useMemo)(()=>t(e),[e])}let nw=e=>{let{nodeTypes:t,edgeTypes:n,onMove:o,onMoveStart:l,onMoveEnd:r,onInit:a,onNodeClick:i,onEdgeClick:d,onNodeDoubleClick:s,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:f,onSelectionStart:v,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:E,selectionKeyCode:w,selectionOnDrag:M,selectionMode:N,multiSelectionKeyCode:C,panActivationKeyCode:k,zoomActivationKeyCode:A,deleteKeyCode:I,onlyRenderVisibleElements:P,elementsSelectable:_,selectNodesOnDrag:R,defaultViewport:O,translateExtent:D,minZoom:B,maxZoom:z,preventScrolling:T,defaultMarkerColor:L,zoomOnScroll:H,zoomOnPinch:F,panOnScroll:Z,panOnScrollSpeed:X,panOnScrollMode:V,zoomOnDoubleClick:Y,panOnDrag:K,onPaneClick:U,onPaneMouseEnter:W,onPaneMouseMove:j,onPaneMouseLeave:q,onPaneScroll:G,onPaneContextMenu:Q,onEdgeUpdate:$,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,edgeUpdaterRadius:eo,onEdgeUpdateStart:el,onEdgeUpdateEnd:er,noDragClassName:ea,noWheelClassName:ei,noPanClassName:ed,elevateEdgesOnSelect:es,disableKeyboardA11y:ec,nodeOrigin:eu,nodeExtent:eg,rfId:eh}=e,ep=nE(t,t1),em=nE(n,nn);return!function(e){let t=ty(),n=(0,m.useRef)(!1);(0,m.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(a),m.createElement(t0,{onPaneClick:U,onPaneMouseEnter:W,onPaneMouseMove:j,onPaneMouseLeave:q,onPaneContextMenu:Q,onPaneScroll:G,deleteKeyCode:I,selectionKeyCode:w,selectionOnDrag:M,selectionMode:N,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:C,panActivationKeyCode:k,zoomActivationKeyCode:A,elementsSelectable:_,onMove:o,onMoveStart:l,onMoveEnd:r,zoomOnScroll:H,zoomOnPinch:F,zoomOnDoubleClick:Y,panOnScroll:Z,panOnScrollSpeed:X,panOnScrollMode:V,panOnDrag:K,defaultViewport:O,translateExtent:D,minZoom:B,maxZoom:z,onSelectionContextMenu:f,preventScrolling:T,noDragClassName:ea,noWheelClassName:ei,noPanClassName:ed,disableKeyboardA11y:ec},m.createElement(nv,null,m.createElement(nm,{edgeTypes:em,onEdgeClick:d,onEdgeDoubleClick:c,onEdgeUpdate:$,onlyRenderVisibleElements:P,onEdgeContextMenu:J,onEdgeMouseEnter:ee,onEdgeMouseMove:et,onEdgeMouseLeave:en,onEdgeUpdateStart:el,onEdgeUpdateEnd:er,edgeUpdaterRadius:eo,defaultMarkerColor:L,noPanClassName:ed,elevateEdgesOnSelect:!!es,disableKeyboardA11y:ec,rfId:eh},m.createElement(nS,{style:b,type:x,component:S,containerStyle:E})),m.createElement("div",{className:"react-flow__edgelabel-renderer"}),m.createElement(t4,{nodeTypes:ep,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:u,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:R,onlyRenderVisibleElements:P,noPanClassName:ed,noDragClassName:ea,disableKeyboardA11y:ec,nodeOrigin:eu,nodeExtent:eg,rfId:eh})))};nw.displayName="GraphView";var nM=(0,m.memo)(nw);let nN=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nC={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:nN,nodeExtent:nN,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:s.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:q,isValidConnection:void 0},nk=()=>(0,v.F)((e,t)=>({...nC,setNodes:n=>{let{nodeInternals:o,nodeOrigin:l,elevateNodesOnSelect:r}=t();e({nodeInternals:tu(n,o,l,r)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:o={}}=t();e({edges:n.map(e=>({...o,...e}))})},setDefaultNodesAndEdges:(n,o)=>{let l=void 0!==n,r=void 0!==o;e({nodeInternals:l?tu(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:r?o:[],hasDefaultNodes:l,hasDefaultEdges:r})},updateNodeDimensions:n=>{let{onNodesChange:o,nodeInternals:l,fitViewOnInit:r,fitViewOnInitDone:a,fitViewOnInitOptions:i,domNode:d,nodeOrigin:s}=t(),c=null==d?void 0:d.querySelector(".react-flow__viewport");if(!c)return;let u=window.getComputedStyle(c),{m22:g}=new window.DOMMatrixReadOnly(u.transform),h=n.reduce((e,t)=>{let n=l.get(t.id);if(n){let o=O(t.nodeElement);o.width&&o.height&&(n.width!==o.width||n.height!==o.height||t.forceUpdate)&&(l.set(n.id,{...n,[W]:{...n[W],handleBounds:{source:tX(".source",t.nodeElement,g,s),target:tX(".target",t.nodeElement,g,s)}},...o}),e.push({id:n.id,type:"dimensions",dimensions:o}))}return e},[]);tc(l,s);let p=a||r&&!a&&tg(t,{initial:!0,...i});e({nodeInternals:new Map(l),fitViewOnInitDone:p}),(null==h?void 0:h.length)>0&&(null==o||o(h))},updateNodePositions:function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{triggerNodeChanges:l}=t();l(e.map(e=>{let t={id:e.id,type:"position",dragging:o};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:o,nodeInternals:l,hasDefaultNodes:r,nodeOrigin:a,getNodes:i,elevateNodesOnSelect:d}=t();(null==n?void 0:n.length)&&(r&&e({nodeInternals:tu(tO(n,i()),l,a,d)}),null==o||o(n))},addSelectedNodes:n=>{let o;let{multiSelectionActive:l,edges:r,getNodes:a}=t(),i=null;l?o=n.map(e=>tD(e,!0)):(o=tB(a(),n),i=tB(r,[])),th({changedNodes:o,changedEdges:i,get:t,set:e})},addSelectedEdges:n=>{let o;let{multiSelectionActive:l,edges:r,getNodes:a}=t(),i=null;l?o=n.map(e=>tD(e,!0)):(o=tB(r,n),i=tB(a(),[])),th({changedNodes:i,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edges:l,getNodes:r}=t();th({changedNodes:(n||r()).map(e=>(e.selected=!1,tD(e.id,!1))),changedEdges:(o||l).map(e=>tD(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:o,maxZoom:l}=t();null==o||o.scaleExtent([n,l]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:o,minZoom:l}=t();null==o||o.scaleExtent([l,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;null===(o=t().d3Zoom)||void 0===o||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:o}=t();th({changedNodes:o().filter(e=>e.selected).map(e=>tD(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>tD(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:o}=t();o.forEach(e=>{e.positionAbsolute=B(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:e=>{let{transform:n,width:o,height:l,d3Zoom:r,d3Selection:a,translateExtent:i}=t();if(!r||!a||!e.x&&!e.y)return!1;let d=x.CR.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),s=null==r?void 0:r.constrain()(d,[[0,0],[o,l]],i);return r.transform(a,s),n[0]!==s.x||n[1]!==s.y||n[2]!==s.k},cancelConnection:()=>e({connectionNodeId:nC.connectionNodeId,connectionHandleId:nC.connectionHandleId,connectionHandleType:nC.connectionHandleType,connectionStatus:nC.connectionStatus,connectionStartHandle:nC.connectionStartHandle,connectionEndHandle:nC.connectionEndHandle}),reset:()=>e({...nC})}),Object.is),nA=e=>{let{children:t}=e,n=(0,m.useRef)(null);return n.current||(n.current=nk()),m.createElement(M,{value:n.current},t)};nA.displayName="ReactFlowProvider";let nI=e=>{let{children:t}=e;return(0,m.useContext)(w)?m.createElement(m.Fragment,null,t):m.createElement(nA,null,t)};nI.displayName="ReactFlowWrapper";let nP={input:eG,default:ej,output:e$,group:eJ},n_={default:ey,straight:ep,step:eh,smoothstep:eg,simplebezier:ei},nR=[0,0],nO=[15,15],nD={x:0,y:0,zoom:1},nB={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},nz=(0,m.forwardRef)((e,t)=>{let{nodes:n,edges:o,defaultNodes:l,defaultEdges:r,className:a,nodeTypes:i=nP,edgeTypes:d=n_,onNodeClick:h,onEdgeClick:p,onInit:v,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:S,onConnectStart:E,onConnectEnd:w,onClickConnectStart:M,onClickConnectEnd:N,onNodeMouseEnter:C,onNodeMouseMove:k,onNodeMouseLeave:A,onNodeContextMenu:I,onNodeDoubleClick:P,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:D,onNodesDelete:B,onEdgesDelete:z,onSelectionChange:T,onSelectionDragStart:L,onSelectionDrag:H,onSelectionDragStop:F,onSelectionContextMenu:Z,onSelectionStart:X,onSelectionEnd:V,connectionMode:Y=s.Strict,connectionLineType:K=g.Bezier,connectionLineStyle:U,connectionLineComponent:W,connectionLineContainerStyle:j,deleteKeyCode:q="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:Q=!1,selectionMode:$=u.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:et=ee()?"Meta":"Control",zoomActivationKeyCode:en=ee()?"Meta":"Control",snapToGrid:eo=!1,snapGrid:el=nO,onlyRenderVisibleElements:er=!1,selectNodesOnDrag:ea=!0,nodesDraggable:ei,nodesConnectable:ed,nodesFocusable:es,nodeOrigin:ec=nR,edgesFocusable:eu,edgesUpdatable:eg,elementsSelectable:eh,defaultViewport:ep=nD,minZoom:em=.5,maxZoom:ef=2,translateExtent:ev=nN,preventScrolling:ey=!0,nodeExtent:ex,defaultMarkerColor:eb="#b1b1b7",zoomOnScroll:eS=!0,zoomOnPinch:eE=!0,panOnScroll:ew=!1,panOnScrollSpeed:eM=.5,panOnScrollMode:eN=c.Free,zoomOnDoubleClick:eC=!0,panOnDrag:ek=!0,onPaneClick:eA,onPaneMouseEnter:eI,onPaneMouseMove:eP,onPaneMouseLeave:e_,onPaneScroll:eR,onPaneContextMenu:eO,children:eD,onEdgeUpdate:eB,onEdgeContextMenu:ez,onEdgeDoubleClick:eT,onEdgeMouseEnter:eL,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,onEdgeUpdateStart:eZ,onEdgeUpdateEnd:eX,edgeUpdaterRadius:eV=10,onNodesChange:eY,onEdgesChange:eK,noDragClassName:eU="nodrag",noWheelClassName:eW="nowheel",noPanClassName:ej="nopan",fitView:eq=!1,fitViewOptions:eG,connectOnClick:eQ=!0,attributionPosition:e$,proOptions:eJ,defaultEdgeOptions:e0,elevateNodesOnSelect:e1=!0,elevateEdgesOnSelect:e2=!1,disableKeyboardA11y:e5=!1,autoPanOnConnect:e3=!0,autoPanOnNodeDrag:e6=!0,connectionRadius:e7=20,isValidConnection:e8,onError:te,style:tt,id:tn,nodeDragThreshold:to,...tl}=e,tr=tn||"1";return m.createElement("div",{...tl,style:{...tt,...nB},ref:t,className:(0,f.Z)(["react-flow",a]),"data-testid":"rf__wrapper",id:tn},m.createElement(nI,null,m.createElement(nM,{onInit:v,onMove:y,onMoveStart:x,onMoveEnd:b,onNodeClick:h,onEdgeClick:p,onNodeMouseEnter:C,onNodeMouseMove:k,onNodeMouseLeave:A,onNodeContextMenu:I,onNodeDoubleClick:P,nodeTypes:i,edgeTypes:d,connectionLineType:K,connectionLineStyle:U,connectionLineComponent:W,connectionLineContainerStyle:j,selectionKeyCode:G,selectionOnDrag:Q,selectionMode:$,deleteKeyCode:q,multiSelectionKeyCode:et,panActivationKeyCode:J,zoomActivationKeyCode:en,onlyRenderVisibleElements:er,selectNodesOnDrag:ea,defaultViewport:ep,translateExtent:ev,minZoom:em,maxZoom:ef,preventScrolling:ey,zoomOnScroll:eS,zoomOnPinch:eE,zoomOnDoubleClick:eC,panOnScroll:ew,panOnScrollSpeed:eM,panOnScrollMode:eN,panOnDrag:ek,onPaneClick:eA,onPaneMouseEnter:eI,onPaneMouseMove:eP,onPaneMouseLeave:e_,onPaneScroll:eR,onPaneContextMenu:eO,onSelectionContextMenu:Z,onSelectionStart:X,onSelectionEnd:V,onEdgeUpdate:eB,onEdgeContextMenu:ez,onEdgeDoubleClick:eT,onEdgeMouseEnter:eL,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,onEdgeUpdateStart:eZ,onEdgeUpdateEnd:eX,edgeUpdaterRadius:eV,defaultMarkerColor:eb,noDragClassName:eU,noWheelClassName:eW,noPanClassName:ej,elevateEdgesOnSelect:e2,rfId:tr,disableKeyboardA11y:e5,nodeOrigin:ec,nodeExtent:ex}),m.createElement(e9,{nodes:n,edges:o,defaultNodes:l,defaultEdges:r,onConnect:S,onConnectStart:E,onConnectEnd:w,onClickConnectStart:M,onClickConnectEnd:N,nodesDraggable:ei,nodesConnectable:ed,nodesFocusable:es,edgesFocusable:eu,edgesUpdatable:eg,elementsSelectable:eh,elevateNodesOnSelect:e1,minZoom:em,maxZoom:ef,nodeExtent:ex,onNodesChange:eY,onEdgesChange:eK,snapToGrid:eo,snapGrid:el,connectionMode:Y,translateExtent:ev,connectOnClick:eQ,defaultEdgeOptions:e0,fitView:eq,fitViewOptions:eG,onNodesDelete:B,onEdgesDelete:z,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:D,onSelectionDrag:H,onSelectionDragStart:L,onSelectionDragStop:F,noPanClassName:ej,nodeOrigin:ec,rfId:tr,autoPanOnConnect:e3,autoPanOnNodeDrag:e6,onError:te,connectionRadius:e7,isValidConnection:e8,nodeDragThreshold:to}),m.createElement(e4,{onSelectionChange:T}),eD,m.createElement(_,{proOptions:eJ,position:e$}),m.createElement(ta,{rfId:tr,disableKeyboardA11y:e5})))});function nT(e){return t=>{let[n,o]=(0,m.useState)(t),l=(0,m.useCallback)(t=>o(n=>e(t,n)),[]);return[n,o,l]}}nz.displayName="ReactFlow";let nL=nT(tO),nH=nT(function(e,t){return tR(e,t)})}}]);