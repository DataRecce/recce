(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{27709:function(e,n,t){Promise.resolve().then(t.bind(t,92351))},92351:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return lu}});var i=t(95766),l=t(88117),r=t(78390),s=t(51742),o=t(58396),a=t(49989),c=t(41042),d=t(15370),u=t(26138),h=t(79481),x=t(78939),m=t(63993),p=t(83246),f=t(19046),v=t(50068),g=t(66518),j=t(57489),y=t(39944),b=t(55465);let k='select * from {{ ref("mymodel") }}',w=(0,g.createContext)({sqlQuery:k,setSqlQuery:()=>{},primaryKeys:void 0,setPrimaryKeys:()=>{}});function C(e){let{children:n}=e,[t,l]=g.useState(k),[r,s]=g.useState();return(0,i.jsx)(w.Provider,{value:{setSqlQuery:l,sqlQuery:t,setPrimaryKeys:s,primaryKeys:r},children:n})}let _=()=>(0,g.useContext)(w),S=(0,g.createContext)({isNodesFetching:[],setIsNodesFetching:()=>{}});function z(e){let{children:n}=e,[t,l]=g.useState([]);return(0,i.jsx)(S.Provider,{value:{isNodesFetching:t,setIsNodesFetching:l},children:n})}var R=t(48510);function T(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=new Set,l={},r=(e,t)=>{if(!(t<0)&&(void 0===l[e]||!(l[e]>=t))){for(let i of(l[e]=t,n(e)))r(i,t-1);i.add(e)}};for(let n of e)r(n,t);return i}function E(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let i=new Set;return n.forEach(e=>{e.forEach(e=>{i.add(e)})}),i}var O=t(28482),I=t.n(O);function A(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return T(n,n=>void 0===e.nodes[n]?[]:Object.keys(e.nodes[n].parents),t)}function N(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return T(n,n=>void 0===e.nodes[n]?[]:Object.keys(e.nodes[n].children),t)}function M(e,n,t){let i=[],l=[];function r(e){return"base"===e?0:"current"===e?2:1}function s(e,n){let t=r(e.from),i=r(n.from);return t<i?-1:t>i?1:0}let o=n?function(e,n){var t;let i=Object.values(e.nodes);if("changed_models"===(n.view_mode||"changed_models")){let n=E(A(e,e.modifiedSet,1),N(e,e.modifiedSet));i=i.filter(e=>n.has(e.id))}if(void 0!==n.node_ids){let e=new Set(n.node_ids);i=i.filter(n=>e.has(n.id))}let l=void 0!==n.packages?n.packages:(null===(t=e.manifestMetadata.current)||void 0===t?void 0:t.project_name)?[e.manifestMetadata.current.project_name]:void 0;return void 0!==l&&(i=i.filter(e=>!!e.packageName&&l.includes(e.packageName))),new Set(i.map(e=>e.id))}(e,n):void 0;for(let n of(null!=t&&(o=o?function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if(0===n.length)return new Set;let i=new Set(n[0]);for(let e of n)i=new Set([...i].filter(n=>e.has(n)));return i}(o,new Set(t)):new Set(t)),Object.values(e.nodes).sort(s)))(!o||o.has(n.id))&&i.push({id:n.id,position:{x:0,y:0},data:n,type:"customNode",targetPosition:R.Ly.Left,sourcePosition:R.Ly.Right});for(let n of Object.values(e.edges).sort(s))(!o||o.has(n.parent.id)&&o.has(n.child.id))&&l.push({id:n.id,type:"customEdge",source:n.parent.id,target:n.child.id,data:n});return D(i,l),L(Array.from(N(e,e.modifiedSet)),i,l)}let D=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LR",i=new(I()).graphlib.Graph;i.setDefaultEdgeLabel(()=>({})),i.setGraph({rankdir:t}),e.forEach(e=>{i.setNode(e.id,{width:300,height:36})}),n.forEach(e=>{i.setEdge(e.source,e.target)}),I().layout(i),e.forEach(e=>{let n=i.node(e.id);return e.position={x:n.x-150,y:n.y-18},e})};function L(e,n,t){let i=new Set(e),l=new Set(t.filter(e=>i.has(e.source)&&i.has(e.target)).map(e=>e.id));return[n.map(e=>({...e,data:{...e.data,isHighlighted:i.has(e.id)}})),t.map(e=>({...e,data:{...e.data,isHighlighted:l.has(e.id)}}))]}function F(e,n){return n.map(n=>{let t=n.id===e;return{...n,data:{...n.data,isSelected:t}}})}function q(e,n){return n.map(n=>{let t=e.includes(n.id);return{...n,data:{...n.data,isSelected:n.data.isSelected||t}}})}function P(e,n){return e.map(e=>({...e,data:{...e.data,isSelected:!1,isActionMode:n,action:void 0}}))}let W={rowCount:e=>["row_count",e],lineage:()=>["lineage"],checks:()=>["checks","list"],check:e=>["checks",e],run:e=>["runs",e],runsAggregated:()=>["runs_aggregated"]};var H=t(62330),V=t(39588);let J=V.env.NEXT_PUBLIC_API_URL?V.env.NEXT_PUBLIC_API_URL:window.location.origin;var K=t(94614);let U=H.default.create({baseURL:J}),B=new K.S;async function Q(){return(await U.get("/api/info")).data}async function Z(e){return(await U.get("/api/model/".concat(e))).data}var X=t(99873),Y=t(85929),$=t.n(Y);async function G(e,n,t){return(await U.post("/api/runs",{type:e,params:n,nowait:null==t?void 0:t.nowait})).data}async function ee(e,n){return(await U.get("/api/runs/".concat(e,"/wait"),{params:{timeout:n}})).data}async function en(e){return await U.post("/api/runs/".concat(e,"/cancel"))}async function et(e,n){return(await U.post("/api/checks/".concat(e,"/run"),{nowait:null==n?void 0:n.nowait})).data}async function ei(e,n,t){return(await U.post("/api/runs/search",{type:e,params:n,limit:t})).data}async function el(){return(await U.post("/api/runs/aggregate",{})).data}let er=(0,g.createContext)({});function es(e){let{refetch:n}=e,t=(0,X.p)(),[l,r]=(0,g.useState)(),s=(0,b.NL)();return(0,g.useEffect)(()=>{let e=new WebSocket("".concat(J.replace(/(http)(s)?\:\/\//,"ws$2://"),"/api/ws"));return r(e),e.onopen=()=>{e.send("ping")},e.onmessage=e=>{if("pong"!==e.data)try{let n=JSON.parse(e.data);if("refresh"===n.command){let{eventType:e,srcPath:i}=n.event,[l,r]=i.split("/").slice(-2),o=$().parse(r).name;t({description:"Detected ".concat(l," ").concat(o," ").concat(e),status:"info",variant:"left-accent",position:"bottom-right",duration:5e3,isClosable:!0}),s.invalidateQueries({queryKey:W.lineage()})}}catch(e){console.error(e)}},()=>{e&&e.close()}},[t,s]),(0,i.jsx)(i.Fragment,{})}function eo(e){var n,t;let{children:l}=e,{data:r,isLoading:s,error:o,refetch:a}=(0,y.a)({queryKey:W.lineage(),queryFn:Q}),{data:c,refetch:d}=(0,y.a)({queryKey:W.runsAggregated(),queryFn:el}),u=(0,g.useMemo)(()=>{let e=null==r?void 0:r.lineage;if(e&&e.base&&e.current)return function(e,n){let t={},i={},l=(e,n)=>({id:e,name:e,data:{},from:n,parents:{},children:{},isSelected:!1});for(let[n,i]of Object.entries(e.nodes))t[n]=l(n,"base"),i&&(t[n].data.base=i,t[n].name=null==i?void 0:i.name,t[n].resourceType=null==i?void 0:i.resource_type,t[n].packageName=null==i?void 0:i.package_name);for(let[e,i]of Object.entries(n.nodes))t[e]?t[e].from="both":t[e]=l(e,"current"),i&&(t[e].data.current=n.nodes&&n.nodes[e],t[e].name=null==i?void 0:i.name,t[e].resourceType=null==i?void 0:i.resource_type,t[e].packageName=null==i?void 0:i.package_name);for(let[n,l]of Object.entries(e.parent_map))for(let e of l){let l=t[n],r=t[e],s="".concat(e,"_").concat(n);if(!l||!r)continue;i[s]={id:s,from:"base",parent:r,child:l};let o=i[s];l.parents[e]=o,r.children[n]=o}for(let[e,l]of Object.entries(n.parent_map))for(let n of l){let l=t[e],r=t[n],s="".concat(n,"_").concat(e);if(!l||!r)continue;i[s]?i[s].from="both":i[s]={id:s,from:"current",parent:r,child:l};let o=i[s];l.parents[n]=o,r.children[e]=o}let r=[];for(let[e,n]of Object.entries(t))if("base"===n.from)n.changeStatus="removed",r.push(n.id);else if("current"===n.from)n.changeStatus="added",r.push(n.id);else{var s,o,a,c,d,u;let e=null==n?void 0:null===(a=n.data)||void 0===a?void 0:null===(o=a.base)||void 0===o?void 0:null===(s=o.checksum)||void 0===s?void 0:s.checksum,t=null==n?void 0:null===(u=n.data)||void 0===u?void 0:null===(d=u.current)||void 0===d?void 0:null===(c=d.checksum)||void 0===c?void 0:c.checksum;e&&t&&e!==t&&(n.changeStatus="modified",r.push(n.id))}for(let[e,n]of Object.entries(i))"base"===n.from?n.changeStatus="removed":"current"===n.from&&(n.changeStatus="added");return{nodes:t,edges:i,modifiedSet:r,manifestMetadata:{base:e.manifest_metadata||void 0,current:n.manifest_metadata||void 0},catalogMetadata:{base:e.catalog_metadata||void 0,current:n.catalog_metadata||void 0}}}(e.base,e.current)},[r]),h=null==o?void 0:o.message,x=null==r?void 0:r.lineage,m=null==r?void 0:r.demo,p=null==r?void 0:r.review_mode,f=null==r?void 0:r.cloud_mode,v=null==r?void 0:r.file_mode,j=null==r?void 0:r.adapter_type,b=null==r?void 0:r.git,k={adapterType:j,git:b,pullRequest:null==r?void 0:r.pull_request,dbt:{base:null==x?void 0:null===(n=x.base)||void 0===n?void 0:n.manifest_metadata,current:null==x?void 0:null===(t=x.current)||void 0===t?void 0:t.manifest_metadata},sqlmesh:null==r?void 0:r.sqlmesh};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es,{refetch:a}),(0,i.jsx)(er.Provider,{value:{lineageGraph:u,retchLineageGraph:()=>{a()},envInfo:k,reviewMode:p,cloudMode:f,fileMode:v,isDemoSite:m,error:h,isLoading:s,runsAggregated:c,refetchRunsAggregated:()=>{d()}},children:l})]})}let ea=()=>(0,g.useContext)(er),ec=()=>{let{runsAggregated:e,refetchRunsAggregated:n}=ea();return[e,n]};var ed=t(17695),eu=t(62628),eh=t(68830),ex=t(96985),em=t(69384),ep=t(7797),ef=t(13844),ev=t(64653);let eg=e=>{let{isOpen:n,onClose:t,onExecute:r,type:s,title:a,params:c,RunForm:d}=e,[u,h]=(0,g.useState)(c),[x,m]=(0,g.useState)(!1);return(0,i.jsxs)(ed.u_,{isOpen:n,onClose:t,size:"6xl",scrollBehavior:"inside",children:[(0,i.jsx)(eu.Z,{}),(0,i.jsxs)(eh.h,{overflowY:"auto",height:"75%",children:[(0,i.jsx)(ex.x,{children:a}),(0,i.jsx)(em.o,{}),(0,i.jsx)(ep.f,{p:"0px",h:"100%",overflow:"auto",borderY:"1px solid lightgray",children:(0,i.jsx)(l.xu,{style:{contain:"layout"},children:d&&(0,i.jsx)(d,{params:u,onParamsChanged:h,setIsReadyToExecute:m})})}),(0,i.jsx)(ef.m,{children:(0,i.jsx)(o.k,{gap:"10px",children:(0,i.jsx)(ev.z,{isDisabled:!x,colorScheme:"blue",onClick:()=>{r(s,u)},children:"Execute"})})})]})]})};var ej=t(65952),ey=t(76330),eb=t(53152),ek=t(18222),ew=t(30678),eC=t(2838),e_=t(13156),eS=t.n(e_);function ez(e,n){let t=[];return e.forEach(e=>{t.some(n=>n.name===e.name)||t.push(e)}),n.forEach(e=>{t.some(n=>n.name===e.name)||t.push(e)}),t}var eR=e=>{var n;let{lineageGraph:t}=ea(),[i,l]=(0,g.useState)([]),[r,s]=(0,g.useState)(),[o,a]=(0,g.useState)(!0),[c,d]=(0,g.useState)(null),u=eS().find(null==t?void 0:t.nodes,{name:e}),h=(0,g.useMemo)(()=>u?function(e){function n(e){return e&&e.columns?Object.values(e.columns):[]}return ez(n(e.data.base),n(e.data.current))}(u):[],[u]),x=u?null===(n=u.data.current)||void 0===n?void 0:n.primary_key:void 0;return(0,g.useEffect)(()=>{let e=async()=>{try{let e=(await Z(null==u?void 0:u.id)).model;if(!e||!e.base.columns||!e.current.columns){l([]);return}s(e.current.primary_key);let n=Object.values(e.base.columns),t=Object.values(e.current.columns);l(ez(n,t))}catch(e){d(e)}};h.length>0?(l(h),s(x)):(null==u?void 0:u.id)===void 0?l([]):e(),a(!1)},[null==u?void 0:u.id,h,x]),{columns:i,primaryKey:r,isLoading:o,error:c}},eT=t(68825),eE=t(81945),eO=t(14827);function eI(e){let n=e>0&&e<=.001,t=e<1&&e>=.999,i=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",t=arguments.length>2?arguments[2]:void 0;return"number"!=typeof e?e:new Intl.NumberFormat(n,t).format(e)}(n,"en-US",{style:"percent",minimumFractionDigits:1})};if(n){let e=i(.001);return"<".concat(e)}if(t){let e=i(.999);return">".concat(e)}return i()}function eA(e){if("number"!=typeof e)return e;{let n=Math.abs(e),t=n>=.01,i=n>=1e6,l=n>=1e9,r=n>=1e15;if(r||n>=1e12)return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:r?0:2}).format(e/1e12).replace("L","T");if(l||i||n>=1e3){let n={base:l?1e9:i?1e6:1e3,unit:l?"B":i?"M":"K"};return new Intl.NumberFormat("en-US",{style:"unit",unit:"liter",unitDisplay:"narrow",maximumFractionDigits:1}).format(e/n.base).replace("L",n.unit)}return n>=1?new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e):new Intl.NumberFormat("en-US",{maximumFractionDigits:t?3:2,notation:t||0===n?"standard":"scientific"}).format(e)}}let eN="#63B3ED",eM="#F6AD55",eD="".concat(eN,"A5"),eL="".concat(eM,"A5");function eF(e){let{color:n}=e;return(0,i.jsx)(l.xu,{display:"inline-block",w:"10px",h:"10px",bgColor:n,mr:"2",borderRadius:"sm"})}function eq(e){let{data:n,hideAxis:t=!1,animation:l=!1}=e;eE.kL.register(eE.ZL,eE.RM,eE.f$,eE.uw,eE.u);let r=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{...t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{datasets:i,type:l,samples:r=0,binEdges:s}=e,[o,a]=i,c="datetime"===l;return{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1,callbacks:{title(e){let[{dataIndex:n,datasetIndex:t}]=e,i=eW(s,n);return"".concat(c?"Date Range":"string"===l?"Text Length":"Value Range","\n").concat(i)},label(e){let{datasetIndex:n,dataIndex:t,dataset:{label:i}}=e,l=0===n?a.counts:o.counts,s=eI(l[t]/r),c=l[t];return"".concat(i,": ").concat(c," (").concat(s,")")}}}},scales:function(e){let{datasets:n,min:t=0,max:i=0,type:l,binEdges:r}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[o,a]=n,c=Math.max(...a.counts,...o.counts),d=r.map((e,n)=>eW(r,n)).slice(0,-1);return{x:"datetime"===l?{display:!s,type:"timeseries",min:t,max:i,adapters:{date:{}},time:{minUnit:"day"},grid:{display:!1},ticks:{minRotation:30,maxRotation:30,maxTicksLimit:8}}:{display:!s,type:"category",grid:{display:!1},ticks:{callback:(e,n)=>d[n]},stacked:!0},y:{display:!s,type:"linear",max:c,border:{dash:[2,2]},grid:{color:"lightgray"},ticks:{maxTicksLimit:8,callback:function(e,n){return eA(e)}},beginAtZero:!0}}}(e,n),...t}}(n,t,{animation:l}),s=function(e){let{datasets:n,type:t,binEdges:i}=e,[l,r]=n,s=eP(t,i,"Current",eD,r),o=eP(t,i,"Base",eL,l);return{labels:i.map((e,n)=>eW(i,n)).slice(0,-1),datasets:[s,o]}}(n);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.k,{alignItems:"center",direction:"row",children:[(0,i.jsx)(u.L,{}),(0,i.jsxs)(h.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(eF,{color:eL})," Base"]}),(0,i.jsxs)(h.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(eF,{color:eD})," Current"]}),(0,i.jsx)(u.L,{})]}),(0,i.jsx)(eO.kL,{type:"bar",options:r,data:s,plugins:[]})]})}function eP(e,n,t,i,l){let{counts:r=[]}=l;return{label:t,data:"datetime"===e?r.map((e,t)=>({x:n[t],y:e})):r,backgroundColor:i,borderColor:i,hoverBackgroundColor:i,borderWidth:0,categoryPercentage:1,barPercentage:1,xAxisID:"x"}}function eW(e,n){let t=e[n],i=e[n+1],l=eA(t),r=eA(i);return"".concat(l," - ").concat(r)}var eH=t(20074),eV=t(48289),eJ=t(81737),eK=t.n(eJ),eU=t(77249);function eB(){let e=(0,X.p)();return{successToast:function(n){e({description:n,status:"info",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0})},failToast:function(n,t){e({title:n,description:"".concat(t),status:"error",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0})}}}var eQ=t(50228),eZ=t(67605),eX=t.n(eZ);let eY="ignore-screenshot";function e$(e){let{renderLibrary:n="html2canvas",imageType:t="png",backgroundColor:l=null,boardEffect:r=!0,shadowEffect:s=!1,borderStyle:c="solid 1px #ccc",borderRadius:d="10px",onSuccess:u,onError:x,ignoreElements:m}=e,[p,f]=(0,g.useState)("idle"),v=(0,g.useRef)(null),{onOpen:j,setImgBlob:y,ImageDownloadModal:b}=function(){let{isOpen:e,onOpen:n,onClose:t}=(0,ej.q)(),[l,r]=(0,g.useState)();return{onOpen:n,setImgBlob:r,ImageDownloadModal:function(){let[n,r]=(0,g.useState)();return(0,g.useEffect)(()=>{if(!l)return;let e=new FileReader;e.readAsDataURL(l),e.onloadend=e=>{var n,t;(null===(n=e.target)||void 0===n?void 0:n.result)&&(null===(t=e.target)||void 0===t?void 0:t.result)!==null&&r(e.target.result)}},[r]),(0,i.jsxs)(ed.u_,{size:"3xl",isOpen:e,onClose:t,children:[(0,i.jsx)(eu.Z,{}),(0,i.jsxs)(eh.h,{children:[(0,i.jsx)(ex.x,{children:"Screenshot Preview"}),(0,i.jsx)(em.o,{}),(0,i.jsxs)(ep.f,{children:[(0,i.jsxs)(o.k,{px:"10px",gap:"10px",direction:"column",children:[(0,i.jsxs)(o.k,{alignItems:"center",gap:"5px",children:[(0,i.jsx)(eV.s,{color:"red.600"}),(0,i.jsx)(h.x,{fontWeight:"500",display:"inline",children:"Copy to the Clipboard"})," ","is not supported in the current browser"]}),(0,i.jsx)(h.x,{children:"Please download it directly"})]}),(0,i.jsx)(a.E,{src:n,alt:"screenshot"})]}),(0,i.jsxs)(ef.m,{children:[(0,i.jsx)(ev.z,{mr:3,onClick:t,children:"Close"}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>{if(!l)return;let e=new Date,n="recce-screenshot-".concat((0,eQ.WU)(e,"yyyy-MM-dd-HH-mm-ss"),".png");eX()(l,n),t()},children:"Download"})]})]})]})}}}(),k=async()=>{if(!v.current)throw console.error("No node to use for screenshot"),Error("No node to use for screenshot");let e=v.current.element||v.current,t=e.style.overflow,i=e.style.border,o=e.style.borderRadius,a=e.style.backgroundColor,u=e.style.height;try{var h;e.style.overflow="hidden",e.style.border=r?c:"",e.style.borderRadius=r?d:"",e.style.backgroundColor=l||"",e.style.height=e.offsetHeight+"px";let t=document.createElement("style");document.head.appendChild(t),null===(h=t.sheet)||void 0===h||h.insertRule("body > div:last-child img { display: inline-block; }"),f("loading");let i="html2canvas"===n?await eK()(e,{logging:!1,backgroundColor:null,ignoreElements:m}):await (0,eU.rT)(e,{filter:m?e=>!m(e):void 0});t.remove();let o=s?document.createElement("canvas"):i;if(s){o.width=i.width+80,o.height=i.height+80;let e=o.getContext("2d");if(e)e.shadowColor="rgba(0, 0, 0, 0.5)",e.shadowBlur=20,e.shadowOffsetX=10,e.shadowOffsetY=10,e.drawImage(i,40,40);else throw console.error("Error getting canvas context"),Error("Error getting canvas context to add shadow effect")}let a=await fetch(o.toDataURL());return await a.blob()}catch(e){throw console.error("Error converting to image",e),e}finally{e.style.overflow=t,e.style.border=i,e.style.borderRadius=o,e.style.backgroundColor=a,e.style.height=u}};return{status:p,isLoading:"loading"===p,isErrored:"error"===p,isSuccess:"success"===p,copyToClipboard:async()=>{try{await navigator.clipboard.write([new ClipboardItem({["image/".concat(t)]:k()})]),f("success"),u&&u()}catch(e){"ClipboardItem is not defined"===e.message?(y(await k()),j(),f("success")):(f("error"),console.error("Error copying to clipboard",e),x&&x(e))}},ImageDownloadModal:b,ref:v}}function eG(e){let{successToast:n,failToast:t}=eB(),{isLoading:l,copyToClipboard:r,ImageDownloadModal:s,ref:o}=e$({imageType:"png",shadowEffect:!0,backgroundColor:(null==e?void 0:e.backgroundColor)||null,onSuccess:()=>{n("Copied the query result as an image to clipboard")},onError:e=>{console.error("Error taking screenshot",e),t("Failed to copy image to clipboard",e)}});return{ref:o,CopyToClipboardButton:function(e){let{imageType:n="png",...t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ev.z,{size:"sm",leftIcon:(0,i.jsx)(eH.T,{}),style:{position:"absolute",bottom:"16px",right:"16px"},isLoading:l,onMouseEnter:()=>{if(o.current){let e=o.current.element||o.current;e.style.boxShadow="rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px",e.style.transition="box-shadow 0.5s ease-in-out"}},onMouseLeave:()=>{o.current&&((o.current.element||o.current).style.boxShadow="")},onClick:async()=>{o.current&&(await r(),(o.current.element||o.current).style.boxShadow="")},children:"Copy to Clipboard"}),(0,i.jsx)(s,{})]})}}}let e0=e=>{let{backgroundColor:n="white",blockSize:t,children:r,...s}=e,{ref:o,CopyToClipboardButton:a}=eG({backgroundColor:n});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.xu,{ref:o,...s,overflowY:"auto",overflowX:"hidden",children:(0,i.jsx)(l.xu,{backgroundColor:n,height:"100%",blockSize:t,children:r})}),(0,i.jsx)(a,{imageType:"png"})]})};var e1=t(24112);t(63156);var e2=t(22204);function e5(e){let{enableScreenshot:n=!0,...t}=e,{ref:l,CopyToClipboardButton:r}=eG();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e2.ZP,{ref:l,...t}),n&&(0,i.jsx)(r,{imageType:"png"})]})}function e4(){return(0,i.jsx)(o.k,{h:"35px",alignItems:"center",justifyContent:"center",bg:"gray.100",style:{textAlign:"center",gridColumn:"1/-1"},children:(0,i.jsx)(h.x,{fontWeight:"600",children:" No rows"})})}t(87679);var e9=t(52091);function e3(e,n){let t=function(e,n){let t=[...e],i=[...n],l=[];for(;t.length>0&&i.length>0;)if(l.includes(t[0]))t.shift();else if(l.includes(i[0]))i.shift();else if(t[0]===i[0])l.push(t[0]),t.shift(),i.shift();else if(i.includes(t[0])){let e=i.indexOf(t[0]);for(let n=0;n<e;n++)l.includes(i[n])||l.push(i[n]);l.push(t[0]),t.shift(),i.splice(0,e+1)}else l.push(t[0]),t.shift();return t.forEach(e=>{l.includes(e)||l.push(e)}),i.forEach(e=>{l.includes(e)||l.push(e)}),l}(e,n),i={};for(let l of t)e.includes(l)?n.includes(l)?i[l]=void 0:i[l]="removed":i[l]="added";let l={};e.forEach((e,n)=>{l[e]=n});let r=-1;for(let e of t){let n=l[e];void 0!==n&&(n>r?r=n:i[e]="reordered")}return i}function e6(e,n){let t=[];for(let i of n){let n=e.findIndex(e=>e.name===i);if(n<0)throw Error("Column ".concat(i," not found"));t.push(n)}return t}function e8(e,n,t){let i={};if(0===n.length)return JSON.stringify({_index:t._index});for(let l of n)i[e[l].name]=t[l];return JSON.stringify(i)}function e7(e){let{name:n,columnStatus:t,onPrimaryKeyChange:r,onPinnedColumnsChange:a,...c}=e,d=c.primaryKeys||[],u=c.pinnedColumns||[],h=d.includes(n),x=u.includes(n);return"index"===n?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(o.k,{alignItems:"center",gap:"10px",className:"grid-header",children:[(0,i.jsx)(l.xu,{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n}),"added"!==t&&"removed"!==t&&r&&(0,i.jsx)(s.J,{className:h?"close-icon":"key-icon",display:h?"block":"none",cursor:"pointer",as:h?e9.ven:e9.MhP,onClick:h?()=>{let e=d.filter(e=>e!==n);r&&r(e)}:()=>{let e=[...d.filter(e=>"index"!==e),n];r&&r(e)}}),!h&&a&&(0,i.jsx)(s.J,{className:x?"unpin-icon":"pin-icon",display:x?"block":"none",cursor:"pointer",as:x?e9.$kI:e9.oJP,onClick:x?()=>{let e=u.filter(e=>e!==n);a&&a(e)}:()=>{let e=[...u,n];a&&a(e)}})]})}let ne=e=>{let n;let t=!1;return"boolean"==typeof e?n=e.toString():""===e?(n="(empty)",t=!0):null==e?(n="(null)",t=!0):n=e,[n,t]},nn=e=>{let{row:n,column:t}=e;if(!n.hasOwnProperty(t.key))return(0,i.jsx)(h.x,{style:{color:"gray"},children:"-"});let[l,r]=ne(n[t.key]);return(0,i.jsx)(h.x,{style:{color:r?"gray":"inherit"},children:l})};function nt(e,n,t){let l=e||{columns:[],data:[]},r=n||{columns:[],data:[]},s=(null==t?void 0:t.primaryKeys)||[],o=(null==t?void 0:t.pinnedColumns)||[],a=(null==t?void 0:t.changedOnly)||!1,c=[],d=function(e,n){let t={};return Object.entries(e3(e.columns.map(e=>e.name),n.columns.map(e=>e.name))).map(i=>{let[l,r]=i;t[l]={status:r,baseColumnIndex:e.columns.findIndex(e=>e.name===l),currentColumnIndex:n.columns.findIndex(e=>e.name===l)}}),t}(l,r),u={},h={},x=!1,m=!1;if(0===s.length)l.data.forEach((e,n)=>{e._index=n+1,u[JSON.stringify({_index:n+1})]=e}),r.data.forEach((e,n)=>{e._index=n+1,h[JSON.stringify({_index:n+1})]=e});else{let e=e6(l.columns,s);l.data.forEach((n,t)=>{let i=e8(l.columns,e,n);i in u&&(x=!0),u[i]=n}),e=e6(r.columns,s),r.data.forEach((n,t)=>{let i=e8(r.columns,e,n);i in h&&(m=!0),h[i]=n})}let p=e3(Object.keys(u),Object.keys(h)),f={added:0,removed:0,modified:0},v=Object.entries(p).map(e=>{let[n,t]=e,i=u[n],o=h[n],a=JSON.parse(n);if(i&&l.columns.forEach((e,n)=>{s.includes(e.name)||(a["base__".concat(e.name)]=i[n])}),o&&r.columns.forEach((e,n)=>{s.includes(e.name)||(a["current__".concat(e.name)]=o[n])}),i){if(o){for(let[e,n]of Object.entries(d))"index"===e||s.includes(e)||n.baseColumnIndex<0||n.currentColumnIndex<0||eS().isEqual(i[n.baseColumnIndex],o[n.currentColumnIndex])||(a.__status="modified",n.status="modified");"modified"===a.__status&&f.modified++}else a.__status="removed",f.removed++}else a.__status="added",f.added++;return a});a&&(v=v.filter(e=>"added"===e.__status||"removed"===e.__status||"modified"===e.__status));let g=(e,n)=>{let l="added"===n?"diff-header-added":"removed"===n?"diff-header-removed":void 0,r=t=>{let i=t.__status;if("removed"===i)return"diff-cell-removed";if("added"===i)return"diff-cell-added";if("added"===n);else if("removed"===n);else if(!eS().isEqual(t["base__".concat(e)],t["current__".concat(e)]))return"diff-cell-modified"};return{headerCellClass:l,name:(0,i.jsx)(e7,{name:e,columnStatus:n,...t}),children:[{key:"base__".concat(e),name:"Base",renderEditCell:e2.Ug,headerCellClass:l,cellClass:r,renderCell:nn,size:"auto"},{key:"current__".concat(e),name:"Current",renderEditCell:e2.Ug,headerCellClass:l,cellClass:r,renderCell:nn,size:"auto"}]}};return 0===s.length?c.push({key:"_index",width:50,maxWidth:100,name:"",cellClass:"index-column"}):s.forEach(e=>{let n=d[e].status||"";c.push({key:"".concat(e),name:(0,i.jsx)(e7,{name:e,columnStatus:n,...t}),frozen:!0,cellClass:e=>{if(e.__status)return"diff-header-".concat(e.__status)},renderCell:nn})}),o.forEach(e=>{let n=d[e].status||"";"index"===e||s.includes(e)||c.push(g(e,n))}),Object.entries(d).forEach(e=>{let[n,t]=e,i=t.status||"";"index"===n||s.includes(n)||o.includes(n)||a&&f.modified>0&&"added"!==i&&"removed"!==i&&"modified"!==i||c.push(g(n,i))}),{columns:c,rows:v,invalidPKeyBase:x,invalidPKeyCurrent:m}}function ni(e){let{name:n,columnStatus:t,onPrimaryKeyChange:r,onPinnedColumnsChange:a,...c}=e,d=c.primaryKeys||[],u=c.pinnedColumns||[],h=d.includes(n),x=u.includes(n);return"index"===n?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(o.k,{alignItems:"center",gap:"10px",className:"grid-header",children:[(0,i.jsx)(l.xu,{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:n}),!h&&a&&(0,i.jsx)(s.J,{className:x?"unpin-icon":"pin-icon",display:x?"block":"none",cursor:"pointer",as:x?e9.$kI:e9.oJP,onClick:x?()=>{let e=u.filter(e=>e!==n);a&&a(e)}:()=>{let e=[...u,n];a&&a(e)}})]})}function nl(e,n,t){let l=(null==t?void 0:t.pinnedColumns)||[],r=(null==t?void 0:t.changedOnly)||!1,s=[],o=function(e){let n={};return e.columns.map((e,t)=>{n[e.name]={index:t}}),n}(e),a={},c={};if(0===n.length)throw Error("Primary keys are required");let d=function(e,n){let t=[];for(let i of n){let n=e.findIndex(e=>e.name===i);if(n<0)throw Error("Column ".concat(i," not found"));t.push(n)}return t}(e.columns,n),u=(o.in_a||o.IN_A).index,h=(o.in_b||o.IN_B).index;e.data.forEach((n,t)=>{let i=function(e,n,t){let i={};if(0===n.length)return JSON.stringify({_index:t._index});for(let l of n)i[e[l].name]=t[l];return JSON.stringify(i)}(e.columns,d,n);n[u]&&(a[i]=n),n[h]&&(c[i]=n)});let x=e3(Object.keys(a),Object.keys(c)),m={added:0,removed:0,modified:0},p=Object.entries(x).map(t=>{let[i,l]=t,r=a[i],s=c[i],d=JSON.parse(i);if(r&&e.columns.forEach((e,t)=>{n.includes(e.name)||(d["base__".concat(e.name)]=r[t])}),s&&e.columns.forEach((e,t)=>{n.includes(e.name)||(d["current__".concat(e.name)]=s[t])}),r){if(s)for(let[e,t]of Object.entries(o))!("index"===e||n.includes(e))&&(eS().isEqual(r[t.index],s[t.index])||(d.__status="modified",t.status="modified"));else d.__status="removed",m.removed++}else d.__status="added",m.added++;return"modified"===d.__status&&m.modified++,d});r&&(p=p.filter(e=>"added"===e.__status||"removed"===e.__status||"modified"===e.__status));let f=(e,n)=>{let l="added"===n?"diff-header-added":"removed"===n?"diff-header-removed":void 0,r=t=>{let i=t.__status;if("removed"===i)return"diff-cell-removed";if("added"===i)return"diff-cell-added";if("added"===n);else if("removed"===n);else if(!eS().isEqual(t["base__".concat(e)],t["current__".concat(e)]))return"diff-cell-modified"};return{headerCellClass:l,name:(0,i.jsx)(ni,{name:e,columnStatus:n,...t}),children:[{key:"base__".concat(e),name:"Base",renderEditCell:e2.Ug,headerCellClass:l,cellClass:r,renderCell:nn,size:"auto"},{key:"current__".concat(e),name:"Current",renderEditCell:e2.Ug,headerCellClass:l,cellClass:r,renderCell:nn,size:"auto"}]}};return n.forEach(e=>{let n=o[e].status||"";s.push({key:"".concat(e),name:(0,i.jsx)(ni,{name:e,columnStatus:n,...t}),frozen:!0,cellClass:e=>{if(e.__status)return"diff-header-".concat(e.__status)},renderCell:nn})}),l.forEach(e=>{let t=o[e].status||"";n.includes(e)||s.push(f(e,t))}),Object.entries(o).forEach(e=>{let[t,i]=e,o=i.status||"";"in_a"===t||"in_b"===t||n.includes(t)||l.includes(t)||r&&m.modified>0&&"added"!==o&&"removed"!==o&&"modified"!==o||s.push(f(t,o))}),{columns:s,rows:p}}var nr=t(93998),ns=t(18454),no=t(25773),na=t(16257),nc=t(32088),nd=t(39171);let nu=e=>{let{run:n,warnings:t,viewOptions:r,onAddToChecklist:s,onViewOptionsChanged:a}=e;return(0,i.jsxs)(o.k,{borderBottom:"1px solid lightgray",justifyContent:"flex-end",gap:"5px",alignItems:"center",px:"10px",bg:t&&t.length>0?"orange.100":"inherit",children:[(0,i.jsx)(no.g,{alignItems:"flex-start",spacing:0,children:t&&t.map((e,n)=>(0,i.jsxs)(l.xu,{children:[(0,i.jsx)(nr.a,{color:"orange.600"})," ",e]},n))}),(0,i.jsx)(u.L,{minHeight:"32px"}),(0,i.jsx)(na.X,{isChecked:null==r?void 0:r.changed_only,onChange:()=>{let e=!(null==r?void 0:r.changed_only);a&&a({...r,changed_only:e})},children:"Changed only"}),s&&(0,i.jsx)(nc.u,{label:"Add to Checklist",children:(0,i.jsx)(nd.h,{variant:"unstyled",size:"sm","aria-label":"Add",icon:(0,i.jsx)(ns.d,{}),onClick:()=>s(n)})})]})},nh=e=>{var n,t,l,r,s,a;let{run:c,onAddToChecklist:d,viewOptions:u,onViewOptionsChanged:h}=e,x=(0,g.useMemo)(()=>(null==u?void 0:u.primary_keys)||[],[u]),m=(0,g.useMemo)(()=>(null==u?void 0:u.changed_only)||!1,[u]),p=(0,g.useMemo)(()=>(null==u?void 0:u.pinned_columns)||[],[u]),f=(0,g.useMemo)(()=>{var e,n;return nt(null==c?void 0:null===(e=c.result)||void 0===e?void 0:e.base,null==c?void 0:null===(n=c.result)||void 0===n?void 0:n.current,{changedOnly:m,primaryKeys:x,onPrimaryKeyChange:e=>{h&&h({...u,primary_keys:e})},pinnedColumns:p,onPinnedColumnsChange:e=>{h&&h({...u,pinned_columns:e})}})},[c,u,m,x,p,h]),v=(0,g.useMemo)(()=>{let e=x.join(", ");return f.invalidPKeyBase&&f.invalidPKeyCurrent?"Warning: The primary key '".concat(e,"' is not unique in the base and current environments"):f.invalidPKeyBase?"Warning: The primary key '".concat(e,"' is not unique in the base environment"):f.invalidPKeyCurrent?"Warning: The primary key '".concat(e,"' is not unique in the current environment"):void 0},[f.invalidPKeyBase,f.invalidPKeyCurrent,x]),j=(null===(t=c.result)||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:n.limit)||0,y=j>0&&((null==c?void 0:null===(r=c.result)||void 0===r?void 0:null===(l=r.current)||void 0===l?void 0:l.more)||(null==c?void 0:null===(a=c.result)||void 0===a?void 0:null===(s=a.base)||void 0===s?void 0:s.more))?"Warning: Displayed results are limited to ".concat(j.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,b=[];return(v&&b.push(v),y&&b.push(y),0===f.columns.length)?(0,i.jsx)(e1.M,{height:"100%",children:"No data"}):m&&0===f.rows.length?(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:c,viewOptions:u,onAddToChecklist:d,onViewOptionsChanged:h,warnings:b}),(0,i.jsx)(e1.M,{height:"100%",children:"No change"}),";"]}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:c,viewOptions:u,onAddToChecklist:d,onViewOptionsChanged:h,warnings:b}),(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:f.columns,rows:f.rows,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})},nx=e=>{var n,t,l,r;let{run:s,onAddToChecklist:a,viewOptions:c,onViewOptionsChanged:d}=e,u=(0,g.useMemo)(()=>(null==c?void 0:c.changed_only)||!1,[c]),h=(0,g.useMemo)(()=>(null==c?void 0:c.pinned_columns)||[],[c]),x=(0,g.useMemo)(()=>{var e,n;if(!(null===(e=s.result)||void 0===e?void 0:e.diff)||!(null==s?void 0:null===(n=s.params)||void 0===n?void 0:n.primary_keys))return{columns:[],rows:[]};let t=s.params.primary_keys;return nl(null==s?void 0:s.result.diff,t,{changedOnly:u,pinnedColumns:h,onPinnedColumnsChange:e=>{d&&d({...c,pinned_columns:e})}})},[s,c,u,h,d]),m=(null===(t=s.result)||void 0===t?void 0:null===(n=t.diff)||void 0===n?void 0:n.limit)||0,p=m>0&&(null==s?void 0:null===(r=s.result)||void 0===r?void 0:null===(l=r.diff)||void 0===l?void 0:l.more)?"Warning: Displayed results are limited to ".concat(m.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,f=[];return(p&&f.push(p),0===x.columns.length)?(0,i.jsx)(e1.M,{height:"100%",children:"No data"}):u&&0===x.rows.length?(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:s,viewOptions:c,onAddToChecklist:a,onViewOptionsChanged:d,warnings:f}),(0,i.jsx)(e1.M,{height:"100%",children:"No change"})]}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:s,viewOptions:c,onAddToChecklist:a,onViewOptionsChanged:d,warnings:f}),(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:x.columns,rows:x.rows,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})},nm=e=>{var n;return(null===(n=e.run)||void 0===n?void 0:n.result)!==void 0&&null!==e.run.result.diff&&void 0!==e.run.result.diff?(0,i.jsx)(nx,{...e}):(0,i.jsx)(nh,{...e})};function np(e){let{name:n,pinnedColumns:t=[],onPinnedColumnsChange:r=()=>{}}=e,a=t.includes(n);return(0,i.jsxs)(o.k,{className:"grid-header",alignItems:"center",children:[(0,i.jsx)(l.xu,{flex:1,children:n}),(0,i.jsx)(s.J,{className:a?"unpin-icon":"pin-icon",display:a?"block":"none",cursor:"pointer",as:a?e9.$kI:e9.oJP,onClick:a?()=>{r(t.filter(e=>e!==n))}:()=>{r([...t,n])}})]})}let nf=e=>{let{run:n,viewOptions:t,onViewOptionsChanged:r,onAddToChecklist:s}=e,a=(0,g.useMemo)(()=>(null==t?void 0:t.pinned_columns)||[],[t]),c=null==n?void 0:n.result,d=(0,g.useMemo)(()=>c?function(e,n){let t=[],l=n.pinnedColumns||[],r=(e,t)=>({key:String(e),name:(0,i.jsx)(np,{name:t,...n}),width:"auto",renderCell:nn});return t.push({key:"_index",name:"",width:50,cellClass:"index-column"}),l.forEach(n=>{let i=eS().findIndex(e.columns,e=>e.name===n);i<0||t.push(r(i,n))}),e.columns.forEach((e,n)=>{l.includes(e.name)||t.push(r(n,e.name))}),e.data.forEach((e,n)=>{e._index=n+1}),{columns:t,rows:e.data}}(c,{pinnedColumns:a,onPinnedColumnsChange:e=>{r&&r({...t,pinned_columns:e})}}):{rows:[],columns:[]},[c,a,t,r]);if(0===d.columns.length)return(0,i.jsx)(e1.M,{height:"100%",children:"No data"});let h=(null==c?void 0:c.limit)||0,x=h>0&&(null==c?void 0:c.more)?"Warning: Displayed results are limited to ".concat(h.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,m=s||x;return(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[m&&(0,i.jsxs)(o.k,{borderBottom:"1px solid lightgray",alignItems:"center",gap:"5px",px:"10px",bg:x?"orange.100":"inherit",children:[x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nr.a,{color:"orange.600",alignSelf:"center"})," ",(0,i.jsx)(l.xu,{children:x})]}),(0,i.jsx)(u.L,{minHeight:"32px"}),s&&(0,i.jsx)(nc.u,{label:"Add to Checklist",children:(0,i.jsx)(nd.h,{variant:"unstyled",size:"sm","aria-label":"Add",icon:(0,i.jsx)(ns.d,{}),onClick:()=>s(n)})})]}),(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:d.columns,rows:d.rows,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})};function nv(e,n){if(e<n){let t=(n-e)/e*100;return"+".concat(t>=.1?t.toFixed(1):" <0.1 ","%")}if(!(e>n))return"0 %";{let t=(e-n)/e*100;return"-".concat(t>=.1?t.toFixed(1):" <0.1 ","%")}}function ng(e){let{run:n}=e;function t(e){if(e.base===e.current);else if(e.base<e.current||"N/A"===e.base)return"column-body-added";else if(e.base>e.current||"N/A"===e.current)return"column-body-removed";return"column-body-normal"}let l=n.result||{},r=Object.keys(n.result||{}).map(e=>{let n=l[e],t=(null==n?void 0:n.base)||null,i=(null==n?void 0:n.curr)||null,r="No Change";return null!==t&&null!==i?r=t!==i?nv(t,i):"No Change":t===i?r="N/A":null===t?r="Added":null===i&&(r="Removed"),{name:e,base:null===t?"N/A":Number(t),current:null===i?"N/A":Number(i),delta:r}});return 0===r.length?(0,i.jsx)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:"No nodes matched"}):(0,i.jsx)(o.k,{direction:"column",children:Object.keys(l).length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",fontSize:"10pt",borderWidth:1},columns:[{key:"name",name:"Name",cellClass:t},{key:"base",name:"Base Rows",cellClass:t},{key:"current",name:"Current Rows",cellClass:t},{key:"delta",name:"Delta",cellClass:t}],rows:r,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},className:"rdg-light",enableScreenshot:!0})})})}var nj=t(96124);let ny="#63B3ED";function nb(e,n){let t=n?10:e.counts.length,i=e.counts.slice(0,t),l=e.valids-i.reduce((e,n)=>e+n,0);return e.values.slice(0,t).concat([l]).map((n,t)=>{let r;let s=t===i.length,o=s?l:i[t],a=!1;return s?(r="(others)",a=!0):null==n?(r="(null)",a=!0):"string"==typeof n&&0===n.length?(r="(empty)",a=!0):r=String(n),{isLastItemOthers:s,isSpecialLabel:a,label:r,count:o,displayCount:eA(o),displayRatio:eI(o/e.valids)||"N/A"}})}function nk(e){let{base:n,current:t,children:r}=e;return(0,i.jsx)(nc.u,{label:(0,i.jsxs)(l.xu,{children:[(0,i.jsxs)(h.x,{children:[(0,i.jsx)(eF,{color:eN}),"Current: ",t.count," (",t.displayRatio,")"]}),(0,i.jsxs)(h.x,{children:[(0,i.jsx)(eF,{color:eM}),"Base: ",n.count," (",n.displayRatio,")"]})]}),placement:"auto",hasArrow:!0,children:r})}function nw(e){let{topKDiff:n,isDisplayTopTen:t}=e,r=nb(n.current,t),s=nb(n.base,t);return(0,i.jsxs)(l.xu,{w:"100%",px:20,py:4,children:[(0,i.jsxs)(o.k,{alignItems:"center",direction:"row",children:[(0,i.jsx)(u.L,{}),(0,i.jsxs)(h.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(eF,{color:eM})," Base"]}),(0,i.jsxs)(h.x,{as:"h3",size:"sm",p:"2",color:"gray",children:[(0,i.jsx)(eF,{color:eN})," Current"]}),(0,i.jsx)(u.L,{})]}),r.map((e,t)=>{let l=s[t];return e.isLastItemOthers&&0===e.count&&0===l.count?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(g.Fragment,{children:[(0,i.jsx)(nk,{base:l,current:e,children:(0,i.jsxs)(o.k,{alignItems:"center",width:"100%",_hover:{bg:"blackAlpha.300"},px:4,children:[(0,i.jsx)(h.x,{noOfLines:1,width:"10em",fontSize:"sm",color:e.isSpecialLabel?"gray.400":"inherit",children:e.label}),(0,i.jsxs)(o.k,{width:"70%",direction:"column",children:[(0,i.jsxs)(o.k,{height:"1em",children:[(0,i.jsx)(nC,{topkCount:e.count,topkLabel:e.label,valids:n.current.valids,color:eN}),(0,i.jsx)(h.x,{ml:5,mr:2,fontSize:"sm",width:"6em",children:e.displayCount}),(0,i.jsx)(h.x,{color:"gray.400",fontSize:"sm",width:"4em",children:e.displayRatio})]}),(0,i.jsxs)(o.k,{height:"1em",children:[(0,i.jsx)(nC,{topkCount:l.count,topkLabel:l.label,valids:n.base.valids,color:eM}),(0,i.jsx)(h.x,{ml:5,mr:2,fontSize:"sm",width:"6em",children:l.displayCount}),(0,i.jsx)(h.x,{color:"gray.400",fontSize:"sm",width:"4em",children:l.displayRatio})]})]})]})}),(0,i.jsx)(nj.i,{})]},t)})]})}function nC(e){let{topkCount:n,topkLabel:t,valids:l,animation:r=!1,color:s=ny}=e;eE.kL.register(eE.uw,eE.ZL,eE.f$);let o=function(e,n){let{...t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{display:!1,max:n,grid:{display:!1}},y:{display:!1}},plugins:{tooltip:{enabled:!1}},...t}}(n,l,{animation:r}),a=function(e){let{topkLabel:n,topkCount:t,color:i=ny}=e;return{labels:[n],datasets:[{indexAxis:"y",data:[t],backgroundColor:i,hoverBackgroundColor:i,borderWidth:0,borderColor:i,barPercentage:1,categoryPercentage:.6}]}}({topkCount:n,topkLabel:t,color:s});return(0,i.jsx)(eO.$Q,{data:a,options:o,plugins:[]})}var n_=t(93960),nS=t(66011);function nz(e){let{params:n,onParamsChanged:t,setIsReadyToExecute:r}=e,[s,o]=(0,g.useState)(!n.columns||0===n.columns.length),a=null==n?void 0:n.model,c=null==n?void 0:n.primary_key,{columns:d,primaryKey:u,isLoading:h,error:x}=eR(n.model);(0,g.useEffect)(()=>{!c&&u&&t({...n,primary_key:u})},[c,u,n,t]),(0,g.useEffect)(()=>{r(!!c&&!!a)},[c,a,r]);let m=d.map(e=>e.name),p=Array.isArray(c)?c:c?[c]:void 0;return h?(0,i.jsx)(l.xu,{children:"Loading..."}):0===m.length||x?(0,i.jsx)(l.xu,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsxs)(no.g,{gap:5,m:"8px 24px",paddingBottom:"200px",children:[(0,i.jsxs)(ek.NI,{children:[(0,i.jsx)(ew.l,{children:"Model"}),(0,i.jsx)(n_.I,{isReadOnly:!0,value:null==n?void 0:n.model})]}),(0,i.jsxs)(ek.NI,{children:[(0,i.jsx)(ew.l,{children:"Primary key"}),(0,i.jsx)(nS.Z,{placeholder:"Select primary key",isMulti:!0,closeMenuOnSelect:!1,options:(m||[]).map(e=>({label:e,value:e})),value:(p||[]).map(e=>({label:e,value:e})),onChange:e=>{t({...n,primary_key:1==e.length?e[0].value:e.map(e=>e.value)})}})]}),(0,i.jsxs)(ek.NI,{children:[(0,i.jsx)(ew.l,{children:"Columns"}),(0,i.jsx)(na.X,{marginBottom:"10px",isChecked:s,onChange:e=>{o(e.target.checked),t({...n,columns:void 0})},children:"All columns"}),!s&&(0,i.jsx)(nS.Z,{isMulti:!0,closeMenuOnSelect:!1,options:(m||[]).map(e=>({label:e,value:e})),value:(n.columns||[]).map(e=>({label:e,value:e})),onChange:e=>{t({...n,columns:(e||[]).map(e=>e.value)})}})]})]})}var nR=t(49801),nT=t(50104),nE=t(78439),nO=t(39226),nI=t(70949),nA=t(34510);function nN(e){let{params:n,column:t,containerRef:r}=e,{runAction:a}=nV(),c=(e,t)=>{a("value_diff_detail",{...n,...e},t)};return(0,i.jsxs)(o.k,{children:[(0,i.jsx)(l.xu,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:t}),(0,i.jsx)(u.L,{}),(0,i.jsx)(nR.v,{children:e=>{let{isOpen:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nT.j,{className:"row-context-menu",visibility:n?"visible":"hidden",width:n?"auto":"0px",minWidth:n?"auto":"0px",as:nd.h,icon:(0,i.jsx)(s.J,{as:e9.D_A}),variant:"unstyled",size:"sm"}),(0,i.jsx)(nE.h,{containerRef:r,children:(0,i.jsx)(nO.q,{lineHeight:"20px",children:(0,i.jsxs)(nI.k,{title:"Action",as:l.xu,fontSize:"8pt",children:[(0,i.jsx)(nA.s,{fontSize:"10pt",onClick:()=>c({},{showForm:!0}),children:"Show mismatched values..."}),(0,i.jsxs)(nA.s,{fontSize:"10pt",onClick:()=>c({columns:[t]},{showForm:!1}),children:["Show mismatched values for '",t,"'"]})]})})})]})}})]})}function nM(e){let{run:n}=e,t=n.result,r=n.params,a=e=>{let n=e[2];return null!=n&&n<1?"diff-cell-modified":""},c=(0,g.useRef)(),d=Array.isArray(r.primary_key)?r.primary_key:[r.primary_key],u=[{key:"__is_pk__",name:"",width:30,maxWidth:30,renderCell:e=>{let{row:n}=e;return(0,i.jsx)(e1.M,{height:"100%",children:d.includes(n[0])&&(0,i.jsx)(s.J,{as:e9.MhP})})}},{key:"0",name:"Column",resizable:!0,renderCell:e=>{let{row:n,column:t}=e;return(0,i.jsx)(nN,{column:n[t.key],params:r,containerRef:c})},cellClass:"cell-show-context-menu"},{key:"1",name:"Matched",resizable:!0,cellClass:a},{key:"2",name:"Matched %",resizable:!0,renderCell:e=>{let{column:n,row:t}=e,r=t[n.key];return(0,i.jsx)(l.xu,{textAlign:"end",children:void 0!=r&&null!==r?"".concat((100*r).toFixed(2)," %"):"N/A"})},cellClass:a}];return(0,i.jsxs)(o.k,{direction:"column",gap:"5px",pt:"5px",height:"100%",ref:c,children:[(0,i.jsxs)(l.xu,{px:"16px",children:["Model: ",r.model,", ",t.summary.total," total (",t.summary.total-t.summary.added-t.summary.removed," ","common, ",t.summary.added," added, ",t.summary.removed," removed)"]}),(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",borderBlock:"1px solid lightgray"},columns:u,rows:t.data.data,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},defaultColumnOptions:{resizable:!0},className:"rdg-light",enableScreenshot:!0})]})}var nD=t(18502),nL=t(63594);let nF={lineage_diff:{title:"Lineage Diff",icon:eb.Ks7},schema_diff:{title:"Schema Diff",icon:nL.C8A},query:{title:"Query",icon:eb.r2i,RunResultView:nf},query_diff:{title:"Query Diff",icon:eb.r2i,RunResultView:nm},row_count_diff:{title:"Row Count Diff",icon:nL.QUK,RunResultView:ng},profile_diff:{title:"Profile Diff",icon:eb.KA6,RunResultView:function(e){var n;let{run:t,viewOptions:l,onViewOptionsChanged:r}=e,s=t.result;t.params;let o=(0,g.useMemo)(()=>(null==l?void 0:l.pinned_columns)||[],[l]),a=((null==s?void 0:null===(n=s.current)||void 0===n?void 0:n.columns)||[]).find(e=>"column_name"===e.name.toLowerCase()),c=(null==a?void 0:a.name)||"column_name",d=(0,g.useMemo)(()=>nt(null==s?void 0:s.base,null==s?void 0:s.current,{primaryKeys:[c],pinnedColumns:o,onPinnedColumnsChange:e=>{r&&r({...l,pinned_columns:e})}}),[s,c,o,l,r]);return 0===d.columns.length?(0,i.jsx)(e1.M,{height:"100%",children:"No data"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:d.columns,rows:d.rows,defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})})}},value_diff:{title:"Value Diff",icon:eb.pRi,RunResultView:nM,RunForm:nz},value_diff_detail:{title:"Value Diff Detail",icon:eb.pRi,RunResultView:e=>{var n,t;let{run:l,onAddToChecklist:r,viewOptions:s,onViewOptionsChanged:a}=e,c=(0,g.useMemo)(()=>(null==s?void 0:s.changed_only)||!1,[s]),d=(0,g.useMemo)(()=>(null==s?void 0:s.pinned_columns)||[],[s]),u=(0,g.useMemo)(()=>{var e;if(!l.result||!(null==l?void 0:null===(e=l.params)||void 0===e?void 0:e.primary_key))return{columns:[],rows:[]};let n=l.params.primary_key,t=Array.isArray(n)?n:[n];return nl(null==l?void 0:l.result,t,{changedOnly:c,pinnedColumns:d,onPinnedColumnsChange:e=>{a&&a({...s,pinned_columns:e})}})},[l,s,c,d,a]),h=(null===(n=l.result)||void 0===n?void 0:n.limit)||0,x=h>0&&(null==l?void 0:null===(t=l.result)||void 0===t?void 0:t.more)?"Warning: Displayed results are limited to ".concat(h.toLocaleString()," records. To ensure complete data retrieval, consider applying a LIMIT or WHERE clause to constrain the result set."):null,m=[];return(x&&m.push(x),0===u.columns.length)?(0,i.jsx)(e1.M,{height:"100%",children:"No data"}):c&&0===u.rows.length?(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:l,viewOptions:s,onAddToChecklist:r,onViewOptionsChanged:a,warnings:m}),(0,i.jsx)(e1.M,{height:"100%",children:"No change"}),";"]}):(0,i.jsxs)(o.k,{direction:"column",backgroundColor:"rgb(249, 249, 249)",height:"100%",children:[(0,i.jsx)(nu,{run:l,viewOptions:s,onAddToChecklist:r,onViewOptionsChanged:a,warnings:m}),(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto"},columns:u.columns,rows:u.rows,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},defaultColumnOptions:{resizable:!0,maxWidth:800,minWidth:35},className:"rdg-light",enableScreenshot:!0})]})},RunForm:nz},top_k_diff:{title:"Top-K Diff",icon:nD.Pkc,RunResultView:function(e){let{run:n}=e,[t,l]=(0,g.useState)(!0),s=n.result,a=n.params,d=s.base,h=s.current;return(0,i.jsxs)(o.k,{direction:"column",height:"100%",children:[(0,i.jsxs)(e0,{blockSize:"auto",children:[(0,i.jsxs)(c.X,{as:"h1",size:"md",paddingTop:4,textAlign:"center",children:["Model ",a.model,".",a.column_name]}),(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(u.L,{}),(0,i.jsx)(nw,{topKDiff:s,valids:h.valids||0,isDisplayTopTen:t}),(0,i.jsx)(u.L,{})]})]}),(0,i.jsx)(u.L,{}),(d.values.length>10||h.values.length>10)&&(0,i.jsx)(o.k,{p:5,justify:"start",children:(0,i.jsx)(r.r,{onClick:()=>l(e=>!e),textColor:"blue.500",children:t?"View More Items":"View Only Top-10"})})]})},RunForm:function(e){let{params:n,onParamsChanged:t,setIsReadyToExecute:r}=e,{columns:s,isLoading:o,error:a}=eR(n.model),c=s.map(e=>e.name);return((0,g.useEffect)(()=>{r(!!n.column_name)},[n,r]),o)?(0,i.jsx)(l.xu,{children:"Loading..."}):0===c.length||a?(0,i.jsx)(l.xu,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsx)(l.xu,{m:"16px",children:(0,i.jsxs)(ek.NI,{children:[(0,i.jsx)(ew.l,{children:"Pick a column to show top-k"}),(0,i.jsx)(eC.P,{placeholder:"Select column",value:null==n?void 0:n.column_name,onChange:e=>{let i=e.target.value;t({...n,column_name:i})},children:c.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})})}},histogram_diff:{title:"Histogram Diff",icon:eb.dku,RunResultView:function(e){var n,t,r,s,a,d;let{run:h}=e,x=h.params,m=null===(n=h.result)||void 0===n?void 0:n.base,p=null===(t=h.result)||void 0===t?void 0:t.current,f=null===(r=h.result)||void 0===r?void 0:r.min,v=null===(s=h.result)||void 0===s?void 0:s.max,g=null===(a=h.result)||void 0===a?void 0:a.bin_edges;return m&&p?(0,i.jsx)(o.k,{direction:"column",height:"500px",children:(0,i.jsxs)(e0,{height:"100%",children:[(0,i.jsxs)(c.X,{as:"h1",size:"md",paddingTop:"4",textAlign:"center",children:["Model ",x.model,".",x.column_name]}),(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(u.L,{}),(0,i.jsx)(l.xu,{w:"80%",h:"300px",m:"4",children:(0,i.jsx)(eq,{data:{type:(null===(d=h.params)||void 0===d?void 0:d.column_type)||"",datasets:[p,m],min:f,max:v,samples:m.total,binEdges:g}})}),(0,i.jsx)(u.L,{})]})]})}):(0,i.jsx)("div",{children:"Loading..."})},RunForm:function(e){let{params:n,onParamsChanged:t,setIsReadyToExecute:r}=e,{columns:s,isLoading:o,error:a}=eR(n.model),c=s.filter(e=>!["CHAR","VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT","NCHAR","NVARCHAR","VARCHAR2","NVARCHAR2","CLOB","NCLOB","VARCHAR(MAX)","XML","JSON","BOOLEAN","TINYINT(1)","BIT","NUMBER(1)","BOOL"].includes(e.type.toUpperCase())&&!["DATE","DATETIME","TIMESTAMP","TIME","YEAR","DATETIME2","SMALLDATETIME","DATETIMEOFFSET","INTERVAL","TIMESTAMPTZ","TIMETZ","TIMESTAMP WITH TIME ZONE","TIMESTAMP WITH LOCAL TIME ZONE","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP_TZ"].includes(e.type.toUpperCase()));return o?(0,i.jsx)(l.xu,{children:"Loading..."}):0===c.length||a?(0,i.jsx)(l.xu,{children:"Error: Please provide the 'catalog.json' to list column candidates"}):(0,i.jsx)(l.xu,{m:"16px",children:(0,i.jsxs)(ek.NI,{children:[(0,i.jsx)(ew.l,{children:"Pick a column to show Histogram Diff"}),(0,i.jsx)(eC.P,{placeholder:"Select column",value:null==n?void 0:n.column_name,onChange:e=>{var i;let l=e.target.value;r(!!l);let s=(null===(i=c.find(e=>e.name===l))||void 0===i?void 0:i.type)||"";t({...n,column_name:l,column_type:s})},children:c.map(e=>(0,i.jsxs)("option",{value:e.name,children:[e.name," : ",e.type]},e.name))})]})})}}},nq=e=>nF[e],nP=(0,g.createContext)({runAction:()=>{}}),nW=e=>{let[n]=(0,ey.TH)();(0,g.useEffect)(()=>{e()},[e,n])};function nH(e){var n;let{children:t}=e,[l,r]=(0,g.useState)(),{isOpen:s,onOpen:o,onClose:a}=(0,ej.q)(),c=(0,X.p)(),[d,u]=(0,g.useState)(),[h,x]=(0,ey.TH)(),m=(0,g.useCallback)(async(e,n,t)=>{try{let i;let l=new Date().getTime().toString();if(null==t?void 0:t.showLast){let t=await ei(e,n,1);1===t.length&&(i=t[0])}let s=nq(e);if(void 0===s)throw Error("Unknown run type: ".concat(e));let{title:a,RunResultView:c,RunForm:d}=s;if(void 0===c)throw Error("Run type ".concat(e," does not have a result view"));if(void 0!==d&&(null==t?void 0:t.showForm))r({session:l,title:a,type:e,params:n,lastRun:i,options:t,RunForm:d}),o();else{let{run_id:t}=await G(e,n,{nowait:!0});u(t),h.startsWith("/lineage")&&x("/lineage")}}catch(e){c({title:"Failed to submit a run",description:null==e?void 0:e.message,position:"bottom-right",status:"error",duration:5e3,isClosable:!0})}},[r,o,u,c,h,x]);nW(a);let p=async(e,n)=>{try{a();let{run_id:t}=await G(e,n,{nowait:!0});u(t)}catch(e){c({title:"Failed to submit a run",description:null==e?void 0:e.message,position:"bottom-right",status:"error",duration:5e3,isClosable:!0})}};return(0,g.useEffect)(()=>{d&&!h.startsWith("/lineage")&&x("/lineage")},[d]),(0,i.jsxs)(nP.Provider,{value:{runAction:m,runId:d},children:[l&&(0,i.jsx)(eg,{isOpen:s,onClose:a,onExecute:p,title:l.title,type:l.type,params:l.params,initialRun:l.lastRun,RunForm:(null===(n=l.options)||void 0===n?void 0:n.showForm)&&l.RunForm?l.RunForm:void 0},l.session),t]})}let nV=()=>(0,g.useContext)(nP);function nJ(e){let{children:n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(C,{children:(0,i.jsx)(eo,{children:(0,i.jsx)(z,{children:(0,i.jsx)(nH,{children:n})})})})})}var nK=t(81600);async function nU(){return(await U.post("/api/checks",{type:"simple"})).data}async function nB(e,n){return(await U.post("/api/checks",{run_id:e,view_options:n})).data}async function nQ(){return(await U.get("/api/checks")).data}async function nZ(e){return(await U.get("/api/checks/".concat(e))).data}async function nX(e,n){return(await U.patch("/api/checks/".concat(e),n)).data}async function nY(e){return(await U.delete("/api/checks/".concat(e))).data}async function n$(e){return await U.post("/api/checks/reorder",e)}var nG=t(94734),n0=t(71738),n1=t(38414),n2=t(29598),n5=t(62216),n4=t(42675),n9=t(54097),n3=t(95862),n6=t(82960),n8=t(69879),n7=t(618),te=t(77153);function tn(e){let{name:n,setName:t}=e,[r,s]=(0,g.useState)(!1),[o,a]=(0,g.useState)(n),c=(0,g.useRef)(null),d=(0,g.useCallback)(()=>{t(o),s(!1)},[t,s,o]);return(0,g.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&d()};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r,c,d]),(0,i.jsxs)(n8.a,{flex:"0 1",fontSize:"12pt",fontWeight:"500",separator:(0,i.jsx)(te.X,{color:"gray.500"}),children:[(0,i.jsx)(n7.g,{children:(0,i.jsx)(l.xu,{children:"Checklist"})}),(0,i.jsx)(n7.g,{flex:"0 1",cursor:"pointer",children:r?(0,i.jsx)(n_.I,{ref:c,value:o,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"===e.key?(t(o),s(!1)):"Escape"===e.key&&(a(n),s(!1))},size:"sm",w:"auto",minW:"200px",maxW:"600px"}):(0,i.jsx)(l.xu,{onClick:()=>{a(n),s(!0)},textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:n})})]})}var tt=t(94019);t(81974);var ti=t(89725),tl=t(13965);function tr(e){let n,t,{base:l,current:r,enableScreenshot:s=!1}=e,{columns:a,rows:c}=(0,g.useMemo)(()=>(function(e){function n(e){return void 0===e.baseIndex?"column-index-added":void 0===e.currentIndex?"column-index-removed":!0===e.reordered?"column-index-reordered":"column-index-normal"}function t(e){return void 0===e.baseIndex?"column-body-added":void 0===e.currentIndex?"column-body-removed":e.baseType!==e.currentType?"column-body-type-changed":!0===e.reordered?"column-body-reordered":"column-body-normal"}return{columns:[{key:"baseIndex",name:"",resizable:!0,minWidth:35,width:35,cellClass:n},{key:"currentIndex",name:"",resizable:!0,minWidth:35,width:35,cellClass:n},{key:"name",name:"Name",resizable:!0,cellClass:function(e){return void 0===e.baseIndex?"column-body-added":void 0===e.currentIndex?"column-body-removed":!0===e.reordered?"column-body-reordered":"column-body-normal"}},{key:"baseType",name:"Base Type",resizable:!0,cellClass:t},{key:"currentType",name:"Current Type",resizable:!0,cellClass:t}],rows:Object.values(e)}})(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={};return Object.entries(e3(Object.keys(e),Object.keys(n))).forEach(e=>{let[n,i]=e;t[n]={name:n,reordered:"reordered"===i}}),Object.entries(e).map((e,n)=>{let[i,l]=e;t[i].baseIndex=n+1,t[i].baseType=l.type}),Object.entries(n).map((e,n)=>{let[i,l]=e;t[i].currentIndex=n+1,t[i].currentType=l.type}),t}(null==l?void 0:l.columns,null==r?void 0:r.columns)),[l,r]),{lineageGraph:d}=ea(),u=!(null==d?void 0:d.catalogMetadata.base),h=!(null==d?void 0:d.catalogMetadata.current);u&&h?n="catalog.json is missing on both current and base environments.":u?n="catalog.json is missing on base environment.":h&&(n="catalog.json is missing on current environment.");let x=l&&void 0===l.columns,m=r&&void 0===r.columns;return x&&m?t="Schema information is missing on both current and base environments.":x?t="Schema information is missing on base environment.":m&&(t="Schema information is missing on current environment."),(0,i.jsxs)(o.k,{direction:"column",children:[n?(0,i.jsxs)(ti.b,{status:"warning",fontSize:"12px",p:"8px",children:[(0,i.jsx)(tl.z,{}),n]}):t?(0,i.jsxs)(ti.b,{status:"warning",fontSize:"12px",p:"8px",children:[(0,i.jsx)(tl.z,{}),t]}):(0,i.jsx)(i.Fragment,{}),c.length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e5,{style:{blockSize:"auto",maxHeight:"100%",overflow:"auto",fontSize:"10pt",borderWidth:1},columns:a,rows:c,renderers:{noRowsFallback:(0,i.jsx)(e4,{})},className:"rdg-light",enableScreenshot:s})})]})}async function ts(e){return(await U.post("/api/select",e)).data}var to=t(12282);t(15080);let ta=e=>{let{style:n,children:t,gutterSize:l=5,...r}=e;return(0,i.jsx)(to.Z,{style:{display:"flex",flexDirection:"row",...n},direction:"horizontal",gutterSize:l,...r,children:t})},tc=e=>{let{style:n,children:t,gutterSize:l=5,...r}=e;return(0,i.jsx)(to.Z,{style:{display:"flex",flexDirection:"column",...n},gutterSize:l,direction:"vertical",...r,children:t})};var td=t(79898),tu=t(68630),th=t(91363);let tx=e9.Nbv,tm=e9.sFB,tp=e9.UGs;function tf(e){return"added"===e?{color:"#1dce00",icon:tx}:"removed"===e?{color:"#ff4444",icon:tm}:"modified"===e?{color:"#ffa502",icon:tp}:{color:"inherit",icon:void 0}}function tv(e){if("model"===e)return{color:"#c0eafd",icon:tu.Fn3};if("metric"===e)return{color:"#ffe6ee",icon:th._MV};if("source"===e)return{color:"#a6dda6",icon:tu.i1q};if("exposure"===e)return{color:"#ffe6ee",icon:th.n8P};if("semantic_model"===e)return{color:"#fb8caf",icon:th.R1C};if("seed"===e)return{color:"#a6dda6",icon:tu.tWi};if("snapshot"===e)return{color:"#a6dda6",icon:tu.Dmm};else return{color:"inherit",icon:void 0}}function tg(e,n){if(!e||!n)return;let t=Object.keys(e),i=Object.keys(n);if(t.length!==i.length)return!0;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return!0;for(let t of i)if(!e[t]||e[t].type!==n[t].type)return!0;return!1}let tj=e=>{let n,t,{node:r,selected:a,onSelect:c,schemaChanged:d}=e,{icon:u}=tv(r.resourceType),{base:h,current:x}=r.data;if(d){var m;n=null===(m=nq("schema_diff"))||void 0===m?void 0:m.icon,t=tf("modified").color}else!h&&x?(n=tf("added").icon,t=tf("added").color):h&&!x&&(n=tf("removed").icon,t=tf("removed").color);return(0,i.jsxs)(o.k,{width:"100%",fontSize:"10pt",p:"5px 8px",cursor:"pointer",_hover:{bg:"gray.200"},bg:a?"gray.100":"inherit",onClick:()=>c(r.id),alignItems:"center",gap:"5px",children:[(0,i.jsx)(s.J,{as:u}),(0,i.jsx)(l.xu,{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:r.name}),n&&t&&(0,i.jsx)(s.J,{as:n,color:t})]})};function ty(e){let{check:n}=e,{lineageGraph:t}=ea(),l=n.params,r=[...W.check(n.check_id),"select"],{isLoading:s,error:o,refetch:a,data:c}=(0,y.a)({queryKey:r,queryFn:async()=>ts({select:null==l?void 0:l.select,exclude:null==l?void 0:l.exclude}),refetchOnMount:!0,enabled:!(null==l?void 0:l.node_id)}),[d,u]=(0,g.useMemo)(()=>{let e=[],n=[],i=[],r=[];if(null==l?void 0:l.node_id){let n=null==t?void 0:t.nodes[l.node_id];n&&e.push(n)}else for(let n of(null==c?void 0:c.nodes)||[]){let i=null==t?void 0:t.nodes[n];i&&e.push(i)}let s=e.filter(e=>"model"===e.resourceType||"seed"===e.resourceType||"source"===e.resourceType||"snapshot"===e.resourceType);for(let e of s){var o,a;tg(null===(o=e.data.base)||void 0===o?void 0:o.columns,null===(a=e.data.current)||void 0===a?void 0:a.columns)?n.push(e.id):!e.data.base&&e.data.current?i.push(e.id):e.data.base&&!e.data.current&&r.push(e.id)}function d(e){return n.includes(e.id)?3:i.includes(e.id)?2:r.includes(e.id)?1:0}return s.sort((e,n)=>{let t=d(e),i=d(n);return t!==i?i-t:e.name.localeCompare(n.name)}),[s,n]},[null==l?void 0:l.node_id,null==c?void 0:c.nodes,t]),[h,x]=(0,g.useState)(0);if(s)return(0,i.jsx)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:"Loading..."});if(o)return(0,i.jsxs)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:["Error: ",null==o?void 0:o.message]});if(0==d.length)return(0,i.jsx)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:"No nodes matched"});if(h<d.length){let e=d[h];return(0,i.jsxs)(ta,{sizes:[80,20],minSize:30,style:{height:"100%"},children:[(0,i.jsx)(tr,{base:e.data.base,current:e.data.current,enableScreenshot:!0}),(0,i.jsx)(td.aV,{overflow:"auto",children:d.map((e,n)=>(0,i.jsx)(tj,{node:e,schemaChanged:u.includes(e.id),selected:n===h,onSelect:()=>{x(n)}},n))})]})}return(0,i.jsx)(i.Fragment,{})}var tb=t(51643);function tk(e){let{value:n,onChange:t}=e,[l,s]=(0,g.useState)(!1),[a,c]=(0,g.useState)(),d=(0,g.useRef)(null);return((0,g.useEffect)(()=>{if(l&&d.current){let e=d.current;e.focus(),e.setSelectionRange(e.value.length,e.value.length)}},[l]),l)?(0,i.jsxs)(o.k,{direction:"column",align:"flex-end",height:"100%",children:[(0,i.jsx)(tb.g,{value:a,onChange:e=>{c(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&s(!1)},ref:d,flex:1}),(0,i.jsxs)(o.k,{gap:"12px",alignItems:"flex-end",children:[(0,i.jsx)(r.r,{onClick:()=>{setTimeout(()=>{s(!1)},100)},colorScheme:"blue",children:"cancel"}),(0,i.jsx)(ev.z,{mt:"8px",size:"sm",colorScheme:"blue",onClick:()=>{t&&(t(a),s(!1))},children:"Update"})]})]}):(0,i.jsx)(h.x,{overflow:"auto",fontSize:"11pt",onClick:()=>{c(n||""),s(!0)},whiteSpace:"pre",color:n?"inherit":"lightgray",children:n||"Add description here"})}var tw=t(40902);function tC(){let e=(0,nK._)(["\n    **SQL**\n    ```sql\n    ","\n    ```\n    "],["\n    **SQL**\n    \\`\\`\\`sql\n    ","\n    \\`\\`\\`\n    "]);return tC=function(){return e},e}function t_(e){return"".concat(e.is_checked?"✅ ":"").concat(e.name)}function tS(e){return e.description?e.description:"_(no description)_"}var tz=t(31265),tR=e=>{let{value:n,onChange:t,onRun:l,onRunDiff:r,options:s={},...o}=e;return(0,i.jsx)(tz.ZP,{language:"sql",theme:"vs",value:n,onChange:e=>{void 0!==e&&t&&t(e)},onMount:(e,n)=>{l&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.Enter,l),r&&e.addCommand(n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.Enter,r)},options:{tabSize:2,fontSize:16,lineNumbers:"on",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent",...s}})},tT=t(23567);let tE=e=>{var n,t,r,s;let{isPending:a,isAborting:c,isCheckDetail:d,progress:u,error:h,run:x,onCancel:m,viewOptions:p,onViewOptionsChanged:f,RunResultView:v,children:g,onExecuteRun:j}=e,y=(null==h?void 0:null===(t=h.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.detail)||(null==x?void 0:x.error);if(y)return(0,i.jsxs)(ti.b,{status:"error",children:[(0,i.jsx)(tl.z,{}),"Error: ",y]});if(a){let e=(null==u?void 0:u.message)?null==u?void 0:u.message:(null==x?void 0:null===(r=x.progress)||void 0===r?void 0:r.message)?null==x?void 0:null===(s=x.progress)||void 0===s?void 0:s.message:"Loading...";return(0,i.jsx)(e1.M,{p:"16px",height:"100%",bg:"rgb(249,249,249)",children:(0,i.jsxs)(no.g,{children:[(0,i.jsxs)(o.k,{alignItems:"center",children:[(null==u?void 0:u.percentage)===void 0||(null==u?void 0:u.percentage)===null?(0,i.jsx)(tT.D,{isIndeterminate:!0,size:"20px",mr:"8px"}):(0,i.jsx)(tT.D,{size:"20px",value:100*u.percentage,mr:"8px"}),c?(0,i.jsx)(i.Fragment,{children:"Aborting..."}):(0,i.jsx)(i.Fragment,{children:e})]}),!c&&(0,i.jsx)(ev.z,{onClick:m,colorScheme:"blue",size:"sm",children:"Cancel"})]})})}if(!x)return d?(0,i.jsx)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:(0,i.jsx)(ev.z,{onClick:j,colorScheme:"blue",size:"sm",children:"Run Query"})}):(0,i.jsx)(e1.M,{bg:"rgb(249,249,249)",height:"100%",children:"No Data"});if(g&&v)throw Error("RunView requires either a children or a RunResultView prop, but not both.");if(!g&&!v)throw Error("RunView requires at least one of children or RunResultView prop.");return(0,i.jsxs)(l.xu,{h:"100%",style:{contain:"size layout"},overflow:"auto",children:[v&&(0,i.jsx)(v,{run:x,viewOptions:p,onViewOptionsChanged:f}),g&&g({run:x,viewOptions:p,onViewOptionsChanged:f})]})};var tO=t(65674),tI=t(29012),tA=t(25783),tN=t(43361),tM=t(49110),tD=t(55415),tL=t(24432);t(90548),t(91074);var tF=t(66633),tq=t(83143),tP=t(29937);function tW(e){let{node:n}=e,{icon:t}=tv(n.resourceType);return(0,i.jsx)(nc.u,{hasArrow:!0,label:"Type of resource",children:(0,i.jsxs)(nG.Vp,{children:[(0,i.jsx)(nG.AD,{as:t}),(0,i.jsx)(nG.Sn,{children:n.resourceType})]})})}function tH(e){let{rowCount:n}=e,t=n.base,l=n.curr,r=null===n.base?"N/A":"".concat(n.base," rows"),o=null===n.curr?"N/A":"".concat(n.curr," rows");return null===t&&null===l?(0,i.jsx)(i.Fragment,{children:" Failed to load"}):null===t||null===l?(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(h.x,{children:r}),(0,i.jsx)(s.J,{as:tq.Rgz}),(0,i.jsx)(h.x,{children:o})]}):t===l?(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(h.x,{children:o}),(0,i.jsx)(s.J,{as:tP.lxc,color:"gray.500"}),(0,i.jsx)(h.x,{color:"gray.500",children:"No Change"})]}):t<l?(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(h.x,{children:o}),(0,i.jsx)(s.J,{as:tP.Tvk,color:"green.500"}),(0,i.jsx)(h.x,{color:"green.500",children:nv(t,l)})]}):(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(h.x,{children:o}),(0,i.jsx)(s.J,{as:tP.ebp,color:"red.500"}),(0,i.jsx)(h.x,{color:"red.500",children:nv(t,l)})]})}function tV(e){var n,t,l;let r,{rowCount:s,node:o,onRefresh:a,isFetching:c}=e,{runsAggregated:d,refetchRunsAggregated:u}=ea(),h=null==d?void 0:null===(t=d[o.id])||void 0===t?void 0:null===(n=t.row_count_diff)||void 0===n?void 0:n.result,x=null===(l=nq("row_count_diff"))||void 0===l?void 0:l.icon,m=s||h;if(m){let e=(null==m?void 0:m.base)===null?"N/A":null==m?void 0:m.base,n=(null==m?void 0:m.curr)===null?"N/A":null==m?void 0:m.curr;r="".concat(e," -> ").concat(n," rows")}return(0,i.jsx)(nc.u,{label:r,children:(0,i.jsxs)(nG.Vp,{children:[(0,i.jsx)(nG.AD,{as:x}),(0,i.jsx)(nG.Sn,{children:m||c?(0,i.jsx)(tF.N,{isLoaded:!c,noOfLines:1,skeletonHeight:2,minWidth:"30px",children:m?(0,i.jsx)(tH,{rowCount:m}):"row count"}):(0,i.jsx)(i.Fragment,{children:"row count"})}),a&&(0,i.jsx)(nG.bq,{as:nd.h,isLoading:c,"aria-label":"Query Row Count",icon:(0,i.jsx)(n4.n,{}),size:"xs",onClick:a})]})})}let tJ=e=>{let{node:n,action:t}=e,{status:r,skipReason:s,run:a}=t;if("pending"===r)return(0,i.jsx)(tT.D,{size:"20px",value:0});if("skipped"===r)return(0,i.jsxs)(o.k,{fontSize:"10pt",color:"gray",children:[(0,i.jsx)(l.xu,{children:"Skipped"}),s&&(0,i.jsx)(nc.u,{label:s,children:(0,i.jsx)(eV.s,{})})]});if(!a)return(0,i.jsx)(tT.D,{isIndeterminate:!0,size:"20px"});let{error:c,result:d,run_id:u,progress:h}=a;if("running"===r)return(null==h?void 0:h.percentage)===void 0?(0,i.jsx)(tT.D,{isIndeterminate:!0,size:"20px"}):(0,i.jsx)(tT.D,{size:"20px",value:(null==h?void 0:h.percentage)*100});if(c)return(0,i.jsxs)(o.k,{fontSize:"10pt",color:"gray",children:[(0,i.jsx)(l.xu,{children:"Error"}),s&&(0,i.jsx)(nc.u,{label:c,children:(0,i.jsx)(nr.a,{})})]});if("value_diff"===a.type){let e=0;for(let n of d.data.data)n[2]<1&&e++;return(0,i.jsx)(nG.Vp,{children:(0,i.jsx)(nG.Sn,{children:(0,i.jsx)(o.k,{fontSize:"10pt",color:e>0?"red":"green",alignItems:"center",gap:"3px",children:e>0?"".concat(e," columns mismatched"):"All columns match"})})})}if("row_count_diff"===a.type){let e=a.result;return(0,i.jsx)(tV,{rowCount:e[n.name],node:n})}return(0,i.jsx)(i.Fragment,{children:u})},tK=e=>{var n,t,r,a;let c,d,{id:u}=e,{lineageGraph:h,runsAggregated:x}=ea(),m=null==x?void 0:x[u],p=null==h?void 0:h.nodes[u];if(!m&&!p)return(0,i.jsx)(i.Fragment,{});if((null==p?void 0:p.data.base)&&(null==p?void 0:p.data.current)&&(c=tg(null===(r=p.data.base)||void 0===r?void 0:r.columns,null===(a=p.data.current)||void 0===a?void 0:a.columns)),m&&m.row_count_diff){let e=m.row_count_diff;d=e.result.curr!==e.result.base}return(0,i.jsxs)(o.k,{gap:"5px",children:[void 0!==c&&(0,i.jsx)(nc.u,{label:"Schema (".concat(c?"changed":"no change",")"),openDelay:500,children:(0,i.jsx)(l.xu,{height:"16px",children:(0,i.jsx)(s.J,{as:null===(n=nq("schema_diff"))||void 0===n?void 0:n.icon,color:c?tf("modified").color:"lightgray"})})}),void 0!==d&&(0,i.jsx)(nc.u,{label:"Row count (".concat(d?"changed":"no change",")"),openDelay:500,children:(0,i.jsx)(l.xu,{height:"16px",children:(0,i.jsx)(s.J,{as:null===(t=nq("row_count_diff"))||void 0===t?void 0:t.icon,color:d?tf("modified").color:"lightgray"})})})]})};var tU=t(13358),tB=t(15196),tQ=t(28023),tZ=t(84963);function tX(e){let{base:n,current:t}=e;return(0,i.jsx)(tz.SV,{height:"100%",language:"sql",theme:"vs",original:null==n?void 0:n.raw_code,modified:null==t?void 0:t.raw_code,options:{readOnly:!0,fontSize:14,lineNumbers:"on",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same"}})}async function tY(e){return(await U.post("/api/checks",{type:"schema_diff",params:e})).data}function t$(e){var n,t,r,a,d,h,f;let{node:v,onCloseNode:j}=e,[,y]=(0,ey.TH)(),{setSqlQuery:b,setPrimaryKeys:k}=_(),w="model"===v.resourceType||"seed"===v.resourceType||"source"===v.resourceType||"snapshot"===v.resourceType,{isOpen:C,onOpen:S,onClose:z}=(0,ej.q)(),{runAction:R}=nV(),{envInfo:T}=ea(),{primaryKey:E}=eR(v.name),O=()=>{R("row_count_diff",{node_names:[v.name]},{showForm:!1,showLast:!1})},I=(0,g.useCallback)(async()=>{let e=v.id,n=await tY({node_id:e});y("/checks/".concat(n.check_id))},[v,y]),A="added"===v.changeStatus||"removed"===v.changeStatus;return(0,i.jsxs)(tB.r,{height:"100%",templateRows:"auto auto 1fr",children:[(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(l.xu,{flex:"0 1 20%",p:"16px",children:(0,i.jsx)(c.X,{size:"sm",children:v.name})}),(0,i.jsx)(u.L,{}),("model"===v.resourceType||"seed"===v.resourceType||"snapshot"===v.resourceType)&&(0,i.jsxs)(nR.v,{children:[(0,i.jsx)(nT.j,{as:ev.z,size:"sm",colorScheme:"blue",children:"Explore Change"}),(0,i.jsxs)(nO.q,{children:[(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(n=nq("query_diff"))||void 0===n?void 0:n.icon}),fontSize:"14px",onClick:()=>{(null==T?void 0:T.adapterType)==="dbt"?b('select * from {{ ref("'.concat(v.name,'") }}')):(null==T?void 0:T.adapterType)==="sqlmesh"&&b("select * from ".concat(v.name)),k(void 0!==E?[E]:void 0),y("/query")},children:"Query"}),(0,i.jsx)(tQ.R,{}),(0,i.jsxs)(nI.k,{title:"Diff",m:"0",p:"4px 12px",children:[("model"===v.resourceType||"snapshot"===v.resourceType)&&(0,i.jsx)(nA.s,{onClick:S,icon:(0,i.jsx)(tu.tvD,{}),fontSize:"14px",children:"Code Diff"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(t=nq("row_count_diff"))||void 0===t?void 0:t.icon}),fontSize:"14px",onClick:()=>O(),children:"Row Count Diff"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(r=nq("profile_diff"))||void 0===r?void 0:r.icon}),fontSize:"14px",isDisabled:A,onClick:()=>{R("profile_diff",{model:v.name},{showForm:!1,showLast:!1})},children:"Profile Diff"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(a=nq("value_diff"))||void 0===a?void 0:a.icon}),fontSize:"14px",isDisabled:A,onClick:()=>{R("value_diff",{model:v.name},{showForm:!0,showLast:!1})},children:"Value Diff"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(d=nq("top_k_diff"))||void 0===d?void 0:d.icon}),fontSize:"14px",isDisabled:A,onClick:()=>{R("top_k_diff",{model:v.name,column_name:"",k:50},{showForm:!0})},children:"Top-K Diff"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(h=nq("histogram_diff"))||void 0===h?void 0:h.icon}),fontSize:"14px",isDisabled:A,onClick:()=>{R("histogram_diff",{model:v.name,column_name:"",column_type:""},{showForm:!0})},children:"Histogram Diff"})]}),(0,i.jsx)(tQ.R,{}),(0,i.jsx)(nI.k,{title:"Add to Checklist",m:"0",p:"4px 12px",children:(0,i.jsx)(nA.s,{icon:(0,i.jsx)(s.J,{as:null===(f=nq("schema_diff"))||void 0===f?void 0:f.icon}),fontSize:"14px",onClick:I,children:"Schema Diff"})})]})]}),(0,i.jsx)(l.xu,{flex:"0 1 1%",children:(0,i.jsx)(tZ.P,{onClick:j})})]}),(0,i.jsx)(l.xu,{color:"gray",paddingLeft:"16px",children:(0,i.jsxs)(eT.U,{spacing:"8px",children:[(0,i.jsx)(tW,{node:v}),("model"===v.resourceType||"snapshot"===v.resourceType||"seed"===v.resourceType)&&(0,i.jsx)(tV,{node:v,onRefresh:O})]})}),w&&(0,i.jsxs)(x.m,{overflow:"auto",as:o.k,children:[(0,i.jsx)(m.t,{children:(0,i.jsx)(p.O,{children:"Columns"})}),(0,i.jsx)(n0.n,{overflow:"auto",height:"calc(100% - 42px)",children:(0,i.jsx)(n1.x,{p:0,overflowY:"auto",height:"100%",children:(0,i.jsx)(tr,{base:v.data.base,current:v.data.current})})})]}),(0,i.jsxs)(ed.u_,{isOpen:C,onClose:z,size:"6xl",children:[(0,i.jsx)(eu.Z,{}),(0,i.jsxs)(eh.h,{overflowY:"auto",height:"75%",children:[(0,i.jsx)(ex.x,{children:"Model Raw Code Diff"}),(0,i.jsx)(em.o,{}),(0,i.jsx)(ep.f,{children:(0,i.jsx)(tX,{base:v.data.base,current:v.data.current})})]})]})]})}var tG=t(88989),t0=t(12867),t1=t(27547);async function t2(e){return(await U.post("/api/checks",{type:"lineage_diff",params:{},view_options:e})).data}function t5(e){var n;let{nodes:t,onFinish:l}=e,[,r]=(0,ey.TH)();return(0,i.jsxs)(ev.z,{size:"xs",variant:"outline",isDisabled:0===t.length,onClick:async()=>{let e;1===t.length?e=await tY({node_id:t[0].id}):await Promise.all(t.map(async e=>{await tY({node_id:e.id})})),l(),e?r("/checks/".concat(e.check_id)):r("/checks")},children:[(0,i.jsx)(s.J,{as:null===(n=nq("schema_diff"))||void 0===n?void 0:n.icon}),"Add schema check"]})}function t4(e){var n;let{viewMode:t,nodes:l,onFinish:r,isDisabled:o,withIcon:a}=e,[,c]=(0,ey.TH)();return(0,i.jsxs)(ev.z,{size:"xs",variant:"outline",backgroundColor:"white",isDisabled:0===l.length||o,onClick:async()=>{let e=l.map(e=>e.id),n=await t2({view_mode:t,node_ids:e});r(),n?c("/checks/".concat(n.check_id)):c("/checks")},children:[a&&(0,i.jsx)(s.J,{as:null===(n=nq("lineage_diff"))||void 0===n?void 0:n.icon}),"Add lineage diff check"]})}function t9(e){var n,t,r,o,a,c;let{viewMode:d,nodes:u,onClose:h,onActionStarted:x,onActionNodeUpdated:m,onActionCompleted:p}=e,[f,v]=(0,g.useState)({mode:"per_node",status:"pending",completed:0,total:0}),j=(0,b.NL)(),[,y]=(0,ey.TH)(),k=async(e,n,t)=>{let i="multi_nodes";f.mode=i,x(),f.status="running";let l=[];for(let e of u){let t=n(e);t?(e.action={mode:i,status:"skipped",skipReason:t},m(e)):(e.action={mode:i,status:"pending"},l.push(e))}let r=t(l);try{let{run_id:n}=await G(e,r,{nowait:!0});for(f.currentRun={run_id:n},f.total=1;;){let e=await ee(n,2);f.currentRun=e;let t=e.error?"failure":e.result?"success":"running";for(let n of l)n.action={mode:i,status:t,run:e},m(n);if(e.error||e.result)break}}catch(e){}if(f.completed=1,"canceling"===f.status){f.status="canceled",p();return}f.status="completed",p()},w=async(e,n)=>{let t="per_node";for(let e of(f.mode=t,x(),f.status="running",u))e.action={mode:t,status:"pending"},m(e);for(let i of(f.completed=0,f.total=u.length,u)){let{params:l,skipReason:r}=n(i);if(r)i.action={mode:t,status:"skipped",skipReason:r},m(i);else try{let{run_id:n}=await G(e,l,{nowait:!0});for(f.currentRun={run_id:n},i.action={mode:t,status:"running"},m(i);;){let e=await ee(n,2);f.currentRun=e;let l=e.error?"failure":e.result?"success":"running";if(i.action={mode:t,status:l,run:e},m(i),e.error||e.result)break}}catch(e){}finally{f.currentRun=void 0}if(f.completed++,"canceling"===f.status){f.status="canceled",p();return}}f.status="completed",p()},C=async()=>{let e=[];for(let n of u)"model"!==n.resourceType?(n.action={mode:"multi_nodes",status:"skipped",skipReason:"Not a model"},m(n)):e.push(n.name);k("row_count_diff",e=>{if("model"!==e.resourceType)return"Not a model"},e=>({node_names:e.map(e=>e.name)}))},_=async()=>{w("value_diff",e=>{var n,t;let i=null===(t=e.data)||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:n.primary_key;return i?{params:{model:e.name,primary_key:i}}:{skipReason:"No primary key found. The first unique column is used as primary key."}})},S=async()=>{var e;f.status="canceling",(null===(e=f.currentRun)||void 0===e?void 0:e.run_id)&&en(f.currentRun.run_id)},z=(0,g.useCallback)(async()=>{var e;let n=null===(e=f.currentRun)||void 0===e?void 0:e.run_id;if(!n)return;let t=await nB(n);j.invalidateQueries({queryKey:W.checks()}),y("/checks/".concat(t.check_id))},[null===(n=f.currentRun)||void 0===n?void 0:n.run_id,y,j]);return(0,t0.z)(()=>{"running"===f.status&&S()}),(0,i.jsxs)(l.xu,{bg:"white",rounded:"md",shadow:"dark-lg",children:["pending"===f.status&&(0,i.jsxs)(eT.U,{p:"5px 15px",mt:"4",divider:(0,i.jsx)(tA.c,{borderColor:"gray.200"}),spacing:4,children:[(0,i.jsxs)(t1.h,{size:"xs",isAttached:!0,variant:"outline",rounded:"xs",onClick:h,children:[(0,i.jsxs)(ev.z,{children:[u.length," selected"]}),(0,i.jsx)(nd.h,{"aria-label":"Exit select Mode",icon:(0,i.jsx)(tG.D,{})})]}),(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(t5,{nodes:u,onFinish:h}),(0,i.jsx)(t4,{viewMode:d,nodes:u,onFinish:h,withIcon:!0})]}),(0,i.jsxs)(eT.U,{children:[(0,i.jsxs)(ev.z,{size:"xs",variant:"outline",isDisabled:0===u.length,onClick:C,children:[(0,i.jsx)(s.J,{as:null===(t=nq("row_count_diff"))||void 0===t?void 0:t.icon}),"Row count diff"]}),(0,i.jsxs)(ev.z,{size:"xs",variant:"outline",isDisabled:0===u.length,onClick:_,children:[(0,i.jsx)(s.J,{as:null===(r=nq("value_diff"))||void 0===r?void 0:r.icon}),"Value diff"]})]})]}),"pending"!==f.status&&(0,i.jsxs)(eT.U,{p:"5px 15px",mt:"4",divider:(0,i.jsx)(tA.c,{borderColor:"gray.200"}),spacing:4,children:[(0,i.jsxs)(l.xu,{fontSize:"10pt",children:["Progress: ","per_node"===f.mode?"".concat(f.completed," / ").concat(f.total):(null===(c=f.currentRun)||void 0===c?void 0:null===(a=c.progress)||void 0===a?void 0:a.percentage)?"".concat(100*f.currentRun.progress.percentage,"%"):"completed"===f.status?"100%":"0%"," ","canceled"===f.status?" (canceled)":""]}),"running"===f.status||"canceling"===f.status?(0,i.jsx)(ev.z,{size:"xs",variant:"outline",onClick:S,isLoading:"canceling"===f.status,loadingText:"Canceling",children:"Cancel"}):(0,i.jsxs)(eT.U,{children:["multi_nodes"===f.mode&&(null===(o=f.currentRun)||void 0===o?void 0:o.result)&&(0,i.jsx)(ev.z,{display:"none",size:"xs",variant:"outline",onClick:z,children:"Add to checklist"}),(0,i.jsx)(ev.z,{size:"xs",variant:"outline",onClick:h,children:"Close"})]})]})]})}let t3=e=>{let{isDisabled:n,viewOptions:t,onViewOptionsChanged:l}=e,r=t.view_mode||"changed_models",o=e=>{l({...t,view_mode:e})};return(0,i.jsxs)(nR.v,{children:[(0,i.jsx)(nT.j,{as:ev.z,minWidth:"100px",leftIcon:(0,i.jsx)(s.J,{as:tv("model").icon}),size:"xs",variant:"outline",isDisabled:n,children:"changed_models"===r?"Changed Models":"All"}),(0,i.jsxs)(nO.q,{title:"packages",children:[(0,i.jsx)(nA.s,{as:na.X,size:"sm",isChecked:"changed_models"===r,onChange:()=>o("changed_models"),children:"Changed Models"}),(0,i.jsx)(nA.s,{as:na.X,size:"sm",isChecked:"all"===r,onChange:()=>o("all"),children:"All"})]})]})},t6=e=>{var n,t;let{viewOptions:l,onViewOptionsChanged:r,isDisabled:o}=e,{lineageGraph:a}=ea(),c=new Set;for(let e of Object.values((null==a?void 0:a.nodes)||{}))e.packageName&&c.add(e.packageName);let d=null==a?void 0:null===(t=a.manifestMetadata)||void 0===t?void 0:null===(n=t.current)||void 0===n?void 0:n.project_name,u=l.packages?new Set(l.packages):d?new Set([d]):c,h=u.size===c.size,x=0===u.size,m=1===u.size?Array.from(u)[0]:h?"All Packages":x?"No Package":"".concat(u.size," Packages"),p=e=>{let n=new Set(u);n.has(e)?n.delete(e):n.add(e),r({...l,packages:Array.from(n)})};return(0,i.jsxs)(nR.v,{closeOnSelect:!1,children:[(0,i.jsx)(nT.j,{as:ev.z,minWidth:"100px",leftIcon:(0,i.jsx)(s.J,{as:tq.zFh}),size:"xs",variant:"outline",isDisabled:o,children:m}),(0,i.jsx)(nO.q,{title:"packages",children:(0,i.jsxs)(nI.k,{title:"Select Packages",children:[(0,i.jsx)(nA.s,{as:na.X,size:"sm",isIndeterminate:!h&&!x,isChecked:h,onChange:()=>{h?r({...l,packages:[]}):r({...l,packages:Array.from(c)})},children:"Select All"}),(0,i.jsx)(tQ.R,{}),Array.from(c).map(e=>(0,i.jsx)(nA.s,{as:na.X,size:"sm",isChecked:u.has(e),onChange:()=>{p(e)},children:e},e))]})})]})},t8=e=>{let[n,t]=(0,g.useState)(e.value),l=(0,g.useRef)(null);return(0,g.useEffect)(()=>{l.current&&(l.current.value=e.value)},[e.value]),(0,i.jsx)(n_.I,{ref:l,height:"24px",fontSize:"10pt",placeholder:"<selection>",isDisabled:e.isDisabled,value:n,onChange:e=>{t(e.target.value)},onKeyUp:i=>{"Enter"===i.key?e.onChange(n):"Escape"===i.key&&(i.preventDefault(),t(e.value),l.current&&l.current.blur())},onBlur:()=>t(e.value)})},t7=e=>(0,i.jsx)(t8,{isDisabled:e.isDisabled,value:e.viewOptions.select||"",onChange:n=>{e.onViewOptionsChanged({...e.viewOptions,select:n||void 0})}}),ie=e=>(0,i.jsx)(t8,{isDisabled:e.isDisabled,value:e.viewOptions.exclude||"",onChange:n=>{e.onViewOptionsChanged({...e.viewOptions,exclude:n||void 0})}}),it=e=>(0,i.jsxs)(l.xu,{style:e.style,maxWidth:"300px",children:[(0,i.jsx)(l.xu,{fontSize:"8pt",children:e.label}),e.children]}),ii=e=>{let[,n]=(0,ey.TH)(),{runAction:t}=nV(),l=(0,g.useCallback)(e=>{e.check_id&&n("/checks/".concat(e.check_id))},[n]);return(0,i.jsxs)(nR.v,{children:[(0,i.jsx)(nT.j,{as:ev.z,size:"xs",isDisabled:e.isDisabled,children:"..."}),(0,i.jsxs)(nO.q,{children:[(0,i.jsx)(nI.k,{title:"Diff",m:"0",p:"4px 12px",children:(0,i.jsx)(nA.s,{as:h.x,size:"sm",fontSize:"10pt",onClick:()=>{t("row_count_diff",{select:e.viewOptions.select,exclude:e.viewOptions.exclude})},children:"Row Count Diff by Selector"})}),(0,i.jsx)(tQ.R,{}),(0,i.jsxs)(nI.k,{title:"Add to Checklist",m:"0",px:"12px",children:[(0,i.jsx)(nA.s,{as:h.x,size:"sm",fontSize:"10pt",onClick:async()=>{let n=await t2(e.viewOptions);n&&l(n)},children:"Lineage Diff"}),(0,i.jsx)(nA.s,{as:h.x,size:"sm",fontSize:"10pt",onClick:async()=>{let n=await tY({select:e.viewOptions.select,exclude:e.viewOptions.exclude});n&&l(n)},children:"Schema Diff by Selector"})]})]})]})},il=e=>(0,i.jsx)(eT.U,{width:"100%",padding:"4pt 8pt",children:(0,i.jsxs)(eT.U,{flex:"1",children:[(0,i.jsx)(it,{label:"Mode",style:{flexShrink:"1"},children:(0,i.jsx)(t3,{...e})}),(0,i.jsx)(it,{label:"Package",style:{flexShrink:"1"},children:(0,i.jsx)(t6,{...e})}),(0,i.jsx)(it,{label:"Select",style:{flex:"100 1 auto"},children:(0,i.jsx)(t7,{...e})}),(0,i.jsx)(it,{label:"Exclude",style:{flex:"100 1 auto"},children:(0,i.jsx)(ie,{...e})}),(0,i.jsx)(u.L,{}),(0,i.jsx)(it,{label:"Actions",action:!0,children:(0,i.jsxs)(t1.h,{isAttached:!0,variant:"outline",children:[(0,i.jsx)(ev.z,{size:"xs",fontSize:"9pt",onClick:e.onSelectNodesClicked,isDisabled:e.isDisabled,children:"Select nodes"}),(0,i.jsx)(ii,{...e})]})})]})});function ir(e){var n,t,r,s,a,d,h,f,v;let{node:j,onCloseNode:y}=e,k=null===(n=j.action)||void 0===n?void 0:n.run,[,w]=(0,ey.TH)(),C=(0,b.NL)(),[_,S]=(0,g.useState)(),z=(0,g.useCallback)(async()=>{if(!(null==k?void 0:k.run_id))return;let e=await nB(k.run_id,_);C.invalidateQueries({queryKey:W.checks()}),w("/checks/".concat(e.check_id))},[null==k?void 0:k.run_id,w,C,_]),R=(null===(r=j.action)||void 0===r?void 0:null===(t=r.run)||void 0===t?void 0:t.type)==="value_diff"?nM:(null===(a=j.action)||void 0===a?void 0:null===(s=a.run)||void 0===s?void 0:s.type)==="row_count_diff"?ng:null;return(0,i.jsxs)(tB.r,{height:"100%",templateRows:"auto auto 1fr",children:[(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(l.xu,{flex:"0 1 20%",p:"16px",children:(0,i.jsx)(c.X,{size:"sm",children:j.name})}),(0,i.jsx)(u.L,{}),(0,i.jsx)(l.xu,{flex:"0 1 1%",p:"16px",children:(0,i.jsx)(tZ.P,{onClick:y})})]}),(0,i.jsx)(l.xu,{color:"gray",paddingLeft:"16px",children:(0,i.jsxs)(eT.U,{spacing:"8px",children:[(0,i.jsx)(tW,{node:j}),(null==k?void 0:k.type)==="row_count_diff"&&(null===(d=k.result)||void 0===d?void 0:d[j.name])&&(0,i.jsx)(tV,{rowCount:k.result[j.name],node:j})]})}),(0,i.jsxs)(x.m,{overflow:"auto",as:o.k,children:[(0,i.jsx)(m.t,{children:(0,i.jsx)(p.O,{children:"Run"})}),(0,i.jsx)(n0.n,{overflow:"auto",height:"calc(100% - 42px)",children:(0,i.jsx)(n1.x,{p:0,overflowY:"auto",height:"100%",children:R?(0,i.jsx)(tE,{run:null===(h=j.action)||void 0===h?void 0:h.run,viewOptions:_,onViewOptionsChanged:S,RunResultView:R}):(0,i.jsx)(l.xu,{p:"20px 10px",children:"No run result"})})})]}),(0,i.jsxs)(eT.U,{p:"16px",children:[(0,i.jsx)(u.L,{}),(0,i.jsx)(ev.z,{size:"sm",colorScheme:"blue",isDisabled:!(null===(v=j.action)||void 0===v?void 0:null===(f=v.run)||void 0===f?void 0:f.result),onClick:z,children:"Add to checklist"})]})]})}function is(){return(0,i.jsx)(l.xu,{bg:"white",padding:"12px",borderWidth:"1px",borderColor:"gray.200",fontSize:"sm",children:Object.entries({added:["Added","Added resource"],removed:["Removed","Removed resource"],modified:["Modified","Modified resource"]}).map(e=>{let[n,[t,l]]=e,{icon:r,color:a}=tf(n);return(0,i.jsx)(nc.u,{label:l,children:(0,i.jsxs)(o.k,{alignItems:"center",gap:"6px",marginBottom:"2px",children:[(0,i.jsx)(s.J,{color:a,as:r})," ",t]})},n)})})}var io=t(11978);let ia={customNode:function(e){var n,t;let r,{data:a}=e,{isHighlighted:c,isSelected:d,resourceType:h,changeStatus:x}=a,m=(0,R.oR)(e=>e.transform[2]>.3),{icon:p}=tv(h),f="gray.400",v="solid";x&&(r=tf(x).icon,f=tf(x).color);let g=f,j=a.isSelected?"rgba(3, 102, 214, 0.5) 5px 5px 10px 3px":"unset",y=null==a?void 0:a.name;return(0,i.jsx)(nc.u,{label:"model"===h?y:"".concat(y," (").concat(h,")"),placement:"top",children:(0,i.jsxs)(o.k,{width:"300px",_hover:{backgroundColor:m?"gray.100":f},borderColor:g,borderWidth:1,borderStyle:v,backgroundColor:m?"white":f,borderRadius:3,boxShadow:j,transition:"box-shadow 0.2s ease-in-out",padding:0,className:!0===c?"node-highlight":!0===d?"node-highlight":!1===c?"node-unhighlight":void 0,children:[(0,i.jsx)(o.k,{backgroundColor:f,padding:2,borderRightWidth:1,borderColor:g,borderStyle:v,alignItems:"top",visibility:m?"inherit":"hidden",children:(0,i.jsx)(s.J,{as:p})}),(0,i.jsxs)(o.k,{flex:"1 0 auto",mx:"1",width:"100px",direction:"column",children:[(0,i.jsxs)(o.k,{width:"100%",textAlign:"left",flex:"1",p:1,alignItems:"center",visibility:m?"inherit":"hidden",children:[(0,i.jsx)(l.xu,{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:y}),r&&(0,i.jsx)(o.k,{children:(0,i.jsx)(s.J,{color:f,as:r,flex:"0 0 20px"})})]}),(0,i.jsx)(o.k,{flex:"1 0 auto",mx:"1",direction:"column",paddingBottom:"1",visibility:m?"inherit":"hidden",children:(0,i.jsxs)(eT.U,{spacing:"8px",children:[(0,i.jsx)(u.L,{}),a.isActionMode?a.action?(0,i.jsx)(tJ,{node:a,action:a.action}):(0,i.jsx)(i.Fragment,{}):"model"===a.resourceType?(0,i.jsx)(tK,{id:a.id}):(0,i.jsx)(i.Fragment,{})]})})]}),Object.keys(null!==(n=null==a?void 0:a.parents)&&void 0!==n?n:{}).length>0&&(0,i.jsx)(R.HH,{type:"target",position:R.Ly.Left,isConnectable:!1}),Object.keys(null!==(t=null==a?void 0:a.children)&&void 0!==t?t:{}).length>0&&(0,i.jsx)(R.HH,{type:"source",position:R.Ly.Right,isConnectable:!1})]})})}},ic={customEdge:function(e){let{sourceX:n,sourceY:t,targetX:l,targetY:r,sourcePosition:s,targetPosition:o,style:a={},markerEnd:c,data:d}=e,u={...a};(null==d?void 0:d.changeStatus)&&(u.stroke=tf(null==d?void 0:d.changeStatus).color,u.strokeDasharray="5"),(null==d?void 0:d.isHighlighted)===!1&&(u.filter="opacity(0.2) grayscale(50%)");let[h]=(0,R.OQ)({sourceX:n,sourceY:t,sourcePosition:s,targetX:l,targetY:r,targetPosition:o});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(R.u5,{path:h,markerEnd:c,style:{...u,...a}})})}},id=e=>{var n,t;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.changeStatus)?tf(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.changeStatus).color:"lightgray"},iu=(e,n)=>{let[t,i]=(0,g.useState)(1),[l,r]=(0,g.useState)(1),s=null==e?void 0:e.current;return(0,g.useEffect)(()=>{let e=new ResizeObserver(e=>{for(let s of e){let e=s.contentRect.width,o=s.contentRect.height;(Math.abs(o-t)>100||Math.abs(e-l)>100)&&t>0&&o>0&&l>0&&e>0&&n(),i(o),r(e)}});return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[s,t,l,n]),t};function ih(e){var n;let{...t}=e,r=(0,R._K)(),a=(0,g.useRef)(null),{successToast:c,failToast:d}=eB(),{copyToClipboard:u,ImageDownloadModal:x,ref:m}=e$({renderLibrary:"html-to-image",imageType:"png",shadowEffect:!0,backgroundColor:"white",ignoreElements:e=>{let n=e.className;return!!("string"==typeof n&&n.includes(eY))},onSuccess:()=>{c("Copied the Lineage View as an image to clipboard")},onError:e=>{console.error("Error taking screenshot",e),d("Failed to copy image to clipboard",e)}}),[p,f,v]=(0,R.Rr)([]),[j,y,b]=(0,R.ll)([]),[k,w]=(0,g.useState)(t.viewOptions||{}),{lineageGraph:C,retchLineageGraph:_,isLoading:S,error:z,refetchRunsAggregated:T}=ea(),O=k.view_mode||t.viewMode||"changed_models",[I,H]=(0,g.useState)("detail"),[V,J]=(0,g.useState)("normal"),[K,U]=(0,g.useState)(),[B,Q]=(0,g.useState)(!1),[Z,Y]=(0,g.useState)(!1),[$,G]=(0,g.useState)({x:0,y:0});[...W.lineage(),k.select,k.exclude];let ee=(0,X.p)();(0,g.useLayoutEffect)(()=>{(async()=>{let e;if(!C)return;if(k.select||k.exclude)try{e=(await ts({select:k.select,exclude:k.exclude})).nodes}catch(e){}let[n,t]=M(C,k,e);D(n,t),f(n),y(t)})()},[f,y,C]);let en=async e=>{if(e.width&&e.height){let n=e.position.x+e.width/2,t=e.position.y+e.height/2,i=r.getZoom();r.setCenter(n,t,{zoom:i,duration:200})}};iu(a,()=>{if("detail"===I||"action_result"===I){let e=p.find(e=>e.data.isSelected);e&&en(e)}});let et=(0,g.useCallback)(e=>{f(n=>n.map(n=>n.id===e.id?{...n,data:e}:n))},[f]),ei=async e=>{let n;if(!C)return;try{n=(await ts({select:e.select,exclude:e.exclude})).nodes}catch(e){if(e instanceof io.d7){var t,i;ee({title:"Select node error",description:(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.detail)||e.message,status:"error",isClosable:!0,position:"bottom-right"})}return}let[l,s]=M(C,e,n);D(l,s),f(l),y(s),w(e),await new Promise(e=>setTimeout(e,1)),await (async()=>{r.fitView({nodes:l,duration:200})})()};if(S)return(0,i.jsx)(o.k,{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(tI.$,{size:"xl"})});let el=()=>{Y(!1),G({x:0,y:0})};return z?(0,i.jsx)(e1.M,{h:"100%",children:(0,i.jsxs)(no.g,{children:[(0,i.jsx)(l.xu,{children:"Failed to load lineage data. This could be because the server has been terminated or there is a network error."}),(0,i.jsxs)(l.xu,{children:["[Reason: ",z,"]"]}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>{_&&_()},children:"Retry"})]})}):"changed_models"!==O||(null==C?void 0:null===(n=C.modifiedSet)||void 0===n?void 0:n.length)?(0,i.jsxs)(ta,{sizes:K?[70,30]:[100,0],minSize:K?400:0,gutterSize:K?5:0,style:{height:"100%",width:"100%"},children:[(0,i.jsxs)(no.g,{ref:a,divider:(0,i.jsx)(tA.c,{borderColor:"gray.200"}),spacing:0,style:{contain:"strict"},children:[t.interactive&&(0,i.jsx)(il,{isDisabled:"normal"!==V,viewOptions:k,onViewOptionsChanged:ei,onSelectNodesClicked:()=>{let e="detail"===I?"action":"detail";U(void 0),Q(!1),f(P(p,"action"===e)),H(e),J("selector")}}),(0,i.jsxs)(R.x$,{nodeTypes:ia,edgeTypes:ic,nodes:p,edges:j,onNodesChange:v,onEdgesChange:b,onNodeClick:(e,n)=>{if(!1!==t.interactive){if(el(),"detail"===I)U(n.data),B||Q(!0),en(n),f(F(n.id,p));else if("action_result"===I)U(n.data),B||Q(!0),en(n),f(F(n.id,p));else{var i;f((i=n.id,p.map(e=>{let n=e.id===i;return{...e,data:{...e.data,isSelected:e.data.isSelected!==n}}})))}}},onNodeMouseEnter:(e,n)=>{if(!C)return;let[t,i]=L(Array.from(E(A(C,[n.id]),N(C,[n.id]))),p,j);f(t),y(i)},onNodeMouseLeave:(e,n)=>{if(!C)return;let[t,i]=L(Array.from(N(C,C.modifiedSet)),p,j);f(t),y(i)},onNodeContextMenu:(e,n)=>{"action"===I&&(e.preventDefault(),G({x:e.clientX,y:e.clientY,selectedNode:n}),Y(!0))},onClick:el,maxZoom:1,minZoom:.1,fitView:!0,nodesDraggable:t.interactive,ref:m,children:[(0,i.jsx)(tM.A,{color:"#ccc"}),(0,i.jsx)(tD.Z,{showInteractive:!1,position:"top-right",className:eY,children:(0,i.jsx)(tD.B,{title:"copy image",onClick:async()=>{u()},children:(0,i.jsx)(s.J,{as:tq.C3L})})}),(0,i.jsx)(x,{}),(0,i.jsx)(R.s_,{position:"bottom-left",children:(0,i.jsx)(eT.U,{children:(0,i.jsx)(is,{})})}),(0,i.jsx)(R.s_,{position:"top-left",children:(0,i.jsx)(h.x,{fontSize:"xl",color:"grey",opacity:.5,children:p.length>0?"":"No nodes"})}),(0,i.jsx)(tL.a,{nodeColor:id,nodeStrokeWidth:3,zoomable:!0,pannable:!0}),(0,i.jsx)(R.s_,{position:"bottom-center",className:eY,children:(0,i.jsx)(tN.R,{in:"selector"===V,unmountOnExit:!0,style:{zIndex:10},children:(0,i.jsx)(t9,{viewMode:O,nodes:p.map(e=>e.data).filter(e=>e.isSelected),onClose:()=>{H("detail"),J("normal");let e=P(p);U(void 0),Q(!1),f(e),null==T||T()},onActionStarted:()=>{H("action_result")},onActionNodeUpdated:et,onActionCompleted:()=>{}})})})]})]}),"detail"===I&&K?(0,i.jsx)(l.xu,{borderLeft:"solid 1px lightgray",height:"100%",children:(0,i.jsx)(t$,{node:K,onCloseNode:()=>{U(void 0),Q(!1),f(P(p))}})}):"action_result"===I&&K?(0,i.jsx)(l.xu,{borderLeft:"solid 1px lightgray",height:"100%",children:(0,i.jsx)(ir,{node:K,onCloseNode:()=>{U(void 0),Q(!1)}})}):(0,i.jsx)(l.xu,{}),Z&&(0,i.jsx)(nR.v,{isOpen:!0,onClose:el,children:(0,i.jsxs)(nO.q,{style:{position:"absolute",left:"".concat($.x,"px"),top:"".concat($.y,"px")},children:[(0,i.jsx)(nA.s,{icon:(0,i.jsx)(tU.Cv2,{}),onClick:()=>{let e=$.selectedNode;"action"===I&&void 0!==e&&void 0!==C&&f(q([...A(C,[e.id])],p))},children:"Select parent nodes"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(tU.IMj,{}),onClick:()=>{let e=$.selectedNode;"action"===I&&void 0!==e&&void 0!==C&&f(q([...N(C,[e.id])],p))},children:"Select child nodes"})]})})]}):(0,i.jsx)(e1.M,{h:"100%",children:(0,i.jsxs)(no.g,{children:[(0,i.jsx)(i.Fragment,{children:"No change detected"}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>{J("normal"),ei({...k,view_mode:"all"})},children:"Show all nodes"})]})})}function ix(e){let{check:n}=e,t={...n.params,...n.view_options};return(0,i.jsx)(o.k,{direction:"column",height:"100%",children:(0,i.jsx)(R.tV,{children:(0,i.jsx)(ih,{viewOptions:t,interactive:!1})})})}var im=t(19339);function ip(e){let{name:n,description:t,type:l,params:r,viewOptions:s}=e,o={name:n,description:t,type:l,params:r};s&&(o.view_options=s);let a=im.ZP.stringify({checks:[o]});return(0,i.jsx)(tz.ML,{height:"300px",language:"yaml",theme:"vs",value:a,options:{readOnly:!0,fontSize:14,lineNumbers:"off",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same",scrollBeyondLastLine:!1}})}function iv(){let e=(0,nK._)(["\n  <details><summary>","</summary>\n\n  ","\n\n  </details>"]);return iv=function(){return e},e}let ig=e=>{let{runId:n,isPending:t,setAborting:i}=e;(0,g.useEffect)(()=>()=>{i(!1),n&&t&&en(n)},[t,n,i])},ij=e=>{var n;let{checkId:t}=e,r=(0,b.NL)(),[,a]=(0,ey.TH)(),{successToast:d,failToast:h}=eB(),[f,v]=(0,g.useState)(),[j,k]=(0,g.useState)(),[w,C]=(0,g.useState)(!1),{isOpen:_,onOpen:S,onClose:z}=(0,ej.q)(),R=()=>(0,i.jsx)(eu.Z,{bg:"blackAlpha.300",backdropFilter:"blur(10px) "}),[T,E]=(0,g.useState)((0,i.jsx)(R,{})),{isLoading:O,error:I,refetch:A,data:N}=(0,y.a)({queryKey:W.check(t),queryFn:async()=>nZ(t),refetchOnMount:!1,staleTime:3e5}),M=(null==N?void 0:N.type)?nq(null==N?void 0:N.type):void 0,D=(null==N?void 0:N.is_preset)||!1,{mutate:L}=(0,tt.D)({mutationFn:e=>nX(t,e),onSuccess:()=>{r.invalidateQueries({queryKey:W.check(t)}),r.invalidateQueries({queryKey:W.checks()})}}),{mutate:F}=(0,tt.D)({mutationFn:()=>nY(t),onSuccess:()=>{r.invalidateQueries({queryKey:W.checks()}),a("/checks")}}),q=async()=>{if(!(null==N?void 0:N.type))return;let{run_id:e}=await et(t,{nowait:!0});for(v(e);;){let n=await ee(e,2);if(k(n.progress),n.result||n.error)return C(!1),k(void 0),n}},{data:P,mutate:H,error:V,isIdle:J,isPending:K}=(0,tt.D)({mutationFn:q,onSuccess:e=>{A()}}),U=async()=>{H()},B=(0,g.useCallback)(async()=>{if(C(!0),f)return await en(f)},[f]);ig({runId:f,isPending:K,setAborting:C});let Q=async()=>{if(!N)return;let e=(0,tw.RI)(iv(),t_(N),function(e){if("query"===e.type||"query_diff"===e.type){var n;return"".concat(tS(e),"\n\n").concat((0,tw.Pn)(tC(),null===(n=e.params)||void 0===n?void 0:n.sql_template))}return tS(e)}(N));if(!navigator.clipboard){h("Failed to copy the check to clipboard",Error("Copy to clipboard is available only in secure contexts (HTTPS)"));return}try{await navigator.clipboard.writeText(e),d("Copied the check to the clipboard")}catch(e){h("Failed to copy the check to clipboard",e)}},Z=(0,g.useCallback)(()=>{L({is_checked:!(null==N?void 0:N.is_checked)})},[null==N?void 0:N.is_checked,L]);if(O)return(0,i.jsx)(e1.M,{h:"100%",children:"Loading"});if(I)return(0,i.jsxs)(e1.M,{h:"100%",children:["Error: ",I.message]});let X=J?null==N?void 0:N.last_run:P,Y=(null==X?void 0:X.run_at)?(0,tO.Q)(new Date(X.run_at),{addSuffix:!0}):null;return(0,i.jsxs)(tc,{minSize:100,sizes:[30,70],style:{height:"100%",width:"100%",maxHeight:"100%"},children:[(0,i.jsxs)(l.xu,{style:{contain:"strict"},display:"flex",flexDirection:"column",overflow:"auto",children:[(0,i.jsxs)(o.k,{p:"0px 16px",alignItems:"center",children:[(0,i.jsx)(tn,{name:(null==N?void 0:N.name)||"",setName:e=>{L({name:e})}}),(0,i.jsx)(u.L,{}),D&&(0,i.jsx)(nc.u,{label:"Preset Check defined in recce config",children:(0,i.jsxs)(nG.Vp,{size:"sm",children:[(0,i.jsx)(nG.AD,{boxSize:"14px",as:n3.bX4}),"Preset"]})}),(0,i.jsxs)(nR.v,{children:[(0,i.jsx)(nT.j,{isRound:!0,as:nd.h,icon:(0,i.jsx)(s.J,{as:e9.D_A}),variant:"ghost"}),(0,i.jsxs)(nO.q,{children:[(0,i.jsx)(nA.s,{icon:(0,i.jsx)(n6.ovA,{}),onClick:()=>{E((0,i.jsx)(R,{})),S()},children:"Get Preset Check Template"}),(0,i.jsx)(nA.s,{icon:(0,i.jsx)(n5.p,{}),onClick:()=>F(),children:"Delete"})]})]}),Y&&(0,i.jsx)(l.xu,{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontSize:"10pt",children:Y}),(null==M?void 0:M.RunResultView)&&(0,i.jsx)(nc.u,{label:"Rerun",children:(0,i.jsx)(nd.h,{isRound:!0,isLoading:K,variant:"ghost","aria-label":"Rerun",icon:(0,i.jsx)(n4.n,{}),onClick:()=>U()})}),(0,i.jsx)(nc.u,{label:"Copy markdown",children:(0,i.jsx)(nd.h,{isRound:!0,variant:"ghost","aria-label":"Copy markdown",icon:(0,i.jsx)(eH.T,{}),onClick:()=>Q()})}),(0,i.jsx)(nc.u,{label:(null==N?void 0:N.is_checked)?"Mark as pending":"Mark as approved",children:(0,i.jsx)(ev.z,{size:"sm",colorScheme:(null==N?void 0:N.is_checked)?"green":"gray",leftIcon:(0,i.jsx)(n9.r,{}),onClick:()=>Z(),children:(null==N?void 0:N.is_checked)?"Approved":"Pending"})})]}),(0,i.jsx)(l.xu,{flex:"1",p:"8px 16px",minHeight:"100px",children:(0,i.jsx)(tk,{value:null==N?void 0:N.description,onChange:e=>{L({description:e})}},null==N?void 0:N.check_id)})]}),(0,i.jsx)(l.xu,{style:{contain:"strict"},children:(0,i.jsxs)(x.m,{height:"100%",display:"flex",flexDirection:"column",children:[(0,i.jsxs)(m.t,{children:[(0,i.jsx)(p.O,{fontSize:"10pt",children:"Result"}),((null==N?void 0:N.type)==="query"||(null==N?void 0:N.type)==="query_diff")&&(0,i.jsx)(p.O,{fontSize:"10pt",children:"Query"})]}),(0,i.jsxs)(n0.n,{height:"100%",flex:"1",style:{contain:"strict"},children:[(0,i.jsxs)(n1.x,{p:0,width:"100%",height:"100%",children:[(null==M?void 0:M.RunResultView)&&(0,i.jsx)(tE,{isPending:K,isAborting:w,isCheckDetail:!0,run:X,error:V,progress:j,RunResultView:M.RunResultView,viewOptions:null==N?void 0:N.view_options,onViewOptionsChanged:e=>{L({view_options:e})},onCancel:B,onExecuteRun:U}),N&&"schema_diff"===N.type&&(0,i.jsx)(ty,{check:N}),N&&"lineage_diff"===N.type&&(0,i.jsx)(ix,{check:N})]}),((null==N?void 0:N.type)==="query"||(null==N?void 0:N.type)==="query_diff")&&(0,i.jsx)(n1.x,{p:0,height:"100%",width:"100%",children:(0,i.jsx)(tR,{value:(null==N?void 0:null===(n=N.params)||void 0===n?void 0:n.sql_template)||"",options:{readOnly:!0}})})]})]})}),(0,i.jsxs)(ed.u_,{isOpen:_,onClose:z,isCentered:!0,size:"6xl",children:[T,(0,i.jsxs)(eh.h,{overflowY:"auto",height:"40%",width:"60%",children:[(0,i.jsx)(ex.x,{children:"Preset Check Template"}),(0,i.jsx)(em.o,{}),(0,i.jsxs)(ep.f,{children:[(0,i.jsx)(c.X,{size:"sm",fontWeight:"bold",children:(0,i.jsx)(n2.y$,{query:"recce.yml",styles:{px:"1",py:"0",bg:"red.100"},children:"Please copy the following template and paste it into the recce.yml file."})}),(0,i.jsx)("br",{}),(0,i.jsx)(ip,{name:(null==N?void 0:N.name)||"",description:(null==N?void 0:N.description)||"",type:(null==N?void 0:N.type)||"",params:null==N?void 0:N.params,viewOptions:null==N?void 0:N.view_options})]})]})]})]})};var iy=t(53924);let ib=e=>{var n;let{check:t,selected:r,onSelect:a}=e,c=(0,b.NL)(),d=t.check_id,{mutate:u}=(0,tt.D)({mutationFn:e=>nX(d,e),onSuccess:()=>{c.invalidateQueries({queryKey:W.check(d)}),c.invalidateQueries({queryKey:W.checks()})}}),h=(null===(n=nq(t.type))||void 0===n?void 0:n.icon)||eb.WzH;return(0,i.jsxs)(o.k,{width:"100%",p:"10px 20px",cursor:"pointer",_hover:{bg:"gray.200"},bg:r?"gray.100":"inherit",onClick:()=>a(t.check_id),alignItems:"center",gap:"5px",children:[(0,i.jsx)(s.J,{as:h}),(0,i.jsx)(l.xu,{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",children:t.name}),t.is_checked&&(0,i.jsx)(s.J,{color:"green",as:tu.FJM})]})},ik=e=>{let{checks:n,selectedItem:t,onCheckSelected:l,onChecksReordered:r}=e;return(0,i.jsx)(iy.Z5,{onDragEnd:e=>{e.destination&&r(e.source.index,e.destination.index)},children:(0,i.jsx)(iy.bK,{droppableId:"checklist",children:e=>(0,i.jsxs)(no.g,{...e.droppableProps,ref:e.innerRef,w:"full",spacing:"0",flex:"1",overflow:"auto",children:[n.map((e,n)=>(0,i.jsx)(iy._l,{draggableId:e.check_id,index:n,children:n=>(0,i.jsx)(o.k,{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,w:"full",children:(0,i.jsx)(ib,{check:e,selected:e.check_id===t,onSelect:l},e.check_id)})},e.check_id)),e.placeholder]})})})};function iw(){let e=(0,nK._)(["\n    <details><summary>","</summary>\n\n    ","\n\n    </details>"]);return iw=function(){return e},e}let iC=()=>{let[,e]=(0,ey.TH)(),[,n]=(0,ey.yj)("/checks/:checkId"),t=(0,b.NL)(),{successToast:r,failToast:s}=eB(),o=null==n?void 0:n.checkId,{isLoading:a,error:c,data:d,status:u}=(0,y.a)({queryKey:W.checks(),queryFn:nQ,refetchOnMount:!0}),h=(0,g.useCallback)(n=>{e("/checks/".concat(n))},[e]),[x,m]=(0,g.useState)(d||[]),{mutate:p}=(0,tt.D)({mutationFn:e=>n$(e),onSuccess:()=>{t.invalidateQueries({queryKey:W.checks()})}}),f=(0,g.useCallback)((e,n)=>{let t=[...x],[i]=t.splice(e,1);t.splice(n,0,i),p({source:e,destination:n}),m(t)},[x,m,p]);return((0,g.useCallback)(async()=>{let e=await nU();t.invalidateQueries({queryKey:W.checks()}),h(e.check_id)},[t,h]),(0,g.useEffect)(()=>{"success"===u&&(!o&&d.length>0&&e("/checks/".concat(d[0].check_id)),m(d))},[u,o,d,m,e]),a)?(0,i.jsx)(i.Fragment,{}):c?(0,i.jsxs)(i.Fragment,{children:["Error: ",c.message]}):(null==d?void 0:d.length)?(0,i.jsxs)(ta,{style:{height:"100%"},minSize:50,sizes:[20,80],children:[(0,i.jsx)(l.xu,{borderRight:"lightgray solid 1px",height:"100%",style:{contain:"size"},children:(0,i.jsxs)(no.g,{spacing:0,align:"flex-end",h:"100%",style:{contain:"strict"},children:[(0,i.jsx)(nc.u,{label:"Copy checklist to the clipboard",children:(0,i.jsx)(nd.h,{mr:"10px",variant:"unstyled","aria-label":"Copy checklist to the clipboard",onClick:async()=>{let e=d.map(e=>(0,tw.RI)(iw(),t_(e),tS(e))).join("\n\n");if(!navigator.clipboard){s("Failed to copy checklist to clipboard",Error("Copy to clipboard is available only in secure contexts (HTTPS)"));return}try{await navigator.clipboard.writeText(e),r("Copied ".concat(d.length," checks to the clipboard"))}catch(e){s("Failed to copy checklist to clipboard",e)}},icon:(0,i.jsx)(eH.T,{})})}),(0,i.jsx)(nj.i,{mb:"8px"}),(0,i.jsx)(ik,{checks:x,selectedItem:o,onCheckSelected:h,onChecksReordered:f})]})}),(0,i.jsx)(l.xu,{height:"100%",children:(0,i.jsx)(ey.rs,{children:(0,i.jsx)(ey.AW,{path:"/checks/:checkId",children:e=>(0,i.jsx)(ij,{checkId:e.checkId},e.checkId)})})})]}):(0,i.jsx)(e1.M,{h:"100%",children:(0,i.jsx)(l.xu,{children:"No checks"})})};async function i_(e,n){return await G("query",e,n)}async function iS(e,n){return await G("query_diff",e,n)}var iz=t(66070);let iR=e=>{let{defaultPrimaryKeys:n,onPrimaryKeysChange:t,...l}=e,{lineageGraph:r}=ea(),s=(0,g.useMemo)(()=>{if(!r)return[];let e=new Set;for(let i in r.nodes){var n,t;let l=r.nodes[i],s=null===(n=l.data.base)||void 0===n?void 0:n.columns,o=null===(t=l.data.current)||void 0===t?void 0:t.columns;for(let n in s)e.add(n);for(let n in o)e.add(n)}return Array.from(e).sort()},[r]);return(0,i.jsx)(o.k,{...l,children:(0,i.jsxs)(ek.NI,{m:"4px 8px",children:[(0,i.jsxs)(ew.l,{children:["Primary key"," ",(0,i.jsx)(nc.u,{label:"When a primary key is present, the query difference is computed in the warehouse. Otherwise, it's computed on the client side.",children:(0,i.jsx)(eV.s,{color:"gray.600",boxSize:"3"})})]}),(0,i.jsxs)(iz.Qc,{restoreOnBlurIfEmpty:!1,multiple:!0,creatable:!0,filter:(e,n)=>n.startsWith(e),onChange:e=>t(e),defaultValues:void 0!==n&&0!==n.length?n:void 0,children:[(0,i.jsx)(iz.Vp,{placeholder:"Select primary key...",variant:"outline",children:e=>{let{tags:n}=e;return n.map((e,n)=>(0,i.jsx)(iz.Y4,{label:e.label,onRemove:e.onRemove},n))}}),(0,i.jsxs)(iz.Jm,{children:[s.map((e,n)=>(0,i.jsx)(iz.Gb,{value:e,children:e},"option-".concat(n))),(0,i.jsx)(iz.JU,{children:e=>{let{value:n}=e;return(0,i.jsxs)(o.k,{children:["Add '",n,"' to List"]})}})]})]})]})})},iT=()=>{let{sqlQuery:e,setSqlQuery:n,primaryKeys:t,setPrimaryKeys:r}=_(),{envInfo:s}=ea(),a=e;(null==s?void 0:s.adapterType)==="sqlmesh"&&e===k&&(a="select * from db.mymodel");let[c,d]=(0,g.useState)(),[u,h]=(0,g.useState)(),[x,m]=(0,g.useState)({}),p=(0,b.NL)(),[,f]=(0,ey.TH)(),v=async e=>{d(e);let{run_id:n}="query"===e?await i_({sql_template:a},{nowait:!0}):await iS({sql_template:a,primary_keys:t},{nowait:!0});return h(n),await ee(n)},{data:j,mutate:y,error:w,isPending:C}=(0,tt.D)({mutationFn:v,onSuccess:e=>{m({})}}),S=(0,g.useCallback)(async()=>{if(u)return await en(u)},[u]),z=(0,g.useCallback)(async e=>{if(!(null==e?void 0:e.run_id))return;let n=await nB(e.run_id,x);p.invalidateQueries({queryKey:W.checks()}),f("/checks/".concat(n.check_id))},[f,x,p]);return(0,i.jsxs)(o.k,{direction:"column",height:"100%",children:[(0,i.jsxs)(o.k,{justifyContent:"right",padding:"5px",gap:"5px",children:[(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>y("query_diff"),isDisabled:C,size:"sm",children:"Run Diff"}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>y("query"),isDisabled:C,size:"sm",children:"Run"})]}),(0,i.jsxs)(tc,{sizes:[40,60],minSize:100,style:{height:"100%",borderTop:"1px solid #CBD5E0"},children:[(0,i.jsxs)(ta,{sizes:[90,10],minSize:300,children:[(0,i.jsx)(l.xu,{width:"70%",border:"1px solid #CBD5E0",children:(0,i.jsx)(tR,{value:a,onChange:n,onRun:()=>y("query"),onRunDiff:()=>y("query_diff")})}),(0,i.jsx)(iR,{p:"5px",border:"1px",borderColor:"gray.300",defaultPrimaryKeys:t,onPrimaryKeysChange:r})]}),(0,i.jsx)(o.k,{flex:"1",direction:"column",children:"query"===c?(0,i.jsx)(tE,{run:j,error:w,isPending:C,onCancel:S,children:e=>(0,i.jsx)(nf,{...e,onAddToChecklist:z})},u):(0,i.jsx)(tE,{isPending:C,run:j,error:w,viewOptions:x,onViewOptionsChanged:m,onCancel:S,children:e=>(0,i.jsx)(nm,{...e,onAddToChecklist:z})},u)})]})]})};var iE=t(30148);let iO=e=>(0,iE.c4)("#!"+e),iI=()=>[(0,iE.LD)(()=>window.location.hash.replace(/^#!/,"")||"/",()=>"/ssr"),iO];var iA=t(24681),iN=t(62843);let iM=e=>{var n;let{runId:t}=e,{isPending:l,error:r,data:s}=(0,y.a)({queryKey:W.run(t),queryFn:async()=>ee(t)}),o=(null==s?void 0:s.type)?null===(n=nq(s.type))||void 0===n?void 0:n.RunResultView:void 0;return(0,i.jsx)(tE,{isPending:l,error:r,run:s,RunResultView:o})};var iD=t(20085);let iL=e=>{let{error:n,resetError:t}=e;return(0,i.jsx)(e1.M,{height:"100%",backgroundColor:"gray.50",children:(0,i.jsxs)(o.k,{p:4,direction:"column",justifyContent:"flex-start",backgroundColor:"white",border:"solid lightgray 1px",minHeight:"200px",children:[(0,i.jsx)(c.X,{width:"800px",size:"md",children:"You have encountered an error"}),(0,i.jsx)(l.xu,{flex:"1",fontSize:"10pt",children:n.toString()}),(0,i.jsx)(ev.z,{justifySelf:"center",alignSelf:"center",mt:"20px",colorScheme:"blue",size:"sm",onClick:()=>{t()},children:"Reset"})]})})},iF=e=>{let{children:n}=e;return(0,i.jsx)(iD.SV,{fallback:iL,children:n})};async function iq(){return(await U.post("/api/export")).data}async function iP(e){let n=new FormData;return n.append("file",e),(await U.post("/api/import",n)).data}async function iW(){return 208===(await U.get("/api/sync")).status}async function iH(e){try{let n=await U.post("/api/sync",e);if(202===n.status)return{status:"accepted"};if(208===n.status)return{status:"syncing"}}catch(e){if((0,io.IZ)(e)&&e.response&&409===e.response.status)return{status:"conflict"}}throw Error("Failed to sync state")}var iV=t(16021);function iJ(){let e=(0,X.p)(),n=async()=>{try{let e=await iq(),n=JSON.stringify(e,null,2),t=new Blob([n],{type:"application/json"}),i=new Date,l="recce-state-".concat((0,eQ.WU)(i,"yyyy-MM-dd-HH-mm-ss"),".json");eX()(t,l)}catch(n){console.error("Export failed",n),e({title:"Export failed",description:"".concat(n),status:"error",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0})}};return(0,i.jsx)(nc.u,{label:"Export",children:(0,i.jsx)(nd.h,{pt:"6px",variant:"unstyled","aria-label":"Export state",onClick:n,icon:(0,i.jsx)(s.J,{as:iV.tRY,boxSize:"1.2em"})})})}var iK=t(65475);function iU(){let e=(0,X.p)(),n=(0,b.NL)(),t=(0,g.useRef)(null),l=(0,g.useRef)(null),[r,a]=(0,g.useState)(null),{isOpen:c,onOpen:d,onClose:u}=(0,ej.q)(),[x,m]=(0,ey.TH)(),[,p]=ec(),f=(0,g.useCallback)(async()=>{if(r){try{let{runs:t,checks:i}=await iP(r);p(),await n.invalidateQueries({queryKey:W.checks()}),x.includes("/checks")&&m("/checks"),e({description:"".concat(t," runs and ").concat(i," checks imported successfully"),status:"info",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0})}catch(n){console.error("Import failed",n),e({title:"Import failed",description:"".concat(n),status:"error",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0})}u()}},[n,r,e,u,x,m,p]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nc.u,{label:"Import",children:(0,i.jsx)(nd.h,{pt:"6px",variant:"unstyled","aria-label":"Import state",onClick:()=>{t.current&&t.current.click()},icon:(0,i.jsx)(s.J,{as:iV.wQf,boxSize:"1.2em"})})}),(0,i.jsx)("input",{type:"file",style:{display:"none"},ref:t,onChange:e=>{var n;(null===(n=e.target.files)||void 0===n?void 0:n.length)===1&&(a(e.target.files[0]),d())}}),(0,i.jsx)(iK.a,{isOpen:c,leastDestructiveRef:l,onClose:u,size:"xl",children:(0,i.jsx)(eu.Z,{children:(0,i.jsxs)(iK._,{children:[(0,i.jsx)(ex.x,{fontSize:"lg",fontWeight:"bold",children:"Import state"}),(0,i.jsx)(ep.f,{children:(0,i.jsxs)(o.k,{px:"5px",gap:"5px",rounded:"md",direction:"column",children:[(0,i.jsxs)(o.k,{alignItems:"center",gap:"5px",children:[(0,i.jsx)(eV.s,{color:"red.600"}),(0,i.jsx)(h.x,{as:"span",fontWeight:"500",color:"red.600",children:"Caution!"})]}),(0,i.jsx)(o.k,{children:(0,i.jsxs)(h.x,{children:["The current runs and checks will be"," ",(0,i.jsx)(h.x,{as:"span",fontWeight:"600",children:"merged"})," ","with the imported state"]})})]})}),(0,i.jsxs)(ef.m,{children:[(0,i.jsx)(ev.z,{ref:l,onClick:u,children:"Cancel"}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:f,ml:"5px",children:"Import"})]})]})})})]})}t(97770);var iB=t(93126),iQ=t(1026),iZ=t(13154),iX=t(99434),iY=t(20143),i$=t(89830),iG=t(13276),i0=t(31610);function i1(e){let n=(0,i0.D)(e);return(0,eQ.WU)(n,"yyyy-MM-dd'T'HH:mm:ss")}function i2(e){return Object.values(e).every(e=>null===e)?[(0,i.jsx)(o.k,{ml:"10px",children:"No information"},"no info")]:Object.entries(e).filter(e=>{let[n,t]=e;return"url"!==n&&null!=t}).map(e=>{let[n,t]=e;return(0,i.jsxs)(td.HC,{ml:"10px",children:[n,": ",t]},n)})}function i5(){var e,n,t,l,a,d;let{envInfo:u,reviewMode:h,lineageGraph:x}=ea(),{isOpen:m,onOpen:p,onClose:f}=(0,ej.q)(),v=null==u?void 0:u.git,g=null==u?void 0:u.pullRequest,j={...v,...g},y=null==u?void 0:null===(e=u.dbt)||void 0===e?void 0:e.base,b=null==u?void 0:null===(n=u.dbt)||void 0===n?void 0:n.current,k=(null==y?void 0:y.generated_at)?i1(null==y?void 0:y.generated_at):"",w=(null==b?void 0:b.generated_at)?i1(null==b?void 0:b.generated_at):"",C=new Set,_=new Set;if(null==x?void 0:x.nodes)for(let e of Object.values(null==x?void 0:x.nodes))(null===(a=e.data.base)||void 0===a?void 0:a.schema)&&C.add(e.data.base.schema),(null===(d=e.data.current)||void 0===d?void 0:d.schema)&&_.add(e.data.current.schema);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nc.u,{label:"Environment Info",children:(0,i.jsx)(nd.h,{pt:"6px",variant:"unstyled","aria-label":"Export state",onClick:p,icon:(0,i.jsx)(s.J,{as:n6.lS4,boxSize:"1.5em",color:"gray.500"})})}),(0,i.jsxs)(ed.u_,{isOpen:m,onClose:f,size:"3xl",children:[(0,i.jsx)(eu.Z,{}),(0,i.jsxs)(eh.h,{children:[(0,i.jsx)(ex.x,{children:"Environment Information"}),(0,i.jsx)(em.o,{}),(0,i.jsx)(ep.f,{children:(0,i.jsxs)(o.k,{direction:"column",gap:"5px",children:[h?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.k,{justifyContent:"left",gap:"5px",direction:"column",children:[(0,i.jsx)(c.X,{size:"sm",children:"Review Information"}),(0,i.jsxs)(td.QI,{spacing:1,children:[(null==j?void 0:j.url)&&(0,i.jsxs)(td.HC,{ml:"10px",children:["url:"," ",(0,i.jsx)(r.r,{href:j.url,color:"blue.500",isExternal:!0,children:j.url})]}),j&&i2(j)]})]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.k,{justifyContent:"left",gap:"5px",direction:"column",children:[(0,i.jsx)(c.X,{size:"sm",children:"Dev Information"}),(0,i.jsx)(td.QI,{spacing:1,children:v&&i2(v)})]})}),(0,i.jsx)(nj.i,{}),(null==u?void 0:u.adapterType)==="dbt"&&(0,i.jsxs)(o.k,{justifyContent:"left",gap:"5px",direction:"column",children:[(0,i.jsx)(c.X,{size:"sm",children:"DBT"}),(0,i.jsx)(iB.x,{children:(0,i.jsxs)(iQ.i,{variant:"simple",children:[(0,i.jsx)(iZ.h,{children:(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iY.Th,{}),(0,i.jsx)(iY.Th,{children:"base"}),(0,i.jsx)(iY.Th,{children:"current"})]})}),(0,i.jsxs)(i$.p,{children:[(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iG.Td,{children:"schema"}),(0,i.jsx)(iG.Td,{children:JSON.stringify(Array.from(C))}),(0,i.jsx)(iG.Td,{children:JSON.stringify(Array.from(_))})]}),(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iG.Td,{children:"version"}),(0,i.jsx)(iG.Td,{children:null==y?void 0:y.dbt_version}),(0,i.jsx)(iG.Td,{children:null==b?void 0:b.dbt_version})]}),(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iG.Td,{children:"timestamp"}),(0,i.jsx)(iG.Td,{children:k}),(0,i.jsx)(iG.Td,{children:w})]})]})]})})]}),(null==u?void 0:u.adapterType)==="sqlmesh"&&(0,i.jsxs)(o.k,{justifyContent:"left",gap:"5px",direction:"column",children:[(0,i.jsx)(c.X,{size:"sm",children:"SQLMesh"}),(0,i.jsx)(iB.x,{children:(0,i.jsxs)(iQ.i,{variant:"simple",children:[(0,i.jsx)(iZ.h,{children:(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iY.Th,{}),(0,i.jsx)(iY.Th,{children:"base"}),(0,i.jsx)(iY.Th,{children:"current"})]})}),(0,i.jsx)(i$.p,{children:(0,i.jsxs)(iX.Tr,{children:[(0,i.jsx)(iG.Td,{children:"Environment"}),(0,i.jsx)(iG.Td,{children:null==u?void 0:null===(t=u.sqlmesh)||void 0===t?void 0:t.base_env}),(0,i.jsx)(iG.Td,{children:null==u?void 0:null===(l=u.sqlmesh)||void 0===l?void 0:l.current_env})]})})]})})]})]})}),(0,i.jsx)(ef.m,{children:(0,i.jsx)(ev.z,{colorScheme:"blue",mr:3,onClick:f,children:"Close"})})]})]})]})}var i4=t(21166),i9=t(23256),i3=t(43399),i6=t(60057);function i8(){return(0,i.jsx)(nc.u,{label:"Syncing",children:(0,i.jsx)(ev.z,{pt:"6px",variant:"unstyled",boxSize:"1.2em",children:(0,i.jsx)(tI.$,{})})})}function i7(){let[e,n]=(0,g.useState)(!1),t=(0,b.NL)(),[r,o]=(0,ey.TH)(),{isOpen:a,onOpen:c,onClose:d}=(0,ej.q)(),[u,h]=(0,g.useState)(""),x=(0,X.p)(),m=(0,g.useCallback)(async e=>{if(d(),n(!0),"conflict"===(await iH(e)).status){c(),n(!1);return}for(;await iW();)await new Promise(e=>setTimeout(e,1e3));x({description:"Sync Completed",status:"success",variant:"left-accent",position:"bottom",duration:5e3,isClosable:!0}),n(!1),h(""),t.invalidateQueries({queryKey:W.lineage()}),t.invalidateQueries({queryKey:W.checks()}),/^\/checks\/([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/.test(r)&&o("/checks")},[t,r,o,x,c,d]);return e?(0,i.jsx)(i8,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nc.u,{label:"Sync with Cloud",children:(0,i.jsx)(nd.h,{pt:"6px",variant:"unstyled","aria-label":"Sync state",onClick:()=>m({}),icon:(0,i.jsx)(s.J,{as:iV.jq8,boxSize:"1.2em"})})}),(0,i.jsxs)(ed.u_,{isOpen:a,onClose:d,children:[(0,i.jsx)(eu.Z,{}),(0,i.jsxs)(eh.h,{children:[(0,i.jsx)(ex.x,{fontSize:"lg",fontWeight:"bold",children:"Sync with Cloud"}),(0,i.jsxs)(ep.f,{children:[(0,i.jsx)(l.xu,{children:"New changes have been detected in the cloud. Please choose a method to sync your state"}),(0,i.jsx)(l.xu,{mt:"5px",children:(0,i.jsx)(i4.E,{onChange:h,value:u,children:(0,i.jsxs)(i9.K,{direction:"column",children:[(0,i.jsxs)(i3.Y,{value:"merge",children:["Merge",(0,i.jsx)(nc.u,{label:"This will merge the local and remote states.",children:(0,i.jsx)("span",{children:(0,i.jsx)(s.J,{as:i6.h,ml:2,cursor:"pointer"})})})]}),(0,i.jsxs)(i3.Y,{value:"overwrite",children:["Overwrite",(0,i.jsx)(nc.u,{label:"This will overwrite the remote state file with the local state.",children:(0,i.jsx)("span",{children:(0,i.jsx)(s.J,{as:i6.h,ml:2,cursor:"pointer"})})})]}),(0,i.jsxs)(i3.Y,{value:"revert",children:["Revert",(0,i.jsx)(nc.u,{label:"This will discard local changes and revert to the cloud state.",children:(0,i.jsx)("span",{children:(0,i.jsx)(s.J,{as:i6.h,ml:2,cursor:"pointer"})})})]})]})})})]}),(0,i.jsxs)(ef.m,{children:[(0,i.jsx)(ev.z,{onClick:d,mr:3,children:"Cancel"}),(0,i.jsx)(ev.z,{colorScheme:"blue",onClick:()=>m({method:u}),isDisabled:!u,children:"Sync"})]})]})]})]})}let le=e=>{var n;let[t,i]=(0,g.useState)(!1),[l,r]=(0,g.useState)(!1),[,s]=ec(),{error:o,data:a}=(0,y.a)({queryKey:W.run(e||""),queryFn:async()=>ee(e||"",2),enabled:!!e,refetchInterval:!!t&&50});(0,g.useEffect)(()=>{o||(null==a?void 0:a.result)||(null==a?void 0:a.error)?t&&(i(!1),(null==a?void 0:a.type)==="row_count_diff"&&s()):i(!0)},[a,o,t,s]);let c=(0,g.useCallback)(async()=>{if(r(!0),e)return await en(e)},[e,r]),d=(null==a?void 0:a.type)?null===(n=nq(a.type))||void 0===n?void 0:n.RunResultView:void 0;return{run:a,isPending:t,aborting:l,error:o,onCancel:c,RunResultView:d}},ln=e=>{let n=im.ZP.stringify(e,null,2);return(0,i.jsx)(tz.ML,{height:"100%",language:"yaml",theme:"vs",value:n,options:{readOnly:!0,fontSize:14,lineNumbers:"off",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"same",scrollBeyondLastLine:!1}})},lt=e=>{var n;let{runId:t,onClose:l}=e,{runAction:r}=nV(),{isPending:s,error:a,run:c,onCancel:d}=le(t),h=(0,g.useRef)(!1);h.current=s,(0,g.useEffect)(()=>()=>{h.current&&d()},[h]);let[f,v]=(0,g.useState)(),j=(0,b.NL)(),[,y]=(0,ey.TH)(),[k,w]=(0,g.useState)(0),C=(null==c?void 0:c.type)?null===(n=nq(c.type))||void 0===n?void 0:n.RunResultView:void 0,_=(0,g.useCallback)(()=>{r((null==c?void 0:c.type)||"",null==c?void 0:c.params)},[c,r]),S=(0,g.useCallback)(async()=>{if(!t)return;let e=await nB(t,f);j.invalidateQueries({queryKey:W.checks()}),y("/checks/".concat(e.check_id))},[t,y,j,f]);return(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(x.m,{tabIndex:k,onChange:w,flexDirection:"column",mb:"1px",children:(0,i.jsxs)(m.t,{height:"50px",children:[(0,i.jsx)(p.O,{children:"Result"}),(0,i.jsx)(p.O,{children:"Params"}),(0,i.jsx)(u.L,{}),(0,i.jsxs)(eT.U,{children:[(0,i.jsx)(ev.z,{isDisabled:!t||s,size:"sm",colorScheme:"blue",onClick:_,children:"Rerun"}),(0,i.jsx)(ev.z,{isDisabled:!t||!(null==c?void 0:c.result),size:"sm",colorScheme:"blue",onClick:S,children:"Add to Checklist"}),(0,i.jsx)(tZ.P,{onClick:()=>{l&&l()}})]})]})}),0===k&&(0,i.jsx)(tE,{isPending:s,error:a,run:c,onCancel:d,viewOptions:f,onViewOptionsChanged:v,RunResultView:C}),1===k&&c&&(0,i.jsx)(ln,{type:c.type,params:c.params})]})},li=e=>{let{onClose:n}=e,{runId:t}=nV();return(0,i.jsx)(lt,{runId:t,onClose:n})};function ll(){let{runId:e}=nV(),{isOpen:n,onOpen:t,onClose:r}=(0,ej.q)();return(0,g.useEffect)(()=>{e?t():r()},[e,t,r]),(0,i.jsx)(R.tV,{children:(0,i.jsxs)(tc,{sizes:n?[50,50]:[100,0],minSize:n?100:0,style:{height:"100%",borderTop:"1px solid #CBD5E0"},children:[(0,i.jsx)(l.xu,{children:(0,i.jsx)(ih,{viewMode:"changed_models",interactive:!0})}),n?(0,i.jsx)(li,{onClose:r}):(0,i.jsx)(l.xu,{})]})})}var lr=t(39588);let ls=e=>{let{children:n,path:t}=e,[r]=(0,ey.yj)(t);return(0,i.jsx)(l.xu,{display:r?"block":"none",height:"100%",children:n})};function lo(e){let{icon:n,href:t,...l}=e;return(0,i.jsx)(r.r,{height:"20px",color:"white",href:t,isExternal:!0,...l,children:(0,i.jsx)(s.J,{color:"white",boxSize:"20px",as:n})})}function la(){var e;let{reviewMode:n,isDemoSite:t,envInfo:l,cloudMode:s,isLoading:x}=ea(),m=function(){let[e,n]=(0,g.useState)("");return(0,g.useEffect)(()=>{(async function(){try{let e=await U.get("/api/version");n(e.data)}catch(e){console.error("Error fetching version number:",e)}})()},[]),e}(),p=null==l?void 0:null===(e=l.pullRequest)||void 0===e?void 0:e.url;return(0,i.jsxs)(o.k,{gap:"10px",minHeight:"40px",alignItems:"center",bg:"rgb(255, 110, 66)",children:[(0,i.jsx)(a.E,{boxSize:"20px",ml:"18px",src:"/logo/recce-logo-white.png",alt:"recce-logo-white"}),(0,i.jsx)(c.X,{as:"h1",fontFamily:'"Montserrat", sans-serif',fontSize:"lg",color:"white",children:"RECCE"}),(0,i.jsx)(d.C,{fontSize:"sm",color:"white",colorScheme:"whiteAlpha",variant:"outline",children:m}),n&&(0,i.jsx)(d.C,{fontSize:"sm",color:"white",colorScheme:"whiteAlpha",variant:"outline",children:"review mode"}),s&&(0,i.jsx)(d.C,{fontSize:"sm",color:"white",colorScheme:"whiteAlpha",variant:"outline",children:"cloud mode"}),(0,i.jsx)(u.L,{}),t&&p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eV.s,{}),(0,i.jsxs)(h.x,{children:["Please check"," ",(0,i.jsx)(r.r,{textDecoration:"underline",fontWeight:"600",href:p,isExternal:!0,children:"this Pull Request"})," ","comment for context about this Recce instance"]})]}),(0,i.jsx)(u.L,{}),(0,i.jsx)(lo,{icon:tu.hJX,href:"https://github.com/DataRecce/recce"}),(0,i.jsx)(lo,{icon:tu.w5k,href:"https://getdbt.slack.com/archives/C05C28V7CPP"}),(0,i.jsx)(lo,{mr:"18px",icon:tu.MXt,href:"https://datarecce.io/docs"})]})}function lc(e){let{queryKey:n,fetchCallback:t,selectCallback:r}=e,{data:s,isLoading:o,error:a}=(0,y.a)({queryKey:n,queryFn:t,select:r});return o||a||0===s?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(l.xu,{ml:"2px",height:"80%",aspectRatio:1,borderRadius:"full",bg:"tomato",alignContent:"center",color:"white",fontSize:"xs",children:s})}function ld(){let{isDemoSite:e,cloudMode:n,isLoading:t}=ea(),[l,r]=(0,ey.TH)(),s=[{name:"Lineage",href:"/lineage"},{name:"Query",href:"/query"},{name:"Checks",href:"/checks"}],o=e=>e.filter(e=>!e.is_checked).length,a=eS().findIndex(s,e=>{let{href:n}=e;return l.startsWith(n)});return(0,i.jsx)(x.m,{index:a,children:(0,i.jsxs)(m.t,{children:[s.map(e=>{let{name:n,href:t}=e;return(0,i.jsxs)(p.O,{onClick:()=>{r(t)},children:[n,"Checks"===n&&(0,i.jsx)(lc,{queryKey:W.checks(),fetchCallback:nQ,selectCallback:o})]},n)}),(0,i.jsx)(u.L,{}),!t&&(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(i7,{}),!e&&!n&&(0,i.jsx)(iU,{}),(0,i.jsx)(iJ,{})]}),(0,i.jsx)(i5,{})]})})}function lu(){(0,g.useLayoutEffect)(()=>{var e;let n=(e=document.cookie.match("(^|;)\\s*recce_user_id\\s*=\\s*([^;]+)"))?e.pop():"";if(n&&lr.env.AMPLITUDE_API_KEY)try{j.S1(lr.env.AMPLITUDE_API_KEY,n,{defaultTracking:!0})}catch(e){console.error(e)}},[]);let e=(0,iA.Z)({components:{MuiTooltip:{styleOverrides:{tooltip:{zIndex:1500}}}}});return(0,i.jsx)(iN.Z,{theme:e,children:(0,i.jsx)(f.x,{children:(0,i.jsx)(b.aH,{client:B,children:(0,i.jsx)(ey.F0,{hook:iI,children:(0,i.jsx)(nJ,{children:(0,i.jsxs)(o.k,{direction:"column",height:"100vh",children:[(0,i.jsx)(la,{}),(0,i.jsx)(ld,{}),(0,i.jsx)(iF,{children:(0,i.jsxs)(l.xu,{p:0,overflow:"auto",flex:"1",style:{contain:"size"},children:[(0,i.jsx)(ls,{path:"/lineage",children:(0,i.jsx)(ll,{})}),(0,i.jsxs)(ey.rs,{children:[(0,i.jsx)(ey.AW,{path:"/query",children:(0,i.jsx)(iT,{})}),(0,i.jsx)(ey.AW,{path:"/checks/:slug*",children:(0,i.jsx)(iC,{})}),(0,i.jsx)(ey.AW,{path:"/runs/:runId",children:e=>{let{runId:n}=e;return(0,i.jsx)(iM,{runId:n})}}),(0,i.jsx)(ey.AW,{path:"/ssr",children:(0,i.jsx)(v.E,{size:"xs",isIndeterminate:!0})}),(0,i.jsx)(ey.AW,{children:(0,i.jsx)(ey.l_,{to:"/lineage"})})]})]})})]})})})})})})}},91074:function(){},87679:function(){},81974:function(){},15080:function(){}},function(e){e.O(0,[634,145,170,591,521,462,531,498,43,987,182,710,615,971,495,599,512,378,132,584,744],function(){return e(e.s=27709)}),_N_E=e.O()}]);